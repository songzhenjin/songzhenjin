<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>ã€å‰ç«¯ã€‘Vueæ ¸å¿ƒåŸºç¡€(Vue2.x &amp; Vue3.x &amp; å¸¸ç”¨ç»„ä»¶åº“) | ç ”å‹</title><meta name="keywords" content="Vue"><meta name="author" content="ç ”å‹"><meta name="copyright" content="ç ”å‹"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="referrer" content="no-referrer"><meta name="description" content="Vue æ ¸å¿ƒåŸºç¡€ å®˜ç½‘ä¼ é€é—¨  Vue æ˜¯åŠ¨æ€æ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼ JavaScript æ¡†æ¶ Vue å€Ÿé‰´ Angular çš„æ¨¡æ¿å’Œæ•°æ®ç»‘å®šæŠ€æœ¯ï¼ŒReact çš„ç»„ä»¶åŒ–å’Œè™šæ‹Ÿ DOM æŠ€æœ¯  æ•°æ®é©±åŠ¨è§†å›¾ MVVMæ¨¡å‹  Mï¼šæ¨¡å‹Modelï¼Œdataä¸­çš„æ•°æ® Vï¼šè§†å›¾Viewï¼Œæ¨¡æ¿ä»£ç  VMï¼šè§†å›¾æ¨¡å‹ViewModelï¼ŒVueå®ä¾‹  è§‚å¯Ÿå‘ç°  dataä¸­æ‰€æœ‰çš„å±æ€§ï¼Œæœ€åéƒ½å‡ºç°åœ¨äº†vmèº«ä¸Š vmèº«">
<meta property="og:type" content="article">
<meta property="og:title" content="ã€å‰ç«¯ã€‘Vueæ ¸å¿ƒåŸºç¡€(Vue2.x &amp; Vue3.x &amp; å¸¸ç”¨ç»„ä»¶åº“)">
<meta property="og:url" content="https://blog.cilicili.xyz/posts/4070eb25.html">
<meta property="og:site_name" content="ç ”å‹">
<meta property="og:description" content="Vue æ ¸å¿ƒåŸºç¡€ å®˜ç½‘ä¼ é€é—¨  Vue æ˜¯åŠ¨æ€æ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼ JavaScript æ¡†æ¶ Vue å€Ÿé‰´ Angular çš„æ¨¡æ¿å’Œæ•°æ®ç»‘å®šæŠ€æœ¯ï¼ŒReact çš„ç»„ä»¶åŒ–å’Œè™šæ‹Ÿ DOM æŠ€æœ¯  æ•°æ®é©±åŠ¨è§†å›¾ MVVMæ¨¡å‹  Mï¼šæ¨¡å‹Modelï¼Œdataä¸­çš„æ•°æ® Vï¼šè§†å›¾Viewï¼Œæ¨¡æ¿ä»£ç  VMï¼šè§†å›¾æ¨¡å‹ViewModelï¼ŒVueå®ä¾‹  è§‚å¯Ÿå‘ç°  dataä¸­æ‰€æœ‰çš„å±æ€§ï¼Œæœ€åéƒ½å‡ºç°åœ¨äº†vmèº«ä¸Š vmèº«">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/songzhenjin/image/raw/master/img/say-hello-to-new-people.svg">
<meta property="article:published_time" content="2022-09-06T13:06:54.000Z">
<meta property="article:modified_time" content="2022-09-09T12:14:38.965Z">
<meta property="article:author" content="ç ”å‹">
<meta property="article:tag" content="Vue">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/songzhenjin/image/raw/master/img/say-hello-to-new-people.svg"><link rel="shortcut icon" href="https://gitee.com/songzhenjin/image/raw/master/img/EwW1_GfqivZ02MW.png"><link rel="canonical" href="https://blog.cilicili.xyz/posts/4070eb25"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç®€"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'mediumZoom',
  Snackbar: undefined,
  source: {
    jQuery: 'https://fastly.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://fastly.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://fastly.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://fastly.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://fastly.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-09-09 20:14:38'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><link rel="stylesheet" href="/css/custom.css"><style type="text/css">#toggle-sidebar {left:100px}</style><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/songzhenjin/my-profile@1.0.2/twikoo_beautify.css"  media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/songzhenjin/songzhenjin@1.0/css/universe.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/songzhenjin/my-profile@1.0.2/normal.css"><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/songzhenjin/songzhenjin@1.0/css/rightmenu.css"><svg aria-hidden="true" style="position:absolute; overflow:hidden; width:0; height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.2.0"><link rel="alternate" href="/atom.xml" title="ç ”å‹" type="application/atom+xml">
</head><body><div id="loading-box"><div class="centered"><div class="blob-1"></div><div class="blob-2"></div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/avatar.jpg" onerror="onerror=null;src='/img/loading.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">23</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">19</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">4</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> æ–‡ç« </span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fas fa-comment"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹äººå¸</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa-solid fa-fan"></i><span> å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">ç ”å‹</a></span><div id="he-plugin-simple"></div><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> æ–‡ç« </span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fas fa-comment"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹äººå¸</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa-solid fa-fan"></i><span> å…³äº</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">ã€å‰ç«¯ã€‘Vueæ ¸å¿ƒåŸºç¡€(Vue2.x &amp; Vue3.x &amp; å¸¸ç”¨ç»„ä»¶åº“)</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2022-09-06T13:06:54.000Z" title="å‘è¡¨äº 2022-09-06 21:06:54">2022-09-06</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2022-09-09T12:14:38.965Z" title="æ›´æ–°äº 2022-09-09 20:14:38">2022-09-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF%F0%9F%92%A5/">å‰ç«¯ğŸ’¥</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="ã€å‰ç«¯ã€‘Vueæ ¸å¿ƒåŸºç¡€(Vue2.x &amp; Vue3.x &amp; å¸¸ç”¨ç»„ä»¶åº“)"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div><article class="post-content" id="article-container"><h1>Vue æ ¸å¿ƒåŸºç¡€</h1>
<p><a target="_blank" rel="noopener" href="https://cn.vuejs.org/">å®˜ç½‘ä¼ é€é—¨</a></p>
<blockquote>
<p>Vue æ˜¯åŠ¨æ€æ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼ JavaScript æ¡†æ¶</p>
<p>Vue å€Ÿé‰´ Angular çš„æ¨¡æ¿å’Œæ•°æ®ç»‘å®šæŠ€æœ¯ï¼ŒReact çš„ç»„ä»¶åŒ–å’Œè™šæ‹Ÿ DOM æŠ€æœ¯</p>
</blockquote>
<h2 id="æ•°æ®é©±åŠ¨è§†å›¾">æ•°æ®é©±åŠ¨è§†å›¾</h2>
<h3 id="MVVMæ¨¡å‹">MVVMæ¨¡å‹</h3>
<ul>
<li>Mï¼šæ¨¡å‹<strong>Model</strong>ï¼Œ<code>data</code>ä¸­çš„æ•°æ®</li>
<li>Vï¼šè§†å›¾<strong>View</strong>ï¼Œæ¨¡æ¿ä»£ç </li>
<li>VMï¼šè§†å›¾æ¨¡å‹<strong>ViewModel</strong>ï¼Œ<code>Vueå®ä¾‹</code></li>
</ul>
<p>è§‚å¯Ÿå‘ç°</p>
<ul>
<li><code>data</code>ä¸­æ‰€æœ‰çš„å±æ€§ï¼Œæœ€åéƒ½å‡ºç°åœ¨äº†<code>vm</code>èº«ä¸Š</li>
<li><code>vm</code>èº«ä¸Šæ‰€æœ‰çš„å±æ€§åŠ<code>VueåŸå‹</code>èº«ä¸Šæ‰€æœ‰çš„å±æ€§ï¼Œåœ¨<code>Vueæ¨¡æ¿</code>ä¸­éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨</li>
</ul>
<p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/1643097677438-36b4834c-18e8-4cd0-aa8e-c5f154e6bde0.jpeg" alt="img"></p>
<p>MVVMï¼šæ•°æ®é©±åŠ¨è§†å›¾ï¼Œå³é€šè¿‡ä¿®æ”¹è§†å›¾å°±èƒ½æ”¹å˜æ•°æ®ï¼Œåè¿‡æ¥ä¹Ÿå¯ä»¥ã€‚</p>
<p>æœ¬è´¨ï¼š<strong>äº‹ä»¶ + æ–¹æ³• + æ”¹å˜æ•°æ® = ViewModel</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> @<span class="attr">click</span>=<span class="string">&quot;changeName&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span>  // äº‹ä»¶</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123;   </span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		<span class="attr">name</span>:<span class="string">&#x27;vue&#x27;</span>,</span><br><span class="line">		<span class="attr">list</span>: [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>]</span><br><span class="line">	&#125;</span><br><span class="line">&#125;  <span class="comment">// Model</span></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">changeName</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;åŒè¶Š&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;  <span class="comment">// æ–¹æ³•</span></span><br></pre></td></tr></table></figure>
<h2 id="æ•°æ®ä»£ç†">æ•°æ®ä»£ç†</h2>
<h3 id="Object-defineProperty-çš„ä½¿ç”¨">Object.defineProperty() çš„ä½¿ç”¨</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Vue&#x27;</span>,</span><br><span class="line">  <span class="attr">sex</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> number = <span class="number">19</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é…ç½®ä¸€</span></span><br><span class="line"><span class="comment">// å‚æ•°ï¼šå¯¹è±¡ã€å±æ€§åã€é…ç½®</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(person, <span class="string">&#x27;age&#x27;</span>, &#123;</span><br><span class="line">  <span class="comment">// å±æ€§å€¼</span></span><br><span class="line">  <span class="attr">value</span>: <span class="number">21</span>,</span><br><span class="line">  <span class="comment">// å±æ€§æ˜¯å¦å¯ä¿®æ”¹</span></span><br><span class="line">  <span class="attr">writable</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// å±æ€§æ˜¯å¦å¯æšä¸¾ï¼ˆéå†ï¼‰</span></span><br><span class="line">  <span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// å±æ€§æ˜¯å¦å¯åˆ é™¤</span></span><br><span class="line">  <span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(person)</span><br><span class="line"></span><br><span class="line"><span class="comment">// é…ç½®äºŒ</span></span><br><span class="line"><span class="comment">// getterã€setter ä¸èƒ½å’Œ valueã€writable åŒæ—¶æŒ‡å®š</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(person, <span class="string">&#x27;age&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">enumberable</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;age å±æ€§è¢«è¯»å–&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> number</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">set</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;age å±æ€§è¢«ä¿®æ”¹&#x27;</span>, value)</span><br><span class="line">    number = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="ä½•ä¸ºæ•°æ®ä»£ç†">ä½•ä¸ºæ•°æ®ä»£ç†</h3>
<p>æ•°æ®ä»£ç†ï¼šé€šè¿‡ä¸€ä¸ªå¯¹è±¡å¯¹å¦ä¸€ä¸ªå¯¹è±¡çš„å±æ€§è¿›è¡Œæ“ä½œ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">a</span>: <span class="number">21</span> &#125;</span><br><span class="line"><span class="keyword">let</span> obj2 = &#123; <span class="attr">b</span>: <span class="number">10</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj2, <span class="string">&#x27;a&#x27;</span>, &#123;</span><br><span class="line">  <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> obj.<span class="property">a</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">set</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    obj.<span class="property">a</span> = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">obj2.<span class="property">a</span> <span class="comment">// 21</span></span><br><span class="line">obj2.<span class="property">a</span> = <span class="number">1000</span></span><br><span class="line">obj.<span class="property">a</span> <span class="comment">// 1000</span></span><br></pre></td></tr></table></figure>
<h3 id="Vue-ä¸­çš„æ•°æ®ä»£ç†">Vue ä¸­çš„æ•°æ®ä»£ç†</h3>
<p><img src= "/img/loading.gif" data-lazy-src="https://brucecai55520.gitee.io/bruceblog/assets/img/%E6%95%B0%E6%8D%AE%E4%BB%A3%E7%90%86.d776171e.png" alt="img"></p>
<p>Vue ä¸­é€šè¿‡ vm å®ä¾‹å¯¹è±¡ä»£ç†å¯¹ data å¯¹è±¡å±æ€§çš„æ“ä½œï¼Œè®©æˆ‘ä»¬æ›´æ–¹ä¾¿æ“ä½œ data ä¸­çš„æ•°æ®ã€‚</p>
<p>data ä¸­çš„æ•°æ®å®é™…ä¸Šè¢«å­˜åœ¨ <code>vm._data</code> å±æ€§ä¸Šï¼Œå¦‚æœä¸è¿›è¡Œä»£ç†ï¼Œä½¿ç”¨èµ·æ¥å¾ˆä¸æ–¹ä¾¿ã€‚</p>
<p>é€šè¿‡ <code>Object.defineProperty()</code> ç»™ vm æ·»åŠ å±æ€§ï¼Œå¹¶ä¸”æŒ‡å®š getter å’Œ setterï¼Œé€šè¿‡ getter å’Œ setter è®¿é—®å’Œä¿®æ”¹ data å¯¹åº”æ˜¯å±æ€§ã€‚</p>
<h2 id="Vue-ç›‘æµ‹æ•°æ®çš„åŸç†">Vue ç›‘æµ‹æ•°æ®çš„åŸç†</h2>
<blockquote>
<p>ç›‘æµ‹æ•°æ®ï¼Œå³ Vue æ˜¯å¦‚ä½•ç›‘å¬æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œä»è€Œé‡æ–°è§£ææ¨¡æ¿æ¸²æŸ“é¡µé¢çš„ã€‚Vue ä¼šç›‘æµ‹ data ä¸­æ‰€æœ‰å±‚çº§çš„æ•°æ®ã€‚</p>
</blockquote>
<h3 id="Vue-ç›‘æµ‹å¯¹è±¡æ•°æ®">Vue ç›‘æµ‹å¯¹è±¡æ•°æ®</h3>
<ul>
<li>
<p>åŸç†ï¼šé€šè¿‡ <code>Object.defineProperty()</code> ä¸ºå±æ€§æ·»åŠ  <code>getter</code>ã€<code>setter</code> ï¼Œå¯¹å±æ€§çš„è¯»å–ã€ä¿®æ”¹è¿›è¡Œæ‹¦æˆªï¼Œå³æ•°æ®åŠ«æŒ</p>
</li>
<li>
<p>å­˜åœ¨é—®é¢˜ï¼š</p>
<ul>
<li>å¯¹è±¡æ–°å¢åŠ çš„å±æ€§ï¼Œé»˜è®¤ä¸åšå“åº”å¼å¤„ç†</li>
<li>å¯¹è±¡åˆ é™¤å±æ€§ï¼Œä¹Ÿä¸æ˜¯å“åº”å¼çš„</li>
</ul>
</li>
<li>
<p>è§£å†³åŠæ³•ï¼Œä½¿ç”¨å¦‚ä¸‹ API ï¼š</p>
<ul>
<li><code>Vue.set(target, propertyName/index, value)</code></li>
<li><code>vm.$set(target, propertyName/index, value)</code></li>
<li><code>Vue.delete(target, propertyName/index)</code></li>
<li><code>vm.$delete(target, propertyName/index)</code></li>
</ul>
</li>
<li>
<p><code>Vue.set()</code> å’Œ <code>vm.$set()</code> ä¸èƒ½ç»™ vm æˆ– vm çš„æ ¹æ•°æ®å¯¹è±¡æ·»åŠ å±æ€§ï¼ˆå³ dataï¼‰</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç®€å•æ¨¡æ‹Ÿå®ç°å¯¹è±¡çš„æ•°æ®ç›‘æµ‹ï¼ŒVue æ›´å®Œå–„</span></span><br><span class="line"><span class="comment">// Vue é€šè¿‡ vm.name å³å¯ä¿®æ”¹</span></span><br><span class="line"><span class="comment">// Vue å®ç°æ·±å±‚ç›‘å¬</span></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Vue&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">99</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Observer</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> keys = <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj)</span><br><span class="line"></span><br><span class="line">  keys.<span class="title function_">forEach</span>(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="variable language_">this</span>, key, &#123;</span><br><span class="line">      <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> obj[key]</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="title function_">set</span>(<span class="params">value</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ•°æ®è¢«ä¿®æ”¹ï¼Œé‡æ–°è§£ææ¨¡æ¿...&#x27;</span>)</span><br><span class="line">        obj[key] = value</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> vm = &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> observer = <span class="keyword">new</span> <span class="title class_">Observer</span>(person)</span><br><span class="line">vm.<span class="property">_data</span> = observer</span><br></pre></td></tr></table></figure>
<h3 id="Vue-ç›‘æµ‹æ•°ç»„">Vue ç›‘æµ‹æ•°ç»„</h3>
<ul>
<li>åŸç†ï¼šé€šè¿‡é‡å†™æ•°ç»„çš„ API å®ç°æ‹¦æˆªï¼š<code>push()ã€pop()ã€shift()ã€unshift()ã€splice()ã€sort()ã€reverse()</code></li>
<li>7 ä¸ª API ä¹‹æ‰€ä»¥æ˜¯å“åº”å¼çš„ï¼Œæ˜¯å› ä¸º Vue å¯¹è¿™äº›æ–¹æ³•è¿›è¡Œäº†<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/list.html#%E6%95%B0%E7%BB%84%E6%9B%B4%E6%96%B0%E6%A3%80%E6%B5%8B">åŒ…è£¹ </a>ï¼Œå³äºŒæ¬¡å°è£…ã€‚åšäº†ä¸¤ä»¶äº‹ï¼šè°ƒç”¨å¯¹åº”çš„åŸç”Ÿæ–¹æ³•æ›´æ–°æ•°ç»„ &amp; é‡æ–°è§£ææ¨¡æ¿æ›´æ–°é¡µé¢</li>
<li>å­˜åœ¨é—®é¢˜ï¼š
<ul>
<li>ç›´æ¥é€šè¿‡æ•°ç»„ä¸‹æ ‡ä¿®æ”¹æ˜¯<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/reactivity.html#%E5%AF%B9%E4%BA%8E%E6%95%B0%E7%BB%84">éå“åº”å¼çš„</a></li>
</ul>
</li>
<li>è§£å†³åŠæ³•ï¼š
<ul>
<li>ä½¿ç”¨ 7 ä¸ª API ä¿®æ”¹æ•°ç»„</li>
<li><code>Vue.set()</code>ã€<code>vm.$set()</code></li>
<li><code>Vue.delete()</code>ã€<code>vm.$delete()</code></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000015783546">æ€å¦æ–‡ç« </a></li>
</ul>
<h2 id="æ’å€¼è¯­æ³•">æ’å€¼è¯­æ³•</h2>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>ç”¨æˆ·åï¼š&#123;&#123; username &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>å¯†ç &#123;&#123; password &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- &#123;&#123;&#125;&#125; æ”¯æŒç®€ JS è¡¨è¾¾å¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; flag ? 111 : 000&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;docsify&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="number">55520</span>,</span><br><span class="line">    <span class="attr">flag</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å±æ€§ç»‘å®šæŒ‡ä»¤-v-bind">å±æ€§ç»‘å®šæŒ‡ä»¤ v-bind</h2>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-bind:placeholder</span>=<span class="string">&quot;desc&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- v-bind ç®€å†™å½¢å¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;url&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;è¿™æ˜¯ä¸€å¼ å›¾ç‰‡&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- v-bind æ”¯æŒ JS è¡¨è¾¾å¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:id</span>=<span class="string">&quot;&#x27;hello&#x27; + 1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">desc</span>: <span class="string">&#x27;è¯·è¾“å…¥ç”¨æˆ·å&#x27;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;www.baidu.com&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åŒå‘ç»‘å®šæŒ‡ä»¤-v-model">åŒå‘ç»‘å®šæŒ‡ä»¤ v-model</h2>
<p><code>v-model</code> ç”¨äºè¡¨å•å…ƒç´ å¦‚ <code>input</code>ï¼Œ<code>textarea</code>ï¼Œ<code>select</code> ã€‚</p>
<h3 id="v-model-åŸºç¡€ç”¨æ³•">v-model åŸºç¡€ç”¨æ³•</h3>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; username &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model:value</span>=<span class="string">&quot;username&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;username&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; province &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">v-model</span>=<span class="string">&quot;province&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>è¯·é€‰æ‹©<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span>åŒ—äº¬<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>&gt;</span>ä¸Šæµ·<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;3&quot;</span>&gt;</span>å¹¿å·<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="v-model-æŒ‡ä»¤ä¿®é¥°ç¬¦">v-model æŒ‡ä»¤ä¿®é¥°ç¬¦</h3>
<table>
<thead>
<tr>
<th>ä¿®é¥°ç¬¦</th>
<th>ä½œç”¨</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>.number</td>
<td>å°†ç”¨æˆ·è¾“å…¥è½¬ä¸ºæ•°å€¼ç±»å‹</td>
<td><code>&lt;input v-model.number=&quot;age&quot; /&gt;</code></td>
</tr>
<tr>
<td>.trim</td>
<td>åˆ é™¤è¾“å…¥çš„é¦–å°¾ç©ºç™½å­—ç¬¦</td>
<td><code>&lt;input v-model.trim=&quot;msg&quot;&gt;</code></td>
</tr>
<tr>
<td>.lazy</td>
<td>å½“å¤±å»ç„¦ç‚¹æ—¶ï¼Œæ‰æ›´æ–°æ•°æ®ï¼Œç±»ä¼¼é˜²æŠ–</td>
<td><code>&lt;input v-model.lazy=&quot;msg&quot;&gt;</code></td>
</tr>
</tbody>
</table>
<h3 id="v-model-æ”¶é›†è¡¨å•æ•°æ®">v-model æ”¶é›†è¡¨å•æ•°æ®</h3>
<ul>
<li>
<p><code>&lt;input type=&quot;text&quot;/&gt;</code> ï¼Œæ”¶é›†çš„æ˜¯ <code>value</code> å€¼ï¼Œç”¨æˆ·è¾“å…¥çš„å°±æ˜¯ <code>value</code> å€¼ã€‚</p>
</li>
<li>
<p><code>&lt;input type=&quot;radio&quot;/&gt;</code> ï¼Œæ”¶é›†çš„æ˜¯ <code>value</code> å€¼ï¼Œä¸”è¦ç»™æ ‡ç­¾é…ç½® <code>value</code> å€¼ã€‚</p>
</li>
<li>
<p><code>&lt;input type=&quot;checkbox&quot;/&gt;</code></p>
<ul>
<li>æ²¡æœ‰é…ç½® <code>value</code> å±æ€§ï¼Œæ”¶é›†çš„å°±æ˜¯ <code>checked</code></li>
<li>é…ç½®äº† valueå±æ€§:
<ul>
<li><code>v-model</code> çš„åˆå§‹å€¼æ˜¯éæ•°ç»„ï¼Œé‚£ä¹ˆæ”¶é›†çš„å°±æ˜¯ <code>checked</code></li>
<li><code>v-model</code> çš„åˆå§‹å€¼æ˜¯æ•°ç»„ï¼Œé‚£ä¹ˆæ”¶é›†çš„çš„å°±æ˜¯ <code>value</code> ç»„æˆçš„æ•°ç»„</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">form</span> @<span class="attr">submit.prevent</span>=<span class="string">&quot;demo&quot;</span>&gt;</span></span><br><span class="line">    è´¦å·ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model.trim</span>=<span class="string">&quot;userInfo.account&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.password&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    å¹´é¾„ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model.number</span>=<span class="string">&quot;userInfo.age&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    æ€§åˆ«ï¼š ç”·<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;male&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    å¥³<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;female&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    çˆ±å¥½ï¼š å­¦ä¹ <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;study&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    æ‰“æ¸¸æˆ<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;game&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    åƒé¥­<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;eat&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    æ‰€å±æ ¡åŒº</span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.city&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>è¯·é€‰æ‹©æ ¡åŒº<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;beijing&quot;</span>&gt;</span>åŒ—äº¬<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;shanghai&quot;</span>&gt;</span>ä¸Šæµ·<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;shenzhen&quot;</span>&gt;</span>æ·±åœ³<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;wuhan&quot;</span>&gt;</span>æ­¦æ±‰<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    å…¶ä»–ä¿¡æ¯ï¼š</span><br><span class="line">    <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">v-model.lazy</span>=<span class="string">&quot;userInfo.other&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.agree&quot;</span> /&gt;</span>é˜…è¯»æ¥å—åè®®</span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>æäº¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">userInfo</span>:&#123;</span><br><span class="line">      <span class="attr">account</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="attr">password</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">      <span class="attr">sex</span>:<span class="string">&#x27;female&#x27;</span>,</span><br><span class="line">      <span class="attr">hobby</span>:[],</span><br><span class="line">      <span class="attr">city</span>:<span class="string">&#x27;beijing&#x27;</span>,</span><br><span class="line">      <span class="attr">other</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="attr">agree</span>:<span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">demo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">userInfo</span>))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="äº‹ä»¶ç»‘å®šæŒ‡ä»¤-v-on">äº‹ä»¶ç»‘å®šæŒ‡ä»¤ v-on</h2>
<h3 id="v-on-åŸºç¡€ç”¨æ³•">v-on åŸºç¡€ç”¨æ³•</h3>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>countçš„å€¼ï¼š&#123;&#123; count &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;add&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- v-on ç¼©å†™å½¢å¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;add&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">add</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">count</span>++</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="äº‹ä»¶å‚æ•°å¯¹è±¡">äº‹ä»¶å‚æ•°å¯¹è±¡</h3>
<p>å¦‚æœäº‹ä»¶å¤„ç†å‡½æ•°æ²¡æœ‰ä¼ å‚ï¼Œåˆ™é»˜è®¤ä¼šä¼ ä¸€ä¸ªæ—¶é—´å‚æ•°å¯¹è±¡ <code>$event</code> ï¼Œé€šè¿‡å®ƒå¯ä»¥è·å–è§¦å‘äº‹ä»¶çš„å…ƒç´ ï¼Œå¹¶è¿›è¡Œç›¸å…³æ“ä½œã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">add</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    e.<span class="property">target</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">count</span>++</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœäº‹ä»¶å¤„ç†å‡½æ•°ä¼ é€’å‚æ•°äº†ï¼Œåˆ™é»˜è®¤çš„ <code>$event</code> ä¼šè¢«è¦†ç›–ï¼Œéœ€è¦æ‰‹åŠ¨è¿›è¡Œä¼ é€’ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;add(2, $event)&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">add</span>(<span class="params">step, e</span>) &#123;</span><br><span class="line">    e.<span class="property">target</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">count</span> += step</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="äº‹ä»¶ä¿®é¥°ç¬¦">äº‹ä»¶ä¿®é¥°ç¬¦</h3>
<table>
<thead>
<tr>
<th>äº‹ä»¶ä¿®é¥°ç¬¦</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>.prevent</strong></td>
<td>é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Œå¦‚ a é“¾æ¥è·³è½¬ã€è¡¨å•æäº¤</td>
</tr>
<tr>
<td><strong>.stop</strong></td>
<td>é˜»æ­¢äº‹ä»¶å†’æ³¡</td>
</tr>
<tr>
<td>.once</td>
<td>ç»‘å®šçš„äº‹ä»¶åªè§¦å‘ 1 æ¬¡</td>
</tr>
<tr>
<td>.capture</td>
<td>ä»¥æ•è·æ¨¡å¼è§¦å‘äº‹ä»¶å¤„ç†å‡½æ•°</td>
</tr>
<tr>
<td>.self</td>
<td>åªæœ‰åœ¨ <code>event.target</code> æ˜¯å½“å‰å…ƒç´ è‡ªèº«æ—¶è§¦å‘äº‹ä»¶å¤„ç†å‡½æ•°</td>
</tr>
<tr>
<td>.passive</td>
<td>äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºç«‹å³æ‰§è¡Œï¼Œæ— éœ€ç­‰å¾…äº‹ä»¶å›è°ƒæ‰§è¡Œå®Œæ¯•</td>
</tr>
</tbody>
</table>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;www.baidu.com&quot;</span> @<span class="attr">click.prevent</span>=<span class="string">&quot;fn&quot;</span>&gt;</span>é˜»æ­¢é“¾æ¥è·³è½¬<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> @<span class="attr">click.stop</span>=<span class="string">&quot;handleClick&quot;</span>&gt;</span>é˜»æ­¢äº‹ä»¶å†’æ³¡<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- .passive ï¼šå¦‚ `onwheel` é¼ æ ‡æ»šè½®äº‹ä»¶ï¼Œæ˜¯å…ˆæ‰§è¡Œäº‹ä»¶çš„å›è°ƒå†è¿›è¡Œæ»šåŠ¨ã€‚ --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¦‚æœå›è°ƒæ¯”è¾ƒè€—æ—¶ï¼Œé‚£ä¹ˆä¼šç­‰ä¸€æ®µæ—¶é—´æ‰å‘ç”Ÿæ»šåŠ¨ã€‚ æ·»åŠ  .passive åï¼Œåˆ™å…ˆè¿›è¡Œæ»šåŠ¨å†æ‰§è¡Œå›è°ƒã€‚--&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="æŒ‰é”®ä¿®é¥°ç¬¦">æŒ‰é”®ä¿®é¥°ç¬¦</h3>
<ol>
<li>Vue ä¸­å¸¸ç”¨çš„æŒ‰é”®åˆ«åï¼š</li>
</ol>
<ul>
<li>å›è½¦ =&gt; enter</li>
<li>åˆ é™¤ =&gt; delete (æ•è·â€œåˆ é™¤â€å’Œâ€œé€€æ ¼â€é”®)</li>
<li>é€€å‡º =&gt; esc</li>
<li>ç©ºæ ¼ =&gt; space</li>
<li>æ¢è¡Œ =&gt; tab (ç‰¹æ®Šï¼Œå¿…é¡»é…åˆ keydown å»ä½¿ç”¨)</li>
<li>ä¸Š =&gt; up</li>
<li>ä¸‹ =&gt; down</li>
<li>å·¦ =&gt; left</li>
<li>å³ =&gt; right</li>
</ul>
<ol start="3">
<li>
<p>Vue æœªæä¾›åˆ«åçš„æŒ‰é”®ï¼Œå¯ä»¥ä½¿ç”¨æŒ‰é”®åŸå§‹çš„ <code>key</code> å€¼å»ç»‘å®šï¼Œä½†æ³¨æ„è¦è½¬ä¸º kebab-caseï¼ˆçŸ­æ¨ªçº¿å‘½åï¼‰</p>
</li>
<li>
<p>ç³»ç»Ÿä¿®é¥°é”®ï¼ˆç”¨æ³•ç‰¹æ®Šï¼‰ï¼šctrlã€altã€shiftã€metaï¼ˆå³ win é”®ï¼‰</p>
</li>
</ol>
<ul>
<li>é…åˆ keyup ä½¿ç”¨ï¼šæŒ‰ä¸‹ä¿®é¥°é”®çš„åŒæ—¶ï¼Œå†æŒ‰ä¸‹å…¶ä»–é”®ï¼Œéšåé‡Šæ”¾å…¶ä»–é”®ï¼Œäº‹ä»¶æ‰è¢«è§¦å‘ã€‚</li>
<li>é…åˆ keydown ä½¿ç”¨ï¼šæ­£å¸¸è§¦å‘äº‹ä»¶ã€‚</li>
</ul>
<ol start="5">
<li>
<p>å¯ä½¿ç”¨ keyCode å»æŒ‡å®šå…·ä½“çš„æŒ‰é”®ï¼Œæ­¤æ³•ä¸æ¨èï¼Œå› ä¸º keyCode ä»¥åå¯èƒ½åºŸé™¤</p>
</li>
<li>
<p><code>Vue.config.keyCodes.è‡ªå®šä¹‰é”®å = é”®ç </code> ï¼Œå¯ä»¥å»å®šåˆ¶æŒ‰é”®åˆ«å</p>
</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">keyup.enter</span>=<span class="string">&quot;submit&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">keyup.esc</span>=<span class="string">&quot;back&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">keydown.tab</span>=<span class="string">&quot;showInfo&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">keyup.caps-lock</span>=<span class="string">&quot;showInfo&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">keyup.huiche</span>=<span class="string">&quot;showInfo&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">keyup.13</span>=<span class="string">&quot;showInfo&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">  Vue.config.keyCodes.huiche = 13</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="æ¡ä»¶æ¸²æŸ“æŒ‡ä»¤">æ¡ä»¶æ¸²æŸ“æŒ‡ä»¤</h2>
<h3 id="åŸºç¡€ç”¨æ³•">åŸºç¡€ç”¨æ³•</h3>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">&quot;status === 200&quot;</span>&gt;</span>success<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-else-if</span>=<span class="string">&quot;status === 201&quot;</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-else</span>&gt;</span>yyy<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-show</span>=<span class="string">&quot;status === 404&quot;</span>&gt;</span>error<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- template åªèƒ½å’Œ v-if æ­é…ä½¿ç”¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">&quot;status === 200&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>111<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>222<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>333<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="v-if-å’Œ-v-show-çš„åŒºåˆ«">v-if å’Œ v-show çš„åŒºåˆ«</h3>
<p>å®ç°åŸç†ä¸åŒï¼š</p>
<ul>
<li><code>v-if</code> é€šè¿‡åˆ›å»ºæˆ–åˆ é™¤ DOM å…ƒç´ æ¥æ§åˆ¶å…ƒç´ çš„æ˜¾ç¤ºä¸éšè—</li>
<li><code>v-show</code> é€šè¿‡æ·»åŠ æˆ–åˆ é™¤å…ƒç´ çš„ <code>style=&quot;display: none&quot;</code> æ ·å¼æ¥æ§åˆ¶å…ƒç´ çš„æ˜¾ç¤ºä¸éšè—</li>
</ul>
<p>æ€§èƒ½æ¶ˆè€—ä¸åŒï¼š</p>
<ul>
<li><code>v-if</code> åˆ‡æ¢å¼€é”€æ›´é«˜ï¼Œå¦‚æœè¿è¡Œæ—¶æ¡ä»¶å¾ˆå°‘æ”¹å˜ï¼Œä½¿ç”¨ <code>v-if</code> æ›´å¥½</li>
<li><code>v-show</code> åˆå§‹æ¸²æŸ“å¼€é”€æ›´é«˜ï¼Œå¦‚æœåˆ‡æ¢é¢‘ç¹ï¼Œä½¿ç”¨ <code>v-show</code> æ›´å¥½</li>
</ul>
<h2 id="åˆ—è¡¨æ¸²æŸ“æŒ‡ä»¤-v-for">åˆ—è¡¨æ¸²æŸ“æŒ‡ä»¤ v-for</h2>
<h3 id="åŸºæœ¬ç”¨æ³•">åŸºæœ¬ç”¨æ³•</h3>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- éå†æ•°ç»„ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in list&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- éå†å¯¹è±¡ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(value, key) in obj&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;key&quot;</span>&gt;</span>&#123;&#123; key &#125;&#125; - &#123;&#123; value &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- éå†å­—ç¬¦ä¸² --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(char, index) in str&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span>&#123;&#123; index &#125;&#125; - &#123;&#123; char &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- éå†æ¬¡æ•° --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(number, index) in 5&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span>&#123;&#123; index &#125;&#125; - &#123;&#123; number &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">list</span>: [...],</span><br><span class="line">    <span class="attr">obj</span>: &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;Bruce&#x27;</span>,</span><br><span class="line">      <span class="attr">age</span>: <span class="number">88</span>,</span><br><span class="line">      <span class="attr">sex</span>: <span class="string">&#x27;unknown&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">str</span>: <span class="string">&#x27;hello vue&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="key-çš„ä½œç”¨">key çš„ä½œç”¨</h3>
<p><strong><code>key</code> çš„ä½œç”¨ï¼š</strong></p>
<ul>
<li>å½“åˆ—è¡¨çš„æ•°æ®å˜åŒ–æ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œvue ä¼šå°½å¯èƒ½çš„å¤ç”¨å·²å­˜åœ¨çš„ DOM å…ƒç´ ï¼Œä»è€Œæå‡æ¸²æŸ“çš„æ€§èƒ½ã€‚ä½†è¿™ç§é»˜è®¤çš„æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ï¼Œä¼šå¯¼è‡´æœ‰çŠ¶æ€çš„åˆ—è¡¨æ— æ³•è¢«æ­£ç¡®æ›´æ–°ã€‚</li>
<li>ä¸ºäº†ç»™ vue ä¸€ä¸ªæç¤ºï¼Œä»¥ä¾¿å®ƒèƒ½è·Ÿè¸ªæ¯ä¸ªèŠ‚ç‚¹çš„èº«ä»½ï¼Œä»è€Œåœ¨ä¿è¯æœ‰çŠ¶æ€çš„åˆ—è¡¨è¢«æ­£ç¡®æ›´æ–°çš„å‰æä¸‹ï¼Œæå‡æ¸²æŸ“çš„æ€§èƒ½ã€‚æ­¤æ—¶ï¼Œéœ€è¦ä¸ºæ¯é¡¹æä¾›ä¸€ä¸ªå”¯ä¸€çš„ key å±æ€§ã€‚</li>
<li><code>key</code> æ˜¯è™šæ‹Ÿ DOM å¯¹è±¡çš„æ ‡è¯†ï¼Œå¯æé«˜é¡µé¢æ›´æ–°æ¸²æŸ“çš„æ•ˆç‡ã€‚å½“æ•°æ®å˜åŒ–æ—¶ï¼ŒVue ä¼šæ ¹æ®æ–°æ•°æ®ç”Ÿæˆæ–°çš„è™šæ‹Ÿ DOMï¼Œéšåè¿›è¡Œæ–°æ—§è™šæ‹Ÿ DOM çš„å·®å¼‚æ¯”è¾ƒ</li>
</ul>
<p><strong>æ¯”è¾ƒè§„åˆ™</strong></p>
<ul>
<li>æ—§è™šæ‹Ÿ DOM æ‰¾åˆ°å’Œæ–°è™šæ‹Ÿ DOM ç›¸åŒçš„ keyï¼š
<ul>
<li>è‹¥å†…å®¹æ²¡å˜ï¼Œç›´æ¥å¤ç”¨çœŸå® DOM</li>
<li>è‹¥å†…å®¹æ”¹å˜ï¼Œç”Ÿæˆæ–°çš„çœŸå® DOMï¼Œæ›¿æ¢æ—§çš„çœŸå® DOM</li>
</ul>
</li>
<li>æ—§è™šæ‹Ÿ DOM æœªæ‰¾åˆ°å’Œæ–°è™šæ‹Ÿ DOM ç›¸åŒçš„ keyï¼šåˆ›å»ºæ–°çš„çœŸå® DOMï¼Œæ¸²æŸ“åˆ°é¡µé¢</li>
</ul>
<p><strong><code>key</code> çš„æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<ul>
<li>key çš„å€¼åªèƒ½æ˜¯<strong>å­—ç¬¦ä¸²</strong>æˆ–<strong>æ•°å­—</strong>ç±»å‹</li>
<li>key çš„å€¼å¿…é¡»å…·æœ‰å”¯ä¸€æ€§ï¼ˆå³ï¼škey çš„å€¼ä¸èƒ½é‡å¤ï¼‰</li>
<li>å»ºè®®æŠŠæ•°æ®é¡¹ id å±æ€§çš„å€¼ä½œä¸º key çš„å€¼ï¼ˆå› ä¸º id å±æ€§çš„å€¼å…·æœ‰å”¯ä¸€æ€§ï¼‰</li>
<li>ä½¿ç”¨ index çš„å€¼å½“ä½œ key çš„å€¼æ²¡æœ‰æ„ä¹‰ï¼ˆå› ä¸º index çš„å€¼ä¸å…·æœ‰å”¯ä¸€æ€§ï¼‰</li>
<li>å»ºè®®ä½¿ç”¨ v-for æŒ‡ä»¤æ—¶ä¸€å®šè¦æŒ‡å®š key çš„å€¼ï¼ˆæ—¢æå‡æ€§èƒ½ã€åˆé˜²æ­¢åˆ—è¡¨çŠ¶æ€ç´Šä¹±ï¼‰</li>
</ul>
<p><img src= "/img/loading.gif" data-lazy-src="https://brucecai55520.gitee.io/bruceblog/assets/img/key.2e34b3cc.png" alt="keyçš„ä½œç”¨"></p>
<h2 id="å…¶å®ƒå†…ç½®æŒ‡ä»¤">å…¶å®ƒå†…ç½®æŒ‡ä»¤</h2>
<h3 id="v-text">v-text</h3>
<p><code>v-text</code> æŒ‡ä»¤ä¼šè¦†ç›–å…ƒç´ é»˜è®¤å€¼ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-text</span>=<span class="string">&quot;username&quot;</span>&gt;</span>è¿™æ®µå†…å®¹ä¼šè¢«è¦†ç›–<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> &#123; <span class="attr">username</span>: <span class="string">&quot;Bruce&quot;</span> &#125; &#125;</span><br></pre></td></tr></table></figure>
<h3 id="v-html">v-html</h3>
<blockquote>
<p>v-html å­˜åœ¨å®‰å…¨é—®é¢˜ï¼Œå®¹æ˜“å¯¼è‡´ XSS æ”»å‡»</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-html</span>=<span class="string">&quot;desc&quot;</span>&gt;</span>åŸæœ¬å†…å®¹è¢«è¦†ç›–<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">desc</span>: <span class="string">&#x27;&lt;h1 style=&quot;color: red&quot;&gt;çº¢è‰²æ ‡é¢˜&lt;/h1&gt;&#x27;</span>ï¼Œ</span><br><span class="line">    <span class="attr">str</span>: <span class="string">&#x27;&lt;a href=&quot;http://www.baidu.com?&quot;+document.cookie&gt;å…„å¼Ÿæˆ‘æ‰¾åˆ°ä½ æƒ³è¦çš„èµ„æºäº†ï¼Œå¿«æ¥ï¼&lt;/a&gt;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="v-cloak">v-cloak</h3>
<ul>
<li>æœ¬è´¨æ˜¯ä¸€ä¸ªç‰¹æ®Šå±æ€§ï¼ŒVue å®ä¾‹åˆ›å»ºå®Œæ¯•å¹¶æ¥ç®¡å®¹å™¨åï¼Œä¼šåˆ é™¤ <code>v-cloak</code> å±æ€§</li>
<li>ä½¿ç”¨ CSS é…åˆ <code>v-cloak</code> å¯è§£å†³ç½‘é€Ÿæ…¢æ—¶é¡µé¢å±•ç¤º çš„é—®é¢˜</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[v-cloak]</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-cloak</span>&gt;</span>&#123;&#123; username &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="v-once">v-once</h3>
<ul>
<li><code>v-once</code> æ‰€åœ¨èŠ‚ç‚¹åˆæ¬¡æ¸²æŸ“åå°±æˆä¸ºé™æ€å†…å®¹</li>
<li>å³æ•°æ®å˜åŒ–ä¸ä¼šå¼•èµ· <code>v-once</code> æ‰€åœ¨èŠ‚ç‚¹å†…å®¹çš„æ›´æ–°ï¼Œå¯ç”¨äºä¼˜åŒ–æ€§èƒ½</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-once</span>&gt;</span>åˆæ¬¡çš„å†…å®¹ï¼š&#123;&#123; content &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>æœ€æ–°çš„å†…å®¹ï¼š&#123;&#123; content &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="v-pre">v-pre</h3>
<ul>
<li>è·³è¿‡æ‰€åœ¨èŠ‚ç‚¹çš„ç¼–è¯‘è¿‡ç¨‹</li>
<li>æ²¡æœ‰ä½¿ç”¨æ’å€¼è¯­æ³•ç­‰ç‰¹æ®Šè¯­æ³•çš„èŠ‚ç‚¹ï¼Œå¯ç”¨å…¶è·³è¿‡ç¼–è¯‘è¿‡ç¨‹ï¼ŒåŠ å¿«ç¼–è¯‘</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-pre</span>&gt;</span>Vue å†…ç½®æŒ‡ä»¤<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>ç”¨æˆ·åï¼š&#123;&#123; username &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="è¿‡æ»¤å™¨">è¿‡æ»¤å™¨</h2>
<ul>
<li>è¿‡æ»¤å™¨å¸¸ç”¨äºæ–‡æœ¬çš„æ ¼å¼åŒ–ï¼Œå¯ç”¨åœ¨æ’å€¼è¡¨è¾¾å¼å’Œ <code>v-bind</code> å±æ€§ç»‘å®šã€‚</li>
<li>è¿‡æ»¤å™¨åªåœ¨ <code>vue 2.x</code> å’Œ <code>vue 1.x</code> ä¸­æ”¯æŒï¼Œ<code>vue 3.x</code> åºŸå¼ƒäº†è¿‡æ»¤å™¨ï¼Œå®˜æ–¹å»ºè®®ä½¿ç”¨è®¡ç®—å±æ€§æˆ–æ–¹æ³•ä»£æ›¿è¿‡æ»¤å™¨ã€‚</li>
</ul>
<h3 id="åŸºæœ¬ä½¿ç”¨">åŸºæœ¬ä½¿ç”¨</h3>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åœ¨ JS è¡¨è¾¾å¼å°¾éƒ¨é€šè¿‡ç®¡é“ç¬¦è¿›è¡Œè°ƒç”¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; message | capitalize &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:id</span>=<span class="string">&quot;rawId | formatId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ç§æœ‰è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="attr">filters</span>: &#123;</span><br><span class="line">  <span class="title function_">capitalize</span>(<span class="params">str</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> str.<span class="title function_">charAt</span>(<span class="number">0</span>).<span class="title function_">toUpperCase</span>() + str.<span class="title function_">slice</span>(<span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨ main.js ä¸­å®šä¹‰å…¨å±€è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">filter</span>(<span class="string">&#x27;capitalize&#x27;</span>, <span class="function">(<span class="params">str</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> str.<span class="title function_">charAt</span>(<span class="number">0</span>).<span class="title function_">toUpperCase</span>() + str.<span class="title function_">slice</span>(<span class="number">1</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>å¦‚æœç§æœ‰è¿‡æ»¤å™¨å’Œå…¨å±€è¿‡æ»¤å™¨å†²çªï¼ŒæŒ‰ç…§å°±è¿‘åŸåˆ™è°ƒç”¨ç§æœ‰è¿‡æ»¤å™¨ã€‚</p>
<h3 id="è¿ç»­è°ƒç”¨å¤šä¸ªè¿‡æ»¤å™¨">è¿ç»­è°ƒç”¨å¤šä¸ªè¿‡æ»¤å™¨</h3>
<p>è¿‡æ»¤å™¨ä»å·¦å¾€å³è°ƒç”¨ï¼Œå‰ä¸€ä¸ªè¿‡æ»¤å™¨çš„ç»“æœäº¤ç»™ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨ç»§ç»­å¤„ç†ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; text | capitalize | maxLength &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="è¿‡æ»¤å™¨ä¼ å‚">è¿‡æ»¤å™¨ä¼ å‚</h3>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; message | myFilter(arg1, arg2) &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ°¸è¿œéƒ½æ˜¯ç®¡é“ç¬¦å‰çš„å€¼</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">filter</span>(<span class="string">&#x27;myFilter&#x27;</span>, <span class="function">(<span class="params">value, arg1, arg2</span>) =&gt;</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="computed-è®¡ç®—å±æ€§">computed è®¡ç®—å±æ€§</h2>
<ul>
<li>å®šä¹‰ï¼šä½¿ç”¨çš„å±æ€§ä¸å­˜åœ¨ï¼Œè¦é€šè¿‡å·²æœ‰å±æ€§è®¡ç®—å¾—åˆ°</li>
<li>åŸç†ï¼šåº•å±‚ä½¿ç”¨äº† <code>Object.defineProperty()</code> æä¾›çš„ getter å’Œ setter</li>
<li>getter ä½•æ—¶æ‰§è¡Œï¼š
<ul>
<li>åˆæ¬¡è¯»å–æ—¶æ‰§è¡Œä¸€æ¬¡</li>
<li>ä¾èµ–çš„æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶æ‰§è¡Œ</li>
</ul>
</li>
<li>ä¼˜ç‚¹ï¼šä¸ <code>methods</code> ç›¸æ¯”ï¼Œæœ‰ç¼“å­˜æœºåˆ¶ï¼Œæ•ˆç‡æ›´é«˜</li>
<li>è‹¥è®¡ç®—å±æ€§è¦ä¿®æ”¹ï¼Œå¿…é¡»å£°æ˜ setter å“åº”ä¿®æ”¹ï¼Œä¸” setter ä¸­è¦å¼•èµ·ä¾èµ–çš„æ•°æ®å‘ç”Ÿæ”¹å˜</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; fullName &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®Œæ•´å†™æ³•</span></span><br><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">  <span class="attr">fullName</span>: &#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// è®¡ç®—å±æ€§ä¾èµ–äºå·²æœ‰å±æ€§å¾—åˆ°</span></span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span> + <span class="variable language_">this</span>.<span class="property">lastName</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">value</span>) &#123;</span><br><span class="line">      <span class="comment">// setter ä¸­è¦å¼•èµ·ä¾èµ–æ•°æ®çš„å˜åŒ–</span></span><br><span class="line">      <span class="keyword">const</span> arr = value.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">firstName</span> = arr[<span class="number">0</span>]</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">lastName</span> = arr[<span class="number">1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®€å†™å½¢å¼</span></span><br><span class="line"><span class="comment">// åªæœ‰æ˜ç¡®è®¡ç®—å±æ€§ä¸éœ€è¦è¢«ä¿®æ”¹æ—¶ï¼Œæ‰èƒ½ç”¨ç®€å†™å½¢å¼ï¼Œå³æ²¡æœ‰ setter</span></span><br><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">  <span class="title function_">fullName</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="variable language_">this</span>.<span class="property">lastName</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="watch-ä¾¦å¬å™¨">watch ä¾¦å¬å™¨</h2>
<p><code>watch</code> ä¾¦å¬å™¨å…è®¸å¼€å‘è€…ç›‘è§†æ•°æ®çš„å˜åŒ–ï¼Œé’ˆå¯¹æ•°æ®çš„å˜åŒ–åšç‰¹å®šçš„æ“ä½œã€‚</p>
<blockquote>
<p>ä¾¦å¬å™¨å¯ä»¥ç›‘å¬æ™®é€šå±æ€§å’Œè®¡ç®—å±æ€§</p>
<p><code>computed</code> èƒ½å®Œæˆçš„åŠŸèƒ½ï¼Œ<code>watch</code> ä¹Ÿèƒ½</p>
<p><code>watch</code> èƒ½å®Œæˆçš„åŠŸèƒ½ï¼Œ<code>computed</code> ä¸ä¸€å®šï¼Œå¦‚å¼‚æ­¥æ“ä½œ</p>
</blockquote>
<ul>
<li>Vue ç®¡ç†çš„å‡½æ•°å†™æˆæ™®é€šå‡½æ•°ï¼Œä½¿å…¶ <code>this</code> æŒ‡å‘ vue å®ä¾‹å¯¹è±¡</li>
<li>ä¸è¢« Vue ç®¡ç†çš„å‡½æ•°å†™æˆç®­å¤´å‡½æ•°ï¼ˆå®šæ—¶å™¨å›è°ƒã€<code>ajax</code> å›è°ƒã€<code>Promise</code> å›è°ƒï¼‰ï¼Œè¿™æ ·å…¶ <code>this</code> æ‰æ˜¯ vue å®ä¾‹å¯¹è±¡</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// watch ç®€å†™å½¢å¼</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="title function_">username</span>(<span class="params">newVal, oldVal</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ–°å€¼: &#x27;</span>, newVal)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ—§å€¼: &#x27;</span>, oldVal)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œç»„ä»¶åœ¨åˆæ¬¡åŠ è½½å®Œæ¯•åä¸ä¼šè°ƒç”¨ <code>watch</code> ä¾¦å¬å™¨ã€‚å¦‚æœæƒ³è®© <code>watch</code> ä¾¦å¬å™¨ç«‹å³è¢«è°ƒç”¨ï¼Œéœ€è¦ä½¿ç”¨ <code>immediate</code> é€‰é¡¹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">watch</span>: &#123;</span><br><span class="line">  <span class="comment">// å¯¹è±¡å½¢å¼çš„ä¾¦å¬å™¨</span></span><br><span class="line">  <span class="attr">username</span>: &#123;</span><br><span class="line">    <span class="comment">// handler å±æ€§æ˜¯å›ºå®šå†™æ³•</span></span><br><span class="line">    <span class="title function_">handler</span>(<span class="params">newVal, oldVal</span>) &#123;</span><br><span class="line">      ...</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">immediate</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“ <code>watch</code> ä¾¦å¬çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœå¯¹è±¡ä¸­çš„å±æ€§å€¼å‘ç”Ÿäº†å˜åŒ–ï¼Œåˆ™æ— æ³•è¢«ç›‘å¬åˆ°ã€‚æ­¤æ—¶éœ€è¦ä½¿ç”¨ <code>deep</code> é€‰é¡¹è¿›è¡Œ<strong>æ·±åº¦ç›‘å¬</strong>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">info</span>: &#123; <span class="attr">username</span>: <span class="string">&#x27;admin&#x27;</span> &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="attr">info</span>: &#123;</span><br><span class="line">      <span class="title function_">handler</span>(<span class="params">newVal</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(newVal)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">deep</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è‹¥åªæƒ³ç›‘å¬å¯¹è±¡é‡Œå•ä¸ªå±æ€§çš„å˜åŒ–ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">info</span>: &#123; <span class="attr">username</span>: <span class="string">&#x27;admin&#x27;</span> &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="comment">// è®°å¾—åŠ å¼•å·</span></span><br><span class="line">    <span class="string">&#x27;info.username&#x27;</span>: &#123;</span><br><span class="line">      <span class="title function_">handler</span>(<span class="params">newVal</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(newVal)</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ Vue å®ä¾‹çš„ <code>$watch</code> ç›‘å¬ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;...&#125;)</span><br><span class="line"></span><br><span class="line">vm.$watch(<span class="string">&#x27;isHot&#x27;</span>,&#123;</span><br><span class="line">  <span class="attr">immediate</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">deep</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="title function_">handler</span>(<span class="params">newValue,oldValue</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue, oldValue)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">vm.$watch(<span class="string">&#x27;isHot&#x27;</span>,<span class="keyword">function</span>(<span class="params">newValue,oldValue</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue, oldValue)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="åŠ¨æ€ç»‘å®š-class-å’Œ-style">åŠ¨æ€ç»‘å®š class å’Œ style</h2>
<p>é€šè¿‡åŠ¨æ€ç»‘å®š <code>class</code> å±æ€§å’Œè¡Œå†… <code>style</code> æ ·å¼ï¼Œå¯åŠ¨æ€æ“ä½œå…ƒç´ æ ·å¼ã€‚</p>
<h3 id="åŠ¨æ€ç»‘å®š-class-ç±»å">åŠ¨æ€ç»‘å®š class ç±»å</h3>
<ul>
<li>å­—ç¬¦ä¸²å†™æ³•ï¼šç±»åä¸ç¡®å®šï¼Œè¦åŠ¨æ€è·å–</li>
<li>å¯¹è±¡å†™æ³•ï¼šè¦ç»‘å®šå¤šä¸ªæ ·å¼ï¼Œä¸ªæ•°ä¸ç¡®å®šï¼Œåå­—ä¹Ÿä¸ç¡®å®š</li>
<li>æ•°ç»„å†™æ³•ï¼šè¦ç»‘å®šå¤šä¸ªæ ·å¼ï¼Œä¸ªæ•°ç¡®å®šï¼Œåå­—ä¹Ÿç¡®å®šï¼Œä½†ä¸ç¡®å®šç”¨ä¸ç”¨</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">  <span class="selector-class">.happy</span> &#123;</span><br><span class="line">    ...;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.sad</span> &#123;</span><br><span class="line">    ...;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;basic&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;mood&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeMood&quot;</span>&gt;</span>å­—ç¬¦ä¸²å†™æ³•<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;basic&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;arr&quot;</span>&gt;</span>æ•°ç»„å†™æ³•<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;basic&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;classObj&quot;</span>&gt;</span>å¯¹è±¡å†™æ³•<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">mood</span>: <span class="string">&#x27;happy&#x27;</span>,</span><br><span class="line">      <span class="attr">arr</span>: [<span class="string">&#x27;happy&#x27;</span>, <span class="string">&#x27;sad&#x27;</span>],</span><br><span class="line">      <span class="attr">classObj</span>: &#123;</span><br><span class="line">        <span class="attr">happy</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">sad</span>: <span class="literal">false</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">changeMood</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">mood</span> = <span class="string">&#x27;sad&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åŠ¨æ€ç»‘å®š-style-æ ·å¼">åŠ¨æ€ç»‘å®š style æ ·å¼</h3>
<p><code>css</code> å±æ€§åæ—¢å¯ä»¥ç”¨é©¼å³°å½¢å¼ï¼Œä¹Ÿèƒ½ç”¨çŸ­æ¨ªçº¿å½¢å¼ï¼ˆéœ€è¦ä½¿ç”¨å¼•å·æ‹¬èµ·æ¥ï¼‰ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;color: active, fontSize: fsize + &#x27;px&#x27;, &#x27;background-color&#x27;: bgcolor&#125;&quot;</span>&gt;</span>å¯¹è±¡å†™æ³•<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">&quot;styleObj&quot;</span>&gt;</span>å¯¹è±¡å†™æ³•<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">&quot;[styleObj, styleObj2]&quot;</span>&gt;</span>æ•°ç»„å†™æ³•ï¼ˆç”¨å¾—å°‘ï¼‰<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">active</span>: <span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">    <span class="attr">fsize</span>: <span class="number">30</span>,</span><br><span class="line">    <span class="attr">bgcolor</span>: <span class="string">&#x27;yellow&#x27;</span>,</span><br><span class="line">    <span class="attr">styleObj</span>: &#123;</span><br><span class="line">      <span class="attr">color</span>: <span class="string">&#x27;active&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;font-size&#x27;</span>: <span class="string">&#x27;20px&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">styleObj2</span>: &#123;</span><br><span class="line">      <span class="attr">backgroundColor</span>: <span class="string">&#x27;yellow&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="vue-ç”Ÿå‘½å‘¨æœŸ">vue ç”Ÿå‘½å‘¨æœŸ</h2>
<p>vue ç”Ÿå‘½å‘¨æœŸæ˜¯æŒ‡ä¸€ä¸ªç»„ä»¶ä»åˆ›å»ºã€è¿è¡Œã€é”€æ¯çš„æ•´ä¸ªè¿‡ç¨‹ã€‚æ¯ä¸ªé˜¶æ®µå¯¹åº”ç€ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚</p>
<p>ç”Ÿå‘½å‘¨æœŸé’©å­ä¹Ÿå¯ç†è§£ä¸ºï¼šVue åœ¨ç‰¹å®šçš„æ—¶åˆ»è°ƒç”¨ç‰¹å®šçš„å‡½æ•°ã€‚</p>
<p>é™¤äº†å›¾ä¸­ 8 ä¸ªé’©å­ï¼Œè¿˜æœ‰ <code>nextTick</code>ï¼Œ<code>activated</code>ï¼Œ<code>deactivated</code></p>
<p>å…³äºé”€æ¯è¿‡ç¨‹ï¼š</p>
<ul>
<li>é”€æ¯åå€ŸåŠ© Vue å¼€å‘è€…å·¥å…·çœ‹ä¸åˆ°ä»»ä½•ä¿¡æ¯ã€‚</li>
<li>é”€æ¯åè‡ªå®šä¹‰äº‹ä»¶ä¼šå¤±æ•ˆï¼Œä½†åŸç”Ÿ DOM äº‹ä»¶ä¾ç„¶æœ‰æ•ˆã€‚</li>
<li>ä¸€èˆ¬ä¸åœ¨ <code>beforeDestroy</code> æ“ä½œæ•°æ®ï¼Œå› ä¸ºå³ä¾¿æ“ä½œæ•°æ®ï¼Œä¹Ÿä¸ä¼šå†è§¦å‘æ›´æ–°æµç¨‹</li>
</ul>
<p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/lifecycle2.6eba8c66.png" alt="ç”Ÿå‘½å‘¨æœŸå›¾2"> <img src= "/img/loading.gif" data-lazy-src="https://brucecai55520.gitee.io/bruceblog/assets/img/lifecycle.e6900649.png" alt="ç”Ÿå‘½å‘¨æœŸå›¾"></p>
<h1>Vue ç»„ä»¶åŒ–ç¼–ç¨‹</h1>
<blockquote>
<p>ç»„ä»¶ï¼šå®ç°åº”ç”¨å±€éƒ¨åŠŸèƒ½ä»£ç å’Œèµ„æºçš„é›†åˆ</p>
</blockquote>
<h2 id="éå•æ–‡ä»¶ç»„ä»¶">éå•æ–‡ä»¶ç»„ä»¶</h2>
<p>éå•æ–‡ä»¶ç»„ä»¶å³æ‰€æœ‰ç»„ä»¶å†™åœ¨åŒä¸€ä¸ªæ–‡ä»¶é‡Œã€‚</p>
<h3 id="åŸºæœ¬ä½¿ç”¨-v2">åŸºæœ¬ä½¿ç”¨</h3>
<p>å®šä¹‰ç»„ä»¶ï¼š</p>
<ul>
<li>ä½¿ç”¨<code>Vue.extend(options)</code>åˆ›å»ºï¼Œå’Œ<code>new Vue(options)</code>çš„åŒºåˆ«
<ul>
<li><code>el</code> ä¸å†™ï¼Œæœ€ç»ˆæ‰€æœ‰çš„ç»„ä»¶éƒ½è¦ç»è¿‡ vm çš„ç®¡ç†ï¼Œç”± vm çš„ <code>el</code> å†³å®šæœåŠ¡å“ªä¸ªå®¹å™¨</li>
<li><code>data</code> å¿…é¡»å†™æˆå‡½æ•°ï¼Œé¿å…ç»„ä»¶è¢«å¤ç”¨æ—¶ï¼Œæ•°æ®å­˜åœ¨å¼•ç”¨å…³ç³»</li>
<li>ä½¿ç”¨ <code>template</code> èŠ‚ç‚¹å¯é…ç½®ç»„ä»¶ç»“æ„</li>
</ul>
</li>
</ul>
<p>æ³¨å†Œç»„ä»¶ï¼›</p>
<ul>
<li>å±€éƒ¨æ³¨å†Œï¼š<code>components</code> é€‰é¡¹</li>
<li>å…¨å±€æ³¨å†Œï¼š<code>Vue.component('ç»„ä»¶å',ç»„ä»¶)</code></li>
</ul>
<p>ä½¿ç”¨ç»„ä»¶ï¼š<code>&lt;school&gt;&lt;/school&gt;</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">hello</span>&gt;</span><span class="tag">&lt;/<span class="name">hello</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">school</span>&gt;</span><span class="tag">&lt;/<span class="name">school</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»º student ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> student = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">      &lt;h2&gt;å­¦ç”Ÿå§“åï¼š&#123;&#123;studentName&#125;&#125;&lt;/h2&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">studentName</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»º hello ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> hello = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;	</span></span><br><span class="line"><span class="string">      &lt;h2&gt;&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;Tom&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»º school ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> school = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;school&#x27;</span>,</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">      &lt;h2&gt;å­¦æ ¡åç§°ï¼š&#123;&#123;name&#125;&#125;&lt;/h2&gt;	</span></span><br><span class="line"><span class="string">      &lt;student&gt;&lt;/student&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;åŒ—äº¬å¤§å­¦&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ç»„ä»¶åµŒå¥—</span></span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    student,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨å±€æ³¨å†Œ</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;hello&#x27;</span>, hello)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">  <span class="comment">// å±€éƒ¨æ³¨å†Œ</span></span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    school,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<ol>
<li>ç»„ä»¶å</li>
</ol>
<ul>
<li>ä¸€ä¸ªå•è¯ï¼šschool, School</li>
<li>å¤šä¸ªå•è¯ï¼šmy-school, MySchool(éœ€è¦ vue-cli æ”¯æŒ)</li>
</ul>
<ol start="2">
<li>ä½¿ç”¨ç»„ä»¶</li>
</ol>
<ul>
<li><code>&lt;school&gt;&lt;/school&gt;</code></li>
<li><code>&lt;school /&gt;</code> (éœ€è¦ vue-cli æ”¯æŒ)</li>
</ul>
<ol start="3">
<li><code>const school = Vue.extend(options)</code> å¯ç®€å†™ä¸º <code>const school = options</code>ã€‚è¿™æ˜¯è„šæ‰‹æ¶é‡Œ <code>&lt;script&gt;</code> ä»£ç çš„ç®€å†™æ¥æºã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">HelloWorld</span> <span class="keyword">from</span> <span class="string">&#x27;./components/HelloWorld.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="title class_">HelloWorld</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®Œæ•´å†™æ³•</span></span><br><span class="line"><span class="keyword">const</span> vc = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="title class_">HelloWorld</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> vc</span><br></pre></td></tr></table></figure>
<h3 id="å…³äº-VueComponent-æ„é€ å‡½æ•°">å…³äº VueComponent æ„é€ å‡½æ•°</h3>
<ol>
<li>ç»„ä»¶æœ¬è´¨æ˜¯ä¸€ä¸ªåä¸º <code>VueComponent</code> çš„æ„é€ å‡½æ•°ï¼Œä¸æ˜¯ç¨‹åºå‘˜å®šä¹‰çš„ï¼Œæ˜¯ <code>Vue.extend</code> ç”Ÿæˆçš„</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> school = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;...&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">dir</span>(school) <span class="comment">//Æ’ VueComponent (options)</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>
<p>ä½¿ç”¨ç»„ä»¶æ—¶ï¼ŒVue è‡ªåŠ¨åˆ›å»ºç»„ä»¶å®ä¾‹å¯¹è±¡ï¼Œå³ <code>new VueComponent(options)</code> æ˜¯ Vue åšçš„</p>
</li>
<li>
<p>æ¯æ¬¡è°ƒç”¨ <code>Vue.extend</code>ï¼Œè¿”å›çš„éƒ½æ˜¯ä¸€ä¸ªå…¨æ–°çš„ <code>VueComponent</code> æ„é€ å‡½æ•°</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> school = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;...&#125;)</span><br><span class="line"><span class="keyword">const</span> student = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;...&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(school === student) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li>
<p>ç»„ä»¶çš„ <code>this</code> æŒ‡å‘ <code>VueComponent</code> å®ä¾‹å¯¹è±¡ï¼Œè€Œé Vue å®ä¾‹å¯¹è±¡</p>
</li>
<li>
<p>é‡è¦çš„å†…ç½®å…³ç³»ï¼š<code>VueComponent.prototype.__proto__ === Vue.prototype</code> ï¼Œè¿™ä¸ªæ”¹åŠ¨ä½¿å¾—ç»„ä»¶å®ä¾‹å¯¹è±¡å¾—ä»¥è®¿é—® Vue åŸå‹ä¸Šçš„å±æ€§æ–¹æ³•</p>
</li>
</ol>
<p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/VueComponent.66788a9c.png" alt="VueComponent"></p>
<h2 id="å•æ–‡ä»¶ç»„ä»¶">å•æ–‡ä»¶ç»„ä»¶</h2>
<p>å•æ–‡ä»¶ç»„ä»¶å³ <code>.vue</code> æ–‡ä»¶</p>
<h2 id="scoped-è§£å†³æ ·å¼å†²çª">scoped è§£å†³æ ·å¼å†²çª</h2>
<ul>
<li>åŸç†ï¼šä¸ºå½“å‰ç»„ä»¶æ‰€æœ‰ DOM å…ƒç´ åˆ†é…å”¯ä¸€çš„è‡ªå®šä¹‰å±æ€§ï¼Œå†™æ ·å¼æ—¶ä½¿ç”¨å±æ€§é€‰æ‹©å™¨é˜²æ­¢æ ·å¼å†²çªé—®é¢˜</li>
<li><code>scoped</code> åªç»™å­ç»„ä»¶æœ€å¤–å±‚çš„ div æ·»åŠ äº†è‡ªå®šä¹‰å±æ€§ <code>[data-v-xxx]</code> ï¼Œå­ç»„ä»¶å†…éƒ¨çš„æ ‡ç­¾å¹¶æ²¡æœ‰æ·»åŠ ã€‚å› æ­¤çˆ¶ç»„ä»¶åªèƒ½ä¿®æ”¹å­ç»„ä»¶æœ€å¤–å±‚çš„ div æ ·å¼ï¼Œä¿®æ”¹å­ç»„ä»¶å†…å±‚å…ƒç´ çš„æ ·å¼æ˜¯ä¸å¯è¡Œçš„</li>
<li>è‹¥æƒ³è®©æŸäº›æ ·å¼å¯¹å­ç»„ä»¶ç”Ÿæ•ˆï¼Œéœ€ä½¿ç”¨ <code>/deep/</code> æ·±åº¦é€‰æ‹©å™¨</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ç»†ç»†å“å‘³ */</span></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line"><span class="selector-class">.title</span> &#123;</span><br><span class="line">  <span class="comment">/* ä¸åŠ  /deep/ï¼Œé€‰æ‹©å™¨æ ¼å¼ä¸º .title[data-v-052242de] */</span></span><br><span class="line">  <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/deep/ <span class="selector-class">.title</span> &#123;</span><br><span class="line">  <span class="comment">/* åŠ  /deep/ï¼Œé€‰æ‹©å™¨æ ¼å¼ä¸º [data-v-052242de] .title */</span></span><br><span class="line">  <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="ç»„ä»¶é€šä¿¡">ç»„ä»¶é€šä¿¡</h2>
<h3 id="è‡ªå®šä¹‰å±æ€§-props">è‡ªå®šä¹‰å±æ€§ props</h3>
<blockquote>
<p>çˆ¶ä¼ å­ã€å­ä¼ çˆ¶</p>
</blockquote>
<p><code>props</code> éªŒè¯ï¼š</p>
<ul>
<li>åŸºç¡€ç±»å‹æ£€æŸ¥ï¼š<code>String, Number, Boolean, Array, Object, Date, Function, Symbol</code></li>
<li>å¤šä¸ªå¯èƒ½çš„ç±»å‹</li>
<li>å¿…å¡«é¡¹æ£€æŸ¥</li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/mmzuo-798/p/15188014.html">é»˜è®¤å€¼</a></li>
<li>è‡ªå®šä¹‰éªŒè¯å‡½æ•° <code>validator</code></li>
<li><code>props</code> æ˜¯åªè¯»çš„ï¼Œè‹¥æ˜¯å¯¹è±¡ï¼Œå¯¹è±¡å†…éƒ¨çš„ä¿®æ”¹ä¸æŠ¥é”™ï¼Œä½†ä¸æ¨èã€‚è‹¥éœ€ä¿®æ”¹ï¼Œåˆ™æŠŠ <code>props</code> å†…å®¹æ‹·è´ä¸€ä»½åˆ° <code>data</code> è¿›è¡Œä¿®æ”¹</li>
</ul>
<p><strong>çˆ¶ä¼ å­ï¼š</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- çˆ¶ç»„ä»¶ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è‹¥ props å±æ€§ä½¿ç”¨é©¼å³°å‘½åæ³•ï¼Œå¯ä½¿ç”¨é©¼å³°å½¢å¼æˆ–çŸ­æ¨ªçº¿åˆ†éš”å½¢å¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Son</span> <span class="attr">:num</span>=<span class="string">&quot;count&quot;</span> <span class="attr">:msg</span>=<span class="string">&quot;message&quot;</span> <span class="attr">:pub-time</span>=<span class="string">&quot;time&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Son</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å­ç»„ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>çˆ¶ç»„ä»¶ä¼ è¿‡æ¥çš„å€¼ï¼š&#123;&#123; num &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>çˆ¶ç»„ä»¶ä¼ è¿‡æ¥çš„å€¼ï¼š&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•°ç»„å½¢å¼</span></span><br><span class="line"><span class="attr">props</span>: [<span class="string">&#x27;num&#x27;</span>, <span class="string">&#x27;msg&#x27;</span>, <span class="string">&#x27;pubTime&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»…é™åˆ¶ç±»å‹</span></span><br><span class="line"><span class="attr">props</span>: &#123;</span><br><span class="line">  <span class="attr">num</span>: <span class="title class_">Number</span>,</span><br><span class="line">  <span class="attr">msg</span>: <span class="title class_">String</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹è±¡å½¢å¼</span></span><br><span class="line"><span class="attr">props</span>: &#123;</span><br><span class="line">  <span class="attr">num</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">Number</span>,</span><br><span class="line">    <span class="attr">default</span>: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">msg</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: [<span class="title class_">String</span>, <span class="title class_">Number</span>],</span><br><span class="line">    <span class="attr">required</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="title function_">validator</span>(<span class="params">value</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> value === <span class="string">&#x27;hello&#x27;</span> || value === <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">default</span>: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>å­ä¼ çˆ¶ï¼š</strong></p>
<ul>
<li>çˆ¶ç»„ä»¶é€šè¿‡ <code>props</code> ç»™å­ç»„ä»¶ä¼ é€’å‡½æ•°ï¼Œå­ç»„ä»¶è°ƒç”¨è¯¥å‡½æ•°å³å¯ä¿®æ”¹çˆ¶ç»„ä»¶çš„æ•°æ®</li>
<li>ç»„ä»¶ <code>methods</code> é‡Œå‡½æ•°çš„ this å§‹ç»ˆæŒ‡å‘è¯¥ç»„ä»¶å®ä¾‹ï¼Œå¯ç†è§£ä¸º Vue åº•å±‚å¯¹è¿™äº›å‡½æ•°åšäº†<code>bind</code>å¤„ç†</li>
<li>é€šè¿‡<code>bind</code>ä¿®æ”¹ this æŒ‡å‘åçš„æ–°å‡½æ•°ï¼Œå…¶ this æŒ‡å‘ä¸èƒ½å†æ¬¡ä¿®æ”¹ã€‚<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/api/#methods">å®˜ç½‘è¯´æ˜</a></li>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/q/1010000015951625">æ€å¦æ–‡ç« </a></li>
<li>ä¸æ¨èè¯¥æ–¹å¼è¿›è¡Œå­ä¼ çˆ¶ï¼Œæ¨èä½¿ç”¨è‡ªå®šä¹‰äº‹ä»¶</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Son</span> <span class="attr">:addCount</span>=<span class="string">&quot;addCount&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Son</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">count</span>: <span class="number">1</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">addCount</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">count</span>++</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">props</span>: [<span class="string">&#x27;addCount&#x27;</span>],</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">add</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">addCount</span>()</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è‡ªå®šä¹‰äº‹ä»¶">è‡ªå®šä¹‰äº‹ä»¶</h3>
<blockquote>
<p>è‡ªå®šä¹‰äº‹ä»¶å¯ç”¨äºå®ç°å­ä¼ çˆ¶</p>
</blockquote>
<p>å­ç»„ä»¶è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼Œå¹¶ä¼ é€’æ•°æ®ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­ç»„ä»¶</span></span><br><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">add</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">count</span> += <span class="number">1</span></span><br><span class="line">    <span class="variable language_">this</span>.$emit(<span class="string">&#x27;count-change&#x27;</span>, <span class="variable language_">this</span>.<span class="property">count</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>çˆ¶ç»„ä»¶ç›‘å¬å­ç»„ä»¶çš„è‡ªå®šä¹‰äº‹ä»¶ï¼Œå¹¶è°ƒç”¨å›è°ƒå‡½æ•°å¤„ç†æ•°æ®ï¼š</p>
<ul>
<li>çˆ¶ç»„ä»¶é€šè¿‡ <code>this.$refs.xxx.$on('äº‹ä»¶åç§°',å›è°ƒ)</code> ç›‘å¬å­ç»„ä»¶è‡ªå®šä¹‰äº‹ä»¶æ—¶ï¼Œå›è°ƒå‡½æ•°è¦ä¹ˆé…ç½®åœ¨ <code>methods</code> ä¸­ï¼Œè¦ä¹ˆç”¨ç®­å¤´å‡½æ•°ï¼Œå¦åˆ™ this æŒ‡å‘ä¼šå‡ºé—®é¢˜</li>
<li>ç»„ä»¶ä¸Šä¹Ÿå¯ä»¥ç»‘å®šåŸç”Ÿ DOM äº‹ä»¶ï¼Œéœ€è¦ä½¿ç”¨ <code>native</code> ä¿®é¥°ç¬¦</li>
<li>è‹¥æƒ³è®©è‡ªå®šä¹‰äº‹ä»¶åªè§¦å‘ä¸€æ¬¡ï¼Œå¯ä»¥ä½¿ç”¨ <code>once</code> ä¿®é¥°ç¬¦ï¼Œæˆ– <code>$once</code> æ–¹æ³•</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ–¹å¼ä¸€ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Son</span> @<span class="attr">count-change</span>=<span class="string">&quot;getNewCount&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Son</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Son</span> @<span class="attr">count-change.once</span>=<span class="string">&quot;getNewCount&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Son</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ–¹å¼äºŒ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Son</span> <span class="attr">ref</span>=<span class="string">&quot;sonRef&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Son</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ç›‘å¬å­ç»„ä»¶åŸç”Ÿ DOM äº‹ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Son</span> @<span class="attr">click.native</span>=<span class="string">&quot;handleClick&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Son</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">father</span>: <span class="number">1</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">getNewCount</span>(<span class="params">val</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">father</span> = val</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// æ–¹å¼äºŒ</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">sonRef</span>.$on(<span class="string">&#x27;count-change&#x27;</span>, <span class="variable language_">this</span>.<span class="property">getNewCount</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">sonRef</span>.$once(<span class="string">&#x27;count-change&#x27;</span>, <span class="variable language_">this</span>.<span class="property">getNewCount</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æˆ–</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">sonRef</span>.$on(<span class="string">&#x27;count-change&#x27;</span>, <span class="function">(<span class="params">val</span>) =&gt;</span> (<span class="variable language_">this</span>.<span class="property">father</span> = val))</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è§£ç»‘è‡ªå®šä¹‰äº‹ä»¶<code>this.$off()</code>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è§£ç»‘å•ä¸ªè‡ªå®šä¹‰äº‹ä»¶</span></span><br><span class="line"><span class="variable language_">this</span>.$off(<span class="string">&#x27;count-change&#x27;</span>)</span><br><span class="line"><span class="comment">// è§£ç»‘å¤šä¸ªè‡ªå®šä¹‰äº‹ä»¶</span></span><br><span class="line"><span class="variable language_">this</span>.$off([<span class="string">&#x27;count-change&#x27;</span>, <span class="string">&#x27;add&#x27;</span>])</span><br><span class="line"><span class="comment">// è§£ç»‘æ‰€æœ‰è‡ªå®šä¹‰äº‹ä»¶</span></span><br><span class="line"><span class="variable language_">this</span>.$off()</span><br></pre></td></tr></table></figure>
<h3 id="EventBus-å…¨å±€äº‹ä»¶æ€»çº¿">EventBus å…¨å±€äº‹ä»¶æ€»çº¿</h3>
<blockquote>
<p>æ€æƒ³ï¼šå¼„ä¸€ä¸ªæ‰€æœ‰ç»„ä»¶å®ä¾‹éƒ½èƒ½è®¿é—®åˆ°çš„ Vue å®ä¾‹å¯¹è±¡ï¼ŒVue åŸå‹ä¸ŠåŒ…å«äº‹ä»¶å¤„ç†çš„ç›¸å…³æ–¹æ³•ï¼ŒåŒ…æ‹¬ <code>$on, $emit, $off, $once</code></p>
</blockquote>
<p><strong>æ–¹å¼ä¸€</strong></p>
<p>å®‰è£…å…¨å±€äº‹ä»¶æ€»çº¿ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$bus</span> = <span class="variable language_">this</span></span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>æ•°æ®æ¥æ”¶æ–¹ä¸ºè‡ªå®šä¹‰äº‹ä»¶ç»‘å®šå›è°ƒå‡½æ•°ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">handleData</span>(<span class="params"></span>) &#123;...&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$bus</span>.$on(<span class="string">&#x27;share&#x27;</span>, <span class="variable language_">this</span>.<span class="property">handleData</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// ç»„ä»¶é”€æ¯ï¼Œè§£ç»‘äº‹ä»¶</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$bus</span>.$off(<span class="string">&#x27;share&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ•°æ®å‘é€æ–¹è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">sendData</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$bus</span>.$emit(<span class="string">&#x27;share&#x27;</span>, <span class="number">666</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ–¹å¼äºŒ</strong></p>
<p>åˆ›å»º eventBus.js æ¨¡å—ï¼Œå¹¶å‘å¤–å…±äº«ä¸€ä¸ª Vue çš„å®ä¾‹å¯¹è±¡ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// eventBus.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vue</span>()</span><br></pre></td></tr></table></figure>
<p>åœ¨æ•°æ®å‘é€æ–¹ï¼Œè°ƒç”¨ <code>bus.$emit('äº‹ä»¶åç§°', è¦å‘é€çš„æ•°æ®)</code> æ–¹æ³•è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•°æ®å‘é€æ–¹</span></span><br><span class="line"><span class="keyword">import</span> bus <span class="keyword">from</span> <span class="string">&#x27;./eventBus.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">sendData</span>(<span class="params"></span>) &#123;</span><br><span class="line">      bus.$emit(<span class="string">&#x27;share&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨æ•°æ®æ¥æ”¶æ–¹ï¼Œé€šè¿‡ <code>bus.$on('äº‹ä»¶åç§°', äº‹ä»¶å¤„ç†å‡½æ•°)</code> ä¸ºè‡ªå®šä¹‰äº‹ä»¶æ³¨å†Œäº‹ä»¶å¤„ç†å‡½æ•°ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•°æ®æ¥æ”¶æ–¹</span></span><br><span class="line"><span class="keyword">import</span> bus <span class="keyword">from</span> <span class="string">&#x27;./eventBus.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">msg</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ç»†èŠ‚1ï¼šåœ¨ created é’©å­ä¸­æ³¨å†Œå‡½æ•°</span></span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// ç»†èŠ‚2ï¼šä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œåˆ™ this æŒ‡å‘è¯¥ç»„ä»¶è€Œé bus</span></span><br><span class="line">    bus.$on(<span class="string">&#x27;share&#x27;</span>, <span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">msg</span> = val</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒ">æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒ</h3>
<blockquote>
<p>ä¸å…¨å±€äº‹ä»¶æ€»çº¿å¾ˆç›¸ä¼¼ï¼Œå› æ­¤ä¸€èˆ¬ç”¨äº‹ä»¶æ€»çº¿ï¼Œä¸ç”¨è¿™ä¸ª</p>
</blockquote>
<p>å®‰è£…ç¬¬ä¸‰æ–¹åº“ <code>PubSubJS</code> ï¼š<code>npm install -S pubsub.js</code></p>
<p>è®¢é˜…æ¶ˆæ¯ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pubsub <span class="keyword">from</span> <span class="string">&#x27;pubsub-js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">handleData</span>(<span class="params">messageName, data</span>) &#123;...&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">pubId</span> = pubsub.<span class="title function_">subscribe</span>(<span class="string">&#x27;share&#x27;</span>, <span class="variable language_">this</span>.<span class="property">handleData</span>)</span><br><span class="line">    <span class="comment">// or</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">pubId</span> = pubsub.<span class="title function_">subscribe</span>(<span class="string">&#x27;share&#x27;</span>, <span class="function">(<span class="params">messageName, data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// ç»„ä»¶é”€æ¯ï¼Œå–æ¶ˆè®¢é˜…</span></span><br><span class="line">    pubsub.<span class="title function_">unsubscribe</span>(<span class="variable language_">this</span>.<span class="property">pubId</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‘å¸ƒæ¶ˆæ¯ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pubsub <span class="keyword">from</span> <span class="string">&#x27;pubsub-js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">sendData</span>(<span class="params"></span>) &#123;</span><br><span class="line">      pubsub.<span class="title function_">publish</span>(<span class="string">&#x27;share&#x27;</span>, <span class="number">666</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ref-refs">ref / $refs</h3>
<p><code>ref</code> ç”¨äºç»™ DOM å…ƒç´ æˆ–å­ç»„ä»¶æ³¨å†Œå¼•ç”¨ä¿¡æ¯ã€‚æ¯ä¸ª vue å®ä¾‹éƒ½æœ‰ <code>$refs</code> å¯¹è±¡ï¼Œé‡Œé¢å­˜å‚¨ç€ DOM å…ƒç´ æˆ–å­ç»„ä»¶çš„å¼•ç”¨ã€‚é€šè¿‡è¯¥æ–¹å¼å¯ä»¥è·å–åˆ° DOM å…ƒç´ æˆ–å­ç»„ä»¶å®ä¾‹ã€‚</p>
<blockquote>
<p>å¯ä»¥çˆ¶ä¼ å­ï¼Œä¹Ÿèƒ½å­ä¼ çˆ¶ã€‚å­ä¼ çˆ¶è¦å’Œè‡ªå®šä¹‰äº‹ä»¶æ­é…ä½¿ç”¨ã€‚</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼•ç”¨ DOM å…ƒç´  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">ref</span>=<span class="string">&quot;pp&quot;</span>&gt;</span>è¿™æ˜¯æ®µè½<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;getRef&quot;</span>&gt;</span>è·å– DOM å…ƒç´ <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¼•ç”¨å­ç»„ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">son</span> <span class="attr">ref</span>=<span class="string">&quot;sonRef&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">son</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;getComponent&quot;</span>&gt;</span>è·å–å­ç»„ä»¶å®ä¾‹å¼•ç”¨<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">getRef</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// è·å–å…ƒç´ çš„å¼•ç”¨</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">pp</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">pp</span>.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">getComponent</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">sonRef</span>)</span><br><span class="line">    <span class="comment">// å¯ä»¥è®¿é—®å­ç»„ä»¶çš„æ•°æ®å’Œæ–¹æ³•</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">sonRef</span>.<span class="property">count</span> = <span class="number">1</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">sonRef</span>.<span class="title function_">add</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»„ä»¶çš„ <code>$nextTick(cb)</code> æ–¹æ³•ï¼Œä¼šæŠŠ cb å›è°ƒæ¨è¿Ÿåˆ°ä¸‹ä¸€ä¸ª DOM æ›´æ–°å‘¨æœŸä¹‹åæ‰§è¡Œï¼Œå³åœ¨ DOM æ›´æ–°å®Œæˆåå†æ‰§è¡Œå›è°ƒï¼Œä»è€Œä¿è¯ cb å›è°ƒå¯ä»¥è·å–æœ€æ–°çš„ DOM å…ƒç´ ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">showInput</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">inputVisible</span> = <span class="literal">true</span></span><br><span class="line">    <span class="comment">// å¯¹è¾“å…¥æ¡†çš„æ“ä½œæ¨è¿Ÿåˆ° DOM æ›´æ–°å®Œæˆä¹‹å</span></span><br><span class="line">    <span class="variable language_">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">input</span>.<span class="title function_">focus</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>Vue ç»„ä»¶è¿›é˜¶</h1>
<h2 id="åŠ¨æ€ç»„ä»¶">åŠ¨æ€ç»„ä»¶</h2>
<p>vue æä¾›äº†å†…ç½®çš„ <code>&lt;component&gt;</code> ç»„ä»¶ç”¨äºåŠ¨æ€åˆ‡æ¢ç»„ä»¶ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é€šè¿‡ is å±æ€§æŒ‡å®šè¦æ¸²æŸ“çš„ç»„ä»¶ï¼Œä¼ é€’çš„æ˜¯å­—ç¬¦ä¸² --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;comName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;comName = &#x27;Left&#x27;&quot;</span>&gt;</span>å±•ç¤ºLeftç»„ä»¶<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;comName = &#x27;Right&#x27;&quot;</span>&gt;</span>å±•ç¤ºRightç»„ä»¶<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="keep-alive">keep-alive</h2>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåˆ‡æ¢åŠ¨æ€ç»„ä»¶æ—¶æ— æ³•ä¿æŒç»„ä»¶çš„çŠ¶æ€ã€‚æ­¤æ—¶å¯ä»¥ä½¿ç”¨ vue å†…ç½®çš„ <code>&lt;keep-alive&gt;</code> ç»„ä»¶ä¿æŒåŠ¨æ€ç»„ä»¶çš„çŠ¶æ€ï¼Œå¯¹è¢«åŒ…è£¹çš„ç»„ä»¶è¿›è¡ŒçŠ¶æ€ç¼“å­˜ã€‚</p>
<p>è¢« <code>&lt;keep-alive&gt;</code> åŒ…è£¹çš„ç»„ä»¶ä¼šå¤šå‡ºä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼šå½“ç»„ä»¶è¢«æ¿€æ´»æ—¶ï¼Œè§¦å‘ <code>activated</code> é’©å­ï¼›å½“ç»„ä»¶è¢«ç¼“å­˜æ—¶ï¼Œè§¦å‘ <code>deactivated</code> é’©å­ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;comName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>&lt;keep-alive&gt;</code> çš„ <code>include</code> å’Œ <code>exclude</code> å±æ€§ï¼Œåˆ†åˆ«ç”¨äºæŒ‡æ˜å“ªäº›ç»„ä»¶è¦ç¼“å­˜ã€å“ªäº›ç»„ä»¶ä¸è¦ç¼“å­˜ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">keep-alive</span> <span class="attr">include</span>=<span class="string">&quot;Left, Right&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;comName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">keep-alive</span> <span class="attr">:include</span>=<span class="string">&quot;[&#x27;News&#x27;, &#x27;Message&#x27;]&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="æ’æ§½">æ’æ§½</h2>
<h3 id="ä½•ä¸ºæ’æ§½">ä½•ä¸ºæ’æ§½</h3>
<p>æ’æ§½å¯ä»¥ç†è§£ä¸ºç»„ä»¶å°è£…æœŸé—´ï¼Œä¸ºç”¨æˆ·é¢„ç•™çš„<strong>å†…å®¹å ä½ç¬¦</strong>ã€‚å®ƒæ˜¯ vue ä¸ºç»„ä»¶å°è£…è€…æä¾›çš„èƒ½åŠ›ï¼Œå…è®¸å¼€å‘è€…åœ¨å°è£…ç»„ä»¶æ—¶ï¼ŒæŠŠ<strong>ä¸ç¡®å®šçš„ã€å¸Œæœ›ç”±ç”¨æˆ·æŒ‡å®šçš„éƒ¨åˆ†</strong>å®šä¹‰ä¸ºæ’æ§½ã€‚</p>
<h3 id="æ’æ§½åŸºæœ¬ç”¨æ³•">æ’æ§½åŸºæœ¬ç”¨æ³•</h3>
<p>åŸºç¡€ä½¿ç”¨ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å­ç»„ä»¶ä¸­é¢„ç•™æ’æ§½ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;contianer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>è¿™æ˜¯å­ç»„ä»¶<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- çˆ¶ç»„ä»¶ä½¿ç”¨å­ç»„ä»¶æ—¶ï¼Œå‘æ’æ§½å¡«å……å†…å®¹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">child-comp</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¡«å……åˆ°æ’æ§½çš„å†…å®¹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">child-comp</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœå­ç»„ä»¶æ²¡æœ‰é¢„ç•™æ’æ§½ï¼Œé‚£ä¹ˆçˆ¶ç»„ä»¶å¡«å……ç»™å­ç»„ä»¶çš„è‡ªå®šä¹‰å†…å®¹ä¼šè¢«ä¸¢å¼ƒï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å­ç»„ä»¶æ²¡æœ‰é¢„ç•™æ’æ§½ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;contianer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>è¿™æ˜¯å­ç»„ä»¶<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- çˆ¶ç»„ä»¶çš„è‡ªå®šä¹‰å†…å®¹ä¼šè¢«ä¸¢å¼ƒ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">child-comp</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ®µè‡ªå®šä¹‰å†…å®¹ä¼šè¢«ä¸¢å¼ƒ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">child-comp</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å­ç»„ä»¶å¯ä»¥ä¸ºæ’æ§½æä¾›<strong>åå¤‡å†…å®¹</strong>ï¼Œå½“çˆ¶ç»„ä»¶æ²¡æœ‰æä¾›è‡ªå®šä¹‰å†…å®¹æ—¶ï¼Œåå¤‡å†…å®¹å°±ä¼šç”Ÿæ•ˆã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å­ç»„ä»¶æä¾›åå¤‡å†…å®¹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;contianer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>è¿™æ˜¯å­ç»„ä»¶<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span>è¿™æ˜¯åå¤‡å†…å®¹ï¼Œçˆ¶ç»„ä»¶æ²¡æœ‰æä¾›è‡ªå®šä¹‰å†…å®¹å°±ä¼šç”Ÿæ•ˆ<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- çˆ¶ç»„ä»¶æ²¡æœ‰æä¾›è‡ªå®šä¹‰å†…å®¹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">child-comp</span>&gt;</span> <span class="tag">&lt;/<span class="name">child-comp</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="å…·åæ’æ§½">å…·åæ’æ§½</h3>
<p>ç»„ä»¶åœ¨é¢„ç•™æ’æ§½æ—¶å¯ä»¥è®¾ç½® <code>name</code> å±æ€§ï¼Œä¸ºæ’æ§½æŒ‡å®šåç§°ï¼Œè¿™ç§æœ‰å…·ä½“åç§°çš„æ’æ§½å°±å«å…·åæ’æ§½ã€‚ æ²¡æœ‰è®¾ç½® <code>name</code> åç§°çš„æ’æ§½é»˜è®¤åç§°ä¸º <code>default</code> ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å­ç»„ä»¶é¢„ç•™å¤šä¸ªå…·åæ’æ§½ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;contianer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>è¿™æ˜¯å­ç»„ä»¶<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;title&quot;</span>&gt;</span>title å…·åæ’æ§½<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;content&quot;</span>&gt;</span>content å…·åæ’æ§½<span class="tag">&lt;/<span class="name">slot</span>&gt;</span>&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span>æ²¡æœ‰è®¾ç½® name åç§°åˆ™é»˜è®¤ä¸º default<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>çˆ¶ç»„ä»¶å‘å…·åæ’æ§½æä¾›è‡ªå®šä¹‰å†…å®¹</p>
<ul>
<li>æ–°çš„å†™æ³•ï¼šåŒ…è£¹ä¸€ä¸ª <code>&lt;template&gt;</code> æ ‡ç­¾ï¼ŒåŒæ—¶åœ¨ <code>&lt;template&gt;</code> ä¸­é€šè¿‡ <code>v-slot:åç§°</code> æŒ‡æ˜æ’æ§½çš„åç§°ã€‚ç®€å†™å½¢å¼ä¸º <code>#åç§°</code> ï¼Œä¸” <code>v-slot</code> åªèƒ½ä½¿ç”¨åœ¨ <code>&lt;template&gt;</code> å’Œç»„ä»¶æ ‡ç­¾ä¸Šï¼Œæ™®é€š HTML æ ‡ç­¾ä¸è¡Œ</li>
<li>æ—§çš„å†™æ³•ï¼š<code>slot=&quot;åç§°&quot;</code> æŒ‡æ˜æ’æ§½åç§°</li>
<li>å¦‚æœä¸æŒ‡å®šæ’æ§½åç§°ï¼Œé‚£ä¹ˆè‡ªå®šä¹‰å†…å®¹ä¼šè¢«å¡«å……åˆ°æ‰€æœ‰çš„ <code>default</code> æ’æ§½å½“ä¸­</li>
<li>åŒä¸€æ’æ§½å¡«å……å¤šä¸ªå†…å®¹ï¼Œæ˜¯è¿½åŠ ä¸æ˜¯è¦†ç›–</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- çˆ¶ç»„ä»¶å‘å…·åæ’æ§½æä¾›è‡ªå®šä¹‰å†…å®¹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">child-comp</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span> <span class="attr">slot</span>=<span class="string">&quot;title&quot;</span>&gt;</span>ã€Šèµ æ±ªä¼¦ã€‹<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ã€Šé™å¤œæ€ã€‹<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- ç®€å†™å½¢å¼ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">content</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>åºŠå‰æ˜æœˆå…‰ï¼Œç–‘æ˜¯åœ°ä¸Šéœœã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>ä¸¾å¤´æœ›æ˜æœˆï¼Œä½å¤´æ€æ•…ä¹¡ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ®µå†…å®¹æ²¡æœ‰æŒ‡å®šåç§°ï¼Œä¼šè¢«å¡«å……åˆ°æ‰€æœ‰ default æ’æ§½ä¸­ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">child-comp</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="ä½œç”¨åŸŸæ’æ§½">ä½œç”¨åŸŸæ’æ§½</h3>
<ul>
<li>ç»„ä»¶å¯ä»¥ä¸ºæ’æ§½ç»‘å®šè‡ªå®šä¹‰å±æ€§ <code>props</code> ï¼Œè¿™ç§æ’æ§½å«ä½œç”¨åŸŸæ’æ§½</li>
<li>ç†è§£ï¼šæ•°æ®åœ¨ç»„ä»¶çš„è‡ªèº«ï¼Œä½†æ ¹æ®æ•°æ®ç”Ÿæˆçš„ç»“æ„éœ€è¦ç»„ä»¶çš„ä½¿ç”¨è€…æ¥å†³å®š</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å­ç»„ä»¶ä¸ºæ’æ§½ç»‘å®š props æ•°æ® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">slot</span> <span class="attr">v-for</span>=<span class="string">&quot;item in list&quot;</span> <span class="attr">:user</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">list</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;Lily&#x27;</span>,</span><br><span class="line">          <span class="attr">state</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;Ben&#x27;</span>,</span><br><span class="line">          <span class="attr">state</span>: <span class="literal">false</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">id</span>: <span class="number">3</span>,</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;Water&#x27;</span>,</span><br><span class="line">          <span class="attr">state</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>çˆ¶ç»„ä»¶å‘æ’æ§½æä¾›è‡ªå®šä¹‰å†…å®¹æ—¶ï¼Œå¯ä»¥æ¥æ”¶ä½œç”¨åŸŸæ’æ§½æä¾›çš„æ•°æ®ï¼š</p>
<ul>
<li>æ—§å†™æ³•ï¼š<code>scope=&quot;scope&quot;</code> ã€<code>slot-scope=&quot;scope&quot;</code></li>
<li>æ–°å†™æ³•ï¼š<code>v-slot:default=&quot;scope&quot;</code></li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">child-comp</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>ä½œç”¨åŸŸæ’æ§½æä¾›çš„æ•°æ®ï¼š&#123;&#123; scope &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span> <span class="attr">slot</span>=<span class="string">&quot;default&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; scope &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">child-comp</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­æ¥æ”¶åˆ°çš„æ•°æ® <code>scope</code> æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// scope çš„å†…å®¹</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&#x27;user&#x27;</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;id&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Lily&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;state&#x27;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨æ¥æ”¶ä½œç”¨åŸŸæ’æ§½æä¾›çš„æ•°æ®æ—¶å¯ä»¥ä½¿ç”¨è§£æ„èµ‹å€¼ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">child-comp</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>=<span class="string">&quot;&#123;user&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>idï¼š&#123;&#123; user.id &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>nameï¼š&#123;&#123; user.name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>stateï¼š&#123;&#123; user.state &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">child-comp</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="è‡ªå®šä¹‰æŒ‡ä»¤">è‡ªå®šä¹‰æŒ‡ä»¤</h2>
<h3 id="åˆ†ç±»">åˆ†ç±»</h3>
<ul>
<li>ç§æœ‰è‡ªå®šä¹‰æŒ‡ä»¤ï¼šåœ¨ç»„ä»¶çš„ <code>directives</code> èŠ‚ç‚¹å£°æ˜</li>
<li>å…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤ï¼šåœ¨ <code>main.js</code> æ–‡ä»¶ä¸­å£°æ˜</li>
</ul>
<h3 id="å®Œæ•´å†™æ³•">å®Œæ•´å†™æ³•</h3>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-focus</span>=<span class="string">&quot;content&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">content</span>: <span class="number">666</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">directives</span>: &#123;</span><br><span class="line">  <span class="attr">focus</span>: &#123;</span><br><span class="line">    <span class="comment">// æŒ‡ä»¤ä¸å…ƒç´ æˆåŠŸç»‘å®šæ—¶æ‰§è¡Œï¼Œæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">    <span class="title function_">bind</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">      el.<span class="property">value</span> = binding.<span class="property">value</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŒ‡ä»¤æ‰€åœ¨å…ƒç´ æ’å…¥é¡µé¢æ—¶æ‰§è¡Œï¼Œæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">    <span class="title function_">inserted</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">      <span class="comment">// ä¸€è¿›å…¥é¡µé¢è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹</span></span><br><span class="line">      el.<span class="title function_">focus</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŒ‡ä»¤æ‰€åœ¨å…ƒç´ é‡æ–°è§£æï¼ˆä¸ªäººè§‰å¾—ä¸åº”æ˜¯æ¸²æŸ“ï¼Œè€Œæ˜¯è§£æï¼Œé‡æ–°è§£æä¸ä¸€å®šé‡æ–°æ¸²æŸ“ï¼‰æ—¶æ‰§è¡Œï¼Œæ‰§è¡Œ 0+N æ¬¡</span></span><br><span class="line">    <span class="title function_">update</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">      el.<span class="property">value</span> = binding.<span class="property">value</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨å±€å†™æ³•</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;focus&#x27;</span>, &#123;</span><br><span class="line">  <span class="title function_">bind</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">    el.<span class="property">value</span> = binding.<span class="property">value</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">inserted</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">    el.<span class="title function_">focus</span>()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">update</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">    el.<span class="property">value</span> = binding.<span class="property">value</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="ç®€å†™å½¢å¼">ç®€å†™å½¢å¼</h3>
<ul>
<li>å½“ <code>bind</code> å‡½æ•°å’Œ <code>update</code> å‡½æ•°é‡Œçš„é€»è¾‘å®Œå…¨ç›¸åŒæ—¶ï¼Œå¯ä»¥ç®€å†™</li>
<li>ä¸éœ€è¦å®šä¹‰ <code>inserted</code> å‡½æ•°æ‰ä½¿ç”¨ç®€å†™å½¢å¼</li>
<li>å› æ­¤ç®€å†™å½¢å¼çš„è°ƒç”¨æ—¶æœºï¼šåˆæ¬¡ç»‘å®šå’Œ DOM æ›´æ–°ï¼ˆæŒ‡ä»¤æ‰€åœ¨æ¨¡æ¿è¢«é‡æ–°è§£æï¼‰</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-color</span>=<span class="string">&quot;&#x27;red&#x27;&quot;</span>&gt;</span>ç®€å†™å½¢å¼<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">directives</span>: &#123;</span><br><span class="line">  <span class="title function_">color</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">    el.<span class="property">style</span>.<span class="property">color</span> = binding.<span class="property">value</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨å±€å†™æ³•</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;color&#x27;</span>, <span class="function">(<span class="params">el, binding</span>) =&gt;</span> &#123;</span><br><span class="line">  el.<span class="property">style</span>.<span class="property">color</span> = binding.<span class="property">value</span></span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure>
<h3 id="æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹</h3>
<ul>
<li>è‡ªå®šä¹‰æŒ‡ä»¤ä½¿ç”¨æ—¶éœ€è¦æ·»åŠ  <code>v-</code> å‰ç¼€</li>
<li>æŒ‡ä»¤åå¦‚æœæ˜¯å¤šä¸ªå•è¯ï¼Œè¦ä½¿ç”¨ <code>kebab-case</code> çŸ­æ¨ªçº¿å‘½åæ–¹å¼ï¼Œä¸è¦ç”¨ <code>camelCase</code> é©¼å³°å‘½å</li>
<li>è‡ªå®šä¹‰æŒ‡ä»¤ä¸‰ä¸ªå‡½æ•°é‡Œçš„ <code>this</code> æŒ‡å‘ <code>window</code></li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">v-big-number</span>=<span class="string">&quot;n&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">n</span>: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">directives</span>: &#123;</span><br><span class="line">  <span class="comment">// æ·»åŠ å¼•å·æ‰æ˜¯å¯¹è±¡é”®åå®Œæ•´å†™æ³•</span></span><br><span class="line">  <span class="comment">// å¹³æ—¶ä¸åŠ å¼•å·éƒ½æ˜¯ç®€å†™å½¢å¼</span></span><br><span class="line">  <span class="comment">// é‡åˆ°çŸ­æ¨ªçº¿çš„é”®åå°±å¿…é¡»æ·»åŠ å¼•å·</span></span><br><span class="line">  <span class="string">&#x27;big-number&#x27;</span>: &#123;</span><br><span class="line">    <span class="title function_">bind</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>) <span class="comment">// Window</span></span><br><span class="line">      el.<span class="property">innerText</span> = binding.<span class="property">value</span> * <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Mixin-æ··å…¥">Mixin æ··å…¥</h2>
<ul>
<li>Mixin å¯ä»¥æŠŠå¤šä¸ªç»„ä»¶å…±ç”¨çš„é…ç½®æå–æˆä¸€ä¸ªæ··å…¥å¯¹è±¡</li>
<li>æ··å…¥å’Œç»„ä»¶è‡ªèº«çš„é…ç½®ä¼šåˆå¹¶</li>
<li><code>data</code> ã€<code>methods</code> è‹¥å†²çªä»¥è‡ªèº«ä¸ºå‡†</li>
<li>å¯¹äºç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œæ‰§è¡ŒåŠ¨ä½œä¼šåˆå¹¶ï¼Œä¸”å…ˆæ‰§è¡Œ Mixin é‡Œçš„åŠ¨ä½œ</li>
</ul>
<p>å®šä¹‰æ··å…¥ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mixin.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> mixin = &#123;</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">showName</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello mixin&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> mixin2 = &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">x</span>: <span class="number">100</span>,</span><br><span class="line">      <span class="attr">y</span>: <span class="number">200</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨å±€éƒ¨æ··å…¥ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mixin, mixin2 &#125; <span class="keyword">from</span> <span class="string">&#x27;../mixin.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;School&#x27;</span>,</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">schoolName</span>: <span class="string">&#x27;åŒ—å¤§&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mixins</span>: [mixin, mixin2],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨å…¨å±€æ··å…¥ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; mixin, mixin2 &#125; <span class="keyword">from</span> <span class="string">&#x27;./mixin.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">mixin</span>(mixin)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">mixin</span>(mixin2)</span><br></pre></td></tr></table></figure>
<h2 id="æ’ä»¶">æ’ä»¶</h2>
<ul>
<li>ç”¨äºå¢å¼º Vue</li>
<li>æœ¬è´¨æ˜¯åŒ…å« <code>install</code> æ–¹æ³•çš„ä¸€å¯¹è±¡ï¼Œ<code>install</code> ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ Vue æ„é€ å‡½æ•°ï¼Œç¬¬äºŒä¸ªä»¥åçš„å‚æ•°æ˜¯æ’ä»¶ä½¿ç”¨è€…ä¼ é€’çš„æ•°æ®</li>
</ul>
<p>å®šä¹‰æ’ä»¶ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// plugins.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">install</span>(<span class="params">Vue, ...rest</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(rest)</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Vue</span>.<span class="title function_">filter</span>(...)</span><br><span class="line">    <span class="title class_">Vue</span>.<span class="title function_">directive</span>(...)</span><br><span class="line">    <span class="title class_">Vue</span>.<span class="title function_">mixin</span>(...)</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myProperty</span> = <span class="string">&#x27;plugins&#x27;</span></span><br><span class="line">    <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myMethod</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨æ’ä»¶ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> plugins <span class="keyword">from</span> <span class="string">&#x27;./plugins.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(plugins, <span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h2 id="nextTick">$nextTick</h2>
<ul>
<li>è¯­æ³•ï¼š<code>this.$nextTick(å›è°ƒå‡½æ•°)</code></li>
<li>ä½œç”¨ï¼šåœ¨ä¸‹ä¸€æ¬¡ DOM æ›´æ–°ç»“æŸåæ‰§è¡Œå…¶æŒ‡å®šçš„å›è°ƒ</li>
<li>ä»€ä¹ˆæ—¶å€™ç”¨ï¼šå½“æ”¹å˜æ•°æ®åï¼Œè¦åŸºäºæ›´æ–°åçš„ DOM è¿›è¡Œæ“ä½œæ—¶ï¼Œè¦åœ¨ <code>nextTick</code> æŒ‡å®šçš„å›è°ƒå‡½æ•°ä¸­æ‰§è¡Œ</li>
<li>ç»„ä»¶çš„ <code>$nextTick(cb)</code> æ–¹æ³•ï¼Œä¼šæŠŠ cb å›è°ƒæ¨è¿Ÿåˆ°ä¸‹ä¸€ä¸ª DOM æ›´æ–°å‘¨æœŸä¹‹åæ‰§è¡Œï¼Œå³åœ¨ DOM æ›´æ–°å®Œæˆåå†æ‰§è¡Œå›è°ƒï¼Œä»è€Œä¿è¯ cb å›è°ƒå¯ä»¥è·å–æœ€æ–°çš„ DOM å…ƒç´ </li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">showInput</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">inputVisible</span> = <span class="literal">true</span></span><br><span class="line">    <span class="comment">// å¯¹è¾“å…¥æ¡†çš„æ“ä½œæ¨è¿Ÿåˆ° DOM æ›´æ–°å®Œæˆä¹‹å</span></span><br><span class="line">    <span class="variable language_">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">input</span>.<span class="title function_">focus</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>Vue è„šæ‰‹æ¶</h1>
<p><a target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/">å®˜ç½‘ä¼ é€é—¨</a></p>
<h2 id="åˆ›å»º-Vue-é¡¹ç›®">åˆ›å»º Vue é¡¹ç›®</h2>
<ul>
<li>å…¨å±€å®‰è£… vue è„šæ‰‹æ¶ï¼š<code>npm i -g @vue/cli</code></li>
<li>åˆ›å»ºé¡¹ç›®ï¼š<code>vue create project-name</code></li>
<li>è¿è¡Œé¡¹ç›®ï¼š<code>npm run serve</code></li>
<li>æš´éœ² webpack é…ç½®ï¼š<code>vue inspect &gt; output.js</code></li>
</ul>
<h2 id="Vue-è„šæ‰‹æ¶é¡¹ç›®ç»“æ„">Vue è„šæ‰‹æ¶é¡¹ç›®ç»“æ„</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ node_modules</span><br><span class="line">â”œâ”€â”€ public</span><br><span class="line">â”‚ â”œâ”€â”€ favicon.ico: é¡µç­¾å›¾æ ‡</span><br><span class="line">â”‚ â””â”€â”€ index.html: ä¸»é¡µé¢</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚ â”œâ”€â”€ assets: å­˜æ”¾é™æ€èµ„æº</span><br><span class="line">â”‚ â”‚ â””â”€â”€ logo.png</span><br><span class="line">â”‚ â”‚â”€â”€ component: å­˜æ”¾ç»„ä»¶</span><br><span class="line">â”‚ â”‚ â””â”€â”€ HelloWorld.vue</span><br><span class="line">â”‚ â”‚â”€â”€ App.vue: æ±‡æ€»æ‰€æœ‰ç»„ä»¶</span><br><span class="line">â”‚ â”‚â”€â”€ main.js: å…¥å£æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ .gitignore: git ç‰ˆæœ¬ç®¡åˆ¶å¿½ç•¥çš„é…ç½®</span><br><span class="line">â”œâ”€â”€ babel.config.js: babel çš„é…ç½®æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ package.json: åº”ç”¨åŒ…é…ç½®æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ README.md: åº”ç”¨æè¿°æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ package-lock.jsonï¼šåŒ…ç‰ˆæœ¬æ§åˆ¶æ–‡ä»¶</span><br></pre></td></tr></table></figure>
<p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/vue-cli.4f118ba8.png" alt="Vueè„šæ‰‹æ¶é¡¹ç›®ç»“æ„"></p>
<p><code>index.html</code> ä»£ç åˆ†æï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é’ˆå¯¹IEæµè§ˆå™¨çš„ä¸€ä¸ªç‰¹æ®Šé…ç½®ï¼Œå«ä¹‰æ˜¯è®©IEæµè§ˆå™¨ä»¥æœ€é«˜çš„æ¸²æŸ“çº§åˆ«æ¸²æŸ“é¡µé¢ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼€å¯ç§»åŠ¨ç«¯çš„ç†æƒ³è§†å£ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width,initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;%= BASE_URL %&gt; è¡¨ç¤º public æ–‡ä»¶å¤¹è·¯å¾„ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%= BASE_URL %&gt;favicon.ico&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ‹¿ package-lock.json çš„ name ä½œä¸ºæ ‡é¢˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>&lt;%= htmlWebpackPlugin.options.title %&gt;<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å½“æµè§ˆå™¨ä¸æ”¯æŒjsæ—¶noscriptä¸­çš„å…ƒç´ å°±ä¼šè¢«æ¸²æŸ“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">noscript</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">strong</span>&gt;</span>We&#x27;re sorry but &lt;%= htmlWebpackPlugin.options.title %&gt; doesn&#x27;t work properly without JavaScript enabled. Please enable it to continue.<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">noscript</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å®¹å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- built files will be auto injected --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="ä¸åŒç‰ˆæœ¬çš„-Vue-ä¸-render-å‡½æ•°">ä¸åŒç‰ˆæœ¬çš„ Vue ä¸ <code>render</code> å‡½æ•°</h2>
<ol>
<li><code>vue.js</code> ä¸ <code>vue.runtime.xxx.js</code> çš„åŒºåˆ«ï¼š</li>
</ol>
<ul>
<li><code>import Vue from 'vue'</code> é»˜è®¤å¯¼å…¥ <code>vue.runtime.esm.js</code></li>
<li><code>vue.js</code> æ˜¯å®Œæ•´ç‰ˆçš„ Vueï¼ŒåŒ…å«ï¼šæ ¸å¿ƒåŠŸèƒ½ + æ¨¡æ¿è§£æå™¨</li>
<li><code>vue.runtime.xxx.js</code> æ˜¯è¿è¡Œç‰ˆçš„ Vueï¼ŒåªåŒ…å«ï¼šæ ¸å¿ƒåŠŸèƒ½ï¼›æ²¡æœ‰æ¨¡æ¿è§£æå™¨</li>
</ul>
<ol start="2">
<li><code>vue.runtime.xxx.js</code> æ²¡æœ‰æ¨¡æ¿è§£æå™¨ï¼Œæ•…ä¸èƒ½ä½¿ç”¨ <code>template</code> é…ç½®é¡¹ï¼Œéœ€ä½¿ç”¨ <code>render</code> å‡½æ•°æ¥æ”¶åˆ°çš„ <code>createElement</code> å‡½æ•°å»æŒ‡å®šå…·ä½“å†…å®¹</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.js&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// render()</span></span><br><span class="line"><span class="attr">render</span>: <span class="keyword">function</span>(<span class="params">createElement</span>) &#123;</span><br><span class="line">  <span class="comment">// åˆ›å»ºå…ƒç´ </span></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">createElement</span>(<span class="string">&#x27;h1&#x27;</span>, <span class="string">&#x27;Hello Vue&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="attr">render</span>: <span class="function"><span class="params">createElement</span> =&gt;</span> <span class="title function_">createElement</span>(<span class="title class_">App</span>)</span><br></pre></td></tr></table></figure>
<h2 id="vue-config-js-é…ç½®æ–‡ä»¶">vue.config.js é…ç½®æ–‡ä»¶</h2>
<ol>
<li>ä½¿ç”¨ <code>vue inspect &gt; output.js</code> å¯ä»¥æŸ¥çœ‹åˆ° Vue è„šæ‰‹æ¶çš„é»˜è®¤é…ç½®ã€‚</li>
<li>ä½¿ç”¨ <code>vue.config.js</code> å¯ä»¥å¯¹è„šæ‰‹æ¶è¿›è¡Œä¸ªæ€§åŒ–å®šåˆ¶ï¼Œ<a target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/config/">è¯¦æƒ…</a></li>
</ol>
<h2 id="TodoList-æ¡ˆä¾‹æ€»ç»“">TodoList æ¡ˆä¾‹æ€»ç»“</h2>
<ol>
<li>ç»„ä»¶åŒ–ç¼–ç æµç¨‹ï¼š</li>
</ol>
<ul>
<li>æ‹†åˆ†é™æ€ç»„ä»¶ï¼šç»„ä»¶è¦æŒ‰ç…§åŠŸèƒ½ç‚¹æ‹†åˆ†ï¼Œå‘½åä¸è¦ä¸ html å…ƒç´ å†²çªã€‚</li>
<li>å®ç°åŠ¨æ€ç»„ä»¶ï¼šè€ƒè™‘å¥½æ•°æ®çš„å­˜æ”¾ä½ç½®ï¼Œæ•°æ®æ˜¯ä¸€ä¸ªç»„ä»¶åœ¨ç”¨ï¼Œè¿˜æ˜¯ä¸€äº›ç»„ä»¶åœ¨ç”¨ï¼š
<ul>
<li>ä¸€ä¸ªç»„ä»¶åœ¨ç”¨ï¼šæ”¾åœ¨ç»„ä»¶è‡ªèº«å³å¯</li>
<li>ä¸€äº›ç»„ä»¶åœ¨ç”¨ï¼šæ”¾åœ¨ä»–ä»¬å…±åŒçš„çˆ¶ç»„ä»¶ä¸Šï¼ˆçŠ¶æ€æå‡ï¼‰</li>
</ul>
</li>
<li>å®ç°äº¤äº’ï¼šä»ç»‘å®šäº‹ä»¶å¼€å§‹ã€‚</li>
</ul>
<ol start="2">
<li><code>props</code> é€‚ç”¨äºï¼š</li>
</ol>
<ul>
<li>çˆ¶ ==&gt; å­</li>
<li>å­ ==&gt; çˆ¶ï¼ˆè¦æ±‚çˆ¶å…ˆç»™å­ä¸€ä¸ªå‡½æ•°ï¼‰</li>
</ul>
<ol start="3">
<li>
<p><code>v-model</code> ç»‘å®šçš„å€¼ä¸èƒ½æ˜¯ <code>props</code> ä¼ è¿‡æ¥çš„å€¼ï¼Œå› ä¸º <code>props</code> æ˜¯ä¸å¯ä»¥ä¿®æ”¹çš„ï¼</p>
</li>
<li>
<p><code>props</code> ä¼ è¿‡æ¥çš„è‹¥æ˜¯å¯¹è±¡ç±»å‹çš„å€¼ï¼Œä¿®æ”¹å¯¹è±¡ä¸­çš„å±æ€§æ—¶ Vue ä¸ä¼šæŠ¥é”™ï¼Œä½†ä¸æ¨è</p>
</li>
</ol>
<h2 id="ä¸€äº›ç¬¬ä¸‰æ–¹åŒ…">ä¸€äº›ç¬¬ä¸‰æ–¹åŒ…</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://gitee.com/mirrors/nanoid#nano-id">nanoid</a></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install nanoid</span><br><span class="line"></span><br><span class="line">import &#123; nanoid &#125; from nanoid</span><br><span class="line"></span><br><span class="line">model.id = nanoid()</span><br></pre></td></tr></table></figure>
<ul>
<li><a target="_blank" rel="noopener" href="https://dayjs.fenxianglu.cn/">dayjs</a></li>
</ul>
<h1>Vue ç½‘ç»œè¯·æ±‚</h1>
<h2 id="Vue-è„šæ‰‹æ¶é…ç½®ä»£ç†">Vue è„šæ‰‹æ¶é…ç½®ä»£ç†</h2>
<h3 id="é…ç½®å•ä¸ªä»£ç†">é…ç½®å•ä¸ªä»£ç†</h3>
<p>åœ¨ <code>vue.config.js</code> ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line">  <span class="attr">proxy</span>: <span class="string">&#x27;http://localhost:5000&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¼˜ç‚¹ï¼šé…ç½®ç®€å•ï¼Œè¯·æ±‚èµ„æºæ—¶ç›´æ¥å‘ç»™å‰ç«¯ï¼ˆ8080ï¼‰å³å¯ã€‚</li>
<li>ç¼ºç‚¹ï¼šä¸èƒ½é…ç½®å¤šä¸ªä»£ç†ï¼Œä¸èƒ½çµæ´»çš„æ§åˆ¶è¯·æ±‚æ˜¯å¦èµ°ä»£ç†ã€‚</li>
<li>å·¥ä½œæ–¹å¼ï¼šè‹¥æŒ‰ç…§ä¸Šè¿°é…ç½®ä»£ç†ï¼Œå½“è¯·æ±‚äº†å‰ç«¯ä¸å­˜åœ¨çš„èµ„æºæ—¶ï¼Œé‚£ä¹ˆè¯¥è¯·æ±‚ä¼šè½¬å‘ç»™æœåŠ¡å™¨ ï¼ˆä¼˜å…ˆåŒ¹é…å‰ç«¯èµ„æºï¼‰</li>
</ul>
<h3 id="é…ç½®å¤šä¸ªä»£ç†">é…ç½®å¤šä¸ªä»£ç†</h3>
<p>ç¼–å†™ <code>vue.config.js</code> é…ç½®å…·ä½“ä»£ç†è§„åˆ™ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;/api1&#x27;</span>: &#123;</span><br><span class="line">        <span class="comment">// åŒ¹é…æ‰€æœ‰ä»¥ &#x27;/api1&#x27;å¼€å¤´çš„è¯·æ±‚è·¯å¾„</span></span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;http://localhost:5000&#x27;</span>, <span class="comment">// ä»£ç†ç›®æ ‡çš„åŸºç¡€è·¯å¾„</span></span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// æŠŠè·¯å¾„çš„ /api1 æ›¿æ¢ä¸ºç©ºä¸²</span></span><br><span class="line">        <span class="attr">pathRewrite</span>: &#123; <span class="string">&#x27;^/api1&#x27;</span>: <span class="string">&#x27;&#x27;</span> &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&#x27;/api2&#x27;</span>: &#123;</span><br><span class="line">        <span class="comment">// åŒ¹é…æ‰€æœ‰ä»¥ &#x27;/api2&#x27;å¼€å¤´çš„è¯·æ±‚è·¯å¾„</span></span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;http://localhost:5001&#x27;</span>,</span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">pathRewrite</span>: &#123; <span class="string">&#x27;^/api2&#x27;</span>: <span class="string">&#x27;&#x27;</span> &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">changeOrigin è®¾ç½®ä¸º true æ—¶ï¼ŒæœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚å¤´ä¸­çš„ hostï¼šlocalhost:5000</span></span><br><span class="line"><span class="comment">changeOrigin è®¾ç½®ä¸º false æ—¶ï¼ŒæœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚å¤´ä¸­çš„ hostï¼šlocalhost:8080</span></span><br><span class="line"><span class="comment">changeOrigin é»˜è®¤ä¸º true</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ä¼˜ç‚¹ï¼šå¯ä»¥é…ç½®å¤šä¸ªä»£ç†ï¼Œä¸”å¯ä»¥çµæ´»çš„æ§åˆ¶è¯·æ±‚æ˜¯å¦èµ°ä»£ç†ã€‚</li>
<li>ç¼ºç‚¹ï¼šé…ç½®ç•¥å¾®ç¹çï¼Œè¯·æ±‚èµ„æºæ—¶å¿…é¡»åŠ å‰ç¼€</li>
</ul>
<h2 id="vue-2-x-å…¨å±€é…ç½®-axios">vue 2.x å…¨å±€é…ç½® axios</h2>
<p>å®é™…é¡¹ç›®å¼€å‘ä¸­ï¼Œå‡ ä¹æ¯ä¸ªç»„ä»¶ä¸­éƒ½ä¼šä½¿ç”¨ <code>axios</code> å‘èµ·æ•°æ®è¯·æ±‚ã€‚æ­¤æ—¶ä¼šé‡åˆ°å¦‚ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>æ¯ä¸ªç»„ä»¶ä¸­éƒ½éœ€è¦å¯¼å…¥ <code>axios</code>ï¼ˆä»£ç è‡ƒè‚¿ï¼‰</li>
<li>æ¯æ¬¡å‘è¯·æ±‚éƒ½éœ€è¦å¡«å†™å®Œæ•´çš„è¯·æ±‚è·¯å¾„ï¼ˆä¸åˆ©äºåæœŸçš„ç»´æŠ¤ï¼‰</li>
</ul>
<p>åœ¨ <code>main.js</code> æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é…ç½®è¯·æ±‚æ ¹è·¯å¾„</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = <span class="string">&#x27;http://api.com&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠŠ axios æŒ‚è½½åˆ° Vue åŸå‹ä¸Š</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$http</span> = aixos</span><br></pre></td></tr></table></figure>
<p><strong>ä¼˜ç‚¹</strong>ï¼šæ¯ä¸ªç»„ä»¶å¯ä»¥é€šè¿‡ <code>this.$http.get</code> ç›´æ¥å‘èµ·è¯·æ±‚ï¼Œæ— éœ€å†å¯¼å…¥ <code>axios</code> ï¼›è‹¥æ ¹è·¯å¾„å‘ç”Ÿæ”¹å˜ï¼Œåªéœ€ä¿®æ”¹ <code>axios.defaults.baseURL</code> ï¼Œæœ‰åˆ©äºä»£ç ç»´æŠ¤ã€‚</p>
<p><strong>ç¼ºç‚¹</strong>ï¼šæ— æ³•å®ç° <code>API</code> çš„å¤ç”¨ã€‚å³å¤šä¸ªç»„ä»¶éœ€è¦å¯¹åŒä¸€ä¸ªæ¥å£å‘èµ·è¯·æ±‚ï¼Œé‚£ä¹ˆæ¯ä¸ªç»„ä»¶éƒ½éœ€è¦é‡å¤ä¹¦å†™ <code>this.$http.get('/users')</code> ç±»ä¼¼çš„ä»£ç ï¼Œé€ æˆå†—ä½™ã€‚ï¼ˆè§†é¢‘ä¸Šçš„è¯´æ³•ï¼Œä¸ªäººè®¤ä¸ºçœŸæ­£çš„ç¼ºç‚¹æ˜¯å¦‚æœå­˜åœ¨å¤šä¸ªæ ¹è·¯å¾„ï¼Œè¿™ç§æ–¹å¼æ— æ³•è§£å†³ï¼Œæ‰€ä»¥æ‰ä¼šæœ‰ä¸‹é¢çš„æ”¹è¿›æ–¹å¼ã€‚ï¼‰</p>
<p><strong>æ”¹è¿›</strong>ï¼šå¯¹äºæ¯ä¸€ä¸ªæ ¹è·¯å¾„ï¼Œç‹¬ç«‹å°è£…ä¸€ä¸ª <code>request.js</code> æ¨¡å—ï¼Œç»„ä»¶å¯¼å…¥æ‰€éœ€æ ¹è·¯å¾„å¯¹åº”çš„ <code>axios</code> è¿›è¡Œä½¿ç”¨ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»º axios å®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> request = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&#x27;http://api.taobao.com&#x27;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> request</span><br></pre></td></tr></table></figure>
<h1>Vuex</h1>
<p><a target="_blank" rel="noopener" href="https://vuex.vuejs.org/zh/">å®˜ç½‘ä¼ é€é—¨</a></p>
<h2 id="æ¦‚è¿°">æ¦‚è¿°</h2>
<p>ä½•ä¸º Vuex ï¼Ÿ</p>
<p>Vuex ä¸“é—¨åœ¨ Vue ä¸­å®ç°é›†ä¸­å¼çŠ¶æ€ï¼ˆæ•°æ®ï¼‰ç®¡ç†çš„ä¸€ä¸ª Vue æ’ä»¶ï¼Œå¯¹ Vue åº”ç”¨ä¸­å¤šä¸ªç»„ä»¶çš„å…±äº«çŠ¶æ€è¿›è¡Œé›†ä¸­å¼çš„ç®¡ç†ï¼Œä¹Ÿæ˜¯ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œé€‚ç”¨äºä»»æ„ç»„ä»¶é—´é€šä¿¡</p>
<p>ä½•æ—¶ç”¨ Vuex ï¼Ÿ</p>
<ul>
<li>å¤šä¸ªç»„ä»¶ä¾èµ–äºåŒä¸€çŠ¶æ€</li>
<li>æ¥è‡ªä¸åŒç»„ä»¶çš„è¡Œä¸ºéœ€è¦å˜æ›´åŒä¸€çŠ¶æ€</li>
</ul>
<p>Vuex å·¥ä½œåŸç†å›¾ï¼š</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/vuex.6007da7c.png" alt="Vuexå·¥ä½œåŸç†"></p>
<p>å®˜æ–¹ Vuex é¡¹ç›®ç»“æ„ç¤ºä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ index.html</span><br><span class="line">â”œâ”€â”€ main.js</span><br><span class="line">â”œâ”€â”€ api</span><br><span class="line">â”‚   â””â”€â”€ ... # æŠ½å–å‡ºAPIè¯·æ±‚</span><br><span class="line">â”œâ”€â”€ components</span><br><span class="line">â”‚   â”œâ”€â”€ App.vue</span><br><span class="line">â”‚   â””â”€â”€ ...</span><br><span class="line">â””â”€â”€ store</span><br><span class="line">    â”œâ”€â”€ index.js          # ç»„è£…æ¨¡å—å¹¶å¯¼å‡º store çš„åœ°æ–¹</span><br><span class="line">    â”œâ”€â”€ actions.js        # æ ¹çº§åˆ«çš„ action</span><br><span class="line">    â”œâ”€â”€ mutations.js      # æ ¹çº§åˆ«çš„ mutation</span><br><span class="line">    â””â”€â”€ modules</span><br><span class="line">        â”œâ”€â”€ cart.js       # è´­ç‰©è½¦æ¨¡å—</span><br><span class="line">        â””â”€â”€ products.js   # äº§å“æ¨¡å—</span><br></pre></td></tr></table></figure>
<h2 id="Vuex-æ ¸å¿ƒæ¦‚å¿µ">Vuex æ ¸å¿ƒæ¦‚å¿µ</h2>
<h3 id="state">state</h3>
<ul>
<li>Vuex ç®¡ç†çš„çŠ¶æ€å¯¹è±¡</li>
<li>å”¯ä¸€çš„</li>
</ul>
<h3 id="actions">actions</h3>
<ul>
<li>å€¼ä¸ºä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«å¤šä¸ªå“åº”ç”¨æˆ·åŠ¨ä½œçš„å›è°ƒå‡½æ•°</li>
<li>é€šè¿‡ <code>commit()</code>è§¦å‘ mutation ä¸­å‡½æ•°çš„è°ƒç”¨ï¼Œé—´æ¥æ›´æ–° state</li>
<li>å¯åŒ…å«å¼‚æ­¥ä»£ç </li>
</ul>
<h3 id="mutations">mutations</h3>
<ul>
<li>å€¼ä¸ºä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«å¤šä¸ªç›´æ¥æ›´æ–° state çš„æ–¹æ³•</li>
<li>ä¸èƒ½å†™å¼‚æ­¥ä»£ç ï¼Œåªèƒ½å•çº¯åœ°æ“ä½œ state</li>
</ul>
<h3 id="getters">getters</h3>
<ul>
<li>å€¼ä¸ºä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«å¤šä¸ªç”¨äºè¿”å›æ•°æ®çš„å‡½æ•°</li>
<li>ç±»ä¼¼äºè®¡ç®—å±æ€§ï¼Œgetters è¿”å›çš„æ•°æ®ä¾èµ–äº state çš„æ•°æ®</li>
</ul>
<h3 id="modules">modules</h3>
<ul>
<li>ä¸€ä¸ª module æ˜¯ä¸€ä¸ª store çš„é…ç½®å¯¹è±¡ï¼Œä¸ä¸€ä¸ªç»„ä»¶å¯¹åº”</li>
</ul>
<h2 id="æ­å»º-Vuex-ç¯å¢ƒ">æ­å»º Vuex ç¯å¢ƒ</h2>
<p>å®‰è£… Vuexï¼š<code>npm install vuex@3 --save</code></p>
<blockquote>
<p>æ³¨æ„ï¼šVue2 å®‰è£… Vuex3ï¼ŒVue3 å®‰è£… Vuex4ï¼Œç‰ˆæœ¬éœ€å¯¹åº”ã€‚</p>
</blockquote>
<p>åˆ›å»ºæ–‡ä»¶ <code>src/store/index.js</code> ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> actions = &#123;&#125;</span><br><span class="line"><span class="keyword">const</span> mutations = &#123;&#125;</span><br><span class="line"><span class="keyword">const</span> state = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  actions,</span><br><span class="line">  mutations,</span><br><span class="line">  state,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>main.js</code> é…ç½® <code>store</code> ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  store,</span><br><span class="line">  <span class="attr">render</span>: <span class="function">(<span class="params">h</span>) =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="åŸºæœ¬ä½¿ç”¨-v3">åŸºæœ¬ä½¿ç”¨</h2>
<p>ç»„ä»¶å®ä¾‹ä¸ <code>Actions</code> å’Œ <code>Mutations</code> å¯¹è¯ï¼š</p>
<ul>
<li>è‹¥æ²¡æœ‰ç½‘ç»œè¯·æ±‚æˆ–å…¶ä»–ä¸šåŠ¡é€»è¾‘ï¼Œç»„ä»¶ä¸­ä¹Ÿå¯ä»¥è¶Šè¿‡ <code>actions</code> ï¼Œå³ä¸å†™<code>dispatch</code>ï¼Œç›´æ¥ç¼–å†™<code>commit</code>ï¼š</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;ADD&#x27;</span>, <span class="variable language_">this</span>.<span class="property">number</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">incrementOdd</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;addOdd&#x27;</span>, <span class="variable language_">this</span>.<span class="property">number</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">incrementAsync</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;addAsync&#x27;</span>, <span class="variable language_">this</span>.<span class="property">number</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®šä¹‰ <code>Actions</code> å’Œ <code>Mutations</code>ï¼š</p>
<ul>
<li><code>context</code> æ˜¯ä¸€ä¸ªè¿·ä½ ç‰ˆçš„ <code>store</code>ï¼Œå¯è®¿é—® <code>dispatch</code>, <code>commit</code> æ–¹æ³•å’Œ <code>state</code></li>
<li><code>mutations</code> çš„åŠ¨ä½œç±»å‹ä¸€èˆ¬ç”¨å¤§å†™ï¼Œä¸ <code>actions</code> åŒºåˆ†</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">  <span class="comment">// context æ˜¯ä¸€ä¸ªè¿·ä½ ç‰ˆçš„ store</span></span><br><span class="line">  <span class="comment">// å¯è®¿é—® dispatch, commit æ–¹æ³•å’Œ state</span></span><br><span class="line">  <span class="title function_">addOdd</span>(<span class="params">context, value</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (context.<span class="property">state</span>.<span class="property">sum</span> % <span class="number">2</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">      context.<span class="title function_">commit</span>(<span class="string">&#x27;ADD&#x27;</span>, value)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">addAsync</span>(<span class="params">context, value</span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      context.<span class="title function_">commit</span>(<span class="string">&#x27;ADD&#x27;</span>, value)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">  <span class="comment">// mutations çš„åŠ¨ä½œç±»å‹ä¸€èˆ¬ç”¨å¤§å†™ï¼Œä¸ actions åŒºåˆ†</span></span><br><span class="line">  <span class="title function_">ADD</span>(<span class="params">state, value</span>) &#123;</span><br><span class="line">    state.<span class="property">sum</span> += value</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">  <span class="attr">sum</span>: <span class="number">0</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  actions,</span><br><span class="line">  mutations,</span><br><span class="line">  state,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>ç»„ä»¶è®¿é—® Vuex çš„æ•°æ®ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; $store.state.sum &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="getters-çš„ä½¿ç”¨">getters çš„ä½¿ç”¨</h2>
<ul>
<li>å½“ <code>state</code> ä¸­çš„æ•°æ®éœ€è¦ç»è¿‡åŠ å·¥åå†ä½¿ç”¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>getters</code> åŠ å·¥</li>
<li>å®ƒä¸æ˜¯å¿…é¡»çš„ï¼Œå½“åŠ å·¥é€»è¾‘å¤æ‚ä¸”éœ€è¦å¤ç”¨æ—¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨</li>
<li><code>state</code> ä¸ <code>getters</code> çš„å…³ç³»æœ‰ç‚¹åƒ <code>data</code> å’Œ <code>computed</code> çš„å…³ç³»</li>
<li>ç»„ä»¶è¯»å–ï¼š<code>$store.getters.bigSum</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">const</span> getters = &#123;</span><br><span class="line">  <span class="title function_">bigSum</span>(<span class="params">state</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> state.<span class="property">sum</span> * <span class="number">10</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  actions,</span><br><span class="line">  mutations,</span><br><span class="line">  state,</span><br><span class="line">  getters</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="å››ä¸ª-mapXxx-æ–¹æ³•">å››ä¸ª mapXxx æ–¹æ³•</h2>
<h3 id="mapState">mapState()</h3>
<ul>
<li>å°† <code>state</code> çŠ¶æ€æ˜ å°„ä¸ºè®¡ç®—å±æ€§</li>
<li>å¯¹è±¡å†™æ³•ï¼šé”®ä¸ºè‡ªå–çš„è®¡ç®—å±æ€§åï¼Œå€¼ä¸ºå¯¹åº”çš„çŠ¶æ€ï¼ˆå¿…é¡»ä¸ºå­—ç¬¦ä¸²ï¼‰</li>
<li>æ•°ç»„å†™æ³•ï¼šå½“é”®å€¼åŒåï¼Œå¯ç›´æ¥å†™çŠ¶æ€åï¼ˆå­—ç¬¦ä¸²ï¼‰</li>
<li>å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼š<code>&#123;sum: f, price: f&#125;</code></li>
<li>æ³¨æ„å¯¹è±¡çš„ <code>...&#123;&#125;</code> å±•å¼€å†™æ³•</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">  <span class="comment">// æ‰‹åŠ¨å†™æ³•</span></span><br><span class="line">  <span class="title function_">sum</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">sum</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">price</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">price</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¯¹è±¡å†™æ³•</span></span><br><span class="line">  ...<span class="title function_">mapState</span>(&#123;<span class="attr">sum</span>: <span class="string">&#x27;sum&#x27;</span>, <span class="attr">price</span>: <span class="string">&#x27;price&#x27;</span>&#125;),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ•°ç»„å†™æ³•</span></span><br><span class="line">  ...<span class="title function_">mapState</span>([<span class="string">&#x27;sum&#x27;</span>, <span class="string">&#x27;price&#x27;</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="mapGetters">mapGetters</h3>
<ul>
<li>å°† <code>getters</code> çš„æ•°æ®æ˜ å°„ä¸ºè®¡ç®—å±æ€§</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">  <span class="title function_">bigSum</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">getters</span>.<span class="property">bigSum</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">double</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">getters</span>.<span class="property">double</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¯¹è±¡å†™æ³•</span></span><br><span class="line">  ...<span class="title function_">mapGetters</span>(&#123;<span class="attr">bigSum</span>: <span class="string">&#x27;bigSum&#x27;</span>, <span class="attr">double</span>: <span class="string">&#x27;double&#x27;</span>&#125;),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ•°ç»„å†™æ³•</span></span><br><span class="line">  ...<span class="title function_">mapGetters</span>([<span class="string">&#x27;bigSum&#x27;</span>, <span class="string">&#x27;double&#x27;</span>]),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="mapActions">mapActions</h3>
<ul>
<li>ç”Ÿæˆä¸ <code>actions</code> å¯¹è¯çš„å‡½æ•°ï¼Œå³åŒ…å« <code>$store.dispatch()</code></li>
<li><code>mapActions</code> ç”Ÿæˆçš„å‡½æ•°ä¸ä¼šä¼ å…¥å‚æ•°ï¼Œéœ€è¦åœ¨è°ƒç”¨æ—¶æ‰‹åŠ¨ä¼ å…¥æ•°æ®ï¼Œä¸ä¼ å‚é»˜è®¤ä¼ å…¥ <code>$event</code></li>
<li>æ•°ç»„å†™æ³•è¦æ³¨æ„å‡½æ•°åå’Œ <code>actions</code> åŠ¨ä½œç±»å‹åŒåï¼Œè°ƒç”¨æ—¶å‹¿å†™é”™</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapActions &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="comment">// æ‰‹åŠ¨å†™æ³•</span></span><br><span class="line">  <span class="title function_">incrementOdd</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;addOdd&#x27;</span>, <span class="variable language_">this</span>.<span class="property">number</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">incrementAsync</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;addAsync&#x27;</span>, <span class="variable language_">this</span>.<span class="property">number</span>)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¯¹è±¡å†™æ³•</span></span><br><span class="line">  ...<span class="title function_">mapActions</span>(&#123;<span class="attr">incrementOdd</span>: <span class="string">&#x27;addOdd&#x27;</span>, <span class="attr">incrementAsync</span>: <span class="string">&#x27;addAsync&#x27;</span>&#125;),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ•°ç»„å†™æ³•</span></span><br><span class="line">  ...<span class="title function_">mapActions</span>([<span class="string">&#x27;addOdd&#x27;</span>, <span class="string">&#x27;addAsync&#x27;</span>]),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;incrementOdd(number)&quot;</span>&gt;</span>å¥‡æ•°+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="mapMutations">mapMutations</h3>
<ul>
<li>ç”Ÿæˆä¸ <code>mutations</code> å¯¹è¯çš„å‡½æ•°ï¼Œå³åŒ…å« <code>$store.commit()</code></li>
<li>åŒæ ·æ³¨æ„ä¼ é€’å‚æ•°ï¼Œä»¥åŠæ•°ç»„å½¢å¼å‡½æ•°åçš„é—®é¢˜</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapMutations &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;ADD&#x27;</span>, <span class="variable language_">this</span>.<span class="property">number</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">decrement</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;SUB&#x27;</span>, <span class="variable language_">this</span>.<span class="property">number</span>)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¯¹è±¡å†™æ³•</span></span><br><span class="line">  ...<span class="title function_">mapMutations</span>(&#123;<span class="attr">increment</span>: <span class="string">&#x27;ADD&#x27;</span>, <span class="attr">decrement</span>: <span class="string">&#x27;SUB&#x27;</span>&#125;),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ•°ç»„å†™æ³•</span></span><br><span class="line">  ...<span class="title function_">mapMutations</span>([<span class="string">&#x27;ADD&#x27;</span>, <span class="string">&#x27;SUB&#x27;</span>]),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Vuex-æ¨¡å—åŒ–-å‘½åç©ºé—´">Vuex æ¨¡å—åŒ–&amp;å‘½åç©ºé—´</h2>
<p>è®©ä»£ç æ›´å¥½ç»´æŠ¤ï¼Œè®©å¤šç§æ•°æ®åˆ†ç±»æ›´åŠ æ˜ç¡®ï¼Œæ¯ä¸€ç±»æ•°æ®åŠå…¶ç›¸å…³æ“ä½œå¯¹åº”ä¸€ä¸ª <code>store</code> ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/store/index.js</span></span><br><span class="line"><span class="keyword">const</span> countAbout = &#123;</span><br><span class="line">  <span class="comment">// å¼€å¯å‘½åç©ºé—´</span></span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">sum</span>: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;...&#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;...&#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="title function_">bigSum</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.<span class="property">sum</span> * <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> personAbout = &#123;</span><br><span class="line">  <span class="comment">// å¼€å¯å‘½åç©ºé—´</span></span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">personList</span>: []</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;...&#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;...&#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;...&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">    countAbout,</span><br><span class="line">    personAbout</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>å¼€å¯å‘½åç©ºé—´åï¼Œç»„ä»¶ä¸­è¯»å– <code>state</code> æ•°æ®ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›´æ¥è¯»å–</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">personAbout</span>.<span class="property">personList</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// mapState è¯»å–</span></span><br><span class="line">...<span class="title function_">mapState</span>(<span class="string">&#x27;countAbout&#x27;</span>,[<span class="string">&#x27;sum&#x27;</span>,<span class="string">&#x27;school&#x27;</span>]),</span><br></pre></td></tr></table></figure>
<p>å¼€å¯å‘½åç©ºé—´åï¼Œç»„ä»¶ä¸­è¯»å– <code>getters</code> æ•°æ®ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›´æ¥è¯»å–</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">getters</span>[<span class="string">&#x27;countAbout/bigSum&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// mapGetters è¯»å–ï¼š</span></span><br><span class="line">...<span class="title function_">mapGetters</span>(<span class="string">&#x27;countAbout&#x27;</span>,[<span class="string">&#x27;bigSum&#x27;</span>])</span><br></pre></td></tr></table></figure>
<p>å¼€å¯å‘½åç©ºé—´åï¼Œç»„ä»¶ä¸­è°ƒç”¨ <code>dispatch</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›´æ¥ dispatch</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;countAbout/addODdd&#x27;</span>, <span class="variable language_">this</span>.<span class="property">number</span>)</span><br><span class="line"><span class="comment">// å€ŸåŠ© mapActions</span></span><br><span class="line">...<span class="title function_">mapActions</span>(<span class="string">&#x27;countAbout&#x27;</span>, &#123;<span class="attr">incrementOdd</span>:<span class="string">&#x27;addOdd&#x27;</span>, <span class="attr">incrementWait</span>:<span class="string">&#x27;addAsync&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure>
<p>å¼€å¯å‘½åç©ºé—´åï¼Œç»„ä»¶ä¸­è°ƒç”¨ <code>commit</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›´æ¥ commit</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;personAbout/ADD_PERSON&#x27;</span>, person)</span><br><span class="line"><span class="comment">// å€ŸåŠ© mapMutations</span></span><br><span class="line">...<span class="title function_">mapMutations</span>(<span class="string">&#x27;countAbout&#x27;</span>,&#123;<span class="attr">increment</span>:<span class="string">&#x27;ADD&#x27;</span>,<span class="attr">decrement</span>:<span class="string">&#x27;SUB&#x27;</span>&#125;),</span><br></pre></td></tr></table></figure>
<h1>Vue Router</h1>
<p><a target="_blank" rel="noopener" href="https://router.vuejs.org/zh/">å®˜ç½‘ä¼ é€é—¨</a></p>
<h2 id="è·¯ç”±">è·¯ç”±</h2>
<h3 id="ä½•ä¸ºè·¯ç”±">ä½•ä¸ºè·¯ç”±</h3>
<ul>
<li>ä¸€ç»„è·¯ç”±å³ä¸€ç»„æ˜ å°„å…³ç³»ï¼ˆkey-valueï¼‰</li>
<li>key ä¸ºè·¯å¾„ï¼Œvalue å¯èƒ½æ˜¯ function æˆ– component</li>
</ul>
<h3 id="å‰ç«¯è·¯ç”±">å‰ç«¯è·¯ç”±</h3>
<p>å‰ç«¯è·¯ç”±å³åœ°å€å’Œç»„ä»¶ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼ˆä»¥ä¸‹å·²å“ˆå¸Œæ¨¡å¼ä¸ºä¾‹ï¼‰ã€‚</p>
<p>å‰ç«¯è·¯ç”±ç®€æ˜“å·¥ä½œæ–¹å¼ï¼š</p>
<ol>
<li>ç”¨æˆ·ç‚¹å‡»äº†é¡µé¢ä¸Šçš„è·¯ç”±é“¾æ¥</li>
<li>URL åœ°å€çš„ Hash å€¼å‘ç”Ÿå˜åŒ–</li>
<li>å‰ç«¯è·¯ç”±ç›‘å¬åˆ° Hash å€¼çš„å˜åŒ–</li>
<li>å‰ç«¯è·¯ç”±æ¸²æŸ“ Hash åœ°å€å¯¹åº”çš„ç»„ä»¶</li>
</ol>
<p>å®ç°ç®€æ˜“çš„å‰ç«¯è·¯ç”±ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- a é“¾æ¥æ·»åŠ å¯¹åº” Hash å€¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#/home&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#/movie&quot;</span>&gt;</span>Movie<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#/about&quot;</span>&gt;</span>About<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- åŠ¨æ€æ¸²æŸ“ç»„ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;compName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">compName</span>: <span class="string">&#x27;Home&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// ç›‘å¬ Hash åœ°å€æ”¹å˜ï¼Œåˆ‡æ¢ç»„ä»¶</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">onhashchange</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">switch</span>(location.<span class="property">hash</span>) &#123;</span><br><span class="line">        <span class="attr">case</span>: <span class="string">&#x27;#/home&#x27;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">compName</span> = <span class="string">&#x27;Home&#x27;</span></span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="attr">case</span>: <span class="string">&#x27;#/movie&#x27;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">compName</span> = <span class="string">&#x27;Movie&#x27;</span></span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="attr">case</span>: <span class="string">&#x27;#/about&#x27;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">compName</span> = <span class="string">&#x27;About&#x27;</span></span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åç«¯è·¯ç”±">åç«¯è·¯ç”±</h3>
<ul>
<li>åç«¯è·¯ç”±æ˜¯æŒ‡è¯·æ±‚æ–¹å¼ã€è¯·æ±‚åœ°å€ä¸ <code>function</code> å¤„ç†å‡½æ•°ä¹‹é—´çš„å¯¹åº”å…³ç³»</li>
<li>æœåŠ¡å™¨æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚ï¼Œæ ¹æ®è¯·æ±‚æ–¹å¼ã€è·¯å¾„åŒ¹é…å¯¹åº”çš„å‡½æ•°å¤„ç†è¯·æ±‚ï¼Œè¿”å›å“åº”æ•°æ®</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>()</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/userlist&#x27;</span>, <span class="keyword">function</span>(<span class="params">req, res</span>) &#123;...&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router</span><br></pre></td></tr></table></figure>
<h2 id="å•é¡µé¢åº”ç”¨ç¨‹åº-SPA">å•é¡µé¢åº”ç”¨ç¨‹åº SPA</h2>
<p>å•é¡µé¢åº”ç”¨ç¨‹åºå°†æ‰€æœ‰çš„åŠŸèƒ½å±€é™äºä¸€ä¸ª web é¡µé¢ä¸­ï¼Œä»…åœ¨è¯¥ web é¡µé¢åˆå§‹åŒ–æ—¶åŠ è½½ç›¸åº”çš„èµ„æºï¼ˆ HTMLã€JavaScript å’Œ CSSï¼‰ã€‚ ä¸€æ—¦é¡µé¢åŠ è½½å®Œæˆäº†ï¼ŒSPA ä¸ä¼šå› ä¸ºç”¨æˆ·çš„æ“ä½œè€Œè¿›è¡Œé¡µé¢çš„é‡æ–°åŠ è½½æˆ–è·³è½¬ã€‚è€Œæ˜¯åˆ©ç”¨ JavaScript åŠ¨æ€åœ°å˜æ¢ HTML çš„å†…å®¹ï¼Œä»è€Œå®ç°é¡µé¢ä¸ç”¨æˆ·çš„äº¤äº’ã€‚</p>
<p>SPA çš„ä¼˜ç‚¹ï¼š</p>
<ul>
<li>è‰¯å¥½çš„äº¤äº’ä½“éªŒ
<ul>
<li>å†…å®¹çš„æ”¹å˜ä¸éœ€è¦é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢</li>
<li>æ•°æ®é€šè¿‡ <code>Ajax</code> å¼‚æ­¥è·å–</li>
<li>æ²¡æœ‰é¡µé¢è·³è½¬ï¼Œä¸ä¼šå‡ºç°ç™½å±ç°è±¡</li>
</ul>
</li>
<li>è‰¯å¥½çš„å‰åç›¾å·¥ä½œåˆ†ç¦»æ¨¡å¼
<ul>
<li>åç«¯ä¸“æ³¨äºæä¾› API æ¥å£ï¼Œæ›´æ˜“å®ç°æ¥å£å¤ç”¨</li>
<li>å‰ç«¯ä¸“æ³¨é¡µé¢æ¸²æŸ“ï¼Œæ›´åˆ©äºå‰ç«¯å·¥ç¨‹åŒ–å‘å±•</li>
</ul>
</li>
<li>å‡è½»æœåŠ¡å™¨å‹åŠ›
<ul>
<li>æœåŠ¡å™¨åªæä¾›æ•°æ®ï¼Œä¸è´Ÿè´£é¡µé¢çš„åˆæˆä¸é€»è¾‘å¤„ç†ï¼Œååèƒ½åŠ›ä¼šæé«˜</li>
</ul>
</li>
</ul>
<p>SPA çš„ç¼ºç‚¹ï¼š</p>
<ul>
<li>é¦–å±åŠ è½½æ…¢ï¼šå¯ä½¿ç”¨è·¯ç”±æ‡’åŠ è½½ã€ä»£ç å‹ç¼©ã€CDN åŠ é€Ÿã€ç½‘ç»œä¼ è¾“å‹ç¼©</li>
<li>ä¸åˆ©äº SEO ï¼šSSR æœåŠ¡å™¨ç«¯æ¸²æŸ“</li>
</ul>
<h2 id="vue-router-åˆä½“éªŒ">vue-router åˆä½“éªŒ</h2>
<p>å®‰è£… <code>vue-router</code>ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-router@3.5.2 -S</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºè·¯ç”±æ¨¡å—ï¼Œåœ¨ <code>src</code> æºä»£ç ç›®å½•ä¸‹ï¼Œæ–°å»º <code>router/index.js</code> è·¯ç”±æ¨¡å—ï¼Œåˆå§‹åŒ–ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;@/component/Home.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;@/component/About.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Movie</span> <span class="keyword">from</span> <span class="string">&#x27;@/component/Movie.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠŠ VueRouter å®‰è£…ä¸º Vue çš„æ’ä»¶</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·¯ç”±åŒ¹é…è§„åˆ™</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Home</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>, <span class="attr">component</span>: <span class="title class_">About</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/movie&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Movie</span> &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºè·¯ç”±å®ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  routes,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>main.js</code> æ–‡ä»¶ä¸­å¯¼å…¥å¹¶æŒ‚è½½è·¯ç”±æ¨¡å—ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router/index.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  router,</span><br><span class="line">  <span class="attr">render</span>: <span class="function">(<span class="params">h</span>) =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>åœ¨ç»„ä»¶ä¸­å£°æ˜è·¯ç”±é“¾æ¥å’Œå ä½ç¬¦ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è·¯ç”±é“¾æ¥ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>å…³äº<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/movie&quot;</span>&gt;</span>ç”µå½±<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è·¯ç”±å‡ºå£ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li>ç»„ä»¶åˆ†ä¸ºè·¯ç”±ç»„ä»¶å’Œä¸€èˆ¬ç»„ä»¶ï¼Œå‰è€…æ”¾åœ¨ <code>pages(æˆ–views)</code> æ–‡ä»¶å¤¹ï¼Œåè€…æ”¾åœ¨ <code>components</code> æ–‡ä»¶å¤¹</li>
<li>æ¯ä¸ªç»„ä»¶éƒ½æœ‰ <code>$route</code> å±æ€§ï¼Œå­˜å‚¨ç€ç»„ä»¶çš„è·¯ç”±è§„åˆ™ä¿¡æ¯</li>
<li><code>$router</code> æ˜¯è·¯ç”±å™¨å¯¹è±¡ï¼Œæ•´ä¸ª SPA åªæœ‰ä¸€ä¸ª</li>
</ul>
<h2 id="å£°æ˜å¼å¯¼èˆª">å£°æ˜å¼å¯¼èˆª</h2>
<p><code>&lt;router-link&gt;</code> 4 ä¸ªå¸¸ç”¨å±æ€§ï¼š</p>
<ol>
<li><code>to</code> å±æ€§</li>
</ol>
<ul>
<li>ç”¨äºæŒ‡å®šè·³è½¬è·¯ç”±</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li><code>tag</code> å±æ€§</li>
</ol>
<ul>
<li>æŒ‡æ˜ <code>&lt;router-link&gt;</code> æœ€ç»ˆè¢«æ¸²æŸ“ä¸ºä½•ç§æ ‡ç­¾ï¼Œé»˜è®¤æ˜¯ a æ ‡ç­¾</li>
<li>æ¸²æŸ“ä¸ºå…¶ä»–æ ‡ç­¾ä¹Ÿä¼šç›‘å¬ç‚¹å‡»ï¼Œè§¦å‘å¯¼èˆª</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span> <span class="attr">tag</span>=<span class="string">&quot;li&quot;</span>&gt;</span>tag<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span>tag<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li><code>replace</code> å±æ€§</li>
</ol>
<ul>
<li>è·¯ç”±è·³è½¬ä¸ä¼šå¢åŠ æ–°çš„å†å²è®°å½•ï¼Œè€Œæ˜¯æ›¿æ¢å½“å‰å†å²è®°å½•</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span> <span class="attr">replace</span>&gt;</span>About<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li><code>active-class</code> å±æ€§</li>
</ol>
<ul>
<li>æŒ‡æ˜è·¯ç”±è¢«æ¿€æ´»æ—¶æ·»åŠ çš„ç±»åï¼Œé»˜è®¤ä¸º <code>router-link-active</code></li>
<li>è¯¦è§<a target="_blank" rel="noopener" href="https://brucecai55520.gitee.io/bruceblog/notes/vue/vue-router.html#%E8%B7%AF%E7%94%B1%E9%AB%98%E4%BA%AE">è·¯ç”±é«˜äº®</a></li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span>&gt;</span>About<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="è·¯ç”±é«˜äº®">è·¯ç”±é«˜äº®</h2>
<p>è¢«æ¿€æ´»çš„è·¯ç”±é“¾æ¥ï¼Œé»˜è®¤ä¼šæ·»åŠ  <code>router-link-active</code> çš„ç±»åã€‚å¯æ®æ­¤ä¸ºæ¿€æ´»çš„è·¯ç”±é“¾æ¥è®¾ç½®é«˜äº®çš„æ ·å¼ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.router-link-active</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">  <span class="attribute">background-color</span>: pink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®šä¹‰è·¯ç”±æ¨¡å—æ—¶å¯ä»¥è‡ªå®šä¹‰è·¯ç”±é“¾æ¥è¢«æ¿€æ´»æ—¶æ·»åŠ çš„ç±»åï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="comment">// é»˜è®¤çš„ router-link-active ä¼šè¢«è¦†ç›–</span></span><br><span class="line">  <span class="attr">linkActiveClass</span>: <span class="string">&#x27;active-hello&#x27;</span>,</span><br><span class="line">  routes,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>å£°æ˜è·¯ç”±é“¾æ¥æ—¶ä¹Ÿå¯ç”¨ <code>active-class</code> å±æ€§è‡ªå®šä¹‰æ¿€æ´»ç±»åï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- router-link-active ä¼šè¢«è¦†ç›–ä¸º active --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>About<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="è·¯ç”±é‡å®šå‘">è·¯ç”±é‡å®šå‘</h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  <span class="comment">// è®¿é—® / è·³è½¬åˆ° /home</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/home&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">component</span>: <span class="string">&#x27;Home&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>, <span class="attr">component</span>: <span class="string">&#x27;About&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/movie&#x27;</span>, <span class="attr">component</span>: <span class="string">&#x27;Movie&#x27;</span> &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  routes,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>
<h2 id="åµŒå¥—è·¯ç”±">åµŒå¥—è·¯ç”±</h2>
<p><code>About</code> ç»„ä»¶ä¸­å£°æ˜å­è·¯ç”±é“¾æ¥å’Œå­è·¯ç”±å ä½ç¬¦ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;about-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è¦æŠŠçˆ¶è·¯ç”±å¯«ä¸Š --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about/tab1&quot;</span>&gt;</span>tab1<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about/tab2&quot;</span>&gt;</span>tab2<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ <code>children</code> å±æ€§å£°æ˜å­è·¯ç”±è§„åˆ™ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="string">&#x27;About&#x27;</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      <span class="comment">// æ³¨æ„ä¸è¦å†™æˆ /tab1</span></span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;tab1&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Tab1</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;tab2&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Tab2</span> &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h2 id="ç¼–ç¨‹å¼å¯¼èˆª">ç¼–ç¨‹å¼å¯¼èˆª</h2>
<p>å£°æ˜å¼å¯¼èˆªï¼š</p>
<ul>
<li>é€šè¿‡ç‚¹å‡»é“¾æ¥å®ç°å¯¼èˆª</li>
<li>å¦‚æ™®é€šç½‘é¡µç‚¹å‡» <code>a</code> é“¾æ¥ï¼Œ<code>vue</code> ç‚¹å‡» <code>&lt;router-link&gt;</code></li>
</ul>
<p>ç¼–ç¨‹å¼å¯¼èˆªï¼š</p>
<ul>
<li>é€šè¿‡è°ƒç”¨ API å®ç°å¯¼èˆª</li>
<li>æ™®é€šç½‘é¡µé€šè¿‡ <code>location.href</code> çš„æ–¹å¼è·³è½¬é¡µé¢ä¹Ÿæ˜¯ç¼–ç¨‹å¼å¯¼èˆª</li>
</ul>
<p><code>vue-router</code> ä¸­å®ç°ç¼–ç¨‹å¼å¯¼èˆªçš„ API ï¼š</p>
<ul>
<li><code>this.$router.push('hashåœ°å€')</code> ï¼šè·³è½¬åˆ°æŒ‡å®šé¡µé¢ï¼Œå¹¶å¢åŠ ä¸€æ¡å†å²è®°å½•</li>
<li><code>this.$router.replace('hashåœ°å€')</code> ï¼šè·³è½¬é¡µé¢ï¼Œä½†ä¸ä¼šæ–°å¢å†å²è®°å½•ï¼Œè€Œæ˜¯æ›¿æ¢å½“å‰çš„å†å²è®°å½•</li>
<li><code>this.$router.go(æ•°å€¼)</code> ï¼šå†å²è®°å½•å‰è¿›æˆ–åé€€ï¼Œç›¸å½“äºç‚¹å‡»æµè§ˆå™¨å‰è¿›åé€€ç®­å¤´</li>
<li><code>this.$router.forward()</code> ï¼šå‰è¿›ä¸€æ­¥</li>
<li><code>this.$router.back()</code> ï¼šåé€€ä¸€æ­¥</li>
</ul>
<h2 id="å‘½åè·¯ç”±">å‘½åè·¯ç”±</h2>
<p>ç»™è·¯ç”±å‘½åï¼ŒæŸäº›æƒ…å†µå¯ç®€åŒ–è·¯ç”±è·³è½¬å†™æ³•</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;about&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">About</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123; name: &#x27;about&#x27;&#125; &quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123; name: &#x27;about&#x27;, query: &#123; id: 1, title: &#x27;hello&#x27; &#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="è·¯ç”±ä¼ å‚">è·¯ç”±ä¼ å‚</h2>
<h3 id="query-å‚æ•°">query å‚æ•°</h3>
<p>ä¼ é€’å‚æ•°ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å­—ç¬¦ä¸²å†™æ³• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;`/home/detail?id=$&#123;id&#125;&amp;title=$&#123;title&#125;`&quot;</span>&gt;</span>å­—ç¬¦ä¸²å†™æ³•<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¯¹è±¡å†™æ³• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:to</span>=<span class="string">&quot;&#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">    path: &#x27;/home/detail&#x27;,</span></span></span><br><span class="line"><span class="string"><span class="tag">    query: &#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">      id: 1,</span></span></span><br><span class="line"><span class="string"><span class="tag">      title: &#x27;hello&#x27;,</span></span></span><br><span class="line"><span class="string"><span class="tag">    &#125;</span></span></span><br><span class="line"><span class="string"><span class="tag">  &#125;&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  å¯¹è±¡å†™æ³•</span><br><span class="line"><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">`/home/detail?id=<span class="subst">$&#123;id&#125;</span>&amp;title=<span class="subst">$&#123;title&#125;</span>`</span>)</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123; <span class="attr">path</span>: <span class="string">&#x27;/home/detail&#x27;</span>, <span class="attr">query</span>: &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">title</span>: <span class="string">&#x27;query&#x27;</span> &#125; &#125;)</span><br></pre></td></tr></table></figure>
<p>æ¥æ”¶å‚æ•°ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">query</span>.<span class="property">id</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">query</span>.<span class="property">title</span></span><br></pre></td></tr></table></figure>
<h3 id="params-å‚æ•°ï¼ˆåŠ¨æ€è·¯ç”±ï¼‰">params å‚æ•°ï¼ˆåŠ¨æ€è·¯ç”±ï¼‰</h3>
<p>åŠ¨æ€è·¯ç”±æ˜¯æŠŠ Hash åœ°å€ä¸­å¯å˜çš„éƒ¨åˆ†å®šä¹‰ä¸ºå‚æ•°é¡¹ï¼Œä»è€Œæé«˜è·¯ç”±è§„åˆ™çš„å¤ç”¨æ€§ã€‚</p>
<p>å£°æ˜ params å‚æ•°ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰åŠ¨æ€è·¯ç”±å‚æ•°</span></span><br><span class="line">&#123; <span class="attr">path</span>: <span class="string">&#x27;/movie/:id/:age&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Movie</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¸‹ç±»ä¼¼çš„è·¯ç”±è§„åˆ™éƒ½èƒ½åˆå¹¶ä¸ºä¸Šè¿°è§„åˆ™ï¼Œå¤ç”¨æ€§å¾—åˆ°æé«˜</span></span><br><span class="line">&#123; <span class="attr">path</span>: <span class="string">&#x27;/movie/1/21&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Movie</span> &#125;</span><br><span class="line">&#123; <span class="attr">path</span>: <span class="string">&#x27;/movie/2/22&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Movie</span> &#125;</span><br><span class="line">&#123; <span class="attr">path</span>: <span class="string">&#x27;/movie/3/23&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Movie</span> &#125;</span><br></pre></td></tr></table></figure>
<p>ä¼ é€’ params å‚æ•°ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;/movie/1/21&quot;</span>&gt;</span>å­—ç¬¦ä¸²å†™æ³•<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¯¹è±¡å†™æ³•åªèƒ½å’Œ name æ­é…ä½¿ç”¨ï¼Œä¸èƒ½å’Œ path æ­é… --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:to</span>=<span class="string">&quot;&#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">  name: &#x27;movie&#x27;,</span></span></span><br><span class="line"><span class="string"><span class="tag">  params: &#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">    id: 1,</span></span></span><br><span class="line"><span class="string"><span class="tag">    age: 21</span></span></span><br><span class="line"><span class="string"><span class="tag">  &#125;</span></span></span><br><span class="line"><span class="string"><span class="tag">&#125;&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  å¯¹è±¡å†™æ³•</span><br><span class="line"><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- query å’Œ params å¯ä»¥ä¸€èµ·ç”¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;`/movie/1/21?id=$&#123;id&#125;`&quot;</span>&gt;</span>å­—ç¬¦ä¸²å†™æ³•<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:to</span>=<span class="string">&quot;&#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">    name:&#x27;movie&#x27;, </span></span></span><br><span class="line"><span class="string"><span class="tag">    params: &#123;id:1, age:21&#125;, </span></span></span><br><span class="line"><span class="string"><span class="tag">    query: &#123;school: &#x27;love&#x27;&#125;</span></span></span><br><span class="line"><span class="string"><span class="tag">  &#125;&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  å¯¹è±¡å†™æ³•</span><br><span class="line"><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">`/movie/1/21?id=<span class="subst">$&#123;id&#125;</span>`</span>)</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;movie&#x27;</span>, <span class="attr">params</span>: &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">age</span>: <span class="number">21</span> &#125;, <span class="attr">query</span>: &#123; <span class="attr">school</span>: <span class="string">&#x27;love&#x27;</span> &#125; &#125;)</span><br></pre></td></tr></table></figure>
<p>æ¥æ”¶ params å‚æ•°ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;movie-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Movieç»„ä»¶ï¼Œå‚æ•°å€¼ï¼š&#123;&#123; this.$route.params.id &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="è·¯ç”±çš„-props-é…ç½®">è·¯ç”±çš„ props é…ç½®</h3>
<p>ç®€åŒ–è·¯ç”±ç»„ä»¶æ¥æ”¶å‚æ•°ã€‚</p>
<p>åœ¨è·¯ç”±è§„åˆ™ä¸­å¼€å¯ <code>props</code> ä¼ å‚ï¼Œç»„ä»¶å¯ä»¥ä½¿ç”¨ <code>props</code> æ¥æ”¶è·¯ç”±å‚æ•°ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/movie/:id/:title&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="title class_">Movie</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ–¹å¼ä¸€ï¼šè¯¥å¯¹è±¡ä¸­çš„æ‰€æœ‰ key-value éƒ½ä¼šä»¥ props çš„å½¢å¼ä¼ ç»™ç»„ä»¶</span></span><br><span class="line">  <span class="comment">// è¯¥æ–¹å¼æ˜¯å†™æ­»çš„ï¼Œå°‘ç”¨</span></span><br><span class="line">  <span class="attr">props</span>: &#123;<span class="attr">id</span>: <span class="number">666</span>, <span class="attr">title</span>: <span class="string">&#x27;hello&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ–¹å¼äºŒï¼šæŠŠ params å‚æ•°ä»¥ props çš„å½¢å¼ä¼ ç»™ç»„ä»¶</span></span><br><span class="line">  <span class="comment">// åªèƒ½æ¥æ”¶ params å‚æ•°</span></span><br><span class="line">  <span class="attr">props</span>: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ–¹å¼ä¸‰ï¼šå‡½æ•°å†™æ³•ï¼Œå•¥éƒ½èƒ½ä¼ </span></span><br><span class="line">  <span class="title function_">props</span>(<span class="params">$route</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">id</span>: $route.<span class="property">query</span>.<span class="property">id</span>,</span><br><span class="line">      <span class="attr">title</span>: $route.<span class="property">params</span>.<span class="property">title</span>,</span><br><span class="line">      <span class="attr">age</span>: <span class="number">21</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»„ä»¶æ¥æ”¶å‚æ•°ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// ä½¿ç”¨ props æ¥æ”¶è·¯ç”±è§„åˆ™çš„å‚æ•°é¡¹</span></span><br><span class="line">  <span class="attr">props</span>: [<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;title&#x27;</span>],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Movieç»„ä»¶ï¼Œå‚æ•°å€¼ï¼š&#123;&#123; id &#125;&#125;ï¼Œé¢˜ç›®ï¼š&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="è·¯ç”±ä¼ å‚æ³¨æ„äº‹é¡¹">è·¯ç”±ä¼ å‚æ³¨æ„äº‹é¡¹</h3>
<ol>
<li>path ä¸èƒ½å’Œ params ä¸€èµ·ä½¿ç”¨ã€‚path+queryã€name+query/params éƒ½è¡Œ</li>
<li>å¦‚ä½•æŒ‡å®š params å‚æ•°å¯ä¼ å¯ä¸ä¼ ï¼Ÿ</li>
</ol>
<ul>
<li>è‹¥å£°æ˜äº† params å‚æ•° <code>path: '/movie/:title'</code>ï¼Œé»˜è®¤æ˜¯å¿…é¡»è¦ä¼ é€’ params å‚æ•°çš„ï¼Œå¦åˆ™ URL ä¼šå‡ºç°é—®é¢˜</li>
<li>æŒ‡å®š params å‚æ•°å¯ä¸ä¼ ï¼š<code>path: '/movie/:title?'</code></li>
</ul>
<ol start="3">
<li>å·²æŒ‡æ˜ params å‚æ•°å¯ä¼ å¯ä¸ä¼ ï¼Œä½†å¦‚æœä¼ é€’ç©ºä¸²ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ</li>
</ol>
<ul>
<li>ä¼ é€’ç©ºä¸²ï¼ŒURL ä¹Ÿä¼šå‡ºç°é—®é¢˜</li>
<li>æ–¹æ³•ï¼šä½¿ç”¨ <code>undefined</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;search&#x27;</span>, <span class="attr">params</span>: &#123; <span class="attr">keyword</span>: <span class="string">&#x27;&#x27;</span> &#125;, <span class="attr">query</span>: &#123; <span class="attr">key</span>: <span class="variable language_">this</span>.<span class="property">key</span> &#125; &#125;)</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;search&#x27;</span>, <span class="attr">params</span>: &#123; <span class="attr">keyword</span>: <span class="string">&#x27;&#x27;</span> || <span class="literal">undefined</span> &#125;, <span class="attr">query</span>: &#123; <span class="attr">key</span>: <span class="variable language_">this</span>.<span class="property">key</span> &#125; &#125;)</span><br></pre></td></tr></table></figure>
<h2 id="è·¯ç”±å…ƒä¿¡æ¯-meta">è·¯ç”±å…ƒä¿¡æ¯ meta</h2>
<p>åœ¨ <code>meta</code> ä¸­å¯ä»¥ä¸ºè·¯ç”±æ·»åŠ è‡ªå®šä¹‰ä¿¡æ¯ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;about&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">About</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;hello&#x27;</span>, <span class="attr">isAuth</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h2 id="è·¯ç”±å®ˆå«">è·¯ç”±å®ˆå«</h2>
<blockquote>
<p>ä½œç”¨ï¼šå¯¹è·¯ç”±è¿›è¡Œæƒé™æ§åˆ¶ã€‚</p>
<p>åˆ†ç±»ï¼šå…¨å±€å®ˆå«ã€ç‹¬äº«å®ˆå«ã€ç»„ä»¶å†…å®ˆå«</p>
</blockquote>
<h3 id="å…¨å±€å®ˆå«">å…¨å±€å®ˆå«</h3>
<ul>
<li>å…¨å±€å‰ç½®å®ˆå«ï¼š<code>beforeEach()</code></li>
<li>å…¨å±€åç½®å®ˆå«ï¼š<code>afterEach()</code></li>
</ul>
<p>å®ˆå«å›è°ƒå‡½æ•° 3 ä¸ªå½¢å‚ï¼š</p>
<ul>
<li><code>to</code> ï¼šå°†è¦è®¿é—®çš„è·¯ç”±çš„ä¿¡æ¯å¯¹è±¡ï¼Œå³ <code>$route</code></li>
<li><code>from</code> ï¼šå°†è¦ç¦»å¼€çš„è·¯ç”±çš„ä¿¡æ¯å¯¹è±¡</li>
<li><code>next</code> ï¼šæ”¾è¡Œå‡½æ•°ï¼ˆåç½®å®ˆå«æ²¡æœ‰ï¼‰</li>
</ul>
<p><code>next</code> å‡½æ•° 3 ç§è°ƒç”¨æ–¹å¼ï¼š</p>
<ul>
<li>ç›´æ¥æ”¾è¡Œï¼š<code>next()</code></li>
<li>å¼ºåˆ¶è·³è½¬åˆ°å…¶ä»–è·¯ç”±ï¼š<code>next(/login)</code></li>
<li>é˜»æ­¢æœ¬æ¬¡è·³è½¬ï¼š<code>next(false)</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;...&#125;)</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span>(to.<span class="property">path</span> === <span class="string">&#x27;/main&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> token = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(token) &#123;</span><br><span class="line">      <span class="title function_">next</span>()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title function_">next</span>(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title function_">next</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">(<span class="params">to,<span class="keyword">from</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span>(to.<span class="property">meta</span>.<span class="property">title</span>) &#123;</span><br><span class="line">    <span class="comment">// ä¿®æ”¹ç½‘é¡µæ ‡é¢˜</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = to.<span class="property">meta</span>.<span class="property">title</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">&#x27;vue_test&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="ç‹¬äº«è·¯ç”±å®ˆå«">ç‹¬äº«è·¯ç”±å®ˆå«</h3>
<ul>
<li>æŸä¸€æ¡è·¯ç”±è§„åˆ™ç‹¬äº«çš„å®ˆå«</li>
<li>ç‹¬äº«å®ˆå«åªä¸€ä¸ª</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;about&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="title class_">About</span>,</span><br><span class="line">  <span class="title function_">beforeEnter</span>(<span class="params">to, <span class="keyword">from</span> ,next</span>) &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç»„ä»¶å†…è·¯ç”±å®ˆå«">ç»„ä»¶å†…è·¯ç”±å®ˆå«</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;About&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿›å…¥å®ˆå«ï¼šé€šè¿‡è·¯ç”±è§„åˆ™ï¼Œè¿›å…¥è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨</span></span><br><span class="line">  <span class="title function_">beforeRouteEnter</span>(<span class="params">to, <span class="keyword">from</span>, next</span>) &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç¦»å¼€å®ˆå«ï¼šé€šè¿‡è·¯ç”±è§„åˆ™ï¼Œç¦»å¼€è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨</span></span><br><span class="line">  beforeRouteLeave (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å„ä¸ªå®ˆå«æ‰§è¡Œé¡ºåº">å„ä¸ªå®ˆå«æ‰§è¡Œé¡ºåº</h3>
<p>ä» <code>About</code> ç»„ä»¶é€šè¿‡è·¯ç”±è§„åˆ™è¿›å…¥ <code>Home</code> ç»„ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">About-beforeRouteLeave</span><br><span class="line">beforeEach</span><br><span class="line">Home-beforeEnter</span><br><span class="line">Home-beforeRouteEnter</span><br><span class="line">afterEach</span><br><span class="line">Homeç»„ä»¶ç”Ÿå‘½å‘¨æœŸå¼€å§‹</span><br></pre></td></tr></table></figure>
<h2 id="vue-router-4-x">vue-router 4.x</h2>
<p>ç›®å‰ <code>vue-router</code> æœ‰ <code>3.x</code> å’Œ <code>4.x</code> ä¸¤ä¸ªç‰ˆæœ¬ï¼Œå‰è€…åªèƒ½åœ¨ <code>vue2.x</code> ä¸­ä½¿ç”¨ï¼Œåè€…åªèƒ½åœ¨ <code>vue3.x</code> ä¸­ä½¿ç”¨ã€‚</p>
<p>ä¸‹é¢æ˜¯ <code>vue-router 4.x</code> åˆä½“éªŒï¼š</p>
<p>å®‰è£… <code>vue-router 4.x</code> ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-router@next -S</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºè·¯ç”±æ¨¡å—ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä» vue-router æŒ‰éœ€å¯¼å…¥ä¸¤ä¸ªæ–¹æ³•</span></span><br><span class="line"><span class="comment">// createRouterï¼šåˆ›å»ºè·¯ç”±å®ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="comment">// createWebHashHistoryï¼šæŒ‡å®šè·¯ç”±å·¥ä½œæ¨¡å¼ä¸º hash æ¨¡å¼</span></span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHashHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHashHistory</span>(),</span><br><span class="line">  <span class="attr">routes</span>: [&#123; <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Home</span> &#125;],</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>
<p><code>main.js</code> å¯¼å…¥å¹¶æŒ‚è½½è·¯ç”±æ¨¡å—ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h1>Vue3</h1>
<p><a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/">å®˜ç½‘ä¼ é€é—¨</a>Vue3 çš„å˜åŒ–</p>
<p><strong>æ€§èƒ½çš„æå‡</strong></p>
<ul>
<li>æ‰“åŒ…å¤§å°å‡å°‘ 41%</li>
<li>åˆæ¬¡æ¸²æŸ“å¿« 55%, æ›´æ–°æ¸²æŸ“å¿« 133%</li>
<li>å†…å­˜å‡å°‘ 54%</li>
</ul>
<p><strong>æºç çš„å‡çº§</strong></p>
<ul>
<li>ä½¿ç”¨ Proxy ä»£æ›¿ defineProperty å®ç°å“åº”å¼</li>
<li>é‡å†™è™šæ‹Ÿ DOM çš„å®ç°å’Œ Tree-Shaking</li>
</ul>
<p><strong>æ‹¥æŠ± TypeScript</strong></p>
<ul>
<li>Vue3 å¯ä»¥æ›´å¥½çš„æ”¯æŒ TypeScript</li>
</ul>
<p><strong>æ–°çš„ç‰¹æ€§</strong></p>
<ol>
<li>Composition APIï¼ˆç»„åˆ APIï¼‰</li>
</ol>
<ul>
<li>setup é…ç½®</li>
<li>ref ä¸ reactive</li>
<li>watch ä¸ watchEffect</li>
<li>provide ä¸ inject</li>
<li>â€¦</li>
</ul>
<ol start="2">
<li>æ–°çš„å†…ç½®ç»„ä»¶</li>
</ol>
<ul>
<li>Fragment</li>
<li>Teleport</li>
<li>Suspense</li>
</ul>
<ol start="3">
<li>å…¶ä»–æ”¹å˜</li>
</ol>
<ul>
<li>æ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­</li>
<li>data é€‰é¡¹åº”å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°</li>
<li>ç§»é™¤ keyCode æ”¯æŒä½œä¸º v-on çš„ä¿®é¥°ç¬¦</li>
<li>â€¦</li>
</ul>
<h2 id="åˆ›å»º-Vue3-å·¥ç¨‹">åˆ›å»º Vue3 å·¥ç¨‹</h2>
<h3 id="vite-å’Œ-vue-cli-å¯¹æ¯”">vite å’Œ vue-cli å¯¹æ¯”</h3>
<table>
<thead>
<tr>
<th></th>
<th>vite</th>
<th>vue-cli</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ”¯æŒçš„ vue ç‰ˆæœ¬</td>
<td>ä»…æ”¯æŒ vue3.x</td>
<td>æ”¯æŒ 2.x å’Œ 3.x</td>
</tr>
<tr>
<td>æ˜¯å¦åŸºäº webpack</td>
<td>å¦</td>
<td>æ˜¯</td>
</tr>
<tr>
<td>è¿è¡Œé€Ÿåº¦</td>
<td>å¿«</td>
<td>è¾ƒæ…¢</td>
</tr>
<tr>
<td>åŠŸèƒ½å®Œæ•´åº¦</td>
<td>å°è€Œå·§</td>
<td>å¤§è€Œå…¨</td>
</tr>
<tr>
<td>æ˜¯å¦å»ºè®®ä¼ä¸šçº§å¼€å‘ä½¿ç”¨</td>
<td>æš‚ä¸å»ºè®®</td>
<td>å»ºè®®</td>
</tr>
</tbody>
</table>
<h3 id="ä½¿ç”¨-vue-cli-åˆ›å»º">ä½¿ç”¨ vue-cli åˆ›å»º</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### æŸ¥çœ‹ @vue/cli ç‰ˆæœ¬ï¼Œç¡®ä¿ @vue/cli ç‰ˆæœ¬åœ¨4.5.0ä»¥ä¸Š</span></span><br><span class="line">vue --version</span><br><span class="line"><span class="comment">### å®‰è£…æˆ–è€…å‡çº§ @vue/cli</span></span><br><span class="line">npm install -g @vue/cli</span><br><span class="line"><span class="comment">### åˆ›å»º</span></span><br><span class="line">vue create vue_test</span><br><span class="line"><span class="comment">### å¯åŠ¨</span></span><br><span class="line"><span class="built_in">cd</span> vue_test</span><br><span class="line">npm run serve</span><br></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨-vite-åˆ›å»º">ä½¿ç”¨ vite åˆ›å»º</h3>
<ul>
<li><a target="_blank" rel="noopener" href="https://vitejs.cn/">vite </a>ï¼šæ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·</li>
<li>ä¼˜åŠ¿ï¼š
<ul>
<li>å¼€å‘ç¯å¢ƒä¸­ï¼Œæ— éœ€æ‰“åŒ…æ“ä½œï¼Œå¯å¿«é€Ÿå†·å¯åŠ¨ï¼ˆwebpack æ¯æ¬¡è¿è¡Œé¡¹ç›®éƒ½è¦æ‰“åŒ…ï¼‰</li>
<li>è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½ HMRï¼ˆæ›´æ”¹ä»£ç å±€éƒ¨åˆ·æ–°ï¼Œwebpack ä¹Ÿè¡Œï¼Œä½† vite æ›´è½»é‡ï¼‰</li>
<li>çœŸæ­£çš„æŒ‰éœ€ç¼–è¯‘ï¼Œæ— éœ€ç­‰å¾…æ•´ä¸ªåº”ç”¨ç¼–è¯‘å®Œæˆ</li>
</ul>
</li>
<li>ä¼ ç»Ÿæ„å»º ä¸ vite æ„å»ºå¯¹æ¯”ï¼ˆvite ç°ç”¨ç°åˆ†æï¼ŒæŒ‰éœ€å¯¼å…¥ï¼Œå› æ­¤é¡¹ç›®å¯åŠ¨æ›´å¿«ï¼‰</li>
</ul>
<p><img src= "/img/loading.gif" data-lazy-src="https://brucecai55520.gitee.io/bruceblog/assets/img/bundle.532fd73f.png" alt="Bundle"></p>
<p><img src= "/img/loading.gif" data-lazy-src="https://brucecai55520.gitee.io/bruceblog/assets/img/ESM.9634d534.png" alt="ESM"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm init vite-app é¡¹ç›®åç§°</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> é¡¹ç›®åç§°</span><br><span class="line">npm install</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>
<h2 id="Vue3-é¡¹ç›®ç»“æ„">Vue3 é¡¹ç›®ç»“æ„</h2>
<p>Vue3 ä¸­ <code>main.js</code> ä»£ç æœ‰æ‰€æ”¹å˜ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸å†å¼•å…¥ Vue æ„é€ å‡½æ•°ï¼Œè€Œæ˜¯å¼•å…¥ createApp å·¥å‚å‡½æ•°</span></span><br><span class="line"><span class="comment">// createAppå‡½æ•°ï¼šåˆ›å»º vue çš„ SPA å®ä¾‹</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºåº”ç”¨å®ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>Vue3 æ”¯æŒå®šä¹‰å¤šä¸ªæ ¹èŠ‚ç‚¹ï¼Œç»„ä»¶çš„ <code>&lt;template&gt;</code> æ”¯æŒå®šä¹‰å¤šä¸ªæ ¹èŠ‚ç‚¹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æ ¹èŠ‚ç‚¹<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æ ¹èŠ‚ç‚¹<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="å¸¸ç”¨-Composition-API">å¸¸ç”¨ Composition API</h2>
<h3 id="setup">setup</h3>
<ul>
<li>setup æ˜¯ Vue3 ä¸­ä¸€ä¸ªæ–°çš„é…ç½®é¡¹ï¼Œå€¼ä¸ºå‡½æ•°</li>
<li>ç»„ä»¶ä¸­ä½¿ç”¨çš„æ•°æ®ã€æ–¹æ³•ç­‰éƒ½è¦é…ç½®åœ¨ setup ä¸­</li>
<li>setup å‡½æ•°ä¸¤ç§è¿”å›å€¼ï¼š
<ul>
<li>è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­çš„å±æ€§ã€æ–¹æ³•å¯åœ¨æ¨¡æ¿ä¸­ç›´æ¥ä½¿ç”¨</li>
<li>è¿”å›ä¸€ä¸ªæ¸²æŸ“å‡½æ•°ï¼Œå¯è‡ªå®šä¹‰æ¸²æŸ“å†…å®¹</li>
</ul>
</li>
<li>setup å‡½æ•°çš„å‚æ•°ï¼š
<ul>
<li>propsï¼šå€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«äº†ç»„ä»¶å¤–éƒ¨ä¼ è¿›æ¥ï¼Œä¸”ç»„ä»¶å†…éƒ¨å£°æ˜æ¥æ”¶çš„å±æ€§</li>
<li>contextï¼šä¸Šä¸‹æ–‡å¯¹è±¡
<ul>
<li><code>attrs</code>ï¼šå€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«äº†ç»„ä»¶å¤–éƒ¨ä¼ è¿›æ¥ï¼Œä¸”ç»„ä»¶å†…éƒ¨æ²¡æœ‰å£°æ˜æ¥æ”¶çš„å±æ€§ï¼Œç›¸å½“äº <code>this.$attrs</code></li>
<li><code>slots</code>ï¼šæ”¶åˆ°çš„æ’æ§½å†…å®¹ï¼Œç›¸å½“äº <code>this.$slots</code></li>
<li><code>emit</code>ï¼šè§¦å‘è‡ªå®šä¹‰äº‹ä»¶çš„å‡½æ•°ï¼Œç›¸å½“äº <code>this.$emit</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ²¡é”™ï¼Œæ¸²æŸ“å‡½æ•°å°±å« h</span></span><br><span class="line"><span class="keyword">import</span> &#123; h &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span><br><span class="line">  <span class="attr">props</span>: [<span class="string">&#x27;title&#x27;</span>],</span><br><span class="line">  <span class="comment">// Vue3 éœ€è¦å£°æ˜è‡ªå®šä¹‰äº‹ä»¶ï¼Œè™½ç„¶ä¸å£°æ˜ä¹Ÿèƒ½è¿è¡Œ</span></span><br><span class="line">  <span class="attr">emits</span>: [<span class="string">&#x27;changeCount&#x27;</span>],</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿”å›å‡½æ•°</span></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  setup() &#123;</span></span><br><span class="line"><span class="comment">    return () =&gt; h(&#x27;h1&#x27;, &#x27;Hello&#x27;)</span></span><br><span class="line"><span class="comment">  &#125;,</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿”å›å¯¹è±¡</span></span><br><span class="line">  <span class="title function_">setup</span>(<span class="params">props, context</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> name = <span class="string">&#x27;Vue3&#x27;</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">sayHello</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">      context.<span class="title function_">emit</span>(<span class="string">&#x27;changeCount&#x27;</span>, <span class="number">888</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      name,</span><br><span class="line">      sayHello,</span><br><span class="line">      test,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>setup åœ¨ <code>beforeCreate</code> é’©å­ä¹‹å‰æ‰§è¡Œï¼Œ<code>this</code> ä¸º <code>undefined</code></li>
<li>setup ä¸è¦å’Œ Vue2 é…ç½®æ··ç”¨ã€‚Vue2 çš„é…ç½®å¯ä»¥è®¿é—®åˆ° setup çš„å±æ€§æ–¹æ³•ï¼Œåè¿‡æ¥ä¸è¡Œï¼›å¦‚æœ‰é‡åï¼Œsetup ä¼˜å…ˆ</li>
<li>setup ä¸èƒ½æ˜¯ async å‡½æ•°ï¼Œå› ä¸º async å‡½æ•°è¿”å›çš„æ˜¯ promise ä¸æ˜¯å¯¹è±¡ï¼Œä¼šå¯¼è‡´æ¨¡æ¿æ— æ³•è®¿é—®å±æ€§æ–¹æ³•</li>
<li>è‹¥è¦è¿”å› promise å®ä¾‹ï¼Œéœ€è¦ <code>Suspense</code> å’Œå¼‚æ­¥ç»„ä»¶çš„é…åˆ</li>
</ul>
<h3 id="ref-å‡½æ•°">ref å‡½æ•°</h3>
<p>ä½œç”¨ï¼šå®šä¹‰å“åº”å¼æ•°æ®</p>
<p>è¯­æ³•ï¼š<code>const name = ref(initValue)</code></p>
<ul>
<li><code>ref</code> å‡½æ•°è¿”å›ä¸€ä¸ª <code>RefImpl</code>(reference implement) å®ä¾‹å¯¹è±¡ï¼Œå…¨ç§°å¼•ç”¨å®ç°çš„å®ä¾‹å¯¹è±¡</li>
<li>å®ƒåŒ…å«å“åº”å¼æ•°æ®ï¼Œç®€ç§°å¼•ç”¨å¯¹è±¡ã€reference å¯¹è±¡ã€ref å¯¹è±¡</li>
<li>JS è®¿é—®æ•°æ®ï¼š<code>name.value</code></li>
<li>æ¨¡æ¿è®¿é—®æ•°æ®ï¼š<code>&lt;div&gt;&lt;/div&gt;</code></li>
</ul>
<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li><code>ref</code> å‡½æ•°å¯ä»¥æ¥æ”¶åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹</li>
<li>åŸºæœ¬ç±»å‹æ•°æ®çš„å“åº”å¼è¿˜æ˜¯é  <code>Object.defineProperty()</code> å®Œæˆ</li>
<li>å¯¹è±¡ç±»å‹æ•°æ®ä½¿ç”¨ ES6 çš„ Proxy å®ç°å“åº”å¼ï¼ŒVue3 æŠŠç›¸å…³æ“ä½œå°è£…åœ¨ <code>reactive</code> å‡½æ•°ä¸­</li>
<li>æŒ‰ç…§ä¹‹å‰çš„åŠæ³•ï¼Œå¯¹äºå¯¹è±¡æ•°æ®ï¼Œåº”è¯¥éå†æ¯ä¸€å±‚çš„å±æ€§æ·»åŠ  <code>getter</code> ã€<code>setter</code>ï¼Œä½† Vue3 ä½¿ç”¨ Proxy æŠŠå†…éƒ¨æ•°æ®ä¸€å£æ°”ç›‘æµ‹äº†</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; jobInfo.type &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> name = <span class="title function_">ref</span>(<span class="string">&#x27;Vue3&#x27;</span>)</span><br><span class="line">    <span class="keyword">let</span> jobInfo = <span class="title function_">ref</span>(&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;frontend&#x27;</span>,</span><br><span class="line">      <span class="attr">salary</span>: <span class="string">&#x27;40w&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">changeInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">      name.<span class="property">value</span> = <span class="string">&#x27;é±¿é±¼ä¸&#x27;</span></span><br><span class="line">      <span class="comment">// jobInfo æ˜¯ RefImpl å®ä¾‹</span></span><br><span class="line">      <span class="comment">// jobInfo.value æ˜¯ Proxy å®ä¾‹å¯¹è±¡</span></span><br><span class="line">      jobInfo.<span class="property">value</span>.<span class="property">salary</span> = <span class="string">&#x27;50w&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      name,</span><br><span class="line">      jobInfo,</span><br><span class="line">      changeInfo,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="reactive-å‡½æ•°">reactive å‡½æ•°</h3>
<ul>
<li>å®šä¹‰å¼•ç”¨ç±»å‹çš„å“åº”å¼æ•°æ®ï¼Œä¸å¯ç”¨äº jibenleixingshuju</li>
<li><code>const ä»£ç†å¯¹è±¡ = reactive(æºå¯¹è±¡)</code> æ¥æ”¶å¯¹è±¡æˆ–æ•°ç»„ï¼Œè¿”å›ä»£ç†å¯¹è±¡ï¼ˆProxy çš„å®ä¾‹å¯¹è±¡ï¼‰</li>
<li><code>reactive</code> çš„å“åº”å¼æ˜¯æ·±åº¦çš„</li>
<li>åŸºäº ES6 çš„ Proxy å®ç°ï¼Œé€šè¿‡ä»£ç†å¯¹è±¡æ“ä½œæºå¯¹è±¡å†…éƒ¨æ•°æ®</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;Vue3&#x27;</span>,</span><br><span class="line">      <span class="attr">sex</span>: <span class="string">&#x27;unknown&#x27;</span>,</span><br><span class="line">      <span class="attr">info</span>: &#123;</span><br><span class="line">        <span class="attr">school</span>: <span class="string">&#x27;Oxford&#x27;</span>,</span><br><span class="line">        <span class="attr">major</span>: <span class="string">&#x27;computer&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> color = <span class="title function_">reactive</span>([<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;green&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">changeInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">      person.<span class="property">info</span>.<span class="property">major</span> = <span class="string">&#x27;art&#x27;</span></span><br><span class="line">      color[<span class="number">0</span>] = <span class="string">&#x27;yellow&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      person,</span><br><span class="line">      color,</span><br><span class="line">      changeInfo,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ref-VS-reactive">ref VS reactive</h3>
<p>å®šä¹‰æ•°æ®ï¼š</p>
<ul>
<li>ref ç”¨äºå®šä¹‰åŸºæœ¬ç±»å‹æ•°æ®</li>
<li>reactive ç”¨äºå®šä¹‰å¯¹è±¡æˆ–æ•°ç»„ç±»å‹æ•°æ®</li>
<li>ref ä¹Ÿå¯å®šä¹‰å¯¹è±¡æˆ–æ•°ç»„ç±»å‹æ•°æ®ï¼Œå†…éƒ¨é€šè¿‡ reactive è½¬ä¸ºä»£ç†å¯¹è±¡</li>
<li>ä¸€èˆ¬ä½¿ç”¨ reactive å‡½æ•°ï¼Œå¯ä»¥æŠŠæ‰€æœ‰æ•°æ®å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡</li>
</ul>
<p>åŸç†ï¼š</p>
<ul>
<li>ref é€šè¿‡ <code>Object.defineProperty()</code> å®ç°å“åº”å¼</li>
<li>reactive é€šè¿‡ Proxy å®ç°å“åº”å¼ï¼ŒReflect æ“ä½œæºå¯¹è±¡æ•°æ®</li>
</ul>
<p>ä½¿ç”¨è§’åº¦ï¼š</p>
<ul>
<li>ref å®šä¹‰æ•°æ®ï¼Œè®¿é—®æ•°æ®éœ€è¦ <code>.value</code>ï¼Œæ¨¡æ¿ä¸­ä¸éœ€è¦</li>
<li>reactive å®šä¹‰çš„æ•°æ®ï¼Œéƒ½ä¸éœ€è¦</li>
</ul>
<h3 id="Vue3-å“åº”å¼åŸç†">Vue3 å“åº”å¼åŸç†</h3>
<ul>
<li>é€šè¿‡ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy">Proxy </a>ä»£ç†ï¼Œæ‹¦æˆªå¯¹å¯¹è±¡å±æ€§çš„æ“ä½œï¼ŒåŒ…æ‹¬å¢åˆ æ”¹æŸ¥</li>
<li>é€šè¿‡ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect">Reflect </a>åå°„ï¼Œå¯¹æºå¯¹è±¡çš„å±æ€§è¿›è¡Œæ“ä½œ</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> originPerson = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Lily&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">22</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> <span class="title class_">Proxy</span>(originPerson, &#123;</span><br><span class="line">  <span class="comment">// æ‹¦æˆªå¢åŠ å’ŒæŸ¥è¯¢æ“ä½œ</span></span><br><span class="line">  <span class="title function_">get</span>(<span class="params">target, prop</span>) &#123;</span><br><span class="line">    <span class="comment">// è¯»å–æºå¯¹è±¡çš„å±æ€§</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">get</span>(originPerson, prop)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// æ‹¦æˆªä¿®æ”¹æ“ä½œ</span></span><br><span class="line">  <span class="title function_">set</span>(<span class="params">target, prop, value</span>) &#123;</span><br><span class="line">    <span class="comment">// ä¿®æ”¹æºå¯¹è±¡çš„å±æ€§</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target, prop, value)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// æ‹¦æˆªåˆ é™¤æ“ä½œ</span></span><br><span class="line">  <span class="title function_">deleteProperty</span>(<span class="params">target, prop</span>) &#123;</span><br><span class="line">    <span class="comment">// åˆ é™¤æºå¯¹è±¡çš„å±æ€§</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">deleteProperty</span>(target, prop)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">name</span>)</span><br><span class="line">person.<span class="property">age</span> = <span class="number">33</span></span><br><span class="line">person.<span class="property">sex</span> = <span class="string">&#x27;unknown&#x27;</span></span><br><span class="line"><span class="keyword">delete</span> person.<span class="property">age</span></span><br></pre></td></tr></table></figure>
<h3 id="computed-å‡½æ•°">computed å‡½æ•°</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, computed &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">      <span class="attr">firstName</span>: <span class="string">&#x27;Cai&#x27;</span>,</span><br><span class="line">      <span class="attr">lastName</span>: <span class="string">&#x27;QP&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¡ç®—å±æ€§ç®€å†™å½¢å¼</span></span><br><span class="line">    person.<span class="property">fullName</span> = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> person.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span> + person.<span class="property">lastName</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¡ç®—å±æ€§å®Œæ•´å½¢å¼</span></span><br><span class="line">    person.<span class="property">fullName</span> = <span class="title function_">computed</span>(&#123;</span><br><span class="line">      <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> person.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span> + person.<span class="property">lastName</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="title function_">set</span>(<span class="params">value</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> arr = value.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">        person.<span class="property">firstName</span> = arr[<span class="number">0</span>]</span><br><span class="line">        person.<span class="property">lastName</span> = arr[<span class="number">1</span>]</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      person,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="watch-å‡½æ•°">watch å‡½æ•°</h3>
<p>Vue3 <code>watch</code> èƒ½ä¾¦å¬çš„ä¸œè¥¿ï¼š</p>
<blockquote>
<p>A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, reactive, watch &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•°æ®</span></span><br><span class="line"><span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">let</span> msg = <span class="title function_">ref</span>(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Vue3&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">  <span class="attr">info</span>: &#123;</span><br><span class="line">    <span class="attr">job</span>: &#123;</span><br><span class="line">      <span class="attr">salary</span>: <span class="number">40</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>ä¾¦å¬ ref å®šä¹‰çš„å“åº”å¼æ•°æ®</strong>ï¼š</p>
<ul>
<li>æ³¨æ„ä¸è¦å†™æˆ <code>sum.value</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‚æ•°ï¼šä¾¦å¬çš„æ•°æ®ï¼Œå›è°ƒï¼Œå…¶ä»–é…ç½®</span></span><br><span class="line"><span class="title function_">watch</span>(</span><br><span class="line">  sum,</span><br><span class="line">  <span class="function">(<span class="params">newVal, oldVal</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newVal, oldVal)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">immediate</span>: <span class="literal">true</span> &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>ä¾¦å¬å¤šä¸ª ref å®šä¹‰çš„å“åº”å¼æ•°æ®</strong>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// newValï¼ŒoldVal ä¹Ÿæ˜¯æ•°ç»„</span></span><br><span class="line"><span class="title function_">watch</span>([sum, msg], <span class="function">(<span class="params">newVal, oldVal</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(newVal, oldVal)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>ä¾¦å¬ ref å®šä¹‰çš„å¯¹è±¡ç±»å‹æ•°æ®</strong>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”¨ ref å®šä¹‰å¯¹è±¡ç±»å‹æ•°æ®</span></span><br><span class="line"><span class="keyword">let</span> person = <span class="title function_">ref</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Vue3&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">  <span class="attr">info</span>: &#123;</span><br><span class="line">    <span class="attr">job</span>: &#123;</span><br><span class="line">      <span class="attr">salary</span>: <span class="number">40</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼€å¯æ·±åº¦ç›‘å¬æ‰æœ‰æ•ˆï¼Œæ­¤æ—¶ç›‘å¬çš„æ˜¯ RefImpl å®ä¾‹</span></span><br><span class="line"><span class="comment">// Ref å®ä¾‹çš„ value æ˜¯ Proxy å¯¹è±¡ï¼Œå­˜çš„æ˜¯åœ°å€</span></span><br><span class="line"><span class="comment">// å› æ­¤æ— æ³•ç›‘å¬ person å†…éƒ¨å±æ€§çš„å˜åŒ–</span></span><br><span class="line"><span class="title function_">watch</span>(person, <span class="function">(<span class="params">newVal, oldVal</span>) =&gt;</span> &#123; ... &#125;, &#123; <span class="attr">deep</span>:<span class="literal">true</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ä¸ªå’Œ â€œä¾¦å¬ reactive å‡½æ•°ç›´æ¥è¿”å›çš„é‚£ä¸€æ•´å¨å“åº”å¼æ•°æ®â€ æ•ˆæœä¸€è‡´</span></span><br><span class="line"><span class="title function_">watch</span>(person.<span class="property">value</span>, <span class="function">(<span class="params">newVal, oldVal</span>) =&gt;</span> &#123;...&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>ä¾¦å¬ reactive å‡½æ•°ç›´æ¥è¿”å›çš„é‚£ä¸€æ•´å¨å“åº”å¼æ•°æ®</strong>ï¼š</p>
<ul>
<li>oldVal æ˜¯é”™è¯¯çš„ï¼å’Œ newVal çš„å€¼ä¸€æ ·</li>
<li>å¼ºåˆ¶å¼€å¯äº†æ·±åº¦ä¾¦å¬ï¼Œ<code>deep</code> é…ç½®ä¸ç”Ÿæ•ˆï¼</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">watch</span>(</span><br><span class="line">  person,</span><br><span class="line">  <span class="function">(<span class="params">newVal, oldVal</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newVal, oldVal)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">immediate</span>: <span class="literal">true</span>, <span class="attr">deep</span>: <span class="literal">false</span> &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>ä¾¦å¬ reactive å®šä¹‰çš„å“åº”å¼æ•°æ®æŸä¸ªå±æ€§</strong>ï¼š</p>
<ul>
<li>å¦‚æœæ˜¯ <code>() =&gt; person.info</code> oldVal ä¹Ÿæ˜¯é”™è¯¯çš„ï¼</li>
<li><code>() =&gt; person.name</code> oldVal æ˜¯æ­£ç¡®çš„ï¼Œä½•æ—¶å¯¹ä½•æ—¶é”™è‡ªå·±ç¢ç£¨å§ï¼</li>
<li>æ­¤å¤„æ²¡æœ‰å¼ºåˆ¶å¼€å¯æ·±åº¦ç›‘å¬</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¦‚æœç›‘è§†çš„å±æ€§è¿˜æ˜¯å¯¹è±¡ï¼Œåˆ™éœ€è¦å¼€å¯æ·±åº¦ç›‘å¬</span></span><br><span class="line"><span class="title function_">watch</span>(</span><br><span class="line">  <span class="function">() =&gt;</span> person.<span class="property">info</span>,</span><br><span class="line">  <span class="function">(<span class="params">newVal, oldVal</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newVal, oldVal)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">deep</span>: <span class="literal">true</span> &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>ä¾¦å¬ reactive å®šä¹‰çš„å“åº”å¼æ•°æ®å¤šä¸ªå±æ€§</strong>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">watch</span>(</span><br><span class="line">  [<span class="function">() =&gt;</span> person.<span class="property">name</span>, <span class="function">() =&gt;</span> person.<span class="property">info</span>],</span><br><span class="line">  <span class="function">(<span class="params">newVal, oldVal</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newVal, oldVal)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">deep</span>: <span class="literal">true</span> &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="watchEffect-å‡½æ•°">watchEffect å‡½æ•°</h3>
<ul>
<li><code>watchEffect</code> ä¸éœ€è¦æŒ‡æ˜ç›‘å¬å“ªä¸ªå±æ€§ï¼Œå›è°ƒé‡Œç”¨åˆ°å“ªä¸ªå±æ€§ï¼Œå°±è‡ªåŠ¨ç›‘å¬å“ªä¸ªå±æ€§</li>
<li><code>computed</code> æ³¨é‡è®¡ç®—çš„å€¼ï¼Œå³å›è°ƒå‡½æ•°çš„è¿”å›å€¼ï¼Œå› æ­¤å¿…é¡»æœ‰è¿”å›å€¼</li>
<li><code>watchEffect</code> æ›´æ³¨é‡è¿‡ç¨‹ï¼Œå³å›è°ƒå‡½æ•°çš„å‡½æ•°ä½“ï¼Œå› æ­¤å¯æ²¡æœ‰è¿”å›å€¼</li>
<li><code>watchEffect</code> æ²¡æœ‰å¼€å¯æ·±åº¦ç›‘å¬ï¼Œä¹Ÿä¸èƒ½å¼€å¯æ·±åº¦ç›‘å¬ï¼</li>
<li><code>watchEffect</code> å†…éƒ¨è‡ªè¡Œä¿®æ”¹æ•°æ®ï¼Œä¸ä¼šé‡æ–°è°ƒç”¨å›è°ƒï¼Œå› æ­¤ä¸ä¼šå‡ºç°é€’å½’è°ƒç”¨</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å›è°ƒä¸­ç”¨åˆ°çš„æ•°æ®åªè¦å‘ç”Ÿå˜åŒ–ï¼Œåˆ™ç›´æ¥é‡æ–°æ‰§è¡Œå›è°ƒ</span></span><br><span class="line"><span class="title function_">watchEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> total = sum.<span class="property">value</span></span><br><span class="line">  <span class="keyword">let</span> p = person</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;watchEffect...&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="ç”Ÿå‘½å‘¨æœŸ">ç”Ÿå‘½å‘¨æœŸ</h3>
<p>æ³¨æ„å’Œ <code>vue2.x</code> çš„ç”Ÿå‘½å‘¨æœŸå›¾ä½œå¯¹æ¯”ï¼Œ<code>beforeDestroy</code> å’Œ <code>destroyed</code> å˜ä¸º <code>beforeUnmount</code> å’Œ <code>unmounted</code> ã€‚</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/lifecycle.d2f8a1b7.svg" alt="vu3-lifecycle"></p>
<p>Vue3 ä¹Ÿæä¾›äº† Composition API å½¢å¼çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä¸ Vue2 ä¸­é’©å­å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>beforeCreate</code>===&gt;<code>setup()</code></li>
<li><code>created</code>=======&gt;<code>setup()</code></li>
<li><code>beforeMount</code> ===&gt;<code>onBeforeMount</code></li>
<li><code>mounted</code>=======&gt;<code>onMounted</code></li>
<li><code>beforeUpdate</code>===&gt;<code>onBeforeUpdate</code></li>
<li><code>updated</code> =======&gt;<code>onUpdated</code></li>
<li><code>beforeUnmount</code> ==&gt;<code>onBeforeUnmount</code></li>
<li><code>unmounted</code> =====&gt;<code>onUnmounted</code></li>
</ul>
<p>è‹¥å’Œé…ç½®é¡¹ç”Ÿå‘½é’©å­ä¸€èµ·ä½¿ç”¨ï¼Œåˆ™ç»„åˆå¼ä¼šæ¯”é…ç½®é¡¹çš„å…ˆæ‰§è¡Œï¼Œå¦‚ <code>onBeforeMount</code> å…ˆäº <code>beforeMount</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; onBeforeMount, onMounted, onBeforeUpdate, onUpdated, onBeforeUnmount, onUnmounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---setup---&#x27;</span>)</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//é€šè¿‡ç»„åˆå¼APIçš„å½¢å¼å»ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸé’©å­</span></span><br><span class="line">  <span class="title function_">onBeforeMount</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---onBeforeMount---&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---onMounted---&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="title function_">onBeforeUpdate</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---onBeforeUpdate---&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="title function_">onUpdated</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---onUpdated---&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="title function_">onBeforeUnmount</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---onBeforeUnmount---&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="title function_">onUnmounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---onUnmounted---&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;sum&#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h3 id="hook-å‡½æ•°">hook å‡½æ•°</h3>
<ul>
<li>hook æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠ setup å‡½æ•°çš„ Composition API è¿›è¡Œäº†å°è£…</li>
<li>ç±»ä¼¼ Vue2 çš„ Mixinï¼Œèƒ½å¤ç”¨ä»£ç ï¼Œè®© setup é‡Œçš„é€»è¾‘æ›´æ¸…æ™°</li>
<li>hook æ”¾åœ¨ hooks æ–‡ä»¶å¤¹ä¸­ï¼Œä¸€ä¸ªæ–‡ä»¶å¯¹åº”ä¸€ä¸ªåŠŸèƒ½æ¨¡å—ï¼Œä»¥ <code>useXxx</code> å‘½å</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// hooks/usePoint.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; reactive, onMounted, onBeforeUnmount &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">//å®ç°é¼ æ ‡â€œæ‰“ç‚¹â€ç›¸å…³çš„æ•°æ®</span></span><br><span class="line">  <span class="keyword">let</span> point = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">y</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å®ç°é¼ æ ‡â€œæ‰“ç‚¹â€ç›¸å…³çš„æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">savePoint</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    point.<span class="property">x</span> = event.<span class="property">pageX</span></span><br><span class="line">    point.<span class="property">y</span> = event.<span class="property">pageY</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å®ç°é¼ æ ‡â€œæ‰“ç‚¹â€ç›¸å…³çš„ç”Ÿå‘½å‘¨æœŸé’©å­</span></span><br><span class="line">  <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, savePoint)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onBeforeUnmount</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;click&#x27;</span>, savePoint)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> point</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ hook</span></span><br><span class="line"><span class="keyword">import</span> usePoint <span class="keyword">from</span> <span class="string">&#x27;../hooks/usePoint.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> point = <span class="title function_">usePoint</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123; point &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="toRef-å‡½æ•°">toRef å‡½æ•°</h3>
<ul>
<li>åˆ›å»ºä¸€ä¸ª RefImpl å®ä¾‹å¯¹è±¡ï¼Œå…¶ value å€¼æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡çš„æŸä¸ªå±æ€§ï¼Œä¿®æ”¹ value å€¼ä¼šä¿®æ”¹æºå¯¹è±¡å¯¹åº”çš„å±æ€§</li>
<li>åº”ç”¨ï¼šéœ€è¦æŠŠå“åº”å¼å¯¹è±¡çš„æŸä¸ªå±æ€§å•ç‹¬æä¾›ç»™å¤–éƒ¨ä½¿ç”¨</li>
<li>æ‰¹é‡åˆ›å»ºï¼š<code>toRefs</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive, toRef, toRefs&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Vue3&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">info</span>: &#123;</span><br><span class="line">      <span class="attr">job</span>: &#123;</span><br><span class="line">        <span class="attr">salary</span>: <span class="number">40</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">// æ³¨æ„ä¸èƒ½å†™æˆ ref(person.name)ï¼Œè¿™å’Œæºå¯¹è±¡æ˜¯å‰²è£‚å¼€çš„</span></span><br><span class="line">    <span class="attr">name</span>: <span class="title function_">toRef</span>(person, <span class="string">&#x27;name&#x27;</span>),</span><br><span class="line">    <span class="attr">salary</span>: <span class="title function_">toRef</span>(person.<span class="property">info</span>.<span class="property">job</span>, <span class="string">&#x27;salary&#x27;</span>)</span><br><span class="line">    <span class="comment">// or</span></span><br><span class="line">    ...<span class="title function_">toRefs</span>(person)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å…¶å®ƒ-Composition-API">å…¶å®ƒ Composition API</h2>
<h3 id="shallowReactive-shallowRef">shallowReactive &amp; shallowRef</h3>
<ul>
<li><code>shallowReactive</code>ï¼šåªå¤„ç†å¯¹è±¡æœ€å¤–å±‚å±æ€§çš„å“åº”å¼ï¼Œå³æµ…å“åº”å¼</li>
<li><code>shallowRef</code>ï¼šåŸºæœ¬æ•°æ®ç±»å‹å’Œ <code>ref</code> ç›¸åŒï¼Œå¯¹è±¡æ•°æ®ä¸å†ä¼šè°ƒç”¨ <code>reactive</code>ï¼Œå› æ­¤åªæœ‰å¯¹è±¡å¼•ç”¨æ”¹å˜äº†æ‰æ˜¯å“åº”å¼çš„</li>
<li>è‹¥ä¸€ä¸ªå¯¹è±¡æ•°æ®ï¼Œç»“æ„å¾ˆæ·±ï¼Œä½†åªæœ‰æœ€å¤–å±‚å±æ€§å˜åŒ–ï¼Œå¯ç”¨ <code>shallowReactive</code></li>
<li>è‹¥ä¸€ä¸ªå¯¹è±¡æ•°æ®ï¼Œå±æ€§ä¸ä¼šæ”¹å˜ï¼Œè€Œæ˜¯ä½¿ç”¨æ–°å¯¹è±¡æ›¿æ¢ï¼Œå¯ç”¨ <code>shallowRef</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; shallowReactive, shallowRef &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> person = <span class="title function_">shallowReactive</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Vue3&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">21</span>,</span><br><span class="line">    <span class="attr">info</span>: &#123;</span><br><span class="line">      <span class="attr">job</span>: &#123;</span><br><span class="line">        <span class="attr">salary</span>: <span class="number">22</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">let</span> x = <span class="title function_">shallowRef</span>(&#123;</span><br><span class="line">    <span class="attr">y</span>: <span class="number">0</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    person,</span><br><span class="line">    x</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="readonly-shallowReadonly">readonly &amp; shallowReadonly</h3>
<ul>
<li><code>readonly</code>: è®©ä¸€ä¸ªå“åº”å¼æ•°æ®å˜ä¸ºåªè¯»çš„ï¼ˆæ·±åªè¯»ï¼‰</li>
<li><code>shallowReadonly</code>ï¼šè®©ä¸€ä¸ªå“åº”å¼æ•°æ®å˜ä¸ºåªè¯»çš„ï¼ˆæµ…åªè¯»ï¼‰</li>
<li>åº”ç”¨åœºæ™¯: ä¸å¸Œæœ›æ•°æ®è¢«ä¿®æ”¹æ—¶ï¼Œå¦‚ä½ ç”¨äº†åˆ«äººçš„å“åº”å¼æ•°æ®ï¼Œä½†æ˜¯åˆ«äººä¸å¸Œæœ›ä½ ä¿®æ”¹æ—¶</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;...&#125;)</span><br><span class="line"></span><br><span class="line">  sum = <span class="title function_">readonly</span>(sum)</span><br><span class="line">  person = <span class="title function_">shallowReadonly</span>(person)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    sum,</span><br><span class="line">    person</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="toRaw-markRaw">toRaw &amp; markRaw</h3>
<p><code>toRaw</code>ï¼š</p>
<ul>
<li>å°†ä¸€ä¸ªç”± <code>reactive</code> ç”Ÿæˆçš„å“åº”å¼å¯¹è±¡è½¬ä¸ºæ™®é€šå¯¹è±¡</li>
<li>ç”¨äºè¯»å–å“åº”å¼å¯¹è±¡å¯¹åº”çš„æ™®é€šå¯¹è±¡ï¼Œå¯¹è¯¥æ™®é€šå¯¹è±¡çš„æ“ä½œä¸ä¼šå¼•èµ·é¡µé¢æ›´æ–°</li>
</ul>
<p><code>markRaw</code>ï¼š</p>
<ul>
<li>æ ‡è®°ä¸€ä¸ªå¯¹è±¡ï¼Œè®©å…¶ä¸æˆä¸ºå“åº”å¼å¯¹è±¡</li>
<li>æœ‰äº›å€¼ä¸åº”è®¾ç½®ä¸ºå“åº”å¼ï¼Œæ¯”å¦‚å¤æ‚çš„ç¬¬ä¸‰æ–¹åº“</li>
<li>å½“æ¸²æŸ“å¤æ‚ä¸”ä¸å˜çš„æ•°æ®æ—¶ï¼Œè·³è¿‡å“åº”å¼è½¬æ¢å¯æé«˜æ€§èƒ½</li>
</ul>
<p>æ³¨æ„ï¼šä»…ä»…è®©æ•°æ®å˜ä¸ºéå“åº”å¼çš„ï¼Œæ•°æ®å˜çš„ä¾æ—§å˜ï¼Œåªæ˜¯æ²¡å¼•èµ·é¡µé¢æ›´æ–°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">showRawPerson</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> p = <span class="title function_">toRaw</span>(person);</span><br><span class="line">    p.<span class="property">age</span>++;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(p);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(person);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">addCar</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> car = &#123; <span class="attr">name</span>: <span class="string">&quot;å¥”é©°&quot;</span>, <span class="attr">price</span>: <span class="number">40</span> &#125;;</span><br><span class="line">    person.<span class="property">car</span> = <span class="title function_">markRaw</span>(car);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="customRef">customRef</h3>
<p>åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ refï¼Œå¹¶å¯¹å…¶ä¾èµ–é¡¹è·Ÿè¸ªå’Œæ›´æ–°è§¦å‘è¿›è¡Œæ˜¾å¼æ§åˆ¶</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;keyword&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123; keyword &#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, customRef &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Demo&#x27;</span>,</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// è‡ªå®šä¹‰ myRef</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">myRef</span>(<span class="params">value, delay</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> timer</span><br><span class="line">      <span class="comment">// é€šè¿‡customRefå»å®ç°è‡ªå®šä¹‰</span></span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">customRef</span>(<span class="function">(<span class="params">track, trigger</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="comment">//å‘Šè¯‰Vueè¿™ä¸ªvalueå€¼æ˜¯éœ€è¦è¢«â€œè¿½è¸ªâ€çš„</span></span><br><span class="line">            <span class="title function_">track</span>()</span><br><span class="line">            <span class="keyword">return</span> value</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="title function_">set</span>(<span class="params">newValue</span>) &#123;</span><br><span class="line">            <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">            timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              value = newValue</span><br><span class="line">              <span class="comment">// å‘Šè¯‰Vueå»æ›´æ–°ç•Œé¢</span></span><br><span class="line">              <span class="title function_">trigger</span>()</span><br><span class="line">            &#125;, delay)</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> keyword = <span class="title function_">myRef</span>(<span class="string">&#x27;hello&#x27;</span>, <span class="number">500</span>)</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      keyword,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="provide-inject">provide / inject</h3>
<p>å®ç°ç¥–å…ˆç»„ä»¶ä¸åä»£ç»„ä»¶ä¹‹é—´é€šä¿¡ã€‚</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://brucecai55520.gitee.io/bruceblog/assets/img/provide-inject.840efd40.png" alt="provide-inject"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¥–å…ˆç»„ä»¶ä¼ é€’æ•°æ®</span></span><br><span class="line"><span class="keyword">import</span> &#123; provide, reactive, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> car = <span class="title function_">reactive</span>(&#123;...&#125;)</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">provide</span>(<span class="string">&#x27;sum&#x27;</span>, sum)</span><br><span class="line">  <span class="title function_">provide</span>(<span class="string">&#x27;car&#x27;</span>, car)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åä»£ç»„ä»¶æ¥æ”¶æ•°æ®</span></span><br><span class="line"><span class="keyword">import</span> &#123; inject &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> car = <span class="title function_">inject</span>(<span class="string">&#x27;car&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> sum = <span class="title function_">inject</span>(<span class="string">&#x27;sum&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> &#123; car, sum &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å“åº”å¼æ•°æ®çš„åˆ¤æ–­">å“åº”å¼æ•°æ®çš„åˆ¤æ–­</h3>
<ul>
<li><code>isRef</code>: æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºä¸€ä¸ª <code>ref</code> å¯¹è±¡</li>
<li><code>isReactive</code>: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>reactive</code> åˆ›å»ºçš„å“åº”å¼ä»£ç†</li>
<li><code>isReadonly</code>: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>readonly</code> åˆ›å»ºçš„åªè¯»ä»£ç†</li>
<li><code>isProxy</code>: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>reactive</code> æˆ–è€… <code>readonly</code> æ–¹æ³•åˆ›å»ºçš„ä»£ç†</li>
</ul>
<h2 id="Compositon-API-çš„ä¼˜åŠ¿">Compositon API çš„ä¼˜åŠ¿</h2>
<p><strong>Options API å­˜åœ¨çš„é—®é¢˜</strong></p>
<p>ä½¿ç”¨ä¼ ç»Ÿ Options API ä¸­ï¼Œæ–°å¢æˆ–è€…ä¿®æ”¹ä¸€ä¸ªéœ€æ±‚ï¼Œå°±éœ€è¦åˆ†åˆ«åœ¨ dataï¼Œmethodsï¼Œcomputed ç­‰åœ°æ–¹ä¿®æ”¹ã€‚</p>
<p><strong>Composition API çš„ä¼˜åŠ¿</strong></p>
<p>å¯ä»¥æ›´åŠ ä¼˜é›…åœ°ç»„ç»‡ä»£ç ã€å‡½æ•°ï¼Œè®©ç›¸å…³åŠŸèƒ½çš„ä»£ç æ›´åŠ æœ‰åºçš„ç»„ç»‡åœ¨ä¸€èµ·ã€‚è¯´ç™½äº†å°±æ˜¯è®©åŒä¸€ä¸ªåŠŸèƒ½çš„ä»£ç æ•´åˆåˆ°ä¸€èµ·ï¼Œæ—¥åä¿®æ”¹ä»£ç ç›´æ¥æ‰¾å¯¹åº”çš„åŠŸèƒ½æ¨¡å—ã€‚</p>
<h2 id="æ–°çš„ç»„ä»¶">æ–°çš„ç»„ä»¶</h2>
<h3 id="Fragment">Fragment</h3>
<ul>
<li>åœ¨ Vue2 ä¸­: ç»„ä»¶å¿…é¡»æœ‰ä¸€ä¸ªæ ¹æ ‡ç­¾</li>
<li>åœ¨ Vue3 ä¸­: ç»„ä»¶å¯ä»¥æ²¡æœ‰æ ¹æ ‡ç­¾, å†…éƒ¨ä¼šå°†å¤šä¸ªæ ‡ç­¾åŒ…å«åœ¨ä¸€ä¸ª <code>Fragment</code> è™šæ‹Ÿå…ƒç´ ä¸­</li>
<li>å¥½å¤„: å‡å°‘æ ‡ç­¾å±‚çº§, å‡å°å†…å­˜å ç”¨</li>
</ul>
<h3 id="Teleport">Teleport</h3>
<ul>
<li>å°†åŒ…è£¹çš„ HTML ç»“æ„ç§»åŠ¨åˆ°æŒ‡å®šå…ƒç´ çš„æœ«å°¾</li>
<li><code>to</code> å±æ€§ä¸º CSS é€‰æ‹©å™¨</li>
</ul>
<p>ç®€æ˜“çš„æ¨¡æ€æ¡†æ•ˆæœï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">teleport</span> <span class="attr">to</span>=<span class="string">&quot;#root&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;isShow&quot;</span> <span class="attr">class</span>=<span class="string">&quot;mask&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dialog&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªå¼¹çª—<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;isShow = false&quot;</span>&gt;</span>å…³é—­å¼¹çª—<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">teleport</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mask</span> &#123;</span><br><span class="line">  <span class="comment">/* é®ç½©å±‚é“ºæ»¡çª—å£ */</span></span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.dialog</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Suspense">Suspense</h3>
<p>ç­‰å¾…å¼‚æ­¥ç»„ä»¶æ—¶æ¸²æŸ“é¢å¤–å†…å®¹ï¼Œè®©ç”¨æˆ·ä½“éªŒæ›´å¥½</p>
<p>å¼‚æ­¥å¼•å…¥ç»„ä»¶ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineAsyncComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Child</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">() =&gt;</span> <span class="title function_">import</span>(<span class="string">&#x27;./components/Child.vue&#x27;</span>))</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ <code>Suspense</code> åŒ…è£¹ç»„ä»¶ï¼Œå®é™…ä¸Šæ˜¯å¾€æ’æ§½å¡«å……å†…å®¹ï¼Œ<code>default</code> æ’æ§½å¡«å……ç»„ä»¶å†…å®¹ï¼Œ<code>fallback</code> æ’æ§½å¡«å……ç»„ä»¶åŠ è½½æ—¶æ˜¾ç¤ºçš„å†…å®¹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Suspense</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:default</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Child</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:fallback</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>åŠ è½½ä¸­ï¼Œè¯·ç¨ç­‰...<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Suspense</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œè‹¥ <code>Child</code> ç»„ä»¶çš„ <code>setup</code> å‡½æ•°è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œä¹Ÿèƒ½æ¸²æŸ“ <code>fallback</code> é‡Œçš„å†…å®¹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">resolve</span>(&#123;sum&#125;)</span><br><span class="line">    &#125;, <span class="number">3000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å…¶ä»–æ”¹å˜">å…¶ä»–æ”¹å˜</h2>
<ul>
<li>å…¨å±€ API çš„è½¬ç§»</li>
</ul>
<p>Vue3 å°†å…¨å±€çš„ APIï¼Œå³ï¼š<code>Vue.xxx</code> è°ƒæ•´åˆ°åº”ç”¨å®ä¾‹ <code>app</code> ä¸Šï¼š</p>
<table>
<thead>
<tr>
<th>Vue2 å…¨å±€ API</th>
<th>Vue3 å®ä¾‹ API</th>
</tr>
</thead>
<tbody>
<tr>
<td><a target="_blank" rel="noopener" href="http://Vue.config.xxx">Vue.config.xxx</a></td>
<td><a target="_blank" rel="noopener" href="http://app.config.xxx">app.config.xxx</a></td>
</tr>
<tr>
<td>Vue.config.productionTip</td>
<td>ç§»é™¤</td>
</tr>
<tr>
<td>Vue.component</td>
<td>app.component</td>
</tr>
<tr>
<td>Vue.directive</td>
<td>app.directive</td>
</tr>
<tr>
<td>Vue.mixin</td>
<td>app.mixin</td>
</tr>
<tr>
<td>Vue.use</td>
<td>app.use</td>
</tr>
<tr>
<td>Vue.prototype</td>
<td>app.config.globalProperties</td>
</tr>
</tbody>
</table>
<ul>
<li><code>data</code> é€‰é¡¹åº”å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°</li>
<li>è¿‡æ¸¡ç±»åçš„æ›´æ”¹ï¼š</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Vue2 */</span></span><br><span class="line"><span class="selector-class">.v-enter</span>,</span><br><span class="line"><span class="selector-class">.v-leave-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.v-leave</span>,</span><br><span class="line"><span class="selector-class">.v-enter-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Vue3 */</span></span><br><span class="line"><span class="selector-class">.v-enter-from</span>,</span><br><span class="line"><span class="selector-class">.v-leave-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v-leave-from</span>,</span><br><span class="line"><span class="selector-class">.v-enter-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ç§»é™¤ <code>keyCode</code> ä½œä¸º <code>v-on</code> çš„ä¿®é¥°ç¬¦ï¼ŒåŒæ—¶ä¹Ÿä¸å†æ”¯æŒ <code>config.keyCodes</code></li>
<li>ç§»é™¤ <code>v-on.native</code>ä¿®é¥°ç¬¦ï¼Œå­ç»„ä»¶æ²¡æœ‰åœ¨ <code>emits: ['close']</code> å£°æ˜çš„è‡ªå®šä¹‰äº‹ä»¶ä½œä¸ºåŸç”Ÿäº‹ä»¶å¤„ç†</li>
<li>ç§»é™¤è¿‡æ»¤å™¨ <code>filter</code></li>
<li>â€¦</li>
</ul>
<h2 id="ç»„ä»¶ä¸Šçš„-v-model">ç»„ä»¶ä¸Šçš„ v-model</h2>
<p>å½“éœ€è¦ç»´æŠ¤ç»„ä»¶å†…å¤–æ•°æ®çš„åŒæ­¥æ—¶ï¼Œå¯ä»¥åœ¨ç»„ä»¶ä¸Šä½¿ç”¨ <code>v-model</code> æŒ‡ä»¤ã€‚</p>
<p>çˆ¶ç»„ä»¶ä¼ å€¼ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- çˆ¶ç»„ä»¶ä¼ å€¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">my-counter</span> <span class="attr">v-model:number</span>=<span class="string">&quot;count&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-counter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å­ç»„ä»¶åœ¨ <code>emits</code> èŠ‚ç‚¹å£°æ˜è‡ªå®šä¹‰äº‹ä»¶ï¼Œæ ¼å¼ä¸º <code>update:xxx</code> ï¼Œè°ƒç”¨ <code>$emit</code> è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">props</span>: [<span class="string">&#x27;number&#x27;</span>],</span><br><span class="line">  <span class="attr">emits</span>: [<span class="string">&#x27;update:number&#x27;</span>],</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">add</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.$emit(<span class="string">&#x27;update:number&#x27;</span>, <span class="variable language_">this</span>.<span class="property">number</span>++)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œåœ¨ <code>vue3</code> ä¸­ <code>props</code> å±æ€§åŒæ ·æ˜¯åªè¯»çš„ï¼Œä¸Šé¢ <code>this.number++</code> å¹¶æ²¡æœ‰ä¿®æ”¹ <code>number</code> çš„å€¼ã€‚</p>
<p>å…¶å®é€šè¿‡ <code>v-bind</code> ä¼ å€¼å’Œç›‘å¬è‡ªå®šä¹‰äº‹ä»¶çš„æ–¹å¼èƒ½å®ç°å’Œ <code>v-model</code> ç›¸åŒçš„æ•ˆæœã€‚</p>
<h2 id="EventBus">EventBus</h2>
<p>å€ŸåŠ©äºç¬¬ä¸‰æ–¹çš„åŒ… <code>mitt</code> æ¥åˆ›å»º <code>eventBus</code> å¯¹è±¡ï¼Œä»è€Œå®ç°å…„å¼Ÿç»„ä»¶ä¹‹é—´çš„æ•°æ®å…±äº«ã€‚</p>
<p>å®‰è£… <code>mitt</code> ä¾èµ–åŒ…ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mitt@2.1.0</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºå…¬å…±çš„ <code>eventBus</code> æ¨¡å—ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&#x27;mitt&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»º EventBus å®ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> bus = <span class="title function_">mitt</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> bus</span><br></pre></td></tr></table></figure>
<p>æ•°æ®æ¥æ”¶æ–¹è°ƒç”¨ <code>bus.on()</code> ç›‘å¬è‡ªå®šä¹‰äº‹ä»¶ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> bus <span class="keyword">from</span> <span class="string">&#x27;./eventBus.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">count</span>: <span class="number">0</span> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    bus.<span class="title function_">on</span>(<span class="string">&#x27;countChange&#x27;</span>, <span class="function">(<span class="params">count</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">count</span> = count</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ•°æ®æ¥å‘é€æ–¹è°ƒç”¨ <code>bus.emit()</code> è§¦å‘äº‹ä»¶ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> bus <span class="keyword">from</span> <span class="string">&#x27;./eventBus.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">cout</span>: <span class="number">0</span> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">addCount</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">count</span>++</span><br><span class="line">      bus.<span class="title function_">emit</span>(<span class="string">&#x27;countChange&#x27;</span>, <span class="variable language_">this</span>.<span class="property">count</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="vue-3-x-å…¨å±€é…ç½®-axios">vue 3.x å…¨å±€é…ç½® axios</h2>
<p>å®é™…é¡¹ç›®å¼€å‘ä¸­ï¼Œå‡ ä¹æ¯ä¸ªç»„ä»¶ä¸­éƒ½ä¼šä½¿ç”¨ <code>axios</code> å‘èµ·æ•°æ®è¯·æ±‚ã€‚æ­¤æ—¶ä¼šé‡åˆ°å¦‚ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>æ¯ä¸ªç»„ä»¶ä¸­éƒ½éœ€è¦å¯¼å…¥ <code>axios</code>ï¼ˆä»£ç è‡ƒè‚¿ï¼‰</li>
<li>æ¯æ¬¡å‘è¯·æ±‚éƒ½éœ€è¦å¡«å†™å®Œæ•´çš„è¯·æ±‚è·¯å¾„ï¼ˆä¸åˆ©äºåæœŸçš„ç»´æŠ¤ï¼‰</li>
</ul>
<p>åœ¨ <code>main.js</code> æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é…ç½®è¯·æ±‚æ ¹è·¯å¾„</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = <span class="string">&#x27;http://api.com&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å°† axios æŒ‚è½½ä¸º app å…¨å±€è‡ªå®šä¹‰å±æ€§</span></span><br><span class="line"><span class="comment">// æ¯ä¸ªç»„ä»¶å¯é€šè¿‡ this.$http è®¿é—®åˆ° axios</span></span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$http</span> = axios</span><br></pre></td></tr></table></figure>
<p>ç»„ä»¶è°ƒç”¨ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">get</span>(<span class="string">&#x27;/users&#x27;</span>)</span><br></pre></td></tr></table></figure>
<hr>
<blockquote>
<p>è§†é¢‘ç¬”è®°å†…å®¹æ¥è‡ªBç«™å°šç¡…è°·çš„<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Zy4y1K7SH?p=1&amp;vd_source=f5b24b9dd30b3acd2bf669dccabe17d6">å¼ å¤©ç¦¹è€å¸ˆ</a></p>
</blockquote>
</article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>ã€å‰ç«¯ã€‘Vueæ ¸å¿ƒåŸºç¡€(Vue2.x &amp; Vue3.x &amp; å¸¸ç”¨ç»„ä»¶åº“)</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://blog.cilicili.xyz/posts/4070eb25.html">https://blog.cilicili.xyz/posts/4070eb25.html</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a"><h>ä½œè€…</h><div class="post-copyright-cc-info"><h>ç ”å‹</h></div></div><div class="post-copyright-c"><h>å‘å¸ƒäº</h><div class="post-copyright-cc-info"><h>2022-09-06</h></div></div><div class="post-copyright-u"><h>æ›´æ–°äº</h><div class="post-copyright-cc-info"><h>2022-09-09</h></div></div><div class="post-copyright-c"><h>è®¸å¯åè®®</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Vue/">Vue</a></div><div class="post_share"><div class="social-share" data-image="https://gitee.com/songzhenjin/image/raw/master/img/say-hello-to-new-people.svg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://fastly.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><link rel="stylesheet" href="/css/coin.css" media="defer" onload="this.media='all'"/><div class="post-reward"><button class="tip-button reward-button"><span class="tip-button__text">æŠ•å¸æ”¯æŒ (,,ï½¥âˆ€ï½¥)ï¾‰ã‚›</span><div class="coin-wrapper"><div class="coin"><div class="coin__middle"></div><div class="coin__back"></div><div class="coin__front"></div></div></div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/reward/wechat.png" target="_blank"><img class="post-qr-code-img" data-lazy-src="/img/reward/wechat.png" alt="WeChat"/></a><div class="post-qr-code-desc">WeChat</div></li><li class="reward-item"><a href="/img/reward/alipay.jpg" target="_blank"><img class="post-qr-code-img" data-lazy-src="/img/reward/alipay.jpg" alt="Alipay"/></a><div class="post-qr-code-desc">Alipay</div></li></ul></div></button></div><script defer="defer" src="/js/coin.js"></script><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/706992d4.html"><img class="prev-cover" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/design-and-development-process.svg" onerror="onerror=null;src='/img/loading.gif'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">ã€åç«¯ã€‘åŸºäºNode.jsçš„æ•°æ®åº“ä¸èº«ä»½è®¤è¯</div></div></a></div><div class="next-post pull-right"><a href="/posts/5405255.html"><img class="next-cover" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/website-designing.svg" onerror="onerror=null;src='/img/loading.gif'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">ã€å‰ç«¯ã€‘æ­£åˆ™è¡¨è¾¾å¼çš„ç®€å•ä½¿ç”¨</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/posts/5b0e50ed.html" title="ã€å‰ç«¯ã€‘Vue3.2å®ç°åå°ç®¡ç†ç³»ç»Ÿï¼ˆä¸€ï¼‰"><img class="cover" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/girl-doing-video-calling.svg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-01</div><div class="title">ã€å‰ç«¯ã€‘Vue3.2å®ç°åå°ç®¡ç†ç³»ç»Ÿï¼ˆä¸€ï¼‰</div></div></a></div><div><a href="/posts/a8d8a047.html" title="ã€å‰ç«¯ã€‘Vue3.2å®ç°åå°ç®¡ç†ç³»ç»Ÿï¼ˆäºŒï¼‰"><img class="cover" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/a69ux-1o2gc.svg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-09</div><div class="title">ã€å‰ç«¯ã€‘Vue3.2å®ç°åå°ç®¡ç†ç³»ç»Ÿï¼ˆäºŒï¼‰</div></div></a></div><div><a href="/posts/714ca07c.html" title="ã€é¢è¯•ã€‘VueåŸç†é¢è¯•é¢˜æ€»ç»“"><img class="cover" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/undraw_wait_in_line_o2aq.svg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-09-14</div><div class="title">ã€é¢è¯•ã€‘VueåŸç†é¢è¯•é¢˜æ€»ç»“</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">Vue æ ¸å¿ƒåŸºç¡€</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%A9%B1%E5%8A%A8%E8%A7%86%E5%9B%BE"><span class="toc-number">1.1.</span> <span class="toc-text">æ•°æ®é©±åŠ¨è§†å›¾</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MVVM%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.1.1.</span> <span class="toc-text">MVVMæ¨¡å‹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E4%BB%A3%E7%90%86"><span class="toc-number">1.2.</span> <span class="toc-text">æ•°æ®ä»£ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Object-defineProperty-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">1.2.1.</span> <span class="toc-text">Object.defineProperty() çš„ä½¿ç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%95%E4%B8%BA%E6%95%B0%E6%8D%AE%E4%BB%A3%E7%90%86"><span class="toc-number">1.2.2.</span> <span class="toc-text">ä½•ä¸ºæ•°æ®ä»£ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue-%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E4%BB%A3%E7%90%86"><span class="toc-number">1.2.3.</span> <span class="toc-text">Vue ä¸­çš„æ•°æ®ä»£ç†</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue-%E7%9B%91%E6%B5%8B%E6%95%B0%E6%8D%AE%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-number">1.3.</span> <span class="toc-text">Vue ç›‘æµ‹æ•°æ®çš„åŸç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue-%E7%9B%91%E6%B5%8B%E5%AF%B9%E8%B1%A1%E6%95%B0%E6%8D%AE"><span class="toc-number">1.3.1.</span> <span class="toc-text">Vue ç›‘æµ‹å¯¹è±¡æ•°æ®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue-%E7%9B%91%E6%B5%8B%E6%95%B0%E7%BB%84"><span class="toc-number">1.3.2.</span> <span class="toc-text">Vue ç›‘æµ‹æ•°ç»„</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%92%E5%80%BC%E8%AF%AD%E6%B3%95"><span class="toc-number">1.4.</span> <span class="toc-text">æ’å€¼è¯­æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E7%BB%91%E5%AE%9A%E6%8C%87%E4%BB%A4-v-bind"><span class="toc-number">1.5.</span> <span class="toc-text">å±æ€§ç»‘å®šæŒ‡ä»¤ v-bind</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A%E6%8C%87%E4%BB%A4-v-model"><span class="toc-number">1.6.</span> <span class="toc-text">åŒå‘ç»‘å®šæŒ‡ä»¤ v-model</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#v-model-%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95"><span class="toc-number">1.6.1.</span> <span class="toc-text">v-model åŸºç¡€ç”¨æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-model-%E6%8C%87%E4%BB%A4%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="toc-number">1.6.2.</span> <span class="toc-text">v-model æŒ‡ä»¤ä¿®é¥°ç¬¦</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-model-%E6%94%B6%E9%9B%86%E8%A1%A8%E5%8D%95%E6%95%B0%E6%8D%AE"><span class="toc-number">1.6.3.</span> <span class="toc-text">v-model æ”¶é›†è¡¨å•æ•°æ®</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A%E6%8C%87%E4%BB%A4-v-on"><span class="toc-number">1.7.</span> <span class="toc-text">äº‹ä»¶ç»‘å®šæŒ‡ä»¤ v-on</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#v-on-%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95"><span class="toc-number">1.7.1.</span> <span class="toc-text">v-on åŸºç¡€ç”¨æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E5%8F%82%E6%95%B0%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.7.2.</span> <span class="toc-text">äº‹ä»¶å‚æ•°å¯¹è±¡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="toc-number">1.7.3.</span> <span class="toc-text">äº‹ä»¶ä¿®é¥°ç¬¦</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%89%E9%94%AE%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="toc-number">1.7.4.</span> <span class="toc-text">æŒ‰é”®ä¿®é¥°ç¬¦</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93%E6%8C%87%E4%BB%A4"><span class="toc-number">1.8.</span> <span class="toc-text">æ¡ä»¶æ¸²æŸ“æŒ‡ä»¤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95"><span class="toc-number">1.8.1.</span> <span class="toc-text">åŸºç¡€ç”¨æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-if-%E5%92%8C-v-show-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.8.2.</span> <span class="toc-text">v-if å’Œ v-show çš„åŒºåˆ«</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93%E6%8C%87%E4%BB%A4-v-for"><span class="toc-number">1.9.</span> <span class="toc-text">åˆ—è¡¨æ¸²æŸ“æŒ‡ä»¤ v-for</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-number">1.9.1.</span> <span class="toc-text">åŸºæœ¬ç”¨æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#key-%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">1.9.2.</span> <span class="toc-text">key çš„ä½œç”¨</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E5%AE%83%E5%86%85%E7%BD%AE%E6%8C%87%E4%BB%A4"><span class="toc-number">1.10.</span> <span class="toc-text">å…¶å®ƒå†…ç½®æŒ‡ä»¤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#v-text"><span class="toc-number">1.10.1.</span> <span class="toc-text">v-text</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-html"><span class="toc-number">1.10.2.</span> <span class="toc-text">v-html</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-cloak"><span class="toc-number">1.10.3.</span> <span class="toc-text">v-cloak</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-once"><span class="toc-number">1.10.4.</span> <span class="toc-text">v-once</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-pre"><span class="toc-number">1.10.5.</span> <span class="toc-text">v-pre</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">1.11.</span> <span class="toc-text">è¿‡æ»¤å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">1.11.1.</span> <span class="toc-text">åŸºæœ¬ä½¿ç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E7%BB%AD%E8%B0%83%E7%94%A8%E5%A4%9A%E4%B8%AA%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">1.11.2.</span> <span class="toc-text">è¿ç»­è°ƒç”¨å¤šä¸ªè¿‡æ»¤å™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4%E5%99%A8%E4%BC%A0%E5%8F%82"><span class="toc-number">1.11.3.</span> <span class="toc-text">è¿‡æ»¤å™¨ä¼ å‚</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#computed-%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7"><span class="toc-number">1.12.</span> <span class="toc-text">computed è®¡ç®—å±æ€§</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#watch-%E4%BE%A6%E5%90%AC%E5%99%A8"><span class="toc-number">1.13.</span> <span class="toc-text">watch ä¾¦å¬å™¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E7%BB%91%E5%AE%9A-class-%E5%92%8C-style"><span class="toc-number">1.14.</span> <span class="toc-text">åŠ¨æ€ç»‘å®š class å’Œ style</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E7%BB%91%E5%AE%9A-class-%E7%B1%BB%E5%90%8D"><span class="toc-number">1.14.1.</span> <span class="toc-text">åŠ¨æ€ç»‘å®š class ç±»å</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E7%BB%91%E5%AE%9A-style-%E6%A0%B7%E5%BC%8F"><span class="toc-number">1.14.2.</span> <span class="toc-text">åŠ¨æ€ç»‘å®š style æ ·å¼</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.15.</span> <span class="toc-text">vue ç”Ÿå‘½å‘¨æœŸ</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">Vue ç»„ä»¶åŒ–ç¼–ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%9E%E5%8D%95%E6%96%87%E4%BB%B6%E7%BB%84%E4%BB%B6"><span class="toc-number">2.1.</span> <span class="toc-text">éå•æ–‡ä»¶ç»„ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8-v2"><span class="toc-number">2.1.1.</span> <span class="toc-text">åŸºæœ¬ä½¿ç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E-VueComponent-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">2.1.2.</span> <span class="toc-text">å…³äº VueComponent æ„é€ å‡½æ•°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E6%96%87%E4%BB%B6%E7%BB%84%E4%BB%B6"><span class="toc-number">2.2.</span> <span class="toc-text">å•æ–‡ä»¶ç»„ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#scoped-%E8%A7%A3%E5%86%B3%E6%A0%B7%E5%BC%8F%E5%86%B2%E7%AA%81"><span class="toc-number">2.3.</span> <span class="toc-text">scoped è§£å†³æ ·å¼å†²çª</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1"><span class="toc-number">2.4.</span> <span class="toc-text">ç»„ä»¶é€šä¿¡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7-props"><span class="toc-number">2.4.1.</span> <span class="toc-text">è‡ªå®šä¹‰å±æ€§ props</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6"><span class="toc-number">2.4.2.</span> <span class="toc-text">è‡ªå®šä¹‰äº‹ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EventBus-%E5%85%A8%E5%B1%80%E4%BA%8B%E4%BB%B6%E6%80%BB%E7%BA%BF"><span class="toc-number">2.4.3.</span> <span class="toc-text">EventBus å…¨å±€äº‹ä»¶æ€»çº¿</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B6%88%E6%81%AF%E8%AE%A2%E9%98%85%E4%B8%8E%E5%8F%91%E5%B8%83"><span class="toc-number">2.4.4.</span> <span class="toc-text">æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ref-refs"><span class="toc-number">2.4.5.</span> <span class="toc-text">ref &#x2F; $refs</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">Vue ç»„ä»¶è¿›é˜¶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6"><span class="toc-number">3.1.</span> <span class="toc-text">åŠ¨æ€ç»„ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#keep-alive"><span class="toc-number">3.2.</span> <span class="toc-text">keep-alive</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%92%E6%A7%BD"><span class="toc-number">3.3.</span> <span class="toc-text">æ’æ§½</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%95%E4%B8%BA%E6%8F%92%E6%A7%BD"><span class="toc-number">3.3.1.</span> <span class="toc-text">ä½•ä¸ºæ’æ§½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E6%A7%BD%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-number">3.3.2.</span> <span class="toc-text">æ’æ§½åŸºæœ¬ç”¨æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BD"><span class="toc-number">3.3.3.</span> <span class="toc-text">å…·åæ’æ§½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD"><span class="toc-number">3.3.4.</span> <span class="toc-text">ä½œç”¨åŸŸæ’æ§½</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4"><span class="toc-number">3.4.</span> <span class="toc-text">è‡ªå®šä¹‰æŒ‡ä»¤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%B1%BB"><span class="toc-number">3.4.1.</span> <span class="toc-text">åˆ†ç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4%E5%86%99%E6%B3%95"><span class="toc-number">3.4.2.</span> <span class="toc-text">å®Œæ•´å†™æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E5%86%99%E5%BD%A2%E5%BC%8F"><span class="toc-number">3.4.3.</span> <span class="toc-text">ç®€å†™å½¢å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">3.4.4.</span> <span class="toc-text">æ³¨æ„äº‹é¡¹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mixin-%E6%B7%B7%E5%85%A5"><span class="toc-number">3.5.</span> <span class="toc-text">Mixin æ··å…¥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6"><span class="toc-number">3.6.</span> <span class="toc-text">æ’ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#nextTick"><span class="toc-number">3.7.</span> <span class="toc-text">$nextTick</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">4.</span> <span class="toc-text">Vue è„šæ‰‹æ¶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-Vue-%E9%A1%B9%E7%9B%AE"><span class="toc-number">4.1.</span> <span class="toc-text">åˆ›å»º Vue é¡¹ç›®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue-%E8%84%9A%E6%89%8B%E6%9E%B6%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="toc-number">4.2.</span> <span class="toc-text">Vue è„šæ‰‹æ¶é¡¹ç›®ç»“æ„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8D%E5%90%8C%E7%89%88%E6%9C%AC%E7%9A%84-Vue-%E4%B8%8E-render-%E5%87%BD%E6%95%B0"><span class="toc-number">4.3.</span> <span class="toc-text">ä¸åŒç‰ˆæœ¬çš„ Vue ä¸ render å‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue-config-js-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">4.4.</span> <span class="toc-text">vue.config.js é…ç½®æ–‡ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TodoList-%E6%A1%88%E4%BE%8B%E6%80%BB%E7%BB%93"><span class="toc-number">4.5.</span> <span class="toc-text">TodoList æ¡ˆä¾‹æ€»ç»“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E4%BA%9B%E7%AC%AC%E4%B8%89%E6%96%B9%E5%8C%85"><span class="toc-number">4.6.</span> <span class="toc-text">ä¸€äº›ç¬¬ä¸‰æ–¹åŒ…</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">5.</span> <span class="toc-text">Vue ç½‘ç»œè¯·æ±‚</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue-%E8%84%9A%E6%89%8B%E6%9E%B6%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86"><span class="toc-number">5.1.</span> <span class="toc-text">Vue è„šæ‰‹æ¶é…ç½®ä»£ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%8D%95%E4%B8%AA%E4%BB%A3%E7%90%86"><span class="toc-number">5.1.1.</span> <span class="toc-text">é…ç½®å•ä¸ªä»£ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%A4%9A%E4%B8%AA%E4%BB%A3%E7%90%86"><span class="toc-number">5.1.2.</span> <span class="toc-text">é…ç½®å¤šä¸ªä»£ç†</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue-2-x-%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE-axios"><span class="toc-number">5.2.</span> <span class="toc-text">vue 2.x å…¨å±€é…ç½® axios</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">6.</span> <span class="toc-text">Vuex</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">6.1.</span> <span class="toc-text">æ¦‚è¿°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vuex-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-number">6.2.</span> <span class="toc-text">Vuex æ ¸å¿ƒæ¦‚å¿µ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#state"><span class="toc-number">6.2.1.</span> <span class="toc-text">state</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#actions"><span class="toc-number">6.2.2.</span> <span class="toc-text">actions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mutations"><span class="toc-number">6.2.3.</span> <span class="toc-text">mutations</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#getters"><span class="toc-number">6.2.4.</span> <span class="toc-text">getters</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#modules"><span class="toc-number">6.2.5.</span> <span class="toc-text">modules</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA-Vuex-%E7%8E%AF%E5%A2%83"><span class="toc-number">6.3.</span> <span class="toc-text">æ­å»º Vuex ç¯å¢ƒ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8-v3"><span class="toc-number">6.4.</span> <span class="toc-text">åŸºæœ¬ä½¿ç”¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#getters-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">6.5.</span> <span class="toc-text">getters çš„ä½¿ç”¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E4%B8%AA-mapXxx-%E6%96%B9%E6%B3%95"><span class="toc-number">6.6.</span> <span class="toc-text">å››ä¸ª mapXxx æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#mapState"><span class="toc-number">6.6.1.</span> <span class="toc-text">mapState()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mapGetters"><span class="toc-number">6.6.2.</span> <span class="toc-text">mapGetters</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mapActions"><span class="toc-number">6.6.3.</span> <span class="toc-text">mapActions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mapMutations"><span class="toc-number">6.6.4.</span> <span class="toc-text">mapMutations</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vuex-%E6%A8%A1%E5%9D%97%E5%8C%96-%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4"><span class="toc-number">6.7.</span> <span class="toc-text">Vuex æ¨¡å—åŒ–&amp;å‘½åç©ºé—´</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">7.</span> <span class="toc-text">Vue Router</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1"><span class="toc-number">7.1.</span> <span class="toc-text">è·¯ç”±</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%95%E4%B8%BA%E8%B7%AF%E7%94%B1"><span class="toc-number">7.1.1.</span> <span class="toc-text">ä½•ä¸ºè·¯ç”±</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%94%B1"><span class="toc-number">7.1.2.</span> <span class="toc-text">å‰ç«¯è·¯ç”±</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8E%E7%AB%AF%E8%B7%AF%E7%94%B1"><span class="toc-number">7.1.3.</span> <span class="toc-text">åç«¯è·¯ç”±</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E9%A1%B5%E9%9D%A2%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F-SPA"><span class="toc-number">7.2.</span> <span class="toc-text">å•é¡µé¢åº”ç”¨ç¨‹åº SPA</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue-router-%E5%88%9D%E4%BD%93%E9%AA%8C"><span class="toc-number">7.3.</span> <span class="toc-text">vue-router åˆä½“éªŒ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E5%BC%8F%E5%AF%BC%E8%88%AA"><span class="toc-number">7.4.</span> <span class="toc-text">å£°æ˜å¼å¯¼èˆª</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E9%AB%98%E4%BA%AE"><span class="toc-number">7.5.</span> <span class="toc-text">è·¯ç”±é«˜äº®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">7.6.</span> <span class="toc-text">è·¯ç”±é‡å®šå‘</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B5%8C%E5%A5%97%E8%B7%AF%E7%94%B1"><span class="toc-number">7.7.</span> <span class="toc-text">åµŒå¥—è·¯ç”±</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%AF%BC%E8%88%AA"><span class="toc-number">7.8.</span> <span class="toc-text">ç¼–ç¨‹å¼å¯¼èˆª</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E5%90%8D%E8%B7%AF%E7%94%B1"><span class="toc-number">7.9.</span> <span class="toc-text">å‘½åè·¯ç”±</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E4%BC%A0%E5%8F%82"><span class="toc-number">7.10.</span> <span class="toc-text">è·¯ç”±ä¼ å‚</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#query-%E5%8F%82%E6%95%B0"><span class="toc-number">7.10.1.</span> <span class="toc-text">query å‚æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#params-%E5%8F%82%E6%95%B0%EF%BC%88%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%EF%BC%89"><span class="toc-number">7.10.2.</span> <span class="toc-text">params å‚æ•°ï¼ˆåŠ¨æ€è·¯ç”±ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%9A%84-props-%E9%85%8D%E7%BD%AE"><span class="toc-number">7.10.3.</span> <span class="toc-text">è·¯ç”±çš„ props é…ç½®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E4%BC%A0%E5%8F%82%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">7.10.4.</span> <span class="toc-text">è·¯ç”±ä¼ å‚æ³¨æ„äº‹é¡¹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%85%83%E4%BF%A1%E6%81%AF-meta"><span class="toc-number">7.11.</span> <span class="toc-text">è·¯ç”±å…ƒä¿¡æ¯ meta</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%AE%88%E5%8D%AB"><span class="toc-number">7.12.</span> <span class="toc-text">è·¯ç”±å®ˆå«</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%AE%88%E5%8D%AB"><span class="toc-number">7.12.1.</span> <span class="toc-text">å…¨å±€å®ˆå«</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8B%AC%E4%BA%AB%E8%B7%AF%E7%94%B1%E5%AE%88%E5%8D%AB"><span class="toc-number">7.12.2.</span> <span class="toc-text">ç‹¬äº«è·¯ç”±å®ˆå«</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E5%86%85%E8%B7%AF%E7%94%B1%E5%AE%88%E5%8D%AB"><span class="toc-number">7.12.3.</span> <span class="toc-text">ç»„ä»¶å†…è·¯ç”±å®ˆå«</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%84%E4%B8%AA%E5%AE%88%E5%8D%AB%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="toc-number">7.12.4.</span> <span class="toc-text">å„ä¸ªå®ˆå«æ‰§è¡Œé¡ºåº</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue-router-4-x"><span class="toc-number">7.13.</span> <span class="toc-text">vue-router 4.x</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">8.</span> <span class="toc-text">Vue3</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-Vue3-%E5%B7%A5%E7%A8%8B"><span class="toc-number">8.1.</span> <span class="toc-text">åˆ›å»º Vue3 å·¥ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#vite-%E5%92%8C-vue-cli-%E5%AF%B9%E6%AF%94"><span class="toc-number">8.1.1.</span> <span class="toc-text">vite å’Œ vue-cli å¯¹æ¯”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-vue-cli-%E5%88%9B%E5%BB%BA"><span class="toc-number">8.1.2.</span> <span class="toc-text">ä½¿ç”¨ vue-cli åˆ›å»º</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-vite-%E5%88%9B%E5%BB%BA"><span class="toc-number">8.1.3.</span> <span class="toc-text">ä½¿ç”¨ vite åˆ›å»º</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue3-%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="toc-number">8.2.</span> <span class="toc-text">Vue3 é¡¹ç›®ç»“æ„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8-Composition-API"><span class="toc-number">8.3.</span> <span class="toc-text">å¸¸ç”¨ Composition API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#setup"><span class="toc-number">8.3.1.</span> <span class="toc-text">setup</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ref-%E5%87%BD%E6%95%B0"><span class="toc-number">8.3.2.</span> <span class="toc-text">ref å‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reactive-%E5%87%BD%E6%95%B0"><span class="toc-number">8.3.3.</span> <span class="toc-text">reactive å‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ref-VS-reactive"><span class="toc-number">8.3.4.</span> <span class="toc-text">ref VS reactive</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue3-%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86"><span class="toc-number">8.3.5.</span> <span class="toc-text">Vue3 å“åº”å¼åŸç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#computed-%E5%87%BD%E6%95%B0"><span class="toc-number">8.3.6.</span> <span class="toc-text">computed å‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#watch-%E5%87%BD%E6%95%B0"><span class="toc-number">8.3.7.</span> <span class="toc-text">watch å‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#watchEffect-%E5%87%BD%E6%95%B0"><span class="toc-number">8.3.8.</span> <span class="toc-text">watchEffect å‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">8.3.9.</span> <span class="toc-text">ç”Ÿå‘½å‘¨æœŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hook-%E5%87%BD%E6%95%B0"><span class="toc-number">8.3.10.</span> <span class="toc-text">hook å‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#toRef-%E5%87%BD%E6%95%B0"><span class="toc-number">8.3.11.</span> <span class="toc-text">toRef å‡½æ•°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E5%AE%83-Composition-API"><span class="toc-number">8.4.</span> <span class="toc-text">å…¶å®ƒ Composition API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#shallowReactive-shallowRef"><span class="toc-number">8.4.1.</span> <span class="toc-text">shallowReactive &amp; shallowRef</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#readonly-shallowReadonly"><span class="toc-number">8.4.2.</span> <span class="toc-text">readonly &amp; shallowReadonly</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#toRaw-markRaw"><span class="toc-number">8.4.3.</span> <span class="toc-text">toRaw &amp; markRaw</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#customRef"><span class="toc-number">8.4.4.</span> <span class="toc-text">customRef</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#provide-inject"><span class="toc-number">8.4.5.</span> <span class="toc-text">provide &#x2F; inject</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE%E7%9A%84%E5%88%A4%E6%96%AD"><span class="toc-number">8.4.6.</span> <span class="toc-text">å“åº”å¼æ•°æ®çš„åˆ¤æ–­</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Compositon-API-%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-number">8.5.</span> <span class="toc-text">Compositon API çš„ä¼˜åŠ¿</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E7%9A%84%E7%BB%84%E4%BB%B6"><span class="toc-number">8.6.</span> <span class="toc-text">æ–°çš„ç»„ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Fragment"><span class="toc-number">8.6.1.</span> <span class="toc-text">Fragment</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Teleport"><span class="toc-number">8.6.2.</span> <span class="toc-text">Teleport</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Suspense"><span class="toc-number">8.6.3.</span> <span class="toc-text">Suspense</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E6%94%B9%E5%8F%98"><span class="toc-number">8.7.</span> <span class="toc-text">å…¶ä»–æ”¹å˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E4%B8%8A%E7%9A%84-v-model"><span class="toc-number">8.8.</span> <span class="toc-text">ç»„ä»¶ä¸Šçš„ v-model</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#EventBus"><span class="toc-number">8.9.</span> <span class="toc-text">EventBus</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue-3-x-%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE-axios"><span class="toc-number">8.10.</span> <span class="toc-text">vue 3.x å…¨å±€é…ç½® axios</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022  <i id="heartbeat" class="fa fas fa-heartbeat"></i> ç ”å‹</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div id="workboard"></div><script async="async" src="https://cdn.jsdelivr.net/gh/songzhenjin/songzhenjin@1.0/js/runtime.js"></script><div class="footer_custom_text"><p><a target="_blank" href="https://hexo.io/"><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&logo=hexo" title="åšå®¢æ¡†æ¶ä¸ºHexo"></a>&nbsp;<a target="_blank" href="https://butterfly.js.org/"><img src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&logo=bitdefender" title="ä¸»é¢˜é‡‡ç”¨butterfly"></a>&nbsp;<a target="_blank" href="https://www.jsdelivr.com/"><img src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&logo=jsDelivr" title="æœ¬ç«™ä½¿ç”¨JsDelivrä¸ºé™æ€èµ„æºæä¾›CDNåŠ é€Ÿ"></a> &nbsp;<a target="_blank" href="https://vercel.com/ "><img src="https://img.shields.io/badge/Hosted-Coding-0cedbe?style=flat&logo=Codio" title="æœ¬ç«™é‡‡ç”¨åŒçº¿éƒ¨ç½²ï¼Œè”é€šçº¿è·¯æ‰˜ç®¡äºCoding"></a>&nbsp;<a target="_blank" href="https://github.com/"><img src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&logo=GitHub" title="æœ¬ç«™é¡¹ç›®ç”±Gtihubæ‰˜ç®¡"></a>&nbsp;</p></div></div><link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="æ”¾å¤§å­—ä½“"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="ç¼©å°å­—ä½“"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç®€</button><a class="icon-V hidden" onclick="switchNightMode()" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();"><i class="fa-solid fa-arrow-left"></i></a><a class="rightMenu-item" href="javascript:window.location.reload();"><i class="fa-solid fa-arrow-rotate-right"></i></a><a class="rightMenu-item" href="javascript:window.history.forward();"><i class="fa-solid fa-arrow-right"></i></a><a class="rightMenu-item" id="menu-radompage" href="javascript:window.location.href = window.location.origin;"><i class="fa-solid fa-house"></i></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><i class="fa-solid fa-copy"></i><span>å¤åˆ¶</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:rmf.switchDarkMode();"><i class="fa-solid fa-circle-half-stroke"></i><span>æ˜¼å¤œåˆ‡æ¢</span></a><a class="rightMenu-item" href="javascript:rmf.switchReadMode();"><i class="fa-solid fa-book"></i><span>é˜…è¯»æ¨¡å¼</span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://fastly.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://fastly.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><script async="async">var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').style.transition = 'opacity 3s ease 0s'
    document.getElementById('loading-box').style.opacity = '0'
    setTimeout(function(){
      document.getElementById('loading-box').classList.add("loaded")
    }, 3000);
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').style.transition = '';
    document.getElementById('loading-box').style.opacity = '1'
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> {preloader.endLoading()})
setTimeout(function(){preloader.endLoading();}, 5000);</script><div class="js-pjax"><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    getScript('https://fastly.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(() => {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'default',
      })
      true && mermaid.init()
    })
  }
}</script><script>(()=>{
  const $countDom = document.getElementById('twikoo-count')
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo-eta-six.vercel.app/',
      region: ''
    }, null))
  }

  const getCount = () => {
    twikoo.getCommentsCount({
      envId: 'https://twikoo-eta-six.vercel.app/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      $countDom.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const loadTwikoo = (bool = false) => {
    if (typeof twikoo === 'object') {
      init()
      bool && $countDom && setTimeout(getCount,0)
    } else {
      getScript('https://fastly.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(()=> {
        init()
        bool && $countDom && setTimeout(getCount,0)
      })
    }
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo(true)
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><div class="aplayer no-destroy" data-id="5098167037" data-server="netease" data-lrc-type="0" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="false" muted></div><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script async src="/js/weather.js"></script><canvas defer id="universe"></canvas><script src="https://cdn.jsdelivr.net/gh/songzhenjin/songzhenjin@1.0/js/universe.js"></script><script async src="https://cdn.jsdelivr.net/gh/songzhenjin/songzhenjin@1.0/js/diytitle.js"></script><script src="https://cdn.jsdelivr.net/gh/songzhenjin/songzhenjin@1.0/js/sun_moon.js" async></script><script src="https://cdn.jsdelivr.net/gh/songzhenjin/songzhenjin@1.0/js/jquery-3.6.0.min.js"></script><script src="https://cdn.jsdelivr.net/gh/songzhenjin/songzhenjin@1.0/js/rightmenu.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://fastly.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://fastly.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://fastly.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})


document.addEventListener('pjax:send', function () {
  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script>
  <script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/hexo-github-calendar@1.21/hexo_githubcalendar.min.js"></script>
  <script data-pjax>
        function GithubCalendarConfig(){
            var git_githubapiurl ="https://gitcalendar.zfe.space/api?songzhenjin";
            var git_color =['#e4dfd7', '#f9f4dc', '#f7e8aa', '#f7e8aa', '#f8df72', '#fcd217', '#fcc515', '#f28e16', '#fb8b05', '#d85916', '#f43e06'];
            var git_user ="songzhenjin";
            var parent_div_git = document.getElementById('recent-posts');
            var git_div_html = '<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><div id="github_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div><div id="github_container"></div></div>';
            if(parent_div_git && location.pathname =='/'){
                console.log('å·²æŒ‚è½½github calendar')
                // parent_div_git.innerHTML=git_div_html+parent_div_git.innerHTML // æ— æŠ¥é”™ï¼Œä½†ä¸å½±å“ä½¿ç”¨(æ”¯æŒpjaxè·³è½¬)
                parent_div_git.insertAdjacentHTML("afterbegin",git_div_html) // æœ‰æŠ¥é”™ï¼Œä½†ä¸å½±å“ä½¿ç”¨(æ”¯æŒpjaxè·³è½¬)
            };
            GithubCalendar(git_githubapiurl,git_color,git_user)
        }
        if(document.getElementById('recent-posts')){
            GithubCalendarConfig()
        }
    </script>
    <style>#github_container{min-height:280px}@media screen and (max-width:650px) {#github_container{background-image:;min-height:0px}}</style>
    <style></style><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>