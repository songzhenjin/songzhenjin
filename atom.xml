<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ç ”å‹</title>
  
  <subtitle>åšä¸ªæœ‰æ¢¦æƒ³çš„äººï¼</subtitle>
  <link href="https://blog.cilicili.xyz/atom.xml" rel="self"/>
  
  <link href="https://blog.cilicili.xyz/"/>
  <updated>2022-09-27T13:24:04.086Z</updated>
  <id>https://blog.cilicili.xyz/</id>
  
  <author>
    <name>ç ”å‹</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ã€å‰ç«¯ã€‘Piniaå¿«é€Ÿå…¥é—¨ğŸ</title>
    <link href="https://blog.cilicili.xyz/posts/fc6e512f.html"/>
    <id>https://blog.cilicili.xyz/posts/fc6e512f.html</id>
    <published>2022-09-27T11:53:05.000Z</published>
    <updated>2022-09-27T13:24:04.086Z</updated>
    
    <content type="html"><![CDATA[<h1>Piniaå¿«é€Ÿå…¥é—¨</h1><h2 id="Piniaç®€ä»‹">Piniaç®€ä»‹</h2><p><a href="https://pinia.vuejs.org/">å®˜æ–¹ç½‘ç«™</a></p><blockquote><p><strong>Pinia</strong>æ˜¯Vueç”Ÿæ€é‡ŒVuexçš„ä»£æ›¿è€…ï¼Œ<strong>ä¸€ä¸ªå…¨æ–°Vueçš„çŠ¶æ€ç®¡ç†åº“</strong>ã€‚</p></blockquote><h3 id="ä¼˜ç‚¹">ä¼˜ç‚¹</h3><ul><li><code>Vue2</code>å’Œ<code>Vue3</code>éƒ½æ”¯æŒï¼Œè¿™è®©æˆ‘ä»¬åŒæ—¶ä½¿ç”¨<code>Vue2</code>å’Œ<code>Vue3</code>çš„å°ä¼™ä¼´éƒ½èƒ½å¾ˆå¿«ä¸Šæ‰‹</li><li>å’Œ Vuex å¯¹æ¯”ï¼Œå–æ¶ˆäº†<code>Mutations</code>æ“ä½œï¼Œåªæœ‰ <code>state</code> <code>getters</code> <code>actions</code> ç®€åŒ–çŠ¶æ€åº“ç®¡ç†</li><li>å®Œå…¨æ”¯æŒ <code>TypeScript</code></li><li>æ— éœ€å†åˆ›å»ºå„ä¸ªæ¨¡å—åµŒå¥—äº†ï¼Œ<code>Vuex</code>ä¸­å¦‚æœæ•°æ®è¿‡å¤šï¼Œé€šå¸¸åˆ†æ¨¡å—æ¥è¿›è¡Œç®¡ç†ï¼Œç¨æ˜¾éº»çƒ¦ï¼Œè€Œ<code>pinia</code>ä¸­æ¯ä¸ª<code>store</code>éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œäº’ç›¸ä¸å½±å“</li><li>ä½“ç§¯éå¸¸å°ï¼Œåªæœ‰<code>1KB</code>å·¦å³ã€‚</li><li><code>pinia</code>æ”¯æŒæ’ä»¶æ¥æ‰©å±•è‡ªèº«åŠŸèƒ½ã€‚</li><li>æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“</li></ul><h2 id="PiniaåŸºç¡€ä½¿ç”¨">PiniaåŸºç¡€ä½¿ç”¨</h2><h3 id="å®‰è£…Pinia">å®‰è£…Pinia</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install pinia</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåæˆ‘ä»¬éœ€è¦å°†<code>pinia</code>æŒ‚è½½åˆ°<code>Vue</code>åº”ç”¨ä¸­ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ ¹å­˜å‚¨ä¼ é€’ç»™åº”ç”¨ç¨‹åºï¼Œç®€å•æ¥è¯´å°±æ˜¯åˆ›å»ºä¸€ä¸ªå­˜å‚¨æ•°æ®çš„æ•°æ®æ¡¶ï¼Œæ”¾åˆ°åº”ç”¨ç¨‹åºä¸­å»ã€‚</p><p>ä¿®æ”¹<code>main.js</code>ï¼Œå¼•å…¥<code>pinia</code>æä¾›çš„<code>createPinia</code>æ–¹æ³•ï¼Œåˆ›å»ºæ ¹å­˜å‚¨ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.ts</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(pinia);</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºStore">åˆ›å»ºStore</h3><p>Storeå°±æ˜¯æ•°æ®ä»“åº“çš„æ„æ€ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºå…¬å…±ç»„ä»¶ã€‚åªä¸è¿‡è¯¥å…¬å…±ç»„ä»¶åªå­˜æ”¾æ•°æ®ï¼Œè¿™äº›æ•°æ®æˆ‘ä»¬å…¶å®ƒæ‰€æœ‰çš„ç»„ä»¶éƒ½èƒ½å¤Ÿè®¿é—®ä¸”å¯ä»¥ä¿®æ”¹ã€‚</p><p><strong>æ–¹æ³•</strong>ï¼š</p><ol><li><p>åœ¨é¡¹ç›®<code>src</code>ç›®å½•ä¸‹æ–°å»º<code>store</code>æ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾æ‰€æœ‰<code>store</code>ã€‚ä¾‹å¦‚åœ¨è¯¥ç›®å½•ä¸‹æ–°å»º<code>user.ts</code>æ–‡ä»¶ï¼Œç”¨æ¥å­˜æ”¾ä¸<code>user</code>ç›¸å…³çš„<code>store</code>ã€‚</p></li><li><p>ä½¿ç”¨<code>pinia</code>æä¾›çš„<code>defineStore()</code>æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ª<code>store</code>ï¼Œè¯¥<code>store</code>ç”¨æ¥å­˜æ”¾æˆ‘ä»¬éœ€è¦å…¨å±€ä½¿ç”¨çš„æ•°æ®ã€‚</p></li></ol><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// /src/store/user.ts</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åº”ç”¨ç¨‹åº store çš„å”¯ä¸€ id</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useUsersStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;users&#x27;</span>, &#123;</span><br><span class="line">  <span class="comment">// å…¶å®ƒé…ç½®é¡¹</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>åˆ›å»º<code>store</code>å¾ˆç®€å•ï¼Œè°ƒç”¨<code>pinia</code>ä¸­çš„<code>defineStore</code>å‡½æ•°å³å¯ï¼Œè¯¥å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š</p><ul><li><code>name</code>ï¼šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¿…ä¼ é¡¹ï¼Œè¯¥<code>store</code>çš„å”¯ä¸€<code>id</code>ã€‚</li><li><code>options</code>ï¼šä¸€ä¸ªå¯¹è±¡ï¼Œ<code>store</code>çš„é…ç½®é¡¹ï¼Œæ¯”å¦‚é…ç½®<code>store</code>å†…çš„æ•°æ®ï¼Œä¿®æ”¹æ•°æ®çš„æ–¹æ³•ç­‰ç­‰ã€‚</li></ul><p>æˆ‘ä»¬å¯ä»¥å®šä¹‰ä»»æ„æ•°é‡çš„<code>store</code>ï¼Œå› ä¸º<code>store</code>å°±æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚</p></blockquote><h3 id="ä½¿ç”¨Store">ä½¿ç”¨Store</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// /src/App.vue</span></span><br><span class="line"><span class="comment">// ç›´æ¥å¼•å…¥å£°æ˜çš„useUserStoreæ–¹æ³•</span></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; useUsersStore &#125; <span class="keyword">from</span> <span class="string">&quot;../src/store/user&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">useUsersStore</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(store);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong>ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/ecf518b330b54bea862fd57439f980da~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p><h3 id="æ·»åŠ State">æ·»åŠ State</h3><p>å°†æˆ‘ä»¬éœ€è¦å­˜æ”¾çš„æ•°æ®æ”¾åœ¨optionså¯¹è±¡ä¸­çš„stateå±æ€§å†…ã€‚</p><p><strong>ä»£ç </strong>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useUsersStore = <span class="title function_">defineStore</span>(<span class="string">&quot;users&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;å°çŒªè¯¾å ‚&quot;</span>,</span><br><span class="line">      <span class="attr">age</span>: <span class="number">25</span>,</span><br><span class="line">      <span class="attr">sex</span>: <span class="string">&quot;ç”·&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼Œ<code>state</code>æ¥æ”¶çš„æ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°è¿”å›çš„å€¼ï¼Œå®ƒä¸èƒ½ç›´æ¥æ¥æ”¶ä¸€ä¸ªå¯¹è±¡</p></blockquote><h3 id="æ“ä½œState">æ“ä½œState</h3><h4 id="è¯»å–Stateæ•°æ®">è¯»å–Stateæ•°æ®</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">&quot;Vue logo&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./assets/logo.png&quot;</span> /&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>å§“åï¼š&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>å¹´é¾„ï¼š&#123;&#123; age &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>æ€§åˆ«ï¼š&#123;&#123; sex &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useUsersStore &#125; from &quot;../src/store/user&quot;;</span><br><span class="line">    </span><br><span class="line">const store = useUsersStore();</span><br><span class="line">    </span><br><span class="line">const name = ref&lt;string&gt;(store.name);</span><br><span class="line">const age = ref&lt;number&gt;(store.age);</span><br><span class="line">const sex = ref&lt;string&gt;(store.sex);</span><br><span class="line">// æˆ–è€… ä½¿ç”¨ç»“æ„æ–¹æ³•</span><br><span class="line">const &#123; name, age, sex &#125; = store;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="å¤šä¸ªç»„ä»¶ä½¿ç”¨State">å¤šä¸ªç»„ä»¶ä½¿ç”¨State</h4><p>å’Œå•ç»„ä»¶ä½¿ç”¨Stateæ–¹å¼ä¸€æ ·</p><h4 id="ä¿®æ”¹Stateæ•°æ®">ä¿®æ”¹Stateæ•°æ®</h4><p>å¦‚æœæˆ‘ä»¬æƒ³è¦ä¿®æ”¹<code>Store</code>ä¸­çš„æ•°æ®ï¼Œå°±å¼•å…¥<code>pinia</code>æä¾›çš„<code>storeToRefs</code>å‡½æ•°ï¼Œå°†æ•°æ®å˜ä¸º<code>å“åº”å¼</code>ï¼Œç„¶åç›´æ¥èµ‹å€¼å°±å¯ä»¥å®ç°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">&quot;Vue logo&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./assets/logo.png&quot;</span> /&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>å§“åï¼š&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>å¹´é¾„ï¼š&#123;&#123; age &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>æ€§åˆ«ï¼š&#123;&#123; sex &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName&quot;</span>&gt;</span>æ›´æ”¹å§“å<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> child <span class="keyword">from</span> <span class="string">&#x27;./child.vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; useUsersStore &#125; <span class="keyword">from</span> <span class="string">&quot;../src/store/user&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; storeToRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span>;  <span class="comment">// æ–°æ·»åŠ </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> store = <span class="title function_">useUsersStore</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> &#123; name, age, sex &#125; = <span class="title function_">storeToRefs</span>(store); <span class="comment">// æ–°æ·»åŠ </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">changeName</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  store.<span class="property">name</span> = <span class="string">&quot;å¼ ä¸‰&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(store);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h4 id="é‡ç½®State">é‡ç½®State</h4><p>ç›´æ¥è°ƒç”¨<code>Store</code>çš„<code>$reset()</code>æ–¹æ³•å³å¯</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=<span class="string">&quot;reset&quot;</span>&gt;é‡ç½®store&lt;/button&gt;</span><br><span class="line"><span class="comment">// é‡ç½®store</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">reset</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  store.$reset();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬ç‚¹å‡»é‡ç½®æŒ‰é’®æ—¶ï¼Œ<code>store</code>ä¸­çš„æ•°æ®ä¼šå˜ä¸ºåˆå§‹çŠ¶æ€ï¼Œé¡µé¢ä¹Ÿä¼šæ›´æ–°ã€‚</p><h4 id="æ‰¹é‡æ›´æ”¹Stateä¸­çš„æ•°æ®">æ‰¹é‡æ›´æ”¹Stateä¸­çš„æ•°æ®</h4><p>ä½¿ç”¨<code>store</code>çš„<code>$patch</code>æ–¹æ³•ï¼Œæ·»åŠ ä¸€ä¸ªæ‰¹é‡æ›´æ”¹éƒ¨åˆ†æ•°æ®çš„æ–¹æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=<span class="string">&quot;patchStore&quot;</span>&gt;æ‰¹é‡ä¿®æ”¹æ•°æ®&lt;/button&gt;</span><br><span class="line"><span class="comment">// æ‰¹é‡ä¿®æ”¹æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">patchStore</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  store.$patch(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;å¼ ä¸‰&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="attr">sex</span>: <span class="string">&quot;å¥³&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>åŸç†</strong>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">store.$patch(<span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</span><br><span class="line">  state.<span class="property">items</span>.<span class="title function_">push</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;shoes&#x27;</span>, <span class="attr">quantity</span>: <span class="number">1</span> &#125;)</span><br><span class="line">  state.<span class="property">hasChanged</span> = <span class="literal">true</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="ç›´æ¥æ›¿æ¢æ•´ä¸ªState">ç›´æ¥æ›¿æ¢æ•´ä¸ªState</h4><p><code>pinia</code>æä¾›äº†æ–¹æ³•è®©æˆ‘ä»¬ç›´æ¥æ›¿æ¢æ•´ä¸ª<code>state</code>å¯¹è±¡ï¼Œä½¿ç”¨<code>store</code>çš„<code>$state</code>æ–¹æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">store.<span class="property">$state</span> = &#123; <span class="attr">counter</span>: <span class="number">666</span>, <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span> &#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¼šå°†æˆ‘ä»¬æå‰å£°æ˜çš„<code>state</code>æ›¿æ¢ä¸ºæ–°çš„å¯¹è±¡ï¼Œå¯èƒ½è¿™ç§åœºæ™¯ç”¨å¾—æ¯”è¾ƒå°‘ã€‚</p><h3 id="getterså±æ€§">getterså±æ€§</h3><p><code>getters</code>æ˜¯<code>defineStore</code>å‚æ•°é…ç½®é¡¹é‡Œé¢çš„å¦ä¸€ä¸ªå±æ€§ã€‚</p><p><code>getter</code>å±æ€§å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡é‡Œé¢æœ‰å„ç§æ–¹æ³•ã€‚æˆ‘ä»¬å¯ä»¥æŠŠ<code>getter</code>æƒ³è±¡æˆ<code>Vue</code>ä¸­çš„è®¡ç®—å±æ€§ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„ç»“æœï¼Œæ—¢ç„¶å®ƒå’Œ<code>Vue</code>ä¸­çš„è®¡ç®—å±æ€§ç±»ä¼¼ï¼Œé‚£ä¹ˆå®ƒè‚¯å®šä¹Ÿæ˜¯ä¼šè¢«ç¼“å­˜çš„ï¼Œå°±å’Œ<code>computed</code>ä¸€æ ·ã€‚</p><p>å½“ç„¶æˆ‘ä»¬è¿™é‡Œçš„<code>getter</code>å°±æ˜¯å¤„ç†<code>state</code>æ•°æ®ã€‚</p><h4 id="æ·»åŠ getter"><strong>æ·»åŠ getter</strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useUsersStore = <span class="title function_">defineStore</span>(<span class="string">&quot;users&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;å°çŒªè¯¾å ‚&quot;</span>,</span><br><span class="line">      <span class="attr">age</span>: <span class="number">25</span>,</span><br><span class="line">      <span class="attr">sex</span>: <span class="string">&quot;ç”·&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="attr">getAddAge</span>: <span class="function">(<span class="params">state</span>) =&gt;</span> &#123; </span><br><span class="line">      <span class="keyword">return</span> state.<span class="property">age</span> + <span class="number">100</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åœ¨é…ç½®é¡¹å‚æ•°ä¸­æ·»åŠ äº†<code>getter</code>å±æ€§ï¼Œè¯¥å±æ€§å¯¹è±¡ä¸­å®šä¹‰äº†ä¸€ä¸ª<code>getAddAge</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šé»˜è®¤æ¥æ”¶ä¸€ä¸ª<code>state</code>å‚æ•°ï¼Œä¹Ÿå°±æ˜¯<code>state</code>å¯¹è±¡ï¼Œç„¶åè¯¥æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„æ•°æ®ã€‚</p><h4 id="ä½¿ç”¨getter">ä½¿ç”¨getter</h4><p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹ç»„ä»¶ä¸­å¦‚ä½•ä½¿ç”¨<code>getter</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>æ–°å¹´é¾„ï¼š&#123;&#123; store.getAddAge &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  <span class="comment">/* æ–°æ·»åŠ  */</span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;patchStore&quot;</span>&gt;</span>æ‰¹é‡ä¿®æ”¹æ•°æ®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; useUsersStore &#125; <span class="keyword">from</span> <span class="string">&quot;../src/store/user&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> store = <span class="title function_">useUsersStore</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// æ‰¹é‡ä¿®æ”¹æ•°æ®</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">patchStore</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  store.$patch(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">name</span>: <span class="string">&quot;å¼ ä¸‰&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">age</span>: <span class="number">100</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">sex</span>: <span class="string">&quot;å¥³&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>ä»£ç ä¸­æˆ‘ä»¬ç›´æ¥åœ¨æ ‡ç­¾ä¸Šä½¿ç”¨äº†<code>store.gettAddAge</code>æ–¹æ³•ï¼Œè¿™æ ·å¯ä»¥ä¿è¯å“åº”å¼ã€‚</p><p>å…¶å®æˆ‘ä»¬<code>state</code>ä¸­çš„<code>name</code>ç­‰å±æ€§ä¹Ÿå¯ä»¥ä»¥æ­¤ç§æ–¹å¼ç›´æ¥åœ¨æ ‡ç­¾ä¸Šä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä¿æŒå“åº”å¼ã€‚</p><h4 id="getterä¸­è°ƒç”¨å…¶å®ƒgetter">getterä¸­è°ƒç”¨å…¶å®ƒgetter</h4><p>å‰é¢æˆ‘ä»¬çš„<code>getAddAge</code>æ–¹æ³•åªæ˜¯ç®€å•çš„ä½¿ç”¨äº†<code>state</code>æ–¹æ³•ï¼Œä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨è¿™ä¸€ä¸ª<code>getter</code>æ–¹æ³•ä¸­è°ƒç”¨å…¶å®ƒ<code>getter</code>æ–¹æ³•ï¼Œè¿™ä¸ªæ—¶å€™å¦‚ä½•è°ƒç”¨å‘¢ï¼Ÿ</p><ul><li>å…¶å®å¾ˆç®€å•ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨<code>getter</code>æ–¹æ³•ä¸­è°ƒç”¨<code>this</code>ï¼Œ<code>this</code>æŒ‡å‘çš„ä¾¿æ˜¯<code>store</code>å®ä¾‹ï¼Œæ‰€ä»¥ç†æ‰€å½“ç„¶çš„èƒ½å¤Ÿè°ƒç”¨åˆ°å…¶å®ƒ<code>getter</code>ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useUsersStore = <span class="title function_">defineStore</span>(<span class="string">&quot;users&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;å°çŒªè¯¾å ‚&quot;</span>,</span><br><span class="line">      <span class="attr">age</span>: <span class="number">25</span>,</span><br><span class="line">      <span class="attr">sex</span>: <span class="string">&quot;ç”·&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="attr">getAddAge</span>: <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> state.<span class="property">age</span> + <span class="number">100</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// æ–°æ·»åŠ æ–¹æ³• </span></span><br><span class="line">    <span class="title function_">getNameAndAge</span>(): string &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span> + <span class="variable language_">this</span>.<span class="property">getAddAge</span>; <span class="comment">// è°ƒç”¨å…¶å®ƒgetter</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ç»†å¿ƒçš„å°ä¼™ä¼´å¯èƒ½ä¼šå‘ç°æˆ‘ä»¬è¿™é‡Œæ²¡æœ‰ä½¿ç”¨ç®­å¤´å‡½æ•°çš„å½¢å¼ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨äº†<code>this</code>ï¼Œç®­å¤´å‡½æ•°çš„<code>this</code>æŒ‡å‘é—®é¢˜ç›¸ä¿¡å¤§å®¶éƒ½çŸ¥é“å§ï¼æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬æ²¡æœ‰é‡‡ç”¨ç®­å¤´å‡½æ•°çš„å½¢å¼ã€‚</p><p>é‚£ä¹ˆåœ¨ç»„ä»¶ä¸­è°ƒç”¨çš„å½¢å¼æ²¡ä»€ä¹ˆå˜åŒ–ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>è°ƒç”¨å…¶å®ƒgetterï¼š&#123;&#123; store.getNameAndAge &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="getterä¼ å‚">getterä¼ å‚</h4><p>æ—¢ç„¶<code>getter</code>å‡½æ•°åšäº†ä¸€äº›è®¡ç®—æˆ–è€…å¤„ç†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¾ˆå¯èƒ½ä¼šéœ€è¦ä¼ é€’å‚æ•°ç»™<code>getter</code>å‡½æ•°ï¼Œä½†æ˜¯æˆ‘ä»¬å‰é¢è¯´<code>getter</code>å‡½æ•°å°±ç›¸å½“äº<code>store</code>çš„è®¡ç®—å±æ€§ï¼Œå’Œ<code>vue</code>çš„è®¡ç®—å±æ€§å·®ä¸å¤šï¼Œé‚£ä¹ˆæˆ‘ä»¬éƒ½çŸ¥é“<code>Vue</code>ä¸­è®¡ç®—å±æ€§æ˜¯ä¸èƒ½ç›´æ¥ä¼ é€’å‚æ•°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œçš„<code>getter</code>å‡½æ•°å¦‚æœè¦æ¥å—å‚æ•°çš„è¯ï¼Œä¹Ÿæ˜¯éœ€è¦åšå¤„ç†çš„ã€‚</p><p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useUsersStore = <span class="title function_">defineStore</span>(<span class="string">&quot;users&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;å°çŒªè¯¾å ‚&quot;</span>,</span><br><span class="line">      <span class="attr">age</span>: <span class="number">25</span>,</span><br><span class="line">      <span class="attr">sex</span>: <span class="string">&quot;ç”·&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="attr">getAddAge</span>: <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="function">(<span class="params">num: number</span>) =&gt;</span> state.<span class="property">age</span> + num;  <span class="comment">// ä¼ å‚</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">getNameAndAge</span>(): string &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span> + <span class="variable language_">this</span>.<span class="property">getAddAge</span>; <span class="comment">// è°ƒç”¨å…¶å®ƒgetter</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šæ®µä»£ç ä¸­æˆ‘ä»¬<code>getter</code>å‡½æ•°<code>getAddAge</code>æ¥æ”¶äº†ä¸€ä¸ªå‚æ•°<code>num</code>ï¼Œè¿™ç§å†™æ³•å…¶å®æœ‰ç‚¹é—­åŒ…çš„æ¦‚å¿µåœ¨é‡Œé¢äº†ï¼Œç›¸å½“äºæˆ‘ä»¬æ•´ä½“è¿”å›äº†ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå¹¶ä¸”å°†<code>state</code>ä¼ å…¥äº†æ–°çš„å‡½æ•°ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼Œæ–¹å¼å¾ˆç®€å•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>æ–°å¹´é¾„ï¼š&#123;&#123; store.getAddAge(1100) &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="actionså±æ€§">actionså±æ€§</h3><p>å‰é¢æˆ‘ä»¬æåˆ°çš„<code>state</code>å’Œ<code>getters</code>å±æ€§éƒ½ä¸»è¦æ˜¯æ•°æ®å±‚é¢çš„ï¼Œå¹¶æ²¡æœ‰å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œå®ƒä»¬ä¸¤ä¸ªå°±å’Œæˆ‘ä»¬ç»„ä»¶ä»£ç ä¸­çš„<code>data</code>æ•°æ®å’Œ<code>computed</code>è®¡ç®—å±æ€§ä¸€æ ·ã€‚</p><p>é‚£ä¹ˆï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸šåŠ¡ä»£ç çš„è¯ï¼Œæœ€å¥½å°±æ˜¯å†™åœ¨<code>actions</code>å±æ€§é‡Œé¢ï¼Œè¯¥å±æ€§å°±å’Œæˆ‘ä»¬ç»„ä»¶ä»£ç ä¸­çš„<code>methods</code>ç›¸ä¼¼ï¼Œç”¨æ¥æ”¾ç½®ä¸€äº›å¤„ç†ä¸šåŠ¡é€»è¾‘çš„æ–¹æ³•ã€‚</p><p><code>actions</code>å±æ€§å€¼åŒæ ·æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡é‡Œé¢ä¹Ÿæ˜¯å­˜å‚¨çš„å„ç§å„æ ·çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬<strong>åŒæ­¥æ–¹æ³•</strong>å’Œ<strong>å¼‚æ­¥æ–¹æ³•</strong>ã€‚</p><h4 id="æ·»åŠ actions">æ·»åŠ actions</h4><p>æˆ‘ä»¬å¯ä»¥å°è¯•ç€æ·»åŠ ä¸€ä¸ª<code>actions</code>æ–¹æ³•ï¼Œä¿®æ”¹<code>user.ts</code>ã€‚</p><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useUsersStore = <span class="title function_">defineStore</span>(<span class="string">&quot;users&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;å°çŒªè¯¾å ‚&quot;</span>,</span><br><span class="line">      <span class="attr">age</span>: <span class="number">25</span>,</span><br><span class="line">      <span class="attr">sex</span>: <span class="string">&quot;ç”·&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="attr">getAddAge</span>: <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="function">(<span class="params">num: number</span>) =&gt;</span> state.<span class="property">age</span> + num;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">getNameAndAge</span>(): string &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span> + <span class="variable language_">this</span>.<span class="property">getAddAge</span>; <span class="comment">// è°ƒç”¨å…¶å®ƒgetter</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="title function_">saveName</span>(<span class="params">name: string</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šæ®µä»£ç ä¸­æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªéå¸¸ç®€å•çš„<code>actions</code>æ–¹æ³•ï¼Œåœ¨å®é™…åœºæ™¯ä¸­ï¼Œè¯¥æ–¹æ³•å¯ä»¥æ˜¯ä»»ä½•é€»è¾‘ï¼Œæ¯”å¦‚å‘é€è¯·æ±‚ã€å­˜å‚¨<code>token</code>ç­‰ç­‰ã€‚å¤§å®¶æŠŠ<code>actions</code>æ–¹æ³•å½“ä½œä¸€ä¸ªæ™®é€šçš„æ–¹æ³•å³å¯ï¼Œç‰¹æ®Šä¹‹å¤„åœ¨äºè¯¥æ–¹æ³•å†…éƒ¨çš„<code>this</code>æŒ‡å‘çš„æ˜¯å½“å‰<code>store</code>ã€‚</p><h4 id="ä½¿ç”¨actions">ä½¿ç”¨actions</h4><p>ä½¿ç”¨<code>actions</code>ä¸­çš„æ–¹æ³•ä¹Ÿéå¸¸ç®€å•ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨<code>App.vue</code>ä¸­æƒ³è¦è°ƒç”¨è¯¥æ–¹æ³•ã€‚</p><p><strong>ä»£ç å¦‚ä¸‹ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">saveName</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  store.<span class="title function_">saveName</span>(<span class="string">&quot;æˆ‘æ˜¯å°çŒª&quot;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ç‚¹å‡»æŒ‰é’®ï¼Œç›´æ¥è°ƒç”¨<code>store</code>ä¸­çš„<code>actions</code>æ–¹æ³•å³å¯ã€‚</p><h2 id="æ€»ç»“ç¤ºä¾‹ä»£ç ">æ€»ç»“ç¤ºä¾‹ä»£ç </h2><p><strong>main.tsä»£ç ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(pinia);</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span><br></pre></td></tr></table></figure><p><strong>user.tsä»£ç ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åº”ç”¨ç¨‹åºä¸­ store çš„å”¯ä¸€ id</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useUsersStore = <span class="title function_">defineStore</span>(<span class="string">&quot;users&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;å°çŒªè¯¾å ‚&quot;</span>,</span><br><span class="line">      <span class="attr">age</span>: <span class="number">25</span>,</span><br><span class="line">      <span class="attr">sex</span>: <span class="string">&quot;ç”·&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="attr">getAddAge</span>: <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="function">(<span class="params">num: number</span>) =&gt;</span> state.<span class="property">age</span> + num;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">getNameAndAge</span>(): string &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span> + <span class="variable language_">this</span>.<span class="property">getAddAge</span>; <span class="comment">// è°ƒç”¨å…¶å®ƒgetter</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="title function_">saveName</span>(<span class="params">name: string</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>App.vueä»£ç ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">&quot;Vue logo&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./assets/logo.png&quot;</span> /&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>å§“åï¼š&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>å¹´é¾„ï¼š&#123;&#123; age &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>æ€§åˆ«ï¼š&#123;&#123; sex &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>æ–°å¹´é¾„ï¼š&#123;&#123; store.getAddAge(1100) &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>è°ƒç”¨å…¶å®ƒgetterï¼š&#123;&#123; store.getNameAndAge &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName&quot;</span>&gt;</span>æ›´æ”¹å§“å<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;reset&quot;</span>&gt;</span>é‡ç½®store<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;patchStore&quot;</span>&gt;</span>æ‰¹é‡ä¿®æ”¹æ•°æ®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;saveName&quot;</span>&gt;</span>è°ƒç”¨aciton<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &lt;!-- å­ç»„ä»¶ --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">child</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> child <span class="keyword">from</span> <span class="string">&quot;./child.vue&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; useUsersStore &#125; <span class="keyword">from</span> <span class="string">&quot;../src/store/user&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; storeToRefs &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> store = <span class="title function_">useUsersStore</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> &#123; name, age, sex &#125; = <span class="title function_">storeToRefs</span>(store);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">changeName</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  store.<span class="property">name</span> = <span class="string">&quot;å¼ ä¸‰&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(store);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// é‡ç½®store</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">reset</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  store.$reset();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// æ‰¹é‡ä¿®æ”¹æ•°æ®</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">patchStore</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  store.$patch(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">name</span>: <span class="string">&quot;å¼ ä¸‰&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">age</span>: <span class="number">100</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">sex</span>: <span class="string">&quot;å¥³&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// è°ƒç”¨actionsæ–¹æ³•</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">saveName</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  store.<span class="title function_">saveName</span>(<span class="string">&quot;æˆ‘æ˜¯å°çŒª&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p><strong>child.vueä»£ç ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>æˆ‘æ˜¯childç»„ä»¶<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>å§“åï¼š&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>å¹´é¾„ï¼š&#123;&#123; age &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>æ€§åˆ«ï¼š&#123;&#123; sex &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName&quot;</span>&gt;</span>æ›´æ”¹å§“å<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; useUsersStore &#125; <span class="keyword">from</span> <span class="string">&quot;../src/store/user&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; storeToRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> store = <span class="title function_">useUsersStore</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> &#123; name, age, sex &#125; = <span class="title function_">storeToRefs</span>(store);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">changeName</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  store.<span class="property">name</span> = <span class="string">&quot;å°çŒªè¯¾å ‚&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“">æ€»ç»“</h2><p><code>pinia</code>çš„çŸ¥è¯†ç‚¹å¾ˆå°‘ï¼Œå¦‚æœä½ æœ‰<code>Vuex</code>åŸºç¡€ï¼Œé‚£ä¹ˆå­¦èµ·æ¥æ›´æ˜¯æ˜“å¦‚åæŒã€‚å…¶å®æˆ‘ä»¬æ›´åº”è¯¥å…³æ³¨çš„æ˜¯å®ƒçš„å‡½æ•°æ€æƒ³ï¼Œå¤§å®¶æœ‰æ²¡æœ‰å‘ç°æˆ‘ä»¬åœ¨<code>Vue3</code>ä¸­çš„æ‰€æœ‰ä¸œè¥¿ä¼¼ä¹éƒ½å¯ä»¥ç”¨ä¸€ä¸ªå‡½æ•°æ¥è¡¨ç¤ºï¼Œ<code>pinia</code>ä¹Ÿæ˜¯å»¶ç»­äº†è¿™ç§æ€æƒ³ã€‚</p><p>æ‰€ä»¥ï¼Œå¤§å®¶ç†è§£è¿™ç§ç»„åˆå¼ç¼–ç¨‹çš„æ€æƒ³æ›´é‡è¦ï¼Œ<code>pinia</code>æ— éå°±æ˜¯ä»¥ä¸‹3ä¸ªå¤§ç‚¹ï¼š</p><ul><li><code>state</code></li><li><code>getters</code></li><li><code>actions</code></li></ul><p>å½“ç„¶ï¼Œæœ¬ç¯‡æ–‡ç« åªæ˜¯è®²è§£äº†åŸºç¡€ä½¿ç”¨éƒ¨åˆ†ï¼Œä½†æ˜¯åœ¨å®é™…å·¥ä½œä¸­ä¹Ÿèƒ½æ»¡è¶³å¤§éƒ¨åˆ†éœ€æ±‚äº†ã€‚</p><hr><blockquote><p>å‚è€ƒæ–‡ç« ï¼š</p><p><a href="https://juejin.cn/post/7112691686085492767">å°çŒªè¯¾å ‚ï¼šå¤§è èï¼è¿™ä¸€æ¬¡å½»åº•ææ‡‚Piniaï¼ï¼ˆä¿å§†çº§æ•™ç¨‹ï¼‰</a></p><p><a href="https://juejin.cn/post/7121209657678364685">ä¸œæ–¹å°æœˆï¼šä¸€æ–‡è§£æPiniaå’ŒVuexï¼Œå¸¦ä½ å…¨é¢ç†è§£è¿™ä¸¤ä¸ªVueçŠ¶æ€ç®¡ç†æ¨¡å¼</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;Piniaå¿«é€Ÿå…¥é—¨&lt;/h1&gt;
&lt;h2 id=&quot;Piniaç®€ä»‹&quot;&gt;Piniaç®€ä»‹&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://pinia.vuejs.org/&quot;&gt;å®˜æ–¹ç½‘ç«™&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Pinia&lt;/strong&gt;æ˜¯V</summary>
      
    
    
    
    <category term="å‰ç«¯ğŸ’¥" scheme="https://blog.cilicili.xyz/categories/%E5%89%8D%E7%AB%AF%F0%9F%92%A5/"/>
    
    
    <category term="Vue" scheme="https://blog.cilicili.xyz/tags/Vue/"/>
    
    <category term="Pinia" scheme="https://blog.cilicili.xyz/tags/Pinia/"/>
    
  </entry>
  
  <entry>
    <title>ã€å‰ç«¯ã€‘Vue3.2å®ç°åå°ç®¡ç†ç³»ç»Ÿï¼ˆäºŒï¼‰</title>
    <link href="https://blog.cilicili.xyz/posts/a8d8a047.html"/>
    <id>https://blog.cilicili.xyz/posts/a8d8a047.html</id>
    <published>2022-09-21T01:33:07.107Z</published>
    <updated>2022-09-21T01:33:07.110Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é€€å‡ºç™»å½•åŠŸèƒ½">é€€å‡ºç™»å½•åŠŸèƒ½</h3><p>1.åœ¨<code>index.vue</code>ä¸­å®šä¹‰ä¸€ä¸ª<code>&lt;el-button&gt;</code>æŒ‰é’®ï¼Œå¹¶ä¸”ç»‘å®šä¸€ä¸ªç‚¹å‡»äº‹ä»¶<code>@click=&quot;handlelogout&quot;</code>äº‹ä»¶ï¼Œã€</p><p>2.ç„¶ååœ¨ä¸‹æ–¹å®šä¹‰ä¸€ä¸ª<code>handlelogout()</code>å‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">handlelogout</span> () &#123;</span><br><span class="line">  <span class="title function_">showModel</span>(<span class="string">&quot;æ˜¯å¦è¦é€€å‡ºç™»å½•ï¼Ÿ&quot;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;é€€å‡ºç™»å½•&quot;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3.åœ¨<code>util.js</code>ä¸­å°è£…ä¸€ä¸ª<code>æç¤ºæ¡†</code>æ–¹æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElMessageBox</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">showModel</span> (content = <span class="string">&quot;æç¤ºå†…å®¹&quot;</span>, type = <span class="string">&quot;warning&quot;</span>, title = <span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">ElMessageBox</span>.<span class="title function_">confirm</span>(</span><br><span class="line">      content,</span><br><span class="line">      title,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">confirmButtonText</span>: <span class="string">&#x27;ç¡®è®¤&#x27;</span>,</span><br><span class="line">        <span class="attr">cancelButtonText</span>: <span class="string">&#x27;å–æ¶ˆ&#x27;</span>,</span><br><span class="line">        type,</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4.<code>manager.js</code>ä¸­è°ƒç”¨<code>logout</code>æ¥å£</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">logout</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> axios.<span class="title function_">post</span>(<span class="string">&quot;/admin/logout&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>5.åœ¨<code>index.vue</code>æ–‡ä»¶å¤¹ä¸­å¼•å…¥<code>showModel</code>ï¼ˆå¼¹å‡ºæ¡†ï¼‰ä»¥åŠ<code>toast</code>ï¼ˆæç¤ºæˆåŠŸï¼‰æ–¹æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; showModel, toast &#125; <span class="keyword">from</span> <span class="string">&#x27;~/composables/util&#x27;</span></span><br></pre></td></tr></table></figure><p>6.æ·»åŠ <code>.finally</code>æ–¹æ³•ï¼Œä¸ç®¡ç”¨æˆ·æ€æ ·éƒ½æ¸…é™¤ç¼“å­˜</p><p>â‘ ç§»é™¤cookieé‡Œçš„token â‘¡æ¸…é™¤å½“å‰ç”¨æˆ·çŠ¶æ€ Vuex</p><p>å°†æ–¹æ³•å†™åˆ°<code>/store/index.js</code>ä¸­çš„<code>actions</code>ä¸­ï¼Œå’Œç™»å½•åŠŸèƒ½ä¸€æ ·é¦–å…ˆå®šä¹‰<code>logout</code>æ–¹æ³•ï¼Œç„¶ååœ¨é‡Œé¢å»è°ƒç”¨auth.jsä¸­å®šä¹‰çš„<code>removeToken</code>æ–¹æ³•ï¼Œç„¶åè¦å°†<code>vuex</code>ä¸­<code>state</code>é‡Œçš„<code>user</code>æ¸…ç©ºï¼ˆåœ¨ä½¿ç”¨<code>mutation</code>æ—¶ï¼Œè¦å…ˆè§£æ„ä¸€ä¸‹å‚æ•°é‡Œçš„<code>&#123;commit&#125;</code>ï¼Œæ•´ä½“ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€€å‡ºç™»å½•</span></span><br><span class="line">   logout (&#123; commit &#125;) &#123;</span><br><span class="line">    <span class="comment">// ç§»é™¤cookieé‡Œçš„token</span></span><br><span class="line">    <span class="title function_">removeToken</span>()</span><br><span class="line">    <span class="comment">// æ¸…é™¤å½“å‰ç”¨æˆ·çŠ¶æ€ Vuex</span></span><br><span class="line">        <span class="title function_">commit</span>(<span class="string">&quot;SET_USERINFO&quot;</span>,&#123;&#125;)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>â‘¢è·³è½¬å›ç™»å½•é¡µ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">useRouter</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·³è½¬å›ç™»å½•é¡µ</span></span><br><span class="line">router.<span class="title function_">push</span>(<span class="string">&quot;/login&quot;</span>)</span><br></pre></td></tr></table></figure><p>â‘£æç¤ºé€€å‡ºç™»å½•æˆåŠŸ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æç¤ºé€€å‡ºç™»å½•æˆåŠŸ</span></span><br><span class="line"><span class="title function_">toast</span>(<span class="string">&quot;é€€å‡ºç™»å½•æˆåŠŸ&quot;</span>)</span><br></pre></td></tr></table></figure><p>â‘¤åœ¨<code>index.vue</code>ä¸­å¼•å…¥<code>vuex</code>çš„<code>useStore</code>æ–¹æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useStore &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">useStore</span>()</span><br><span class="line"></span><br><span class="line">store.<span class="title function_">dispatch</span>(<span class="string">&quot;logout&quot;</span>)</span><br></pre></td></tr></table></figure><p>å®Œæ•´ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">handlelogout</span> () &#123;</span><br><span class="line">  <span class="title function_">showModel</span>(<span class="string">&quot;æ˜¯å¦è¦é€€å‡ºç™»å½•ï¼Ÿ&quot;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">logout</span>()</span><br><span class="line">      .<span class="title function_">finally</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// ç§»é™¤cookieé‡Œçš„token æ¸…é™¤å½“å‰ç”¨æˆ·çŠ¶æ€ Vuex</span></span><br><span class="line">        store.<span class="title function_">dispatch</span>(<span class="string">&quot;logout&quot;</span>)</span><br><span class="line">        <span class="comment">// è·³è½¬å›ç™»å½•é¡µ</span></span><br><span class="line">        router.<span class="title function_">push</span>(<span class="string">&quot;/login&quot;</span>)</span><br><span class="line">        <span class="comment">// æç¤ºé€€å‡ºç™»å½•æˆåŠŸ</span></span><br><span class="line">        <span class="title function_">toast</span>(<span class="string">&quot;é€€å‡ºç™»å½•æˆåŠŸ&quot;</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å…¨å±€loadingè¿›åº¦æ¡å®ç°">å…¨å±€loadingè¿›åº¦æ¡å®ç°</h3><p>å®‰è£…<code>npm i nprogress</code></p><p>1.åœ¨<code>composables</code>ä¸­çš„<code>util.js</code>è¿›è¡Œå°è£…</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ngrogress <span class="keyword">from</span> <span class="string">&#x27;ngrogress&#x27;</span></span><br><span class="line"><span class="comment">// æ˜¾ç¤ºå…¨å±loading</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">showFullLoading</span>(<span class="params"></span>)&#123;</span><br><span class="line">ngrogress.<span class="title function_">start</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// éšè—å…¨å±loading</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">hideFullLoading</span>(<span class="params"></span>)&#123;</span><br><span class="line">ngrogress.<span class="title function_">done</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.ç”±äºå…¨å±€éƒ½éœ€è¦ç”¨åˆ°ï¼Œå› æ­¤åˆ°<code>permission.js</code>é‡Œè¿›è¡Œè°ƒç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  showFullLoading,</span><br><span class="line">  hideFullLoading</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;~/composables/util&quot;</span></span><br><span class="line"></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="keyword">async</span> (to, <span class="keyword">from</span>, next) =&gt; &#123;</span><br><span class="line">    <span class="comment">// æ˜¾ç¤ºå…¨å±loading</span></span><br><span class="line">    <span class="title function_">showFullLoading</span>()</span><br></pre></td></tr></table></figure><p>3.æœ€ååœ¨ä¸‹æ–¹æ·»åŠ <code>å…¨å±€åç½®å®ˆå«</code>ï¼ˆè®©å®ƒåœ¨é¡µé¢åŠ è½½å®Œåæ¶ˆå¤±ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…¨å±€åç½®å®ˆå«</span></span><br><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span></span>) =&gt;</span> <span class="title function_">hideFullLoading</span>())</span><br></pre></td></tr></table></figure><h3 id="åŠ¨æ€é¡µé¢æ ‡é¢˜å®ç°">åŠ¨æ€é¡µé¢æ ‡é¢˜å®ç°</h3><p>1.é¦–å…ˆåœ¨<code>/router/index.js</code>ä¸‹æ¯ä¸€ä¸ª<code>routes</code>å¢åŠ <code>meta</code>ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Index</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123; </span><br><span class="line">      <span class="attr">title</span>:<span class="string">&quot;åå°é¦–é¡µ&quot;</span></span><br><span class="line">     &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><p>2.åœ¨å…¨å±€<code>permission.js</code>ä¸­è®¾ç½®é¡µé¢åŠ¨æ€æ ‡é¢˜</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®é¡µé¢æ ‡é¢˜</span></span><br><span class="line"><span class="keyword">let</span> title = (to.<span class="property">meta</span>.<span class="property">title</span> ? to.<span class="property">meta</span>.<span class="property">title</span> : <span class="string">&quot;&quot;</span>) + <span class="string">&quot;-ä¸­å›½ç¢³ç”Ÿäº§ç‡åå°&quot;</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">title</span> = title</span><br></pre></td></tr></table></figure><h3 id="åå°ä¸»å¸ƒå±€çš„å®ç°">åå°ä¸»å¸ƒå±€çš„å®ç°</h3><p>1.æ–°å»º<code>src/layouts/admin.vue</code>ä¸»å¸ƒå±€å’Œ<code>/layouts/components/FHeader.vue</code>å¤´éƒ¨ and <code>FMenu.vue</code>ä¾§è¾¹ and <code>FTagList.vue</code>æ ‡ç­¾å¯¼èˆªå¹¶åˆå§‹åŒ–ï¼Œå†åœ¨<code>admin.vue</code>ä¸­è¿›è¡Œå¼•å…¥ï¼Œ<code>admin.vue</code>ä»£ç å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-container&gt;</span><br><span class="line">    &lt;el-header&gt;</span><br><span class="line">      &lt;f-header&gt;&lt;/f-header&gt;</span><br><span class="line">    &lt;/el-header&gt;</span><br><span class="line">    &lt;el-container&gt;</span><br><span class="line">      &lt;el-aside&gt;</span><br><span class="line">        &lt;f-menu&gt;&lt;/f-menu&gt;</span><br><span class="line">      &lt;/el-aside&gt;</span><br><span class="line">      &lt;el-main&gt;</span><br><span class="line">        &lt;f-tag-list&gt;&lt;/f-tag-list&gt;</span><br><span class="line">        &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">      &lt;/el-main&gt;</span><br><span class="line">    &lt;/el-container&gt;</span><br><span class="line">  &lt;/el-container&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import FHeader from &#x27;./components/FHeader.vue.js&#x27;;</span><br><span class="line">import FMenu from &#x27;./components/FMenu.vue.js&#x27;;</span><br><span class="line">import FTagList from &#x27;./components/FTagList.vue.js&#x27;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>2.åœ¨<code>router/index.js</code>ä¸­å¼•å…¥<code>Admin</code>ï¼Œåå°é¦–é¡µæ›´æ”¹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">import</span> <span class="title class_">Admin</span> <span class="keyword">from</span> <span class="string">&quot;~/layouts/admin.vue&quot;</span></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Admin</span>,</span><br><span class="line">    <span class="attr">children</span>: [&#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">Index</span>,</span><br><span class="line">        <span class="attr">meta</span>: &#123; </span><br><span class="line">          <span class="attr">title</span>:<span class="string">&quot;åå°é¦–é¡µ&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><h4 id="å…¬å…±å¤´éƒ¨å¼€å‘â€”æ ·å¼å¸ƒå±€">å…¬å…±å¤´éƒ¨å¼€å‘â€”æ ·å¼å¸ƒå±€</h4><p><code>FHeader.vue</code></p><p>æ ·å¼å¸ƒå±€</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;f-header&quot;&gt;</span><br><span class="line">    &lt;span class=&quot;logo&quot;&gt;</span><br><span class="line">      &lt;el-icon class=&quot;mr-1&quot;&gt;</span><br><span class="line">        &lt;eleme-filled /&gt;</span><br><span class="line">      &lt;/el-icon&gt;</span><br><span class="line">      ç¢³ç”Ÿäº§ç‡</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">    &lt;el-icon class=&quot;icon-btn&quot;&gt;</span><br><span class="line">      &lt;fold /&gt;</span><br><span class="line">    &lt;/el-icon&gt;</span><br><span class="line">    &lt;el-icon class=&quot;icon-btn&quot;&gt;</span><br><span class="line">      &lt;refresh /&gt;</span><br><span class="line">    &lt;/el-icon&gt;</span><br><span class="line">    &lt;div class=&quot;ml-auto flex items-center&quot;&gt;</span><br><span class="line">      &lt;el-icon class=&quot;icon-btn&quot;&gt;</span><br><span class="line">        &lt;full-screen /&gt;</span><br><span class="line">      &lt;/el-icon&gt;</span><br><span class="line">      &lt;el-dropdown class=&quot;dropdown&quot;&gt;</span><br><span class="line">        &lt;span class=&quot;flex items-center text-light-50&quot;&gt;</span><br><span class="line">          &lt;el-avatar class=&quot;mr-2&quot; :size=&quot;25&quot; :src=&quot;$store.state.user.avatar&quot; /&gt;</span><br><span class="line">          &#123;&#123; $store.state.user.username &#125;&#125;</span><br><span class="line">          &lt;el-icon class=&quot;el-icon--right&quot;&gt;</span><br><span class="line">            &lt;arrow-down /&gt;</span><br><span class="line">          &lt;/el-icon&gt;</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">        &lt;template #dropdown&gt;</span><br><span class="line">          &lt;el-dropdown-menu&gt;</span><br><span class="line">            &lt;el-dropdown-item&gt;ä¿®æ”¹å¯†ç &lt;/el-dropdown-item&gt;</span><br><span class="line">            &lt;el-dropdown-item&gt;é€€å‡ºç™»å½•&lt;/el-dropdown-item&gt;</span><br><span class="line">          &lt;/el-dropdown-menu&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/el-dropdown&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">.f-header &#123;</span><br><span class="line">  @apply flex items-center bg-indigo-700 text-light-50 fixed top-0 left-0 right-0;</span><br><span class="line">  height: 64px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.logo &#123;</span><br><span class="line">  width: 250px;</span><br><span class="line">  @apply flex justify-center items-center text-xl font-thin;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.icon-btn &#123;</span><br><span class="line">  @apply flex justify-center items-center;</span><br><span class="line">  width: 42px;</span><br><span class="line">  height: 64px;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.icon-btn:hover &#123;</span><br><span class="line">  @apply bg-indigo-600;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.f-header .dropdown &#123;</span><br><span class="line">  height: 64px;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">  @apply flex justify-center items-center mx-5;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>åˆ·æ–°å’Œå…¨å±(è¯¾æ—¶26å’Œå¯è§†27)</p><h3 id="é€šç”¨å¼¹æ¡†è¡¨å•ç»„ä»¶å°è£…ï¼ˆä¸€ï¼‰">é€šç”¨å¼¹æ¡†è¡¨å•ç»„ä»¶å°è£…ï¼ˆä¸€ï¼‰</h3><p>åœ¨<code>/src/components</code>ä¸‹æ–°å»º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-drawer v-model=&quot;showDrawer&quot; title=&quot;ä¿®æ”¹å¯†ç &quot; size=&quot;45%&quot; :close-on-click-modal=&quot;false&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;formDrawer&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/el-drawer&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;;</span><br><span class="line">const showDrawer = ref(false)</span><br><span class="line">// æ‰“å¼€</span><br><span class="line">const open = () =&gt; showDrawer.value = true</span><br><span class="line"></span><br><span class="line">// å…³é—­</span><br><span class="line">const close = () =&gt; showDrawer.value = false</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><blockquote><p>æœªå®Œå¾…ç»­â€¦</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;é€€å‡ºç™»å½•åŠŸèƒ½&quot;&gt;é€€å‡ºç™»å½•åŠŸèƒ½&lt;/h3&gt;
&lt;p&gt;1.åœ¨&lt;code&gt;index.vue&lt;/code&gt;ä¸­å®šä¹‰ä¸€ä¸ª&lt;code&gt;&amp;lt;el-button&amp;gt;&lt;/code&gt;æŒ‰é’®ï¼Œå¹¶ä¸”ç»‘å®šä¸€ä¸ªç‚¹å‡»äº‹ä»¶&lt;code&gt;@click=&amp;quot;handlelogout&amp;quot</summary>
      
    
    
    
    <category term="å‰ç«¯ğŸ’¥" scheme="https://blog.cilicili.xyz/categories/%E5%89%8D%E7%AB%AF%F0%9F%92%A5/"/>
    
    
    <category term="Vue" scheme="https://blog.cilicili.xyz/tags/Vue/"/>
    
    <category term="ç³»ç»Ÿè®¾è®¡" scheme="https://blog.cilicili.xyz/tags/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/"/>
    
  </entry>
  
  <entry>
    <title>ã€å‰ç«¯ã€‘Vue3.2å®ç°åå°ç®¡ç†ç³»ç»Ÿï¼ˆä¸‰ï¼‰</title>
    <link href="https://blog.cilicili.xyz/posts/551f4be.html"/>
    <id>https://blog.cilicili.xyz/posts/551f4be.html</id>
    <published>2022-09-21T01:32:11.000Z</published>
    <updated>2022-09-27T11:56:29.497Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç»Ÿè®¡é¢æ¿ç»„ä»¶å¼€å‘">ç»Ÿè®¡é¢æ¿ç»„ä»¶å¼€å‘</h2><h3 id="éª¨æ¶å±ä¼˜åŒ–ä½“éªŒ">éª¨æ¶å±ä¼˜åŒ–ä½“éªŒ</h3><p>ä½¿ç”¨<code>element-plus</code>ä¸­çš„éª¨æ¶å±ç»„ä»¶</p><h3 id="æ•°å­—æ»šåŠ¨åŠ¨ç”»å®ç°">æ•°å­—æ»šåŠ¨åŠ¨ç”»å®ç°</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i gsap</span><br></pre></td></tr></table></figure><p>ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œå°è£…è‡³<code>/components/CountTo.vue</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &#123;&#123; d.num &#125;&#125;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; reactive &#125; from &quot;vue&quot;</span><br><span class="line">import gsap from &quot;gsap&quot;</span><br><span class="line"></span><br><span class="line">const props = defineProps(&#123;   // çˆ¶äº²ç»„ä»¶ä¼ è¿‡æ¥çš„å€¼</span><br><span class="line">    value: &#123;   // å¸Œæœ›æ»šåŠ¨åˆ°çš„ç»ˆç‚¹</span><br><span class="line">        type: Number,</span><br><span class="line">        default:0</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">const d = reactive(&#123;</span><br><span class="line">    num: 0</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">function AnimateToValue () &#123;</span><br><span class="line">    gsap.to(d, &#123;</span><br><span class="line">        duration: 0.5,</span><br><span class="line">        num: props.value</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">AnimateToValue()</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>ä¸ºäº†é˜²æ­¢<code>set up</code>æ‰§è¡Œå®Œåæ‰ä¿®æ”¹<code>value</code>çš„å€¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>watch</code>ç›‘å¬</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch(()=&gt;props.value,()=&gt;AnimateToValue())</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨çˆ¶äº²ç»„ä»¶éœ€è¦ä½¿ç”¨çš„ä½ç½®</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;text-3xl font-bold text-gray-500&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">CountTo</span> <span class="attr">:value</span>=<span class="string">&quot;item.value&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="echartså›¾è¡¨ç»„ä»¶å¼€å‘">echartså›¾è¡¨ç»„ä»¶å¼€å‘</h3><ol><li><pre><code class="language-bash">npm i echarts<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2. ```html</span><br><span class="line">    &lt;div ref=&quot;el&quot; id=&quot;chart&quot; style=&quot;width: 100%;height: 300px;&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure></code></pre></li><li><pre><code class="language-js">import * as echarts from 'echarts';// å¼•å…¥echartsimport &#123; onMounted, onBeforeUnmount &#125; from 'vue';  // å¼•å…¥ç”Ÿå‘½å‘¨æœŸè·å¾—DOMå…ƒç´ import &#123;    getStatistics3&#125; from &quot;~/api/index.js&quot;  // è°ƒç”¨æ–¹æ³•è·å–æ¥å£æ•°æ®var myChart = nullonMounted(() =&gt; &#123;   // é¡µé¢æ¸²æŸ“å®Œæˆåï¼Œå†è·å¾—ODMï¼Œè¿›è¡Œinit    var chartDom = document.getElementById('chart');    if (chartDom) &#123;        myChart = echarts.init(chartDom);        getData() // 4ä¸­å®šä¹‰çš„è·å–æ•°æ®æ–¹æ³•    &#125;&#125;)<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">4. ```js</span><br><span class="line">   function getData () &#123;</span><br><span class="line">       let option = &#123;</span><br><span class="line">           xAxis: &#123;</span><br><span class="line">               type: &#x27;category&#x27;,</span><br><span class="line">               data: []  // æ•°æ®å»æ‰</span><br><span class="line">           &#125;,</span><br><span class="line">           yAxis: &#123;</span><br><span class="line">               type: &#x27;value&#x27;</span><br><span class="line">           &#125;,</span><br><span class="line">           series: [</span><br><span class="line">               &#123;</span><br><span class="line">                   data: [],  // æ•°æ®å»æ‰</span><br><span class="line">                   type: &#x27;bar&#x27;,</span><br><span class="line">                   showBackground: true,</span><br><span class="line">                   backgroundStyle: &#123;</span><br><span class="line">                       color: &#x27;rgba(180, 180, 180, 0.2)&#x27;</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line">           ]</span><br><span class="line">       &#125;;</span><br><span class="line">       </span><br><span class="line">   myChart.showLoading()  // å¼€å¯åŠ è½½åŠ¨ç”»</span><br><span class="line">   getStatistics3(current.value).then(res =&gt; &#123;   // è¯·æ±‚æ¥å£æ•°æ®</span><br><span class="line">       option.xAxis.data = res.x  // èµ‹å€¼</span><br><span class="line">       option.series[0].data = res.y  // èµ‹å€¼</span><br><span class="line">   </span><br><span class="line">       myChart.setOption(option)  // å¼€å¯æ¸²æŸ“</span><br><span class="line">   &#125;).finally(() =&gt; &#123;</span><br><span class="line">       myChart.hideLoading()  // å…³é—­åŠ è½½åŠ¨ç”»</span><br><span class="line">   &#125;)</span><br></pre></td></tr></table></figure></code></pre></li><li><p>ä¸ºäº†é¿å…å‡ºç°ç™½å±æƒ…å†µ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; onBeforeUnmount &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">onBeforeUnmount</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (myChart) echarts.<span class="title function_">dispose</span>(myChart)  <span class="comment">// é”€æ¯ehcartså®ä¾‹</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>å›¾è¡¨è·Ÿéšé¡µé¢è§†å›¾è¿›è¡Œç­‰æ¯”ä¾‹ç¼©æ”¾ï¼Œä½¿ç”¨<code>VueUse</code>æä¾›çš„<a href="https://vueuse.org/core/useresizeobserver/#useresizeobserver">useResizeObserver</a>æ–¹æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div ref=<span class="string">&quot;el&quot;</span> id=<span class="string">&quot;chart&quot;</span> style=<span class="string">&quot;width: 100%;height: 300px;&quot;</span>&gt;&lt;<span class="regexp">/div&gt; /</span><span class="regexp">/ ç»‘å®šref</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">const el = ref(null)</span></span><br><span class="line"><span class="regexp">useResizeObserver(el, (entries) =&gt; myChart.resize())  /</span><span class="regexp">/ å†è°ƒç”¨echartsæä¾›çš„resizeæ–¹æ³•</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="v-permissionæŒ‡ä»¤æŒ‰é’®çº§æƒé™æ§åˆ¶ï¼ˆä¸€ï¼‰">v-permissionæŒ‡ä»¤æŒ‰é’®çº§æƒé™æ§åˆ¶ï¼ˆä¸€ï¼‰</h3><ol><li><p>åªæœ‰æ•°ç»„é‡Œçš„æ¥å£å’Œ<code>vuex</code>ä¸­å­˜å‚¨çš„<code>ruleNames</code>ä¸­å­˜åœ¨æ­¤æ¥å£ï¼Œæ‰å¯ä»¥ä½¿ç”¨è¯¥ç»„ä»¶ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;IndexChart v-permission=&quot;[&#x27;getStatistics3,GET&#x27;]&quot; /&gt;</span><br></pre></td></tr></table></figure></li><li><p>æ–°å»º<code>/directives/permission.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&quot;~/store&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">hasPermission</span>(<span class="params">value,el = <span class="literal">false</span></span>)&#123;   <span class="comment">// åˆ¤æ–­ruleNamesä¸­æ˜¯å¦æœ‰è¯¥æ¥å£</span></span><br><span class="line">    <span class="keyword">if</span>(!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(value))&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`éœ€è¦é…ç½®æƒé™ï¼Œä¾‹å¦‚ v-permission=&quot;[&#x27;getStatistics3,GET&#x27;]&quot;`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> hasAuth = value.<span class="title function_">findIndex</span>(<span class="function"><span class="params">v</span>=&gt;</span>store.<span class="property">state</span>.<span class="property">ruleNames</span>.<span class="title function_">includes</span>(v)) != -<span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span>(el &amp;&amp; !hasAuth)&#123;</span><br><span class="line">        el.<span class="property">parentNode</span> &amp;&amp; el.<span class="property">parentNode</span>.<span class="title function_">removeChild</span>(el)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> hasAuth</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;   <span class="comment">// è‡ªå®šä¹‰</span></span><br><span class="line">    <span class="title function_">install</span>(<span class="params">app</span>)&#123;</span><br><span class="line">        app.<span class="title function_">directive</span>(<span class="string">&quot;permission&quot;</span>,&#123;</span><br><span class="line">            <span class="title function_">mounted</span>(<span class="params">el,binding</span>)&#123;   <span class="comment">// elä¸ºå½“å‰èŠ‚ç‚¹</span></span><br><span class="line">                <span class="title function_">hasPermission</span>(binding.<span class="property">value</span>,el)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨main.jsä¸­å¼•å…¥</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> permission <span class="keyword">from</span> <span class="string">&#x27;./directives/permission.js&#x27;</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(permission)</span><br></pre></td></tr></table></figure></li></ol><h2 id="å›¾åº“æ¨¡å—å¼€å‘">å›¾åº“æ¨¡å—å¼€å‘</h2><h3 id="å¸ƒå±€å®ç°">å¸ƒå±€å®ç°</h3><ol><li><p>ä½¿ç”¨element-plusæä¾›çš„comtainerå®¹å™¨</p></li><li><p>ä¸ºäº†è®©å›¾åº“éƒ¨åˆ†å æ»¡å‰©ä½™éƒ¨åˆ†çš„ç©ºé—´</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æµè§ˆå™¨çš„é«˜åº¦ = æµè§ˆå™¨å¯è§†éƒ¨åˆ†é«˜åº¦ || domçš„height+paddingï¼Œä¸åŒ…æ‹¬æ»šåŠ¨æ¡</span></span><br><span class="line"><span class="keyword">const</span> windowHeight = <span class="variable language_">window</span>.<span class="property">innerHeight</span> || <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientHeight</span></span><br><span class="line"><span class="keyword">const</span> h = windowHeight - <span class="number">64</span> - <span class="number">44</span> - <span class="number">40</span>  <span class="comment">// 40ä¸ºpadding</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨<code>el-container</code>ä¸­ç»‘å®šåŠ¨æ€<code>style</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-container</span> <span class="attr">class</span>=<span class="string">&quot;bg-white rounded&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;&#123; height: (h + &#x27;px&#x27;) &#125;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>å±€éƒ¨æ»šåŠ¨</strong></p></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ç»Ÿè®¡é¢æ¿ç»„ä»¶å¼€å‘&quot;&gt;ç»Ÿè®¡é¢æ¿ç»„ä»¶å¼€å‘&lt;/h2&gt;
&lt;h3 id=&quot;éª¨æ¶å±ä¼˜åŒ–ä½“éªŒ&quot;&gt;éª¨æ¶å±ä¼˜åŒ–ä½“éªŒ&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨&lt;code&gt;element-plus&lt;/code&gt;ä¸­çš„éª¨æ¶å±ç»„ä»¶&lt;/p&gt;
&lt;h3 id=&quot;æ•°å­—æ»šåŠ¨åŠ¨ç”»å®ç°&quot;&gt;æ•°å­—æ»šåŠ¨åŠ¨ç”»å®ç°&lt;/h3&gt;
&lt;fig</summary>
      
    
    
    
    <category term="å‰ç«¯ğŸ’¥" scheme="https://blog.cilicili.xyz/categories/%E5%89%8D%E7%AB%AF%F0%9F%92%A5/"/>
    
    
    <category term="Vue" scheme="https://blog.cilicili.xyz/tags/Vue/"/>
    
    <category term="ç³»ç»Ÿè®¾è®¡" scheme="https://blog.cilicili.xyz/tags/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/"/>
    
  </entry>
  
  <entry>
    <title>ã€é¢è¯•ã€‘æ˜“æ··æ·†çŸ¥è¯†ç‚¹è®°å½•</title>
    <link href="https://blog.cilicili.xyz/posts/814fd644.html"/>
    <id>https://blog.cilicili.xyz/posts/814fd644.html</id>
    <published>2022-09-19T14:09:12.000Z</published>
    <updated>2022-09-23T10:56:16.357Z</updated>
    
    <content type="html"><![CDATA[<h2 id="JS-æ£€æµ‹æ•°æ®ç±»å‹çš„-4-ç§æ–¹å¼"><strong>JS æ£€æµ‹æ•°æ®ç±»å‹çš„ 4 ç§æ–¹å¼</strong></h2><ul><li>typeof</li><li>instanceof</li><li>constructor</li><li>Object.prototype.toString.call()</li></ul><h3 id="æ··æ·†ç‚¹"><strong>æ··æ·†ç‚¹</strong></h3><ol><li><p><code>typeof</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span>; <span class="comment">//&#x27;object&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;; <span class="comment">//&#x27;function&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="title class_">Symbol</span>(); <span class="comment">//&#x27;symbol&#x27;</span></span><br></pre></td></tr></table></figure><ul><li>typeof çš„è¿”å›å€¼ç±»å‹ä¸ºå­—ç¬¦ä¸²ç±»å‹</li><li>typeof åˆ¤æ–­åŸºæœ¬æ•°æ®ç±»å‹æ—¶ï¼Œé™¤äº† null çš„è¾“å‡ºç»“æœä¸ºâ€™objectâ€™ å…¶å®ƒç±»å‹éƒ½èƒ½æ­£ç¡®åˆ¤æ–­</li><li>typeof åˆ¤æ–­å¼•ç”¨æ•°æ®ç±»å‹æ—¶ï¼Œé™¤äº†åˆ¤æ–­å‡½æ•°ä¼šè¾“å‡ºâ€™functionâ€™ å…¶å®ƒéƒ½è¾“å‡ºâ€™objectâ€™</li></ul><p><strong>æ³¨æ„ç‚¹</strong>ï¼š</p><p>null çš„æ•°æ®ç±»å‹æ˜¯ object ï¼ˆnull æ˜¯å¯¹ä¸€ä¸ªç©ºå¯¹è±¡çš„å¼•ç”¨ï¼Œæ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼‰</p><ul><li>typeof å¹¶ä¸èƒ½åŒºåˆ†å¼•ç”¨æ•°æ®ç±»å‹ï¼ˆArray æ•°ç»„ã€Date æ—¶é—´ï¼‰ç­‰</li><li>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ instanceof æ¥åˆ¤æ–­å¼•ç”¨æ•°æ®ç±»å‹</li></ul><p>symbol()çš„æ³¨æ„ç‚¹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> symbol1 = <span class="title class_">Symbol</span>();</span><br><span class="line"><span class="keyword">const</span> symbol2 = <span class="title class_">Symbol</span>(<span class="number">42</span>);</span><br><span class="line"><span class="keyword">const</span> symbol3 = <span class="title class_">Symbol</span>(<span class="string">&#x27;foo&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> symbol1);</span><br><span class="line"><span class="comment">// expected output: &quot;symbol&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(symbol2 === <span class="number">42</span>);</span><br><span class="line"><span class="comment">// expected output: false</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(symbol3.<span class="title function_">toString</span>());</span><br><span class="line"><span class="comment">// expected output: &quot;Symbol(foo)&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Symbol</span>(<span class="string">&#x27;foo&#x27;</span>));</span><br><span class="line"><span class="comment">// expected output: false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> a = <span class="title class_">Symbol</span>(<span class="string">&#x27;foo&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a === a);</span><br><span class="line"><span class="comment">// expected output: true</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Symbol</span>(<span class="string">&#x27;foo&#x27;</span>) === <span class="title class_">Symbol</span>(<span class="string">&#x27;foo&#x27;</span>));</span><br><span class="line"><span class="comment">// expected output: false</span></span><br></pre></td></tr></table></figure></li><li><p>instanceof</p><p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">obj1 <span class="keyword">instanceof</span> obj2; <span class="comment">// åˆ¤æ–­obj1æ˜¯å¦ä¸ºobj2çš„å®ä¾‹</span></span><br></pre></td></tr></table></figure><ul><li>instanceof ç”¨æ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦å±äºå®ä¾‹å…³ç³»ï¼Œé€šè¿‡è¿™ç§å…³ç³»æ¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦å±äºæŸä¸€ç±»å‹ã€‚ï¼ˆä½†ä¸èƒ½åˆ¤æ–­å¯¹è±¡å…·ä½“å±äºå“ªç§ç±»å‹ï¼‰ã€‚</li><li>instanceof å¯ä»¥å‡†ç¡®åˆ¤æ–­å¼•ç”¨æ•°æ®ç±»å‹ï¼Œ<strong>åŸç†</strong>ï¼šæ£€æµ‹æ„é€ å‡½æ•°çš„ prototype å±æ€§æ˜¯å¦åœ¨æŸä¸ªå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Šã€‚</li><li>instanceof è¿”å›å€¼ä¸ºå¸ƒå°”å€¼</li></ul></li><li><p>constructor</p><p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;</span>.<span class="property">constructor</span> === <span class="title class_">String</span>; <span class="comment">// true</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">1</span>;</span><br><span class="line">num.<span class="property">constructor</span> === <span class="title class_">Number</span>; <span class="comment">// true</span></span><br><span class="line"><span class="literal">true</span>.<span class="property">constructor</span> === <span class="title class_">Boolean</span>; <span class="comment">// true</span></span><br><span class="line">[].<span class="property">constructor</span> === <span class="title class_">Array</span>; <span class="comment">// true</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">obj.<span class="property">constructor</span> === <span class="title class_">Object</span>; <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>å½“ä¸€ä¸ªå‡½æ•° F è¢«å®šä¹‰æ—¶ï¼ŒJS å¼•æ“ä¼šä¸º F æ·»åŠ  prototype åŸå‹ï¼Œç„¶ååœ¨ prototype ä¸Šæ·»åŠ äº†ä¸€ä¸ª constructor å±æ€§ï¼Œå¹¶è®©å…¶æŒ‡å‘ F çš„å¼•ç”¨</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">F</span>(<span class="params"></span>) &#123;&#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> f = <span class="keyword">new</span> <span class="title function_">F</span>(); <span class="comment">// å®ä¾‹</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(F.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span>); <span class="comment">// function F()&#123;&#125;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(F.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> === F); <span class="comment">// æ„é€ å™¨æŒ‡å‘F</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(f.<span class="property">constructor</span> === F);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å½“æ‰§è¡Œ const f = new F() æ—¶ï¼ŒF è¢«å½“æˆäº†æ„é€ å‡½æ•°ï¼Œf æ˜¯ F çš„å®ä¾‹å¯¹è±¡ï¼Œæ­¤æ—¶ F åŸå‹ä¸Šçš„ constructor ä¼ é€’åˆ°äº† f ä¸Šï¼Œå› æ­¤<code>f.__proto__.constructor===F</code>ç®€å†™æˆ<code>f.constructor === F</code></p><p>ä»ä¸Šé¢çš„æ•´ä¸ªè¿‡ç¨‹æ¥çœ‹ï¼Œæ„é€ å‡½æ•° F å°±æ˜¯æ–°å¯¹è±¡ fï¼ˆå®ä¾‹ï¼‰çš„ç±»å‹ã€‚æ‰€ä»¥å¦‚æœæŸä¸ªå®ä¾‹çš„ constructor æŒ‡å‘æŸä¸ªæ„é€ å‡½æ•°ï¼Œé‚£è¿™ä¸ªæ„é€ å‡½æ•°å°±æ˜¯è¿™ä¸ªå®ä¾‹çš„ç±»å‹ã€‚</p><p><strong>æ³¨æ„</strong>ï¼š</p><blockquote><ul><li>constructor æ˜¯ä¸ç¨³å®šçš„ï¼Œå› ä¸ºå¼€å‘è€…å¯ä»¥é‡å†™ prototype,é‡å†™åï¼ŒåŸæœ‰çš„ constructor å¼•ç”¨ä¼šä¸¢å¤±ï¼Œéœ€è¦æˆ‘ä»¬é‡æ–°æŒ‡å®š constructor çš„å¼•ç”¨</li><li>åœ¨æ²¡æœ‰é‡æ–°æŒ‡å®šæ—¶ï¼Œconstructor ä¼šé»˜è®¤ä¸º Object</li></ul></blockquote><p><strong>ä¸ºä»€ä¹ˆé‡å†™ prototype åï¼Œconstructor çš„é»˜è®¤å€¼ä¼šä¸º Object å‘¢ï¼Ÿ</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">F</span>(<span class="params"></span>) &#123;&#125;</span></span><br><span class="line"><span class="language-javascript">  F.<span class="property"><span class="keyword">prototype</span></span> = &#123;&#125;;</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(F.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// ç»“æœä¸º Object() &#123; [native code] &#125;</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å½“ <code>F.prototype=&#123; &#125;</code>æ—¶ï¼Œ<code>&#123; &#125;</code>æ˜¯ <code>new Object</code> çš„å­—é¢é‡ï¼ˆObject çš„å®ä¾‹ï¼‰ï¼Œæ‰€ä»¥ Object åŸå‹ä¸Šçš„ constructor ä¼šè¢«ä¼ é€’ç»™{ }ï¼ŒObject çš„ constructor æŒ‡å‘çš„å°±æ˜¯ Object æœ¬èº«ã€‚</p></li><li><p>Object.prototype.toString.call()</p><p>è¯¦ç»†è§£è¯»</p><p><code>toString()</code>æ˜¯ Object çš„åŸå‹æ–¹æ³•ï¼Œè°ƒç”¨è¯¥æ–¹æ³•ï¼Œé»˜è®¤è¿”å›å½“å‰å¯¹è±¡çš„ <code>[object type]</code>ã€‚å…¶ä¸­ type å°±æ˜¯å¯¹è±¡çš„ç±»å‹ã€‚</p><ul><li><code>Object</code>å¯¹è±¡ï¼Œç›´æ¥è°ƒç”¨<code>toString()</code> å°±èƒ½è¿”å› [object Object]</li><li>å…¶ä»–å¯¹è±¡ï¼Œåˆ™éœ€è¦é€šè¿‡ call / apply æ¥è°ƒç”¨æ‰èƒ½è¿”å›æ­£ç¡®çš„ç±»å‹ä¿¡æ¯</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(<span class="string">&quot;&quot;</span>); <span class="comment">// [object String]</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(<span class="number">1</span>); <span class="comment">// [object Number]</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(<span class="literal">true</span>); <span class="comment">// [object Boolean]</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(<span class="title class_">Symbol</span>()); <span class="comment">// [object Symbol]</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(<span class="literal">undefined</span>); <span class="comment">// [object Undefined]</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(<span class="keyword">new</span> <span class="title class_">Function</span>()); <span class="comment">// [object Function]</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(<span class="keyword">new</span> <span class="title class_">Date</span>()); <span class="comment">// [object Date]</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>([]); <span class="comment">// [object Array]</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(&#123;&#125;); <span class="comment">// [object Object]</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(<span class="variable language_">document</span>); <span class="comment">// [object HTMLDocument]</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(<span class="variable language_">window</span>); <span class="comment">// [object Window]</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="null-å’Œ-undefined-çš„åŒºåˆ«-ï¼Ÿ">null å’Œ undefined çš„åŒºåˆ« ï¼Ÿ</h3><ul><li><p><strong>undefinedï¼ˆæœªå®šä¹‰ï¼‰</strong>ï¼šå½“ä¸€ä¸ªå˜é‡è¢«å®šä¹‰ï¼ˆå£°æ˜ï¼‰ä½†å¹¶æ²¡æœ‰èµ‹å€¼æ—¶ï¼Œä»–çš„åˆå§‹å€¼å°±æ˜¯ undefinedã€‚</p></li><li><p><strong>nullï¼ˆç©ºï¼‰</strong></p><p>ï¼šè¡¨ç¤ºå¯¹ä¸€ä¸ªç©ºå¯¹è±¡çš„å¼•ç”¨ã€‚</p><ul><li>å½“ä¸€ä¸ªå˜é‡å®šå¥½ä¹‹åï¼Œæœªæ¥æ˜¯ç”¨æ¥ä¿å­˜å¯¹è±¡çš„å¼•ç”¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ä»–èµ‹åˆå§‹å€¼ä¸º nullã€‚</li><li>å½“ä¸€ä¸ªå¯¹è±¡ä½¿ç”¨å®Œï¼Œéœ€è¦å¯¹å…¶è¿›è¡Œé‡Šæ”¾å†…å­˜æ—¶ï¼Œå¯ä»¥å°†å…¶å€¼è®¾ç½® null ï¼ˆjs ä¼šè‡ªåŠ¨åƒåœ¾å›æ”¶ï¼‰</li></ul></li></ul><p><strong>ç›¸åŒç‚¹</strong>ï¼š</p><ul><li>undefined å’Œ null éƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¿å­˜æ ˆä¸­ã€‚</li><li>undefined å’Œ null è½¬æ¢ä¸º boolean å¸ƒå°”å€¼éƒ½ä¸º false</li></ul><p><strong>ä¸åŒç‚¹</strong>:</p><p>ä¸¤è€…è½¬æ¢ä¸ºæ•°å­—ç±»å‹æ—¶ï¼Œå…¶å€¼ä¸ä¸€æ ·</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Number</span>(<span class="literal">undefined</span>); <span class="comment">//NaN</span></span><br><span class="line"><span class="title class_">Number</span>(<span class="literal">null</span>); <span class="comment">//0</span></span><br></pre></td></tr></table></figure><p><strong>ç‰¹æ®Šç‚¹</strong>:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">undefined</span> == <span class="literal">null</span>; <span class="comment">//true</span></span><br></pre></td></tr></table></figure><h3 id="åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹çš„åŒºåˆ«ï¼Ÿ">åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹çš„åŒºåˆ«ï¼Ÿ</h3><table><thead><tr><th style="text-align:left">æ¯”è¾ƒ</th><th style="text-align:left">åŸºæœ¬æ•°æ®ç±»å‹</th><th style="text-align:left">å¼•ç”¨æ•°æ®ç±»å‹</th></tr></thead><tbody><tr><td style="text-align:left">æ•°æ®å­˜æ”¾ä½ç½®</td><td style="text-align:left">åŸºæœ¬æ•°æ®ç±»å‹å­˜æ”¾åœ¨<strong>æ ˆ</strong>ä¸­ï¼Œæ•°æ®å¤§å°ç¡®å®šï¼Œå†…å­˜ç©ºé—´å¤§å°å¯ä»¥åˆ†é…</td><td style="text-align:left">å¼•ç”¨æ•°æ®ç±»å‹å­˜æ”¾åœ¨<strong>å †</strong>ä¸­ï¼Œæ¯ä¸ªç©ºé—´å¤§å°ä¸ä¸€æ ·ï¼Œè¦æ ¹æ®æƒ…å†µè¿›è¡Œç‰¹å®šçš„é…ç½®</td></tr><tr><td style="text-align:left">å˜é‡å­˜å‚¨å†…å®¹</td><td style="text-align:left">å˜é‡ä¸­å­˜å‚¨çš„æ˜¯<strong>å€¼æœ¬èº«</strong></td><td style="text-align:left">å˜é‡å­˜å‚¨çš„æ˜¯<strong>åœ°å€</strong></td></tr><tr><td style="text-align:left">å˜é‡ç”¨æ¥èµ‹å€¼æ—¶</td><td style="text-align:left">æŠŠå˜é‡çš„<strong>å€¼</strong>å¤åˆ¶ä¸€ä»½å»èµ‹å€¼</td><td style="text-align:left">æŠŠå˜é‡çš„<strong>å†…å­˜åœ°å€</strong>å¤åˆ¶ä¸€ä»½å»èµ‹å€¼</td></tr><tr><td style="text-align:left">å­˜å‚¨å†…å®¹å¤§å°</td><td style="text-align:left">å­˜å‚¨<strong>å€¼è¾ƒå°</strong></td><td style="text-align:left">å­˜å‚¨<strong>å€¼è¾ƒå¤§</strong></td></tr></tbody></table><h3 id="typeof-NaN-è¿”å›ç»“æœï¼Ÿ">typeof(NaN)è¿”å›ç»“æœï¼Ÿ</h3><ul><li>NaN ä¸æ˜¯æ•°å­—çš„æ•°å­—ç±»å‹ï¼Œæ‰€ä»¥ <code>typeof(NaN)</code> è¿”å›ç»“æœå°±æ˜¯ number</li><li>NaN === NaN ç»“æœä¸º falseï¼Œä»–è‡ªå·±å’Œä»–è‡ªå·±éƒ½ä¸ç›¸ç­‰</li><li>å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå˜é‡çš„å€¼æ˜¯ NaN ?</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">&quot;æˆ‘&quot;</span> - <span class="string">&quot;ä½ &quot;</span>;</span><br><span class="line"><span class="built_in">isNaN</span>(a) &amp;&amp; <span class="keyword">typeof</span> a === <span class="string">&quot;number&quot;</span>;</span><br></pre></td></tr></table></figure><h3 id="ä»¥ä¸‹ä¸¤ç§æ–¹å¼çš„åŒºåˆ«ï¼ŸåŠ-typeof-å¾—åˆ°çš„ç»“æœ">ä»¥ä¸‹ä¸¤ç§æ–¹å¼çš„åŒºåˆ«ï¼ŸåŠ typeof å¾—åˆ°çš„ç»“æœ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str1 = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> str2 = <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;abc&quot;</span>);</span><br></pre></td></tr></table></figure><p><strong>str1 æ˜¯åŸºæœ¬æ•°æ®ç±»å‹</strong></p><ul><li>å­˜å‚¨åœ¨åœ¨æ ˆå†…å­˜ä¸­ï¼Œç”¨ typeof æ£€æµ‹çš„ç»“æœä¸º stringã€‚</li><li>å½“æˆ‘ä»¬æŠŠ str1 èµ‹å€¼ç»™åˆ«ä¸€ä¸ªå˜é‡æ—¶ï¼Œæ˜¯æŠŠ str1 ä¸­çš„å€¼å¤åˆ¶ä¸€ä»½æ¥èµ‹å€¼ã€‚</li></ul><p><strong>str2 æ˜¯å¼•ç”¨æ•°æ®ç±»å‹</strong></p><ul><li>å­˜å‚¨åœ¨å †å†…å­˜ä¸­ï¼Œä¸è¿‡å˜é‡ str2 ä¸­å­˜çš„æ˜¯æŒ‡å‘å †å†…å­˜ä¸­çš„åœ°å€ï¼Œç”¨ typeof æ£€æµ‹ str2 ç»“æœä¸º Objectã€‚</li><li>å½“æˆ‘ä»¬æŠŠ str2 èµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡æ—¶ï¼Œæ˜¯æŠŠ str2 ä¸­å­˜å…¥çš„åœ°å€å¤åˆ¶ä¸€åˆ†ç»™åˆ°äº†å˜é‡ã€‚</li></ul><h3 id="typeof-èƒ½åˆ¤æ–­é‚£äº›ç±»å‹-ï¼Ÿ">typeof èƒ½åˆ¤æ–­é‚£äº›ç±»å‹ ï¼Ÿ</h3><p>typeof èƒ½åˆ¤æ–­çš„ç±»å‹æœ‰ï¼šstringã€numberã€booleanã€undefinedã€symbolã€function</p><ul><li>typeof åˆ¤æ–­åŸºæœ¬æ•°æ®ç±»å‹æ—¶ï¼Œé™¤äº† null çš„è¾“å‡ºç»“æœä¸ºâ€™objectâ€™ å…¶å®ƒç±»å‹éƒ½èƒ½æ­£ç¡®åˆ¤æ–­</li><li>typeof åˆ¤æ–­å¼•ç”¨æ•°æ®ç±»å‹æ—¶ï¼Œé™¤äº†åˆ¤æ–­å‡½æ•°ä¼šè¾“å‡ºâ€™functionâ€™ å…¶å®ƒéƒ½è¾“å‡ºâ€™objectâ€™</li></ul><h3 id="typeof-null-ä¸ºä»€ä¹ˆè¿”å›çš„æ˜¯â€™objectâ€™">typeof(null) ä¸ºä»€ä¹ˆè¿”å›çš„æ˜¯â€™objectâ€™ ?</h3><ul><li><code>typeof(null) = object</code> æ˜¯ JS åœ¨è¯ç”Ÿè®¾è®¡ä¹‹åˆç•™ä¸‹çš„å†å²é—ç•™ BUG é—®é¢˜</li><li>åœ¨ JS ä¸­è¿›è¡Œæ•°æ®åº•å±‚å­˜å‚¨çš„æ—¶å€™æ˜¯ç”¨äºŒè¿›åˆ¶å­˜å‚¨çš„ï¼Œè¿™æ˜¯ä¸€å®šçš„ï¼Œè€Œä¸”å®ƒçš„å‰ä¸‰ä½æ˜¯ä»£è¡¨å­˜å‚¨çš„æ•°æ®ç±»å‹ï¼Œè€Œ 000 æ˜¯ä»£è¡¨ object ç±»å‹ä¹Ÿå°±æ˜¯å¼•ç”¨ç±»å‹çš„æ•°æ®ã€‚</li><li>è€Œ null æ­£å¥½å…¨æ˜¯ 0ï¼Œæ‰€ä»¥å®ƒå·§å¦™çš„ç¬¦åˆ object ç±»å‹çš„å­˜å‚¨æ ¼å¼ï¼Œæ‰€ä»¥åœ¨ typeof æ£€æµ‹çš„æ—¶å€™ï¼Œå®ƒæ‰ä¼šè¾“å‡º objectã€‚</li></ul><h3 id="å’Œ-çš„åŒºåˆ«-ï¼Ÿ">== å’Œ === çš„åŒºåˆ« ï¼Ÿ</h3><p>== åœ¨æ¯”è¾ƒç±»å‹ä¸åŒçš„å˜é‡æ—¶ï¼Œå¦‚æœä¸¤ä¾§çš„æ•°æ®ç±»å‹ä¸åŒï¼Œåˆ™ä¼šæŒ‰ä»¥ä¸‹è§„åˆ™è¿›è¡Œç›¸åº”çš„éšå¼ç±»å‹ç±»å‹è½¬æ¢</p><ul><li>å¯¹è±¡ --&gt; å­—ç¬¦ä¸² --&gt; æ•°å€¼</li><li>å¸ƒå°”å€¼ --&gt; æ•°å€¼</li></ul><blockquote><p>è½¬æ¢åï¼Œå†æ¯”è¾ƒä¸¤è¾¹çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå€¼ç›¸ç­‰è¿”å› trueï¼Œä¸ç­‰è¿”å› false;</p></blockquote><p>=== åœ¨æ¯”è¾ƒæ—¶ï¼Œä¼šæ¯”è¾ƒå€¼å’Œç±»å‹ä¸¤ä¸ªã€‚åªè¦ä¸¤è¾¹å€¼çš„ç±»å‹ä¸ç›¸ç­‰å°±è¿”å› false</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">var</span> y = <span class="string">&quot;2&quot;</span>;</span><br><span class="line">(x == y)(</span><br><span class="line">  <span class="comment">// è¿”å› trueï¼Œå› ä¸º x å’Œ y çš„å€¼ç›¸åŒ</span></span><br><span class="line">  x === y</span><br><span class="line">);</span><br><span class="line"><span class="comment">// è¿”å› falseï¼Œå› ä¸º x çš„ç±»å‹æ˜¯â€œæ•°å­—â€ï¼Œy çš„ç±»å‹æ˜¯â€œå­—ç¬¦ä¸²â€</span></span><br></pre></td></tr></table></figure><p><strong>ä¸è¿‡è¦æ³¨æ„ä»¥ä¸‹å‡ ä¸ªç‰¹æ®Šæƒ…å†µçš„æ¯”è¾ƒ</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">NaN</span> === <span class="title class_">NaN</span>; <span class="comment">// false NaNå’Œä»»ä½•æ•°æ®éƒ½ä¸ç›¸ç­‰ï¼ŒåŒ…æ‹¬è‡ªèº«</span></span><br><span class="line">[] == []; <span class="comment">// false æ¯”è¾ƒçš„æ˜¯åœ°å€</span></span><br><span class="line">&#123;&#125; == &#123;&#125;; <span class="comment">// false æ¯”è¾ƒçš„æ˜¯åœ°å€</span></span><br><span class="line"><span class="literal">undefined</span> == <span class="literal">null</span>; <span class="comment">// true; ç‰¹æ®Šæƒ…å†µï¼Œè®°ä¸‹</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>å¯¹è±¡è½¬å­—ç¬¦ä¸²ï¼Œå¾—åˆ°çš„æ˜¯â€™[object Object]â€™</strong></p></blockquote><p><strong>è€ƒé¢˜ 1ï¼šä»¥ä¸‹è¾“å‡ºç»“æœ</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>([] == <span class="literal">false</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><blockquote><ul><li>[] è½¬æ¢æˆå­—ç¬¦ä¸²æ˜¯â€™â€™ ï¼Œç„¶åâ€™â€™ è½¬æ¢æˆæ•°å€¼æ˜¯ 0</li><li>false è½¬æ¢æˆæ•°å€¼æ˜¯ 0 æ‰€ä»¥æœ€åæ¯”è¾ƒçš„å€¼æ˜¯ 0==0 ï¼Œç»“æœä¸º true</li></ul></blockquote><p><strong>è€ƒé¢˜ 2ï¼šä»¥ä¸‹è¾“å‡ºç»“æœ</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ([]) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&quot;èƒ½å¼¹å‡ºå—ï¼Ÿ&quot;</span>); <span class="comment">// å¯ä»¥å¼¹å‡ºå¼¹çª—</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><ul><li>if è¯­å¥ä¸­çš„è¡¨è¾¾å¼æˆ–å€¼éƒ½ä¼šè¢«è½¬æˆ boolean</li><li>[] è½¬æˆå¸ƒå°”å€¼æ˜¯ trueï¼Œæ‰€ä»¥å¯ä»¥å¼¹å‡ºã€‚</li></ul></blockquote><h3 id="ä»€ä¹ˆæ˜¯å˜é‡æå‡-ï¼Ÿ">ä»€ä¹ˆæ˜¯å˜é‡æå‡ ï¼Ÿ</h3><p>æ˜¯æŒ‡ä½¿ç”¨ var å…³é”®å­—å£°æ˜çš„å˜é‡ä¼šè‡ªåŠ¨æå‡åˆ°å½“å‰ä½œç”¨åŸŸçš„æœ€å‰é¢ã€‚ä¸è¿‡<strong>åªä¼šæå‡å£°æ˜ï¼Œä¸ä¼šæå‡å…¶åˆå§‹åŒ–</strong>ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// undefined</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> a = <span class="number">10</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">// undefined</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> b = <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">fn</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>å˜é‡åªæœ‰è¢«å£°æ˜åï¼Œæ‰èƒ½ä½¿ç”¨</strong></p><ul><li>æˆ‘ä»¬åœ¨ var a=10; ä¹‹å‰ console.log(a); ä¹‹æ‰€ä»¥ä¸ä¼šæŠ¥é”™ï¼Œå°±æ˜¯å› ä¸ºå˜ a çš„å£°æ˜è¢«æå‰åˆ°äº†å½“å‰ä½œç”¨åŸŸçš„æœ€é¡¶éƒ¨</li><li>ä¸è¿‡åªæå‡äº†å£°æ˜ï¼Œå¹¶æ²¡ä¼šæå‡åˆå§‹åŒ–ï¼Œæ‰€ä»¥æ‰“å°ç»“æœä¸º undefined; ï¼ˆå˜é‡å£°æ˜åˆå§‹åŒ–ï¼Œå…¶é»˜è®¤å€¼æ˜¯ undefinedï¼‰</li></ul><p>ä¸Šé¢ä»£ç å¯ä»¥çœ‹æˆå¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> a;</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// undefined</span></span></span><br><span class="line"><span class="language-javascript">  a = <span class="number">10</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> b;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">// undefined</span></span></span><br><span class="line"><span class="language-javascript">    b = <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">fn</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>è¡¥å……</strong>ï¼š</p><ul><li>å‡½æ•°å£°æ˜ä¹Ÿä¼šè¢«æå‡ï¼Œå‡½æ•°å’Œå˜é‡ç›¸æ¯”ï¼Œä¼šè¢«ä¼˜å…ˆæå‡ã€‚</li><li>è¿™æ„å‘³ç€å‡½æ•°ä¼šè¢«æå‡åˆ°æ›´é å‰çš„ä½ç½®ï¼Œå¦‚æœå‡ºç°äº†é‡åçš„å˜é‡å’Œå‡½æ•°ï¼Œå£°æ˜æå‡æ—¶ä¼šä»¥å‡½æ•°ä¸ºä¸»ã€‚</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(num); <span class="comment">// function num()&#123;console.log(&#x27;å‡½æ•°&#x27;);&#125;  å‡½æ•°è¢«ä¼˜å…ˆæå‡</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> num = <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(num); <span class="comment">// 1 åœ¨ä»ä¸Šå¾€ä¸‹æ‰§è¡Œæ—¶numå˜é‡èµ‹å€¼ä¸º 1</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">num</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å‡½æ•°&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">num</span>()); <span class="comment">// æŠ¥é”™ï¼Œå› ä¸ºå˜é‡numè¢«é‡æ–°èµ‹å€¼ä¸º1ï¼Œä¸ä¼šå†æœ‰å‡½æ•°äº†</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="constã€letã€var-åŒºåˆ«">constã€letã€var åŒºåˆ«</h3><p>constã€letã€var ä¸‰è€…çš„åŒºåˆ«ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä»¥ä¸‹ 5 ä¸ªç‚¹æ¥å±•å¼€å¯¹æ¯”</p><ul><li><strong>å˜é‡æå‡å’Œæš‚æ—¶æ€§æ­»åŒº</strong>ï¼š var å­˜åœ¨å˜é‡æå‡ï¼Œlet å’Œ const ä¸å­˜åœ¨å˜é‡æå‡ï¼Œæ‰€ä»¥ let å’Œ const ä¼šå­˜åœ¨æš‚æ—¶æ€§æ­»åŒº</li><li><strong>å—çº§ä½œç”¨åŸŸ</strong>ï¼š var ä¸å­˜åœ¨å—çº§ä½œç”¨åŸŸï¼Œlet å’Œ const å­˜åœ¨å—çº§ä½œç”¨åŸŸ</li><li><strong>é‡å¤å£°æ˜</strong>ï¼š var å…è®¸é‡å¤å£°æ˜å˜é‡ï¼Œlet å’Œ const åœ¨åŒä¸€ä½œç”¨åŸŸä¸‹ä¸å…è®¸é‡å¤å£°æ˜å˜é‡</li><li><strong>ä¿®æ”¹å˜é‡</strong>ï¼š var å’Œ let å£°æ˜çš„å˜é‡å¯ä»¥ä¿®æ”¹ï¼Œconst æ˜¯ä¸å¯ä»¥çš„ã€‚</li><li><strong>ä½¿ç”¨</strong>ï¼šconst ç”¨æ¥å£°æ˜å¸¸é‡ï¼Œå¼•ç”¨ç±»å‹å€¼ã€‚å…¶å®ƒæƒ…å†µæ¨èç”¨ let ï¼Œé¿å…ç”¨ var</li></ul><p><strong>â‘  å˜é‡æå‡</strong></p><p>è¯¦ç»†è§£è¯»</p><ul><li>var å£°æ˜çš„å˜é‡å­˜åœ¨å˜é‡æå‡ï¼Œå³å˜é‡å¯ä»¥åœ¨å£°æ˜ä¹‹å‰è¢«è°ƒç”¨ã€‚</li><li>let å’Œ const ä¸å­˜åœ¨å˜é‡æå‡ï¼Œå³å®ƒä»¬æ‰€å£°æ˜çš„å˜é‡ä¸€å®šè¦åœ¨å£°æ˜åä½¿ç”¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// undefined</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> a = <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">// Cannot access &#x27;b&#x27; before initialization</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> b = <span class="number">2</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(c); <span class="comment">// Cannot access &#x27;c&#x27; before initialization</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> c = <span class="number">3</span>;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>â‘¡ å—çº§ä½œç”¨åŸŸ</strong></p><p>è¯¦ç»†è§£æ</p><p>var ä¸å­˜åœ¨å—çº§ä½œç”¨åŸŸï¼Œlet å’Œ const å­˜åœ¨å—çº§ä½œç”¨åŸŸ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// 1</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">let</span> b = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">// Uncaught ReferenceError: b is not defined</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">const</span> c = <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c); <span class="comment">// Uncaught ReferenceError: c is not defined</span></span><br></pre></td></tr></table></figure><p><strong>â‘¢ é‡å¤å£°æ˜</strong></p><p>è¯¦ç»†è§£è¯»</p><p>var å…è®¸é‡å¤å£°æ˜å˜é‡ï¼Œlet å’Œ const åœ¨åŒä¸€ä½œç”¨åŸŸä¸‹ä¸å…è®¸é‡å¤å£°æ˜å˜é‡</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> a = <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> a = <span class="number">2</span>;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> b = <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> b = <span class="number">2</span>; <span class="comment">// Uncaught SyntaxError: Identifier &#x27;b&#x27; has already been declared</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> c = <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> c = <span class="number">2</span>; <span class="comment">// Uncaught SyntaxError: Identifier &#x27;c&#x27; has already been declared</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>â‘£ ä¿®æ”¹å˜é‡</strong></p><p>è¯¦ç»†è§£è¯»</p><ul><li>var å’Œ let å£°æ˜çš„å˜é‡ï¼Œå¯ä»¥ä¿®æ”¹</li><li>const å£°æ˜çš„æ˜¯ä¸€ä¸ªåªè¯»çš„å¸¸é‡ã€‚ä¸€æ—¦å£°æ˜ï¼Œå¸¸é‡çš„å€¼å°±ä¸èƒ½æ”¹å˜</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> a = <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">  a = <span class="number">2</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> b = <span class="number">2</span>;</span></span><br><span class="line"><span class="language-javascript">  b = <span class="number">3</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a, b); <span class="comment">// 2 3</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> c = <span class="number">3</span>;</span></span><br><span class="line"><span class="language-javascript">  c = <span class="number">3</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(c); <span class="comment">// ncaught TypeError: Assignment to constant variable.</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>â‘¤ ä½¿ç”¨</strong></p><p>è¯¦ç»†è§£è¯»</p><ul><li>èƒ½ç”¨ const çš„æƒ…å†µå°½é‡ä½¿ç”¨ constï¼Œæ¯”å¦‚å£°æ˜çš„å˜é‡æ˜¯ç”¨æ¥ä¿å­˜ å¯¹è±¡ã€æ•°ç»„ç­‰å¼•ç”¨ç±»å‹æ—¶ï¼Œç”¨ const</li><li>å…¶ä»–æƒ…å†µä¸‹å¤§å¤šæ•°ä½¿ç”¨ letï¼Œæ¯”å¦‚ for å¾ªç¯ï¼Œé¿å…ä½¿ç”¨ var</li></ul><blockquote><p>æç¤ºï¼švar åœ¨å…¨å±€ä½œç”¨åŸŸä¸­å£°æ˜çš„å˜é‡ï¼Œç›¸å½“äº window å¯¹è±¡çš„å±æ€§ã€‚</p></blockquote><h3 id="const-å®šä¹‰çš„å€¼ä¸€å®šæ˜¯ä¸èƒ½æ”¹å˜çš„å—ï¼Ÿ">const å®šä¹‰çš„å€¼ä¸€å®šæ˜¯ä¸èƒ½æ”¹å˜çš„å—ï¼Ÿ</h3><ul><li>const å®é™…ä¸Šä¿è¯çš„ï¼Œå¹¶ä¸æ˜¯å˜é‡çš„å€¼ä¸å¾—æ”¹åŠ¨ï¼Œè€Œæ˜¯å˜é‡æŒ‡å‘çš„é‚£ä¸ª<strong>æ ˆå†…å­˜</strong>åœ°å€æ‰€ä¿å­˜çš„æ•°æ®ä¸å¾—æ”¹åŠ¨ã€‚</li><li>å¯¹äºç®€å•ç±»å‹çš„æ•°æ®ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ï¼‰å€¼å°±ä¿å­˜åœ¨å˜é‡æŒ‡å‘çš„é‚£ä¸ªæ ˆå†…å­˜åœ°å€ï¼Œå› æ­¤ç­‰åŒäºå¸¸é‡ã€‚</li><li>å¼•ç”¨ç±»å‹çš„æ•°æ®ï¼ˆä¸»è¦æ˜¯å¯¹è±¡å’Œæ•°ç»„ï¼‰å˜é‡æŒ‡å‘çš„æ ˆå†…å­˜åœ°å€ï¼Œä¿å­˜çš„åªæ˜¯ä¸€ä¸ªæŒ‡å‘å®é™…æ•°æ®çš„æŒ‡é’ˆ</li><li>const åªèƒ½ä¿è¯è¿™ä¸ªæŒ‡é’ˆæ˜¯å›ºå®šçš„ï¼ˆå³æ€»æ˜¯æŒ‡å‘å¦ä¸€ä¸ªå›ºå®šçš„åœ°å€ï¼‰ï¼Œè‡³äºå®ƒæŒ‡å‘çš„æ•°æ®ç»“æ„æ˜¯ä¸æ˜¯å¯å˜çš„ï¼Œå°±å®Œå…¨ä¸èƒ½æ§åˆ¶äº†ã€‚</li></ul><p>æ‰€ä»¥å¦‚æœæ˜¯ const å£°æ˜çš„æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å˜é‡ï¼Œå…¶å¼•ç”¨ç±»å‹çš„ç»“æ„æ˜¯å¯ä»¥å‘ç”Ÿæ”¹å˜çš„ã€‚</p><h3 id="const-å£°æ˜äº†æ•°ç»„ï¼Œè¿˜èƒ½-push-å…ƒç´ å—ï¼Œä¸ºä»€ä¹ˆ-ï¼Ÿ">const å£°æ˜äº†æ•°ç»„ï¼Œè¿˜èƒ½ push å…ƒç´ å—ï¼Œä¸ºä»€ä¹ˆ ï¼Ÿ</h3><p>å¯ä»¥</p><ul><li>å› ä¸º const å£°æ˜çš„å˜é‡ä¿å­˜çš„åªæ˜¯<strong>æ ˆå†…å­˜</strong>ä¸­çš„åœ°å€ï¼Œåªæ˜¯ä¸€ä¸ªæŒ‡å‘å®é™…æ•°æ®çš„æŒ‡é’ˆã€‚æŒ‡é’ˆæŒ‡å‘å †å†…å­˜ä¸­ä¿å­˜çš„æ•°æ®ã€‚</li><li>const åªèƒ½ä¿è¯æ ˆå†…å­˜ä¸­çš„åœ°å€ä¸å˜ï¼Œä½†æ˜¯å †å†…å­˜ä¸­çš„æ•°æ®å¦‚ä½•æ”¹å˜æ˜¯æ²¡æœ‰åŠæ³•æ§åˆ¶çš„ã€‚</li><li>push æ–¹æ³•ç›¸å½“äºæ˜¯æ”¹å˜äº†å †å†…å­˜ä¸­çš„æ•°æ®ç»“æ„ã€‚</li></ul><h2 id="é—­åŒ…-ã€ä½œç”¨åŸŸé¢è¯•é¢˜">é—­åŒ… ã€ä½œç”¨åŸŸé¢è¯•é¢˜</h2><h3 id="é—­åŒ…é‡Œé¢çš„å˜é‡ä¸ºä»€ä¹ˆä¸ä¼šè¢«åƒåœ¾å›æ”¶">é—­åŒ…é‡Œé¢çš„å˜é‡ä¸ºä»€ä¹ˆä¸ä¼šè¢«åƒåœ¾å›æ”¶</h3><p><strong>â‘  é¦–å…ˆæˆ‘ä»¬æ¥äº†è§£ä¸‹ä»€ä¹ˆæ˜¯åƒåœ¾å›æ”¶ ï¼Ÿ</strong></p><p>è¯¦ç»†è§£è¯»</p><p>åœ¨ js ä¸­æ‰€è°“çš„åƒåœ¾å°±æ˜¯æŒ‡ä¸ä¼šå†è¢«ä½¿ç”¨çš„å€¼ï¼Œå°±ä¼šè¢«å½“æˆåƒåœ¾å›æ”¶æ‰ã€‚</p><ul><li><p>javaScript ä¼šè‡ªåŠ¨å›æ”¶ä¸å†ä½¿ç”¨çš„å˜é‡ï¼Œé‡Šæ”¾å…¶æ‰€å çš„å†…å­˜ï¼Œå¼€å‘äººå‘˜ä¸éœ€è¦æ‰‹åŠ¨çš„åšåƒåœ¾å›æ”¶çš„å¤„ç†ã€‚</p></li><li><p>åƒåœ¾å›æ”¶æœºåˆ¶åªä¼šå›æ”¶å±€éƒ¨å˜é‡ï¼Œå…¨å±€å˜é‡ä¸ä¼šè¢«å›æ”¶ï¼Œå› ä¸ºå…¨å±€å˜é‡éšæ—¶æœ‰å¯èƒ½è¢«ä½¿ç”¨ã€‚ï¼ˆå…¨å±€å˜é‡åœ¨æµè§ˆå™¨å…³é—­ä¹‹åä¼šå›æ”¶ï¼‰æ‰€ä»¥å½“æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå…¨å±€å¯¹è±¡æ—¶ï¼Œåœ¨ä½¿ç”¨å®Œæ¯•ä¹‹åï¼Œæœ€å¥½ç»™å®ƒé‡æ–°å¤å€¼ä¸º nullï¼Œä»¥ä¾¿é‡Šæ”¾å…¶æ‰€å ç”¨çš„å†…å­˜ã€‚</p></li><li><p>ç›®å‰æµè§ˆå™¨åŸºæœ¬ä½¿ç”¨<strong>æ ‡è®°æ¸…é™¤</strong>å’Œ<strong>å¼•ç”¨è®¡æ•°</strong>ä¸¤ç§åƒåœ¾å›æ”¶ç­–ç•¥</p><ul><li>æ ‡è®°æ¸…ç†<ul><li>å½“å‡½æ•°è¢«è°ƒç”¨ï¼Œå˜é‡è¿›å…¥ä¸Šä¸‹æ–‡æ—¶ï¼Œä¼šè¢«åŠ ä¸Šå­˜åœ¨ä¸Šä¸‹æ–‡æ ‡è®°ï¼Œæ˜¯ä¸ä¼šè¢«æ¸…ç†çš„ã€‚</li><li>å½“å‡½æ•°æ‰§è¡Œå®Œæˆåï¼Œå°±ä¼šå»æ‰å­˜åœ¨ä¸Šä¸‹æ–‡ä¸­çš„æ ‡è®°ï¼Œéšååƒåœ¾å›æ”¶ç¨‹åºä¼šåšä¸€æ¬¡å†…å­˜æ¸…ç†ï¼Œé”€æ¯è¿™äº›å˜é‡ã€‚</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">1</span>; <span class="comment">// å‡½æ•°è°ƒç”¨æ—¶ è¢«æ ‡è®° è¿›å…¥ä¸Šä¸‹æ–‡</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">test</span>(); <span class="comment">// å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œaçš„æ ‡è®°å»æ‰ï¼Œè¢«å›æ”¶</span></span><br></pre></td></tr></table></figure><ul><li>å¼•ç”¨è®¡æ•°<ul><li>å¼•ç”¨è®¡æ•°å°±æ˜¯è¿½è¸ª<strong>å€¼</strong>è¢«å¼•ç”¨çš„æ¬¡æ•°ã€‚å£°æ˜å˜é‡å¹¶ç»™å®ƒèµ‹ä¸€ä¸ªå¼•ç”¨ç±»å‹å€¼æ—¶ï¼Œè¿™ä¸ªå€¼çš„å¼•ç”¨æ•° ä¸º 1ã€‚</li><li>å¦‚æœåŒä¸€ä¸ªå€¼åˆè¢«èµ‹ç»™å¦ä¸€ä¸ªå˜é‡ï¼Œé‚£å¼•ç”¨æ•°+1 ã€‚å¦‚æœä¿å­˜è¯¥å€¼å¼•ç”¨çš„å˜é‡è¢«å…¶å®ƒå€¼è¦† ç›–äº†ï¼Œåˆ™å¼•ç”¨æ•°å‡ 1ã€‚</li><li>å½“å¼•ç”¨è®¡æ•°ä¸º 0 æ—¶ï¼Œè¡¨ç¤ºè¿™ä¸ªå€¼ä¸å†ç”¨åˆ°ï¼Œåƒåœ¾æ”¶é›†å™¨å°±ä¼šå›æ”¶ä»–æ‰€å  ç”¨çš„å†…å­˜ã€‚</li></ul></li></ul></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]; <span class="comment">// [1,2,3]çš„å¼•ç”¨è®¡æ•°ä¸º1</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> b = a; <span class="comment">// å˜é‡bä¹Ÿå¼•ç”¨äº†è¿™ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥[1,2,3]çš„å¼•ç”¨æ•°ä¸º2</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> a = <span class="literal">null</span>; <span class="comment">// [1,2,3]çš„å¼•ç”¨è¢«åˆ‡æ–­ï¼Œå¼•ç”¨æ•°-1ï¼Œæ‰€ä»¥[1,2,3]çš„å¼•ç”¨æ•°ä¸º1</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// å¦‚æœåªæ˜¯åˆ°è¿™é‡Œï¼Œé‚£[1,2,3]ä¸æ‰€å çš„å†…å­˜ä¸ä¼šè¢«å›æ”¶</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> b = <span class="literal">null</span>; <span class="comment">// [1,2,3] çš„å¼•ç”¨è¢«åˆ‡æ–­ï¼Œå¼•ç”¨æ•°-1ï¼Œæ‰€ [1,2,3]çš„å¼•ç”¨æ•°ä¸º0</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// åˆ°è¿™é‡Œï¼Œåƒåœ¾æ”¶é›†å™¨åœ¨ä¸‹ä¸€æ¬¡æ¸…ç†å†…å­˜æ—¶ï¼Œå°±ä¼šæŠŠ[1,2,3]æ‰€å çš„å†…å­˜æ¸…ç†æ‰</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>å¼•ç”¨è®¡æ•°æœ‰ä¸€ä¸ªå¾ˆå¤§çš„å‘ï¼Œå°±æ˜¯å¾ªç¯å¼•ç”¨æ—¶ï¼Œä¼šé€ æˆå†…å­˜æ°¸è¿œæ— æ³•é‡Šæ”¾ã€‚</p></blockquote><p>â‘¡<strong>ä¸ºä»€ä¹ˆé—­åŒ…ä¸­çš„å˜é‡ä¸ä¼šè¢«åƒåœ¾å›æ”¶ ï¼Ÿ</strong></p><p>ç­”æ¡ˆè§£æ</p><p>è¿™é‡Œæˆ‘ä»¬è¦æ˜ç¡®ä¸€ä¸ªç‚¹ï¼Œå¦‚æœé—­åŒ…å‡½æ•°çš„å¼•ç”¨è®¡æ•°ä¸º 0 æ—¶ï¼Œå‡½æ•°å°±ä¼šé‡Šæ”¾ï¼Œå®ƒå¼•ç”¨çš„å˜é‡ä¹Ÿä¼šè¢«é‡Šæ”¾ã€‚</p><ul><li>åªæœ‰å½“é—­åŒ…å‡½æ•°çš„å¼•ç”¨è®¡æ•°ä¸ä¸º 0 æ—¶ï¼Œè¯´æ˜é—­åŒ…å‡½æ•°éšæ—¶æœ‰å¯èƒ½è¢«è°ƒç”¨ï¼Œä»–è¢«è°ƒç”¨åï¼Œå°±ä¼šå¼•ç”¨ä»–åœ¨å®šä¹‰æ—¶æ‰€å¤„çš„ç¯å¢ƒçš„å˜é‡ã€‚</li><li>é—­åŒ…ä¸­çš„å˜é‡å°±å¾—ä¸€ç›´éœ€è¦åœ¨å†…å­˜ä¸­ï¼Œåˆ™å°±ä¸ä¼šè¢«åƒåœ¾å›æ”¶æ‰ã€‚</li></ul><h3 id="è¯´è¯´-JS-ä½œç”¨åŸŸåŠä½œç”¨åŸŸé“¾">è¯´è¯´ JS ä½œç”¨åŸŸåŠä½œç”¨åŸŸé“¾</h3><ul><li><p>ä½œç”¨åŸŸæ˜¯ä¸€å¥—è§„åˆ™ï¼Œè§„å®šäº†ä»£ç çš„ä½œç”¨èŒƒå›´ã€‚</p></li><li><p>æ¯ä¸ªæ‰§è¡Œç¯å¢ƒéƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„<strong>å˜é‡å¯¹è±¡</strong>ï¼Œç¯å¢ƒä¸­å®šä¹‰çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°éƒ½ä¿å­˜åœ¨è¿™ä¸ªå¯¹è±¡ä¸­ã€‚</p></li><li><p>å±€éƒ¨ä½œç”¨åŸŸï¼ˆå‡½æ•°ä½œç”¨åŸŸï¼‰</p><ul><li>å‡½æ•°è¢«è°ƒç”¨æ—¶åˆ›å»ºå‡½æ•°ä½œç”¨åŸŸï¼Œå‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œå‡½æ•°ä½œç”¨åŸŸè¢«é”€æ¯ï¼Œä¿å­˜åœ¨å…¶ä¸­çš„å˜é‡å’Œå‡½æ•°å®šä¹‰äº†éšä¹‹è¢«é”€æ¯ï¼ˆ<strong>é—­åŒ…é™¤å¤–ï¼Œåªæœ‰å½“é—­åŒ…å‡½æ•°çš„å¼•ç”¨æ¬¡æ•°ä¸º 0 æ—¶ï¼Œé—­åŒ…å‡½æ•°å’Œé—­åŒ…ä¸­çš„å˜é‡è¢«é”€æ¯</strong>ï¼‰</li></ul><h4 id="ç‰¹æ®Šçš„é—­åŒ…">ç‰¹æ®Šçš„é—­åŒ…</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">checkWeight</span>(<span class="params">weight</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">_weight</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      weight &gt; _weight ? <span class="title function_">alert</span>(<span class="string">&quot;è¿‡èƒ–&quot;</span>) : <span class="title function_">alert</span>(<span class="string">&quot;okè¾¾æ ‡&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> <span class="variable constant_">P1</span> = <span class="title function_">checkWeight</span>(<span class="number">100</span>); <span class="comment">// è°ƒç”¨å®Œæ¯•ï¼Œä½œç”¨åŸŸå’Œå˜é‡weightä¸ä¼šè¢«é”€æ¯</span></span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">P1</span>(<span class="number">110</span>); <span class="comment">// è°ƒç”¨å®Œæ¯•ï¼Œä½œç”¨åŸŸå’Œå˜é‡_weightä¼šè¢«é”€æ¯</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><ul><li>å¦‚æœæˆ‘ä»¬åœ¨æœ€ååŠ ä¸Š<code>P1 = null</code>ï¼Œåˆ™åƒåœ¾å›æ”¶å™¨å›åœ¨ä¸‹ä¸€æ¬¡æ¸…ç†å†…å­˜æ—¶</li><li>é”€æ¯æ‰ checkWeight è°ƒç”¨å½¢æˆçš„ä½œç”¨åŸŸå’Œä½œç”¨åŸŸä¸­çš„å˜é‡ weightã€‚</li></ul></blockquote></li><li><p>ä½¿ç”¨ let æˆ– const å…³é”®å­—å£°æ˜çš„å˜é‡ï¼Œä¼šå½¢æˆå—çº§ä½œç”¨åŸŸã€‚</p><ul><li>åœ¨ {}ã€if ã€for é‡Œç”¨ let æ¥å£°æ˜å˜é‡ï¼Œä¼šå½¢æˆå—çº§ä½œç”¨åŸŸã€‚{} ä¹‹å¤–æ˜¯ä¸èƒ½è®¿é—® {} é‡Œé¢çš„å†…å®¹</li><li>å—çº§ä½œç”¨åŸŸä¸­å®šä¹‰çš„å˜é‡ï¼Œåœ¨ if æˆ– for ç­‰è¯­å¥æ‰§è¡Œå®Œåï¼Œå˜é‡å°±ä¼šè¢«é”€ï¼Œä¸å ç”¨å†…å­˜</li><li>å¯¹è±¡çš„ { } ä¸ä¼šå½¢æˆå—çº§ä½œç”¨åŸŸ</li></ul></li></ul><h4 id="ä½œç”¨åŸŸé“¾">ä½œç”¨åŸŸé“¾</h4><p>å½“ä»£ç åœ¨ä¸€ä¸ªç¯å¢ƒä¸­æ‰§è¡Œæ—¶ï¼Œä¼šåˆ›å»º<strong>å˜é‡å¯¹è±¡</strong>çš„ä¸€ä¸ªä½œç”¨åŸŸé“¾ï¼ˆä½œç”¨åŸŸå½¢æˆçš„é“¾æ¡ï¼‰</p><h3 id="æ€ä¹ˆç†è§£-JS-é™æ€ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ">æ€ä¹ˆç†è§£ JS é™æ€ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ</h3><ul><li><strong>é™æ€ä½œç”¨åŸŸ</strong>ï¼šåˆç§°è¯æ³•ä½œç”¨åŸŸï¼Œæ˜¯æŒ‡ä½œç”¨åŸŸåœ¨è¯æ³•é˜¶æ®µå°±è¢«ç¡®å®šäº†ï¼ˆ<strong>å‡½æ•°å®šä¹‰çš„ä½ç½®å°±å†³å®šäº†å‡½æ•°çš„ä½œç”¨åŸŸ</strong>ï¼‰ä¸ä¼šæ”¹å˜ï¼Œjavascript é‡‡ç”¨çš„æ˜¯è¯æ³•ä½œç”¨åŸŸã€‚</li><li><strong>åŠ¨æ€ä½œç”¨åŸŸ</strong>ï¼šå‡½æ•°çš„ä½œç”¨åŸŸåœ¨å‡½æ•°è°ƒç”¨æ—¶æ‰å†³å®šçš„ã€‚</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> a = <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> a = <span class="number">2</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">fn</span>();</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">test</span>(); <span class="comment">// 1</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>æœ€ç»ˆè¾“å‡ºçš„ç»“æœä¸º 1</p></blockquote><p>è¯´æ˜ fn ä¸­æ‰“å°çš„æ˜¯å…¨å±€ä¸‹çš„ a ï¼Œè¿™ä¹Ÿå°è¯äº† JavaScript ä½¿ç”¨äº†é™æ€ä½œç”¨åŸŸã€‚</p><p><strong>é™æ€ä½œç”¨åŸŸæ‰§è¡Œè¿‡ç¨‹</strong></p><p>å½“æ‰§è¡Œ fn å‡½æ•°æ—¶ï¼Œå…ˆä»å†…éƒ¨æŸ¥æ‰¾æ˜¯å¦æœ‰<code>a</code>å˜é‡ï¼Œå¦‚æœæ²¡æœ‰ï¼Œæ²¿ç€ä½œç”¨åŸŸé“¾å¾€ä¸ŠæŸ¥æ‰¾(ç”±äº<code>JavaScript</code>æ˜¯è¯æ³•ä½œç”¨åŸŸ)ï¼Œä¸Šå±‚ä¸ºå…¨å±€<code>a</code>ï¼Œæ‰€ä»¥ç»“æœæ‰“å°<code>1</code></p><h3 id="ä»¥ä¸‹ä»£ç è¾“å‡ºçš„ç»“æœæ˜¯-ï¼Ÿ">ä»¥ä¸‹ä»£ç è¾“å‡ºçš„ç»“æœæ˜¯ ï¼Ÿ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">a</span> = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> s = <span class="title class_">Symbol</span>();</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    [s]: <span class="number">20</span>,</span><br><span class="line">    <span class="attr">b</span>: <span class="number">30</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, <span class="string">&#x27;c&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">enumerable</span>: <span class="literal">true</span>ï¼Œ</span><br><span class="line">    <span class="attr">value</span>: <span class="number">40</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> val <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(val)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ä»¥ä¸Šè¾“å‡ºçš„ç»“æœä¸ºï¼šbï¼Œcï¼Œa</p></blockquote><p><code>for...in</code>è¯­å¥ä»¥ä»»æ„é¡ºåºéå†ä¸€ä¸ªå¯¹è±¡çš„å¯æšä¸¾å±æ€§ï¼ˆé™¤ Symbol ç±»å‹çš„å±æ€§ï¼‰</p><h2 id="åŸå‹ã€åŸå‹é“¾é¢è¯•é¢˜">åŸå‹ã€åŸå‹é“¾é¢è¯•é¢˜</h2><h3 id="å¦‚ä½•ç†è§£åŸå‹å’ŒåŸå‹é“¾">å¦‚ä½•ç†è§£åŸå‹å’ŒåŸå‹é“¾</h3><table><thead><tr><th style="text-align:left">é—®é¢˜</th><th style="text-align:left">ç›¸å…³çŸ¥è¯†ç‚¹</th></tr></thead><tbody><tr><td style="text-align:left">ä»€ä¹ˆæ˜¯åŸå‹å’ŒåŸå‹ç‰¹ç‚¹</td><td style="text-align:left">æ„é€ å‡½æ•°ã€å¯¹è±¡å®ä¾‹ã€prototypeã€<code>__proto__</code>ã€constructor</td></tr><tr><td style="text-align:left">ä»€ä¹ˆæ˜¯åŸå‹é“¾</td><td style="text-align:left">ç»˜åˆ¶å®ä¾‹å¯¹è±¡åŸå‹é“¾ã€æ•°ç»„åŸå‹é“¾ã€åŸå‹é“¾çš„ç»ˆç‚¹</td></tr><tr><td style="text-align:left">åŸå‹é“¾æŸ¥æ‰¾</td><td style="text-align:left">åŸå‹é“¾æŸ¥æ‰¾ã€å±æ€§é®è”½</td></tr><tr><td style="text-align:left">é‡å†™åŸå‹å¸¦æ¥çš„é—®é¢˜</td><td style="text-align:left">åˆ‡æ–­ç°æœ‰å®ä¾‹ä¸æ–°åŸå‹ä¹‹é—´çš„è”ç³»ã€ ä¼šå¯¼è‡´åŸå‹å¯¹è±¡çš„ constructor å±æ€§æŒ‡å‘ Object</td></tr><tr><td style="text-align:left">Object.create() æ–¹æ³•</td><td style="text-align:left">æ‰‹å†™ create æ–¹æ³•ã€ç”¨ create æ–¹æ³•å®ç°ç»§æ‰¿</td></tr><tr><td style="text-align:left">instanceof æ“ä½œç¬¦</td><td style="text-align:left">ç”¨æ³•å’Œå®ç°åŸç†</td></tr><tr><td style="text-align:left">in å’Œ hasOwnProperty æ“ä½œç¬¦</td><td style="text-align:left">in ä¸ hasOwnProperty çš„å¯¹æ¯”ã€å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå±æ€§æ˜¯åŸå‹ä¸Šå±æ€§</td></tr><tr><td style="text-align:left">for â€¦in</td><td style="text-align:left">forâ€¦in çš„ç”¨æ³•ã€å¯æšä¸¾å¯¹è±¡çš„å“ªäº›å±æ€§ï¼Ÿ</td></tr></tbody></table><p><strong>æ‰©å±•çŸ¥è¯†ç‚¹ï¼š</strong></p><table><thead><tr><th style="text-align:left">æ–¹æ³•</th><th style="text-align:left">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:left">Object.keys()</td><td style="text-align:left">Object.keys()æ–¹æ³•å¯ä»¥å°†ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œç„¶åæŠŠè¿™ä¸ªå¯¹è±¡<code>[keyï¼Œvalue]</code>å¯¹ä¸­çš„ key å€¼ä»¥æ•°ç»„çš„å½¢å¼éå†å‡ºæ¥ã€‚</td></tr><tr><td style="text-align:left">Object.values()</td><td style="text-align:left">Object.values()æ–¹æ³•å¯ä»¥å°†ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œç„¶åæŠŠè¿™ä¸ªå¯¹è±¡<code>[keyï¼Œvalue]</code>å¯¹ä¸­çš„ value å€¼ä»¥æ•°ç»„çš„å½¢å¼éå†å‡ºæ¥ã€‚</td></tr><tr><td style="text-align:left">Object.entries()</td><td style="text-align:left">Object.entries()æ–¹æ³•å¯ä»¥å°†å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªç»™å®šå¯¹è±¡è‡ªèº«å¯æšä¸¾å±æ€§çš„é”®å€¼å¯¹æ•°ç»„ï¼Œå…¶æ’åˆ—ä¸ä½¿ç”¨ <code>for...in</code>å¾ªç¯éå†è¯¥å¯¹è±¡æ—¶è¿”å›çš„é¡ºåºä¸€è‡´ï¼ˆåŒºåˆ«åœ¨äº for-in å¾ªç¯è¿˜ä¼šæšä¸¾åŸå‹é“¾ä¸­çš„å±æ€§ï¼‰</td></tr><tr><td style="text-align:left">getOwnPropertyNames()</td><td style="text-align:left">æ–¹æ³•è¿”å›ä¸€ä¸ªç”±æŒ‡å®šå¯¹è±¡çš„æ‰€æœ‰<strong>è‡ªèº«å±æ€§çš„å±æ€§å</strong>ï¼ˆåŒ…æ‹¬ä¸å¯æšä¸¾å±æ€§ä½†ä¸åŒ…æ‹¬ Symbol å€¼ä½œä¸ºåç§°çš„å±æ€§ï¼‰ç»„æˆçš„æ•°ç»„ã€‚</td></tr></tbody></table><h3 id="åŸå‹å’ŒåŸå‹ç‰¹ç‚¹">åŸå‹å’ŒåŸå‹ç‰¹ç‚¹</h3><ul><li>æˆ‘ä»¬åˆ›å»ºçš„æ¯ä¸€ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ª<strong>prototypeï¼ˆåŸå‹ï¼‰å±æ€§ï¼Œè¢«ç§°ä¸ºæ˜¾ç¤ºåŸå‹</strong>ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼ˆåŸå‹å¯¹è±¡ï¼‰ã€‚</li><li>è¿™ä¸ªå¯¹è±¡çš„å¥½å¤„æ˜¯ï¼Œåœ¨å®ƒä¸Šé¢å®šä¹‰çš„å±æ€§å’Œæ–¹æ³•å¯ä»¥ç”±ç‰¹å®šç±»å‹çš„æ‰€æœ‰å®ä¾‹å…±äº«ã€‚</li><li>åŸå‹å¯¹è±¡é»˜è®¤æ‹¥æœ‰ä¸€ä¸ª constructor å±æ€§ï¼ŒæŒ‡å‘å®ƒçš„æ„é€ å‡½æ•°</li></ul><h4 id="åŸå‹ç»“æ„å›¾">åŸå‹ç»“æ„å›¾</h4><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/20220523prototype011.7f1b23e4.png" alt="åŸå‹ç»“æ„å›¾"></p><ul><li>åŸå‹å¯¹è±¡é»˜è®¤æ‹¥æœ‰ä¸€ä¸ª constructor å±æ€§ï¼ŒæŒ‡å‘å®ƒçš„æ„é€ å‡½æ•°</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> === <span class="title class_">Person</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><ul><li>æ¯ä¸ª<code>å¯¹è±¡å®ä¾‹</code>éƒ½æœ‰ä¸€ä¸ªéšè—çš„å±æ€§<code>__proto__</code>ï¼Œè¢«ç§°ä¸º<code>éšå¼åŸå‹</code>,æŒ‡å‘å®ƒçš„æ„é€ å‡½æ•°çš„åŸå‹</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="property">__proto__</span> === <span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><ul><li>å¯¹è±¡å®ä¾‹å¯ä»¥å…±äº«åŸå‹ä¸Šé¢çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p1.<span class="title function_">sayHello</span>(); <span class="comment">// å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°æ˜ä»Šå¹´23å²äº†</span></span><br></pre></td></tr></table></figure><ul><li>å®ä¾‹è‡ªèº«çš„å±æ€§ä¼š<code>å±è”½(é®è”½)</code>åŸå‹ä¸ŠåŒåçš„å±æ€§ï¼Œå®ä¾‹ä¸Šæ²¡æœ‰çš„å±æ€§å°±ä¼šå»åŸå‹ä¸Šå»æ‰¾</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p1.<span class="title function_">study</span>(); <span class="comment">// æˆ‘å°æ˜æ­£åœ¨å­¦ä¹ webå‰ç«¯å¼€å‘è¯¾ç¨‹</span></span><br></pre></td></tr></table></figure><h3 id="åŸå‹é“¾-v2">åŸå‹é“¾</h3><ul><li>JavaScript ä¸­æ‰€æœ‰çš„å¯¹è±¡éƒ½æ˜¯ç”±å®ƒçš„åŸå‹å¯¹è±¡ç»§æ‰¿è€Œæ¥ã€‚</li><li>è€ŒåŸå‹å¯¹è±¡è‡ªèº«ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒä¹Ÿæœ‰è‡ªå·±çš„åŸå‹å¯¹è±¡ï¼Œè¿™æ ·å±‚å±‚ä¸Šæº¯ï¼Œå°±å½¢æˆäº†ä¸€ä¸ªç±»ä¼¼é“¾è¡¨çš„ç»“æ„ï¼Œè¿™å°±æ˜¯åŸå‹é“¾</li></ul><h4 id="åŸå‹é“¾ç»“æ„å›¾"><strong>åŸå‹é“¾ç»“æ„å›¾</strong></h4><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/20220523proto0233.642ec42d.png" alt="åŸå‹é“¾ç»“æ„å›¾"></p><blockquote><ul><li>æ‰€æœ‰åŸå‹é“¾çš„ç»ˆç‚¹éƒ½æ˜¯ Object.prototype</li><li><code>Objec.prototype</code> æŒ‡å‘çš„åŸå‹å¯¹è±¡åŒæ ·æ‹¥æœ‰åŸå‹<code>Object.prototype.__proto__ï¼Œä¸è¿‡å®ƒçš„åŸå‹æ˜¯ null</code> ï¼Œè€Œ <code>null</code> åˆ™æ²¡æœ‰åŸå‹</li></ul></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;JS-æ£€æµ‹æ•°æ®ç±»å‹çš„-4-ç§æ–¹å¼&quot;&gt;&lt;strong&gt;JS æ£€æµ‹æ•°æ®ç±»å‹çš„ 4 ç§æ–¹å¼&lt;/strong&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;typeof&lt;/li&gt;
&lt;li&gt;instanceof&lt;/li&gt;
&lt;li&gt;constructor&lt;/li&gt;
&lt;li&gt;Object.pr</summary>
      
    
    
    
    <category term="é¢è¯•å®å…¸âœ¨" scheme="https://blog.cilicili.xyz/categories/%E9%9D%A2%E8%AF%95%E5%AE%9D%E5%85%B8%E2%9C%A8/"/>
    
    
    <category term="JavaScript" scheme="https://blog.cilicili.xyz/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>ã€é¢è¯•ã€‘JavaScripté¢è¯•é¢˜åº“</title>
    <link href="https://blog.cilicili.xyz/posts/207bb36f.html"/>
    <id>https://blog.cilicili.xyz/posts/207bb36f.html</id>
    <published>2022-09-17T07:53:30.000Z</published>
    <updated>2022-09-20T13:14:36.567Z</updated>
    
    <content type="html"><![CDATA[<h1>äº‹ä»¶å¾ªç¯æœºåˆ¶</h1><ul><li>javascriptæ˜¯ä¸€é—¨<strong>å•çº¿ç¨‹</strong>è¯­è¨€ã€‚</li><li>Javascriptäº‹ä»¶å¾ªç¯</li></ul><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/15fdd88994142347~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.awebp" alt="img"></p><p>å¯¼å›¾è¦è¡¨è¾¾çš„å†…å®¹ç”¨æ–‡å­—æ¥è¡¨è¿°çš„è¯ï¼š</p><ul><li>åŒæ­¥å’Œå¼‚æ­¥ä»»åŠ¡åˆ†åˆ«è¿›å…¥ä¸åŒçš„æ‰§è¡Œ&quot;åœºæ‰€&quot;ï¼ŒåŒæ­¥çš„è¿›å…¥ä¸»çº¿ç¨‹ï¼Œå¼‚æ­¥çš„è¿›å…¥Event Tableå¹¶æ³¨å†Œå‡½æ•°ã€‚</li><li>å½“æŒ‡å®šçš„äº‹æƒ…å®Œæˆæ—¶ï¼ŒEvent Tableä¼šå°†è¿™ä¸ªå‡½æ•°ç§»å…¥Event Queueï¼ˆä»»åŠ¡é˜Ÿåˆ—ï¼‰ã€‚</li><li>ä¸»çº¿ç¨‹å†…çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä¸ºç©ºï¼Œä¼šå»Event Queueè¯»å–å¯¹åº”çš„å‡½æ•°ï¼Œè¿›å…¥ä¸»çº¿ç¨‹æ‰§è¡Œã€‚</li><li>ä¸Šè¿°è¿‡ç¨‹ä¼šä¸æ–­é‡å¤ï¼Œä¹Ÿå°±æ˜¯å¸¸è¯´çš„Event Loop(äº‹ä»¶å¾ªç¯)ã€‚</li></ul><p><strong>é‚£æ€ä¹ˆçŸ¥é“ä¸»çº¿ç¨‹æ‰§è¡Œæ ˆä¸ºç©ºå‘¢</strong>ï¼Ÿjså¼•æ“å­˜åœ¨monitoring processè¿›ç¨‹ï¼Œä¼šæŒç»­ä¸æ–­çš„æ£€æŸ¥ä¸»çº¿ç¨‹æ‰§è¡Œæ ˆæ˜¯å¦ä¸ºç©ºï¼Œä¸€æ—¦ä¸ºç©ºï¼Œå°±ä¼šå»Event Queueé‚£é‡Œæ£€æŸ¥æ˜¯å¦æœ‰ç­‰å¾…è¢«è°ƒç”¨çš„å‡½æ•°ã€‚</p><p>è¯´äº†è¿™ä¹ˆå¤šæ–‡å­—ï¼Œä¸å¦‚ç›´æ¥ä¸€æ®µä»£ç æ›´ç›´ç™½ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> data = [];</span><br><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>:www.<span class="property">javascript</span>.<span class="property">com</span>,</span><br><span class="line">    <span class="attr">data</span>:data,</span><br><span class="line">    <span class="attr">success</span>:<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å‘é€æˆåŠŸ!&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ä»£ç æ‰§è¡Œç»“æŸ&#x27;</span>);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢æ˜¯ä¸€æ®µç®€æ˜“çš„<code>ajax</code>è¯·æ±‚ä»£ç ï¼š</p><ul><li>ajaxè¿›å…¥Event Tableï¼Œæ³¨å†Œå›è°ƒå‡½æ•°<code>success</code>ã€‚</li><li>æ‰§è¡Œ<code>console.log('ä»£ç æ‰§è¡Œç»“æŸ')</code>ã€‚</li><li>ajaxäº‹ä»¶å®Œæˆï¼Œå›è°ƒå‡½æ•°<code>success</code>è¿›å…¥Event Queueã€‚</li><li>ä¸»çº¿ç¨‹ä»Event Queueè¯»å–å›è°ƒå‡½æ•°<code>success</code>å¹¶æ‰§è¡Œã€‚</li></ul><p>ç›¸ä¿¡é€šè¿‡ä¸Šé¢çš„æ–‡å­—å’Œä»£ç ï¼Œä½ å·²ç»å¯¹jsçš„æ‰§è¡Œé¡ºåºæœ‰äº†åˆæ­¥äº†è§£ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥ç ”ç©¶è¿›é˜¶è¯é¢˜ï¼šsetTimeoutã€‚</p><h2 id="åˆçˆ±åˆæ¨çš„setTimeout">åˆçˆ±åˆæ¨çš„setTimeout</h2><p>å¤§åé¼é¼çš„<code>setTimeout</code>æ— éœ€å†å¤šè¨€ï¼Œå¤§å®¶å¯¹ä»–çš„ç¬¬ä¸€å°è±¡å°±æ˜¯å¼‚æ­¥å¯ä»¥å»¶æ—¶æ‰§è¡Œï¼Œæˆ‘ä»¬ç»å¸¸è¿™ä¹ˆå®ç°å»¶æ—¶3ç§’æ‰§è¡Œï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å»¶æ—¶3ç§’&#x27;</span>);</span><br><span class="line">&#125;,<span class="number">3000</span>)</span><br></pre></td></tr></table></figure><p>æ¸æ¸çš„<code>setTimeout</code>ç”¨çš„åœ°æ–¹å¤šäº†ï¼Œé—®é¢˜ä¹Ÿå‡ºç°äº†ï¼Œæœ‰æ—¶å€™æ˜æ˜å†™çš„å»¶æ—¶3ç§’ï¼Œå®é™…å´5ï¼Œ6ç§’æ‰æ‰§è¡Œå‡½æ•°ï¼Œè¿™åˆå’‹å›äº‹å•Šï¼Ÿ</p><p>å…ˆçœ‹ä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">task</span>();</span><br><span class="line">&#125;,<span class="number">3000</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ‰§è¡Œconsole&#x27;</span>);</span><br></pre></td></tr></table></figure><p>æ ¹æ®å‰é¢æˆ‘ä»¬çš„ç»“è®ºï¼Œ<code>setTimeout</code>æ˜¯å¼‚æ­¥çš„ï¼Œåº”è¯¥å…ˆæ‰§è¡Œ<code>console.log</code>è¿™ä¸ªåŒæ­¥ä»»åŠ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ç»“è®ºæ˜¯ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ‰§è¡Œconsole</span></span><br><span class="line"><span class="comment">//task()</span></span><br></pre></td></tr></table></figure><p>å»éªŒè¯ä¸€ä¸‹ï¼Œç»“æœæ­£ç¡®ï¼ ç„¶åæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹å‰é¢çš„ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">task</span>()</span><br><span class="line">&#125;,<span class="number">3000</span>)</span><br><span class="line"></span><br><span class="line"><span class="title function_">sleep</span>(<span class="number">10000000</span>)</span><br></pre></td></tr></table></figure><p>ä¹ä¸€çœ‹å…¶å®å·®ä¸å¤šå˜›ï¼Œä½†æˆ‘ä»¬æŠŠè¿™æ®µä»£ç åœ¨chromeæ‰§è¡Œä¸€ä¸‹ï¼Œå´å‘ç°æ§åˆ¶å°æ‰§è¡Œ<code>task()</code>éœ€è¦çš„æ—¶é—´è¿œè¿œè¶…è¿‡3ç§’ï¼Œè¯´å¥½çš„å»¶æ—¶ä¸‰ç§’ï¼Œä¸ºå•¥ç°åœ¨éœ€è¦è¿™ä¹ˆé•¿æ—¶é—´å•Šï¼Ÿ</p><p>è¿™æ—¶å€™æˆ‘ä»¬éœ€è¦é‡æ–°ç†è§£<code>setTimeout</code>çš„å®šä¹‰ã€‚æˆ‘ä»¬å…ˆè¯´ä¸Šè¿°ä»£ç æ˜¯æ€ä¹ˆæ‰§è¡Œçš„ï¼š</p><ul><li><code>task()</code>è¿›å…¥Event Tableå¹¶æ³¨å†Œ,è®¡æ—¶å¼€å§‹ã€‚</li><li>æ‰§è¡Œ<code>sleep</code>å‡½æ•°ï¼Œå¾ˆæ…¢ï¼Œéå¸¸æ…¢ï¼Œè®¡æ—¶ä»åœ¨ç»§ç»­ã€‚</li><li>3ç§’åˆ°äº†ï¼Œè®¡æ—¶äº‹ä»¶<code>timeout</code>å®Œæˆï¼Œ<code>task()</code>è¿›å…¥Event Queueï¼Œä½†æ˜¯<code>sleep</code>ä¹Ÿå¤ªæ…¢äº†å§ï¼Œè¿˜æ²¡æ‰§è¡Œå®Œï¼Œåªå¥½ç­‰ç€ã€‚</li><li><code>sleep</code>ç»ˆäºæ‰§è¡Œå®Œäº†ï¼Œ<code>task()</code>ç»ˆäºä»Event Queueè¿›å…¥äº†ä¸»çº¿ç¨‹æ‰§è¡Œã€‚</li></ul><p>ä¸Šè¿°çš„æµç¨‹èµ°å®Œï¼Œæˆ‘ä»¬çŸ¥é“<code>setTimeout</code>è¿™ä¸ªå‡½æ•°ï¼Œæ˜¯ç»è¿‡æŒ‡å®šæ—¶é—´åï¼ŒæŠŠè¦æ‰§è¡Œçš„ä»»åŠ¡(æœ¬ä¾‹ä¸­ä¸º<code>task()</code>)åŠ å…¥åˆ°Event Queueä¸­ï¼Œåˆå› ä¸ºæ˜¯å•çº¿ç¨‹ä»»åŠ¡è¦ä¸€ä¸ªä¸€ä¸ªæ‰§è¡Œï¼Œå¦‚æœå‰é¢çš„ä»»åŠ¡éœ€è¦çš„æ—¶é—´å¤ªä¹…ï¼Œé‚£ä¹ˆåªèƒ½ç­‰ç€ï¼Œå¯¼è‡´çœŸæ­£çš„å»¶è¿Ÿæ—¶é—´è¿œè¿œå¤§äº3ç§’ã€‚</p><p>æˆ‘ä»¬è¿˜ç»å¸¸é‡åˆ°<code>setTimeout(fn,0)</code>è¿™æ ·çš„ä»£ç ï¼Œ0ç§’åæ‰§è¡Œåˆæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæ˜¯ä¸æ˜¯å¯ä»¥ç«‹å³æ‰§è¡Œå‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯ä¸ä¼šçš„ï¼Œ<code>setTimeout(fn,0)</code>çš„å«ä¹‰æ˜¯ï¼ŒæŒ‡å®šæŸä¸ªä»»åŠ¡åœ¨ä¸»çº¿ç¨‹æœ€æ—©å¯å¾—çš„ç©ºé—²æ—¶é—´æ‰§è¡Œï¼Œæ„æ€å°±æ˜¯ä¸ç”¨å†ç­‰å¤šå°‘ç§’äº†ï¼Œåªè¦ä¸»çº¿ç¨‹æ‰§è¡Œæ ˆå†…çš„åŒæ­¥ä»»åŠ¡å…¨éƒ¨æ‰§è¡Œå®Œæˆï¼Œæ ˆä¸ºç©ºå°±é©¬ä¸Šæ‰§è¡Œã€‚ä¸¾ä¾‹è¯´æ˜ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä»£ç 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å…ˆæ‰§è¡Œè¿™é‡Œ&#x27;</span>);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ‰§è¡Œå•¦&#x27;</span>)</span><br><span class="line">&#125;,<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä»£ç 2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å…ˆæ‰§è¡Œè¿™é‡Œ&#x27;</span>);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ‰§è¡Œå•¦&#x27;</span>)</span><br><span class="line">&#125;,<span class="number">3000</span>);  </span><br></pre></td></tr></table></figure><p>ä»£ç 1çš„è¾“å‡ºç»“æœæ˜¯ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…ˆæ‰§è¡Œè¿™é‡Œ</span></span><br><span class="line"><span class="comment">//æ‰§è¡Œå•¦</span></span><br></pre></td></tr></table></figure><p>ä»£ç 2çš„è¾“å‡ºç»“æœæ˜¯ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…ˆæ‰§è¡Œè¿™é‡Œ</span></span><br><span class="line"><span class="comment">// ... 3s later</span></span><br><span class="line"><span class="comment">// æ‰§è¡Œå•¦</span></span><br></pre></td></tr></table></figure><p>å…³äº<code>setTimeout</code>è¦è¡¥å……çš„æ˜¯ï¼Œå³ä¾¿ä¸»çº¿ç¨‹ä¸ºç©ºï¼Œ0æ¯«ç§’å®é™…ä¸Šä¹Ÿæ˜¯è¾¾ä¸åˆ°çš„ã€‚æ ¹æ®HTMLçš„æ ‡å‡†ï¼Œæœ€ä½æ˜¯4æ¯«ç§’ã€‚æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è‡ªè¡Œäº†è§£ã€‚</p><h2 id="åˆæ¨åˆçˆ±çš„setInterval">åˆæ¨åˆçˆ±çš„setInterval</h2><p>ä¸Šé¢è¯´å®Œäº†<code>setTimeout</code>ï¼Œå½“ç„¶ä¸èƒ½é”™è¿‡å®ƒçš„å­ªç”Ÿå…„å¼Ÿ<code>setInterval</code>ã€‚ä»–ä¿©å·®ä¸å¤šï¼Œåªä¸è¿‡åè€…æ˜¯å¾ªç¯çš„æ‰§è¡Œã€‚å¯¹äºæ‰§è¡Œé¡ºåºæ¥è¯´ï¼Œ<code>setInterval</code>ä¼šæ¯éš”æŒ‡å®šçš„æ—¶é—´å°†æ³¨å†Œçš„å‡½æ•°ç½®å…¥Event Queueï¼Œå¦‚æœå‰é¢çš„ä»»åŠ¡è€—æ—¶å¤ªä¹…ï¼Œé‚£ä¹ˆåŒæ ·éœ€è¦ç­‰å¾…ã€‚</p><p>å”¯ä¸€éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå¯¹äº<code>setInterval(fn,ms)</code>æ¥è¯´ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ä¸æ˜¯æ¯è¿‡<code>ms</code>ç§’ä¼šæ‰§è¡Œä¸€æ¬¡<code>fn</code>ï¼Œè€Œæ˜¯æ¯è¿‡<code>ms</code>ç§’ï¼Œä¼šæœ‰<code>fn</code>è¿›å…¥Event Queueã€‚ä¸€æ—¦**<code>setInterval</code>çš„å›è°ƒå‡½æ•°<code>fn</code>æ‰§è¡Œæ—¶é—´è¶…è¿‡äº†å»¶è¿Ÿæ—¶é—´<code>ms</code>ï¼Œé‚£ä¹ˆå°±å®Œå…¨çœ‹ä¸å‡ºæ¥æœ‰æ—¶é—´é—´éš”äº†**ã€‚è¿™å¥è¯è¯·è¯»è€…ä»”ç»†å“å‘³ã€‚</p><h2 id="Promiseä¸process-nextTick-callback">Promiseä¸process.nextTick(callback)</h2><p>ä¼ ç»Ÿçš„å®šæ—¶å™¨æˆ‘ä»¬å·²ç»ç ”ç©¶è¿‡äº†ï¼Œæ¥ç€æˆ‘ä»¬æ¢ç©¶<code>Promise</code>ä¸<code>process.nextTick(callback)</code>çš„è¡¨ç°ã€‚</p><p><code>Promise</code>çš„å®šä¹‰å’ŒåŠŸèƒ½æœ¬æ–‡ä¸å†èµ˜è¿°ï¼Œä¸äº†è§£çš„è¯»è€…å¯ä»¥å­¦ä¹ ä¸€ä¸‹é˜®ä¸€å³°è€å¸ˆçš„<a href="https://link.juejin.cn?target=http%3A%2F%2Fes6.ruanyifeng.com%2F%23docs%2Fpromise">Promise</a>ã€‚è€Œ<code>process.nextTick(callback)</code>ç±»ä¼¼node.jsç‰ˆçš„&quot;setTimeout&quot;ï¼Œåœ¨äº‹ä»¶å¾ªç¯çš„ä¸‹ä¸€æ¬¡å¾ªç¯ä¸­è°ƒç”¨ callback å›è°ƒå‡½æ•°ã€‚</p><p>æˆ‘ä»¬è¿›å…¥æ­£é¢˜ï¼Œé™¤äº†å¹¿ä¹‰çš„åŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡ï¼Œæˆ‘ä»¬å¯¹ä»»åŠ¡æœ‰æ›´ç²¾ç»†çš„å®šä¹‰ï¼š</p><ul><li>macro-task(å®ä»»åŠ¡)ï¼šåŒ…æ‹¬æ•´ä½“ä»£ç scriptï¼ŒsetTimeoutï¼ŒsetInterval</li><li>micro-task(å¾®ä»»åŠ¡)ï¼šPromiseï¼Œprocess.nextTick</li></ul><p>ä¸åŒç±»å‹çš„ä»»åŠ¡ä¼šè¿›å…¥å¯¹åº”çš„Event Queueï¼Œæ¯”å¦‚<code>setTimeout</code>å’Œ<code>setInterval</code>ä¼šè¿›å…¥ç›¸åŒçš„Event Queueã€‚</p><p>äº‹ä»¶å¾ªç¯çš„é¡ºåºï¼Œå†³å®šjsä»£ç çš„æ‰§è¡Œé¡ºåºã€‚è¿›å…¥æ•´ä½“ä»£ç (å®ä»»åŠ¡)åï¼Œå¼€å§‹ç¬¬ä¸€æ¬¡å¾ªç¯ã€‚æ¥ç€æ‰§è¡Œæ‰€æœ‰çš„å¾®ä»»åŠ¡ã€‚ç„¶åå†æ¬¡ä»å®ä»»åŠ¡å¼€å§‹ï¼Œæ‰¾åˆ°å…¶ä¸­ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—æ‰§è¡Œå®Œæ¯•ï¼Œå†æ‰§è¡Œæ‰€æœ‰çš„å¾®ä»»åŠ¡ã€‚å¬èµ·æ¥æœ‰ç‚¹ç»•ï¼Œæˆ‘ä»¬ç”¨æ–‡ç« æœ€å¼€å§‹çš„ä¸€æ®µä»£ç è¯´æ˜ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;setTimeout&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;promise&#x27;</span>);</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;then&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;console&#x27;</span>);</span><br></pre></td></tr></table></figure><ul><li>è¿™æ®µä»£ç ä½œä¸ºå®ä»»åŠ¡ï¼Œè¿›å…¥ä¸»çº¿ç¨‹ã€‚</li><li>å…ˆé‡åˆ°<code>setTimeout</code>ï¼Œé‚£ä¹ˆå°†å…¶å›è°ƒå‡½æ•°æ³¨å†Œååˆ†å‘åˆ°å®ä»»åŠ¡Event Queueã€‚(æ³¨å†Œè¿‡ç¨‹ä¸ä¸ŠåŒï¼Œä¸‹æ–‡ä¸å†æè¿°)</li><li>æ¥ä¸‹æ¥é‡åˆ°äº†<code>Promise</code>ï¼Œ<code>new Promise</code>ç«‹å³æ‰§è¡Œï¼Œ<code>then</code>å‡½æ•°åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueã€‚</li><li>é‡åˆ°<code>console.log()</code>ï¼Œç«‹å³æ‰§è¡Œã€‚</li><li>å¥½å•¦ï¼Œæ•´ä½“ä»£ç scriptä½œä¸ºç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œç»“æŸï¼Œçœ‹çœ‹æœ‰å“ªäº›å¾®ä»»åŠ¡ï¼Ÿæˆ‘ä»¬å‘ç°äº†<code>then</code>åœ¨å¾®ä»»åŠ¡Event Queueé‡Œé¢ï¼Œæ‰§è¡Œã€‚</li><li>okï¼Œç¬¬ä¸€è½®äº‹ä»¶å¾ªç¯ç»“æŸäº†ï¼Œæˆ‘ä»¬å¼€å§‹ç¬¬äºŒè½®å¾ªç¯ï¼Œå½“ç„¶è¦ä»å®ä»»åŠ¡Event Queueå¼€å§‹ã€‚æˆ‘ä»¬å‘ç°äº†å®ä»»åŠ¡Event Queueä¸­<code>setTimeout</code>å¯¹åº”çš„å›è°ƒå‡½æ•°ï¼Œç«‹å³æ‰§è¡Œã€‚</li><li>ç»“æŸã€‚</li></ul><p>äº‹ä»¶å¾ªç¯ï¼Œå®ä»»åŠ¡ï¼Œå¾®ä»»åŠ¡çš„å…³ç³»å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/15fdcea13361a1ec~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p><p>æˆ‘ä»¬æ¥åˆ†æä¸€æ®µè¾ƒå¤æ‚çš„ä»£ç ï¼Œçœ‹çœ‹ä½ æ˜¯å¦çœŸçš„æŒæ¡äº†jsçš„æ‰§è¡Œæœºåˆ¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;2&#x27;</span>);</span><br><span class="line">    process.<span class="title function_">nextTick</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;3&#x27;</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;4&#x27;</span>);</span><br><span class="line">        <span class="title function_">resolve</span>();</span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;5&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">process.<span class="title function_">nextTick</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;6&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;7&#x27;</span>);</span><br><span class="line">    <span class="title function_">resolve</span>();</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;8&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;9&#x27;</span>);</span><br><span class="line">    process.<span class="title function_">nextTick</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;10&#x27;</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;11&#x27;</span>);</span><br><span class="line">        <span class="title function_">resolve</span>();</span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;12&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€è½®äº‹ä»¶å¾ªç¯æµç¨‹åˆ†æå¦‚ä¸‹ï¼š</p><ul><li>æ•´ä½“scriptä½œä¸ºç¬¬ä¸€ä¸ªå®ä»»åŠ¡è¿›å…¥ä¸»çº¿ç¨‹ï¼Œé‡åˆ°<code>console.log</code>ï¼Œè¾“å‡º1ã€‚</li><li>é‡åˆ°<code>setTimeout</code>ï¼Œå…¶å›è°ƒå‡½æ•°è¢«åˆ†å‘åˆ°å®ä»»åŠ¡Event Queueä¸­ã€‚æˆ‘ä»¬æš‚ä¸”è®°ä¸º<code>setTimeout1</code>ã€‚</li><li>é‡åˆ°<code>process.nextTick()</code>ï¼Œå…¶å›è°ƒå‡½æ•°è¢«åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ã€‚æˆ‘ä»¬è®°ä¸º<code>process1</code>ã€‚</li><li>é‡åˆ°<code>Promise</code>ï¼Œ<code>new Promise</code>ç›´æ¥æ‰§è¡Œï¼Œè¾“å‡º7ã€‚<code>then</code>è¢«åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ã€‚æˆ‘ä»¬è®°ä¸º<code>then1</code>ã€‚</li><li>åˆé‡åˆ°äº†<code>setTimeout</code>ï¼Œå…¶å›è°ƒå‡½æ•°è¢«åˆ†å‘åˆ°å®ä»»åŠ¡Event Queueä¸­ï¼Œæˆ‘ä»¬è®°ä¸º<code>setTimeout2</code>ã€‚</li></ul><table><thead><tr><th style="text-align:center">å®ä»»åŠ¡Event Queue</th><th style="text-align:center">å¾®ä»»åŠ¡Event Queue</th></tr></thead><tbody><tr><td style="text-align:center">setTimeout1</td><td style="text-align:center">process1</td></tr><tr><td style="text-align:center">setTimeout2</td><td style="text-align:center">then1</td></tr></tbody></table><ul><li>ä¸Šè¡¨æ˜¯ç¬¬ä¸€è½®äº‹ä»¶å¾ªç¯å®ä»»åŠ¡ç»“æŸæ—¶å„Event Queueçš„æƒ…å†µï¼Œæ­¤æ—¶å·²ç»è¾“å‡ºäº†1å’Œ7ã€‚</li><li>æˆ‘ä»¬å‘ç°äº†<code>process1</code>å’Œ<code>then1</code>ä¸¤ä¸ªå¾®ä»»åŠ¡ã€‚</li><li>æ‰§è¡Œ<code>process1</code>,è¾“å‡º6ã€‚</li><li>æ‰§è¡Œ<code>then1</code>ï¼Œè¾“å‡º8ã€‚</li></ul><p>å¥½äº†ï¼Œç¬¬ä¸€è½®äº‹ä»¶å¾ªç¯æ­£å¼ç»“æŸï¼Œè¿™ä¸€è½®çš„ç»“æœæ˜¯è¾“å‡º1ï¼Œ7ï¼Œ6ï¼Œ8ã€‚é‚£ä¹ˆç¬¬äºŒè½®æ—¶é—´å¾ªç¯ä»<code>setTimeout1</code>å®ä»»åŠ¡å¼€å§‹ï¼š</p><ul><li>é¦–å…ˆè¾“å‡º2ã€‚æ¥ä¸‹æ¥é‡åˆ°äº†<code>process.nextTick()</code>ï¼ŒåŒæ ·å°†å…¶åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ï¼Œè®°ä¸º<code>process2</code>ã€‚<code>new Promise</code>ç«‹å³æ‰§è¡Œè¾“å‡º4ï¼Œ<code>then</code>ä¹Ÿåˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ï¼Œè®°ä¸º<code>then2</code>ã€‚</li></ul><table><thead><tr><th style="text-align:center">å®ä»»åŠ¡Event Queue</th><th style="text-align:center">å¾®ä»»åŠ¡Event Queue</th></tr></thead><tbody><tr><td style="text-align:center">setTimeout2</td><td style="text-align:center">process2</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">then2</td></tr></tbody></table><ul><li>ç¬¬äºŒè½®äº‹ä»¶å¾ªç¯å®ä»»åŠ¡ç»“æŸï¼Œæˆ‘ä»¬å‘ç°æœ‰<code>process2</code>å’Œ<code>then2</code>ä¸¤ä¸ªå¾®ä»»åŠ¡å¯ä»¥æ‰§è¡Œã€‚</li><li>è¾“å‡º3ã€‚</li><li>è¾“å‡º5ã€‚</li><li>ç¬¬äºŒè½®äº‹ä»¶å¾ªç¯ç»“æŸï¼Œç¬¬äºŒè½®è¾“å‡º2ï¼Œ4ï¼Œ3ï¼Œ5ã€‚</li><li>ç¬¬ä¸‰è½®äº‹ä»¶å¾ªç¯å¼€å§‹ï¼Œæ­¤æ—¶åªå‰©setTimeout2äº†ï¼Œæ‰§è¡Œã€‚</li><li>ç›´æ¥è¾“å‡º9ã€‚</li><li>å°†<code>process.nextTick()</code>åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ã€‚è®°ä¸º<code>process3</code>ã€‚</li><li>ç›´æ¥æ‰§è¡Œ<code>new Promise</code>ï¼Œè¾“å‡º11ã€‚</li><li>å°†<code>then</code>åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ï¼Œè®°ä¸º<code>then3</code>ã€‚</li></ul><table><thead><tr><th>å®ä»»åŠ¡Event Queue</th><th style="text-align:center">å¾®ä»»åŠ¡Event Queue</th></tr></thead><tbody><tr><td></td><td style="text-align:center">process3</td></tr><tr><td></td><td style="text-align:center">then3</td></tr></tbody></table><ul><li>ç¬¬ä¸‰è½®äº‹ä»¶å¾ªç¯å®ä»»åŠ¡æ‰§è¡Œç»“æŸï¼Œæ‰§è¡Œä¸¤ä¸ªå¾®ä»»åŠ¡<code>process3</code>å’Œ<code>then3</code>ã€‚</li><li>è¾“å‡º10ã€‚</li><li>è¾“å‡º12ã€‚</li><li>ç¬¬ä¸‰è½®äº‹ä»¶å¾ªç¯ç»“æŸï¼Œç¬¬ä¸‰è½®è¾“å‡º9ï¼Œ11ï¼Œ10ï¼Œ12ã€‚</li></ul><p>æ•´æ®µä»£ç ï¼Œå…±è¿›è¡Œäº†ä¸‰æ¬¡äº‹ä»¶å¾ªç¯ï¼Œå®Œæ•´çš„è¾“å‡ºä¸º1ï¼Œ7ï¼Œ6ï¼Œ8ï¼Œ2ï¼Œ4ï¼Œ3ï¼Œ5ï¼Œ9ï¼Œ11ï¼Œ10ï¼Œ12ã€‚ (è¯·æ³¨æ„ï¼Œnodeç¯å¢ƒä¸‹çš„äº‹ä»¶ç›‘å¬ä¾èµ–libuvä¸å‰ç«¯ç¯å¢ƒä¸å®Œå…¨ç›¸åŒï¼Œè¾“å‡ºé¡ºåºå¯èƒ½ä¼šæœ‰è¯¯å·®)</p><h2 id="å†™åœ¨æœ€å">å†™åœ¨æœ€å</h2><h3 id="jsçš„å¼‚æ­¥">jsçš„å¼‚æ­¥</h3><p>æˆ‘ä»¬ä»æœ€å¼€å¤´å°±è¯´javascriptæ˜¯ä¸€é—¨å•çº¿ç¨‹è¯­è¨€ï¼Œä¸ç®¡æ˜¯ä»€ä¹ˆæ–°æ¡†æ¶æ–°è¯­æ³•ç³–å®ç°çš„æ‰€è°“å¼‚æ­¥ï¼Œå…¶å®éƒ½æ˜¯ç”¨åŒæ­¥çš„æ–¹æ³•å»æ¨¡æ‹Ÿçš„ï¼Œç‰¢ç‰¢æŠŠæ¡ä½å•çº¿ç¨‹è¿™ç‚¹éå¸¸é‡è¦ã€‚</p><h3 id="äº‹ä»¶å¾ªç¯Event-Loop">äº‹ä»¶å¾ªç¯Event Loop</h3><p>äº‹ä»¶å¾ªç¯æ˜¯jså®ç°å¼‚æ­¥çš„ä¸€ç§æ–¹æ³•ï¼Œä¹Ÿæ˜¯jsçš„æ‰§è¡Œæœºåˆ¶ã€‚</p><h3 id="javascriptçš„æ‰§è¡Œå’Œè¿è¡Œ">javascriptçš„æ‰§è¡Œå’Œè¿è¡Œ</h3><p>æ‰§è¡Œå’Œè¿è¡Œæœ‰å¾ˆå¤§çš„åŒºåˆ«ï¼Œjavascriptåœ¨ä¸åŒçš„ç¯å¢ƒä¸‹ï¼Œæ¯”å¦‚nodeï¼Œæµè§ˆå™¨ï¼ŒRingoç­‰ç­‰ï¼Œæ‰§è¡Œæ–¹å¼æ˜¯ä¸åŒçš„ã€‚è€Œè¿è¡Œå¤§å¤šæŒ‡javascriptè§£æå¼•æ“ï¼Œæ˜¯ç»Ÿä¸€çš„ã€‚</p><h3 id="setImmediate">setImmediate</h3><p>å¾®ä»»åŠ¡å’Œå®ä»»åŠ¡è¿˜æœ‰å¾ˆå¤šç§ç±»ï¼Œæ¯”å¦‚<code>setImmediate</code>ç­‰ç­‰ï¼Œæ‰§è¡Œéƒ½æ˜¯æœ‰å…±åŒç‚¹çš„ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è‡ªè¡Œäº†è§£ã€‚</p><h3 id="æœ€åçš„æœ€å">æœ€åçš„æœ€å</h3><ul><li>javascriptæ˜¯ä¸€é—¨å•çº¿ç¨‹è¯­è¨€</li><li>Event Loopæ˜¯javascriptçš„æ‰§è¡Œæœºåˆ¶</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;äº‹ä»¶å¾ªç¯æœºåˆ¶&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;javascriptæ˜¯ä¸€é—¨&lt;strong&gt;å•çº¿ç¨‹&lt;/strong&gt;è¯­è¨€ã€‚&lt;/li&gt;
&lt;li&gt;Javascriptäº‹ä»¶å¾ªç¯&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src= &quot;/img/loading.gif&quot; data-lazy-s</summary>
      
    
    
    
    <category term="é¢è¯•å®å…¸âœ¨" scheme="https://blog.cilicili.xyz/categories/%E9%9D%A2%E8%AF%95%E5%AE%9D%E5%85%B8%E2%9C%A8/"/>
    
    
    <category term="JavaScript" scheme="https://blog.cilicili.xyz/tags/JavaScript/"/>
    
    <category term="å®ç°åŸç†" scheme="https://blog.cilicili.xyz/tags/%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>ã€é¢è¯•ã€‘VueåŸç†é¢è¯•é¢˜æ€»ç»“</title>
    <link href="https://blog.cilicili.xyz/posts/714ca07c.html"/>
    <id>https://blog.cilicili.xyz/posts/714ca07c.html</id>
    <published>2022-09-14T12:29:52.000Z</published>
    <updated>2022-09-15T02:18:20.903Z</updated>
    
    <content type="html"><![CDATA[<h1>æ•°æ®é©±åŠ¨è§†å›¾</h1><h2 id="MVVMæ¨¡å‹-v2">MVVMæ¨¡å‹</h2><ol><li><p><code>MVVM</code> æ˜¯<code>Model-View-ViewModel</code> çš„ç¼©å†™ï¼Œå®ƒæ˜¯ä¸€ç§<strong>åŸºäºå‰ç«¯å¼€å‘çš„æ¶æ„æ¨¡å¼</strong>ï¼Œå…¶<strong>æ ¸å¿ƒ</strong>æ˜¯<strong>æä¾›å¯¹View å’Œ ViewModel çš„åŒå‘æ•°æ®ç»‘å®š</strong>ï¼Œè¿™ä½¿å¾—ViewModel çš„çŠ¶æ€æ”¹å˜å¯ä»¥è‡ªåŠ¨ä¼ é€’ç»™ Viewï¼Œå³æ‰€è°“çš„<strong>æ•°æ®åŒå‘ç»‘å®š</strong>ã€‚</p></li><li><p>åœ¨<code>MVVM</code>çš„æ¶æ„ä¸‹ï¼Œ<code>Viewå±‚</code>å’Œ<code>Modelå±‚</code>å¹¶æ²¡æœ‰ç›´æ¥è”ç³»ï¼Œè€Œæ˜¯é€šè¿‡<code>ViewModelå±‚</code>è¿›è¡Œäº¤äº’ã€‚<code>ViewModelå±‚</code>é€šè¿‡<strong>åŒå‘æ•°æ®ç»‘å®š</strong>å°†<code>Viewå±‚</code>å’Œ<code>Modelå±‚</code>è¿æ¥äº†èµ·æ¥ï¼Œä½¿å¾—<code>Viewå±‚</code>å’Œ<code>Modelå±‚</code>çš„åŒæ­¥å·¥ä½œå®Œå…¨æ˜¯è‡ªåŠ¨çš„ã€‚å› æ­¤å¼€å‘è€…åªéœ€å…³æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œ<strong>æ— éœ€æ‰‹åŠ¨æ“ä½œDOMï¼Œå¤æ‚çš„æ•°æ®çŠ¶æ€ç»´æŠ¤äº¤ç»™MVVMç»Ÿä¸€æ¥ç®¡ç†</strong>ã€‚</p></li></ol><blockquote><ul><li>Mï¼šæ¨¡å‹<strong>Model</strong>ï¼Œ<code>data</code>ä¸­çš„æ•°æ®</li><li>Vï¼šè§†å›¾<strong>View</strong>ï¼Œæ¨¡æ¿ä»£ç </li><li>VMï¼šè§†å›¾æ¨¡å‹<strong>ViewModel</strong>ï¼Œ<code>Vueå®ä¾‹</code></li></ul></blockquote><p>è§‚å¯Ÿå‘ç°</p><ul><li><code>data</code>ä¸­æ‰€æœ‰çš„å±æ€§ï¼Œæœ€åéƒ½å‡ºç°åœ¨äº†<code>vm</code>èº«ä¸Š</li><li><code>vm</code>èº«ä¸Šæ‰€æœ‰çš„å±æ€§åŠ<code>VueåŸå‹</code>èº«ä¸Šæ‰€æœ‰çš„å±æ€§ï¼Œåœ¨<code>Vueæ¨¡æ¿</code>ä¸­éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨</li></ul><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/1643097677438-36b4834c-18e8-4cd0-aa8e-c5f154e6bde0.jpeg" alt="img"></p><p><strong>æœ¬è´¨</strong>ï¼š<strong>äº‹ä»¶ + æ–¹æ³• + æ”¹å˜æ•°æ® = ViewModel</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> @<span class="attr">click</span>=<span class="string">&quot;changeName&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span>   // äº‹ä»¶</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123;   </span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;vue&#x27;</span>,</span><br><span class="line"><span class="attr">list</span>: [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>]</span><br><span class="line">&#125;</span><br><span class="line">&#125;  <span class="comment">// Model</span></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">changeName</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;åŒè¶Š&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;  <span class="comment">// æ–¹æ³•</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>Vue.jsä¸­MVVMçš„ä½“ç°:</strong></p><p>Vue.jsçš„å®ç°æ–¹å¼ï¼Œæ˜¯å¯¹<strong>æ•°æ®ï¼ˆModelï¼‰è¿›è¡ŒåŠ«æŒ</strong>ï¼Œå½“æ•°æ®å˜åŠ¨æ—¶ï¼Œæ•°æ®ä¼šè§¦å‘åŠ«æŒæ—¶ç»‘å®šçš„æ–¹æ³•ï¼Œå¯¹è§†å›¾è¿›è¡Œæ›´æ–°ã€‚</p></blockquote><h2 id="å®ç°ç»†èŠ‚">å®ç°ç»†èŠ‚</h2><p><code>Vue</code>æ˜¯é‡‡ç”¨<code>Object.defineProperty</code>çš„<code>getter</code>å’Œ<code>setter</code>ï¼Œå¹¶ç»“åˆè§‚å¯Ÿè€…æ¨¡å¼æ¥å®ç°æ•°æ®ç»‘å®šçš„ã€‚å½“æŠŠä¸€ä¸ªæ™®é€šçš„<code>javascriptå¯¹è±¡</code>ä¼ ç»™<code>Vueå®ä¾‹</code>æ¥ä½œä¸ºå®ƒçš„<code>dataé€‰é¡¹</code>æ—¶ï¼ŒVueå°†<code>éå†</code>å®ƒçš„å±æ€§ï¼Œç”¨<code>Object.defineProperty</code>å°†å®ƒä»¬è½¬ä¸º<code>getter/setter</code>ã€‚ç”¨æˆ·çœ‹ä¸åˆ°<code>getter/setter</code>ï¼Œä½†æ˜¯åœ¨å†…éƒ¨å®ƒä»¬è®©Vue<code>è¿½è¸ªä¾èµ–</code>ï¼Œåœ¨å±æ€§è¢«è®¿é—®å’Œä¿®æ”¹æ—¶é€šçŸ¥å˜åŒ–ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20190218152745303.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzYxNTkx,size_16,color_FFFFFF,t_70" alt="vueåŒå‘ç»‘å®šå›¾ç¤º"></p><ul><li><p><strong>Observeræ•°æ®ç›‘å¬å™¨</strong>ï¼Œèƒ½å¤Ÿå¯¹æ•°æ®å¯¹è±¡çš„æ‰€æœ‰å±æ€§è¿›è¡Œç›‘å¬ï¼Œå¦‚æœ‰å˜åŠ¨å¯æ‹¿åˆ°æœ€æ–°çš„å€¼å¹¶é€šçŸ¥è®¢é˜…è€…ï¼Œå†…éƒ¨é‡‡ç”¨çš„Obiect.definePropertyçš„getterå’Œsetteræ¥å®ç°ã€‚</p></li><li><p><strong>complieæŒ‡ä»¤è§£æå™¨</strong>ï¼Œå®ƒçš„ä½œç”¨å¯¹æ¯ä¸ªå…ƒç´ èŠ‚ç‚¹çš„æŒ‡ä»¤è¿›è¡Œæ‰«æå’Œè§£æï¼Œæ ¹æ®æŒ‡ä»¤æ¨¡æ¿æ›¿æ¢æ•°æ®ï¼Œä»¥åŠç»‘å®šObserverå’ŒComplieçš„æ¡¥æ¢,èƒ½å¤Ÿè®¢é˜…å¹¶æ”¶åˆ°æ¯ä¸ªå±æ€§å˜åŠ¨çš„é€šçŸ¥ï¼Œæ‰§è¡ŒæŒ‡ä»¤ç»‘å®šçš„ç›¸åº”çš„å›è°ƒå‡½æ•°</p></li><li><p><strong>Watcherè®¢é˜…è€…</strong>ï¼Œä½œä¸ºè¿æ¥Observerå’ŒComplieçš„æ¡¥æ¢,èƒ½å¤Ÿè®¢é˜…å¹¶æ”¶åˆ°æ¯ä¸ªå±æ€§å˜åŠ¨çš„é€šçŸ¥ï¼Œæ‰§è¡ŒæŒ‡ä»¤ç»‘å®šçš„ç›¸åº”å›è°ƒå‡½æ•°ã€‚</p></li><li><p><strong>Depæ¶ˆæ¯è®¢é˜…å™¨</strong>ï¼Œå†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªæ•°ç»„ï¼Œç”¨æ¥æ”¶é›†è®¢é˜…è€…ï¼ˆwatcherï¼‰,æ•°æ®å˜åŠ¨è§¦å‘notifyå‡½æ•°ï¼Œå†è°ƒç”¨è®¢é˜…è€…çš„updateæ–¹æ³•ã€‚</p><p>ä»¥ä¸Šè¿‡ç¨‹å¯æ€»ç»“ä¸ºï¼š</p></li></ul><blockquote><ul><li>Observerç›¸å½“äºModelå±‚è§‚å¯Ÿvueå®ä¾‹ä¸­çš„dataæ•°æ®ï¼Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé€šçŸ¥Watcherè®¢é˜…è€…ã€‚</li><li>CompileæŒ‡ä»¤è§£æå™¨ä½äºViewå±‚ï¼Œåˆå§‹åŒ–Viewçš„è§†å›¾ï¼Œå°†æ•°æ®å˜åŒ–ä¸æ›´æ–°å‡½æ•°ç»‘å®šï¼Œä¼ ç»™Watcherè®¢é˜…è€…ã€‚</li><li>Watcheræ˜¯æ•´ä¸ªæ¨¡å‹çš„æ ¸å¿ƒï¼Œå¯¹åº”ViewModelå±‚ï¼Œè¿æ¥Observerå’ŒCompileã€‚æ‰€æœ‰çš„Watcherså­˜äºDepè®¢é˜…å™¨ä¸­ï¼ŒWatcherå°†Observerç›‘å¬åˆ°çš„æ•°æ®å˜åŒ–å¯¹åº”ç›¸åº”çš„å›è°ƒå‡½æ•°ï¼Œå¤„ç†æ•°æ®ï¼Œåé¦ˆç»™Viewå±‚æ›´æ–°ç•Œé¢è§†å›¾ã€‚</li></ul></blockquote><blockquote><p>å‚è€ƒæ–‡ç« :</p><p><strong><a href="https://juejin.cn/post/6844903630546403336#heading-8">æ·±å…¥MVVMæ¨¡å‹å¸¦ä½ ç†è§£Vue.jsçš„åŒå‘ç»‘å®š</a></strong></p><p><a href="https://blog.csdn.net/qq_41761591/article/details/87621440">MVVMæ¨¡å‹ç®€å•ä»‹ç»</a></p></blockquote><h1>Vueå“åº”å¼</h1><p><code>vue</code>æ˜¯ä¸€ä¸ª<code>MVVM</code>æ¡†æ¶ï¼Œæ‰€è°“<code>MVVM</code>ï¼Œæœ€æ ¸å¿ƒçš„å°±æ˜¯æ•°æ®é©±åŠ¨è§†å›¾ï¼Œé€šä¿—ä¸€ç‚¹è®²å°±æ˜¯ï¼Œç”¨æˆ·ä¸ç›´æ¥æ“ä½œ<code>dom</code>ï¼Œè€Œæ˜¯é€šè¿‡æ“ä½œæ•°æ®ï¼Œå½“æ•°æ®æ”¹å˜æ—¶ï¼Œ<code>vue</code>å†…éƒ¨ç›‘å¬æ•°æ®å˜åŒ–ç„¶åæ›´æ–°è§†å›¾ã€‚åŒæ ·ï¼Œç”¨æˆ·åœ¨è§†å›¾ä¸Šçš„æ“ä½œï¼ˆäº‹ä»¶ï¼‰ä¹Ÿä¼šåè¿‡æ¥æ”¹å˜æ•°æ®ã€‚è€Œå“åº”å¼ï¼Œåˆ™æ˜¯å®ç°æ•°æ®é©±åŠ¨è§†å›¾çš„ç¬¬ä¸€æ­¥ï¼Œå³ç›‘å¬æ•°æ®çš„å˜åŒ–ï¼Œä½¿å¾—ç”¨æˆ·åœ¨è®¾ç½®æ•°æ®æ—¶ï¼Œå¯ä»¥é€šçŸ¥<code>vue</code>å†…éƒ¨è¿›è¡Œè§†å›¾æ›´æ–°ã€‚</p><blockquote><p>å³ç»„ä»¶dataçš„æ•°æ®ä¸€æ—¦å˜åŒ–ï¼Œç«‹åˆ»è§¦å‘è§†å›¾çš„æ›´æ–°ï¼Œæ˜¯å®ç°æ•°æ®é©±åŠ¨è§†å›¾çš„ç¬¬ä¸€æ­¥ã€‚</p></blockquote><p><strong>ä¸€äº›å°é—®é¢˜</strong>ï¼š</p><ul><li><p>æ ¸å¿ƒAPI-<code>Object.defineProperty</code></p><blockquote><p>é€šè¿‡è®¾å®šå¯¹è±¡å±æ€§<code>getter/setter</code>æ–¹æ³•æ¥ç›‘å¬æ•°æ®çš„å˜åŒ–ï¼›</p><p>åŒæ—¶<code>getter</code>ä¹Ÿç”¨äºæ”¶é›†ä¾èµ–ï¼Œè€Œ<code>setter</code>åœ¨æ•°æ®å˜æ›´æ—¶é€šçŸ¥è®¢é˜…è€…æ›´æ–°è§†å›¾ã€‚</p></blockquote></li><li><p>å¦‚ä½•å®ç°<strong>å“åº”å¼</strong>ï¼Œä»£ç æ¼”ç¤ºã€‚</p></li><li><p><code>Object.defineProperty</code>çš„ä¸€äº›ç¼ºç‚¹</p></li><li><p><code>proxy</code>å­˜åœ¨<strong>å…¼å®¹æ€§é—®é¢˜</strong>ï¼Œä¸”æ— æ³•<code>polyfill</code></p></li></ul><h2 id="Vue2-xå®ç°å“åº”å¼">Vue2.xå®ç°å“åº”å¼</h2><h3 id="Object-definePropertyå¦‚ä½•å®ç°å“åº”å¼ï¼ˆä»£ç å®ç°ï¼‰">Object.definePropertyå¦‚ä½•å®ç°å“åº”å¼ï¼ˆä»£ç å®ç°ï¼‰</h3><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220909204915331.png" alt="image-20220909204915331" style="zoom: 33%;" /><p>ä¸Šé¢ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ<code>Object.defineProperty()</code>çš„ç”¨æ³•å°±æ˜¯ç»™ä¸€ä¸ªå¯¹è±¡å®šä¹‰ä¸€ä¸ª<strong>å±æ€§ï¼ˆæ–¹æ³•ï¼‰</strong>ï¼Œå¹¶æä¾›<code>set</code>å’Œ<code>get</code>ä¸¤ä¸ªå†…éƒ¨å®ç°ï¼Œè®©æˆ‘ä»¬å¯ä»¥<strong>è·å–</strong>æˆ–è€…<strong>è®¾ç½®</strong>è¿™ä¸ªå±æ€§ï¼ˆæ–¹æ³•ï¼‰ã€‚</p><blockquote><ul><li><p>å¯¹äº<strong>åŸå§‹ç±»å‹å’Œå¯¹è±¡</strong>ï¼ˆå¦‚å­—ç¬¦ä¸²ã€æ•°å­—å’Œå¸ƒå°”å€¼ç­‰ï¼‰ï¼š<strong>ç›´æ¥è¿”å›</strong></p></li><li><p>å¯¹äº<strong>å¼•ç”¨ç±»å‹å¯¹è±¡</strong>ï¼šæˆ‘ä»¬å°±éœ€è¦<strong>å¯¹å¯¹è±¡è¿›è¡Œéå†</strong>ï¼Œ<strong>åˆ†åˆ«è®¾ç½®</strong>å¯¹å¯¹è±¡çš„æ¯ä¸€ä¸ª<strong>keyå€¼</strong>ä½¿ç”¨<code>Object.defineProperty()</code>ã€‚æ³¨æ„ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯<strong>éœ€è¦é€’å½’è°ƒç”¨</strong>çš„ï¼Œå› ä¸ºæˆ‘ä»¬ç»™å‡ºçš„æ•°æ®å¯¹è±¡<strong>å¯èƒ½æ˜¯å¤šå±‚åµŒå¥—</strong>çš„ã€‚</p></li><li><p>å¯¹äº<strong>æ•°ç»„</strong>ï¼š<code>Object.defineProperty()</code>æ˜¯æ— æ³•å¯¹æ•°ç»„å®ç°å“åº”å¼çš„ï¼Œå› æ­¤ï¼Œ<code>Vue</code>æ”¹å†™äº†æ•°ç»„çš„æ–¹æ³•ã€‚</p></li></ul><p>æ­¤<strong>æ ¸å¿ƒæ–¹æ³•</strong>ä¸º<code>Object.create(prototype)</code>ï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯<strong>åˆ›å»ºä¸€ä¸ªå¯¹è±¡</strong>ï¼Œä½¿ä»–çš„<strong>åŸå‹æŒ‡å‘å‚æ•°prototype</strong>ã€‚</p></blockquote><h4 id="Object-definePropertyå­˜åœ¨çš„é—®é¢˜">Object.definePropertyå­˜åœ¨çš„é—®é¢˜</h4><ol><li><p><strong>æ— æ³•æ£€æµ‹åˆ°å¯¹è±¡å±æ€§çš„æ–°å¢æˆ–åˆ é™¤</strong></p><p>åªèƒ½è¿½è¸ªå¯¹è±¡å·²æœ‰æ•°æ®æ˜¯å¦è¢«ä¿®æ”¹ï¼Œæ— æ³•è¿½è¸ªæ–°å¢å±æ€§å’Œåˆ é™¤å±æ€§ã€‚</p><p>ç›®å‰<strong>Vue</strong>ä¿è¯å“åº”å¼å¯¹è±¡æ–°å¢å±æ€§ä¹Ÿæ˜¯å“åº”å¼çš„ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li><p><code>Vue.set(obj, properName/index, value)</code></p></li><li><p>å“åº”å¼å¯¹è±¡çš„å­å¯¹è±¡æ–°å¢å±æ€§ï¼Œå¯ä»¥ç»™å­å“åº”å¼å¯¹è±¡é‡æ–°èµ‹å€¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data.<span class="property">location</span> = &#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="attr">y</span>: <span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line">data.<span class="property">location</span> = &#123;...data, <span class="attr">z</span>: <span class="number">100</span>&#125;</span><br></pre></td></tr></table></figure></li><li><p>å“åº”å¼å¯¹è±¡åˆ é™¤å±æ€§ï¼Œå¯ä»¥ä½¿ç”¨<code>Vue.delete(obj, propertyName/index)</code>æˆ–è€…<code>vue.$delete(obj, propertyName/index)</code>; ç±»ä¼¼äºåˆ é™¤å“åº”å¼å¯¹è±¡å­å¯¹è±¡çš„æŸä¸ªå±æ€§ï¼Œä¹Ÿå¯ä»¥é‡æ–°ç»™å­å¯¹è±¡èµ‹å€¼æ¥è§£å†³ã€‚</p></li></ul></li><li><p><strong>ä¸èƒ½ç›‘å¬æ•°ç»„çš„å˜åŒ–</strong></p><ul><li><p><strong>Vue</strong>åœ¨å®ç°æ•°ç»„çš„å“åº”å¼æ—¶ï¼ŒæŠŠæ— æ³•ç›‘å¬æ•°ç»„çš„æƒ…å†µé€šè¿‡<strong>é‡å†™æ•°ç»„çš„éƒ¨åˆ†æ–¹æ³•</strong>æ¥å®ç°å“åº”å¼ã€‚</p></li><li><p>è¿™ä¹Ÿåªé™åˆ¶åœ¨æ•°ç»„çš„<code>push/pop/shift/unshift/splice/sort/reverse</code>ä¸ƒä¸ªæ–¹æ³•ï¼Œå…¶ä»–æ•°ç»„æ–¹æ³•åŠæ•°ç»„çš„ä½¿ç”¨åˆ™æ— æ³•æ£€æµ‹åˆ°ï¼Œä¾‹å¦‚å¦‚ä¸‹ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vm.<span class="property">items</span>[index] = newValue</span><br><span class="line"></span><br><span class="line">vm.<span class="property">items</span>.<span class="property">length</span>--</span><br></pre></td></tr></table></figure></li><li><p>Vueå®ç°æ•°ç»„çš„å“åº”å¼å¹¶ä¸æ˜¯é‡å†™æ•°ç»„çš„<code>Array.prototype</code>å¯¹åº”çš„æ–¹æ³•ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯é‡æ–°æŒ‡å®šè¦æ“ä½œæ•°ç»„çš„<code>prototype</code>ï¼Œå¹¶é‡å†™<code>prototype</code>ä¸­å¯¹åº”çš„7ä¸ªæ•°ç»„æ–¹æ³•ã€‚</p></li></ul></li><li><p><strong>æ·±åº¦ç›‘å¬ï¼Œéœ€è¦ä¸€æ¬¡æ€§é€’å½’åˆ°åº•ï¼Œå¯¼è‡´è®¡ç®—é‡å¤§ã€‚</strong></p></li></ol><h2 id="Vue3-xå®ç°å“åº”å¼">Vue3.xå®ç°å“åº”å¼</h2><h3 id="Proxyå’ŒReflect">Proxyå’ŒReflect</h3><p>å› ä¸ºvue2.xç‰ˆæœ¬å“åº”å¼çš„å®ç°å­˜åœ¨çš„é‚£äº›é—®é¢˜ï¼Œ<code>vue</code>å®˜æ–¹åœ¨3.0ç‰ˆæœ¬ä¸­å®Œå…¨é‡å†™äº†å“åº”å¼çš„å®ç°ï¼Œæ”¹ç”¨<code>Proxy</code>å’Œ<code>Reflect</code>ä»£æ›¿<code>Object.defineProperty()</code>ã€‚</p><h4 id="Proxy">Proxy</h4><p><strong>å®šä¹‰</strong>ï¼š<code>Proxyå¯¹è±¡</code>ç”¨æ¥ç»™ä¸€äº›åŸºæœ¬æ“ä½œå®šä¹‰è‡ªå®šä¹‰è¡Œä¸ºï¼ˆæ¯”å¦‚æŸ¥æ‰¾ï¼Œèµ‹å€¼ï¼Œæšä¸¾ï¼Œå‡½æ•°è°ƒç”¨ç­‰ç­‰ï¼‰</p><p>åŸºæœ¬ç”¨æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> proxy = <span class="keyword">new</span> <span class="title class_">Proxy</span>(target, handler)</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„å‚æ•°æ„ä¹‰ï¼š(æ³¨æ„<code>target</code>å¯ä»¥æ˜¯åŸç”Ÿæ•°ç»„)</p><ol><li><code>target</code>: ç”¨<code>Proxy</code>åŒ…è£…çš„ç›®æ ‡å¯¹è±¡ï¼ˆå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬<code>åŸç”Ÿæ•°ç»„</code>ï¼Œå‡½æ•°ï¼Œç”šè‡³å¦ä¸€ä¸ªä»£ç†ï¼‰ã€‚</li><li><code>handler</code>: ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶å±æ€§æ˜¯å½“æ‰§è¡Œä¸€ä¸ªæ“ä½œæ—¶å®šä¹‰ä»£ç†çš„è¡Œä¸ºçš„å‡½æ•°ã€‚</li></ol><h4 id="Reflect">Reflect</h4><p><code>Reflect</code> æ˜¯ä¸€ä¸ªå†…ç½®çš„å¯¹è±¡ï¼Œæä¾›<strong>æ‹¦æˆª JavaScript æ“ä½œ</strong>çš„æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•ä¸proxyçš„ handlersç›¸åŒã€‚Reflectä¸æ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œå› æ­¤å®ƒæ˜¯ä¸å¯æ„é€ çš„ã€‚</p><p>Refelctå¯¹è±¡æä¾›å¾ˆå¤šæ–¹æ³•ï¼Œè¿™é‡Œåªä»‹ç»å®ç°å“åº”å¼ä¼šç”¨åˆ°çš„å‡ ä¸ªå¸¸ç”¨æ–¹æ³•ï¼š</p><ol><li><code>Reflect.get()</code>: è·å–å¯¹è±¡èº«ä¸ŠæŸä¸ªå±æ€§çš„å€¼ï¼Œç±»ä¼¼äº <code>target[name]</code>ã€‚</li><li><code>Reflect.set()</code>: å°†å€¼åˆ†é…ç»™å±æ€§çš„å‡½æ•°ã€‚è¿”å›ä¸€ä¸ª<code>Boolean</code>ï¼Œå¦‚æœæ›´æ–°æˆåŠŸï¼Œåˆ™è¿”å›<code>true</code>ã€‚</li><li><code>Reflect.has()</code>: åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å­˜åœ¨æŸä¸ªå±æ€§ï¼Œå’Œ <code>in</code> è¿ç®—ç¬¦ çš„åŠŸèƒ½å®Œå…¨ç›¸åŒã€‚</li><li><code>Reflect.deleteProperty()</code>: ä½œä¸ºå‡½æ•°çš„deleteæ“ä½œç¬¦ï¼Œç›¸å½“äºæ‰§è¡Œ delete target[name]ã€‚</li></ol><p>äºæ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥è”åˆ<code>Proxy</code>å’Œ<code>Reflect</code>å®Œæˆå“åº”å¼ç›‘å¬</p><h3 id="Proxyå’ŒReflectå®ç°å“åº”å¼çš„ä¼˜ç‚¹">Proxyå’ŒReflectå®ç°å“åº”å¼çš„ä¼˜ç‚¹</h3><ol><li><code>Proxy</code>æ”¯æŒç›‘å¬åŸç”Ÿæ•°ç»„</li><li><code>Proxy</code>çš„è·å–æ•°æ®ï¼Œåªä¼šé€’å½’åˆ°éœ€è¦è·å–çš„å±‚çº§ï¼Œä¸ä¼šç»§ç»­é€’å½’</li><li><code>Proxy</code>å¯ä»¥ç›‘å¬æ•°æ®çš„æ‰‹åŠ¨æ–°å¢å’Œåˆ é™¤</li></ol><p><strong>å­˜åœ¨çš„å°é—®é¢˜</strong>ï¼šä¸»è¦åŸå› åœ¨äº<code>Proxy</code>å’Œ<code>Reflect</code>çš„æµè§ˆå™¨å…¼å®¹é—®é¢˜ï¼Œä¸”æ— æ³•è¢«<code>polyfill</code>ã€‚</p><blockquote><p><code>Polyfill</code>æ˜¯ä¸€å—ä»£ç ï¼ˆé€šå¸¸æ˜¯ Web ä¸Šçš„ JavaScriptï¼‰ï¼Œç”¨æ¥ä¸ºæ—§æµè§ˆå™¨æä¾›å®ƒæ²¡æœ‰åŸç”Ÿæ”¯æŒçš„è¾ƒæ–°çš„åŠŸèƒ½ã€‚</p></blockquote><h3 id="ä»£ç å®ç°">ä»£ç å®ç°</h3><blockquote><p>å‚è€ƒæ–‡ç« ï¼š</p><p><a href="https://juejin.cn/post/6844904078724562951">æ·±å…¥Vueå“åº”å¼åŸç†</a></p><p><a href="https://zhuanlan.zhihu.com/p/88648401">æœ€ç®€åŒ–Vueçš„å“åº”å¼åŸç†</a></p></blockquote><h1>è™šæ‹ŸDOMï¼ˆVirtual DOMï¼‰å’Œ diffç®—æ³•</h1><h2 id="è™šæ‹ŸDOMçš„æ¦‚å¿µä¸ä½œç”¨">è™šæ‹ŸDOMçš„æ¦‚å¿µä¸ä½œç”¨</h2><p><strong>æ¦‚å¿µ</strong>ï¼š<strong>è™šæ‹Ÿdomå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„jså¯¹è±¡</strong>ã€‚</p><ul><li>æ˜¯ä¸€ä¸ªç”¨æ¥æè¿°çœŸå®domç»“æ„çš„jså¯¹è±¡ï¼Œå› ä¸ºä»–ä¸æ˜¯çœŸå®domï¼Œæ‰€ä»¥æ‰å«è™šæ‹Ÿdomã€‚</li></ul><p><strong>ä½œç”¨ï¼ˆé‡ç‚¹ï¼‰</strong>ï¼š</p><ul><li><p><strong>ä¼ ç»Ÿdomæ•°æ®å‘ç”Ÿå˜åŒ–</strong>çš„æ—¶å€™ï¼Œæˆ‘ä»¬<strong>éœ€è¦ä¸æ–­çš„å»æ“ä½œdom</strong>ï¼Œæ‰èƒ½<strong>æ›´æ–°domçš„æ•°æ®</strong>ï¼Œè™½ç„¶åé¢å‡ºç°äº†<code>æ¨¡æ¿å¼•æ“</code>è¿™ç§ä¸œè¥¿ï¼Œå¯ä»¥è®©æˆ‘ä»¬ä¸€æ¬¡æ€§å»æ›´æ–°å¤šä¸ªdomã€‚ä½†æ¨¡æ¿å¼•æ“ä¾æ—§<strong>æ²¡æœ‰</strong>ä¸€ç§<strong>å¯ä»¥è¿½è¸ªçŠ¶æ€çš„æœºåˆ¶</strong>ï¼Œå½“å¼•æ“å†…æŸä¸ªæ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒä¾ç„¶è¦æ“ä½œdomå»<strong>é‡æ–°æ¸²æŸ“</strong>æ•´ä¸ªå¼•æ“ã€‚</p><blockquote><p><strong>æå‡æ¸²æŸ“æ•ˆç‡</strong>ï¼š<strong>è™šæ‹Ÿdomå¯ä»¥å¾ˆå¥½çš„è·Ÿè¸ªå½“å‰domçŠ¶æ€</strong>ï¼Œå› ä¸ºå®ƒä¼š<strong>æ ¹æ®å½“å‰æ•°æ®ç”Ÿæˆ</strong>ä¸€ä¸ªæè¿°å½“å‰domç»“æ„çš„<strong>è™šæ‹Ÿdom</strong>ï¼Œç„¶å<strong>æ•°æ®å‘ç”Ÿå˜åŒ–</strong>æ—¶ï¼Œåˆä¼š<strong>ç”Ÿæˆä¸€ä¸ªæ–°çš„è™šæ‹Ÿdom</strong>ï¼Œè€Œ<strong>è¿™ä¸¤ä¸ªè™šæ‹Ÿdomæ°æ°ä¿å­˜äº†å˜åŒ–å‰åçš„çŠ¶æ€</strong>ã€‚ç„¶å<strong>é€šè¿‡diffç®—æ³•ï¼Œè®¡ç®—å‡ºä¸¤ä¸ªå‰åä¸¤ä¸ªè™šæ‹Ÿdomä¹‹é—´çš„å·®å¼‚</strong>ï¼Œå¾—å‡ºä¸€ä¸ª<strong>æ›´æ–°çš„æœ€ä¼˜æ–¹æ³•</strong>ï¼ˆå“ªäº›å‘ç”Ÿæ”¹å˜ï¼Œå°±æ›´æ–°å“ªäº›ï¼‰ï¼Œ<strong>è¯¥æ–¹æ³•å¯ä»¥å¾ˆæ˜æ˜¾çš„æå‡æ¸²æŸ“æ•ˆç‡ä»¥åŠç”¨æˆ·ä½“éªŒ</strong></p></blockquote></li><li><p><strong>è·¨ç«¯æ€§</strong>ï¼šå› ä¸º<strong>è™šæ‹Ÿdomæ˜¯ä¸€ä¸ªæ™®é€šçš„javascriptå¯¹è±¡</strong>ï¼Œæ•…ä»–<strong>ä¸å•å•åªèƒ½å…è®¸åœ¨æµè§ˆå™¨ç«¯</strong>ï¼Œ<strong>æ¸²æŸ“å‡ºæ¥çš„è™šæ‹Ÿdom</strong>å¯åŒæ—¶åœ¨<strong>nodeç¯å¢ƒ</strong>ä¸‹æˆ–è€…<strong>weexçš„appç¯å¢ƒ</strong>ä¸‹å…è®¸ï¼Œ<strong>æœ‰å¾ˆå¥½çš„è·¨ç«¯æ€§</strong>ã€‚</p></li></ul><blockquote><p><strong>è™šæ‹Ÿdomçš„ç»“æ„</strong>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¸‹é¢æœ‰<strong>6ä¸ªå±æ€§</strong>:<strong>sel</strong>è¡¨ç¤ºå½“å‰èŠ‚ç‚¹æ ‡ç­¾åï¼Œ<strong>data</strong>å†…æ˜¯èŠ‚ç‚¹çš„å±æ€§ï¼Œ<strong>elm</strong>è¡¨ç¤ºå½“å‰è™šæ‹ŸèŠ‚ç‚¹å¯¹åº”çš„çœŸå®èŠ‚ç‚¹ï¼Œ<strong>text</strong>è¡¨ç¤ºå½“å‰èŠ‚ç‚¹ä¸‹çš„æ–‡æœ¬ï¼Œ<strong>children</strong>è¡¨ç¤ºå½“å‰èŠ‚ç‚¹ä¸‹çš„å…¶ä»–æ ‡ç­¾</p></blockquote><h2 id="Vueä¸­çš„è™šæ‹Ÿdom">Vueä¸­çš„è™šæ‹Ÿdom</h2><p>ç›®å‰<code>è™šæ‹Ÿdom</code>çš„ç±»åº“æœ‰å¤šç§ï¼Œå¸¸è§çš„æœ‰<code>snabbdom</code>å’Œ<code>virtual-dom</code>ã€‚</p><ul><li><code>vue</code>ä»¥å‰ç”¨çš„æ˜¯<code>virtual-dom</code>ï¼Œä»<code>2.xç‰ˆæœ¬</code>åéƒ½æ˜¯ä½¿ç”¨çš„<code>snabbdom</code>ã€‚</li></ul><p><strong>æ ¸å¿ƒæ–¹æ³•</strong>ï¼š</p><ul><li><strong>hå‡½æ•°</strong></li><li><strong>patchå‡½æ•°</strong></li><li><strong>patchVnodeå‡½æ•°</strong></li><li><strong>updateChildrenå‡½æ•°</strong></li></ul><h3 id="hå‡½æ•°">hå‡½æ•°</h3><p><strong>æ¦‚å¿µ</strong>ï¼š<strong>hå‡½æ•°</strong>æ˜¯åœ¨<code>renderå‡½æ•°</code>å†…è¿è¡Œçš„ã€‚</p><p>Vueåœ¨ç”Ÿå‘½å‘¨æœŸçš„<code>created --&gt; beforeMount</code>é˜¶æ®µä¼šå°†æ¨¡æ¿ç¼–è¯‘æˆ<code>renderå‡½æ•°</code>ï¼Œå…¶å®å°±æ˜¯å°†æ¨¡æ¿ç¼–è¯‘æˆ<code>hå‡½æ•°</code>æ‰€è®¤å¯çš„æ ¼å¼æ”¾åœ¨<code>renderå‡½æ•°</code>å†…ï¼Œç„¶åå½“<code>renderå‡½æ•°</code>è¿è¡Œçš„æ—¶å€™ï¼Œå°±ä¼šç”Ÿæˆ<strong>è™šæ‹Ÿdom</strong>ã€‚</p><p><strong>æ€»ç»“</strong>ï¼š</p><ul><li>é¦–å…ˆï¼Œä»£ç åˆæ¬¡è¿è¡Œï¼Œä¼šèµ°<strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼Œå½“ç”Ÿå‘½å‘¨æœŸèµ°åˆ°<strong>created</strong>åˆ°<strong>beforeMount</strong>ä¹‹é—´çš„æ—¶å€™ï¼Œä¼šç¼–è¯‘<strong>templateæ¨¡æ¿</strong>æˆ<strong>renderå‡½æ•°</strong>ã€‚ç„¶åå½“<strong>renderå‡½æ•°è¿è¡Œ</strong>æ—¶ï¼Œ<strong>hå‡½æ•°è¢«è°ƒç”¨</strong>ï¼Œè€Œ<strong>hå‡½æ•°å†…è°ƒç”¨äº†vnodeå‡½æ•°ç”Ÿæˆè™šæ‹Ÿdom</strong>ï¼Œå¹¶è¿”å›ç”Ÿæˆç»“æœï¼Œ<strong>è™šæ‹Ÿdomé¦–æ¬¡ç”Ÿæˆ</strong>ã€‚</li><li>ä¹‹åï¼Œå½“<strong>æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶</strong>ä¼šé‡æ–°ç¼–è¯‘ç”Ÿæˆä¸€ä¸ª<strong>æ–°è™šæ‹Ÿdom</strong>ï¼Œç„¶åå°±ç­‰å¾…<strong>æ–°ã€æ—§ä¸¤ä¸ªè™šæ‹Ÿdomè¿›è¡Œå¯¹æ¯”</strong>ï¼Œè¿™å°±æ¶‰åŠåˆ°ä¸‹é¢çš„<strong>diffç®—æ³•</strong>äº†ã€‚</li></ul><h3 id="diffç®—æ³•æ¯”è¾ƒè§„åˆ™">diffç®—æ³•æ¯”è¾ƒè§„åˆ™</h3><ul><li><p><strong>diff</strong> æ¯”è¾ƒä¸¤ä¸ªè™šæ‹Ÿdom<strong>åªä¼šåœ¨åŒå±‚çº§ä¹‹é—´è¿›è¡Œæ¯”è¾ƒ</strong>ï¼Œä¸ä¼šè·¨å±‚çº§è¿›è¡Œæ¯”è¾ƒã€‚</p></li><li><p>è€Œç”¨æ¥åˆ¤æ–­æ˜¯å¦æ˜¯åŒå±‚çº§çš„æ ‡å‡†å°±æ˜¯</p><ol><li><p>æ˜¯å¦åœ¨åŒä¸€å±‚</p></li><li><p>æ˜¯å¦æœ‰ç›¸åŒçš„çˆ¶çº§</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/20210224145121751.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p></li></ol></li><li><p><strong>diff</strong>æ˜¯é‡‡ç”¨<strong>å…ˆåºæ·±åº¦ä¼˜å…ˆéå†</strong>çš„æ–¹å¼è¿›è¡ŒèŠ‚ç‚¹æ¯”è¾ƒçš„ã€‚å³ï¼Œå½“æ¯”è¾ƒæŸä¸ªèŠ‚ç‚¹æ—¶ï¼Œå¦‚æœè¯¥èŠ‚ç‚¹å­˜åœ¨å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆä¼šä¼˜å…ˆæ¯”è¾ƒä»–çš„å­èŠ‚ç‚¹ï¼Œç›´åˆ°æ‰€æœ‰å­èŠ‚ç‚¹å…¨éƒ¨æ¯”è¾ƒå®Œæˆï¼Œæ‰ä¼šå¼€å§‹å»æ¯”è¾ƒæ”¹èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªåŒå±‚çº§èŠ‚ç‚¹ã€‚</p></li></ul><h4 id="diffæ¯”è¾ƒæ•´ä½“æ€è·¯"><strong>diffæ¯”è¾ƒæ•´ä½“æ€è·¯</strong></h4><ul><li><p>é¦–å…ˆå¼€å§‹æ¯”è¾ƒä¸¤ä¸ªvdomæ—¶ï¼Œè¿™ä¸¤ä¸ªvdomè‚¯å®šæ˜¯éƒ½æœ‰å„è‡ªçš„æ ¹èŠ‚ç‚¹çš„ï¼Œä¸”æ ¹èŠ‚ç‚¹å¿…å®šæ˜¯ä¸€ä¸ªå…ƒç´ ã€‚æˆ‘ä»¬é¦–å…ˆè¦æ¯”è¾ƒçš„è‚¯å®šæ˜¯æ ¹èŠ‚ç‚¹ï¼Œé‚£æˆ‘ä»¬éƒ½çŸ¥é“æ ¹èŠ‚ç‚¹åªæœ‰ä¸€ä¸ªï¼Œå°±å¯ä»¥ç›´æ¥è¿›è¡Œæ¯”è¾ƒã€‚</p><blockquote><p>å£°æ˜ï¼Œä¸‹é¢æ‰€è¯´çš„selé€‰æ‹©å™¨ç›¸åŒï¼ŒæŒ‡çš„æ˜¯æ ‡ç­¾åï¼Œidï¼Œclasséƒ½ç›¸åŒã€‚<br>ä¾‹å¦‚<code>&lt;div class=&quot;abc&quot; id=&quot;app&quot;&gt;</code>è¿™æ ·ä¸€ä¸ªdomï¼Œä»–çš„selæ˜¯&quot;div#app.abc&quot;</p></blockquote></li></ul><p>ä¸€ä¸ªèŠ‚ç‚¹çš„æ¯”è¾ƒï¼Œé€šå¸¸åˆ†ä¸º3ä¸ªéƒ¨åˆ†ï¼š</p><ol><li><p><strong>æ¯”è¾ƒä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦æ˜¯ç›¸åŒèŠ‚ç‚¹</strong>ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯ç›¸åŒèŠ‚ç‚¹çš„æ¡ä»¶æ˜¯ï¼Œ**keyå’Œselï¼ˆé€‰æ‹©å™¨ï¼‰**å¿…é¡»éƒ½ç›¸åŒã€‚</p><blockquote><p>é‚£æœ‰çš„äººå¯èƒ½ä¼šè¯´äº†ï¼Œé‚£æˆ‘æ ‡ç­¾æ²¡æœ‰keyæ€ä¹ˆåŠå•Šï¼Œæ²¡æœ‰keyé‚£å°±æ˜¯undefinedï¼Œundefined === undefined å§‹ç»ˆä¸ºtrueï¼Œæ‰€ä»¥æ²¡æœ‰keyåªéœ€è¦ä¿è¯selç›¸åŒå°±è¡Œã€‚</p></blockquote><p><strong>å¦‚æœä¸ç›¸åŒ</strong>ï¼Œé‚£ä¹ˆæ‰§è¡Œ<strong>æ›¿æ¢æ“ä½œ</strong>ï¼ˆå³æ–°å¢æ–°vnodeä¸Šçš„å…ƒç´ ï¼Œåˆ é™¤æ—§vnodeä¸Šçš„å…ƒç´ ï¼Œä¾‹å¦‚ï¼ŒåŸæ¥æ˜¯divï¼Œæ–°vnodeå˜æˆäº†pï¼Œé‚£ä¹ˆå°±æ˜¯æ–°å¢på…ƒç´ ï¼Œå†åˆ é™¤divå…ƒç´ ã€‚ç›¸å½“äºå°±æ˜¯pæ›¿æ¢äº†divï¼‰ã€‚</p><p>è¿™ä¸€æ­¥ï¼Œ<strong>åªæœ‰æ¯”è¾ƒæ ¹èŠ‚ç‚¹æ—¶ï¼Œæ˜¯åœ¨patchå‡½æ•°ä¸­è¿›è¡Œçš„</strong>ï¼Œ<strong>éæ ¹èŠ‚ç‚¹éƒ½æ˜¯åœ¨<code>updateChildren</code>å‡½æ•°ä¸­æ‰§è¡Œçš„</strong>ã€‚å› ä¸ºæ ¹èŠ‚ç‚¹åªä¼šæœ‰ä¸€ä¸ªï¼Œå¯ä»¥ç›´æ¥æ¯”è¾ƒï¼Œè€Œå…¶ä»–èŠ‚ç‚¹ä¼šå­˜åœ¨å¤šä¸ªï¼Œéœ€è¦é€šè¿‡ä¸€äº›ç®—æ³•æ¥åˆ¤æ–­ã€‚</p></li><li><p>å¦‚æœ<strong>èŠ‚ç‚¹ç›¸åŒ</strong>ï¼Œé‚£ä¹ˆæ¯”è¾ƒä¸¤ä¸ªèŠ‚ç‚¹çš„<strong>å±æ€§</strong>æ˜¯å¦ç›¸åŒã€‚å³ï¼ŒèŠ‚ç‚¹<strong>æ˜¯å¦å­˜åœ¨æ–‡æœ¬</strong>ï¼Œ<strong>æ–‡æœ¬æ˜¯å¦ç›¸åŒ</strong>ï¼›<strong>æ˜¯å¦å­˜åœ¨å­èŠ‚ç‚¹ï¼Œå­èŠ‚ç‚¹æ˜¯å¦ç›¸åŒ</strong>ã€‚è¿™éƒ¨åˆ†ä¸»è¦åœ¨<code>patchVnode</code>å‡½æ•°ä¸­æ‰§è¡Œã€‚</p><blockquote><p>é‚£ä¹ˆï¼Œåœ¨ç¬¬äºŒéƒ¨åˆ†ï¼Œä¼š<strong>åšå“ªäº›äº‹æƒ…</strong>å‘¢?</p><ol><li>å¦‚æœå­˜åœ¨æ–‡æœ¬æ—¶ï¼Œ<strong>æ›´æ–°æ–‡æœ¬</strong></li><li>å¦‚æœå­˜åœ¨å±æ€§æ—¶ï¼Œ<strong>æ›´æ–°å±æ€§</strong></li><li>å¦‚æœå­˜åœ¨å­èŠ‚ç‚¹æ—¶ï¼Œ<strong>æ›´æ–°å­èŠ‚ç‚¹</strong></li></ol><p>é‚£ä¹ˆï¼Œ<strong>å¦‚ä½•æ›´æ–°</strong>å‘¢ï¼Œé€»è¾‘ä¹Ÿå¾ˆç®€å•ï¼Œéµå¾ªä»¥ä¸‹è§„åˆ™ï¼š</p><ol><li>å¦‚æœæ—§vnodeä¸Šå­˜åœ¨ï¼Œè€Œæ–°vnodeä¸Šä¸å­˜åœ¨ï¼Œé‚£ä¹ˆæ‰§è¡Œ<strong>åˆ é™¤æ“ä½œ</strong></li><li>å¦‚æœæ—§vnodeä¸Šä¸å­˜åœ¨ï¼Œè€Œæ–°vnodeä¸Šå­˜åœ¨ï¼Œé‚£ä¹ˆæ‰§è¡Œ<strong>æ–°å¢æ“ä½œ</strong></li><li>å¦‚æœæ–°æ—§vnodeä¸Šéƒ½å­˜åœ¨ï¼Œé‚£ä¹ˆæ‰§è¡Œ<strong>æ›¿æ¢æ“ä½œ</strong>ï¼ˆå³ï¼Œæ–°å¢æ–°çš„ï¼Œåˆ é™¤æ—§çš„ï¼‰ã€‚<ul><li>æ–‡æœ¬å’Œå±æ€§çš„æ›¿æ¢æ˜¯åœ¨è¿™éƒ¨åˆ†å®Œæˆï¼Œè€Œå¯¹äºå­èŠ‚ç‚¹ï¼Œå¦‚æœæ–°vnodeå’Œæ—§vnodeä¸Šéƒ½å­˜åœ¨å­èŠ‚ç‚¹æ—¶ï¼Œé‚£ä¹ˆä¼šè¿›å…¥ç¬¬ä¸‰éƒ¨åˆ†æ¯”è¾ƒï¼Œæ¯”è¾ƒå­èŠ‚ç‚¹çš„å·®å¼‚ã€‚</li></ul></li></ol></blockquote></li><li><p>ä¸»è¦åœ¨<code>updateChildren</code>å‡½æ•°ä¸­æ‰§è¡Œï¼Œä¸»è¦ç”¨äºæ¯”è¾ƒæŸä¸ªèŠ‚ç‚¹ä¸‹çš„å­èŠ‚ç‚¹å·®å¼‚ã€‚ï¼ˆè¯·è§åæ–‡è¯¦è§£ï¼‰</p></li></ol><h3 id="patchå‡½æ•°">patchå‡½æ•°</h3><p><strong>æ¦‚å¿µ</strong>ï¼špatchå‡½æ•°æ˜¯æ¯”è¾ƒçš„å¼€å§‹ï¼Œç›¸å½“äºæ˜¯<strong>diffçš„å…¥å£</strong>ã€‚</p><ul><li>é‚£ä¹ˆæ—¢ç„¶æ˜¯å¼€å§‹ï¼Œè¯´æ˜patchå‡½æ•°<strong>æ¯”è¾ƒ</strong>çš„è‚¯å®šå°±æ˜¯<strong>ä¸¤ä¸ªæ–°æ—§vdomçš„æ ¹èŠ‚ç‚¹</strong>äº†ï¼Œæ‰€ä»¥ï¼Œä¸¤ä¸ªvdomç›´æ¥æ¯”è¾ƒï¼Œpatchåªä¼šè§¦å‘ä¸€æ¬¡ã€‚</li></ul><p><strong>ä½œç”¨</strong>ï¼šæ¯”è¾ƒä¸¤ä¸ªè™šæ‹Ÿdomæ ¹èŠ‚ç‚¹æ˜¯å¦ç›¸åŒã€‚</p><h3 id="patchVnodeå‡½æ•°">patchVnodeå‡½æ•°</h3><p><strong>æ¦‚å¿µ</strong>ï¼š<code>patchVnode</code> æ˜¯ç”¨äº<strong>æ¯”è¾ƒ</strong>ä¸¤ä¸ªç›¸åŒèŠ‚ç‚¹çš„**å­çº§ï¼ˆæ–‡æœ¬ï¼Œæˆ–å­èŠ‚ç‚¹ï¼‰**çš„ä¸€ä¸ªå‡½æ•°ã€‚</p><ul><li>æ•…å®ƒçš„è°ƒç”¨æ€»æ˜¯åœ¨<code>sameVnodeåˆ¤æ–­</code>ä¹‹åã€‚åªæœ‰åˆ¤æ–­å½“å‰æ¯”è¾ƒçš„ä¸¤ä¸ªvnodeç›¸åŒæ—¶æ‰ä¼šè¢«æ‰§è¡Œï¼ˆä¸¤ä¸ªvnodeç›¸åŒä»…ä»…ä»£è¡¨<code>key</code>ç›¸åŒä¸”<code>selé€‰æ‹©å™¨</code>ç›¸åŒï¼‰ã€‚</li><li>åœ¨å¯¹æ¯”ä¹‹å‰ï¼Œä¼šå…ˆåˆ¤æ–­ä¸‹<code>oldVnode === vNode</code> ï¼Œå› ä¸ºå¦‚æœå…¨ç­‰ï¼Œä»£è¡¨å­çº§è‚¯å®šä¹Ÿå®Œå…¨ç›¸ç­‰ï¼Œé‚£ä¹ˆå°±æ²¡å¿…è¦å¯¹æ¯”äº†ï¼Œç›´æ¥returnã€‚</li></ul><p><strong>ä½œç”¨</strong>ï¼šå¯¹æ¯”æ–°æ—§ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œæ›´æ–°domçš„å­çº§ï¼ˆå­çº§åŒ…å«æ–‡æœ¬æˆ–è€…æ˜¯å­èŠ‚ç‚¹ï¼‰</p><p><strong>å¯¹æ¯”è¿‡ç¨‹</strong>ï¼š</p><ol><li><p>å¦‚æœæ–°vnodeæœ‰textå±æ€§</p><ul><li>æ—§vnodeæ˜¯å¦æœ‰å­èŠ‚ç‚¹ï¼Œå¦‚æœæœ‰ï¼Œä»£è¡¨åŸæ¥æ˜¯å­èŠ‚ç‚¹ï¼Œç°åœ¨å˜æˆæ–‡æœ¬äº†ï¼Œé‚£ä¹ˆåˆ é™¤å­èŠ‚ç‚¹ï¼Œå¹¶ä¸”è®¾ç½®vnodeå¯¹è±¡çš„çœŸå®domçš„textå€¼ï¼ˆä½¿ç”¨setTextContentå‡½æ•°ï¼‰</li><li>å…¶ä»–æƒ…å†µä¸ç”¨ç®¡ï¼Œç›´æ¥è®¾ç½®vnodeå¯¹è±¡çš„çœŸå®domçš„textå€¼</li></ul></li><li><p>å¦‚æœæ–°vnodeæ²¡æœ‰textå±æ€§</p><ul><li>å¦‚æœæ–°vnodeå’Œæ—§vnodeéƒ½å­˜åœ¨å­èŠ‚ç‚¹æ—¶ã€‚æ˜¯ä¸æ˜¯è¦æ·±åº¦å¯¹æ¯”ä¸¤ä¸ªvnodeçš„å­èŠ‚ç‚¹å•Šã€‚è¿™ä¸ªæ—¶å€™ä¼šè¿›å…¥ç¬¬ä¸‰æ­¥ï¼Œæ¯”è¾ƒå­èŠ‚ç‚¹ï¼ˆæ‰§è¡ŒupdateChildrenï¼‰</li><li>å¦‚æœåªæœ‰æ–°vnodeæœ‰å­èŠ‚ç‚¹ï¼Œè€vnodeæ²¡æœ‰ï¼Œé‚£ä¹ˆå¾ˆç®€å•ï¼Œæ‰§è¡Œæ·»åŠ èŠ‚ç‚¹çš„æ“ä½œ</li><li>å¦‚æœåªæœ‰æ—§vnodeæœ‰å­èŠ‚ç‚¹ï¼Œæ–°vnodeæ²¡æœ‰å­èŠ‚ç‚¹ï¼Œå¾ˆæ˜æ˜¾ï¼Œè¦æ‰§è¡Œåˆ é™¤æ—§vnodeå­èŠ‚ç‚¹çš„æ“ä½œ</li><li>å¦‚æœä¸¤ä¸ªvnodeä¸Šéƒ½æ²¡æœ‰å­èŠ‚ç‚¹ã€‚ä½†æ—§èŠ‚ç‚¹æœ‰textï¼Œé‚£ä¹ˆå¾ˆç®€å•ï¼Œè¯´æ˜åŸæ¥æœ‰æ–‡æœ¬ï¼Œç°åœ¨æ²¡æœ‰äº†ï¼Œæ¸…ç©ºvnodeå¯¹åº”domçš„text</li></ul></li></ol><h3 id="updateChildrenå‡½æ•°">updateChildrenå‡½æ•°</h3><p><strong>ä½œç”¨</strong>ï¼šç”¨äºæ¯”è¾ƒæ–°æ—§ä¸¤ä¸ªvnodeçš„å­èŠ‚ç‚¹ã€‚</p><blockquote><p>å£°æ˜ï¼šä¸‹æ–‡ä¸­æ‰€æŒ‡çš„åŒ¹é…ä¸Šï¼ŒæŒ‡çš„å°±æ˜¯åˆ¤æ–­æ˜¯å¦æ˜¯sameVnodeï¼Œå³ä¸Šæ–‡ä¸­æ‰€è¯´çš„ï¼Œkeyç›¸åŒï¼Œselé€‰æ‹©å™¨ç›¸åŒ</p></blockquote><p><strong>æ¯”è¾ƒè§„åˆ™</strong>ï¼š</p><ol><li><p>é¦–å…ˆï¼Œä¼šå°†æ–°æ—§vnodeçš„<strong>å­èŠ‚ç‚¹ï¼ˆoldCh, Chï¼‰æå–å‡ºæ¥</strong>ï¼Œå¹¶åˆ†åˆ«åŠ ä¸Šä¸¤ä¸ªæŒ‡é’ˆ**<code>oldStart, oldEnd, newStart, newEnd</code><strong>ã€‚åˆ†åˆ«æŒ‡å‘</strong>odlChçš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒoldChçš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼ŒChçš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒChçš„æœ€åä¸€ä¸ªèŠ‚ç‚¹**ã€‚</p></li><li><p>æ¯”è¾ƒæ—¶ï¼Œä¼šä¼˜å…ˆæ‹¿<code>oldStart&lt;â€”&gt;newStartï¼ŒoldStart&lt;â€”&gt;newEndï¼ŒoldEnd&lt;â€”&gt;newStartï¼ŒoldEnd&lt;â€”&gt;newEnd</code> ä¸¤ä¸¤è¿›è¡Œå¯¹æ¯”ã€‚</p><ul><li><strong>å¦‚æœåŒ¹é…ä¸Š</strong>ï¼Œé‚£ä¹ˆä¼šå°†æ—§èŠ‚ç‚¹å¯¹åº”çš„çœŸå®domç§»åˆ°æ–°èŠ‚ç‚¹çš„ä½ç½®ä¸Šï¼Œå¹¶å°†åŒ¹é…ä¸Šäº†çš„æŒ‡é’ˆå¾€ä¸­é—´ç§»åŠ¨ã€‚åŒæ—¶åŒ¹é…ä¸Šäº†çš„ä¸¤ä¸ªèŠ‚ç‚¹ä¼šç»§ç»­æŒ‡å‘patchVnodeå‡½æ•°å»è¿›ä¸€æ­¥æ¯”å¯¹ï¼ˆæŒ‡é’ˆçš„ç§»åŠ¨ç›¸å½“äºæ°¸è¿œä¿æŒæŒ‡é’ˆä¸­é—´çš„èŠ‚ç‚¹è¿˜æ˜¯å°šæœªåŒ¹é…çŠ¶æ€ï¼Œå·²ç»åŒ¹é…åˆ°çš„ç§»åˆ°æŒ‡é’ˆå¤–é¢å»ï¼‰</li><li>å¦‚æœä¸Šé¢4ç§æ¯”è¾ƒéƒ½<strong>æ²¡æœ‰åŒ¹é…ä¸Š</strong>ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œæœ‰keyå’Œæ²¡keyå¤„ç†æ–¹å¼å°±ä¸ä¸€æ ·äº†ã€‚</li></ul></li><li><p>å½“<code>oldStart &gt; oldEnd</code> æˆ–è€… <code>newStart &gt; newEnd</code>æ—¶ï¼Œç»“æŸå¯¹æ¯”ã€‚æ­¤æ—¶ï¼š</p><ul><li>å¦‚æœæ˜¯<code>oldStart &gt; oldEnd</code>ï¼Œä»£è¡¨<strong>oldChéƒ½å·²åŒ¹é…å®Œæˆ</strong>ï¼Œè€Œæ­¤æ—¶ï¼Œå¦‚æœ<code>newStart &lt;= newEnd</code>ï¼Œé‚£ä¹ˆä»£è¡¨ <code>newStart</code> å’Œ <code>newEnd</code>ç›´æ¥çš„èŠ‚ç‚¹ä¸ºæ–°å¢èŠ‚ç‚¹ã€‚é‚£ä¹ˆçœŸå®domä¼šåœ¨å½“å‰<code>newStart</code> å’Œ<code>newEnd</code>ä¹‹é—´æ–°å¢<code>newStart</code> å’Œ <code>newEnd</code>ä¸­é—´è¿˜æœªåŒ¹é…çš„èŠ‚ç‚¹ã€‚</li><li>å¦‚æœæ˜¯n<code>ewStart &gt; newEnd</code>ï¼Œä»£è¡¨<strong>Chå…¨éƒ½å·²ç»åŒ¹é…å®Œæˆ</strong>ï¼Œè€Œæ­¤æ—¶ï¼Œå¦‚æœ<code>oldStart</code> å’Œ <code>newEnd</code>ä¹‹é—´è¿˜æœ‰èŠ‚ç‚¹ï¼Œåˆ™è¯´æ˜ï¼Œè¿™äº›èŠ‚ç‚¹æ˜¯åŸæ¥å­˜åœ¨çš„ï¼Œä½†ç°åœ¨æ²¡æœ‰äº†ï¼Œæ­¤æ—¶çœŸå®domåˆ é™¤è¿™äº›èŠ‚ç‚¹ã€‚</li></ul></li><li><p>æ¯”è¾ƒç»“æŸ</p></li></ol><h2 id="è™šæ‹ŸDOMä¸Diffç®—æ³•æ€»ç»“ï¼ˆVueï¼‰">è™šæ‹ŸDOMä¸Diffç®—æ³•æ€»ç»“ï¼ˆVueï¼‰</h2><h3 id="æ­¥éª¤"><strong>æ­¥éª¤</strong></h3><ol><li><p><strong>æ¯”è¾ƒä¸¤ä¸ªè™šæ‹Ÿdomæ ‘ï¼Œå¯¹æ ¹èŠ‚ç‚¹rootè¿›è¡Œæ‰§è¡Œpatchå‡½æ•°</strong>(oldVnodeï¼ŒnewVnode)ã€‚æ¯”è¾ƒä¸¤ä¸ªæ ¹èŠ‚ç‚¹æ˜¯å¦æ˜¯ç›¸åŒèŠ‚ç‚¹ï¼Œå¦‚æœä¸åŒï¼Œç›´æ¥æ›¿æ¢ï¼ˆæ–°å¢æ–°çš„ï¼Œåˆ é™¤æ—§çš„ï¼‰ã€‚</p></li><li><p>å¦‚æœç›¸åŒï¼Œå¯¹ä¸¤ä¸ªèŠ‚ç‚¹æ‰§è¡Œ<strong>patchVnode</strong>ï¼ˆoldVnode, newVnodeï¼‰ï¼Œæ¯”è¾ƒ<strong>å±æ€§ã€æ–‡æœ¬</strong>ä»¥åŠ<strong>å­èŠ‚ç‚¹</strong>ã€‚</p><ul><li>æ­¤æ—¶ï¼Œè¦ä¹ˆæ–°å¢ï¼Œè¦ä¹ˆåˆ é™¤ï¼Œè¦ä¹ˆç›´æ¥ä¿®æ”¹æ–‡æœ¬å†…å®¹ã€‚åªæœ‰å½“éƒ½å­˜åœ¨å­èŠ‚ç‚¹æ—¶ï¼Œå¹¶ä¸”oldVnode === newVnode ä¸ºfalseæ—¶ã€‚ä¼šæ‰§è¡ŒupdateChildrenå‡½æ•°ï¼Œå»è¿›ä¸€æ­¥æ¯”è¾ƒä»–ä»¬çš„å­èŠ‚ç‚¹ã€‚</li></ul></li><li><p>æ¯”è¾ƒåˆ†ä¸º3å¤§ç±»ã€‚</p><ol><li><p><strong>oldStart === newStartï¼Œ oldStart === newEndï¼ŒoldEnd === newStartï¼ŒoldEnd === newEnd è¿™4ç§æƒ…å†µçš„æ¯”è¾ƒ</strong>ã€‚å¦‚æœè¿™4ç§æƒ…å†µä¸­ä»»ä½•ä¸€ç§åŒ¹é…ã€‚é‚£ä¹ˆä¼šæ‰§è¡ŒpatchVnodeè¿›ä¸€æ­¥æ¯”è¾ƒã€‚åŒæ—¶æŒ‡é’ˆå¾€ä¸­é—´ç§»</p></li><li><p><strong>oldStart &gt; oldEnd æˆ–è€… newStart &gt; newEndæ—¶ï¼Œè¡¨ç¤ºåŒ¹é…ç»“æŸ</strong>ã€‚æ­¤æ—¶ï¼Œå¤šä½™çš„å…ƒç´ åˆ é™¤ï¼Œæ–°å¢çš„å…ƒç´ æ–°å¢ã€‚</p></li><li><p>ä¸Šé¢å‡ ç§æƒ…å†µéƒ½ä¸åŒ¹é…ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™<strong>åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨</strong>ã€‚</p><ul><li><strong>å­˜åœ¨keyæ—¶</strong>ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡keyå»æ‰¾åˆ°èŠ‚ç‚¹çš„åŸæ¥çš„ä½ç½®ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±æ–°å¢èŠ‚ç‚¹ï¼›æ‰¾åˆ°äº†ï¼Œå°±ç§»åŠ¨èŠ‚ç‚¹ä½ç½®ã€‚ï¼ˆæŸ¥æ‰¾æ•ˆç‡éå¸¸é«˜ï¼‰</li><li><strong>æ²¡æœ‰keyæ—¶</strong>ï¼Œé‚£ä¹ˆå‹æ ¹å°±ä¸ä¼šå»åŸæ¥çš„èŠ‚ç‚¹ä¸­æŸ¥æ‰¾äº†ï¼Œè€Œæ˜¯ç›´æ¥æ–°å¢è¿™ä¸ªèŠ‚ç‚¹ã€‚è¿™å°±å¯¼è‡´è¿™ä¸ªèŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰å­èŠ‚ç‚¹éƒ½ä¼šè¢«é‡æ–°æ–°å¢ï¼Œä¼šå‡ºç°æ˜æ˜¾çš„æ€§èƒ½æŸè€—ã€‚æ‰€ä»¥ï¼Œåˆç†çš„åº”ç”¨keyï¼Œä¹Ÿæ˜¯ä¸€ç§æ€§èƒ½ä¸Šçš„ä¼˜åŒ–ã€‚</li></ul></li></ol></li><li><p><strong>æ€»ä¹‹ä¸€å¥è¯ã€‚diffçš„è¿‡ç¨‹ï¼Œå°±æ˜¯ä¸€ä¸ª <code>patch â€”&gt; patchVnode â€”&gt; updateChildren â€”&gt; patchVnode â€”&gt; updateChildren â€”&gt; patchVnode...</code> è¿™æ ·çš„ä¸€ä¸ªå¾ªç¯é€’å½’çš„è¿‡ç¨‹</strong>ã€‚</p></li></ol><h3 id="é¢è¯•å›ç­”"><strong>é¢è¯•å›ç­”</strong></h3><h4 id="è™šæ‹Ÿ-DOM"><strong>è™šæ‹Ÿ DOM</strong></h4><p>è™šæ‹Ÿ DOMï¼ˆVirtual DOMï¼‰çš„ç®€å†™ä¸º vdomï¼Œå®ƒæ˜¯å®ç° Vue å’Œ React çš„é‡è¦åŸºçŸ³ã€‚</p><p>åœ¨ jQuery åŠæ›´æ—©çš„æ—¶ä»£ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨è°ƒæ•´ DOMï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸è€—è´¹æ€§èƒ½çš„æ“ä½œï¼Œå› æ­¤éœ€è¦è‡ªè¡Œæ§åˆ¶ DOM æ“ä½œçš„æ—¶æœºæ¥ä¼˜åŒ– jQuery æ€§èƒ½ã€‚</p><p>DOM æ›´æ–°éå¸¸è€—æ—¶ï¼Œä½† JS æ‰§è¡Œé€Ÿåº¦å¾ˆå¿«ï¼Œå› æ­¤ç°ä»£å‰ç«¯æ¡†æ¶ï¼ˆå¦‚ Vue å’Œ Reactï¼‰éƒ½å¼•å…¥äº† vdom çš„æ¦‚å¿µï¼šç”¨ JS æ¨¡æ‹Ÿ DOM ç»“æ„ï¼ˆvnodeï¼‰ï¼Œæ–°æ—§ vnode å¯¹æ¯”ï¼Œå¾—å‡ºæœ€å°çš„æ›´æ–°èŒƒå›´ï¼Œæœ€åæ›´æ–° DOMã€‚</p><p>åœ¨æ•°æ®é©±åŠ¨è§†å›¾çš„æ¨¡å¼ä¸‹ï¼Œvdom èƒ½æœ‰æ•ˆæ§åˆ¶ DOM æ“ä½œã€‚</p><h4 id="diff-ç®—æ³•">diff ç®—æ³•</h4><p>diff ç®—æ³•æ˜¯ vdom ä¸­æœ€æ ¸å¿ƒã€æœ€å…³é”®çš„éƒ¨åˆ†ã€‚</p><p>ä¸ºäº†å°†æ—¶é—´å¤æ‚åº¦ä¼˜åŒ–åˆ° <code>O(n)</code>ï¼Œå¤§éƒ¨åˆ†å‰ç«¯æ¡†æ¶ä¸­å®ç° diff ç®—æ³•çš„æ€è·¯æ˜¯ï¼š</p><ul><li>åªæ¯”è¾ƒåŒä¸€å±‚çº§ï¼Œä¸è·¨çº§æ¯”è¾ƒã€‚</li><li>tag ä¸ç›¸åŒï¼Œåˆ™ç›´æ¥åˆ æ‰é‡å»ºï¼Œä¸å†æ·±åº¦æ¯”è¾ƒã€‚</li><li>tag å’Œ key ä¸¤è€…éƒ½ç›¸åŒï¼Œåˆ™è®¤ä¸ºæ˜¯ç›¸åŒèŠ‚ç‚¹ï¼Œä¸å†æ·±åº¦æ¯”è¾ƒã€‚</li></ul><h2 id="diffç®—æ³•å’Œæ•°æ®åŠ«æŒçš„å…±åŒå·¥ä½œåŸç†">diffç®—æ³•å’Œæ•°æ®åŠ«æŒçš„å…±åŒå·¥ä½œåŸç†</h2><p>å¦å¤–ï¼Œæœ‰çš„åŒå­¦å¯èƒ½ä¼šç–‘æƒ‘ã€‚é€šè¿‡è¿™ä¸ªè™šæ‹Ÿdomçš„diffç®—æ³•å°±èƒ½ç²¾å‡†çš„çŸ¥é“è¢«æ›´æ–°çš„åœ°æ–¹åœ¨å“ªï¼Œç„¶åå»æ›´æ–°å˜åŠ¨çš„éƒ¨åˆ†ã€‚é‚£æˆ‘Vueé è¿™ä¸ªå°±å¤Ÿäº†å‘€ã€‚æˆ‘ä¸ºä»€ä¹ˆè¿˜éœ€è¦æ•°æ®åŠ«æŒå‘¢ï¼Œè¿˜éœ€è¦getterï¼Œsetterå‘¢ã€‚æ²¡é”™ï¼Œå…¶å®å•å•é è™šæ‹Ÿdomçš„diffç¡®å®æ˜¯å¯ä»¥å®ç°çš„ã€‚æ¯”å¦‚reactå°±æ˜¯è¿™ä¹ˆåšçš„ã€‚reactç²¾ç¡®æŸ¥æ‰¾æ•°æ®çš„æ›´æ–°å°±æ˜¯çº¯ç”¨è™šæ‹Ÿdomçš„diffçš„ã€‚<br>ä½†æ˜¯è¿™ä¼šäº§ç”Ÿä¸€ä¸ªä»€ä¹ˆé—®é¢˜å‘¢ã€‚å½“é¡¹ç›®éå¸¸å¤§çš„æ—¶å€™ï¼Œdomæ ‘æ˜¯éå¸¸å¤æ‚çš„ï¼Œå¦‚æœæ¯æ¬¡ä¸€ä¸ªå°å°çš„æ”¹åŠ¨ï¼Œå°±è¦é€šè¿‡diffç®—æ³•å»ç²¾ç¡®æ‰¾åˆ°æ”¹åŠ¨çš„åœ°æ–¹ï¼Œé‚£ä¹ˆè¿™ä¸ªè®¡ç®—é‡æ˜¯éå¸¸å¤§çš„ï¼Œäº§ç”Ÿçš„æ€§èƒ½æŸè€—ä¹Ÿä¼šå·¨å¤§ã€‚è¿™æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ï¼</p><p>é‚£ä¹ˆvueå’Œreactåˆ†åˆ«æ˜¯æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜çš„å‘¢ï¼Ÿ</p><ul><li><p><strong>Vue</strong>: äº†è§£Vueçš„MVVMåŸç†çš„äººåº”è¯¥éƒ½æ¸…æ¥šï¼Œvueé€šè¿‡Object.definepropertyçš„æ•°æ®åŠ«æŒï¼Œä¼šåŠ«æŒåˆ°æ¯ä¸€ä¸ªçŠ¶æ€æ•°æ®ï¼Œç»™ä»–ä»¬åŠ ä¸Šgetterï¼Œsetterã€‚å¹¶ä¸”åˆ›å»ºä¸€ä¸ªå‘å¸ƒè€…Depã€‚åŒæ—¶ï¼Œä¼šç»™ä¾èµ–è¿™ä¸ªçŠ¶æ€æ•°æ®çš„æ¯ä¸ªä¾èµ–è€…æ·»åŠ ä¸€ä¸ªè®¢é˜…è€…watcherã€‚è¿™æ ·ï¼Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè§¦å‘å¯¹åº”çš„setterï¼Œä»è€ŒDepä¼šå‘å¸ƒé€šçŸ¥ï¼Œé€šçŸ¥æ¯ä¸€ä¸ªè®¢é˜…è€…watcherï¼Œç„¶åwatcheræ›´æ–°å¯¹åº”çš„æ•°æ®ã€‚ä½†æ˜¯ï¼Œå¦‚æœä»»ä½•ä¸€ä¸ªæ•°æ®çš„ä¾èµ–æˆ‘éƒ½å¢åŠ ä¸€ä¸ªwatcherï¼Œé‚£ä¹ˆé¡¹ç›®ä¸­çš„watcheræ•°é‡æ˜¯ä¼šéå¸¸åºå¤§çš„ï¼Œè¿™ä¼šå¯¼è‡´ç»†ç²’åº¦å¤ªé«˜ï¼Œå¸¦æ¥å†…å­˜å’Œä¾èµ–å…³ç³»ç»´æŠ¤çš„å·¨å¤§æ¶ˆè€—ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œ<strong>vueé‡‡ç”¨å“åº”å¼ + diff çš„æ–¹å¼ï¼Œå³é€šè¿‡å“åº”å¼çš„getterï¼Œsetterå¿«é€ŸçŸ¥é“æ•°æ®çš„å˜åŒ–å‘ç”Ÿåœ¨å“ªä¸ªç»„ä»¶ä¸­ï¼Œç„¶åç»„ä»¶å†…éƒ¨å†é€šè¿‡ diff çš„æ–¹å¼å»è·å–æ›´è¯¦ç»†çš„æ›´æ–°æƒ…å†µï¼Œå¹¶æ›´æ–°æ•°æ®ã€‚</strong></p></li><li><p><strong>React</strong>: <strong>é€šè¿‡ä»–çš„ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°shouldComponentUpdateå®ç°çš„</strong>ã€‚é€šè¿‡æ‰‹åŠ¨åœ¨è¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­åˆ¤æ–­å½“å‰ç»„ä»¶çš„æ•°æ®æ˜¯å¦æœ‰å‘ç”Ÿå˜åŒ–ï¼Œæ¥å†³å®šå½“å‰ç»„ä»¶æ˜¯å¦éœ€è¦æ›´æ–°ã€‚è¿™æ ·ï¼Œæ²¡æœ‰å‘ç”ŸçŠ¶æ€æ•°æ®å˜åŒ–çš„ç»„ä»¶å°±ä¸éœ€è¦è¿›è¡Œdiffï¼Œè¿›è€Œç¼©å°diffçš„èŒƒå›´ã€‚</p></li></ul><blockquote><p>å‚è€ƒæ–‡ç« ï¼š</p><p><a href="https://blog.csdn.net/weixin_42707287/article/details/113994483">Vue è™šæ‹Ÿdomå’Œdiffç®—æ³•è¯¦è§£</a></p></blockquote><h1>æ¨¡æ¿ç¼–è¯‘</h1><h2 id="Vue-æ¨¡æ¿è¢«ç¼–è¯‘æˆä»€ä¹ˆ">Vue æ¨¡æ¿è¢«ç¼–è¯‘æˆä»€ä¹ˆ</h2><ul><li>Vue çš„æ¨¡æ¿ä¸æ˜¯ htmlï¼Œå› ä¸ºå®ƒæœ‰æŒ‡ä»¤ã€æ’å€¼ã€JS è¡¨è¾¾å¼ï¼Œèƒ½å®ç°åˆ¤æ–­ã€å¾ªç¯ï¼›</li><li>html æ˜¯æ ‡ç­¾è¯­è¨€ï¼Œåªæœ‰ JS æ‰èƒ½å®ç°åˆ¤æ–­ã€å¾ªç¯ã€‚</li></ul><p>å› æ­¤ï¼Œæ¨¡æ¿ä¸€å®šæ˜¯è½¬æ¢ä¸ºæŸç§ JS ä»£ç ï¼Œå³ç¼–è¯‘æ¨¡æ¿ã€‚</p><h2 id="Vue-æ¨¡æ¿ç¼–è¯‘è¿‡ç¨‹">Vue æ¨¡æ¿ç¼–è¯‘è¿‡ç¨‹</h2><p><strong>æ¨¡æ¿ç¼–è¯‘æµç¨‹</strong>ï¼š</p><ul><li>æ¨¡æ¿ç¼–è¯‘ä¸º render å‡½æ•°ï¼Œæ‰§è¡Œ render å‡½æ•°è¿”å› vnodeï¼›</li><li>åŸºäº vnode å†æ‰§è¡Œ patch å’Œ diffï¼›</li><li>ä½¿ç”¨ Webpack æ—¶ï¼Œvue-loader ä¼šåœ¨å¼€å‘ç¯å¢ƒä¸‹ç¼–è¯‘æ¨¡æ¿ï¼ˆç›®å‰ä¸šå†…ä¸»æµï¼‰ï¼›å¦åˆ™ä¼šåœ¨æµè§ˆå™¨è¿è¡Œä¸­ç¼–è¯‘ï¼ˆå•ç‹¬åœ¨é¡µé¢ä¸­å¼•å…¥ vue.js ä½¿ç”¨ï¼‰ã€‚</li></ul><blockquote><p><strong>æ¨¡æ¿ç¼–è¯‘æµç¨‹å›¾</strong>ï¼š</p><p><code>template --&gt; AST --&gt; renderå‡½æ•° --&gt; åˆ›å»ºè™šæ‹Ÿdom --&gt; diffç®—æ³•æ›´æ–°è™šæ‹Ÿ dom --&gt; äº§ç”Ÿã€æ›´æ–°çœŸå®èŠ‚ç‚¹</code></p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/0172b97deb9241f6b9a267ba3efb5d18~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="image.png"></p></blockquote><p><strong>æ¨¡æ¿ç¼–è¯‘æˆæ¸²æŸ“å‡½æ•°çš„æ­¥éª¤</strong>ï¼š</p><p>å°†æ¨¡æ¿ç¼–è¯‘æˆæ¸²æŸ“å‡½æ•°å¯ä»¥åˆ†ä¸¤ä¸ªæ­¥éª¤ï¼Œå…ˆå°†æ¨¡æ¿è§£ææˆ ASTï¼ˆAbstract Syntax Treeï¼ŒæŠ½è±¡è¯­æ³•æ ‘ï¼‰ï¼Œç„¶åå†ä½¿ç”¨ AST ç”Ÿæˆæ¸²æŸ“å‡½æ•°ã€‚ä½†æ˜¯ç”±äºé™æ€èŠ‚ç‚¹ä¸éœ€è¦æ€»æ˜¯é‡æ–°æ¸²æŸ“ï¼Œæ‰€ä»¥åœ¨ç”Ÿæˆ AST ä¹‹åã€ç”Ÿæˆæ¸²æŸ“å‡½æ•°ä¹‹å‰è¿™ä¸ªé˜¶æ®µï¼Œå¯ä»¥åšä¸€ä¸ªæ“ä½œï¼Œé‚£å°±æ˜¯éå†ä¸€é ASTï¼Œç»™æ‰€æœ‰é™æ€èŠ‚ç‚¹åšä¸€ä¸ªæ ‡è®°ï¼Œè¿™æ ·åœ¨è™šæ‹Ÿ DOM ä¸­æ›´æ–°èŠ‚ç‚¹æ—¶ï¼Œå¦‚æœå‘ç°èŠ‚ç‚¹æœ‰è¿™ä¸ªæ ‡è®°ï¼Œå°±ä¸ä¼šé‡æ–°æ¸²æŸ“å®ƒã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨å¤§ä½“é€»è¾‘ä¸Šï¼Œæ¨¡æ¿ç¼–è¯‘åˆ†ä¸‰éƒ¨åˆ†å†…å®¹ï¼š</p><ul><li>å°†æ¨¡æ¿è§£æä¸º AST</li><li>éå† AST æ ‡è®°é™æ€èŠ‚ç‚¹</li><li>ä½¿ç”¨ AST ç”Ÿæˆæ¸²æŸ“å‡½æ•°</li></ul><p>è¿™ä¸‰éƒ¨åˆ†å†…å®¹åœ¨æ¨¡æ¿ç¼–è¯‘ä¸­åˆ†åˆ«æŠ½è±¡å‡ºä¸‰ä¸ªæ¨¡å—æ¥å®ç°å„è‡ªçš„åŠŸèƒ½ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul><li>è§£æå™¨</li><li>ä¼˜åŒ–å™¨</li><li>ä»£ç ç”Ÿæˆå™¨</li></ul><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/fc20e0849ee54413821fcf08d2dc7a46~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="image.png"></p><ol><li><p>è§£æå™¨ â€”â€” å°†æ¨¡æ¿è§£ææˆ AST</p><p>åœ¨è§£æå™¨å†…éƒ¨ï¼Œåˆ†æˆäº†å¾ˆå¤šå°è§£æå™¨ï¼Œå…¶ä¸­åŒ…æ‹¬è¿‡æ»¤å™¨è§£æå™¨ï¼ˆè§£æè¿‡æ»¤å™¨ï¼‰ã€æ–‡æœ¬è§£æå™¨ï¼ˆè§£æå¸¦å˜é‡çš„æ–‡æœ¬ï¼‰å’Œ HTML è§£æå™¨ï¼ˆæ ¸å¿ƒï¼‰ã€‚</p><p>AST å’Œ vnode ç±»ä¼¼ï¼Œéƒ½æ˜¯ä½¿ç”¨ JavaScript ä¸­çš„å¯¹è±¡æ¥è¡¨ç¤ºèŠ‚ç‚¹ã€‚</p></li><li><p>ä¼˜åŒ–å™¨ â€”â€” æ ‡è®°é™æ€èŠ‚ç‚¹</p><p>ä»€ä¹ˆæ˜¯é™æ€èŠ‚ç‚¹ï¼Ÿæ²¡æœ‰ä½¿ç”¨ä»»ä½•å˜é‡ï¼Œåç»­ä¸ä¼šå‘ç”Ÿå˜åŒ–çš„èŠ‚ç‚¹ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªé™æ€èŠ‚ç‚¹ï¼Œå› ä¸ºæˆ‘æ²¡ç”¨åˆ°ä»€ä¹ˆå˜é‡ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆè¦æ ‡è®°é™æ€èŠ‚ç‚¹ï¼Ÿé¿å…åšä¸€äº›æ— ç”¨åŠŸï¼Œå› ä¸ºé™æ€èŠ‚ç‚¹ä¸ä¼šéšç€çŠ¶æ€çš„å˜åŒ–è€Œå˜åŒ–ï¼Œåœ¨è™šæ‹Ÿ DOM patch æ—¶å¯ä»¥è·³è¿‡ã€‚</p></li><li><p>ä»£ç ç”Ÿæˆå™¨â€”â€”å°† AST è½¬æ¢æˆâ€œä»£ç å­—ç¬¦ä¸²â€</p><p>å°±æ˜¯æˆ‘ä»¬è¦è¾“å…¥åˆ°æ¸²æŸ“å‡½æ•°ä¸­çš„å†…å®¹ï¼Œä¹‹åç”Ÿæˆçš„ä»£ç å­—ç¬¦ä¸²å°†ç”¨äºæ¸²æŸ“å‡½æ•°ã€‚</p></li></ol><blockquote><p>è¯¦ç»†å†…å®¹è¯·å‚é˜…ï¼š</p><p><a href="https://juejin.cn/post/7035832002620162084">Vueæ¨¡æ¿æ˜¯å¦‚ä½•ç¼–è¯‘çš„</a></p><p><a href="https://juejin.cn/post/6911983128844189704">åˆ«å†é—®æˆ‘Vueæ¨¡æ¿æ˜¯æ€ä¹ˆç¼–è¯‘äº†</a></p></blockquote><h1>Vueå’ŒReactçš„ç®€å•å¯¹æ¯”</h1><h2 id="ç›¸åŒç‚¹">ç›¸åŒç‚¹</h2><ul><li>éƒ½æœ‰<strong>ç»„ä»¶åŒ–</strong>æ€æƒ³</li><li>éƒ½æ”¯æŒ<strong>æœåŠ¡å™¨ç«¯æ¸²æŸ“</strong></li><li>éƒ½æœ‰Virtual DOMï¼ˆ<strong>è™šæ‹Ÿdom</strong>ï¼‰</li><li><strong>æ•°æ®é©±åŠ¨è§†å›¾</strong></li><li>éƒ½æœ‰æ”¯æŒ<strong>native</strong>çš„æ–¹æ¡ˆï¼š<code>Vue</code>çš„<code>weex</code>ã€<code>React</code>çš„<code>React native</code></li><li>éƒ½æœ‰è‡ªå·±çš„<strong>æ„å»ºå·¥å…·</strong>ï¼š<code>Vue</code>çš„<code>vue-cli</code>ã€<code>React</code>çš„<code>Create React App</code></li></ul><h2 id="ä¸åŒç‚¹">ä¸åŒç‚¹</h2><ul><li>æ•°æ®<strong>æµå‘çš„ä¸åŒ</strong>ã€‚<code>react</code>ä»è¯ç”Ÿå¼€å§‹å°±æ¨å´‡å•å‘æ•°æ®æµï¼Œè€Œ<code>Vue</code>æ˜¯åŒå‘æ•°æ®æµ</li><li><strong>æ•°æ®å˜åŒ–</strong>çš„å®ç°<strong>åŸç†ä¸åŒ</strong>ã€‚<code>react</code>ä½¿ç”¨çš„æ˜¯ä¸å¯å˜æ•°æ®ï¼Œè€Œ<code>Vue</code>ä½¿ç”¨çš„æ˜¯å¯å˜çš„æ•°æ®</li><li><strong>ç»„ä»¶åŒ–é€šä¿¡</strong>çš„ä¸åŒã€‚<code>react</code>ä¸­æˆ‘ä»¬é€šè¿‡ä½¿ç”¨å›è°ƒå‡½æ•°æ¥è¿›è¡Œé€šä¿¡çš„ï¼Œè€Œ<code>Vue</code>ä¸­å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ é€’æ¶ˆæ¯æœ‰ä¸¤ç§æ–¹å¼ï¼šäº‹ä»¶å’Œå›è°ƒå‡½æ•°</li><li><strong>diffç®—æ³•</strong>ä¸åŒã€‚<code>react</code>ä¸»è¦ä½¿ç”¨diffé˜Ÿåˆ—ä¿å­˜éœ€è¦æ›´æ–°å“ªäº›DOMï¼Œå¾—åˆ°patchæ ‘ï¼Œå†ç»Ÿä¸€æ“ä½œæ‰¹é‡æ›´æ–°DOMã€‚<code>Vue</code> ä½¿ç”¨åŒå‘æŒ‡é’ˆï¼Œè¾¹å¯¹æ¯”ï¼Œè¾¹æ›´æ–°DOMã€‚</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;æ•°æ®é©±åŠ¨è§†å›¾&lt;/h1&gt;
&lt;h2 id=&quot;MVVMæ¨¡å‹-v2&quot;&gt;MVVMæ¨¡å‹&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;MVVM&lt;/code&gt; æ˜¯&lt;code&gt;Model-View-ViewModel&lt;/code&gt; çš„ç¼©å†™ï¼Œå®ƒæ˜¯ä¸€ç§&lt;strong&gt;åŸºäºå‰ç«¯å¼€å‘çš„æ¶æ„æ¨¡å¼</summary>
      
    
    
    
    <category term="é¢è¯•å®å…¸âœ¨" scheme="https://blog.cilicili.xyz/categories/%E9%9D%A2%E8%AF%95%E5%AE%9D%E5%85%B8%E2%9C%A8/"/>
    
    
    <category term="Vue" scheme="https://blog.cilicili.xyz/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>ã€é¢è¯•ã€‘JavaScriptæ‰‹æ’•é¢è¯•é¢˜æ€»ç»“</title>
    <link href="https://blog.cilicili.xyz/posts/c7d52961.html"/>
    <id>https://blog.cilicili.xyz/posts/c7d52961.html</id>
    <published>2022-09-13T07:57:02.000Z</published>
    <updated>2022-09-21T13:55:51.426Z</updated>
    
    <content type="html"><![CDATA[<h1>é˜²æŠ–å’ŒèŠ‚æµ</h1><h2 id="é˜²æŠ–ï¼ˆdeounceï¼‰">é˜²æŠ–ï¼ˆdeounceï¼‰</h2><h3 id="å®šä¹‰">å®šä¹‰</h3><p><strong>é˜²æŠ–</strong>æŒ‡åªæœ‰åœ¨nç§’å†…æ²¡æœ‰å†æ¬¡è§¦å‘æŸä¸ªå‡½æ•°æ—¶ï¼Œæ‰ä¼šçœŸæ­£æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼›è‹¥nç§’å†…å†æ¬¡è§¦å‘æ­¤å‡½æ•°ï¼Œåˆ™é‡æ–°è®¡ç®—æ—¶é—´ã€‚</p><h3 id="åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</h3><ul><li>è¾“å…¥æ¡†ä¸­é¢‘ç¹çš„è¾“å…¥å†…å®¹ï¼Œæœç´¢æˆ–è€…æäº¤ä¿¡æ¯ï¼›</li><li>é¢‘ç¹çš„ç‚¹å‡»æŒ‰é’®ï¼Œè§¦å‘æŸä¸ªäº‹ä»¶ï¼›</li><li>ç›‘å¬æµè§ˆå™¨æ»šåŠ¨äº‹ä»¶å®Œæˆæ“ä½œï¼›</li><li>ç”¨æˆ·ç¼©æ”¾æµè§ˆå™¨çš„resizeäº‹ä»¶(æµè§ˆå™¨çª—å£å¤§å°å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘)</li></ul><h3 id="ä»£ç å®ç°-v2">ä»£ç å®ç°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">func, wait</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> timeout;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> context = <span class="variable language_">this</span>; <span class="comment">// ä¿å­˜thisæŒ‡å‘</span></span><br><span class="line">        <span class="keyword">let</span> args = <span class="variable language_">arguments</span>; <span class="comment">// æ‹¿åˆ°eventå¯¹è±¡</span></span><br><span class="line">        <span class="built_in">clearTimeout</span>(timeout) <span class="comment">// æ¸…é™¤å®šæ—¶å™¨</span></span><br><span class="line">        timeout = <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            func.<span class="title function_">apply</span>(context, args)</span><br><span class="line">        &#125;, wait);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="èŠ‚æµï¼ˆthrottleï¼‰">èŠ‚æµï¼ˆthrottleï¼‰</h2><h3 id="å®šä¹‰-v2">å®šä¹‰</h3><p><strong>èŠ‚æµ</strong>æŒ‡ä¸€å®šæ—¶é—´å†…å›è°ƒå‡½æ•°åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå³æ‰§è¡Œå‡½æ•°çš„é¢‘ç‡æ˜¯å›ºå®šçš„ã€‚</p><p>ç±»ä¼¼äº10 åˆ†é’Ÿä¸€è¶Ÿçš„å…¬äº¤è½¦ï¼Œä¸ç®¡10 åˆ†é’Ÿå†…æœ‰å¤šå°‘äººåœ¨å…¬äº¤ç«™ç­‰ï¼Œ10 åˆ†é’Ÿä¸€åˆ°å°±ä¼šæŒ‰æ—¶å‘è½¦ã€‚</p><h3 id="åº”ç”¨åœºæ™¯-v2">åº”ç”¨åœºæ™¯</h3><ul><li>ç›‘å¬é¡µé¢çš„æ»šåŠ¨äº‹ä»¶ï¼›</li><li>é¼ æ ‡ç§»åŠ¨äº‹ä»¶ï¼›</li><li>ç”¨æˆ·é¢‘ç¹ç‚¹å‡»æŒ‰é’®æ“ä½œï¼›</li><li>æ¸¸æˆä¸­çš„ä¸€äº›è®¾è®¡ï¼ˆå¦‚é£èˆ¹å‘å°„å¯¼å¼¹çš„é¢‘ç‡ï¼‰</li></ul><h3 id="ä»£ç å®ç°-v3">ä»£ç å®ç°</h3><ol><li><p>ä½¿ç”¨æ—¶é—´æˆ³å†™æ³•ï¼Œäº‹ä»¶ä¼šç«‹å³æ‰§è¡Œï¼Œåœæ­¢è§¦å‘åæ²¡æœ‰åŠæ³•å†æ¬¡æ‰§è¡Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">throttled1</span>(<span class="params">fn, delay = <span class="number">500</span></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> oldtime = <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> newtime = <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line">        <span class="keyword">if</span> (newtime - oldtime &gt;= delay) &#123;</span><br><span class="line">            fn.<span class="title function_">apply</span>(<span class="literal">null</span>, args)</span><br><span class="line">            oldtime = <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨å®šæ—¶å™¨å†™æ³•ï¼Œ<code>delay</code>æ¯«ç§’åç¬¬ä¸€æ¬¡æ‰§è¡Œï¼Œç¬¬äºŒæ¬¡äº‹ä»¶åœæ­¢è§¦å‘åä¾ç„¶ä¼šå†ä¸€æ¬¡æ‰§è¡Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">throttled2</span>(<span class="params">fn, delay = <span class="number">500</span></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!timer) &#123;</span><br><span class="line">            timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args)</span><br><span class="line">                timer = <span class="literal">null</span></span><br><span class="line">            &#125;, delay);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å¯ä»¥å°†æ—¶é—´æˆ³å†™æ³•çš„ç‰¹æ€§ä¸å®šæ—¶å™¨å†™æ³•çš„ç‰¹æ€§ç›¸ç»“åˆï¼Œå®ç°ä¸€ä¸ªæ›´åŠ ç²¾ç¡®çš„èŠ‚æµã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">throttled</span>(<span class="params">fn, delay</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">let</span> starttime = <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> curTime = <span class="title class_">Date</span>.<span class="title function_">now</span>() <span class="comment">// å½“å‰æ—¶é—´</span></span><br><span class="line">        <span class="keyword">let</span> remaining = delay - (curTime - starttime)  <span class="comment">// ä»ä¸Šä¸€æ¬¡åˆ°ç°åœ¨ï¼Œè¿˜å‰©ä¸‹å¤šå°‘å¤šä½™æ—¶é—´</span></span><br><span class="line">        <span class="keyword">let</span> context = <span class="variable language_">this</span></span><br><span class="line">        <span class="keyword">let</span> args = <span class="variable language_">arguments</span></span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">        <span class="keyword">if</span> (remaining &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            fn.<span class="title function_">apply</span>(context, args)</span><br><span class="line">            starttime = <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            timer = <span class="built_in">setTimeout</span>(fn, remaining);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="é˜²æŠ–å’ŒèŠ‚æµçš„åŒºåˆ«">é˜²æŠ–å’ŒèŠ‚æµçš„åŒºåˆ«</h2><p>ç›¸åŒç‚¹ï¼š</p><ul><li>éƒ½å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>setTimeout</code> å®ç°</li><li>ç›®çš„éƒ½æ˜¯ï¼Œé™ä½å›è°ƒæ‰§è¡Œé¢‘ç‡ï¼ŒèŠ‚çœè®¡ç®—èµ„æº</li></ul><p>ä¸åŒç‚¹ï¼š</p><ul><li><p>å‡½æ•°é˜²æŠ–ï¼Œåœ¨ä¸€æ®µè¿ç»­æ“ä½œç»“æŸåï¼Œå¤„ç†å›è°ƒï¼Œåˆ©ç”¨<code>clearTimeout</code>å’Œ <code>setTimeout</code>å®ç°</p><p>å‡½æ•°èŠ‚æµï¼Œåœ¨ä¸€æ®µè¿ç»­æ“ä½œä¸­ï¼Œæ¯ä¸€æ®µæ—¶é—´åªæ‰§è¡Œä¸€æ¬¡ï¼Œé¢‘ç‡è¾ƒé«˜çš„äº‹ä»¶ä¸­ä½¿ç”¨æ¥æé«˜æ€§èƒ½</p></li><li><p>å‡½æ•°é˜²æŠ–å…³æ³¨ä¸€å®šæ—¶é—´è¿ç»­è§¦å‘çš„äº‹ä»¶ï¼Œåªåœ¨æœ€åæ‰§è¡Œä¸€æ¬¡ï¼Œè€Œå‡½æ•°èŠ‚æµä¸€æ®µæ—¶é—´å†…åªæ‰§è¡Œä¸€æ¬¡</p></li></ul><h1>æ·±æ‹·è´å’Œæµ…æ‹·è´</h1><h2 id="æ•°æ®ç±»å‹å­˜å‚¨">æ•°æ®ç±»å‹å­˜å‚¨</h2><p>JavaScriptä¸­å­˜åœ¨ä¸¤å¤§æ•°æ®ç±»å‹ï¼š</p><ul><li>åŸºæœ¬ç±»å‹</li><li>å¼•ç”¨ç±»å‹</li></ul><p><strong>åŸºæœ¬ç±»å‹æ•°æ®</strong>ä¿å­˜åœ¨åœ¨<strong>æ ˆå†…å­˜</strong>ä¸­</p><p><strong>å¼•ç”¨ç±»å‹æ•°æ®</strong>ä¿å­˜åœ¨<strong>å †å†…å­˜</strong>ä¸­ï¼ˆå¼•ç”¨æ•°æ®ç±»å‹çš„å˜é‡æ˜¯ä¸€ä¸ªæŒ‡å‘å †å†…å­˜ä¸­å®é™…å¯¹è±¡çš„å¼•ç”¨ï¼Œå­˜åœ¨æ ˆä¸­ï¼‰</p><h2 id="æ·±æ‹·è´">æ·±æ‹·è´</h2><p><strong>æ¦‚å¿µ</strong>ï¼šæ·±æ‹·è´å¼€è¾Ÿä¸€ä¸ªæ–°çš„æ ˆï¼Œä¸¤ä¸ªå¯¹è±¡<strong>å±æ€§å®Œå…¨ç›¸åŒ</strong>ï¼Œä½†æ˜¯<strong>å¯¹åº”ä¸¤ä¸ªä¸åŒçš„åœ°å€</strong>ï¼Œä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œä¸ä¼šæ”¹å˜å¦ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ã€‚</p><p>å¸¸è§çš„<strong>æ·±æ‹·è´æ–¹å¼</strong>ï¼š</p><ul><li>_.cloneDeep()</li><li>jQuery.extend()</li><li>JSON.stringify()</li><li>æ‰‹å†™å¾ªç¯é€’å½’</li></ul><h3 id="cloneDeep">_.cloneDeep()</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _ = <span class="built_in">require</span>(<span class="string">&#x27;lodash&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> obj1 = &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">b</span>: &#123; <span class="attr">f</span>: &#123; <span class="attr">g</span>: <span class="number">1</span> &#125; &#125;,</span><br><span class="line">    <span class="attr">c</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> obj2 = _.<span class="title function_">cloneDeep</span>(obj1);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj1.<span class="property">b</span>.<span class="property">f</span> === obj2.<span class="property">b</span>.<span class="property">f</span>);<span class="comment">// false</span></span><br></pre></td></tr></table></figure><h3 id="jQuery-extend">jQuery.extend()</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> $ = <span class="built_in">require</span>(<span class="string">&#x27;jquery&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> obj1 = &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">b</span>: &#123; <span class="attr">f</span>: &#123; <span class="attr">g</span>: <span class="number">1</span> &#125; &#125;,</span><br><span class="line">    <span class="attr">c</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> obj2 = $.<span class="title function_">extend</span>(<span class="literal">true</span>, &#123;&#125;, obj1);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj1.<span class="property">b</span>.<span class="property">f</span> === obj2.<span class="property">b</span>.<span class="property">f</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h3 id="JSON-stringify">JSON.stringify()</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj2=<span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj1)); <span class="comment">// JSON.parse() æ–¹æ³•å°†æ•°æ®è½¬æ¢ä¸º JavaScript å¯¹è±¡</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™ç§æ–¹å¼å­˜åœ¨å¼Šç«¯ï¼Œä¼šå¿½ç•¥<code>undefined</code>ã€<code>symbol</code>å’Œ<code>å‡½æ•°</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;A&#x27;</span>,</span><br><span class="line">    <span class="attr">name1</span>: <span class="literal">undefined</span>,</span><br><span class="line">    <span class="attr">name3</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;,</span><br><span class="line">    <span class="attr">name4</span>:  <span class="title class_">Symbol</span>(<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obj2 = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj2); <span class="comment">// &#123;name: &quot;A&quot;&#125;</span></span><br></pre></td></tr></table></figure><h3 id="å¾ªç¯é€’å½’">å¾ªç¯é€’å½’</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">deepClone</span>(<span class="params">obj, hash = <span class="keyword">new</span> <span class="built_in">WeakMap</span>()</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (obj === <span class="literal">null</span>) <span class="keyword">return</span> obj; <span class="comment">// å¦‚æœæ˜¯nullæˆ–è€…undefinedæˆ‘å°±ä¸è¿›è¡Œæ‹·è´æ“ä½œ</span></span><br><span class="line">  <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> <span class="title class_">Date</span>) <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Date</span>(obj);</span><br><span class="line">  <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> <span class="title class_">RegExp</span>) <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RegExp</span>(obj);</span><br><span class="line">  <span class="comment">// å¯èƒ½æ˜¯å¯¹è±¡æˆ–è€…æ™®é€šçš„å€¼  å¦‚æœæ˜¯å‡½æ•°çš„è¯æ˜¯ä¸éœ€è¦æ·±æ‹·è´</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&quot;object&quot;</span>) <span class="keyword">return</span> obj;</span><br><span class="line">  <span class="comment">// æ˜¯å¯¹è±¡çš„è¯å°±è¦è¿›è¡Œæ·±æ‹·è´</span></span><br><span class="line">  <span class="keyword">if</span> (hash.<span class="title function_">get</span>(obj)) <span class="keyword">return</span> hash.<span class="title function_">get</span>(obj);</span><br><span class="line">  <span class="keyword">let</span> cloneObj = <span class="keyword">new</span> obj.<span class="title function_">constructor</span>(<span class="params"></span>);</span><br><span class="line">  <span class="comment">// æ‰¾åˆ°çš„æ˜¯æ‰€å±ç±»åŸå‹ä¸Šçš„constructor,è€ŒåŸå‹ä¸Šçš„ constructoræŒ‡å‘çš„æ˜¯å½“å‰ç±»æœ¬èº«</span></span><br><span class="line">  hash.<span class="title function_">set</span>(obj, cloneObj);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj.<span class="title function_">hasOwnProperty</span>(key)) &#123;</span><br><span class="line">      <span class="comment">// å®ç°ä¸€ä¸ªé€’å½’æ‹·è´</span></span><br><span class="line">      cloneObj[key] = <span class="title function_">deepClone</span>(obj[key], hash);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> cloneObj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ…æ‹·è´">æµ…æ‹·è´</h2><ul><li><p>æµ…æ‹·è´ï¼ŒæŒ‡çš„æ˜¯åˆ›å»ºæ–°çš„æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®æœ‰ç€åŸå§‹æ•°æ®å±æ€§å€¼çš„ä¸€ä»½ç²¾ç¡®æ‹·è´</p></li><li><p>å¦‚æœå±æ€§æ˜¯åŸºæœ¬ç±»å‹ï¼Œæ‹·è´çš„å°±æ˜¯åŸºæœ¬ç±»å‹çš„å€¼ï¼›å¦‚æœå±æ€§æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‹·è´çš„å°±æ˜¯å†…å­˜åœ°å€ã€‚</p><p>å³æµ…æ‹·è´æ˜¯æ‹·è´ä¸€å±‚ï¼Œæ·±å±‚æ¬¡çš„å¼•ç”¨ç±»å‹åˆ™å…±äº«å†…å­˜åœ°å€ã€‚</p></li></ul><p>ä¸‹é¢ç®€å•å®ç°ä¸€ä¸ªæµ…æ‹·è´</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">shallowClone</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> newObj = &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> prop <span class="keyword">in</span> obj) &#123;</span><br><span class="line">        <span class="keyword">if</span>(obj.<span class="title function_">hasOwnProperty</span>(prop))&#123;</span><br><span class="line">            newObj[prop] = obj[prop];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> newObj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨<code>JavaScript</code>ä¸­ï¼Œå­˜åœ¨æµ…æ‹·è´çš„ç°è±¡æœ‰ï¼š</p><ul><li><code>Object.assign</code></li><li><code>Array.prototype.slice()</code>, <code>Array.prototype.concat()</code></li><li>ä½¿ç”¨æ‹“å±•è¿ç®—ç¬¦å®ç°çš„å¤åˆ¶</li></ul><h3 id="Object-assign">Object.assign</h3><p><code>Object.assign()</code> æ–¹æ³•å°†å±æ€§ä»ä¸€ä¸ªæˆ–å¤šä¸ªæºå¯¹è±¡å¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ï¼Œè¿”å›ä¿®æ”¹åçš„å¯¹è±¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> target = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> source = &#123; <span class="attr">b</span>: <span class="number">4</span>, <span class="attr">c</span>: <span class="number">5</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> returnedTarget = <span class="title class_">Object</span>.<span class="title function_">assign</span>(target, source);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(target);</span><br><span class="line"><span class="comment">// expected output: Object &#123; a: 1, b: 4, c: 5 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(returnedTarget);</span><br><span class="line"><span class="comment">// expected output: Object &#123; a: 1, b: 4, c: 5 &#125;</span></span><br></pre></td></tr></table></figure><h3 id="slice">slice()</h3><p><code>Array.slice()</code> æ–¹æ³•ä»æ•°ç»„ä¸­è¿”å›é€‰å®šçš„å…ƒç´ ï¼Œä½œä¸ºä¸€ä¸ªæ–°æ•°ç»„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr=[<span class="string">&#x27;aa&#x27;</span>,<span class="string">&#x27;bb&#x27;</span>,<span class="string">&#x27;cc&#x27;</span>,<span class="string">&#x27;dd&#x27;</span>,<span class="string">&#x27;ee&#x27;</span>,<span class="string">&#x27;ff&#x27;</span>];</span><br><span class="line"><span class="keyword">var</span> data=arr.<span class="title function_">slice</span>(<span class="number">2</span>,<span class="number">4</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data) <span class="comment">// [&quot;cc&quot;, &quot;dd&quot;]</span></span><br><span class="line"><span class="keyword">var</span> data1=arr.<span class="title function_">slice</span>(<span class="number">2</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data1) <span class="comment">// [&quot;cc&quot;, &quot;dd&quot;, &quot;ee&quot;, &quot;ff&quot;]</span></span><br></pre></td></tr></table></figure><h3 id="concat">concat()</h3><p><code>concat()</code> æ–¹æ³•ç”¨äºè¿æ¥ä¸¤ä¸ªæˆ–å¤šä¸ªæ•°ç»„ã€‚</p><ul><li>è¯¥æ–¹æ³•ä¸ä¼šæ›´æ”¹ç°æœ‰æ•°ç»„ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œå…¶ä¸­åŒ…å«å·²è¿æ¥æ•°ç»„çš„å€¼ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sedan = [<span class="string">&quot;S60&quot;</span>, <span class="string">&quot;S90&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> <span class="variable constant_">SUV</span> = [<span class="string">&quot;XC40&quot;</span>, <span class="string">&quot;XC60&quot;</span>, <span class="string">&quot;XC90&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Volvo</span> = sedan.<span class="title function_">concat</span>(<span class="variable constant_">SUV</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Volvo</span>) <span class="comment">//[&quot;S60&quot;,&quot;S90&quot;,&quot;XC40&quot;,&quot;XC60&quot;,&quot;XC90&quot;]</span></span><br></pre></td></tr></table></figure><h3 id="æ‹“å±•è¿ç®—ç¬¦">æ‹“å±•è¿ç®—ç¬¦</h3><p>æ‰©å±•è¿ç®—ç¬¦<code>(...args)</code>æ˜¯ES6çš„è¯­æ³•ï¼Œç”¨äºå–å‡ºå‚æ•°å¯¹è±¡çš„æ‰€æœ‰å¯éå†å±æ€§ï¼Œç„¶åæ‹·è´åˆ°å½“å‰å¯¹è±¡ä¹‹ä¸­ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;<span class="attr">name</span>: <span class="string">&quot;Amy&quot;</span>, <span class="attr">age</span>: <span class="number">15</span>&#125;</span><br><span class="line"><span class="keyword">let</span> someone = &#123; ...person &#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(someone)  <span class="comment">// &#123;name: &quot;Amy&quot;, age: 15&#125;</span></span><br></pre></td></tr></table></figure><h4 id="æ‹“å±•è¿ç®—ç¬¦ç‰¹æ®Šç”¨æ³•">æ‹“å±•è¿ç®—ç¬¦ç‰¹æ®Šç”¨æ³•</h4><h5 id="æ•°ç»„-v2">æ•°ç»„</h5><p>ç”±äºæ•°ç»„æ˜¯ç‰¹æ®Šçš„å¯¹è±¡ï¼Œæ‰€ä»¥å¯¹è±¡çš„æ‰©å±•è¿ç®—ç¬¦ä¹Ÿå¯ä»¥ç”¨äºæ•°ç»„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> foo = &#123; ...[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>] &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(foo) <span class="comment">// &#123;0: &quot;a&quot;, 1: &quot;b&quot;, 2: &quot;c&quot;&#125;</span></span><br></pre></td></tr></table></figure><h5 id="ç©ºå¯¹è±¡">ç©ºå¯¹è±¡</h5><p>å¦‚æœæ‰©å±•è¿ç®—ç¬¦åé¢æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œåˆ™æ²¡æœ‰ä»»ä½•æ•ˆæœã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;...&#123;&#125;, <span class="attr">a</span>: <span class="number">1</span>&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// &#123; a: 1 &#125;</span></span><br></pre></td></tr></table></figure><h5 id="Numberç±»å‹ã€Boolenç±»å‹ã€undefinedã€null">Numberç±»å‹ã€Boolenç±»å‹ã€undefinedã€null</h5><p>å¦‚æœæ‰©å±•è¿ç®—ç¬¦åé¢æ˜¯ä¸Šé¢è¿™å‡ ç§ç±»å‹ï¼Œéƒ½ä¼šè¿”å›ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå› ä¸ºå®ƒä»¬æ²¡æœ‰è‡ªèº«å±æ€§ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç­‰åŒäº &#123;...Object(1)&#125;</span></span><br><span class="line">&#123;...<span class="number">1</span>&#125; <span class="comment">// &#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº &#123;...Object(true)&#125;</span></span><br><span class="line">&#123;...<span class="literal">true</span>&#125; <span class="comment">// &#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº &#123;...Object(undefined)&#125;</span></span><br><span class="line">&#123;...<span class="literal">undefined</span>&#125; <span class="comment">// &#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº &#123;...Object(null)&#125;</span></span><br><span class="line">&#123;...<span class="literal">null</span>&#125; <span class="comment">// &#123;&#125;</span></span><br></pre></td></tr></table></figure><h5 id="å­—ç¬¦ä¸²">å­—ç¬¦ä¸²</h5><p>å¦‚æœæ‰©å±•è¿ç®—ç¬¦åé¢æ˜¯å­—ç¬¦ä¸²ï¼Œå®ƒä¼šè‡ªåŠ¨è½¬æˆä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;...<span class="string">&#x27;hello&#x27;</span>&#125;</span><br><span class="line"><span class="comment">// &#123;0: &quot;h&quot;, 1: &quot;e&quot;, 2: &quot;l&quot;, 3: &quot;l&quot;, 4: &quot;o&quot;&#125;</span></span><br></pre></td></tr></table></figure><h5 id="å¯¹è±¡çš„åˆå¹¶">å¯¹è±¡çš„åˆå¹¶</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> age = &#123;<span class="attr">age</span>: <span class="number">15</span>&#125;</span><br><span class="line"><span class="keyword">let</span> name = &#123;<span class="attr">name</span>: <span class="string">&quot;Amy&quot;</span>&#125;</span><br><span class="line"><span class="keyword">let</span> person = &#123;...age, ...name&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person) <span class="comment">// &#123;age: 15, name: &quot;Amy&quot;&#125;</span></span><br></pre></td></tr></table></figure><h5 id="æ³¨æ„äº‹é¡¹-v2">æ³¨æ„äº‹é¡¹</h5><p>è‡ªå®šä¹‰çš„å±æ€§å’Œæ‹“å±•è¿ç®—ç¬¦å¯¹è±¡é‡Œé¢å±æ€§çš„ç›¸åŒçš„æ—¶å€™ï¼š</p><p><strong>è‡ªå®šä¹‰çš„å±æ€§åœ¨æ‹“å±•è¿ç®—ç¬¦åé¢ï¼Œåˆ™æ‹“å±•è¿ç®—ç¬¦å¯¹è±¡å†…éƒ¨åŒåçš„å±æ€§å°†è¢«è¦†ç›–æ‰ã€‚</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;<span class="attr">name</span>: <span class="string">&quot;Amy&quot;</span>, <span class="attr">age</span>: <span class="number">15</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> someone = &#123; ...person, <span class="attr">name</span>: <span class="string">&quot;Mike&quot;</span>, <span class="attr">age</span>: <span class="number">17</span>&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(someone);  <span class="comment">//&#123;name: &quot;Mike&quot;, age: 17&#125;</span></span><br></pre></td></tr></table></figure><p><strong>è‡ªå®šä¹‰çš„å±æ€§åœ¨æ‹“å±•è¿ç®—åº¦å‰é¢ï¼Œåˆ™å˜æˆè®¾ç½®æ–°å¯¹è±¡é»˜è®¤å±æ€§å€¼ã€‚</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;<span class="attr">name</span>: <span class="string">&quot;Amy&quot;</span>, <span class="attr">age</span>: <span class="number">15</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> someone = &#123;<span class="attr">name</span>: <span class="string">&quot;Mike&quot;</span>, <span class="attr">age</span>: <span class="number">17</span>, ...person&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(someone);  <span class="comment">//&#123;name: &quot;Amy&quot;, age: 15&#125;</span></span><br></pre></td></tr></table></figure><h2 id="æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«">æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«</h2><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/d9862c00-69b8-11eb-ab90-d9ae814b240d.png" alt="img"></p><p>ä»ä¸Šå›¾å‘ç°ï¼Œæµ…æ‹·è´å’Œæ·±æ‹·è´<strong>éƒ½åˆ›å»ºå‡ºä¸€ä¸ªæ–°çš„å¯¹è±¡</strong>ï¼Œä½†åœ¨å¤åˆ¶å¯¹è±¡å±æ€§çš„æ—¶å€™ï¼Œè¡Œä¸ºå°±ä¸ä¸€æ ·ã€‚</p><ul><li><p><strong><code>æµ…æ‹·è´</code>åªå¤åˆ¶å±æ€§æŒ‡å‘æŸä¸ªå¯¹è±¡çš„æŒ‡é’ˆï¼Œè€Œä¸å¤åˆ¶å¯¹è±¡æœ¬èº«ï¼Œæ–°æ—§å¯¹è±¡è¿˜æ˜¯å…±äº«åŒä¸€å—å†…å­˜ï¼Œä¿®æ”¹å¯¹è±¡å±æ€§ä¼šå½±å“åŸå¯¹è±¡ã€‚</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æµ…æ‹·è´</span></span><br><span class="line"><span class="keyword">const</span> obj1 = &#123;</span><br><span class="line">    name : <span class="string">&#x27;init&#x27;</span>,</span><br><span class="line">    arr : [<span class="number">1</span>,[<span class="number">2</span>,<span class="number">3</span>],<span class="number">4</span>],</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> obj3=<span class="title function_">shallowClone</span>(obj1) <span class="comment">// ä¸€ä¸ªæµ…æ‹·è´æ–¹æ³•</span></span><br><span class="line">obj3.<span class="property">name</span> = <span class="string">&quot;update&quot;</span>;</span><br><span class="line">obj3.<span class="property">arr</span>[<span class="number">1</span>] = [<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>] ; <span class="comment">// æ–°æ—§å¯¹è±¡è¿˜æ˜¯å…±äº«åŒä¸€å—å†…å­˜</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;obj1&#x27;</span>,obj1) <span class="comment">// obj1 &#123; name: &#x27;init&#x27;,  arr: [ 1, [ 5, 6, 7 ], 4 ] &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;obj3&#x27;</span>,obj3) <span class="comment">// obj3 &#123; name: &#x27;update&#x27;, arr: [ 1, [ 5, 6, 7 ], 4 ] &#125;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>æ·±æ‹·è´`ä¼šå¦å¤–åˆ›é€ ä¸€ä¸ªä¸€æ¨¡ä¸€æ ·çš„å¯¹è±¡ï¼Œæ–°å¯¹è±¡è·ŸåŸå¯¹è±¡ä¸å…±äº«å†…å­˜ï¼Œä¿®æ”¹æ–°å¯¹è±¡ä¸ä¼šæ”¹åˆ°åŸå¯¹è±¡ã€‚</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·±æ‹·è´</span></span><br><span class="line"><span class="keyword">const</span> obj1 = &#123;</span><br><span class="line">    name : <span class="string">&#x27;init&#x27;</span>,</span><br><span class="line">    arr : [<span class="number">1</span>,[<span class="number">2</span>,<span class="number">3</span>],<span class="number">4</span>],</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> obj4=<span class="title function_">deepClone</span>(obj1) <span class="comment">// ä¸€ä¸ªæ·±æ‹·è´æ–¹æ³•</span></span><br><span class="line">obj4.<span class="property">name</span> = <span class="string">&quot;update&quot;</span>;</span><br><span class="line">obj4.<span class="property">arr</span>[<span class="number">1</span>] = [<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>] ; <span class="comment">// æ–°å¯¹è±¡è·ŸåŸå¯¹è±¡ä¸å…±äº«å†…å­˜</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;obj1&#x27;</span>,obj1) <span class="comment">// obj1 &#123; name: &#x27;init&#x27;, arr: [ 1, [ 2, 3 ], 4 ] &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;obj4&#x27;</span>,obj4) <span class="comment">// obj4 &#123; name: &#x27;update&#x27;, arr: [ 1, [ 5, 6, 7 ], 4 ] &#125;</span></span><br></pre></td></tr></table></figure></li></ul><blockquote><p>å‰æä¸ºæ‹·è´ç±»å‹ä¸ºå¼•ç”¨ç±»å‹çš„æƒ…å†µä¸‹ï¼š</p><ul><li><strong>æµ…æ‹·è´</strong>æ˜¯<strong>æ‹·è´ä¸€å±‚</strong>ï¼Œå±æ€§ä¸ºå¯¹è±¡æ—¶ï¼Œæµ…æ‹·è´æ˜¯å¤åˆ¶ï¼Œä¸¤ä¸ªå¯¹è±¡æŒ‡å‘åŒä¸€ä¸ªåœ°å€</li><li><strong>æ·±æ‹·è´</strong>æ˜¯<strong>é€’å½’æ‹·è´æ·±å±‚æ¬¡</strong>ï¼Œå±æ€§ä¸ºå¯¹è±¡æ—¶ï¼Œæ·±æ‹·è´æ˜¯æ–°å¼€æ ˆï¼Œä¸¤ä¸ªå¯¹è±¡æŒ‡å‘ä¸åŒçš„åœ°å€</li></ul></blockquote><h1>åŸå‹å’ŒåŸå‹é“¾</h1><h2 id="åŸå‹">åŸå‹</h2><p><strong>æ¦‚å¿µ</strong>ï¼š<code>JavaScript</code> å¸¸è¢«æè¿°ä¸ºä¸€ç§åŸºäºåŸå‹çš„è¯­è¨€â€”â€”æ¯ä¸ªå¯¹è±¡æ‹¥æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡ã€‚</p><ul><li><p>å½“è¯•å›¾è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå®ƒä¸ä»…ä»…åœ¨è¯¥å¯¹è±¡ä¸Šæœå¯»ï¼Œè¿˜ä¼šæœå¯»è¯¥å¯¹è±¡çš„åŸå‹ï¼Œä»¥åŠè¯¥å¯¹è±¡çš„åŸå‹çš„åŸå‹ï¼Œä¾æ¬¡å±‚å±‚å‘ä¸Šæœç´¢ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªåå­—åŒ¹é…çš„å±æ€§æˆ–åˆ°è¾¾åŸå‹é“¾çš„æœ«å°¾ã€‚</p></li><li><p>å‡†ç¡®åœ°è¯´ï¼Œè¿™äº›å±æ€§å’Œæ–¹æ³•å®šä¹‰åœ¨Objectçš„æ„é€ å™¨å‡½æ•°ï¼ˆconstructor functionsï¼‰ä¹‹ä¸Šçš„<code>prototype</code>å±æ€§ä¸Šï¼Œè€Œéå®ä¾‹å¯¹è±¡æœ¬èº«ã€‚</p></li></ul><p>ä¸‹é¢ä¸¾ä¸ªä¾‹å­ï¼š</p><p>å‡½æ•°å¯ä»¥æœ‰å±æ€§ï¼Œ æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§å«ä½œåŸå‹<code>prototype</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">doSomething</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( doSomething.<span class="property"><span class="keyword">prototype</span></span> );</span><br></pre></td></tr></table></figure><p>æ§åˆ¶å°è¾“å‡º</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">constructor</span>: Æ’ <span class="title function_">doSomething</span>(),</span><br><span class="line">    <span class="attr">__proto__</span>: &#123;</span><br><span class="line">        <span class="attr">constructor</span>: Æ’ <span class="title class_">Object</span>(),</span><br><span class="line">        <span class="attr">hasOwnProperty</span>: Æ’ <span class="title function_">hasOwnProperty</span>(),</span><br><span class="line">        <span class="attr">isPrototypeOf</span>: Æ’ <span class="title function_">isPrototypeOf</span>(),</span><br><span class="line">        <span class="attr">propertyIsEnumerable</span>: Æ’ <span class="title function_">propertyIsEnumerable</span>(),</span><br><span class="line">        <span class="attr">toLocaleString</span>: Æ’ <span class="title function_">toLocaleString</span>(),</span><br><span class="line">        <span class="attr">toString</span>: Æ’ <span class="title function_">toString</span>(),</span><br><span class="line">        <span class="attr">valueOf</span>: Æ’ <span class="title function_">valueOf</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™ä¸ªå¯¹è±¡ï¼Œå°±æ˜¯å¤§å®¶å¸¸è¯´çš„<strong>åŸå‹å¯¹è±¡</strong>ã€‚</p><p>å¯ä»¥çœ‹åˆ°ï¼ŒåŸå‹å¯¹è±¡æœ‰ä¸€ä¸ªè‡ªæœ‰å±æ€§<code>constructor</code>ï¼Œè¿™ä¸ªå±æ€§æŒ‡å‘è¯¥å‡½æ•°ï¼Œå¦‚ä¸‹å›¾å…³ç³»å±•ç¤ºï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/56d87250-725e-11eb-ab90-d9ae814b240d.png" alt="img"></p><h2 id="åŸå‹é“¾">åŸå‹é“¾</h2><p><strong>æ¦‚å¿µ</strong>ï¼šåŸå‹å¯¹è±¡ä¹Ÿå¯èƒ½æ‹¥æœ‰åŸå‹ï¼Œå¹¶ä»ä¸­ç»§æ‰¿æ–¹æ³•å’Œå±æ€§ï¼Œä¸€å±‚ä¸€å±‚ã€ä»¥æ­¤ç±»æ¨ã€‚è¿™ç§å…³ç³»å¸¸è¢«ç§°ä¸º<strong>åŸå‹é“¾ (prototype chain)</strong>ï¼Œå®ƒè§£é‡Šäº†ä¸ºä½•ä¸€ä¸ªå¯¹è±¡ä¼šæ‹¥æœ‰å®šä¹‰åœ¨å…¶ä»–å¯¹è±¡ä¸­çš„å±æ€§å’Œæ–¹æ³•ã€‚</p><blockquote><p>åœ¨å¯¹è±¡å®ä¾‹å’Œå®ƒçš„æ„é€ å™¨ä¹‹é—´å»ºç«‹ä¸€ä¸ªé“¾æ¥ï¼ˆå®ƒæ˜¯<code>__proto__</code>å±æ€§ï¼Œæ˜¯ä»æ„é€ å‡½æ•°çš„<code>prototype</code>å±æ€§æ´¾ç”Ÿçš„ï¼‰ï¼Œä¹‹åé€šè¿‡ä¸Šæº¯åŸå‹é“¾ï¼Œåœ¨æ„é€ å™¨ä¸­æ‰¾åˆ°è¿™äº›å±æ€§å’Œæ–¹æ³•ã€‚</p></blockquote><p>ä¸‹é¢ä¸¾ä¸ªä¾‹å­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = <span class="number">18</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sayName</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç¬¬äºŒæ­¥ åˆ›å»ºå®ä¾‹</span></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;person&#x27;</span>)</span><br></pre></td></tr></table></figure><p>æ ¹æ®ä»£ç ï¼Œå¾—åˆ°ä¸‹å›¾ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/60825aa0-725e-11eb-85f6-6fac77c0c9b3.png" alt="img"></p><p>ä¸‹é¢åˆ†æä¸€ä¸‹ï¼š</p><ul><li>æ„é€ å‡½æ•°<code>Person</code>å­˜åœ¨åŸå‹å¯¹è±¡<code>Person.prototype</code></li><li>æ„é€ å‡½æ•°ç”Ÿæˆå®ä¾‹å¯¹è±¡<code>person</code>ï¼Œ<code>person</code>çš„<code>__proto__</code>æŒ‡å‘æ„é€ å‡½æ•°<code>Person</code>åŸå‹å¯¹è±¡</li><li><code>Person.prototype.__proto__</code> æŒ‡å‘å†…ç½®å¯¹è±¡ï¼Œå› ä¸º <code>Person.prototype</code> æ˜¯ä¸ªå¯¹è±¡ï¼Œé»˜è®¤æ˜¯ç”± <code>Object</code>å‡½æ•°ä½œä¸ºç±»åˆ›å»ºçš„ï¼Œè€Œ <code>Object.prototype</code> ä¸ºå†…ç½®å¯¹è±¡</li><li><code>Person.__proto__</code> æŒ‡å‘å†…ç½®åŒ¿åå‡½æ•° <code>anonymous</code>ï¼Œå› ä¸º Person æ˜¯ä¸ªå‡½æ•°å¯¹è±¡ï¼Œé»˜è®¤ç”± Function ä½œä¸ºç±»åˆ›å»º</li><li><code>Function.prototype</code> å’Œ <code>Function.__proto__</code>åŒæ—¶æŒ‡å‘å†…ç½®åŒ¿åå‡½æ•° <code>anonymous</code>ï¼Œè¿™æ ·åŸå‹é“¾çš„ç»ˆç‚¹å°±æ˜¯ <code>null</code></li></ul><h2 id="æ€»ç»“-v2">æ€»ç»“</h2><p><code>__proto__</code>ä½œä¸ºä¸åŒå¯¹è±¡ä¹‹é—´çš„æ¡¥æ¢ï¼Œç”¨æ¥æŒ‡å‘åˆ›å»ºå®ƒçš„æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/6a742160-725e-11eb-ab90-d9ae814b240d.png" alt="img"></p><p>æ¯ä¸ªå¯¹è±¡çš„<code>__proto__</code>éƒ½æ˜¯æŒ‡å‘å®ƒçš„æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡<code>prototype</code>çš„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">person1.<span class="property">__proto__</span> === <span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span></span><br></pre></td></tr></table></figure><p>æ„é€ å‡½æ•°æ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œæ˜¯é€šè¿‡ <code>Function</code>æ„é€ å™¨äº§ç”Ÿçš„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Person</span>.<span class="property">__proto__</span> === <span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span></span><br></pre></td></tr></table></figure><p>åŸå‹å¯¹è±¡æœ¬èº«æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œè€Œæ™®é€šå¯¹è±¡çš„æ„é€ å‡½æ•°éƒ½æ˜¯<code>Object</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> === <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span></span><br></pre></td></tr></table></figure><p>åˆšåˆšä¸Šé¢è¯´äº†ï¼Œæ‰€æœ‰çš„æ„é€ å™¨éƒ½æ˜¯å‡½æ•°å¯¹è±¡ï¼Œå‡½æ•°å¯¹è±¡éƒ½æ˜¯ <code>Function</code>æ„é€ äº§ç”Ÿçš„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="property">__proto__</span> === <span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span></span><br></pre></td></tr></table></figure><p><code>Object</code>çš„åŸå‹å¯¹è±¡ä¹Ÿæœ‰<code>__proto__</code>å±æ€§æŒ‡å‘<code>null</code>ï¼Œ<code>null</code>æ˜¯åŸå‹é“¾çš„é¡¶ç«¯</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> === <span class="literal">null</span></span><br></pre></td></tr></table></figure><p>ä¸‹é¢ä½œå‡ºæ€»ç»“ï¼š</p><ul><li>ä¸€åˆ‡å¯¹è±¡éƒ½æ˜¯ç»§æ‰¿è‡ª<code>Object</code>å¯¹è±¡ï¼Œ<code>Object</code> å¯¹è±¡ç›´æ¥ç»§æ‰¿æ ¹æºå¯¹è±¡<code>null</code></li><li>ä¸€åˆ‡çš„å‡½æ•°å¯¹è±¡ï¼ˆåŒ…æ‹¬ <code>Object</code> å¯¹è±¡ï¼‰ï¼Œéƒ½æ˜¯ç»§æ‰¿è‡ª <code>Function</code> å¯¹è±¡</li><li><code>Object</code> å¯¹è±¡ç›´æ¥ç»§æ‰¿è‡ª <code>Function</code> å¯¹è±¡</li><li><code>Function</code>å¯¹è±¡çš„<code>__proto__</code>ä¼šæŒ‡å‘è‡ªå·±çš„åŸå‹å¯¹è±¡ï¼Œæœ€ç»ˆè¿˜æ˜¯ç»§æ‰¿è‡ª<code>Object</code>å¯¹è±¡</li></ul><h1>ç»§æ‰¿</h1><p>åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œæœ‰äº›å¯¹è±¡ä¼šæœ‰æ–¹æ³•ï¼ˆå‡½æ•°ï¼‰ï¼Œå¦‚æœæŠŠè¿™äº›æ–¹æ³•éƒ½æ”¾åœ¨æ„é€ å‡½æ•°ä¸­å£°æ˜å°±ä¼šå¯¼è‡´å†…å­˜çš„æµªè´¹ã€‚</p><p>å¦‚ä¸‹ï¼Œé€šè¿‡è°ƒç”¨æ„é€ å‡½æ•°çš„æ–¹å¼æ¥åˆ›å»ºå¯¹è±¡ï¼Œ<code>Person</code> æ˜¯ <code>p1</code>ã€<code>p2</code> çš„æ„é€ å‡½æ•°ã€‚æ‰€æœ‰çš„ <code>Person</code> å¯¹è±¡éƒ½æœ‰ <code>say</code> æ–¹æ³•ï¼Œå¹¶ä¸”åŠŸèƒ½ç›¸ä¼¼ï¼Œä½†æ˜¯ä»–ä»¬å æ®äº†ä¸åŒçš„å†…å­˜ï¼Œä¼šå¯¼è‡´å†…å­˜æµªè´¹ï¼ˆå†…å­˜æ³„éœ²ï¼‰ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">say</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ä½ å¥½&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="property">say</span> === p2.<span class="property">say</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p>äºæ˜¯ï¼Œæˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°<strong>ç»§æ‰¿</strong>ã€‚</p><blockquote><p>é€šè¿‡æŸç§æ–¹å¼è®©ä¸€ä¸ªå¯¹è±¡å¯ä»¥è®¿é—®åˆ°å¦ä¸€ä¸ªå¯¹è±¡ä¸­çš„å±æ€§å’Œæ–¹æ³•ï¼Œæˆ‘ä»¬æŠŠè¿™ç§æ–¹å¼ç§°ä¹‹ä¸º<strong>ç»§æ‰¿</strong>ã€‚</p></blockquote><p><strong>å®ç°æ–¹å¼</strong></p><p>ä¸»æµé€šå¸¸æœ‰ 8 ç§æ–¹å¼ï¼š</p><ul><li>åŸå‹é“¾ç»§æ‰¿</li><li>å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿</li><li>ç»„åˆæ¨¡å¼ç»§æ‰¿</li><li>å…±äº«åŸå‹ç»§æ‰¿</li><li>åŸå‹å¼ç»§æ‰¿</li><li>å¯„ç”Ÿå¼ç»§æ‰¿</li><li>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿</li><li>ES6 ä¸­ class çš„ç»§æ‰¿ï¼ˆæ–°ï¼‰</li></ul><h2 id="åŸå‹é“¾ç»§æ‰¿">åŸå‹é“¾ç»§æ‰¿</h2><p>é€šè¿‡å®ä¾‹åŒ–ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå­ç±»çš„åŸå‹æŒ‡å‘äº†çˆ¶ç±»çš„å®ä¾‹ï¼Œå­ç±»å°±å¯ä»¥è°ƒç”¨å…¶çˆ¶ç±»åŸå‹å¯¹è±¡ä¸Šçš„ç§æœ‰å±æ€§å’Œå…¬æœ‰æ–¹æ³•ã€‚ï¼ˆæœ¬è´¨å°±æ˜¯é‡å†™äº†åŸå‹å¯¹è±¡ï¼‰</p><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">parentName</span> = <span class="string">&#x27;çˆ¶ç±»&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Parent</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getParentName</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">parentName</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">childName</span> = <span class="string">&#x27;å­ç±»&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Child</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Parent</span>();</span><br><span class="line"><span class="title class_">Child</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getChildName</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">childName</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c = <span class="keyword">new</span> <span class="title class_">Child</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c.<span class="title function_">getParentName</span>()); <span class="comment">// &#x27;çˆ¶ç±»&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="éœ€è¦æ³¨æ„çš„é—®é¢˜">éœ€è¦æ³¨æ„çš„é—®é¢˜</h3><p><strong>1ï¼‰åˆ«å¿˜è®°é»˜è®¤çš„ç±»å‹</strong></p><p>æˆ‘ä»¬çŸ¥é“ï¼Œæ‰€æœ‰çš„å¼•ç”¨ç±»å‹éƒ½ç»§æ‰¿äº† Objectï¼Œè€Œè¿™ä¸ªç»§æ‰¿ä¹Ÿæ˜¯é€šè¿‡åŸå‹é“¾å®ç°çš„ã€‚æ‰€ä»¥æ‰€æœ‰çš„å¯¹è±¡éƒ½æ‹¥æœ‰ Object å…·æœ‰çš„ä¸€äº›é»˜è®¤çš„æ–¹æ³•ã€‚å¦‚ï¼š<code>hasOwnProperty()</code>ã€<code>propertyIsEnumerable()</code>ã€<code>toLocaleString()</code>ã€<code>toString()</code> å’Œ <code>valueOf()</code>ã€‚</p><p><strong>2ï¼‰ç¡®å®šåŸå‹å’Œå®ä¾‹çš„å…³ç³»</strong></p><p>å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥ç¡®å®šåŸå‹å’Œå®ä¾‹ä¹‹é—´çš„å…³ç³»ã€‚</p><ul><li>ç¬¬ä¸€ç§ï¼šä½¿ç”¨ <code>instanceof</code> æ“ä½œç¬¦ï¼Œåªè¦ç”¨è¿™ä¸ªæ“ä½œç¬¦æ¥æµ‹è¯•å®ä¾‹ä¸åŸå‹é“¾ä¸­å‡ºç°è¿‡çš„æ„é€ å‡½æ•°ï¼Œç»“æœå°±ä¼šè¿”å› <code>true</code>ã€‚</li><li>ç¬¬äºŒç§ï¼šä½¿ç”¨ <code>isPrototypeOf()</code> æ–¹æ³•ã€‚åŒæ ·ï¼Œåªè¦æ˜¯åŸå‹é“¾ä¸­å‡ºç°è¿‡çš„åŸå‹ï¼Œéƒ½å¯ä»¥è¯´æ˜¯è¯¥åŸå‹é“¾æ‰€æ´¾ç”Ÿçš„å®ä¾‹çš„åŸå‹ï¼Œå› æ­¤ <code>isPrototypeOf()</code> æ–¹æ³•ä¹Ÿä¼šè¿”å› <code>true</code>ã€‚</li></ul><p>è¿˜æ˜¯ä¸Šé¢çš„ä»£ç ï¼Œå°è¯•æ‰“å°ä¸€äº›æ¯”å¯¹å…³ç³»ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c <span class="keyword">instanceof</span> <span class="title class_">Object</span>); <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c <span class="keyword">instanceof</span> <span class="title class_">Parent</span>); <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c <span class="keyword">instanceof</span> <span class="title class_">Child</span>); <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="title function_">isPrototypeOf</span>(c)); <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Parent</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="title function_">isPrototypeOf</span>(c)); <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Child</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="title function_">isPrototypeOf</span>(c)); <span class="comment">//true</span></span><br></pre></td></tr></table></figure><p><strong>3ï¼‰å­ç±»è¦åœ¨ç»§æ‰¿åå®šä¹‰æ–°æ–¹æ³•</strong></p><p>å› ä¸ºï¼ŒåŸå‹é“¾ç»§æ‰¿å®è´¨ä¸Šæ˜¯é‡å†™åŸå‹å¯¹è±¡ã€‚æ‰€ä»¥ï¼Œå¦‚æœåœ¨ç»§æ‰¿å‰å°±åœ¨å­ç±»çš„ prototype ä¸Šå®šä¹‰äº†ä¸€äº›æ–¹æ³•å’Œå±æ€§ï¼Œé‚£ä¹ˆç»§æ‰¿åï¼Œå­ç±»çš„è¿™äº›å±æ€§å’Œæ–¹æ³•å°†ä¼šè¢«è¦†ç›–ã€‚</p><p><strong>4ï¼‰ä¸èƒ½ä½¿ç”¨å¯¹è±¡å­—é¢é‡åˆ›å»ºåŸå‹æ–¹æ³•</strong></p><p>è¿™ä¸ªçš„åŸç†è·Ÿä¸Šä¸€æ¡çš„å®é™…ä¸Šæ˜¯ä¸€æ ·çš„ã€‚å½“ä½ ä½¿ç”¨å¯¹è±¡å­—é¢é‡åˆ›å»ºåŸå‹æ–¹æ³•é‡å†™åŸå‹çš„æ—¶å€™ï¼Œå®è´¨ä¸Šç›¸å½“äºé‡å†™äº†åŸå‹é“¾ï¼Œæ‰€ä»¥åŸæ¥çš„åŸå‹é“¾å°±è¢«åˆ‡æ–­äº†ã€‚</p><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">parentName</span> = <span class="string">&#x27;çˆ¶ç±»&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Parent</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getParentName</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">parentName</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">childName</span> = <span class="string">&#x27;å­ç±»&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç»§æ‰¿ Parent</span></span><br><span class="line"><span class="title class_">Child</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Parent</span>();</span><br><span class="line"><span class="comment">// ä½¿ç”¨å¯¹è±¡å­—é¢é‡æ·»åŠ æ–°æ–¹æ³•ï¼Œä¼šå¯¼è‡´ä¸Šä¸€è¡Œä»£ç æ— æ•ˆ</span></span><br><span class="line"><span class="title class_">Child</span>.<span class="property"><span class="keyword">prototype</span></span> = &#123;</span><br><span class="line">  <span class="attr">getChildName</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">childName</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">someOtherMethod</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c = <span class="keyword">new</span> <span class="title class_">Child</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c.<span class="property">getParentName</span>) <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><p><strong>5ï¼‰æ³¨æ„çˆ¶ç±»åŒ…å«å¼•ç”¨ç±»å‹çš„æƒ…å†µ</strong></p><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;çˆ¶ç±»&quot;</span>;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">hobbies</span> = [<span class="string">&quot;sing&quot;</span>, <span class="string">&quot;dance&quot;</span>, <span class="string">&quot;rap&quot;</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"><span class="comment">// ç»§æ‰¿ Parent</span></span><br><span class="line"><span class="title class_">Child</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Parent</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c1 = <span class="keyword">new</span> <span class="title class_">Child</span>();</span><br><span class="line">c1.<span class="property">name</span> = <span class="string">&quot;c1&quot;</span>;</span><br><span class="line">c1.<span class="property">hobbies</span>.<span class="title function_">push</span>(<span class="string">&quot;coding&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c1.<span class="property">name</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c1.<span class="property">hobbies</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c2 = <span class="keyword">new</span> <span class="title class_">Child</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c2.<span class="property">name</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c2.<span class="property">hobbies</span>);</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç æ‰§è¡Œåï¼Œè¾“å‡ºç»“æœä¸ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;c1&quot;</span></span><br><span class="line">[<span class="string">&quot;sing&quot;</span>, <span class="string">&quot;dance&quot;</span>, <span class="string">&quot;rap&quot;</span>, <span class="string">&quot;coding&quot;</span>]</span><br><span class="line"><span class="string">&quot;çˆ¶ç±»&quot;</span></span><br><span class="line">[<span class="string">&quot;sing&quot;</span>, <span class="string">&quot;dance&quot;</span>, <span class="string">&quot;rap&quot;</span>, <span class="string">&quot;coding&quot;</span>]</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­ä¸­çš„ Parent æ„é€ å‡½æ•°å®šä¹‰äº†ä¸€ä¸ª hobbies å±æ€§ï¼Œè¯¥å±æ€§åŒ…å«ä¸€ä¸ªæ•°ç»„ï¼ˆå¼•ç”¨ç±»å‹å€¼ï¼‰ã€‚Parent çš„æ¯ä¸ªå®ä¾‹éƒ½ä¼šæœ‰å„è‡ªåŒ…å«è‡ªå·±æ•°ç»„çš„ hobbies å±æ€§ã€‚å½“ Child é€šè¿‡åŸå‹é“¾ç»§æ‰¿äº† Parent ä¹‹åï¼ŒChild.prototype å°±å˜æˆäº† Parent çš„ä¸€ä¸ªå®ä¾‹ï¼Œå› æ­¤å®ƒä¹Ÿæ‹¥æœ‰äº†ä¸€ä¸ªå®ƒè‡ªå·±çš„ hobbies å±æ€§ â€”â€” å°±è·Ÿä¸“é—¨åˆ›å»ºäº†ä¸€ä¸ª Child.prototype.hobbies å±æ€§ä¸€æ ·ã€‚ä½†ç»“æœæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿç»“æœæ˜¯ Child çš„æ‰€æœ‰å®ä¾‹éƒ½ä¼šå…±äº«è¿™ä¸€ä¸ª hobbies å±æ€§ã€‚è€Œæˆ‘ä»¬å¯¹ c1.hobbies çš„ä¿®æ”¹èƒ½å¤Ÿé€šè¿‡ c2.hobbies åæ˜ å‡ºæ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™æ ·çš„ä¿®æ”¹ä¼šå½±å“å„ä¸ªå®ä¾‹ã€‚</p><h3 id="åŸå‹é“¾ç»§æ‰¿çš„ä¼˜ç‚¹">åŸå‹é“¾ç»§æ‰¿çš„ä¼˜ç‚¹</h3><ul><li>ç®€å•ï¼Œæ˜“å®ç°</li><li>çˆ¶ç±»æ–°å¢åŸå‹æ–¹æ³•/åŸå‹å±æ€§ï¼Œå­ç±»éƒ½èƒ½è®¿é—®</li></ul><h3 id="åŸå‹é“¾ç»§æ‰¿çš„ç¼ºç‚¹">åŸå‹é“¾ç»§æ‰¿çš„ç¼ºç‚¹</h3><ul><li>æ— æ³•å®ç°å¤šç»§æ‰¿</li><li>å¼•ç”¨ç±»å‹çš„å€¼ä¼šè¢«å®ä¾‹å…±äº«</li><li>å­ç±»å‹æ— æ³•ç»™è¶…ç±»å‹ä¼ é€’å‚æ•°</li></ul><p>é‰´äºè¿™äº›ç¼ºç‚¹ï¼Œå®è·µä¸­å¾ˆå°‘ä¼šå•ç‹¬ä½¿ç”¨åŸå‹é“¾ç»§æ‰¿ã€‚</p><h2 id="å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿ï¼ˆå¯¹è±¡å†’å……ï¼‰">å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿ï¼ˆå¯¹è±¡å†’å……ï¼‰</h2><p>åœ¨è§£å†³åŸå‹é“¾ç»§æ‰¿ä¸­åŒ…å«å¼•ç”¨ç±»å‹å€¼æ‰€å¸¦æ¥é—®é¢˜çš„è¿‡ç¨‹ä¸­ï¼Œå¼€å‘äººå‘˜å¼€å§‹ä½¿ç”¨ä¸€ç§å«åšå€Ÿç”¨æ„é€ å‡½æ•°ï¼ˆconstructor stealingï¼‰çš„æŠ€æœ¯ã€‚</p><p>è¿™ç§æŠ€æœ¯çš„åŸºæœ¬æ€æƒ³ç›¸å½“ç®€å•ï¼Œå³åœ¨å­ç±»å‹æ„é€ å‡½æ•°çš„å†…éƒ¨è°ƒç”¨è¶…ç±»å‹æ„é€ å‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">hobbies</span> = [<span class="string">&quot;sing&quot;</span>, <span class="string">&quot;dance&quot;</span>, <span class="string">&quot;rap&quot;</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="title class_">Parent</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, name);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">age</span> = <span class="number">24</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c1 = <span class="keyword">new</span> <span class="title class_">Child</span>(<span class="string">&#x27;c1&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> c2 = <span class="keyword">new</span> <span class="title class_">Child</span>(<span class="string">&#x27;c2&#x27;</span>);</span><br><span class="line">c1.<span class="property">hobbies</span>.<span class="title function_">push</span>(<span class="string">&#x27;coding&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c1.<span class="property">hobbies</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c2.<span class="property">hobbies</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c1 <span class="keyword">instanceof</span> <span class="title class_">Parent</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c1 <span class="keyword">instanceof</span> <span class="title class_">Child</span>)</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç æ‰§è¡Œåï¼Œè¾“å‡ºç»“æœä¸ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&quot;sing&quot;</span>, <span class="string">&quot;dance&quot;</span>, <span class="string">&quot;rap&quot;</span>, <span class="string">&quot;coding&quot;</span>] <span class="comment">// false</span></span><br><span class="line">[<span class="string">&quot;sing&quot;</span>, <span class="string">&quot;dance&quot;</span>, <span class="string">&quot;rap&quot;</span>] <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>å€Ÿç”¨æ„é€ å‡½æ•°çš„åŸºæœ¬æ€æƒ³å°±æ˜¯åˆ©ç”¨ <code>call</code> æˆ–è€… <code>apply</code> æŠŠçˆ¶ç±»ä¸­é€šè¿‡ <code>this</code> æŒ‡å®šçš„å±æ€§å’Œæ–¹æ³•å¤åˆ¶ï¼ˆå€Ÿç”¨ï¼‰åˆ°å­ç±»åˆ›å»ºçš„å®ä¾‹ä¸­ã€‚</p><p>å› ä¸º <code>this</code> å¯¹è±¡æ˜¯åœ¨è¿è¡Œæ—¶åŸºäºå‡½æ•°çš„æ‰§è¡Œç¯å¢ƒç»‘å®šçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å…¨å±€ä¸­ï¼Œ<code>this</code> ç­‰äº <code>window</code>ï¼Œè€Œå½“å‡½æ•°è¢«ä½œä¸ºæŸä¸ªå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨æ—¶ï¼Œ<code>this</code> ç­‰äºé‚£ä¸ªå¯¹è±¡ã€‚<code>call</code> ã€<code>apply</code> æ–¹æ³•å¯ä»¥ç”¨æ¥ä»£æ›¿å¦ä¸€ä¸ªå¯¹è±¡è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ã€‚<code>call</code>ã€<code>apply</code> æ–¹æ³•å¯å°†ä¸€ä¸ªå‡½æ•°çš„å¯¹è±¡ä¸Šä¸‹æ–‡ä»åˆå§‹çš„ä¸Šä¸‹æ–‡æ”¹å˜ä¸ºç”± thisObj æŒ‡å®šçš„æ–°å¯¹è±¡ã€‚</p><p>æ‰€ä»¥ï¼Œè¿™ä¸ªå€Ÿç”¨æ„é€ å‡½æ•°å°±æ˜¯ï¼Œ<code>new</code> å¯¹è±¡çš„æ—¶å€™ï¼ˆæ³¨æ„ï¼Œ<code>new</code> æ“ä½œç¬¦ä¸ç›´æ¥è°ƒç”¨æ˜¯ä¸åŒçš„ï¼Œä»¥å‡½æ•°çš„æ–¹å¼ç›´æ¥è°ƒç”¨çš„æ—¶å€™ï¼Œ<code>this</code> æŒ‡å‘ <code>window</code>ï¼Œ<code>new</code> åˆ›å»ºçš„æ—¶å€™ï¼Œ<code>this</code> æŒ‡å‘åˆ›å»ºçš„è¿™ä¸ªå®ä¾‹ï¼‰ï¼Œåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å®ä¾‹å¯¹è±¡ï¼Œå¹¶ä¸”æ‰§è¡Œ Child é‡Œé¢çš„ä»£ç ï¼Œè€Œ Child é‡Œé¢ç”¨ <code>call</code> è°ƒç”¨äº† Parentï¼Œä¹Ÿå°±æ˜¯è¯´æŠŠ <code>this</code> æŒ‡å‘æ”¹æˆäº†æŒ‡å‘æ–°çš„å®ä¾‹ï¼Œæ‰€ä»¥å°±ä¼šæŠŠ Parent é‡Œé¢çš„ <code>this</code> ç›¸å…³å±æ€§å’Œæ–¹æ³•èµ‹å€¼åˆ°æ–°çš„å®ä¾‹ä¸Šï¼Œè€Œä¸æ˜¯èµ‹å€¼åˆ° Child ä¸Šé¢ã€‚æ‰€æœ‰å®ä¾‹ä¸­å°±æ‹¥æœ‰äº†çˆ¶ç±»å®šä¹‰çš„è¿™äº› <code>this</code> çš„å±æ€§å’Œæ–¹æ³•ã€‚</p><h3 id="å€Ÿç”¨æ„é€ å‡½æ•°çš„ä¼˜ç‚¹">å€Ÿç”¨æ„é€ å‡½æ•°çš„ä¼˜ç‚¹</h3><ul><li>è§£å†³äº†å¼•ç”¨ç±»å‹çš„å€¼è¢«å®ä¾‹å…±äº«çš„é—®é¢˜</li><li>å¯ä»¥å‘è¶…ç±»ä¼ é€’å‚æ•°</li><li>å¯ä»¥å®ç°å¤šç»§æ‰¿ï¼ˆcall è‹¥å¹²ä¸ªè¶…ç±»ï¼‰</li></ul><h3 id="å€Ÿç”¨æ„é€ å‡½æ•°çš„ç¼ºç‚¹">å€Ÿç”¨æ„é€ å‡½æ•°çš„ç¼ºç‚¹</h3><ul><li>ä¸èƒ½ç»§æ‰¿è¶…ç±»åŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•</li><li>æ— æ³•å®ç°å‡½æ•°å¤ç”¨ï¼Œç”±äº call æœ‰å¤šä¸ªçˆ¶ç±»å®ä¾‹çš„å‰¯æœ¬ï¼Œæ€§èƒ½æŸè€—ã€‚</li><li>åŸå‹é“¾ä¸¢å¤±</li></ul><h2 id="ç»„åˆæ¨¡å¼ç»§æ‰¿">ç»„åˆæ¨¡å¼ç»§æ‰¿</h2><p>ç»„åˆç»§æ‰¿ï¼ˆcombination inheritanceï¼‰ï¼Œæœ‰æ—¶å€™ä¹Ÿå«åšä¼ªç»å…¸ç»§æ‰¿ã€‚æ˜¯å°†åŸå‹é“¾ç»§æ‰¿å’Œå€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿çš„æŠ€æœ¯ç»„åˆåˆ°ä¸€å—ï¼Œä»è€Œå‘æŒ¥äºŒè€…ä¹‹é•¿çš„ä¸€ç§ç»§æ‰¿æ¨¡å¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params">name</span>)&#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">hobbies</span> = [<span class="string">&quot;sing&quot;</span>, <span class="string">&quot;dance&quot;</span>, <span class="string">&quot;rap&quot;</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Parent</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getName</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params">name</span>)&#123;</span><br><span class="line">  <span class="title class_">Parent</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, name);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">age</span> = <span class="number">24</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Child</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Parent</span>(<span class="string">&#x27;çˆ¶ç±»&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> c1 = <span class="keyword">new</span> <span class="title class_">Child</span>(<span class="string">&#x27;c1&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> c2 = <span class="keyword">new</span> <span class="title class_">Child</span>(<span class="string">&#x27;c2&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c1.<span class="title function_">hasOwnProperty</span>(<span class="string">&#x27;name&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c1.<span class="title function_">getName</span>()); <span class="comment">// &quot;c1&quot;</span></span><br><span class="line"></span><br><span class="line">c1.<span class="property">hobbies</span>.<span class="title function_">push</span>(<span class="string">&#x27;coding&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c1.<span class="property">hobbies</span>); <span class="comment">// [&quot;sing&quot;, &quot;dance&quot;, &quot;rap&quot;, &quot;coding&quot;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c2.<span class="property">hobbies</span>); <span class="comment">// [&quot;sing&quot;, &quot;dance&quot;, &quot;rap&quot;]</span></span><br></pre></td></tr></table></figure><p>è¿™ç§ç»§æ‰¿æ–¹å¼çœ‹èµ·æ¥ä¼¼ä¹æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯å®ƒå´è°ƒç”¨äº† 2 æ¬¡è¶…ç±»å‹æ„é€ å‡½æ•°ï¼šä¸€æ¬¡åœ¨å­ç±»æ„é€ å‡½æ•°å†…ï¼Œå¦ä¸€æ¬¡æ˜¯å°†å­ç±»çš„åŸå‹æŒ‡å‘çˆ¶ç±»æ„é€ çš„å®ä¾‹ï¼Œå¯¼è‡´ç”Ÿæˆäº† 2 æ¬¡ name å’Œ hobbiesï¼Œåªä¸è¿‡å®ä¾‹å±è”½äº†åŸå‹ä¸Šçš„<code>console.log(c1)</code>ã€‚è™½ç„¶è¾¾æˆäº†ç›®çš„ï¼Œå´ä¸æ˜¯æˆ‘ä»¬æœ€æƒ³è¦çš„ã€‚</p><p>è¿™ä¸ªé—®é¢˜å°†åœ¨å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿é‡Œå¾—åˆ°è§£å†³ã€‚</p><h2 id="å…±äº«åŸå‹ç»§æ‰¿">å…±äº«åŸå‹ç»§æ‰¿</h2><p>è¿™ç§æ–¹å¼ä¸‹å­ç±»å’Œçˆ¶ç±»å…±äº«ä¸€ä¸ªåŸå‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"><span class="title class_">Parent</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hobbies</span> = [<span class="string">&quot;sing&quot;</span>, <span class="string">&quot;dance&quot;</span>, <span class="string">&quot;rap&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params">name, age</span>)&#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Child</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Parent</span>.<span class="property"><span class="keyword">prototype</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c1 = <span class="keyword">new</span> <span class="title class_">Child</span>(<span class="string">&quot;c1&quot;</span>, <span class="number">20</span>);</span><br><span class="line"><span class="keyword">var</span> c2 = <span class="keyword">new</span> <span class="title class_">Child</span>(<span class="string">&quot;c2&quot;</span>, <span class="number">24</span>);</span><br><span class="line"></span><br><span class="line">c1.<span class="property">hobbies</span>.<span class="title function_">push</span>(<span class="string">&quot;coding&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c1.<span class="property">hobbies</span>); <span class="comment">// [&quot;sing&quot;, &quot;dance&quot;, &quot;rap&quot;, &quot;coding&quot;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c2.<span class="property">hobbies</span>); <span class="comment">// [&quot;sing&quot;, &quot;dance&quot;, &quot;rap&quot;, &quot;coding&quot;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c1.<span class="property">name</span>); <span class="comment">// &quot;c1&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c2.<span class="property">name</span>); <span class="comment">// &quot;c2&quot;</span></span><br></pre></td></tr></table></figure><h3 id="å…±äº«åŸå‹ç»§æ‰¿çš„ä¼˜ç‚¹">å…±äº«åŸå‹ç»§æ‰¿çš„ä¼˜ç‚¹</h3><ul><li>ç®€å•</li></ul><h3 id="å…±äº«åŸå‹ç»§æ‰¿çš„ç¼ºç‚¹">å…±äº«åŸå‹ç»§æ‰¿çš„ç¼ºç‚¹</h3><ul><li>åªèƒ½ç»§æ‰¿çˆ¶ç±»åŸå‹å±æ€§æ–¹æ³•ï¼Œä¸èƒ½ç»§æ‰¿æ„é€ å‡½æ•°å±æ€§æ–¹æ³•</li><li>ä¸åŸå‹é“¾ç»§æ‰¿ä¸€æ ·ï¼Œå­˜åœ¨å¼•ç”¨ç±»å‹é—®é¢˜</li></ul><h2 id="åŸå‹å¼ç»§æ‰¿">åŸå‹å¼ç»§æ‰¿</h2><p>è¿™ç§ç»§æ‰¿æ–¹å¼æ™®éç”¨äºåŸºäºå½“å‰å·²æœ‰å¯¹è±¡åˆ›å»ºæ–°å¯¹è±¡ã€‚</p><p>åœ¨ ES5 ä¹‹å‰å®ç°æ–¹æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">createAnother</span>(<span class="params">o</span>) &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">F</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">  F.<span class="property"><span class="keyword">prototype</span></span> = o;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title function_">F</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> o1 = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;çˆ¶å¯¹è±¡&#x27;</span>,</span><br><span class="line">  <span class="attr">say</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> o2 = <span class="title function_">createAnother</span>(o1);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(o2.<span class="property">name</span>); <span class="comment">// &quot;çˆ¶å¯¹è±¡&quot;</span></span><br></pre></td></tr></table></figure><p>ES5 æ–°å¢äº† <code>Object.create()</code> æ–¹æ³•è§„èŒƒåŒ–äº†åŸå‹å¼ç»§æ‰¿ã€‚è°ƒç”¨æ–¹æ³•ä¸ºï¼š<code>Object.create(o)</code>ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”¨æ³•ä¸€ï¼šåˆ›å»ºä¸€ä¸ªçº¯æ´çš„å¯¹è±¡ï¼šå¯¹è±¡ä»€ä¹ˆå±æ€§éƒ½æ²¡æœ‰</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨æ³•äºŒï¼šåˆ›å»ºä¸€ä¸ªå­å¯¹è±¡ï¼Œå®ƒç»§æ‰¿è‡ªæŸä¸ªçˆ¶å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> o1 = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;çˆ¶å¯¹è±¡&#x27;</span>,</span><br><span class="line">  <span class="attr">say</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> o2 = <span class="title class_">Object</span>.<span class="title function_">create</span>(o1);</span><br></pre></td></tr></table></figure><h2 id="å¯„ç”Ÿå¼ç»§æ‰¿">å¯„ç”Ÿå¼ç»§æ‰¿</h2><p>å¯„ç”Ÿå¼ç»§æ‰¿æ˜¯åŸå‹å¼ç»§æ‰¿çš„åŠ å¼ºç‰ˆï¼Œå®ƒç»“åˆåŸå‹å¼ç»§æ‰¿å’Œå·¥å‚æ¨¡å¼ï¼Œåˆ›å»ºä¸€ä¸ªä»…ç”¨äºå°è£…ç»§æ‰¿è¿‡ç¨‹çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°åœ¨å†…éƒ¨ä»¥æŸç§æ–¹å¼æ¥å¢å¼ºå¯¹è±¡ï¼Œæœ€åè¿”å›å¯¹è±¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">createAnother</span>(<span class="params">origin</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> clone = <span class="title class_">Object</span>.<span class="title function_">create</span>(origin); <span class="comment">// é€šè¿‡è°ƒç”¨å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡</span></span><br><span class="line">  clone.<span class="property">sayHi</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123; <span class="comment">// ä»¥æŸç§æ–¹å¼æ¥å¢å¼ºè¿™ä¸ªå¯¹è±¡</span></span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;Hi&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> clone; <span class="comment">// è¿”å›è¿™ä¸ªå¯¹è±¡</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> o1 = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;çˆ¶å¯¹è±¡&quot;</span>,</span><br><span class="line">  <span class="attr">hobbies</span>: [<span class="string">&quot;sing&quot;</span>, <span class="string">&quot;dance&quot;</span>, <span class="string">&quot;rap&quot;</span>]</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> o2 = <span class="title function_">createAnother</span>(o1);</span><br><span class="line">o2.<span class="title function_">sayHi</span>();</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼ŒcreateAnother å‡½æ•°æ¥æ”¶äº†ä¸€ä¸ªå‚æ•°ï¼Œä¹Ÿå°±æ˜¯å°†è¦è¢«ç»§æ‰¿çš„å¯¹è±¡ã€‚</p><p>o2 æ˜¯åŸºäº o1 åˆ›å»ºçš„ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæ–°å¯¹è±¡ä¸ä»…å…·æœ‰ o1 çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œè¿˜æœ‰è‡ªå·±çš„ sayHi() æ–¹æ³•ã€‚</p><p>ç®€å•è€Œè¨€ï¼Œå¯„ç”Ÿå¼ç»§æ‰¿åœ¨äº§ç”Ÿäº†è¿™ä¸ªç»§æ‰¿çˆ¶ç±»çš„å¯¹è±¡ä¹‹åï¼Œä¸ºè¿™ä¸ªå¯¹è±¡æ·»åŠ äº†ä¸€äº›å¢å¼ºæ–¹æ³•ã€‚</p><h3 id="å¯„ç”Ÿå¼ç»§æ‰¿çš„ä¼˜ç‚¹">å¯„ç”Ÿå¼ç»§æ‰¿çš„ä¼˜ç‚¹</h3><p>æ²¡å•¥ä¼˜ç‚¹</p><h3 id="å¯„ç”Ÿå¼ç»§æ‰¿çš„ç¼ºç‚¹">å¯„ç”Ÿå¼ç»§æ‰¿çš„ç¼ºç‚¹</h3><p>åŸå‹å¼ç»§æ‰¿æœ‰çš„ç¼ºç‚¹å®ƒéƒ½æœ‰ï¼Œåªæ˜¯å¤–é¢è£…ä¸ªå£³ï¼Œå°±æ¼”åŒ–æˆäº†å¦ä¸€ç§ç»§æ‰¿æ¨¡å¼ã€‚</p><h2 id="å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿">å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿</h2><p>é¡¾åæ€ä¹‰ï¼Œå¯„ç”Ÿå¼ + ç»„åˆå¼ã€‚å®ƒæ˜¯å¯„ç”Ÿå¼ç»§æ‰¿çš„åŠ å¼ºç‰ˆã€‚è¿™ä¹Ÿæ˜¯ä¸ºäº†é¿å…ç»„åˆç»§æ‰¿ä¸­æ— å¯é¿å…åœ°è¦è°ƒç”¨ä¸¤æ¬¡çˆ¶ç±»æ„é€ å‡½æ•°çš„æœ€ä½³æ–¹æ¡ˆã€‚</p><p><strong>å¼€å‘äººå‘˜æ™®éè®¤ä¸ºå¯„ç”Ÿç»„åˆå¼ç»§æ‰¿æ˜¯å¼•ç”¨ç±»å‹æœ€ç†æƒ³çš„ç»§æ‰¿èŒƒå¼</strong>ã€‚</p><p>åŸºæœ¬å†™æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">inheritPrototype</span>(<span class="params">SubType, SuperType</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> prototype = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">SuperType</span>.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line">  prototype.<span class="property">constructor</span> = <span class="title class_">SubType</span>;</span><br><span class="line">  <span class="title class_">SubType</span>.<span class="property"><span class="keyword">prototype</span></span> = prototype;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¼å®¹å†™æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">object</span>(<span class="params">o</span>) &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">W</span>(<span class="params"></span>) &#123;</span><br><span class="line">  &#125;</span><br><span class="line">  W.<span class="property"><span class="keyword">prototype</span></span> = o;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> W;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">inheritPrototype</span>(<span class="params">SubType, SuperType</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> prototype;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="title class_">Object</span>.<span class="property">create</span> === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">    prototype = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">SuperType</span>.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    prototype = <span class="title function_">object</span>(<span class="title class_">SuperType</span>.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line">  &#125;         </span><br><span class="line">  prototype.<span class="property">constructor</span> = <span class="title class_">SubType</span>;</span><br><span class="line">  <span class="title class_">SubType</span>.<span class="property"><span class="keyword">prototype</span></span> = prototype;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ¬è´¨æ˜¯å­ç±»çš„åŸå‹ç»§æ‰¿è‡ªçˆ¶ç±»çš„åŸå‹ï¼Œç”³æ˜ä¸€ä¸ªç”¨äºç»§æ‰¿åŸå‹çš„ inheritPrototype æ–¹æ³•ï¼Œé€šè¿‡è¿™ä¸ªæ–¹æ³•æˆ‘ä»¬èƒ½å¤Ÿå°†å­ç±»çš„åŸå‹æŒ‡å‘è¶…ç±»çš„åŸå‹ï¼Œä»è€Œé¿å…è¶…ç±»äºŒæ¬¡å®ä¾‹åŒ–ã€‚</p><p>å®ä¾‹ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">hobbies</span> = [<span class="string">&quot;sing&quot;</span>, <span class="string">&quot;dance&quot;</span>, <span class="string">&quot;rap&quot;</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Parent</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getHobbies</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">hobbies</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="title class_">Parent</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, name);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">age</span> = <span class="number">24</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Child</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">Parent</span>.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line"><span class="title class_">Child</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = <span class="title class_">Child</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•ç»“æœ</span></span><br><span class="line"><span class="keyword">var</span> c1 = <span class="keyword">new</span> <span class="title class_">Child</span>(<span class="string">&#x27;c1&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> c2 = <span class="keyword">new</span> <span class="title class_">Child</span>(<span class="string">&#x27;c2&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c1 <span class="keyword">instanceof</span> <span class="title class_">Child</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c1 <span class="keyword">instanceof</span> <span class="title class_">Parent</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c1.<span class="property">constructor</span>); <span class="comment">// Child</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Child</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> === <span class="title class_">Parent</span>.<span class="property"><span class="keyword">prototype</span></span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Parent</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> === <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">c1.<span class="property">hobbies</span>.<span class="title function_">push</span>(<span class="string">&#x27;coding&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c1.<span class="title function_">getHobbies</span>()); <span class="comment">// [&quot;sing&quot;, &quot;dance&quot;, &quot;rap&quot;, &quot;coding&quot;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c2.<span class="title function_">getHobbies</span>()); <span class="comment">// [&quot;sing&quot;, &quot;dance&quot;, &quot;rap&quot;]</span></span><br></pre></td></tr></table></figure><p>è¿™ä¹Ÿæ˜¯ç›®å‰æœ€å®Œç¾çš„ç»§æ‰¿æ–¹æ¡ˆï¼Œå®ƒä¸ ES6 çš„ class çš„å®ç°æ–¹å¼æœ€ä¸ºæ¥è¿‘ã€‚</p><h3 id="å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿çš„ä¼˜ç‚¹">å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿çš„ä¼˜ç‚¹</h3><p>å ªç§°å®Œç¾</p><h3 id="å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿çš„ç¼ºç‚¹">å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿çš„ç¼ºç‚¹</h3><p>ä»£ç å¤š</p><h2 id="class-ç»§æ‰¿-ES6">class ç»§æ‰¿(ES6)</h2><p>ES6 ä¸­ï¼Œé€šè¿‡ <code>class</code> å…³é”®å­—æ¥å®šä¹‰ç±»ï¼Œå­ç±»å¯ä»¥é€šè¿‡ <code>extends</code> ç»§æ‰¿çˆ¶ç±»ã€‚</p><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span>&#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">hobbies</span> = [<span class="string">&quot;sing&quot;</span>, <span class="string">&quot;dance&quot;</span>, <span class="string">&quot;rap&quot;</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">getHobbies</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">hobbies</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">getCurrent</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Parent</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c1 = <span class="keyword">new</span> <span class="title class_">Child</span>(<span class="string">&#x27;c1&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> c2 = <span class="keyword">new</span> <span class="title class_">Child</span>(<span class="string">&#x27;c2&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c1 <span class="keyword">instanceof</span> <span class="title class_">Child</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c1 <span class="keyword">instanceof</span> <span class="title class_">Parent</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>è¦ç‚¹ï¼š</p><ul><li><code>constructor</code> ä¸ºæ„é€ å‡½æ•°ï¼Œå³ä½¿æœªå®šä¹‰ä¹Ÿä¼šè‡ªåŠ¨åˆ›å»ºã€‚</li><li>åœ¨çˆ¶ç±»æ„é€ å‡½æ•°å†… <code>this</code> å®šä¹‰çš„éƒ½æ˜¯å®ä¾‹å±æ€§å’Œæ–¹æ³•ï¼Œå…¶ä»–æ–¹æ³•åŒ…æ‹¬ <code>constructor</code>ã€<code>getHobbies</code> éƒ½æ˜¯åŸå‹æ–¹æ³•ã€‚</li><li><code>static</code> å…³é”®å­—å®šä¹‰çš„é™æ€æ–¹æ³•éƒ½å¿…é¡»é€šè¿‡ç±»åè°ƒç”¨ï¼Œå…¶ <code>this</code> æŒ‡å‘è°ƒç”¨è€…è€Œå¹¶éå®ä¾‹ã€‚</li><li>é€šè¿‡ <code>extends</code> å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„æ‰€æœ‰åŸå‹å±æ€§åŠ <code>static</code> ç±»æ–¹æ³•ï¼Œå­ç±» <code>constructor</code> è°ƒç”¨ <code>super</code> çˆ¶ç±»æ„é€ å‡½æ•°å®ç°å®ä¾‹å±æ€§å’Œæ–¹æ³•çš„ç»§æ‰¿ã€‚</li></ul><p>å¯¹æ¯”ï¼š</p><ul><li>ES5 çš„ç»§æ‰¿ï¼Œå®è´¨æ˜¯å…ˆåˆ›é€ å­ç±»çš„å®ä¾‹å¯¹è±¡ <code>this</code>ï¼Œç„¶åå†å°†çˆ¶ç±»çš„æ–¹æ³•æ·»åŠ åˆ° <code>this</code> ä¸Šé¢ï¼ˆ<code>Parent.apply(this)</code>ï¼‰ã€‚</li><li>ES6 çš„ç»§æ‰¿æœºåˆ¶å®Œå…¨ä¸åŒï¼Œå®è´¨æ˜¯å…ˆå°†çˆ¶ç±»å®ä¾‹å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼ŒåŠ åˆ° <code>this</code> ä¸Šé¢ï¼ˆæ‰€ä»¥å¿…é¡»å…ˆè°ƒç”¨ <code>super</code> æ–¹æ³•ï¼‰ï¼Œç„¶åå†ç”¨å­ç±»çš„æ„é€ å‡½æ•°ä¿®æ”¹ <code>this</code>ã€‚</li></ul><h2 id="æ€»ç»“-v3">æ€»ç»“</h2><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/0df74700-731c-11eb-ab90-d9ae814b240d.png" alt="img"></p><p>é€šè¿‡<code>Object.create</code> æ¥åˆ’åˆ†ä¸åŒçš„ç»§æ‰¿æ–¹å¼ï¼Œæœ€åçš„å¯„ç”Ÿå¼ç»„åˆç»§æ‰¿æ–¹å¼æ˜¯é€šè¿‡ç»„åˆç»§æ‰¿æ”¹é€ ä¹‹åçš„æœ€ä¼˜ç»§æ‰¿æ–¹å¼ï¼Œè€Œ <code>extends</code> çš„è¯­æ³•ç³–å’Œå¯„ç”Ÿç»„åˆç»§æ‰¿çš„æ–¹å¼åŸºæœ¬ç±»ä¼¼ã€‚</p><blockquote><p>å‚è€ƒæ–‡ç« ï¼š</p><ul><li><a href="https://cloud.tencent.com/developer/article/1851143">https://cloud.tencent.com/developer/article/1851143</a></li></ul></blockquote><h1>ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾</h1><h2 id="ä½œç”¨åŸŸ">ä½œç”¨åŸŸ</h2><p><strong>æ¦‚å¿µ</strong>ï¼šä½œç”¨åŸŸæ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶ä»£ç ä¸­çš„æŸäº›ç‰¹å®šéƒ¨åˆ†ä¸­å˜é‡ã€å‡½æ•°å’Œå¯¹è±¡çš„<strong>å¯è®¿é—®æ€§</strong>ã€‚</p><ul><li><p>ä»ä½¿ç”¨æ–¹é¢æ¥<strong>è§£é‡Š</strong>ï¼Œä½œç”¨åŸŸå°±æ˜¯å˜é‡çš„ä½¿ç”¨èŒƒå›´ï¼Œä¹Ÿå°±æ˜¯åœ¨ä»£ç çš„å“ªäº›éƒ¨åˆ†å¯ä»¥è®¿é—®è¿™ä¸ªå˜é‡ï¼Œå“ªäº›éƒ¨åˆ†æ— æ³•è®¿é—®åˆ°è¿™ä¸ªå˜é‡ï¼Œæ¢å¥è¯è¯´å°±æ˜¯è¿™ä¸ªå˜é‡åœ¨ç¨‹åºçš„å“ªäº›åŒºåŸŸå¯è§ã€‚</p></li><li><p>ä»å­˜å‚¨ä¸Šæ¥<strong>è§£é‡Š</strong>çš„è¯ï¼Œä½œç”¨åŸŸ<strong>æœ¬è´¨</strong>ä¸Šæ˜¯ä¸€ä¸ª<strong>å¯¹è±¡ï¼Œ</strong> ä½œç”¨åŸŸä¸­çš„å˜é‡å¯ä»¥ç†è§£ä¸ºæ˜¯è¯¥å¯¹è±¡çš„æˆå‘˜ã€‚</p></li></ul><p><strong>æ€»ç»“</strong>ï¼šä½œç”¨åŸŸå°±æ˜¯ä»£ç çš„æ‰§è¡Œç¯å¢ƒï¼Œå…¨å±€ä½œç”¨åŸŸå°±æ˜¯å…¨å±€æ‰§è¡Œç¯å¢ƒï¼Œå±€éƒ¨ä½œç”¨åŸŸå°±æ˜¯å‡½æ•°çš„æ‰§è¡Œç¯å¢ƒï¼Œå®ƒä»¬éƒ½æ˜¯æ ˆå†…å­˜</p><h3 id="ä½œç”¨åŸŸåˆ†ç±»"><strong>ä½œç”¨åŸŸåˆ†ç±»</strong></h3><p>ä½œç”¨åŸŸåˆåˆ†ä¸º<strong>å…¨å±€ä½œç”¨åŸŸ</strong>å’Œ<strong>å±€éƒ¨ä½œç”¨åŸŸ</strong>ã€‚åœ¨ES6ä¹‹å‰ï¼Œå±€éƒ¨ä½œç”¨åŸŸåªåŒ…å«äº†å‡½æ•°ä½œç”¨åŸŸï¼ŒES6çš„åˆ°æ¥ä¸ºæˆ‘ä»¬æä¾›äº† <strong>å—çº§ä½œç”¨åŸŸ</strong>ï¼ˆç”±ä¸€å¯¹èŠ±æ‹¬å·åŒ…è£¹ï¼‰ï¼Œå¯ä»¥é€šè¿‡æ–°å¢å‘½ä»¤letå’Œconstæ¥å®ç°ï¼›è€Œå¯¹äºå…¨å±€ä½œç”¨åŸŸè¿™é‡Œæœ‰ä¸€ä¸ªå°ç»†èŠ‚éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼š</p><blockquote><ul><li>åœ¨ Web æµè§ˆå™¨ä¸­ï¼Œå…¨å±€ä½œç”¨åŸŸè¢«è®¤ä¸ºæ˜¯ <strong><code>window</code></strong> å¯¹è±¡ï¼Œå› æ­¤æ‰€æœ‰å…¨å±€å˜é‡å’Œå‡½æ•°éƒ½æ˜¯ä½œä¸º <strong><code>window</code></strong> å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•åˆ›å»ºçš„ã€‚</li><li>åœ¨ Nodeç¯å¢ƒä¸­ï¼Œå…¨å±€ä½œç”¨åŸŸæ˜¯ <strong><code>global</code></strong> å¯¹è±¡ã€‚</li></ul></blockquote><p>å…¨å±€ä½œç”¨åŸŸå¾ˆå¥½ç†è§£ï¼Œç°åœ¨æˆ‘ä»¬å†æ¥è§£é‡Šä¸€ä¸‹å±€éƒ¨ä½œç”¨åŸŸå§ï¼Œå…ˆæ¥çœ‹çœ‹<strong>å‡½æ•°ä½œç”¨åŸŸ</strong>ï¼Œæ‰€è°“å‡½æ•°ä½œç”¨åŸŸï¼Œé¡¾åæ€ä¹‰å°±æ˜¯ç”±å‡½æ•°å®šä¹‰äº§ç”Ÿå‡ºæ¥çš„ä½œç”¨åŸŸï¼Œä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fun1</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> variable = <span class="string">&#x27;abc&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fun2</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> variable = <span class="string">&#x27;cba&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fun1</span>();</span><br><span class="line"><span class="title function_">fun2</span>();</span><br><span class="line"><span class="comment">//è¿™é‡Œæœ‰ä¸¤ä¸ªå‡½æ•°ï¼Œä»–ä»¬åˆ†åˆ«éƒ½æœ‰ä¸€ä¸ªåŒåå˜é‡variableï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œç¨‹åºä¸ä¼šæŠ¥é”™ï¼Œ</span></span><br><span class="line"><span class="comment">//è¿™æ˜¯å› ä¸ºè¿™ä¸¤ä¸ªåŒåå˜é‡ä½äºä¸åŒçš„å‡½æ•°å†…ï¼Œä¹Ÿå°±æ˜¯ä½äºä¸åŒçš„ä½œç”¨åŸŸä¸­ï¼Œæ‰€ä»¥ä»–ä»¬ä¸ä¼šäº§ç”Ÿå†²çªã€‚</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å†æ¥çœ‹çœ‹<strong>å—çº§ä½œç”¨åŸŸ</strong>ï¼ŒES6 ä¹‹å‰ JavaScript æ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼Œåªæœ‰å…¨å±€ä½œç”¨åŸŸå’Œå‡½æ•°ï¼ˆå±€éƒ¨ï¼‰ä½œç”¨åŸŸã€‚å—è¯­å¥ï¼ˆ <strong><code>&#123;&#125;</code></strong> ä¸­é—´çš„è¯­å¥ï¼‰ï¼Œå¦‚ <strong><code>if</code></strong> å’Œ <strong><code>switch</code></strong> æ¡ä»¶è¯­å¥ï¼Œ <strong><code>for</code></strong> å’Œ <strong><code>while</code></strong> å¾ªç¯è¯­å¥ï¼Œä¸åŒäºå‡½æ•°ï¼Œå®ƒä»¬<strong>ä¸ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸ</strong>ï¼›ä½†æ˜¯ES6åŠä¹‹åçš„ç‰ˆæœ¬ï¼Œå—è¯­å¥ä¹Ÿ<strong>ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸï¼Œ</strong> å—çº§ä½œç”¨åŸŸå¯é€šè¿‡æ–°å¢å‘½ä»¤letå’Œconstå£°æ˜ï¼Œæ‰€å£°æ˜çš„å˜é‡åœ¨<strong>æŒ‡å®šå—</strong>çš„<strong>ä½œç”¨åŸŸå¤–æ— æ³•è¢«è®¿é—®</strong>ã€‚å—çº§ä½œç”¨åŸŸåœ¨å¦‚ä¸‹æƒ…å†µè¢«åˆ›å»ºï¼š</p><blockquote><ol><li>åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨</li><li>åœ¨ä¸€ä¸ªä»£ç å—ï¼ˆç”±ä¸€å¯¹èŠ±æ‹¬å·åŒ…è£¹ï¼‰å†…éƒ¨</li></ol></blockquote><p>let å£°æ˜çš„è¯­æ³•ä¸ var çš„è¯­æ³•ä¸€è‡´ã€‚åŸºæœ¬ä¸Šå¯ä»¥ç”¨ let æ¥ä»£æ›¿ var è¿›è¡Œå˜é‡å£°æ˜ï¼Œä½†ä¼šå°†å˜é‡çš„ä½œç”¨åŸŸé™åˆ¶åœ¨å½“å‰ä»£ç å—ä¸­ <strong>ï¼ˆæ³¨æ„ï¼šå—çº§ä½œç”¨åŸŸå¹¶ä¸å½±å“varå£°æ˜çš„å˜é‡ï¼‰ã€‚</strong> ä½†æ˜¯ä½¿ç”¨letæ—¶æœ‰å‡ ç‚¹éœ€è¦<strong>æ³¨æ„</strong>ï¼š</p><blockquote><ul><li><strong>å£°æ˜å˜é‡ä¸ä¼šæå‡åˆ°ä»£ç å—é¡¶éƒ¨ï¼Œå³ä¸å­˜åœ¨å˜é‡æå‡</strong></li><li><strong>ç¦æ­¢é‡å¤å£°æ˜åŒä¸€å˜é‡</strong></li><li><strong>forå¾ªç¯è¯­å¥ä¸­ï¼ˆï¼‰å†…éƒ¨ï¼Œå³åœ†æ‹¬å·ä¹‹å†…ä¼šå»ºç«‹ä¸€ä¸ªéšè—çš„ä½œç”¨åŸŸï¼Œè¯¥ä½œç”¨åŸŸä¸å±äºforåè¾¹çš„{}ä¸­ï¼Œå¹¶ä¸”åªæœ‰foråè¾¹çš„{}äº§ç”Ÿçš„å—ä½œç”¨åŸŸèƒ½å¤Ÿè®¿é—®è¿™ä¸ªéšè—çš„ä½œç”¨åŸŸï¼Œè¿™å°±ä½¿å¾ªç¯ä¸­</strong> <strong>ç»‘å®šå—ä½œç”¨åŸŸæœ‰äº†å¦™ç”¨</strong></li></ul></blockquote><p>è¿™é‡Œåˆ†åˆ«æ¼”ç¤ºä¸€ä¸‹ES5å’ŒES6ç‰ˆæœ¬çš„ä»£ç ï¼ŒES5ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(i) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><p>ES6ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(i);<span class="comment">//0,1,2,3,4,5,6,7,8,9</span></span><br><span class="line"> &#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(i);<span class="comment">// Uncaught ReferenceError: i is not defined</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">     <span class="keyword">let</span> i = <span class="number">9</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(i);<span class="comment">// Uncaught ReferenceError: i is not defined</span></span><br></pre></td></tr></table></figure><h2 id="ä½œç”¨åŸŸé“¾-scope-chain">ä½œç”¨åŸŸé“¾(scope chain)</h2><p><strong>æ¦‚å¿µ</strong>ï¼šå¤šä¸ªä½œç”¨åŸŸå¯¹è±¡è¿ç»­å¼•ç”¨å½¢æˆçš„é“¾å¼ç»“æ„ã€‚</p><p><strong>ä½¿ç”¨</strong>æ–¹é¢<strong>è§£é‡Š</strong>ï¼šå½“åœ¨Javascriptä¸­ä½¿ç”¨ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œé¦–å…ˆJavascriptå¼•æ“ä¼šå°è¯•åœ¨å½“å‰ä½œç”¨åŸŸä¸‹å»å¯»æ‰¾è¯¥å˜é‡ï¼Œå¦‚æœæ²¡æ‰¾åˆ°ï¼Œå†åˆ°å®ƒçš„ä¸Šå±‚ä½œç”¨åŸŸå¯»æ‰¾ï¼Œä»¥æ­¤ç±»æ¨ç›´åˆ°æ‰¾åˆ°è¯¥å˜é‡æˆ–æ˜¯å·²ç»åˆ°äº†å…¨å±€ä½œç”¨åŸŸï¼Œå¦‚æœåœ¨å…¨å±€ä½œç”¨åŸŸé‡Œä»ç„¶æ‰¾ä¸åˆ°è¯¥å˜é‡ï¼Œå®ƒå°±ä¼šç›´æ¥æŠ¥é”™ã€‚</p><p><strong>å­˜å‚¨</strong>æ–¹é¢<strong>è§£é‡Š</strong>ï¼šä½œç”¨åŸŸé“¾åœ¨JSå†…éƒ¨ä¸­æ˜¯ä»¥æ•°ç»„çš„å½¢å¼å­˜å‚¨çš„ï¼Œæ•°ç»„çš„ç¬¬ä¸€ä¸ªç´¢å¼•å¯¹åº”çš„æ˜¯å‡½æ•°æœ¬èº«çš„æ‰§è¡ŒæœŸä¸Šä¸‹æ–‡ï¼Œä¹Ÿå°±æ˜¯å½“å‰æ‰§è¡Œçš„ä»£ç æ‰€åœ¨ç¯å¢ƒçš„å˜é‡å¯¹è±¡ï¼Œä¸‹ä¸€ä¸ªç´¢å¼•å¯¹åº”çš„ç©ºé—´å­˜å‚¨çš„æ˜¯è¯¥å¯¹è±¡çš„å¤–éƒ¨æ‰§è¡Œç¯å¢ƒï¼Œä¾æ¬¡ç±»æ¨ï¼Œä¸€ç›´åˆ°å…¨å±€æ‰§è¡Œç¯å¢ƒ</p><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">100</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fun</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> b = <span class="number">200</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">//100</span></span><br><span class="line"><span class="comment">// funå‡½æ•°å±€éƒ¨ä½œç”¨åŸŸä¸­æ²¡æœ‰å˜é‡aï¼Œäºæ˜¯ä»å®ƒçš„ä¸Šä¸€çº§ï¼Œä¹Ÿå°±æ˜¯å…¨å±€ä½œç”¨åŸŸä¸­æ‰¾ï¼Œ</span></span><br><span class="line"><span class="comment">//åœ¨å…¨å±€ä¸­aè¢«èµ‹å€¼ä¸º100ï¼Œäºæ˜¯è¾“å‡º100</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(b)<span class="comment">//200 funå‡½æ•°å±€éƒ¨ä½œç”¨åŸŸä¸­æœ‰å˜é‡bï¼Œå¹¶ä¸”å®ƒè¢«èµ‹å€¼ä¸ºäº†200ï¼Œè¾“å‡º200</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fun</span>()</span><br></pre></td></tr></table></figure><p>å†æ¥çœ‹ä¸ªæ —å­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fun</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">show</span>(<span class="params">f</span>) &#123;</span><br><span class="line">   <span class="keyword">var</span> a = <span class="number">20</span></span><br><span class="line">   (<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">f</span>()   <span class="comment">//10ï¼Œè€Œä¸æ˜¯20; å‡½æ•°çš„ä½œç”¨åŸŸæ˜¯åœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™å°±è¢«å†³å®šäº†ï¼Œä¸å‡½æ•°åœ¨å“ªé‡Œè¢«è°ƒç”¨æ— å…³</span></span><br><span class="line">   &#125;)()</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">show</span>(fun)</span><br></pre></td></tr></table></figure><p>ç”±äºå˜é‡çš„æŸ¥æ‰¾æ˜¯æ²¿ç€ä½œç”¨åŸŸé“¾æ¥å®ç°çš„ï¼Œæ‰€ä»¥ä¹Ÿç§°ä½œç”¨åŸŸé“¾ä¸º<strong>å˜é‡æŸ¥æ‰¾çš„æœºåˆ¶</strong>ã€‚æ˜¯ä¸æ˜¯å¾ˆå¥½ç†è§£ï¼Œè¿™é‡Œå†æ¥è¡¥å……ä¸€ç‚¹ä½œç”¨åŸŸçš„ä½œç”¨</p><blockquote><ol><li>ä½œç”¨åŸŸæœ€ä¸ºé‡è¦çš„ä¸€ç‚¹æ˜¯å®‰å…¨ã€‚<strong>å˜é‡åªèƒ½åœ¨ç‰¹å®šçš„åŒºåŸŸå†…æ‰èƒ½è¢«è®¿é—®ï¼Œå¤–éƒ¨ç¯å¢ƒä¸èƒ½è®¿é—®å†…éƒ¨ç¯å¢ƒçš„ä»»ä½•å˜é‡å’Œå‡½æ•°ï¼Œå³å¯ä»¥å‘ä¸Šæœç´¢ï¼Œä½†ä¸å¯ä»¥å‘ä¸‹æœç´¢ï¼Œ</strong> æœ‰äº†ä½œç”¨åŸŸæˆ‘ä»¬å°±å¯ä»¥é¿å…åœ¨ç¨‹åºå…¶å®ƒä½ç½®æ„å¤–å¯¹æŸä¸ªå˜é‡åšå‡ºä¿®æ”¹å¯¼è‡´ç¨‹åºå‘ç”Ÿäº‹æ•…ã€‚</li><li>ä½œç”¨åŸŸèƒ½å¤Ÿå‡è½»å‘½åçš„å‹åŠ›ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä¸åŒçš„ä½œç”¨åŸŸå†…å®šä¹‰ç›¸åŒçš„å˜é‡åï¼Œå¹¶ä¸”è¿™äº›å˜é‡åä¸ä¼šäº§ç”Ÿå†²çªã€‚</li></ol></blockquote><blockquote><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://juejin.cn/post/7096818495450513445">https://juejin.cn/post/7096818495450513445</a></p></blockquote><h1>é—­åŒ…</h1><p>å®šä¹‰ï¼š<strong>å‡½æ•°åˆ›å»ºå’Œå‡½æ•°æ‰§è¡Œä¸åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸä¸‹å°±ä¼šå½¢æˆé—­åŒ…ã€‚</strong>ï¼ˆæ¥è‡ªã€Šä½ ä¸çŸ¥é“çš„javaScripã€‹ï¼‰</p><h2 id="å˜é‡çš„ä½œç”¨åŸŸ"><strong>å˜é‡çš„ä½œç”¨åŸŸ</strong></h2><p>è¦ç†è§£é—­åŒ…ï¼Œé¦–å…ˆå¿…é¡»ç†è§£Javascriptç‰¹æ®Šçš„å˜é‡ä½œç”¨åŸŸã€‚</p><p>å˜é‡çš„ä½œç”¨åŸŸæ— éå°±æ˜¯ä¸¤ç§ï¼š<strong>å…¨å±€å˜é‡</strong>å’Œ<strong>å±€éƒ¨å˜é‡</strong>ã€‚</p><p>Javascriptè¯­è¨€çš„ç‰¹æ®Šä¹‹å¤„ï¼Œå°±åœ¨äºå‡½æ•°å†…éƒ¨å¯ä»¥ç›´æ¥è¯»å–å…¨å±€å˜é‡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> n=<span class="number">999</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"></span>)&#123;</span><br><span class="line">ã€€<span class="title function_">alert</span>(n);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">f1</span>(); <span class="comment">// 999</span></span><br></pre></td></tr></table></figure><p>å¦ä¸€æ–¹é¢ï¼Œåœ¨å‡½æ•°å¤–éƒ¨è‡ªç„¶æ— æ³•è¯»å–å‡½æ•°å†…çš„å±€éƒ¨å˜é‡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"></span>)&#123;</span><br><span class="line">ã€€ã€€<span class="keyword">var</span> n=<span class="number">999</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">alert</span>(n); <span class="comment">// error</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œæœ‰ä¸€ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„ï¼Œå‡½æ•°å†…éƒ¨å£°æ˜å˜é‡çš„æ—¶å€™ï¼Œä¸€å®šè¦ä½¿ç”¨varå‘½ä»¤ã€‚å¦‚æœä¸ç”¨çš„è¯ï¼Œä½ å®é™…ä¸Šå£°æ˜äº†ä¸€ä¸ªå…¨å±€å˜é‡ï¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"></span>)&#123;</span><br><span class="line">ã€€n=<span class="number">999</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">f1</span>();</span><br><span class="line"></span><br><span class="line"><span class="title function_">alert</span>(n); <span class="comment">// 999</span></span><br></pre></td></tr></table></figure><h2 id="å¦‚ä½•ä»å¤–éƒ¨è¯»å–å±€éƒ¨å˜é‡ï¼Ÿ">å¦‚ä½•ä»å¤–éƒ¨è¯»å–å±€éƒ¨å˜é‡ï¼Ÿ</h2><p>åœ¨ä½¿ç”¨JSè¿›è¡Œç¼–ç¨‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™éœ€è¦åœ¨å‡½æ•°å¤–éƒ¨å¾—åˆ°å‡½æ•°å†…çš„å±€éƒ¨å˜é‡ï¼Œå¯æ˜¯æˆ‘ä»¬å‰é¢å·²ç»è¯´äº†ï¼Œæ­£å¸¸æƒ…å†µä¸‹è¿™æ˜¯ä¸å¯èƒ½çš„ã€‚</p><p>å˜¿å˜¿ï¼Œæ—¢ç„¶éƒ½è¯´äº†æ˜¯æ­£å¸¸æƒ…å†µï¼Œé‚£è‚¯å®šæœ‰â€œä¸æ­£å¸¸æƒ…å†µâ€å•¦ï¼é‚£å°±æ˜¯åœ¨å‡½æ•°çš„å†…éƒ¨ï¼Œå†å®šä¹‰ä¸€ä¸ªå‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">var</span> n=<span class="number">999</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f2</span>(<span class="params"></span>)&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€<span class="title function_">alert</span>(n); <span class="comment">// 999</span></span><br><span class="line">ã€€ã€€ã€€&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå‡½æ•°fun2å°±è¢«åŒ…æ‹¬åœ¨å‡½æ•°fun1å†…éƒ¨ï¼Œè¿™æ—¶fun1å†…éƒ¨çš„æ‰€æœ‰å±€éƒ¨å˜é‡ï¼Œå¯¹fun2éƒ½æ˜¯å¯è§çš„ã€‚ä½†æ˜¯åè¿‡æ¥å°±ä¸è¡Œï¼Œfun2å†…éƒ¨çš„å±€éƒ¨å˜é‡ï¼Œå¯¹fun1éƒ½æ˜¯ä¸å¯è§çš„ã€‚è¿™å°±æ˜¯Javascriptè¯­è¨€æ‰€ç‰¹æœ‰çš„<strong>é“¾å¼ä½œç”¨åŸŸ</strong>ç»“æ„ï¼ˆchain scopeï¼‰ï¼Œå­å¯¹è±¡ä¼šä¸€çº§ä¸€çº§åœ°å‘ä¸Šå¯»æ‰¾æ‰€æœ‰çˆ¶å¯¹è±¡çš„å˜é‡ã€‚<strong>æ€»ç»“</strong>ï¼šçˆ¶å¯¹è±¡çš„æ‰€æœ‰å˜é‡ï¼Œå¯¹å­å¯¹è±¡éƒ½æ˜¯å¯è§çš„ï¼Œåä¹‹åˆ™ä¸æˆç«‹ã€‚</p><p>è¿™æ ·æˆ‘ä»¬å°±èƒ½å¤Ÿè®¿é—®åˆ°å‡½æ•°fun1å†…éƒ¨çš„å˜é‡äº†ï¼Œå¯æ˜¯é—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬æ— æ³•ä»å¤–éƒ¨è°ƒç”¨å‡½æ•°fun2ï¼Œé‚£æˆ‘ä»¬åº”è¯¥æ€æ ·æ‰èƒ½å¤Ÿåœ¨å¤–éƒ¨è®¿é—®fun2å‘¢ï¼Œæˆ‘ä»¬åªéœ€è¦å°†<strong>fun2</strong>ä½œä¸º<strong>fun1</strong>çš„<strong>è¿”å›å€¼</strong>è¿”å›ï¼Œè¿™æ ·æˆ‘ä»¬ä¸å°±èƒ½åœ¨fun1å¤–éƒ¨è®¿é—®åˆ°fun1å†…éƒ¨çš„å˜é‡äº†å—ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"></span>)&#123;</span><br><span class="line">ã€€ã€€<span class="keyword">var</span> n=<span class="number">999</span>;</span><br><span class="line">ã€€ã€€<span class="keyword">function</span> <span class="title function_">f2</span>(<span class="params"></span>)&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€<span class="title function_">alert</span>(n);</span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line"><span class="keyword">return</span> f2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result=<span class="title function_">f1</span>();</span><br><span class="line"><span class="title function_">result</span>(); <span class="comment">// 999</span></span><br></pre></td></tr></table></figure><h2 id="é—­åŒ…çš„æ¦‚å¿µ">é—­åŒ…çš„æ¦‚å¿µ</h2><p>ä¸Šä¸€èŠ‚ä»£ç ä¸­çš„f2å‡½æ•°ï¼Œå°±æ˜¯<strong>é—­åŒ…</strong>ã€‚</p><p>å…³äºé—­åŒ…çš„æ¦‚å¿µï¼Œåœ¨å‰é¢æˆ‘ä»¬å·²ç»è¯´äº†å®˜æ–¹ç»™å‡ºçš„å®šä¹‰ï¼Œå®˜æ–¹ç»™çš„å®šä¹‰è™½ç„¶æ¯”è¾ƒå‡†ç¡®ä¸€ç‚¹ï¼Œä½†æ˜¯å¯¹äºåˆå­¦è€…æ¥è¯´æ™¦æ¶©éš¾æ‡‚ï¼Œè¿™é‡Œæ¥è¯´è¯´æˆ‘å¯¹é—­åŒ…çš„ç†è§£ï¼Œ<strong>æˆ‘çš„ç†è§£</strong>æ˜¯ï¼Œé—­åŒ…å°±æ˜¯<strong>èƒ½å¤Ÿè¯»å–å…¶ä»–å‡½æ•°å†…éƒ¨å˜é‡çš„å‡½æ•°</strong>ã€‚åœ¨æœ¬è´¨ä¸Šï¼Œé—­åŒ…å°±æ˜¯å°†å‡½æ•°å†…éƒ¨å’Œå‡½æ•°å¤–éƒ¨è¿æ¥èµ·æ¥çš„ä¸€åº§<strong>æ¡¥æ¢</strong>ã€‚</p><p>å‰é¢æˆ‘ä»¬è™½ç„¶ä¹Ÿè¯´äº†é—­åŒ…ä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä½†æ˜¯ä¸ºäº†æ–¹ä¾¿ç†è§£å’Œå­¦ä¹ æˆ‘ä»¬é€šå¸¸å¯ä»¥å°†é—­åŒ…ç§°ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿè¦æ—¶åˆ»åœ¨å¿ƒé‡Œè®°ä½é—­åŒ…ä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè€Œæ˜¯<strong>å‡½æ•°å’Œå£°æ˜è¯¥å‡½æ•°çš„è¯æ³•ç¯å¢ƒçš„ç»„åˆï¼Œè¿™ä¸ªç¯å¢ƒåŒ…å«äº†è¿™ä¸ªé—­åŒ…åˆ›å»ºæ—¶æ‰€èƒ½è®¿é—®çš„æ‰€æœ‰å±€éƒ¨å˜é‡</strong>ã€‚è®°ä½ï¼Œå®ƒæ˜¯ä¸€ä¸ªç»„åˆï¼ç»„åˆï¼</p><h2 id="é—­åŒ…çš„ç”¨é€”">é—­åŒ…çš„ç”¨é€”</h2><p>æƒ³è¦ä½¿ç”¨é—­åŒ…ï¼Œå¿…é¡»çŸ¥é“å®ƒçš„<strong>ç»“æ„</strong>ï¼Œä¹Ÿæ˜¯å®ƒçš„<strong>äº§ç”Ÿæ¡ä»¶</strong>ï¼š</p><blockquote><ol><li>ä¸€ä¸ªå‡½æ•°ï¼Œé‡Œé¢æœ‰ä¸€äº›å˜é‡å’Œå¦ä¸€ä¸ªå‡½æ•°</li><li>å¤–éƒ¨å‡½æ•°é‡Œé¢çš„å‡½æ•°ä½¿ç”¨äº†å¤–éƒ¨å‡½æ•°çš„å˜é‡</li><li>å¤–éƒ¨å‡½æ•°æœ€åæŠŠå®ƒé‡Œé¢çš„é‚£ä¸ªå‡½æ•°ç”¨returnæŠ›å‡ºå»</li></ol></blockquote><p>ä»¥åŠé—­åŒ…çš„<strong>ä½œç”¨</strong>ï¼š</p><blockquote><ul><li>åœ¨å‡½æ•°å¤–éƒ¨å¯ä»¥è¯»å–å‡½æ•°å†…éƒ¨çš„å˜é‡</li><li>è®©è¿™äº›å˜é‡çš„å€¼å§‹ç»ˆä¿æŒåœ¨å†…å­˜ä¸­</li></ul></blockquote><p>æ€ä¹ˆæ¥ç†è§£è¿™å¥è¯å‘¢ï¼Ÿè¯·çœ‹ä¸‹é¢çš„ä»£ç ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> n = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fun1</span>(<span class="params"></span>) &#123;</span><br><span class="line">   test = <span class="number">10</span>;ã€€ã€€ã€€ã€€</span><br><span class="line">   <span class="keyword">var</span> n = <span class="number">999</span>;ã€€ã€€ã€€ã€€</span><br><span class="line">   nAdd = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">         n += <span class="number">1</span>;</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span><br><span class="line">   &#125;ã€€ã€€ã€€ã€€</span><br><span class="line">   <span class="keyword">function</span> <span class="title function_">fun2</span>(<span class="params"></span>) &#123;ã€€ã€€ã€€ã€€ã€€ã€€</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(n);ã€€ã€€ã€€ã€€</span><br><span class="line">   &#125;ã€€ã€€ã€€ã€€</span><br><span class="line">   <span class="keyword">return</span> fun2;ã€€ã€€</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> result = <span class="title function_">fun1</span>();</span><br><span class="line"><span class="title function_">result</span>(); <span class="comment">// 999</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(test);<span class="comment">//10</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(n);<span class="comment">//1</span></span><br><span class="line"><span class="title function_">nAdd</span>();</span><br><span class="line"><span class="title function_">result</span>(); <span class="comment">// 1000</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œresultå®é™…ä¸Šå°±æ˜¯é—­åŒ…fun2å‡½æ•°ã€‚å®ƒä¸€å…±è¿è¡Œäº†ä¸¤æ¬¡ï¼Œç¬¬ä¸€æ¬¡çš„å€¼æ˜¯999ï¼Œç¬¬äºŒæ¬¡çš„å€¼æ˜¯1000ã€‚è¿™è¯æ˜äº†å‡½æ•°fun1ä¸­çš„å±€éƒ¨å˜é‡nä¸€ç›´ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå¹¶æ²¡æœ‰åœ¨fun1è°ƒç”¨æ‰§è¡Œå®Œä¹‹åè¢«è‡ªåŠ¨æ¸…é™¤ã€‚</p><p>å‘ç”Ÿè¿™æ ·çš„æƒ…å†µåŸå› å°±åœ¨äºfun1æ˜¯fun2çš„çˆ¶å‡½æ•°ï¼Œè€Œfun2åˆé€šè¿‡fun1çš„returnè¯­å¥è¢«èµ‹ç»™äº†ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œè¿™å¯¼è‡´fun2å§‹ç»ˆåœ¨å†…å­˜ä¸­ï¼Œè€Œfun2çš„å­˜åœ¨ä¾èµ–äºfun1ï¼Œå› æ­¤fun1ä¹Ÿå§‹ç»ˆåœ¨å†…å­˜ä¸­ï¼Œä¸ä¼šåœ¨è°ƒç”¨ç»“æŸåï¼Œè¢«åƒåœ¾å›æ”¶æœºåˆ¶ï¼ˆgarbage collectionï¼‰å›æ”¶ã€‚</p><p>å¦å¤–éœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯&quot;nAdd=function(){n+=1}&quot;è¿™ä¸€è¡Œï¼Œé¦–å…ˆåœ¨nAddå‰é¢æ²¡æœ‰ä½¿ç”¨varå…³é”®å­—ï¼Œå› æ­¤nAddæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œè€Œä¸æ˜¯å±€éƒ¨å˜é‡ã€‚å…¶æ¬¡ï¼ŒnAddçš„å€¼æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œè€Œè¿™ä¸ªåŒ¿åå‡½æ•°æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œæ‰€ä»¥nAddå¯ä»¥åœ¨å‡½æ•°å¤–éƒ¨å¯¹å‡½æ•°å†…éƒ¨çš„å±€éƒ¨å˜é‡è¿›è¡Œæ“ä½œã€‚</p><h2 id="ä½¿ç”¨é—­åŒ…çš„æ³¨æ„ç‚¹">ä½¿ç”¨é—­åŒ…çš„æ³¨æ„ç‚¹</h2><ul><li><p>ç”±äºé—­åŒ…ä¼šä½¿å¾—å‡½æ•°ä¸­çš„å˜é‡éƒ½è¢«ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå†…å­˜æ¶ˆè€—å¾ˆå¤§ï¼Œæ‰€ä»¥ä¸èƒ½æ»¥ç”¨é—­åŒ…ï¼Œå¦åˆ™ä¼šé€ æˆç½‘é¡µçš„æ€§èƒ½é—®é¢˜ï¼Œå¯èƒ½å¯¼è‡´å†…å­˜æ³„éœ²ã€‚è§£å†³æ–¹æ³•æ˜¯ï¼Œåœ¨é€€å‡ºå‡½æ•°ä¹‹å‰ï¼Œå°†ä¸éœ€è¦çš„å±€éƒ¨å˜é‡èµ‹å€¼ä¸ºnullã€‚</p></li><li><p>é—­åŒ…ä¼šåœ¨çˆ¶å‡½æ•°å¤–éƒ¨æ”¹å˜çˆ¶å‡½æ•°å†…éƒ¨å˜é‡çš„å€¼ã€‚å¦‚æœä½ æŠŠçˆ¶å‡½æ•°å½“ä½œå¯¹è±¡ä½¿ç”¨ï¼ŒæŠŠé—­åŒ…å½“ä½œå®ƒçš„å…¬ç”¨æ–¹æ³•ï¼ŒæŠŠå†…éƒ¨å˜é‡å½“ä½œå®ƒçš„ç§æœ‰å±æ€§ï¼Œè¿™æ—¶ä¸€å®šè¦æ³¨æ„ï¼Œä¸è¦éšä¾¿æ”¹å˜çˆ¶å‡½æ•°å†…éƒ¨å˜é‡çš„å€¼ã€‚</p></li><li><p>å½“å®šä¹‰ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå®ƒå®é™…ä¸Šä¿å­˜ä¸€ä¸ªä½œç”¨åŸŸé“¾ã€‚å½“è°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ï¼Œå®ƒåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡æ¥å­˜å‚¨å®ƒçš„å±€éƒ¨å˜é‡ï¼Œå¹¶å°†è¿™ä¸ªå¯¹è±¡æ·»åŠ è‡³ä¿å­˜çš„é‚£ä¸ªä½œç”¨åŸŸé“¾ä¸Šï¼ŒåŒæ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ›´é•¿çš„è¡¨ç¤ºå‡½æ•°è°ƒç”¨ä½œç”¨åŸŸçš„â€œé“¾â€ã€‚å¯¹äºåµŒå¥—å‡½æ•°æ¥è®²ï¼Œäº‹æƒ…å˜å¾—æ›´åŠ æœ‰è¶£ï¼Œæ¯æ¬¡è°ƒç”¨å¤–éƒ¨å‡½æ•°æ—¶ï¼Œå†…éƒ¨å‡½æ•°åˆä¼šé‡æ–°å®šä¹‰ä¸€éã€‚å› ä¸ºæ¯æ¬¡è°ƒç”¨å¤–éƒ¨å‡½æ•°çš„æ—¶å€™ï¼Œä½œç”¨åŸŸé“¾éƒ½æ˜¯ä¸åŒçš„ã€‚å†…éƒ¨å‡½æ•°åœ¨æ¯æ¬¡å®šä¹‰çš„æ—¶å€™éƒ½æœ‰å¾®å¦™çš„å·®åˆ«â€”â€”åœ¨æ¯æ¬¡è°ƒç”¨å¤–éƒ¨å‡½æ•°æ—¶ï¼Œå†…éƒ¨å‡½æ•°çš„ä»£ç éƒ½æ˜¯ç›¸åŒçš„ï¼Œä½†æ˜¯å…³è”è¿™æ®µä»£ç çš„ä½œç”¨åŸŸé“¾ä¸ç›¸åŒï¼Œç”¨é—­åŒ…æ¦‚å¿µæ¥è¯´ï¼Œä¹Ÿå°±æ˜¯äº§ç”Ÿäº†æ–°çš„é—­åŒ…</p></li></ul><blockquote><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://juejin.cn/post/7097141521102667813#heading-1">https://juejin.cn/post/7097141521102667813#heading-1</a></p></blockquote><hr><blockquote><p>æ›´å¤šWebå‰ç«¯é¢è¯•é¢˜ï¼Œè¯·å‰å¾€æ­¤å¤§ä½¬åšå®¢ğŸ˜‹</p><p><a href="https://vue3js.cn/interview/JavaScript/data_type.html#%E5%89%8D%E8%A8%80">https://vue3js.cn/interview/JavaScript/data_type.html#å‰è¨€</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;é˜²æŠ–å’ŒèŠ‚æµ&lt;/h1&gt;
&lt;h2 id=&quot;é˜²æŠ–ï¼ˆdeounceï¼‰&quot;&gt;é˜²æŠ–ï¼ˆdeounceï¼‰&lt;/h2&gt;
&lt;h3 id=&quot;å®šä¹‰&quot;&gt;å®šä¹‰&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;é˜²æŠ–&lt;/strong&gt;æŒ‡åªæœ‰åœ¨nç§’å†…æ²¡æœ‰å†æ¬¡è§¦å‘æŸä¸ªå‡½æ•°æ—¶ï¼Œæ‰ä¼šçœŸæ­£æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼›è‹¥nç§’å†…å†æ¬¡è§¦å‘æ­¤å‡½æ•°ï¼Œåˆ™é‡æ–°</summary>
      
    
    
    
    <category term="é¢è¯•å®å…¸âœ¨" scheme="https://blog.cilicili.xyz/categories/%E9%9D%A2%E8%AF%95%E5%AE%9D%E5%85%B8%E2%9C%A8/"/>
    
    
    <category term="JavaScript" scheme="https://blog.cilicili.xyz/tags/JavaScript/"/>
    
    <category term="å®ç°åŸç†" scheme="https://blog.cilicili.xyz/tags/%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>ã€é¢è¯•ã€‘Webpackå¸¸è§é¢è¯•é¢˜</title>
    <link href="https://blog.cilicili.xyz/posts/a6cd716a.html"/>
    <id>https://blog.cilicili.xyz/posts/a6cd716a.html</id>
    <published>2022-09-09T08:02:18.000Z</published>
    <updated>2022-09-09T09:24:40.627Z</updated>
    
    <content type="html"><![CDATA[<h1>é¢è¯•å®˜çµé­‚ä¸‰è¿é—®</h1><ol><li>ä½ ç”¨è¿‡webpackä¹ˆï¼Œå®ƒçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</li><li>ä½ è¿˜çŸ¥é“äº›æ„å»ºå·¥å…·ï¼Œå„æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ</li><li>ä½ åœ¨é¡¹ç›®ä¸­æœ‰é…ç½®è¿‡ä¹ˆï¼Œåœ¨å“ªäº›åœºæ™¯é…ç½®è¿‡ï¼Ÿ</li></ol><h1>Webpackä»‹ç»</h1><h2 id="ä»€ä¹ˆæ˜¯webpack">ä»€ä¹ˆæ˜¯webpack</h2><p><strong>webpack æ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å™¨</strong>ã€‚webpack çš„ä¸»è¦ç›®æ ‡æ˜¯å°† JavaScript æ–‡ä»¶æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œæ‰“åŒ…åçš„æ–‡ä»¶ç”¨äºåœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ï¼Œä½†å®ƒä¹Ÿèƒ½å¤Ÿèƒœä»»è½¬æ¢(transform)ã€æ‰“åŒ…(bundle)ã€‚</p><h2 id="webpackåŸç†æ˜¯ä»€ä¹ˆ">webpackåŸç†æ˜¯ä»€ä¹ˆ</h2><h3 id="å·¥ä½œåŸç†">å·¥ä½œåŸç†</h3><p>webpackå¯ä»¥çœ‹åšæ˜¯æ¨¡å—æ‰“åŒ…æœºï¼š</p><p>å®ƒåšçš„äº‹æƒ…æ˜¯ï¼Œåˆ†æä½ çš„é¡¹ç›®ç»“æ„ï¼Œæ‰¾åˆ°JavaScriptæ¨¡å—ä»¥åŠå…¶å®ƒçš„ä¸€äº›æµè§ˆå™¨ä¸èƒ½ç›´æ¥è¿è¡Œçš„æ‹“å±•è¯­è¨€ï¼ˆSassï¼ŒTypeScriptç­‰ï¼‰ï¼Œå¹¶å°†å…¶è½¬æ¢å’Œæ‰“åŒ…ä¸ºåˆé€‚çš„æ ¼å¼ä¾›æµè§ˆå™¨ä½¿ç”¨ã€‚</p><p>åœ¨3.0å‡ºç°åï¼ŒWebpackè¿˜è‚©è´Ÿèµ·äº†ä¼˜åŒ–é¡¹ç›®çš„è´£ä»»ã€‚</p><h3 id="æ‰“åŒ…åŸç†">æ‰“åŒ…åŸç†</h3><p>æŠŠä¸€åˆ‡éƒ½è§†ä¸ºæ¨¡å—ï¼šä¸ç®¡æ˜¯ cssã€JSã€Image è¿˜æ˜¯ html éƒ½å¯ä»¥äº’ç›¸å¼•ç”¨ï¼Œé€šè¿‡å®šä¹‰ entry.jsï¼Œå¯¹æ‰€æœ‰ä¾èµ–çš„æ–‡ä»¶è¿›è¡Œè·Ÿè¸ªï¼Œå°†å„ä¸ªæ¨¡å—é€šè¿‡ loader å’Œ plugins å¤„ç†ï¼Œç„¶åæ‰“åŒ…åœ¨ä¸€èµ·ã€‚</p><p><strong>æŒ‰éœ€åŠ è½½</strong>ï¼šæ‰“åŒ…è¿‡ç¨‹ä¸­ Webpack é€šè¿‡ Code Splitting åŠŸèƒ½å°†æ–‡ä»¶åˆ†ä¸ºå¤šä¸ª chunksï¼Œè¿˜å¯ä»¥å°†é‡å¤çš„éƒ¨åˆ†å•ç‹¬æå–å‡ºæ¥ä½œä¸º commonChunkï¼Œä»è€Œå®ç°æŒ‰éœ€åŠ è½½ã€‚æŠŠæ‰€æœ‰ä¾èµ–æ‰“åŒ…æˆä¸€ä¸ª bundle.js æ–‡ä»¶ï¼Œé€šè¿‡ä»£ç åˆ†å‰²æˆå•å…ƒç‰‡æ®µå¹¶æŒ‰éœ€åŠ è½½</p><h3 id="æ ¸å¿ƒæ¦‚å¿µ">æ ¸å¿ƒæ¦‚å¿µ</h3><ul><li>Entryï¼šå…¥å£ï¼Œwebpack æ‰§è¡Œæ„å»ºçš„ç¬¬ä¸€æ­¥å°†ä» Entry å¼€å§‹ï¼Œå¯æŠ½è±¡æˆè¾“å…¥ã€‚å‘Šè¯‰webpackè¦ä½¿ç”¨å“ªä¸ªæ¨¡å—ä½œä¸ºæ„å»ºé¡¹ç›®çš„èµ·ç‚¹ï¼Œé»˜è®¤ä¸º./src/index.js</li><li>output ï¼šå‡ºå£ï¼Œå‘Šè¯‰webpackåœ¨å“ªé‡Œè¾“å‡ºå®ƒæ‰“åŒ…å¥½çš„ä»£ç ä»¥åŠå¦‚ä½•å‘½åï¼Œé»˜è®¤ä¸º./dist</li><li>Moduleï¼šæ¨¡å—ï¼Œåœ¨ webpack é‡Œä¸€åˆ‡çš†æ¨¡å—ï¼Œä¸€ä¸ªæ¨¡å—å¯¹åº”ç€ä¸€ä¸ªæ–‡ä»¶ã€‚webpack ä¼šä»é…ç½®çš„ Entry å¼€å§‹é€’å½’æ‰¾å‡ºæ‰€æœ‰ä¾èµ–çš„æ¨¡å—ã€‚</li><li>Chunkï¼šä»£ç å—ï¼Œä¸€ä¸ª Chunk ç”±å¤šä¸ªæ¨¡å—ç»„åˆè€Œæˆï¼Œç”¨äºä»£ç åˆå¹¶ä¸åˆ†å‰²ã€‚</li><li>Loaderï¼šæ¨¡å—è½¬æ¢å™¨ï¼Œç”¨äºæŠŠæ¨¡å—åŸå†…å®¹æŒ‰ç…§éœ€æ±‚è½¬æ¢æˆæ–°å†…å®¹ã€‚</li><li>Pluginï¼šæ‰©å±•æ’ä»¶ï¼Œåœ¨ webpack æ„å»ºæµç¨‹ä¸­çš„ç‰¹å®šæ—¶æœºä¼šå¹¿æ’­å‡ºå¯¹åº”çš„äº‹ä»¶ï¼Œæ’ä»¶å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶çš„å‘ç”Ÿï¼Œåœ¨ç‰¹å®šæ—¶æœºåšå¯¹åº”çš„äº‹æƒ…ã€‚</li></ul><h3 id="æ„å»ºæµç¨‹">æ„å»ºæµç¨‹</h3><p>Webpack çš„è¿â¾æµç¨‹æ˜¯â¼€ä¸ªä¸²â¾çš„è¿‡ç¨‹ï¼Œä»å¯åŠ¨åˆ°ç»“æŸä¼šä¾æ¬¡æ‰§â¾ä»¥ä¸‹æµç¨‹ï¼š</p><ol><li><strong>åˆå§‹åŒ–å‚æ•°</strong>ï¼šè§£æwebpacké…ç½®å‚æ•°ï¼Œåˆå¹¶shellä¼ å…¥å’Œwebpack.config.jsæ–‡ä»¶é…ç½®çš„å‚æ•°ï¼Œå½¢æˆæœ€åçš„é…ç½®ç»“æœã€‚</li><li><strong>å¼€å§‹ç¼–è¯‘</strong>ï¼šä¸Šä¸€æ­¥å¾—åˆ°çš„å‚æ•°åˆå§‹åŒ–compilerå¯¹è±¡ï¼Œæ³¨å†Œæ‰€æœ‰é…ç½®çš„æ’ä»¶ï¼Œæ’ä»¶ç›‘å¬webpackæ„å»ºç”Ÿå‘½å‘¨æœŸçš„äº‹ä»¶èŠ‚ç‚¹ï¼Œåšå‡ºç›¸åº”çš„ååº”ï¼Œæ‰§è¡Œå¯¹è±¡çš„ run æ–¹æ³•å¼€å§‹æ‰§è¡Œç¼–è¯‘ã€‚</li><li><strong>ç¡®å®šå…¥å£</strong>ï¼šä»é…ç½®çš„entryå…¥å£ï¼Œå¼€å§‹è§£ææ–‡ä»¶æ„å»ºASTè¯­æ³•æ ‘ï¼Œæ‰¾å‡ºä¾èµ–ï¼Œé€’å½’ä¸‹å»ã€‚</li><li><strong>ç¼–è¯‘æ¨¡å—</strong>ï¼šé€’å½’ä¸­æ ¹æ®æ–‡ä»¶ç±»å‹å’Œloaderé…ç½®ï¼Œè°ƒç”¨æ‰€æœ‰é…ç½®çš„loaderå¯¹æ–‡ä»¶è¿›è¡Œè½¬æ¢ï¼Œå†æ‰¾å‡ºè¯¥æ¨¡å—ä¾èµ–çš„æ¨¡å—ï¼Œå†é€’å½’æœ¬æ­¥éª¤ç›´åˆ°æ‰€æœ‰å…¥å£ä¾èµ–çš„æ–‡ä»¶éƒ½ç»è¿‡äº†æœ¬æ­¥éª¤çš„å¤„ç†ã€‚</li><li><strong>å®Œæˆæ¨¡å—ç¼–è¯‘</strong>ï¼šåœ¨ç»è¿‡ç¬¬4æ­¥ä½¿â½¤ Loader ç¿»è¯‘å®Œæ‰€æœ‰æ¨¡å—åï¼Œå¾—åˆ°äº†æ¯ä¸ªæ¨¡å—è¢«ç¿»è¯‘åçš„æœ€ç»ˆå†…å®¹ä»¥åŠå®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼›</li><li><strong>è¾“å‡ºèµ„æº</strong>ï¼šæ ¹æ®â¼Šâ¼å’Œæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç»„è£…æˆâ¼€ä¸ªä¸ªåŒ…å«å¤šä¸ªæ¨¡å—çš„ Chunkï¼Œå†æŠŠæ¯ä¸ª Chunk è½¬æ¢æˆâ¼€ä¸ªå•ç‹¬çš„â½‚ä»¶åŠ â¼Šåˆ°è¾“å‡ºåˆ—è¡¨ï¼Œè¿™æ­¥æ˜¯å¯ä»¥ä¿®æ”¹è¾“å‡ºå†…å®¹çš„æœ€åæœºä¼šï¼›</li><li><strong>è¾“å‡ºå®Œæˆ</strong>ï¼šåœ¨ç¡®å®šå¥½è¾“å‡ºå†…å®¹åï¼Œæ ¹æ®é…ç½®ç¡®å®šè¾“å‡ºçš„è·¯å¾„å’Œâ½‚ä»¶åï¼ŒæŠŠâ½‚ä»¶å†…å®¹å†™â¼Šåˆ°â½‚ä»¶ç³»ç»Ÿã€‚</li></ol><blockquote><p><strong>æ³¨æ„</strong>ï¼š</p><p>åœ¨ä»¥ä¸Šè¿‡ç¨‹ä¸­ï¼ŒWebpack ä¼šåœ¨ç‰¹å®šçš„æ—¶é—´ç‚¹ï¼Œâ¼´æ’­å‡ºç‰¹å®šçš„äº‹ä»¶ï¼Œæ’ä»¶åœ¨ç›‘å¬åˆ°æ„Ÿå…´è¶£çš„äº‹ä»¶åï¼Œä¼šæ‰§â¾ç‰¹å®šçš„é€»è¾‘ã€‚å¹¶ä¸”æ’ä»¶å¯ä»¥è°ƒâ½¤ Webpack æä¾›çš„ API ï¼Œæ”¹å˜ Webpack çš„è¿â¾ç»“æœã€‚æ¯”å¦‚UglifyPluginï¼Œä¼šåœ¨loaderè½¬æ¢é€’å½’å®Œï¼Œå¯¹ç»“æœä½¿ç”¨UglifyJså‹ç¼©ï¼Œè¦†ç›–ä¹‹å‰çš„ç»“æœã€‚</p></blockquote><h3 id="åŸºæœ¬åŠŸèƒ½">åŸºæœ¬åŠŸèƒ½</h3><ul><li>ä»£ç è½¬æ¢ï¼šTypeScript ç¼–è¯‘æˆ JavaScriptã€SCSS ç¼–è¯‘æˆ CSS ç­‰ç­‰</li><li>æ–‡ä»¶ä¼˜åŒ–ï¼šå‹ç¼© JavaScriptã€CSSã€html ä»£ç ï¼Œå‹ç¼©åˆå¹¶å›¾ç‰‡ç­‰</li><li>ä»£ç åˆ†å‰²ï¼šæå–å¤šä¸ªé¡µé¢çš„å…¬å…±ä»£ç ã€æå–é¦–å±ä¸éœ€è¦æ‰§è¡Œéƒ¨åˆ†çš„ä»£ç è®©å…¶å¼‚æ­¥åŠ è½½</li><li>æ¨¡å—åˆå¹¶ï¼šåœ¨é‡‡ç”¨æ¨¡å—åŒ–çš„é¡¹ç›®æœ‰å¾ˆå¤šæ¨¡å—å’Œæ–‡ä»¶ï¼Œéœ€è¦æ„å»ºåŠŸèƒ½æŠŠæ¨¡å—åˆ†ç±»åˆå¹¶æˆä¸€ä¸ªæ–‡ä»¶</li><li>è‡ªåŠ¨åˆ·æ–°ï¼šç›‘å¬æœ¬åœ°æºä»£ç çš„å˜åŒ–ï¼Œè‡ªåŠ¨æ„å»ºï¼Œåˆ·æ–°æµè§ˆå™¨</li><li>ä»£ç æ ¡éªŒï¼šåœ¨ä»£ç è¢«æäº¤åˆ°ä»“åº“å‰éœ€è¦æ£€æµ‹ä»£ç æ˜¯å¦ç¬¦åˆè§„èŒƒï¼Œä»¥åŠå•å…ƒæµ‹è¯•æ˜¯å¦é€šè¿‡</li><li>è‡ªåŠ¨å‘å¸ƒï¼šæ›´æ–°å®Œä»£ç åï¼Œè‡ªåŠ¨æ„å»ºå‡ºçº¿ä¸Šå‘å¸ƒä»£ç å¹¶ä¼ è¾“ç»™å‘å¸ƒç³»ç»Ÿã€‚</li></ul><h2 id="webpackåŸºæœ¬é…ç½®">webpackåŸºæœ¬é…ç½®</h2><h3 id="å®‰è£…">å®‰è£…</h3><p>å…¨å±€å®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g webpack</span><br><span class="line">npm install -g webpack-cli</span><br></pre></td></tr></table></figure><p>é¡¹ç›®ä¾èµ–</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev webpack</span><br><span class="line">npm install --save-dev webpack-cli</span><br></pre></td></tr></table></figure><h3 id="åŸºæœ¬é…ç½®-å…¥å£ï¼š">åŸºæœ¬é…ç½®-å…¥å£ï¼š</h3><p>å…¥å£èµ·ç‚¹(entry point)æŒ‡ç¤º webpack åº”è¯¥ä½¿ç”¨å“ªä¸ªæ¨¡å—ï¼Œæ¥ä½œä¸ºæ„å»ºå…¶å†…éƒ¨ä¾èµ–å›¾çš„å¼€å§‹ã€‚</p><h3 id="åŸºæœ¬é…ç½®-å‡ºå£">åŸºæœ¬é…ç½®-å‡ºå£</h3><p>output å±æ€§å‘Šè¯‰ webpack åœ¨å“ªé‡Œè¾“å‡ºå®ƒæ‰€åˆ›å»ºçš„ bundles</p><h3 id="åŸºæœ¬é…ç½®-loaders">åŸºæœ¬é…ç½®-loaders</h3><p>loader è®© webpack èƒ½å¤Ÿå»å¤„ç†é‚£äº›é JavaScript æ–‡ä»¶ï¼ˆwebpack è‡ªèº«åªç†è§£ JavaScriptï¼‰ã€‚loader å¯ä»¥å°†æ‰€æœ‰ç±»å‹çš„æ–‡ä»¶è½¬æ¢ä¸º webpack èƒ½å¤Ÿå¤„ç†çš„æœ‰æ•ˆæ¨¡å—ï¼Œç„¶åä½ å°±å¯ä»¥åˆ©ç”¨ webpack çš„æ‰“åŒ…èƒ½åŠ›ï¼Œå¯¹å®ƒä»¬è¿›è¡Œå¤„ç†ã€‚</p><h3 id="åŸºæœ¬é…ç½®-plugins">åŸºæœ¬é…ç½®-plugins</h3><p>webpackæ’ä»¶(è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ã€çƒ­æ›´æ–°ç­‰)</p><blockquote><ol><li><strong>loader</strong>æ˜¯ä½¿webpackæ‹¥æœ‰åŠ è½½å’Œè§£æéjsæ–‡ä»¶çš„èƒ½åŠ›</li><li><strong>plugin</strong> å¯ä»¥æ‰©å±•webpackçš„åŠŸèƒ½ï¼Œä½¿å¾—webpackæ›´åŠ çµæ´»ã€‚å¯ä»¥åœ¨æ„å»ºçš„è¿‡ç¨‹ä¸­é€šè¿‡webpackçš„apiæ”¹å˜è¾“å‡ºçš„ç»“æœ</li></ol></blockquote><h3 id="åŸºæœ¬é…ç½®-æ¨¡å¼">åŸºæœ¬é…ç½®-æ¨¡å¼</h3><p>package.jsonä¸­è®¾ç½®ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">â€scripts&quot;: &#123;</span><br><span class="line">    &quot;dev&quot;: <span class="string">&quot;webpack --mode development&quot;</span>,  // å¼€å‘ç¯å¢ƒ</span><br><span class="line">     <span class="string">&quot;build&quot;</span>: <span class="string">&quot;webpack --mode production&quot;</span>,  // ç”Ÿäº§ç¯å¢ƒ</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>webpack.config.jsä¸­è®¾ç½®ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">module<span class="selector-class">.exports</span> = &#123;</span><br><span class="line">    entry: <span class="string">&#x27;./src/app.js&#x27;</span>,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: path.<span class="built_in">resolve</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        filename: <span class="string">&#x27;main.js&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    mode: <span class="string">&#x27;development&#x27;</span> // è®¾ç½®mode</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>developmentï¼šæœ‰å†…ç½®çš„è°ƒè¯•åŠŸèƒ½ï¼›<strong>æ‰“åŒ…åçš„ä»£ç å¯é˜…è¯»ï¼Œæ²¡è¢«å‹ç¼©</strong></p><p>productionï¼šå†…ç½®ç”Ÿäº§é˜¶æ®µçš„å¾ˆå¤šä¼˜åŒ–åŠŸèƒ½ï¼›<strong>ä»£ç è¢«å‹ç¼©</strong></p><h3 id="åŸºæœ¬é…ç½®-å¯åŠ¨æœ¬åœ°æœåŠ¡">åŸºæœ¬é…ç½®-å¯åŠ¨æœ¬åœ°æœåŠ¡</h3><h4 id="æ–¹å¼ä¸€ï¼š">æ–¹å¼ä¸€ï¼š</h4><p>åœ¨package.jsoné‡Œçš„scriptå±æ€§é‡Œé…ç½®ï¼Œå®Œäº†æ‰§è¡Œ<code>npm run xxx</code></p><p>ä¾‹å¦‚vueé¡¹ç›®ä¸­</p><p>package.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vue-cli-service serve&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vue-cli-service build&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;lint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vue-cli-service lint&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p>å‘½ä»¤è¡Œï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure><h4 id="æ–¹å¼äºŒï¼š">æ–¹å¼äºŒï¼š</h4><p>é€šè¿‡npx</p><p>ä¾‹å¦‚vueé¡¹ç›®ä¸­</p><p>å‘½ä»¤è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx cli-service serve</span><br></pre></td></tr></table></figure><p>npxï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flinks.jianshu.com%2Fgo%3Fto%3Dhttps%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fnpx">www.npmjs.com/package/npx</a></p><h3 id="æ¨¡å—åŒ–-v2">æ¨¡å—åŒ–</h3><p><strong>webpack é»˜è®¤ä½¿ç”¨common.jsè§„èŒƒ</strong>ã€‚</p><p>å¦‚æœåªæ˜¯ä½¿ç”¨import å¯¼å…¥æ¨¡åï¼Œæµè§ˆå™¨æ˜¯ä¸èƒ½ç›´æ¥è¯†åˆ«çš„ï¼Œå¿…é¡»å¯¼å…¥webpackæ‰è¡Œã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/a3ab5e18643f451fa35621b2b2df5427~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image-20220908051238818.png"></p><h2 id="å…¶ä»–åŸºæœ¬å¸¸ç”¨é…ç½®">å…¶ä»–åŸºæœ¬å¸¸ç”¨é…ç½®</h2><h3 id="webpackè·¨åŸŸè§£å†³æ–¹æ¡ˆ">webpackè·¨åŸŸè§£å†³æ–¹æ¡ˆ</h3><p>proxy</p><h3 id="ES6è½¬ES5">ES6è½¬ES5</h3><p>babel</p><h3 id="lessè½¬css">lessè½¬css</h3><p>less-loader</p><p><img src= "/img/loading.gif" data-lazy-src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/52c12510c2934e729c07cbb025752362~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?" alt="image-20220908035219133.png"></p><p><strong>æ³¨æ„</strong>ï¼šé…ç½®æ—¶æ‰§è¡Œé¡ºåºé»˜è®¤æ˜¯<strong>ä»å³åˆ°å·¦ï¼Œä»ä¸‹åˆ°ä¸Š</strong>ã€‚</p><h3 id="å¤„ç†å›¾ç‰‡">å¤„ç†å›¾ç‰‡</h3><h4 id="æ–¹å¼ä¸€ï¼šurl-loader">æ–¹å¼ä¸€ï¼šurl-loader</h4><p>å°äºlimité™åˆ¶çš„è½¬base64</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/59df8f0eba8447e888617569324cb7a7~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image-20220509013551329.png"> <strong>è¯´æ˜</strong>ï¼šurl-loaderå¤„ç†çš„å›¾ç‰‡ä¸€èˆ¬æ¯”è¾ƒå°ï¼Œä¼šæŠŠå›¾ç‰‡è½¬æ¢æˆ<strong>base64</strong>ä»£ç ï¼Œç›´æ¥æ·»åŠ é¡µé¢ã€‚æä¾›äº†ä¸€ä¸ªæ–¹ä¾¿çš„é€‰æ‹© <strong>limit</strong>ï¼Œè¯¥é€‰é¡¹ç”¨äºæ§åˆ¶å½“æ–‡ä»¶å¤§å°å°äº limit æ—¶æ‰ä½¿ç”¨ url-loaderã€‚é€šå¸¸ä¼šè®¾ç½®<strong>5-8kb</strong>ã€‚</p><p><strong>æ‰©å±•</strong>ï¼šå“ˆå¸Œçš„ä½œç”¨æ˜¯<strong>å‘½ä¸­ç¼“å­˜</strong>ï¼Œä½¿è¿”å›æ›´å¿«äº›ã€‚</p><h4 id="æ–¹å¼äºŒï¼šfile-loader">æ–¹å¼äºŒï¼šfile-loader</h4><p>æŠŠå›¾ç‰‡è½¬æ¢æˆè·¯å¾„ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/94ef4dc4b5824b62b007ec145a7cf922~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?" alt="image-20220908035830131.png"></p><h3 id="æ‹†åˆ†é…ç½®å’Œmerge">æ‹†åˆ†é…ç½®å’Œmerge</h3><blockquote><p>èƒŒæ™¯ï¼šâ€˜â€˜åŸºæœ¬é…ç½®-æ¨¡å¼â€™â€™ï¼Œé‡Œé¢ä»‹ç»è¿‡æ¨¡å¼ä¹‹é—´çš„åŒºåˆ«ï¼Œä¸ºäº†è§£å†³æ‰‹åŠ¨æ›´æ”¹modeå¸¦æ¥çš„ä¸ä¾¿ï¼Œæ‰€ä»¥ï¼Œè¦å°†è¿™äº›æ‰“åŒ…çš„é…ç½®ï¼Œæ‹†åˆ†åˆ°ä¸åŒçš„æ–‡ä»¶é‡Œé¢æ¥ã€‚</p></blockquote><ul><li>webpack.dev.config.js å¼€å‘ç¯å¢ƒçš„é…ç½®ï¼›</li><li>webpack.prod.config.jsç”Ÿäº§ç¯å¢ƒçš„é…ç½®ï¼›</li><li>webpack.base.config.jsæ˜¯å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒéƒ½ä¼šä½¿ç”¨çš„é…ç½®ï¼›</li><li>é€šè¿‡<strong>webpack-merge</strong>æ¨¡å—å°†ä¸åŒé…ç½®çš„ä»£ç åˆå¹¶ï¼›</li></ul><p><em>webpack.dev.config.js</em></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> commonConfig = <span class="built_in">require</span>(<span class="string">&#x27;./webpack.base.config&#x27;</span>)</span><br><span class="line"><span class="comment">// webpack-merge å°†å…¬å…±çš„é…ç½® å’Œ å¼€å‘çš„é…ç½®åˆå¹¶ç»“åˆ</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">smart</span>: merge &#125; = <span class="built_in">require</span>(<span class="string">&#x27;webpack-merge&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> devConfig = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">merge</span>(commonConfig, devConfig)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p><em>webpack.prod.config.js</em></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> commonConfig = <span class="built_in">require</span>(<span class="string">&#x27;./webpack.base.config&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">smart</span>: merge &#125; = <span class="built_in">require</span>(<span class="string">&#x27;webpack-merge&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> prodConfig = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;production&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">merge</span>(commonConfig, prodConfig)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><h2 id="ä¸šåŠ¡åœºæ™¯">ä¸šåŠ¡åœºæ™¯</h2><ol><li><p>å•é¡µåº”ç”¨</p></li><li><p>ä¸€ä¸ªé¡¹ç›®ç®¡ç†å¤šä¸ªå•é¡µé¢</p></li><li><p>ä»£ç åˆ†éš”ä¼˜åŒ–</p><p>ä¸€ä¸ªå¥½çš„ä»£ç åˆ†å‰²å¯¹æµè§ˆå™¨é¦–å±æ•ˆæœæå‡å¾ˆå¤§ã€‚</p></li><li><p>æ„å»ºæœåŠ¡ç«¯æ¸²æŸ“</p></li><li><p>çƒ­æ›´æ–°</p></li><li><p>ä¼˜åŒ–å¼€å‘ç¼–è¯‘ã€ç”Ÿäº§ç¯å¢ƒæ‰“åŒ…é€Ÿåº¦</p></li><li><p>ä¼˜åŒ–é¦–å±é€Ÿåº¦</p></li></ol><h1>æ‰©å±•ï¼šè¿˜çŸ¥é“å“ªäº›æ„å»ºå·¥å…·ï¼Ÿæœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ</h1><blockquote><p>å¤§è‡´äº†è§£ä¸‹å°±å¥½  ï¼Œç°åœ¨ä¸»æµçš„æ˜¯<strong>webpackã€rollupã€vite</strong></p></blockquote><h2 id="æ„å»ºå·¥å…·æœ‰å“ªäº›ï¼Ÿ">æ„å»ºå·¥å…·æœ‰å“ªäº›ï¼Ÿ</h2><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwebpack.docschina.org%2F">webpack</a> ä¸ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.gruntjs.net%2F">grunt</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.gulpjs.com.cn%2F">gulp</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Ffex.baidu.com%2Ffis3%2F%EF%BC%89">FIS3</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fvitejs.cn%2F">Vite</a>ç­‰</p><h2 id="ä»–ä»¬æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ">ä»–ä»¬æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</h2><ul><li>éƒ½æ˜¯å‰ç«¯æ„å»ºå·¥å…·ï¼Œgruntå’Œgulpåœ¨æ—©æœŸæ¯”è¾ƒæµè¡Œï¼ŒFIS3åœæ­¢ç»´æŠ¤äº†ï¼Œç°åœ¨webpackç›¸å¯¹æ¥è¯´æ¯”è¾ƒä¸»æµï¼Œä¸è¿‡ä¸€äº›è½»é‡åŒ–çš„ä»»åŠ¡ï¼Œè¿˜æ˜¯ä¼šç”¨gulpæ¥å¤„ç†ï¼Œæ¯”å¦‚å•ç‹¬æ‰“åŒ…CSSæ–‡ä»¶ç­‰ã€‚</li><li>gruntå’Œgulpæ˜¯åŸºäº<em><strong>ä»»åŠ¡</strong>å’Œ</em><em>æµ</em>**ï¼ˆTaskã€Streamï¼‰çš„ã€‚ç±»ä¼¼<strong>jQuery</strong>ï¼Œæ‰¾åˆ°ä¸€ä¸ªï¼ˆæˆ–ä¸€ç±»ï¼‰æ–‡ä»¶ï¼Œå¯¹å…¶åšä¸€ç³»åˆ—é“¾å¼æ“ä½œï¼Œæ›´æ–°æµä¸Šçš„æ•°æ®ï¼Œ æ•´æ¡<strong>é“¾å¼æ“ä½œ</strong>æ„æˆäº†ä¸€ä¸ª<strong>ä»»åŠ¡</strong>ï¼Œå¤šä¸ªä»»åŠ¡å°±æ„æˆäº†æ•´ä¸ªwebçš„æ„å»º<strong>æµç¨‹</strong>ã€‚</li><li>webpackæ˜¯åŸºäº<em><strong>å…¥å£</strong></em>çš„ã€‚webpackä¼šè‡ªåŠ¨åœ°<strong>é€’å½’è§£æ</strong>å…¥å£æ‰€éœ€è¦åŠ è½½çš„æ‰€æœ‰<strong>èµ„æºæ–‡ä»¶</strong>ï¼Œç„¶åç”¨ä¸åŒçš„<strong>Loader</strong>æ¥å¤„ç†ä¸åŒçš„æ–‡ä»¶ï¼Œç”¨<strong>Plugin</strong>æ¥æ‰©å±•webpackåŠŸèƒ½ã€‚</li><li>webpackä¼˜ç‚¹æ˜¯ä¸“æ³¨äºå¤„ç†æ¨¡å—åŒ–çš„é¡¹ç›®ï¼Œå°¤å…¶é€‚åˆå•é¡µåº”ç”¨ã€‚Webpackçš„ç¼ºç‚¹æ˜¯åªèƒ½ç”¨äºé‡‡ç”¨æ¨¡å—åŒ–å¼€å‘çš„é¡¹ç›®ã€‚</li><li>FIS3å¹¶æ²¡æœ‰<strong>å…¥å£</strong>(entry)çš„æ¦‚å¿µï¼Œåœ¨FIS3ä¸­ï¼Œæ„å»ºæµç¨‹ä¸å•å•æ ¹æ®jsæ¥ï¼Œè€Œæ˜¯åˆ†ææ¯ä¸€ä¸ªæ–‡ä»¶çš„ä¾èµ–å…³ç³»ï¼Œç”Ÿæˆä¸€ä¸ªèµ„æºè¡¨â€˜sourceMapâ€™ï¼Œä½ å¯ä»¥æ ¹æ®èµ„æºè¡¨å®šä¹‰ä»»ä½•çš„äº§å‡ºè§„åˆ™</li><li>Fis3çš„<strong>ä¼˜ç‚¹</strong>æ˜¯é›†æˆäº†å„ç§Webå¼€å‘æ‰€éœ€çš„æ„å»ºåŠŸèƒ½ï¼Œé…ç½®ç®€å•ã€å¼€ç®±å³ç”¨ã€‚å…¶<strong>ç¼ºç‚¹</strong>æ˜¯ç›®å‰å®˜æ–¹å·²ç»<strong>ä¸å†æ›´æ–°å’Œç»´æŠ¤</strong>ï¼Œ<strong>ä¸æ”¯æŒ</strong>æœ€æ–°ç‰ˆæœ¬çš„Node.jsã€‚Fis3æ˜¯ä¸€ç§ä¸“æ³¨äºWebå¼€å‘çš„å®Œæ•´è§£å†³æ–¹æ¡ˆï¼Œå¦‚æœå°†Gruntã€Gulpæ¯”ä½œæ±½è½¦çš„<strong>å‘åŠ¨æœº</strong>ï¼Œåˆ™å¯ä»¥å°†Fis3æ¯”ä½œä¸€è¾†å®Œæ•´çš„<strong>æ±½è½¦</strong>ã€‚</li></ul><p>æ€»ç»“ï¼š</p><p><strong>ä»æ„å»ºæ€è·¯æ¥è¯´</strong>ï¼šgulpå’Œgruntéœ€è¦å¼€å‘è€…å°†æ•´ä¸ªå‰ç«¯æ„å»ºè¿‡ç¨‹æ‹†åˆ†æˆå¤šä¸ªTaskï¼Œå¹¶åˆç†æ§åˆ¶æ‰€æœ‰Taskçš„è°ƒç”¨å…³ç³»ï¼› webpackéœ€è¦å¼€å‘è€…æ‰¾åˆ°å…¥å£ï¼Œå¹¶éœ€è¦æ¸…æ¥šå¯¹äºä¸åŒçš„èµ„æºåº”è¯¥ä½¿ç”¨ä»€ä¹ˆLoaderåšä½•ç§è§£æå’ŒåŠ å·¥ï¼›FIS3ä»»ä½•æ–‡ä»¶éƒ½å¯ä»¥ä½œä¸ºå…¥å£</p><p><strong>å¯¹äºçŸ¥è¯†èƒŒæ™¯</strong>ï¼šgulpæ›´åƒåç«¯å¼€å‘è€…çš„æ€è·¯ï¼Œéœ€è¦å¯¹äºæ•´ä¸ªæµç¨‹äº†å¦‚æŒ‡æŒï¼› webpackæ›´å€¾å‘äºå‰ç«¯å¼€å‘è€…çš„æ€è·¯ã€‚</p><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fjava_goodstudy%2Farticle%2Fdetails%2F52797499">å‰ç«¯å·¥å…·ç®€ä»‹ fis3,webpack</a></p><p>è¡¥å……ï¼š</p><ol><li>Webpackæ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å™¨ï¼Œä»–å¯ä»¥é€’å½’çš„æ‰“åŒ…é¡¹ç›®ä¸­çš„æ‰€æœ‰æ¨¡å—ï¼Œæœ€ç»ˆç”Ÿæˆå‡ ä¸ªæ‰“åŒ…åçš„æ–‡ä»¶ã€‚</li><li>ä»–å’Œå…¶ä»–çš„å·¥å…·æœ€å¤§çš„ä¸åŒåœ¨äºä»–æ”¯æŒ<strong>code-splittingã€æ¨¡å—åŒ–(AMDï¼ŒESMï¼ŒCommonJs)ã€å…¨å±€åˆ†æã€‚</strong></li></ol><h2 id="æœ‰ç±»ä¼¼webpackçš„å·¥å…·ä¹ˆï¼Ÿ">æœ‰ç±»ä¼¼webpackçš„å·¥å…·ä¹ˆï¼Ÿ</h2><p>åŒæ ·æ˜¯<strong>åŸºäºå…¥å£</strong>çš„æ‰“åŒ…å·¥å…·è¿˜æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwebpack.docschina.org%2F">webpack</a>ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.rollupjs.com%2F">rollup</a>ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.parceljs.cn%2F">parcel</a>ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fvitejs.cn%2F">vite</a>ï¼Œ<a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.snowpack.cn%2F">snowpack</a></p><p>ä»åº”ç”¨åœºæ™¯ä¸Šæ¥çœ‹ï¼š</p><ul><li><code>webpack</code>ï¼šé€‚åˆå¤§å‹å¤æ‚çš„å‰ç«¯ç«™ç‚¹æ„å»ºï¼Œå°¤å…¶æ˜¯æ¨¡å—åŒ–çš„ï¼Œå•é¡µåº”ç”¨ã€‚</li><li><code>rollup</code>ï¼šä¸“é—¨é’ˆå¯¹ç±»åº“è¿›è¡Œæ‰“åŒ…ï¼Œå®ƒçš„ä¼˜ç‚¹æ˜¯å°å·§è€Œä¸“æ³¨ã€‚å› æ­¤ç°åœ¨å¾ˆå¤šæˆ‘ä»¬ç†ŸçŸ¥çš„åº“éƒ½éƒ½ä½¿ç”¨å®ƒè¿›è¡Œæ‰“åŒ…ï¼Œæ¯”å¦‚ï¼šVueã€Reactå’Œthree.jsç­‰ã€‚</li><li><code>parcel</code>ï¼šé›¶é…ç½®ï¼Œå‚»ç“œå¼ã€‚é€‚ç”¨äºç®€å•çš„å®éªŒå®¤é¡¹ç›®ï¼Œæ‰“åŒ…å‡ºé”™å¾ˆéš¾è°ƒè¯•ã€‚ä¸æ”¯æŒTree Shakingã€‚æ›´å¤šä¼˜ç‚¹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F350601275">ä¼ é€é—¨</a>ã€‚</li><li><code>vite</code>ï¼šçµæ´»ã€å¤æ‚åº¦é€‚ä¸­ï¼Œæœªæ¥è¶‹åŠ¿ã€‚å¼€å‘æœŸé—´æ— éœ€æ‰“åŒ…ï¼Œè¶Šå¤§å‹ä½“éªŒæ„Ÿè¶Šå¥½ã€‚</li><li><code>snowpack</code>ä¸<code>vite</code>ç±»ä¼¼ã€‚</li></ul><p>rollupã€viteã€snowpackï¼Œéƒ½æ˜¯åŸºäºESMï¼Œå¼€å‘æœŸé—´æ— éœ€æ„å»ºï¼Œæµè§ˆå™¨ç›´ç”¨ã€‚</p><p><em>å‚è€ƒæ–‡ç« ï¼š</em></p><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fbroadview2006%2Farticle%2Fdetails%2F79091719%3Fspm%3D1001.2101.3001.6661.1%26utm_medium%3Ddistribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1-79091719-blog-52797499.pc_relevant_multi_platform_whitelistv3%26depth_1-utm_source%3Ddistribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1-79091719-blog-52797499.pc_relevant_multi_platform_whitelistv3%26utm_relevant_index%3D1"><em>ä»Npm Scriptåˆ°Webpackï¼Œ6ç§å¸¸è§çš„å‰ç«¯æ„å»ºå·¥å…·å¯¹æ¯”</em></a></p><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fsegmentfault.com%2Fa%2F1190000014049700"><em>webpack VS parcel</em></a></p><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F350601275"><em>æ·±å…¥å¯¹æ¯”Webpackã€Parcelã€Rollupæ‰“åŒ…å·¥å…·</em></a></p><h2 id="ä½œä¸ºå®˜æ–¹æ¨èçš„viteï¼Œå’Œç°åœ¨åº”ç”¨æœ€å¹¿çš„webpackçš„åŒºåˆ«ï¼Ÿ">ä½œä¸ºå®˜æ–¹æ¨èçš„viteï¼Œå’Œç°åœ¨åº”ç”¨æœ€å¹¿çš„webpackçš„åŒºåˆ«ï¼Ÿ</h2><blockquote><p><strong>éœ€è¦ç†è§£ï¼Œå½“ä¸‹æœ€ç«ï¼Œè¢«é—®åˆ°æ¦‚ç‡å¤§</strong></p></blockquote><blockquote><p><strong>æŠ€å·§æç¤º</strong>ï¼š</p><p>åŠ ç²—å­—ä½“è¿èµ·æ¥ï¼Œå°±æ˜¯æµ“ç¼©é‡ç‚¹ï½</p></blockquote><p><strong>Webpack</strong> æ˜¯ä¸€ä¸ªæ‰“åŒ…æ¨¡å—åŒ– JavaScript çš„å·¥å…·ï¼Œåœ¨ Webpack é‡Œä¸€åˆ‡æ–‡ä»¶çš†æ¨¡å—ï¼Œé€šè¿‡ Loader è½¬æ¢æ–‡ä»¶ï¼Œé€šè¿‡ Plugin æ³¨å…¥é’©å­ï¼Œæœ€åè¾“å‡ºç”±å¤šä¸ªæ¨¡å—ç»„åˆæˆçš„æ–‡ä»¶ã€‚Webpack ä¸“æ³¨äºæ„å»ºæ¨¡å—åŒ–é¡¹ç›®ã€‚</p><p>ä¸€åˆ‡æ–‡ä»¶ï¼šJavaScriptã€CSSã€SCSSã€å›¾ç‰‡ã€æ¨¡æ¿ï¼Œåœ¨ Webpack çœ¼ä¸­éƒ½æ˜¯ä¸€ä¸ªä¸ªæ¨¡å—ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯èƒ½æ¸…æ™°çš„æè¿°å‡ºå„ä¸ªæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œä»¥æ–¹ä¾¿ Webpack å¯¹æ¨¡å—è¿›è¡Œç»„åˆå’Œæ‰“åŒ…ã€‚ ç»è¿‡ Webpack çš„å¤„ç†ï¼Œæœ€ç»ˆä¼šè¾“å‡ºæµè§ˆå™¨èƒ½ä½¿ç”¨çš„é™æ€èµ„æºã€‚å› æ­¤<strong>æ¯æ¬¡ç¼–è¯‘éƒ½éœ€è¦é‡æ–°æ„å»º</strong>ã€‚</p><p><strong>vite</strong>ä¸»è¦éµå¾ªçš„æ˜¯ä½¿ç”¨<strong>ESM</strong>(Es modulesæ¨¡å—)çš„è§„èŒƒæ¥æ‰§è¡Œä»£ç ï¼Œç”±äºç°ä»£æµè§ˆå™¨åŸºæœ¬ä¸Šéƒ½æ”¯æŒäº†ESMè§„èŒƒï¼Œæ‰€ä»¥åœ¨<strong>å¼€å‘é˜¶æ®µ</strong>å¹¶ä¸éœ€è¦å°†ä»£ç æ‰“åŒ…ç¼–è¯‘æˆes5æ¨¡å—ï¼Œå³å¯<strong>ç›´æ¥åœ¨æµè§ˆå™¨ä¸Šè¿è¡Œ</strong>ã€‚æˆ‘ä»¬åªéœ€è¦ä»å…¥å£æ–‡ä»¶å‡ºå‘ï¼Œ åœ¨é‡åˆ°å¯¹åº”çš„ <code>import</code> è¯­å¥æ—¶ï¼Œå°†å¯¹åº”çš„æ¨¡å—åŠ è½½åˆ°æµè§ˆå™¨ä¸­å°±å¯ä»¥äº†ã€‚å½“é¡¹ç›®è¶Šå¤§ï¼Œæ–‡ä»¶è¶Šå¤šæ—¶ï¼Œviteçš„å¼€å‘æ—¶ä¼˜åŠ¿è¶Šæ˜æ˜¾ã€‚vite<strong>çƒ­æ›´æ–°</strong>æ¯”webpackï¼Œ<strong>vite</strong>åœ¨HRMæ–¹é¢ï¼Œå½“æŸä¸ªæ¨¡å—å†…å®¹æ”¹å˜æ—¶ï¼Œè®©<em><strong>æµè§ˆå™¨ç›´æ¥é‡æ–°è¯·æ±‚è¯¥æ¨¡å—å³å¯ï¼Œè€Œä¸æ˜¯åƒwebpacké‡æ–°å°†è¯¥æ¨¡å—çš„æ‰€æœ‰ä¾èµ–é‡æ–°ç¼–è¯‘</strong></em>ã€‚</p><p>Viteçš„ä½¿ç”¨ç®€å•ï¼Œåªéœ€æ‰§è¡Œåˆå§‹åŒ–å‘½ä»¤ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªé¢„è®¾å¥½çš„å¼€å‘ç¯å¢ƒï¼Œå¼€ç®±å³è·å¾—ä¸€å †åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼šCSSé¢„å¤„ç†ã€htmlé¢„å¤„ç†ã€å¼‚æ­¥åŠ è½½ã€åˆ†åŒ…ã€å‹ç¼©ã€HMRç­‰ã€‚ä½¿ç”¨<strong>å¤æ‚åº¦ä»‹äºParcelå’ŒWebpackçš„ä¸­é—´</strong>ï¼Œåªæ˜¯æš´éœ²äº†æå°‘æ•°çš„é…ç½®é¡¹å’Œpluginæ¥å£ï¼Œæ—¢ä¸ä¼šåƒParcelä¸€æ ·é…ç½®ä¸çµæ´»ï¼Œåˆä¸ä¼šåƒWebpackä¸€æ ·éœ€è¦äº†è§£åºå¤§çš„loaderã€pluginç”Ÿæ€ï¼Œçµæ´»é€‚ä¸­ã€å¤æ‚åº¦é€‚ä¸­ã€‚</p><p>æ€»ä½“æ¥è¯´ï¼ŒViteåœ¨å‰ç«¯æ„å»ºå·¥å…·é¢†åŸŸä¸Šå¼€è¾Ÿäº†ä¸€æ¡å’Œwebpackå®Œå…¨ä¸åŒçš„é“è·¯ï¼Œå¾ˆå¥½åœ°è§£å†³äº†å‰ç«¯å¼€å‘é˜¶æ®µæ„å»ºé€Ÿåº¦æ…¢çš„é—®é¢˜ã€‚</p><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fqq_34703156%2Farticle%2Fdetails%2F119735721">Viteä»‹ç»å’ŒåŸç†è§£æ</a></p><h1>æ‰©å±•ï¼šå¸¸è§Webpacké¢è¯•çœŸé¢˜</h1><h2 id="å‰ç«¯ä¸ºä½•è¦è¿›è¡Œæ‰“åŒ…å’Œæ„å»ºï¼Ÿ">å‰ç«¯ä¸ºä½•è¦è¿›è¡Œæ‰“åŒ…å’Œæ„å»ºï¼Ÿ</h2><p><strong>ä»£ç å±‚é¢</strong>ï¼š</p><ul><li>ä½“ç§¯æ›´å°ï¼ˆTree-Shakingã€å‹ç¼©ã€åˆå¹¶ï¼‰ï¼ŒåŠ è½½æ›´å¿«</li><li>ç¼–è¯‘é«˜çº§è¯­è¨€æˆ–è¯­æ³•ï¼ˆTSã€ES6+ï¼Œæ¨¡å—åŒ–ï¼ŒSCSSï¼‰</li><li>å…¼å®¹æ€§å’Œé”™è¯¯æ£€æŸ¥ï¼ˆPolyfillã€postcssã€eslintï¼‰</li></ul><p><strong>ç ”å‘æµç¨‹å±‚é¢</strong>ï¼š</p><ul><li>ç»Ÿä¸€ã€é«˜æ•ˆçš„å¼€å‘ç¯å¢ƒ</li><li>ç»Ÿä¸€çš„æ„å»ºæµç¨‹å’Œäº§å‡ºæ ‡å‡†</li><li>é›†æˆå…¬å¸æ„å»ºè§„èŒƒï¼ˆææµ‹ã€ä¸Šçº¿ç­‰ï¼‰</li></ul><h2 id="module-chunk-bundleåŒºåˆ«">module\chunk\bundleåŒºåˆ«</h2><ul><li><strong>module</strong>ï¼šå„ä¸ªæºç æ–‡ä»¶ï¼Œwebpackä¸­ä¸€åˆ‡çš†æ¨¡å—ã€‚</li><li><strong>chunk</strong>ï¼šåœ¨å†…å­˜ä¸­è¿˜æ²¡æœ‰äº§å‡ºçš„ä»£ç å—ã€‚</li><li><strong>bundle</strong>ï¼šæ¯ä¸ªchunkæ‰“åŒ…åï¼Œéƒ½å¯ä»¥äº§ç”Ÿä¸ªbundleæ–‡ä»¶ã€‚</li></ul><h2 id="loaderå’ŒpluginåŒºåˆ«">loaderå’ŒpluginåŒºåˆ«</h2><ul><li>loaderæ¨¡å—è½¬æ¢å™¨ï¼Œå¦‚less-&gt;cssï¼Œä¸¾2-3ä¸ªä¾‹å­</li><li>pluginæ‰©å±•æ’ä»¶ï¼Œå¦‚HtmlWebpackPluginï¼Œä¸¾2-3ä¸ªä¾‹å­</li></ul><blockquote><p><strong>Webpackçš„loaderçš„åŠ è½½é¡ºåºä¸ºä»€ä¹ˆæ˜¯ä»å³å‘å·¦</strong>:</p><ol><li><p>Webpacké€‰æ‹©äº†composeæ–¹å¼ï¼ˆå³ å‡½æ•°å¼ç¼–ç¨‹ï¼‰ï¼Œè€Œä¸æ˜¯pipeçš„æ–¹å¼ã€‚</p></li><li><p>å¯¹äºloaderæ¥è¯´å‘¢ï¼Œæœ‰ä¸€ä¸ªæœ€å¤§çš„éœ€æ±‚â€”â€”<strong>ä»»æ„ç»„åˆ</strong>ã€‚è€Œä½¿ç”¨composeå‡½æ•°å°±å¾ˆå¥½çš„èƒ½å®Œæˆè¿™ä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨loaderä¸­çš„é¡ºåºå°±å¯ä»¥å®Œæˆè¿™ä¸ªå‡½æ•°åµŒå¥—çš„éœ€æ±‚ï¼Œè®©ç¼–ç¨‹æ›´ç²¾ç»ƒã€ç®—æ³•æ›´æ¸…æ™°ã€‚</p></li></ol></blockquote><h2 id="å¸¸è§çš„loaderå’Œplugin">å¸¸è§çš„loaderå’Œplugin</h2><p>æŒ‘å‡ ä¸ªè®°ä¸€ä¸‹ã€‚</p><p>å…¨é¢å®Œæ•´ç‰ˆï¼š</p><ol><li><p><strong>loader</strong>ï¼š<a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.webpackjs.com%2Floaders%2F">www.webpackjs.com/loaders/</a></p></li><li><p><strong>plugin</strong>ï¼š<a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.webpackjs.com%2Fplugins%2F">www.webpackjs.com/plugins/</a></p></li></ol><h2 id="babelå’Œwebpackçš„åŒºåˆ«">babelå’Œwebpackçš„åŒºåˆ«</h2><p><strong>Babel.js</strong>æ˜¯æ–°è¯­æ³•ç¼–è¯‘å·¥å…·ï¼Œ<strong>ä¸å…³å¿ƒæ¨¡å—åŒ–</strong>ã€‚</p><p><strong>webpack</strong>æ˜¯æ‰“åŒ…æ„å»ºå·¥å…·ï¼Œæ˜¯å¤šä¸ªloaderã€pluginçš„é›†åˆã€‚ä½ é…ç½®ä»€ä¹ˆloader pluginï¼Œå®ƒå°±æœ‰ä»€ä¹ˆèƒ½åŠ›ã€‚</p><h2 id="bable-polyfillå’Œable-runtimeçš„åŒºåˆ«">bable-polyfillå’Œable-runtimeçš„åŒºåˆ«</h2><ul><li>babel-polyfill ä¼šæ±¡æŸ“å…¨å±€</li><li>babel-runtimeä¸ä¼šæ±¡æŸ“å…¨å±€</li><li>äº§å‡ºç¬¬ä¸‰æ–¹libè¦ç”¨babel-runtime</li></ul><h2 id="webpackå¦‚ä½•å®ç°æ‡’åŠ è½½">webpackå¦‚ä½•å®ç°æ‡’åŠ è½½</h2><ul><li>import()</li><li>ç»“åˆVue Reactå¼‚æ­¥ç»„ä»¶</li><li>ç»“åˆVue-router React-routerå¼‚æ­¥åŠ è½½è·¯ç”±</li></ul><h2 id="ä¸ºä½•Proxyä¸èƒ½è¢«Polyfill">ä¸ºä½•Proxyä¸èƒ½è¢«Polyfill?</h2><p>å› ä¸ºæ²¡æœ‰ä»»ä½•ä¸œè¥¿ï¼Œå¯ä»¥æ¨¡æ‹Ÿå®ƒã€‚</p><ul><li>å¦‚Classå¯ä»¥ç”¨funcitonæ¨¡æ‹Ÿ</li><li>å¦‚Promseå¯ä»¥ç”¨callbackæ¥æ¨¡æ‹Ÿ</li><li>ä½†Proxyçš„åŠŸèƒ½ç”¨Object.definePropertyæ¨¡æ‹Ÿ</li></ul><h2 id="webpackå¦‚ä½•ä¼˜åŒ–æ„å»ºé€Ÿåº¦ï¼Ÿ">webpackå¦‚ä½•ä¼˜åŒ–æ„å»ºé€Ÿåº¦ï¼Ÿ</h2><h3 id="å¯ç”¨äºç”Ÿäº§ç¯å¢ƒ">å¯ç”¨äºç”Ÿäº§ç¯å¢ƒ</h3><ul><li><p>ä¼˜åŒ–babel-loader</p></li><li><p>IgnorePlugin</p></li><li><p>noParse</p><p>å¤šè¿›ç¨‹ï¼š</p></li><li><p>happyPack</p></li><li><p>ParallelUglifyPlugin</p></li></ul><h3 id="ä¸å¯ç”¨äºç”Ÿäº§ç¯å¢ƒ">ä¸å¯ç”¨äºç”Ÿäº§ç¯å¢ƒ</h3><ul><li>è‡ªåŠ¨åˆ·æ–°</li><li>çƒ­æ›´æ–°</li><li>DIIPlugin</li></ul><h2 id="å¦‚ä½•åˆ©ç”¨webpackæ¥ä¼˜åŒ–å‰ç«¯æ€§èƒ½">å¦‚ä½•åˆ©ç”¨webpackæ¥ä¼˜åŒ–å‰ç«¯æ€§èƒ½</h2><ol><li><p>æå–å…¬å…±ä»£ç ã€‚</p></li><li><p>å‹ç¼©ä»£ç ã€‚ï¼ˆdevelopmentå’Œproductionï¼‰</p></li><li><p>ä½¿ç”¨loaderçš„æ—¶å€™ï¼Œä½¿ç”¨excludeæ’é™¤node_modulesä¸­çš„æ–‡ä»¶</p></li><li><p>é…ç½®extractTextWebpackPluginæ’ä»¶</p></li><li><p>ä½¿ç”¨TreeShakingæ’ä»¶ï¼šTree-shaking æ¦‚å¿µæœ€æ—©ç”±Rollup.js æå‡ºï¼Œåæ¥åœ¨webpack2ä¸­è¢«å¼•å…¥è¿›æ¥ï¼Œä½†æ˜¯è¿™ä¸ªè¿™ä¸€ç‰¹æ€§èƒ½å¤Ÿè¢«æ”¯æŒå¾—ç›ŠäºES6 modulesçš„é™æ€ç‰¹æ€§ã€‚ES6çš„æ¨¡å—å£°æ˜ç›¸æ¯”äºä¼ ç»ŸCommonJSçš„åŒæ­¥requireæœ‰ç€æœ¬è´¨åŒºåˆ«ã€‚è¿™ç§modulesè®¾è®¡ä¿è¯äº†ä¾èµ–å…³ç³»æ˜¯æå‰ç¡®å®šçš„ï¼Œä½¿å¾—é™æ€åˆ†ææˆä¸ºäº†å¯èƒ½ï¼Œä¸è¿è¡Œæ—¶æ— å…³ã€‚ï¼ˆé™¤é‚£äº›å¼•ç”¨çš„ä½†å´æ²¡æœ‰ä½¿ç”¨çš„ä»£ç ï¼‰</p></li></ol><h2 id="webpack-dev-serverå’ŒhttpæœåŠ¡å™¨å¦‚nginxæœ‰ä»€ä¹ˆåŒºåˆ«">webpack-dev-serverå’ŒhttpæœåŠ¡å™¨å¦‚nginxæœ‰ä»€ä¹ˆåŒºåˆ«?</h2><ol><li>webpack-dev-serverä½¿ç”¨å†…å­˜æ¥å­˜å‚¨webpackå¼€å‘ç¯å¢ƒä¸‹çš„æ‰“åŒ…æ–‡ä»¶</li><li>å¹¶ä¸”å¯ä»¥ä½¿ç”¨æ¨¡å—çƒ­æ›´æ–°</li><li>ä»–æ¯”ä¼ ç»Ÿçš„httpæœåŠ¡å¯¹å¼€å‘æ›´åŠ ç®€å•é«˜æ•ˆã€‚</li></ol><h2 id="ä»€ä¹ˆæ˜¯é•¿ç¼“å­˜ï¼Ÿåœ¨webpackä¸­å¦‚ä½•åšåˆ°é•¿ç¼“å­˜ä¼˜åŒ–ï¼Ÿ">ä»€ä¹ˆæ˜¯é•¿ç¼“å­˜ï¼Ÿåœ¨webpackä¸­å¦‚ä½•åšåˆ°é•¿ç¼“å­˜ä¼˜åŒ–ï¼Ÿ</h2><ol><li><p>æµè§ˆå™¨åœ¨ç”¨æˆ·è®¿é—®é¡µé¢çš„æ—¶å€™ï¼Œä¸ºäº†åŠ å¿«åŠ è½½é€Ÿåº¦ï¼Œä¼šå¯¹ç”¨æˆ·è®¿é—®çš„é™æ€èµ„æºè¿›è¡Œå­˜å‚¨ï¼Œä½†æ˜¯æ¯ä¸€æ¬¡ä»£ç å‡çº§æˆ–æ˜¯æ›´æ–°ï¼Œéƒ½éœ€è¦æµè§ˆå™¨å»ä¸‹è½½æ–°çš„ä»£ç ï¼Œæœ€æ–¹ä¾¿å’Œç®€å•çš„æ›´æ–°æ–¹å¼å°±æ˜¯å¼•å…¥æ–°çš„æ–‡ä»¶åç§°ã€‚</p></li><li><p>åœ¨webpackä¸­å¯ä»¥åœ¨outputçºµè¾“å‡ºçš„æ–‡ä»¶æŒ‡å®šchunkhash,å¹¶ä¸”åˆ†ç¦»ç»å¸¸æ›´æ–°çš„ä»£ç å’Œæ¡†æ¶ä»£ç ã€‚</p></li><li><p>é€šè¿‡NameModulesPluginæˆ–æ˜¯HashedModuleIdsPluginä½¿å†æ¬¡æ‰“åŒ…æ–‡ä»¶åä¸å˜ã€‚</p></li></ol><h2 id="ä»€ä¹ˆæ˜¯Tree-shaking-CSSå¯ä»¥Tree-shakingå—ï¼Ÿ">ä»€ä¹ˆæ˜¯Tree-shaking?CSSå¯ä»¥Tree-shakingå—ï¼Ÿ</h2><ol><li>Tree-shakingæ˜¯æŒ‡åœ¨æ‰“åŒ…ä¸­å»é™¤é‚£äº›å¼•å…¥äº†ï¼Œä½†æ˜¯åœ¨ä»£ç ä¸­æ²¡æœ‰è¢«ç”¨åˆ°çš„é‚£äº›æ­»ä»£ç ã€‚</li><li>åœ¨webpackä¸­Tree-shakingæ˜¯é€šè¿‡uglifySPluginæ¥Tree-shaking JS</li><li>csséœ€è¦ä½¿ç”¨Purify-CSSã€‚</li></ol><h2 id="Webpack5å’ŒWebpack4çš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿ">Webpack5å’ŒWebpack4çš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿ</h2><p><strong>1. Tree Shaking(å¼ºå¤§)</strong></p><p>å¦‚æœæˆ‘ä»¬çš„é¡¹ç›®ä¸­å¼•å…¥äº†loader åŒ…ï¼Œä½†æ˜¯æˆ‘åªç”¨äº†å…¶ä¸­çš„ä¸€ä¸ªæ–¹æ³•ã€‚å…¶ä»–æ²¡æœ‰ç”¨åˆ°çš„æ–¹æ³•æ˜¯ä¸æ˜¯å†—ä½™çš„ï¼Ÿæ­¤æ—¶ tree-shaking å°±å¯ä»¥æŠŠæ²¡æœ‰ç”¨çš„é‚£äº›ä¸œè¥¿å‰”é™¤æ‰ï¼Œæ¥å¤§å¤§å‡å°‘æœ€ç»ˆçš„bundleä½“ç§¯ã€‚</p><p><strong>2. å‹ç¼©ä»£ç </strong></p><p>å†…éƒ¨æœ¬èº«å°±è‡ªå¸¦ js å‹ç¼©åŠŸèƒ½ï¼Œä»–å†…ç½®äº† terser-webpack-plugin æ’ä»¶ï¼Œæˆ‘ä»¬ä¸ç”¨å†ä¸‹è½½å®‰è£…ã€‚</p><p>è€Œä¸”åœ¨ mode=â€œproductionâ€ çš„æ—¶å€™ä¼šè‡ªåŠ¨å¼€å¯ js å‹ç¼©åŠŸèƒ½ã€‚</p><p><strong>3. ç¼“å­˜é…ç½®</strong></p><p>webpack5 å†…éƒ¨å†…ç½®äº† cache ç¼“å­˜æœºåˆ¶ã€‚ç›´æ¥é…ç½®å³å¯ã€‚</p><p>cache ä¼šåœ¨å¼€å‘æ¨¡å¼ä¸‹è¢«è®¾ç½®æˆ <code>type: memory</code> ï¼Œè€Œä¸”ä¼šåœ¨ç”Ÿäº§æ¨¡å¼æŠŠcache ç»™ç¦ç”¨æ‰ã€‚</p><p><strong>4. å¯åŠ¨æœåŠ¡çš„å·®åˆ«</strong></p><ol><li><strong>webpack4 å¯åŠ¨æœåŠ¡</strong>: é€šè¿‡ webpack-dev-server å¯åŠ¨æœåŠ¡</li><li><strong>webpack5 å¯åŠ¨æœåŠ¡</strong>: å†…ç½®ä½¿ç”¨ webpack serve å¯åŠ¨ï¼Œä½†æ˜¯ä»–çš„æ—¥å¿—ä¸æ˜¯å¾ˆå¥½ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½åŠ éƒ½å–œæ¬¢ç”¨ webpack-dev-server ä¼˜åŒ–ã€‚</li></ol><p><strong>5. æ‰“åŒ…</strong></p><ul><li>webpack4æ‰“åŒ…: å³ä½¿åç»­æ²¡æœ‰ä½¿ç”¨åˆ°num1çš„å‡½æ•°ï¼Œä¾ç„¶ä¼šå°†ä»£ç æ‰“åŒ…è¿›å»</li><li>webpack5æ‰“åŒ…: åç»­æ²¡æœ‰ä½¿ç”¨åˆ°num1çš„å‡½æ•°ï¼Œä¸ä¼šå°†ä»£ç æ‰“åŒ…è¿›å»</li></ul><p><strong>6. è¾“å‡ºä»£ç </strong></p><ul><li>webpack4åªèƒ½è¾“å‡ºes5çš„ä»£ç </li><li>webpack5æ–°å¢å±æ€§output.ecmaVersionï¼Œå¯ä»¥ç”ŸæˆES5å’ŒES6çš„ä»£ç </li></ul><p><strong>7. splitChunk</strong></p><p>webpack4 å°†è¶…è¿‡30kbçš„æ–‡ä»¶å•ç‹¬æä¸ºä¸€ä¸ªchunk</p><p>webpack5å¯ä»¥åŒºåˆ†æ˜¯jsè¿˜æ˜¯cssï¼Œå¯ä»¥ç²¾ç¡®åˆ’åˆ†</p><hr><blockquote><p>æœ¬ç¯‡ç¬”è®°å‚è€ƒ<a href="https://juejin.cn/post/7140769906080874504">ç¨€åœŸæ˜é‡‘ä½•é€¸è½©</a>ã€<a href="https://juejin.cn/post/7072174385225793567">ä¸€æ”¯é±¼</a>ï¼Œä»…ä¾›åšä¸»å­¦ä¹ ä½¿ç”¨ã€‚</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;é¢è¯•å®˜çµé­‚ä¸‰è¿é—®&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;ä½ ç”¨è¿‡webpackä¹ˆï¼Œå®ƒçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/li&gt;
&lt;li&gt;ä½ è¿˜çŸ¥é“äº›æ„å»ºå·¥å…·ï¼Œå„æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ&lt;/li&gt;
&lt;li&gt;ä½ åœ¨é¡¹ç›®ä¸­æœ‰é…ç½®è¿‡ä¹ˆï¼Œåœ¨å“ªäº›åœºæ™¯é…ç½®è¿‡ï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;
&lt;h1&gt;Webpackä»‹ç»&lt;/h1&gt;
&lt;h2 </summary>
      
    
    
    
    <category term="é¢è¯•å®å…¸âœ¨" scheme="https://blog.cilicili.xyz/categories/%E9%9D%A2%E8%AF%95%E5%AE%9D%E5%85%B8%E2%9C%A8/"/>
    
    
    <category term="Webpack" scheme="https://blog.cilicili.xyz/tags/Webpack/"/>
    
  </entry>
  
  <entry>
    <title>ã€å‰ç«¯ã€‘Webpack5å…¥é—¨åˆ°åŸç†</title>
    <link href="https://blog.cilicili.xyz/posts/638e1b31.html"/>
    <id>https://blog.cilicili.xyz/posts/638e1b31.html</id>
    <published>2022-09-08T10:56:50.000Z</published>
    <updated>2022-09-09T09:35:41.749Z</updated>
    
    <content type="html"><![CDATA[<h1>åŸºæœ¬ä½¿ç”¨</h1><p><strong><code>Webpack</code> æ˜¯ä¸€ä¸ªé™æ€èµ„æºæ‰“åŒ…å·¥å…·ã€‚</strong></p><p>å®ƒä¼šä»¥ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ä½œä¸ºæ‰“åŒ…çš„å…¥å£ï¼Œå°†æˆ‘ä»¬æ•´ä¸ªé¡¹ç›®æ‰€æœ‰æ–‡ä»¶ç¼–è¯‘ç»„åˆæˆä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶è¾“å‡ºå‡ºå»ã€‚</p><p>è¾“å‡ºçš„æ–‡ä»¶å°±æ˜¯ç¼–è¯‘å¥½çš„æ–‡ä»¶ï¼Œå°±å¯ä»¥åœ¨æµè§ˆå™¨æ®µè¿è¡Œäº†ã€‚</p><p>æˆ‘ä»¬å°† <code>Webpack</code> è¾“å‡ºçš„æ–‡ä»¶å«åš <code>bundle</code>ã€‚</p><h2 id="åŠŸèƒ½ä»‹ç»">åŠŸèƒ½ä»‹ç»</h2><p>Webpack æœ¬èº«åŠŸèƒ½æ˜¯æœ‰é™çš„:</p><ul><li>å¼€å‘æ¨¡å¼ï¼šä»…èƒ½ç¼–è¯‘ JS ä¸­çš„ <code>ES Module</code> è¯­æ³•</li><li>ç”Ÿäº§æ¨¡å¼ï¼šèƒ½ç¼–è¯‘ JS ä¸­çš„ <code>ES Module</code> è¯­æ³•ï¼Œè¿˜èƒ½å‹ç¼© JS ä»£ç </li></ul><h2 id="å¼€å§‹ä½¿ç”¨">å¼€å§‹ä½¿ç”¨</h2><h3 id="èµ„æºç›®å½•">èµ„æºç›®å½•</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">webpack_code # é¡¹ç›®æ ¹ç›®å½•ï¼ˆæ‰€æœ‰æŒ‡ä»¤å¿…é¡»åœ¨è¿™ä¸ªç›®å½•è¿è¡Œï¼‰</span><br><span class="line">    â””â”€â”€ src # é¡¹ç›®æºç ç›®å½•</span><br><span class="line">        â”œâ”€â”€ js # jsæ–‡ä»¶ç›®å½•</span><br><span class="line">        â”‚   â”œâ”€â”€ count.js</span><br><span class="line">        â”‚   â””â”€â”€ sum.js</span><br><span class="line">        â””â”€â”€ main.js # é¡¹ç›®ä¸»æ–‡ä»¶</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºæ–‡ä»¶">åˆ›å»ºæ–‡ä»¶</h3><ul><li>count.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">count</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x - y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>sum.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> args.<span class="title function_">reduce</span>(<span class="function">(<span class="params">p, c</span>) =&gt;</span> p + c, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>main.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> count <span class="keyword">from</span> <span class="string">&quot;./js/count&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> sum <span class="keyword">from</span> <span class="string">&quot;./js/sum&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">count</span>(<span class="number">2</span>, <span class="number">1</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>));</span><br></pre></td></tr></table></figure><h3 id="ä¸‹è½½ä¾èµ–">ä¸‹è½½ä¾èµ–</h3><p>æ‰“å¼€ç»ˆç«¯ï¼Œæ¥åˆ°é¡¹ç›®æ ¹ç›®å½•ã€‚è¿è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š</p><ul><li>åˆå§‹åŒ–<code>package.json</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ä¼šç”Ÿæˆä¸€ä¸ªåŸºç¡€çš„ <code>package.json</code> æ–‡ä»¶ã€‚</p><p><strong>éœ€è¦æ³¨æ„çš„æ˜¯ <code>package.json</code> ä¸­ <code>name</code> å­—æ®µä¸èƒ½å«åš <code>webpack</code>, å¦åˆ™ä¸‹ä¸€æ­¥ä¼šæŠ¥é”™</strong></p><ul><li>ä¸‹è½½ä¾èµ–</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack webpack-cli -D</span><br></pre></td></tr></table></figure><h3 id="å¯ç”¨-Webpack">å¯ç”¨ Webpack</h3><ul><li>å¼€å‘æ¨¡å¼</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack ./src/main.js --mode=development</span><br></pre></td></tr></table></figure><ul><li>ç”Ÿäº§æ¨¡å¼</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack ./src/main.js --mode=production</span><br></pre></td></tr></table></figure><p><code>npx webpack</code>: æ˜¯ç”¨æ¥è¿è¡Œæœ¬åœ°å®‰è£… <code>Webpack</code> åŒ…çš„ã€‚</p><p><code>./src/main.js</code>: æŒ‡å®š <code>Webpack</code> ä» <code>main.js</code> æ–‡ä»¶å¼€å§‹æ‰“åŒ…ï¼Œä¸ä½†ä¼šæ‰“åŒ… <code>main.js</code>ï¼Œè¿˜ä¼šå°†å…¶ä¾èµ–ä¹Ÿä¸€èµ·æ‰“åŒ…è¿›æ¥ã€‚</p><p><code>--mode=xxx</code>ï¼šæŒ‡å®šæ¨¡å¼ï¼ˆç¯å¢ƒï¼‰ã€‚</p><h3 id="è§‚å¯Ÿè¾“å‡ºæ–‡ä»¶">è§‚å¯Ÿè¾“å‡ºæ–‡ä»¶</h3><p>é»˜è®¤ <code>Webpack</code> ä¼šå°†æ–‡ä»¶æ‰“åŒ…è¾“å‡ºåˆ° <code>dist</code> ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬æŸ¥çœ‹ <code>dist</code> ç›®å½•ä¸‹æ–‡ä»¶æƒ…å†µå°±å¥½äº†</p><h2 id="å°ç»“">å°ç»“</h2><p><code>Webpack</code> æœ¬èº«åŠŸèƒ½æ¯”è¾ƒå°‘ï¼Œåªèƒ½å¤„ç† <code>js</code> èµ„æºï¼Œä¸€æ—¦é‡åˆ° <code>css</code> ç­‰å…¶ä»–èµ„æºå°±ä¼šæŠ¥é”™ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬å­¦ä¹  <code>Webpack</code>ï¼Œå°±æ˜¯ä¸»è¦å­¦ä¹ å¦‚ä½•å¤„ç†å…¶ä»–èµ„æºã€‚</p><h1>åŸºæœ¬é…ç½®</h1><p>åœ¨å¼€å§‹ä½¿ç”¨ <code>Webpack</code> ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ <code>Webpack</code> çš„é…ç½®æœ‰ä¸€å®šçš„è®¤è¯†ã€‚</p><h2 id="5-å¤§æ ¸å¿ƒæ¦‚å¿µ">5 å¤§æ ¸å¿ƒæ¦‚å¿µ</h2><ol><li><p><strong>entryï¼ˆå…¥å£ï¼‰</strong></p><p>æŒ‡ç¤º Webpack ä»å“ªä¸ªæ–‡ä»¶å¼€å§‹æ‰“åŒ…</p></li><li><p><strong>outputï¼ˆè¾“å‡ºï¼‰</strong></p><p>æŒ‡ç¤º Webpack æ‰“åŒ…å®Œçš„æ–‡ä»¶è¾“å‡ºåˆ°å“ªé‡Œå»ï¼Œå¦‚ä½•å‘½åç­‰</p></li><li><p><strong>loaderï¼ˆåŠ è½½å™¨ï¼‰</strong></p><p>webpack æœ¬èº«åªèƒ½å¤„ç† jsã€json ç­‰èµ„æºï¼Œå…¶ä»–èµ„æºéœ€è¦å€ŸåŠ© loaderï¼ŒWebpack æ‰èƒ½è§£æ</p></li><li><p><strong>pluginsï¼ˆæ’ä»¶ï¼‰</strong></p><p>æ‰©å±• Webpack çš„åŠŸèƒ½</p></li><li><p><strong>modeï¼ˆæ¨¡å¼ï¼‰</strong></p><p>ä¸»è¦ç”±ä¸¤ç§æ¨¡å¼ï¼š</p><ul><li><strong>å¼€å‘æ¨¡å¼ï¼šdevelopment</strong></li><li><strong>ç”Ÿäº§æ¨¡å¼ï¼šproduction</strong></li></ul></li></ol><h2 id="å‡†å¤‡-Webpack-é…ç½®æ–‡ä»¶">å‡†å¤‡ Webpack é…ç½®æ–‡ä»¶</h2><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶ï¼š<code>webpack.config.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// å…¥å£</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="comment">// è¾“å‡º</span></span><br><span class="line">  <span class="attr">output</span>: &#123;&#125;,</span><br><span class="line">  <span class="comment">// åŠ è½½å™¨</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// æ’ä»¶</span></span><br><span class="line">  <span class="attr">plugins</span>: [],</span><br><span class="line">  <span class="comment">// æ¨¡å¼</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>Webpack æ˜¯åŸºäº Node.js è¿è¡Œçš„ï¼Œæ‰€ä»¥é‡‡ç”¨ Common.js æ¨¡å—åŒ–è§„èŒƒ</p><h2 id="ä¿®æ”¹é…ç½®æ–‡ä»¶">ä¿®æ”¹é…ç½®æ–‡ä»¶</h2><ol><li>é…ç½®æ–‡ä»¶</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Node.jsçš„æ ¸å¿ƒæ¨¡å—ï¼Œä¸“é—¨ç”¨æ¥å¤„ç†æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// å…¥å£</span></span><br><span class="line">  <span class="comment">// ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„éƒ½è¡Œ</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="comment">// è¾“å‡º</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="comment">// path: æ–‡ä»¶è¾“å‡ºç›®å½•ï¼Œå¿…é¡»æ˜¯ç»å¯¹è·¯å¾„</span></span><br><span class="line">    <span class="comment">// path.resolve()æ–¹æ³•è¿”å›ä¸€ä¸ªç»å¯¹è·¯å¾„</span></span><br><span class="line">    <span class="comment">// __dirname å½“å‰æ–‡ä»¶çš„æ–‡ä»¶å¤¹ç»å¯¹è·¯å¾„</span></span><br><span class="line">    <span class="comment">// &quot;dist&quot;è¾“å‡ºç›®å½•</span></span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;dist&quot;</span>),</span><br><span class="line">    <span class="comment">// filename: è¾“å‡ºæ–‡ä»¶å</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;main.js&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// åŠ è½½å™¨</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">        <span class="comment">// loaderçš„é…ç½®</span></span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// æ’ä»¶</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">     <span class="comment">// pluginçš„é…ç½®</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// æ¨¡å¼</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>, <span class="comment">// å¼€å‘æ¨¡å¼</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="2"><li>è¿è¡ŒæŒ‡ä»¤</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶åŠŸèƒ½å’Œä¹‹å‰ä¸€æ ·ï¼Œä¹Ÿä¸èƒ½å¤„ç†æ ·å¼èµ„æº</p><h2 id="å°ç»“-v2">å°ç»“</h2><p>Webpack å°†æ¥éƒ½é€šè¿‡ <code>webpack.config.js</code> æ–‡ä»¶è¿›è¡Œé…ç½®ï¼Œæ¥å¢å¼º Webpack çš„åŠŸèƒ½</p><p>æˆ‘ä»¬åé¢ä¼šä»¥ä¸¤ä¸ªæ¨¡å¼æ¥åˆ†åˆ«æ­å»º Webpack çš„é…ç½®ï¼Œå…ˆè¿›è¡Œå¼€å‘æ¨¡å¼ï¼Œå†å®Œæˆç”Ÿäº§æ¨¡å¼</p><h1>å¼€å‘æ¨¡å¼ä»‹ç»</h1><p>å¼€å‘æ¨¡å¼é¡¾åæ€ä¹‰å°±æ˜¯æˆ‘ä»¬å¼€å‘ä»£ç æ—¶ä½¿ç”¨çš„æ¨¡å¼ã€‚</p><p>è¿™ä¸ªæ¨¡å¼ä¸‹æˆ‘ä»¬ä¸»è¦åšä¸¤ä»¶äº‹ï¼š</p><ol><li><p>ç¼–è¯‘ä»£ç ï¼Œä½¿æµè§ˆå™¨èƒ½è¯†åˆ«è¿è¡Œ</p><p>å¼€å‘æ—¶æˆ‘ä»¬æœ‰æ ·å¼èµ„æºã€å­—ä½“å›¾æ ‡ã€å›¾ç‰‡èµ„æºã€html èµ„æºç­‰ï¼Œwebpack é»˜è®¤éƒ½ä¸èƒ½å¤„ç†è¿™äº›èµ„æºï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åŠ è½½é…ç½®æ¥ç¼–è¯‘è¿™äº›èµ„æº</p></li><li><p>ä»£ç è´¨é‡æ£€æŸ¥ï¼Œæ ‘ç«‹ä»£ç è§„èŒƒ</p><p>æå‰æ£€æŸ¥ä»£ç çš„ä¸€äº›éšæ‚£ï¼Œè®©ä»£ç è¿è¡Œæ—¶èƒ½æ›´åŠ å¥å£®ã€‚</p><p>æå‰æ£€æŸ¥ä»£ç è§„èŒƒå’Œæ ¼å¼ï¼Œç»Ÿä¸€å›¢é˜Ÿç¼–ç é£æ ¼ï¼Œè®©ä»£ç æ›´ä¼˜é›…ç¾è§‚ã€‚</p></li></ol><h1>å¤„ç†æ ·å¼èµ„æº</h1><p>æœ¬ç« èŠ‚æˆ‘ä»¬å­¦ä¹ ä½¿ç”¨ Webpack å¦‚ä½•å¤„ç† Cssã€Lessã€Sassã€Scssã€Styl æ ·å¼èµ„æº</p><h2 id="ä»‹ç»">ä»‹ç»</h2><p>Webpack æœ¬èº«æ˜¯ä¸èƒ½è¯†åˆ«æ ·å¼èµ„æºçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å€ŸåŠ© Loader æ¥å¸®åŠ© Webpack è§£ææ ·å¼èµ„æº</p><p>æˆ‘ä»¬æ‰¾ Loader éƒ½åº”è¯¥å»å®˜æ–¹æ–‡æ¡£ä¸­æ‰¾åˆ°å¯¹åº”çš„ Loaderï¼Œç„¶åä½¿ç”¨</p><p>å®˜æ–¹æ–‡æ¡£æ‰¾ä¸åˆ°çš„è¯ï¼Œå¯ä»¥ä»ç¤¾åŒº Github ä¸­æœç´¢æŸ¥è¯¢</p><p><a href="https://webpack.docschina.org/loaders/">Webpack å®˜æ–¹ Loader æ–‡æ¡£</a></p><h2 id="å¤„ç†-Css-èµ„æº">å¤„ç† Css èµ„æº</h2><h3 id="ä¸‹è½½åŒ…">ä¸‹è½½åŒ…</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i css-loader style-loader -D</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šéœ€è¦ä¸‹è½½ä¸¤ä¸ª loader</p><h3 id="åŠŸèƒ½ä»‹ç»-v2">åŠŸèƒ½ä»‹ç»</h3><ul><li><code>css-loader</code>ï¼šè´Ÿè´£å°† Css æ–‡ä»¶ç¼–è¯‘æˆ Webpack èƒ½è¯†åˆ«çš„æ¨¡å—</li><li><code>style-loader</code>ï¼šä¼šåŠ¨æ€åˆ›å»ºä¸€ä¸ª Style æ ‡ç­¾ï¼Œé‡Œé¢æ”¾ç½® Webpack ä¸­ Css æ¨¡å—å†…å®¹</li></ul><p>æ­¤æ—¶æ ·å¼å°±ä¼šä»¥ Style æ ‡ç­¾çš„å½¢å¼åœ¨é¡µé¢ä¸Šç”Ÿæ•ˆ</p><h3 id="é…ç½®">é…ç½®</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;dist&quot;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;main.js&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶ï¼Œ\æ˜¯è½¬ä¹‰ç¬¦</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦,ä»ä¸‹åˆ°ä¸Š</span></span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">            <span class="string">&quot;style-loader&quot;</span>,<span class="comment">// å°†jsä¸­cssé€šè¿‡åˆ›å»ºstyleæ ‡ç­¾æ·»åŠ htmlæ–‡ä»¶ä¸­ç”Ÿæ•ˆ</span></span><br><span class="line">            <span class="string">&quot;css-loader&quot;</span>, <span class="comment">// å°†cssèµ„æºç¼–è¯‘æˆcommonjsçš„æ¨¡å—åˆ°jsä¸­</span></span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [],</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ -Css-èµ„æº">æ·»åŠ  Css èµ„æº</h3><ul><li>src/css/index.css</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box1</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: pink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>src/main.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> count <span class="keyword">from</span> <span class="string">&quot;./js/count&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> sum <span class="keyword">from</span> <span class="string">&quot;./js/sum&quot;</span>;</span><br><span class="line"><span class="comment">// å¼•å…¥ Css èµ„æºï¼ŒWebpackæ‰ä¼šå¯¹å…¶æ‰“åŒ…</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./css/index.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">count</span>(<span class="number">2</span>, <span class="number">1</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>));</span><br></pre></td></tr></table></figure><ul><li>public/index.html</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>webpack5<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello Webpack5<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å‡†å¤‡ä¸€ä¸ªä½¿ç”¨æ ·å¼çš„ DOM å®¹å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥æ‰“åŒ…åçš„jsæ–‡ä»¶ï¼Œæ‰èƒ½çœ‹åˆ°æ•ˆæœ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../dist/main.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="è¿è¡ŒæŒ‡ä»¤">è¿è¡ŒæŒ‡ä»¤</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack</span><br></pre></td></tr></table></figure><p>æ‰“å¼€ index.html é¡µé¢æŸ¥çœ‹æ•ˆæœ</p><h2 id="å¤„ç†-Less-èµ„æº">å¤„ç† Less èµ„æº</h2><h3 id="ä¸‹è½½åŒ…-v2">ä¸‹è½½åŒ…</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i less-loader -D</span><br></pre></td></tr></table></figure><h3 id="åŠŸèƒ½ä»‹ç»-v3">åŠŸèƒ½ä»‹ç»</h3><ul><li><code>less-loader</code>ï¼šè´Ÿè´£å°† Less æ–‡ä»¶ç¼–è¯‘æˆ Css æ–‡ä»¶</li></ul><h3 id="é…ç½®-v2">é…ç½®</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;dist&quot;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;main.js&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;less-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [],</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ -Less-èµ„æº">æ·»åŠ  Less èµ„æº</h3><ul><li>src/less/index.less</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: deeppink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>src/main.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> count <span class="keyword">from</span> <span class="string">&quot;./js/count&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> sum <span class="keyword">from</span> <span class="string">&quot;./js/sum&quot;</span>;</span><br><span class="line"><span class="comment">// å¼•å…¥èµ„æºï¼ŒWebpackæ‰ä¼šå¯¹å…¶æ‰“åŒ…</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./css/index.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./less/index.less&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">count</span>(<span class="number">2</span>, <span class="number">1</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>));</span><br></pre></td></tr></table></figure><ul><li>public/index.html</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>webpack5<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello Webpack5<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../dist/main.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="è¿è¡ŒæŒ‡ä»¤-v2">è¿è¡ŒæŒ‡ä»¤</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack</span><br></pre></td></tr></table></figure><p>æ‰“å¼€ index.html é¡µé¢æŸ¥çœ‹æ•ˆæœ</p><h2 id="å¤„ç†-Sass-å’Œ-Scss-èµ„æº">å¤„ç† Sass å’Œ Scss èµ„æº</h2><h3 id="ä¸‹è½½åŒ…-v3">ä¸‹è½½åŒ…</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i sass-loader sass -D</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šéœ€è¦ä¸‹è½½ä¸¤ä¸ª</p><h3 id="åŠŸèƒ½ä»‹ç»-v4">åŠŸèƒ½ä»‹ç»</h3><ul><li><code>sass-loader</code>ï¼šè´Ÿè´£å°† Sass æ–‡ä»¶ç¼–è¯‘æˆ css æ–‡ä»¶</li><li><code>sass</code>ï¼š<code>sass-loader</code> ä¾èµ– <code>sass</code> è¿›è¡Œç¼–è¯‘</li></ul><h3 id="é…ç½®-v3">é…ç½®</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;dist&quot;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;main.js&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;less-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;sass-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [],</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ -Sass-èµ„æº">æ·»åŠ  Sass èµ„æº</h3><ul><li>src/sass/index.sass</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å¯ä»¥çœç•¥å¤§æ‹¬å·å’Œåˆ†å· */</span></span><br><span class="line"><span class="selector-class">.box3</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span></span><br><span class="line">  height: <span class="number">100px</span></span><br><span class="line">  background-color: hotpink</span><br></pre></td></tr></table></figure><ul><li>src/sass/index.scss</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box4</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightpink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>src/main.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> count <span class="keyword">from</span> <span class="string">&quot;./js/count&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> sum <span class="keyword">from</span> <span class="string">&quot;./js/sum&quot;</span>;</span><br><span class="line"><span class="comment">// å¼•å…¥èµ„æºï¼ŒWebpackæ‰ä¼šå¯¹å…¶æ‰“åŒ…</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./css/index.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./less/index.less&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./sass/index.sass&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./sass/index.scss&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">count</span>(<span class="number">2</span>, <span class="number">1</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>));</span><br></pre></td></tr></table></figure><ul><li>public/index.html</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>webpack5<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello Webpack5<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box4&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../dist/main.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="è¿è¡ŒæŒ‡ä»¤-v3">è¿è¡ŒæŒ‡ä»¤</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack</span><br></pre></td></tr></table></figure><p>æ‰“å¼€ index.html é¡µé¢æŸ¥çœ‹æ•ˆæœ</p><h2 id="å¤„ç†-Styl-èµ„æº">å¤„ç† Styl èµ„æº</h2><h3 id="ä¸‹è½½åŒ…-v4">ä¸‹è½½åŒ…</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i stylus-loader -D</span><br></pre></td></tr></table></figure><h3 id="åŠŸèƒ½ä»‹ç»-v5">åŠŸèƒ½ä»‹ç»</h3><ul><li><code>stylus-loader</code>ï¼šè´Ÿè´£å°† Styl æ–‡ä»¶ç¼–è¯‘æˆ Css æ–‡ä»¶</li></ul><h3 id="é…ç½®-v4">é…ç½®</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;dist&quot;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;main.js&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;less-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;sass-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;stylus-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [],</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ -Styl-èµ„æº">æ·»åŠ  Styl èµ„æº</h3><ul><li>src/styl/index.styl</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å¯ä»¥çœç•¥å¤§æ‹¬å·ã€åˆ†å·ã€å†’å· */</span></span><br><span class="line"><span class="selector-class">.box</span> </span><br><span class="line">  <span class="attribute">width</span> <span class="number">100px</span> </span><br><span class="line">  <span class="attribute">height</span> <span class="number">100px</span> </span><br><span class="line">  <span class="attribute">background-color</span> pink</span><br></pre></td></tr></table></figure><ul><li>src/main.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; add &#125; <span class="keyword">from</span> <span class="string">&quot;./math&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> count <span class="keyword">from</span> <span class="string">&quot;./js/count&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> sum <span class="keyword">from</span> <span class="string">&quot;./js/sum&quot;</span>;</span><br><span class="line"><span class="comment">// å¼•å…¥èµ„æºï¼ŒWebpackæ‰ä¼šå¯¹å…¶æ‰“åŒ…</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./css/index.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./less/index.less&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./sass/index.sass&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./sass/index.scss&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./styl/index.styl&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">count</span>(<span class="number">2</span>, <span class="number">1</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>));</span><br></pre></td></tr></table></figure><ul><li>public/index.html</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>webpack5<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello Webpack5<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å‡†å¤‡ä¸€ä¸ªä½¿ç”¨æ ·å¼çš„ DOM å®¹å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box4&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box5&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../dist/main.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="è¿è¡ŒæŒ‡ä»¤-v4">è¿è¡ŒæŒ‡ä»¤</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack</span><br></pre></td></tr></table></figure><p>æ‰“å¼€ index.html é¡µé¢æŸ¥çœ‹æ•ˆæœ</p><h1>å¤„ç†å›¾ç‰‡èµ„æº</h1><p>è¿‡å»åœ¨ Webpack4 æ—¶ï¼Œæˆ‘ä»¬å¤„ç†å›¾ç‰‡èµ„æºé€šè¿‡ <code>file-loader</code> å’Œ <code>url-loader</code> è¿›è¡Œå¤„ç†</p><p>ç°åœ¨ Webpack5 å·²ç»å°†ä¸¤ä¸ª Loader åŠŸèƒ½å†…ç½®åˆ° Webpack é‡Œäº†ï¼Œæˆ‘ä»¬åªéœ€è¦ç®€å•é…ç½®å³å¯å¤„ç†å›¾ç‰‡èµ„æº</p><h2 id="é…ç½®-v5">é…ç½®</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;dist&quot;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;main.js&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;less-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;sass-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;stylus-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [],</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="æ·»åŠ å›¾ç‰‡èµ„æº">æ·»åŠ å›¾ç‰‡èµ„æº</h2><ul><li>src/images/1.jpeg</li><li>src/images/2.png</li><li>src/images/3.gif</li></ul><h2 id="ä½¿ç”¨å›¾ç‰‡èµ„æº">ä½¿ç”¨å›¾ç‰‡èµ„æº</h2><ul><li>src/less/index.less</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;../images/1.jpeg&quot;</span>);</span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>src/sass/index.sass</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box3</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span></span><br><span class="line">  height: <span class="number">100px</span></span><br><span class="line">  background-image: <span class="built_in">url</span>(<span class="string">&quot;../images/2.png&quot;</span>)</span><br><span class="line">  background-size: cover</span><br></pre></td></tr></table></figure><ul><li>src/styl/index.styl</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box5</span></span><br><span class="line">  <span class="attribute">width</span> <span class="number">100px</span></span><br><span class="line">  <span class="attribute">height</span> <span class="number">100px</span></span><br><span class="line">  <span class="attribute">background-image</span> url(&quot;../images/<span class="number">3</span><span class="selector-class">.gif</span>&quot;)</span><br><span class="line">  <span class="attribute">background-size</span> cover</span><br></pre></td></tr></table></figure><h2 id="è¿è¡ŒæŒ‡ä»¤-v5">è¿è¡ŒæŒ‡ä»¤</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack</span><br></pre></td></tr></table></figure><p>æ‰“å¼€ index.html é¡µé¢æŸ¥çœ‹æ•ˆæœ</p><h2 id="è¾“å‡ºèµ„æºæƒ…å†µ">è¾“å‡ºèµ„æºæƒ…å†µ</h2><p>æ­¤æ—¶å¦‚æœæŸ¥çœ‹ dist ç›®å½•çš„è¯ï¼Œä¼šå‘ç°å¤šäº†ä¸‰å¼ å›¾ç‰‡èµ„æº</p><p>å› ä¸º Webpack ä¼šå°†æ‰€æœ‰æ‰“åŒ…å¥½çš„èµ„æºè¾“å‡ºåˆ° dist ç›®å½•ä¸‹</p><ul><li>ä¸ºä»€ä¹ˆæ ·å¼èµ„æºæ²¡æœ‰å‘¢ï¼Ÿ</li></ul><p>å› ä¸ºç»è¿‡ <code>style-loader</code> çš„å¤„ç†ï¼Œæ ·å¼èµ„æºæ‰“åŒ…åˆ° main.js é‡Œé¢å»äº†ï¼Œæ‰€ä»¥æ²¡æœ‰é¢å¤–è¾“å‡ºå‡ºæ¥</p><h2 id="å¯¹å›¾ç‰‡èµ„æºè¿›è¡Œä¼˜åŒ–">å¯¹å›¾ç‰‡èµ„æºè¿›è¡Œä¼˜åŒ–</h2><p>å°†å°äºæŸä¸ªå¤§å°çš„å›¾ç‰‡è½¬åŒ–æˆ data URI å½¢å¼ï¼ˆBase64 æ ¼å¼ï¼‰</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;dist&quot;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;main.js&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;less-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;sass-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;stylus-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span> <span class="comment">// å°äº10kbçš„å›¾ç‰‡ä¼šè¢«base64å¤„ç†</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [],</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>ä¼˜ç‚¹ï¼šå‡å°‘è¯·æ±‚æ•°é‡</li><li>ç¼ºç‚¹ï¼šä½“ç§¯å˜å¾—æ›´å¤§</li></ul><p>æ­¤æ—¶è¾“å‡ºçš„å›¾ç‰‡æ–‡ä»¶å°±åªæœ‰ä¸¤å¼ ï¼Œæœ‰ä¸€å¼ å›¾ç‰‡ä»¥ data URI å½¢å¼å†…ç½®åˆ° js ä¸­äº† ï¼ˆæ³¨æ„ï¼šéœ€è¦å°†ä¸Šæ¬¡æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶æ¸…ç©ºï¼Œå†é‡æ–°æ‰“åŒ…æ‰æœ‰æ•ˆæœï¼‰</p><h1>ä¿®æ”¹è¾“å‡ºèµ„æºçš„åç§°å’Œè·¯å¾„</h1><h2 id="é…ç½®-v6">é…ç½®</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;dist&quot;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/main.js&quot;</span>, <span class="comment">// å°† js æ–‡ä»¶è¾“å‡ºåˆ° static/js ç›®å½•ä¸­</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;less-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;sass-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;stylus-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span>, <span class="comment">// å°äº10kbçš„å›¾ç‰‡ä¼šè¢«base64å¤„ç†</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ° static/imgs ç›®å½•ä¸­</span></span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶å‘½å [hash:8][ext][query]</span></span><br><span class="line">          <span class="comment">// [hash:8]: hashå€¼å–8ä½</span></span><br><span class="line">          <span class="comment">// [ext]: ä½¿ç”¨ä¹‹å‰çš„æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">          <span class="comment">// [query]: æ·»åŠ ä¹‹å‰çš„queryå‚æ•°</span></span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/imgs/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [],</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹-index-html">ä¿®æ”¹ index.html</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>webpack5<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello Webpack5<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box4&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box5&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä¿®æ”¹ js èµ„æºè·¯å¾„ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../dist/static/js/main.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="è¿è¡ŒæŒ‡ä»¤-v6">è¿è¡ŒæŒ‡ä»¤</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack</span><br></pre></td></tr></table></figure><ul><li>æ­¤æ—¶è¾“å‡ºæ–‡ä»¶ç›®å½•ï¼š</li></ul><p>ï¼ˆæ³¨æ„ï¼šéœ€è¦å°†ä¸Šæ¬¡æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶æ¸…ç©ºï¼Œå†é‡æ–°æ‰“åŒ…æ‰æœ‰æ•ˆæœï¼‰</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ dist</span><br><span class="line">    â””â”€â”€ static</span><br><span class="line">         â”œâ”€â”€ imgs</span><br><span class="line">         â”‚    â””â”€â”€ 7003350e.png</span><br><span class="line">         â””â”€â”€ js</span><br><span class="line">              â””â”€â”€ main.js</span><br></pre></td></tr></table></figure><h1>è‡ªåŠ¨æ¸…ç©ºä¸Šæ¬¡æ‰“åŒ…èµ„æº</h1><h2 id="é…ç½®-v7">é…ç½®</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;dist&quot;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/main.js&quot;</span>,</span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>, <span class="comment">// è‡ªåŠ¨å°†ä¸Šæ¬¡æ‰“åŒ…ç›®å½•èµ„æºæ¸…ç©º</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;less-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;sass-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;stylus-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">40</span> * <span class="number">1024</span>, <span class="comment">// å°äº40kbçš„å›¾ç‰‡ä¼šè¢«base64å¤„ç†</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ° static/imgs ç›®å½•ä¸­</span></span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶å‘½å [hash:8][ext][query]</span></span><br><span class="line">          <span class="comment">// [hash:8]: hashå€¼å–8ä½</span></span><br><span class="line">          <span class="comment">// [ext]: ä½¿ç”¨ä¹‹å‰çš„æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">          <span class="comment">// [query]: æ·»åŠ ä¹‹å‰çš„queryå‚æ•°</span></span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/imgs/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [],</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="è¿è¡ŒæŒ‡ä»¤-v7">è¿è¡ŒæŒ‡ä»¤</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack</span><br></pre></td></tr></table></figure><p>è§‚å¯Ÿ dist ç›®å½•èµ„æºæƒ…å†µ</p><h1>å¤„ç†å­—ä½“å›¾æ ‡èµ„æº</h1><h2 id="ä¸‹è½½å­—ä½“å›¾æ ‡æ–‡ä»¶">ä¸‹è½½å­—ä½“å›¾æ ‡æ–‡ä»¶</h2><ol><li>æ‰“å¼€<a href="https://www.iconfont.cn/">é˜¿é‡Œå·´å·´çŸ¢é‡å›¾æ ‡åº“</a></li><li>é€‰æ‹©æƒ³è¦çš„å›¾æ ‡æ·»åŠ åˆ°è´­ç‰©è½¦ï¼Œç»Ÿä¸€ä¸‹è½½åˆ°æœ¬åœ°</li></ol><h2 id="æ·»åŠ å­—ä½“å›¾æ ‡èµ„æº">æ·»åŠ å­—ä½“å›¾æ ‡èµ„æº</h2><ul><li>src/fonts/iconfont.ttf</li><li>src/fonts/iconfont.woff</li><li>src/fonts/iconfont.woff2</li><li>src/css/iconfont.css<ul><li>æ³¨æ„å­—ä½“æ–‡ä»¶è·¯å¾„éœ€è¦ä¿®æ”¹</li></ul></li><li>src/main.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; add &#125; <span class="keyword">from</span> <span class="string">&quot;./math&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> count <span class="keyword">from</span> <span class="string">&quot;./js/count&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> sum <span class="keyword">from</span> <span class="string">&quot;./js/sum&quot;</span>;</span><br><span class="line"><span class="comment">// å¼•å…¥èµ„æºï¼ŒWebpackæ‰ä¼šå¯¹å…¶æ‰“åŒ…</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./css/iconfont.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./css/index.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./less/index.less&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./sass/index.sass&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./sass/index.scss&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./styl/index.styl&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">count</span>(<span class="number">2</span>, <span class="number">1</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>));</span><br></pre></td></tr></table></figure><ul><li>public/index.html</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>webpack5<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello Webpack5<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box4&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box5&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä½¿ç”¨å­—ä½“å›¾æ ‡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-arrow-down&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-ashbin&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-browse&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../dist/static/js/main.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="é…ç½®-v8">é…ç½®</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;dist&quot;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/main.js&quot;</span>, <span class="comment">// å°† js æ–‡ä»¶è¾“å‡ºåˆ° static/js ç›®å½•ä¸­</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>, <span class="comment">// è‡ªåŠ¨å°†ä¸Šæ¬¡æ‰“åŒ…ç›®å½•èµ„æºæ¸…ç©º</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;less-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;sass-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;stylus-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span>, <span class="comment">// å°äº10kbçš„å›¾ç‰‡ä¼šè¢«base64å¤„ç†</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ° static/imgs ç›®å½•ä¸­</span></span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶å‘½å [hash:8][ext][query]</span></span><br><span class="line">          <span class="comment">// [hash:8]: hashå€¼å–8ä½</span></span><br><span class="line">          <span class="comment">// [ext]: ä½¿ç”¨ä¹‹å‰çš„æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">          <span class="comment">// [query]: æ·»åŠ ä¹‹å‰çš„queryå‚æ•°</span></span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/imgs/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2?)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/media/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [],</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>type: &quot;asset/resource&quot;</code>å’Œ<code>type: &quot;asset&quot;</code>çš„åŒºåˆ«ï¼š</p><ol><li><code>type: &quot;asset/resource&quot;</code> ç›¸å½“äº<code>file-loader</code>, å°†æ–‡ä»¶è½¬åŒ–æˆ Webpack èƒ½è¯†åˆ«çš„èµ„æºï¼Œå…¶ä»–ä¸åšå¤„ç†</li><li><code>type: &quot;asset&quot;</code> ç›¸å½“äº<code>url-loader</code>, å°†æ–‡ä»¶è½¬åŒ–æˆ Webpack èƒ½è¯†åˆ«çš„èµ„æºï¼ŒåŒæ—¶å°äºæŸä¸ªå¤§å°çš„èµ„æºä¼šå¤„ç†æˆ data URI å½¢å¼</li></ol><h2 id="è¿è¡ŒæŒ‡ä»¤-v8">è¿è¡ŒæŒ‡ä»¤</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack</span><br></pre></td></tr></table></figure><p>æ‰“å¼€ index.html é¡µé¢æŸ¥çœ‹æ•ˆæœ</p><h1>å¤„ç†å…¶ä»–èµ„æº</h1><p>å¼€å‘ä¸­å¯èƒ½è¿˜å­˜åœ¨ä¸€äº›å…¶ä»–èµ„æºï¼Œå¦‚éŸ³è§†é¢‘ç­‰ï¼Œæˆ‘ä»¬ä¹Ÿä¸€èµ·å¤„ç†äº†</p><h2 id="é…ç½®-v9">é…ç½®</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;dist&quot;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/main.js&quot;</span>, <span class="comment">// å°† js æ–‡ä»¶è¾“å‡ºåˆ° static/js ç›®å½•ä¸­</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>, <span class="comment">// è‡ªåŠ¨å°†ä¸Šæ¬¡æ‰“åŒ…ç›®å½•èµ„æºæ¸…ç©º</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;less-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;sass-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;stylus-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span>, <span class="comment">// å°äº10kbçš„å›¾ç‰‡ä¼šè¢«base64å¤„ç†</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ° static/imgs ç›®å½•ä¸­</span></span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶å‘½å [hash:8][ext][query]</span></span><br><span class="line">          <span class="comment">// [hash:8]: hashå€¼å–8ä½</span></span><br><span class="line">          <span class="comment">// [ext]: ä½¿ç”¨ä¹‹å‰çš„æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">          <span class="comment">// [query]: æ·»åŠ ä¹‹å‰çš„queryå‚æ•°</span></span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/imgs/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2?|map4|map3|avi)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/media/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [],</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å°±æ˜¯åœ¨å¤„ç†å­—ä½“å›¾æ ‡èµ„æºåŸºç¡€ä¸Šå¢åŠ å…¶ä»–æ–‡ä»¶ç±»å‹ï¼Œç»Ÿä¸€å¤„ç†å³å¯</p><h2 id="è¿è¡ŒæŒ‡ä»¤-v9">è¿è¡ŒæŒ‡ä»¤</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack</span><br></pre></td></tr></table></figure><p>æ‰“å¼€ index.html é¡µé¢æŸ¥çœ‹æ•ˆæœ</p><h1>å¤„ç† js èµ„æº</h1><p>æœ‰äººå¯èƒ½ä¼šé—®ï¼Œjs èµ„æº Webpack ä¸èƒ½å·²ç»å¤„ç†äº†å—ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è¿˜è¦å¤„ç†å‘¢ï¼Ÿ</p><p>åŸå› æ˜¯ Webpack å¯¹ js å¤„ç†æ˜¯æœ‰é™çš„ï¼Œåªèƒ½ç¼–è¯‘ js ä¸­ ES æ¨¡å—åŒ–è¯­æ³•ï¼Œä¸èƒ½ç¼–è¯‘å…¶ä»–è¯­æ³•ï¼Œå¯¼è‡´ js ä¸èƒ½åœ¨ IE ç­‰æµè§ˆå™¨è¿è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬å¸Œæœ›åšä¸€äº›å…¼å®¹æ€§å¤„ç†ã€‚</p><p>å…¶æ¬¡å¼€å‘ä¸­ï¼Œå›¢é˜Ÿå¯¹ä»£ç æ ¼å¼æ˜¯æœ‰ä¸¥æ ¼è¦æ±‚çš„ï¼Œæˆ‘ä»¬ä¸èƒ½ç”±è‚‰çœ¼å»æ£€æµ‹ä»£ç æ ¼å¼ï¼Œéœ€è¦ä½¿ç”¨ä¸“ä¸šçš„å·¥å…·æ¥æ£€æµ‹ã€‚</p><ul><li>é’ˆå¯¹ js å…¼å®¹æ€§å¤„ç†ï¼Œæˆ‘ä»¬ä½¿ç”¨ Babel æ¥å®Œæˆ</li><li>é’ˆå¯¹ä»£ç æ ¼å¼ï¼Œæˆ‘ä»¬ä½¿ç”¨ Eslint æ¥å®Œæˆ</li></ul><p>æˆ‘ä»¬å…ˆå®Œæˆ Eslintï¼Œæ£€æµ‹ä»£ç æ ¼å¼æ— è¯¯åï¼Œåœ¨ç”± Babel åšä»£ç å…¼å®¹æ€§å¤„ç†</p><h2 id="Eslint">Eslint</h2><p>å¯ç»„è£…çš„ JavaScript å’Œ JSX æ£€æŸ¥å·¥å…·ã€‚</p><p>è¿™å¥è¯æ„æ€å°±æ˜¯ï¼šå®ƒæ˜¯ç”¨æ¥æ£€æµ‹ js å’Œ jsx è¯­æ³•çš„å·¥å…·ï¼Œå¯ä»¥é…ç½®å„é¡¹åŠŸèƒ½</p><p>æˆ‘ä»¬ä½¿ç”¨ Eslintï¼Œå…³é”®æ˜¯å†™ Eslint é…ç½®æ–‡ä»¶ï¼Œé‡Œé¢å†™ä¸Šå„ç§ rules è§„åˆ™ï¼Œå°†æ¥è¿è¡Œ Eslint æ—¶å°±ä¼šä»¥å†™çš„è§„åˆ™å¯¹ä»£ç è¿›è¡Œæ£€æŸ¥</p><h3 id="é…ç½®æ–‡ä»¶">é…ç½®æ–‡ä»¶</h3><p>é…ç½®æ–‡ä»¶ç”±å¾ˆå¤šç§å†™æ³•ï¼š</p><ul><li><code>.eslintrc.*</code>ï¼šæ–°å»ºæ–‡ä»¶ï¼Œä½äºé¡¹ç›®æ ¹ç›®å½•<ul><li><code>.eslintrc</code></li><li><code>.eslintrc.js</code></li><li><code>.eslintrc.json</code></li><li>åŒºåˆ«åœ¨äºé…ç½®æ ¼å¼ä¸ä¸€æ ·</li></ul></li><li><code>package.json</code> ä¸­ <code>eslintConfig</code>ï¼šä¸éœ€è¦åˆ›å»ºæ–‡ä»¶ï¼Œåœ¨åŸæœ‰æ–‡ä»¶åŸºç¡€ä¸Šå†™</li></ul><p>ESLint ä¼šæŸ¥æ‰¾å’Œè‡ªåŠ¨è¯»å–å®ƒä»¬ï¼Œæ‰€ä»¥ä»¥ä¸Šé…ç½®æ–‡ä»¶åªéœ€è¦å­˜åœ¨ä¸€ä¸ªå³å¯</p><h3 id="å…·ä½“é…ç½®">å…·ä½“é…ç½®</h3><p>æˆ‘ä»¬ä»¥ <code>.eslintrc.js</code> é…ç½®æ–‡ä»¶ä¸ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// è§£æé€‰é¡¹</span></span><br><span class="line">  <span class="attr">parserOptions</span>: &#123;&#125;,</span><br><span class="line">  <span class="comment">// å…·ä½“æ£€æŸ¥è§„åˆ™</span></span><br><span class="line">  <span class="attr">rules</span>: &#123;&#125;,</span><br><span class="line">  <span class="comment">// ç»§æ‰¿å…¶ä»–è§„åˆ™</span></span><br><span class="line">  <span class="attr">extends</span>: [],</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="comment">// å…¶ä»–è§„åˆ™è¯¦è§ï¼šhttps://eslint.bootcss.com/docs/user-guide/configuring</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol><li>parserOptions è§£æé€‰é¡¹</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">parserOptions</span>: &#123;</span><br><span class="line">  <span class="attr">ecmaVersion</span>: <span class="number">6</span>, <span class="comment">// ES è¯­æ³•ç‰ˆæœ¬</span></span><br><span class="line">  <span class="attr">sourceType</span>: <span class="string">&quot;module&quot;</span>, <span class="comment">// ES æ¨¡å—åŒ–</span></span><br><span class="line">  <span class="attr">ecmaFeatures</span>: &#123; <span class="comment">// ES å…¶ä»–ç‰¹æ€§</span></span><br><span class="line">    <span class="attr">jsx</span>: <span class="literal">true</span> <span class="comment">// å¦‚æœæ˜¯ React é¡¹ç›®ï¼Œå°±éœ€è¦å¼€å¯ jsx è¯­æ³•</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>rules å…·ä½“è§„åˆ™</li></ol><ul><li><code>&quot;off&quot;</code> æˆ– <code>0</code> - å…³é—­è§„åˆ™</li><li><code>&quot;warn&quot;</code> æˆ– <code>1</code> - å¼€å¯è§„åˆ™ï¼Œä½¿ç”¨è­¦å‘Šçº§åˆ«çš„é”™è¯¯ï¼š<code>warn</code> (ä¸ä¼šå¯¼è‡´ç¨‹åºé€€å‡º)</li><li><code>&quot;error&quot;</code> æˆ– <code>2</code> - å¼€å¯è§„åˆ™ï¼Œä½¿ç”¨é”™è¯¯çº§åˆ«çš„é”™è¯¯ï¼š<code>error</code> (å½“è¢«è§¦å‘çš„æ—¶å€™ï¼Œç¨‹åºä¼šé€€å‡º)</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rules</span>: &#123;</span><br><span class="line">  <span class="attr">semi</span>: <span class="string">&quot;error&quot;</span>, <span class="comment">// ç¦æ­¢ä½¿ç”¨åˆ†å·</span></span><br><span class="line">  <span class="string">&#x27;array-callback-return&#x27;</span>: <span class="string">&#x27;warn&#x27;</span>, <span class="comment">// å¼ºåˆ¶æ•°ç»„æ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸­æœ‰ return è¯­å¥ï¼Œå¦åˆ™è­¦å‘Š</span></span><br><span class="line">  <span class="string">&#x27;default-case&#x27;</span>: [</span><br><span class="line">    <span class="string">&#x27;warn&#x27;</span>, <span class="comment">// è¦æ±‚ switch è¯­å¥ä¸­æœ‰ default åˆ†æ”¯ï¼Œå¦åˆ™è­¦å‘Š</span></span><br><span class="line">    &#123; <span class="attr">commentPattern</span>: <span class="string">&#x27;^no default$&#x27;</span> &#125; <span class="comment">// å…è®¸åœ¨æœ€åæ³¨é‡Š no default, å°±ä¸ä¼šæœ‰è­¦å‘Šäº†</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">eqeqeq</span>: [</span><br><span class="line">    <span class="string">&#x27;warn&#x27;</span>, <span class="comment">// å¼ºåˆ¶ä½¿ç”¨ === å’Œ !==ï¼Œå¦åˆ™è­¦å‘Š</span></span><br><span class="line">    <span class="string">&#x27;smart&#x27;</span> <span class="comment">// https://eslint.bootcss.com/docs/rules/eqeqeq#smart é™¤äº†å°‘æ•°æƒ…å†µä¸‹ä¸ä¼šæœ‰è­¦å‘Š</span></span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ›´å¤šè§„åˆ™è¯¦è§ï¼š<a href="https://eslint.bootcss.com/docs/rules/">è§„åˆ™æ–‡æ¡£</a></p><ol start="3"><li>extends ç»§æ‰¿</li></ol><p>å¼€å‘ä¸­ä¸€ç‚¹ç‚¹å†™ rules è§„åˆ™å¤ªè´¹åŠ²äº†ï¼Œæ‰€ä»¥æœ‰æ›´å¥½çš„åŠæ³•ï¼Œç»§æ‰¿ç°æœ‰çš„è§„åˆ™ã€‚</p><p>ç°æœ‰ä»¥ä¸‹è¾ƒä¸ºæœ‰åçš„è§„åˆ™ï¼š</p><ul><li><a href="https://eslint.bootcss.com/docs/rules/">Eslint å®˜æ–¹çš„è§„åˆ™</a>ï¼š<code>eslint:recommended</code></li><li><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/@vue/cli-plugin-eslint">Vue Cli å®˜æ–¹çš„è§„åˆ™</a>ï¼š<code>plugin:vue/essential</code></li><li><a href="https://github.com/facebook/create-react-app/tree/main/packages/eslint-config-react-app">React Cli å®˜æ–¹çš„è§„åˆ™</a>ï¼š<code>react-app</code></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¾‹å¦‚åœ¨Reacté¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™é…ç½®</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">extends</span>: [<span class="string">&quot;react-app&quot;</span>],</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="comment">// æˆ‘ä»¬çš„è§„åˆ™ä¼šè¦†ç›–æ‰react-appçš„è§„åˆ™</span></span><br><span class="line">    <span class="comment">// æ‰€ä»¥æƒ³è¦ä¿®æ”¹è§„åˆ™ç›´æ¥æ”¹å°±æ˜¯äº†</span></span><br><span class="line">    <span class="attr">eqeqeq</span>: [<span class="string">&quot;warn&quot;</span>, <span class="string">&quot;smart&quot;</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="åœ¨-Webpack-ä¸­ä½¿ç”¨">åœ¨ Webpack ä¸­ä½¿ç”¨</h3><ol><li>ä¸‹è½½åŒ…</li></ol><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i eslint-webpack-plugin eslint -D</span><br></pre></td></tr></table></figure><ol start="2"><li>å®šä¹‰ Eslint é…ç½®æ–‡ä»¶</li></ol><ul><li>.eslintrc.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// ç»§æ‰¿ Eslint è§„åˆ™</span></span><br><span class="line">  <span class="attr">extends</span>: [<span class="string">&quot;eslint:recommended&quot;</span>],</span><br><span class="line">  <span class="attr">env</span>: &#123;<span class="comment">// ç¯å¢ƒå˜é‡</span></span><br><span class="line">    <span class="attr">node</span>: <span class="literal">true</span>, <span class="comment">// å¯ç”¨nodeä¸­å…¨å±€å˜é‡</span></span><br><span class="line">    <span class="attr">browser</span>: <span class="literal">true</span>, <span class="comment">// å¯ç”¨æµè§ˆå™¨ä¸­å…¨å±€å˜é‡</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">    <span class="attr">ecmaVersion</span>: <span class="number">6</span>,<span class="comment">// es6</span></span><br><span class="line">    <span class="attr">sourceType</span>: <span class="string">&quot;module&quot;</span>,  <span class="comment">// es æ¨¡å—åŒ–</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&quot;no-var&quot;</span>: <span class="number">2</span>, <span class="comment">// ä¸èƒ½ä½¿ç”¨ var å®šä¹‰å˜é‡</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="3"><li>ä¿®æ”¹ js æ–‡ä»¶ä»£ç </li></ol><ul><li>main.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> count <span class="keyword">from</span> <span class="string">&quot;./js/count&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> sum <span class="keyword">from</span> <span class="string">&quot;./js/sum&quot;</span>;</span><br><span class="line"><span class="comment">// å¼•å…¥èµ„æºï¼ŒWebpackæ‰ä¼šå¯¹å…¶æ‰“åŒ…</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./css/iconfont.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./css/index.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./less/index.less&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./sass/index.sass&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./sass/index.scss&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./styl/index.styl&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result1 = <span class="title function_">count</span>(<span class="number">2</span>, <span class="number">1</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result1);</span><br><span class="line"><span class="keyword">var</span> result2 = <span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result2);</span><br></pre></td></tr></table></figure><ol start="4"><li>é…ç½®</li></ol><ul><li>webpack.config.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;dist&quot;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/main.js&quot;</span>, <span class="comment">// å°† js æ–‡ä»¶è¾“å‡ºåˆ° static/js ç›®å½•ä¸­</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>, <span class="comment">// è‡ªåŠ¨å°†ä¸Šæ¬¡æ‰“åŒ…ç›®å½•èµ„æºæ¸…ç©º</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;less-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;sass-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;stylus-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span>, <span class="comment">// å°äº10kbçš„å›¾ç‰‡ä¼šè¢«base64å¤„ç†</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ° static/imgs ç›®å½•ä¸­</span></span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶å‘½å [hash:8][ext][query]</span></span><br><span class="line">          <span class="comment">// [hash:8]: hashå€¼å–8ä½</span></span><br><span class="line">          <span class="comment">// [ext]: ä½¿ç”¨ä¹‹å‰çš„æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">          <span class="comment">// [query]: æ·»åŠ ä¹‹å‰çš„queryå‚æ•°</span></span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/imgs/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2?)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/media/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// æŒ‡å®šæ£€æŸ¥æ–‡ä»¶çš„æ ¹ç›®å½•</span></span><br><span class="line">      <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;src&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="5"><li>è¿è¡ŒæŒ‡ä»¤</li></ol><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack</span><br></pre></td></tr></table></figure><p>åœ¨æ§åˆ¶å°æŸ¥çœ‹ Eslint æ£€æŸ¥æ•ˆæœ</p><h3 id="VSCode-Eslint-æ’ä»¶">VSCode Eslint æ’ä»¶</h3><p>æ‰“å¼€ VSCodeï¼Œä¸‹è½½ Eslint æ’ä»¶ï¼Œå³å¯ä¸ç”¨ç¼–è¯‘å°±èƒ½çœ‹åˆ°é”™è¯¯ï¼Œå¯ä»¥æå‰è§£å†³</p><p>ä½†æ˜¯æ­¤æ—¶å°±ä¼šå¯¹é¡¹ç›®æ‰€æœ‰æ–‡ä»¶é»˜è®¤è¿›è¡Œ Eslint æ£€æŸ¥äº†ï¼Œæˆ‘ä»¬ dist ç›®å½•ä¸‹çš„æ‰“åŒ…åæ–‡ä»¶å°±ä¼šæŠ¥é”™ã€‚ä½†æ˜¯æˆ‘ä»¬åªéœ€è¦æ£€æŸ¥ src ä¸‹é¢çš„æ–‡ä»¶ï¼Œä¸éœ€è¦æ£€æŸ¥ dist ä¸‹é¢çš„æ–‡ä»¶ã€‚</p><p>æ‰€ä»¥å¯ä»¥ä½¿ç”¨ Eslint å¿½ç•¥æ–‡ä»¶è§£å†³ã€‚åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»ºä¸‹é¢æ–‡ä»¶:</p><ul><li><code>.eslintignore</code></li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># å¿½ç•¥distç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶</span><br><span class="line">dist</span><br></pre></td></tr></table></figure><h2 id="Babel">Babel</h2><p>JavaScript ç¼–è¯‘å™¨ã€‚</p><p>ä¸»è¦ç”¨äºå°† ES6 è¯­æ³•ç¼–å†™çš„ä»£ç è½¬æ¢ä¸ºå‘åå…¼å®¹çš„ JavaScript è¯­æ³•ï¼Œä»¥ä¾¿èƒ½å¤Ÿè¿è¡Œåœ¨å½“å‰å’Œæ—§ç‰ˆæœ¬çš„æµè§ˆå™¨æˆ–å…¶ä»–ç¯å¢ƒä¸­</p><h3 id="é…ç½®æ–‡ä»¶-v2">é…ç½®æ–‡ä»¶</h3><p>é…ç½®æ–‡ä»¶ç”±å¾ˆå¤šç§å†™æ³•ï¼š</p><ul><li><p><code>babel.config.*</code>ï¼šæ–°å»ºæ–‡ä»¶ï¼Œä½äºé¡¹ç›®æ ¹ç›®å½•</p><ul><li><code>babel.config.js</code></li><li><code>babel.config.json</code></li></ul></li><li><p><code>.babelrc.*</code>ï¼šæ–°å»ºæ–‡ä»¶ï¼Œä½äºé¡¹ç›®æ ¹ç›®å½•</p><ul><li><code>.babelrc</code></li><li><code>.babelrc.js</code></li><li><code>.babelrc.json</code></li></ul></li><li><p><code>package.json</code> ä¸­ <code>babel</code>ï¼šä¸éœ€è¦åˆ›å»ºæ–‡ä»¶ï¼Œåœ¨åŸæœ‰æ–‡ä»¶åŸºç¡€ä¸Šå†™</p></li></ul><p>Babel ä¼šæŸ¥æ‰¾å’Œè‡ªåŠ¨è¯»å–å®ƒä»¬ï¼Œæ‰€ä»¥ä»¥ä¸Šé…ç½®æ–‡ä»¶åªéœ€è¦å­˜åœ¨ä¸€ä¸ªå³å¯</p><h3 id="å…·ä½“é…ç½®-v2">å…·ä½“é…ç½®</h3><p>æˆ‘ä»¬ä»¥ <code>babel.config.js</code> é…ç½®æ–‡ä»¶ä¸ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// é¢„è®¾</span></span><br><span class="line">  <span class="attr">presets</span>: [],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol><li><p>presets é¢„è®¾</p><p>ç®€å•ç†è§£ï¼šå°±æ˜¯ä¸€ç»„ Babel æ’ä»¶, æ‰©å±• Babel åŠŸèƒ½</p><ul><li><code>@babel/preset-env</code>: ä¸€ä¸ªæ™ºèƒ½é¢„è®¾ï¼Œå…è®¸æ‚¨ä½¿ç”¨æœ€æ–°çš„ JavaScriptã€‚</li><li><code>@babel/preset-react</code>ï¼šä¸€ä¸ªç”¨æ¥ç¼–è¯‘ React jsx è¯­æ³•çš„é¢„è®¾</li><li><code>@babel/preset-typescript</code>ï¼šä¸€ä¸ªç”¨æ¥ç¼–è¯‘ TypeScript è¯­æ³•çš„é¢„è®¾</li></ul></li></ol><h3 id="åœ¨-Webpack-ä¸­ä½¿ç”¨-v2">åœ¨ Webpack ä¸­ä½¿ç”¨</h3><ol><li><p>ä¸‹è½½åŒ…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i babel-loader @babel/core @babel/preset-env -D</span><br></pre></td></tr></table></figure></li><li><p>å®šä¹‰ Babel é…ç½®æ–‡ä»¶</p></li></ol><ul><li>babel.config.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">presets</span>: [<span class="string">&quot;@babel/preset-env&quot;</span>],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="3"><li>ä¿®æ”¹ js æ–‡ä»¶ä»£ç </li></ol><ul><li>main.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> count <span class="keyword">from</span> <span class="string">&quot;./js/count&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> sum <span class="keyword">from</span> <span class="string">&quot;./js/sum&quot;</span>;</span><br><span class="line"><span class="comment">// å¼•å…¥èµ„æºï¼ŒWebpackæ‰ä¼šå¯¹å…¶æ‰“åŒ…</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./css/iconfont.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./css/index.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./less/index.less&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./sass/index.sass&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./sass/index.scss&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./styl/index.styl&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result1 = <span class="title function_">count</span>(<span class="number">2</span>, <span class="number">1</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result1);</span><br><span class="line"><span class="keyword">const</span> result2 = <span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result2);</span><br></pre></td></tr></table></figure><ol start="4"><li>é…ç½®</li></ol><ul><li>webpack.config.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;dist&quot;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/main.js&quot;</span>, <span class="comment">// å°† js æ–‡ä»¶è¾“å‡ºåˆ° static/js ç›®å½•ä¸­</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>, <span class="comment">// è‡ªåŠ¨å°†ä¸Šæ¬¡æ‰“åŒ…ç›®å½•èµ„æºæ¸…ç©º</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;less-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;sass-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;stylus-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span>, <span class="comment">// å°äº10kbçš„å›¾ç‰‡ä¼šè¢«base64å¤„ç†</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ° static/imgs ç›®å½•ä¸­</span></span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶å‘½å [hash:8][ext][query]</span></span><br><span class="line">          <span class="comment">// [hash:8]: hashå€¼å–8ä½</span></span><br><span class="line">          <span class="comment">// [ext]: ä½¿ç”¨ä¹‹å‰çš„æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">          <span class="comment">// [query]: æ·»åŠ ä¹‹å‰çš„queryå‚æ•°</span></span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/imgs/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2?)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/media/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>, <span class="comment">// æ’é™¤node_modulesä»£ç ä¸ç¼–è¯‘</span></span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// æŒ‡å®šæ£€æŸ¥æ–‡ä»¶çš„æ ¹ç›®å½•</span></span><br><span class="line">      <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;src&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="5"><li>è¿è¡ŒæŒ‡ä»¤</li></ol><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack</span><br></pre></td></tr></table></figure><p>æ‰“å¼€æ‰“åŒ…åçš„ <code>dist/static/js/main.js</code> æ–‡ä»¶æŸ¥çœ‹ï¼Œä¼šå‘ç°ç®­å¤´å‡½æ•°ç­‰ ES6 è¯­æ³•å·²ç»è½¬æ¢äº†</p><h1>å¤„ç† Html èµ„æº</h1><h2 id="ä¸‹è½½åŒ…-v5">ä¸‹è½½åŒ…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i html-webpack-plugin -D</span><br></pre></td></tr></table></figure><h2 id="é…ç½®-v10">é…ç½®</h2><ul><li>webpack.config.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;dist&quot;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/main.js&quot;</span>, <span class="comment">// å°† js æ–‡ä»¶è¾“å‡ºåˆ° static/js ç›®å½•ä¸­</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>, <span class="comment">// è‡ªåŠ¨å°†ä¸Šæ¬¡æ‰“åŒ…ç›®å½•èµ„æºæ¸…ç©º</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;less-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;sass-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;stylus-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span>, <span class="comment">// å°äº10kbçš„å›¾ç‰‡ä¼šè¢«base64å¤„ç†</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ° static/imgs ç›®å½•ä¸­</span></span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶å‘½å [hash:8][ext][query]</span></span><br><span class="line">          <span class="comment">// [hash:8]: hashå€¼å–8ä½</span></span><br><span class="line">          <span class="comment">// [ext]: ä½¿ç”¨ä¹‹å‰çš„æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">          <span class="comment">// [query]: æ·»åŠ ä¹‹å‰çš„queryå‚æ•°</span></span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/imgs/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2?)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/media/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>, <span class="comment">// æ’é™¤node_modulesä»£ç ä¸ç¼–è¯‘</span></span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// æŒ‡å®šæ£€æŸ¥æ–‡ä»¶çš„æ ¹ç›®å½•</span></span><br><span class="line">      <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;src&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// ä»¥ public/index.html ä¸ºæ¨¡æ¿åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line">      <span class="comment">// æ–°çš„htmlæ–‡ä»¶æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š1. å†…å®¹å’Œæºæ–‡ä»¶ä¸€è‡´ 2. è‡ªåŠ¨å¼•å…¥æ‰“åŒ…ç”Ÿæˆçš„jsç­‰èµ„æº</span></span><br><span class="line">      <span class="attr">template</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;public/index.html&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹-index-html-v2">ä¿®æ”¹ index.html</h2><p>å»æ‰å¼•å…¥çš„ js æ–‡ä»¶ï¼Œå› ä¸º HtmlWebpackPlugin ä¼šè‡ªåŠ¨å¼•å…¥</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>webpack5<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello Webpack5<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box4&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box5&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-arrow-down&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-ashbin&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-browse&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="è¿è¡ŒæŒ‡ä»¤-v10">è¿è¡ŒæŒ‡ä»¤</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ dist ç›®å½•å°±ä¼šè¾“å‡ºä¸€ä¸ª index.html æ–‡ä»¶</p><h1>å¼€å‘æœåŠ¡å™¨&amp;è‡ªåŠ¨åŒ–</h1><p>æ¯æ¬¡å†™å®Œä»£ç éƒ½éœ€è¦æ‰‹åŠ¨è¾“å…¥æŒ‡ä»¤æ‰èƒ½ç¼–è¯‘ä»£ç ï¼Œå¤ªéº»çƒ¦äº†ï¼Œæˆ‘ä»¬å¸Œæœ›ä¸€åˆ‡è‡ªåŠ¨åŒ–</p><h2 id="ä¸‹è½½åŒ…-v6">ä¸‹è½½åŒ…</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack-dev-server -D</span><br></pre></td></tr></table></figure><h2 id="é…ç½®-v11">é…ç½®</h2><ul><li>webpack.config.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;dist&quot;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/main.js&quot;</span>, <span class="comment">// å°† js æ–‡ä»¶è¾“å‡ºåˆ° static/js ç›®å½•ä¸­</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>, <span class="comment">// è‡ªåŠ¨å°†ä¸Šæ¬¡æ‰“åŒ…ç›®å½•èµ„æºæ¸…ç©º</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;less-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;sass-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;stylus-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span>, <span class="comment">// å°äº10kbçš„å›¾ç‰‡ä¼šè¢«base64å¤„ç†</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ° static/imgs ç›®å½•ä¸­</span></span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶å‘½å [hash:8][ext][query]</span></span><br><span class="line">          <span class="comment">// [hash:8]: hashå€¼å–8ä½</span></span><br><span class="line">          <span class="comment">// [ext]: ä½¿ç”¨ä¹‹å‰çš„æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">          <span class="comment">// [query]: æ·»åŠ ä¹‹å‰çš„queryå‚æ•°</span></span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/imgs/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2?)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/media/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>, <span class="comment">// æ’é™¤node_modulesä»£ç ä¸ç¼–è¯‘</span></span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// æŒ‡å®šæ£€æŸ¥æ–‡ä»¶çš„æ ¹ç›®å½•</span></span><br><span class="line">      <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;src&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// ä»¥ public/index.html ä¸ºæ¨¡æ¿åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line">      <span class="comment">// æ–°çš„htmlæ–‡ä»¶æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š1. å†…å®¹å’Œæºæ–‡ä»¶ä¸€è‡´ 2. è‡ªåŠ¨å¼•å…¥æ‰“åŒ…ç”Ÿæˆçš„jsç­‰èµ„æº</span></span><br><span class="line">      <span class="attr">template</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;public/index.html&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// å¼€å‘æœåŠ¡å™¨: ä¸ä¼šè¾“å‡ºèµ„æºï¼Œåœ¨å†…å­˜ä¸­ç¼–è¯‘æ‰“åŒ…</span></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&quot;localhost&quot;</span>, <span class="comment">// å¯åŠ¨æœåŠ¡å™¨åŸŸå</span></span><br><span class="line">    <span class="attr">port</span>: <span class="string">&quot;3000&quot;</span>, <span class="comment">// å¯åŠ¨æœåŠ¡å™¨ç«¯å£å·</span></span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="è¿è¡ŒæŒ‡ä»¤-v11">è¿è¡ŒæŒ‡ä»¤</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack serve</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„è¿è¡ŒæŒ‡ä»¤å‘ç”Ÿäº†å˜åŒ–</strong></p><p>å¹¶ä¸”å½“ä½ ä½¿ç”¨å¼€å‘æœåŠ¡å™¨æ—¶ï¼Œæ‰€æœ‰ä»£ç éƒ½ä¼šåœ¨å†…å­˜ä¸­ç¼–è¯‘æ‰“åŒ…ï¼Œå¹¶ä¸ä¼šè¾“å‡ºåˆ° dist ç›®å½•ä¸‹ã€‚</p><p>å¼€å‘æ—¶æˆ‘ä»¬åªå…³å¿ƒä»£ç èƒ½è¿è¡Œï¼Œæœ‰æ•ˆæœå³å¯ï¼Œè‡³äºä»£ç è¢«ç¼–è¯‘æˆä»€ä¹ˆæ ·å­ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦çŸ¥é“ã€‚</p><h1>ç”Ÿäº§æ¨¡å¼ä»‹ç»</h1><p>ç”Ÿäº§æ¨¡å¼æ˜¯å¼€å‘å®Œæˆä»£ç åï¼Œæˆ‘ä»¬éœ€è¦å¾—åˆ°ä»£ç å°†æ¥éƒ¨ç½²ä¸Šçº¿ã€‚</p><p>è¿™ä¸ªæ¨¡å¼ä¸‹æˆ‘ä»¬ä¸»è¦å¯¹ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œè®©å…¶è¿è¡Œæ€§èƒ½æ›´å¥½ã€‚</p><p>ä¼˜åŒ–ä¸»è¦ä»ä¸¤ä¸ªè§’åº¦å‡ºå‘:</p><ol><li>ä¼˜åŒ–ä»£ç è¿è¡Œæ€§èƒ½</li><li>ä¼˜åŒ–ä»£ç æ‰“åŒ…é€Ÿåº¦</li></ol><h2 id="ç”Ÿäº§æ¨¡å¼å‡†å¤‡">ç”Ÿäº§æ¨¡å¼å‡†å¤‡</h2><p>æˆ‘ä»¬åˆ†åˆ«å‡†å¤‡ä¸¤ä¸ªé…ç½®æ–‡ä»¶æ¥æ”¾ä¸åŒçš„é…ç½®</p><h3 id="æ–‡ä»¶ç›®å½•">æ–‡ä»¶ç›®å½•</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ webpack-test (é¡¹ç›®æ ¹ç›®å½•)</span><br><span class="line">    â”œâ”€â”€ config (Webpacké…ç½®æ–‡ä»¶ç›®å½•)</span><br><span class="line">    â”‚    â”œâ”€â”€ webpack.dev.js(å¼€å‘æ¨¡å¼é…ç½®æ–‡ä»¶)</span><br><span class="line">    â”‚    â””â”€â”€ webpack.prod.js(ç”Ÿäº§æ¨¡å¼é…ç½®æ–‡ä»¶)</span><br><span class="line">    â”œâ”€â”€ node_modules (ä¸‹è½½åŒ…å­˜æ”¾ç›®å½•)</span><br><span class="line">    â”œâ”€â”€ src (é¡¹ç›®æºç ç›®å½•ï¼Œé™¤äº†htmlå…¶ä»–éƒ½åœ¨srcé‡Œé¢)</span><br><span class="line">    â”‚    â””â”€â”€ ç•¥</span><br><span class="line">    â”œâ”€â”€ public (é¡¹ç›®htmlæ–‡ä»¶)</span><br><span class="line">    â”‚    â””â”€â”€ index.html</span><br><span class="line">    â”œâ”€â”€ .eslintrc.js(Eslinté…ç½®æ–‡ä»¶)</span><br><span class="line">    â”œâ”€â”€ babel.config.js(Babelé…ç½®æ–‡ä»¶)</span><br><span class="line">    â””â”€â”€ package.json (åŒ…çš„ä¾èµ–ç®¡ç†é…ç½®æ–‡ä»¶)</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹-webpack-dev-js">ä¿®æ”¹ webpack.dev.js</h3><p>å› ä¸ºæ–‡ä»¶ç›®å½•å˜äº†ï¼Œæ‰€ä»¥æ‰€æœ‰ç»å¯¹è·¯å¾„éœ€è¦å›é€€ä¸€å±‚ç›®å½•æ‰èƒ½æ‰¾åˆ°å¯¹åº”çš„æ–‡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="literal">undefined</span>, <span class="comment">// å¼€å‘æ¨¡å¼æ²¡æœ‰è¾“å‡ºï¼Œä¸éœ€è¦æŒ‡å®šè¾“å‡ºç›®å½•</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/main.js&quot;</span>, <span class="comment">// å°† js æ–‡ä»¶è¾“å‡ºåˆ° static/js ç›®å½•ä¸­</span></span><br><span class="line">    <span class="comment">// clean: true, // å¼€å‘æ¨¡å¼æ²¡æœ‰è¾“å‡ºï¼Œä¸éœ€è¦æ¸…ç©ºè¾“å‡ºç»“æœ</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;less-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;sass-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;stylus-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span>, <span class="comment">// å°äº10kbçš„å›¾ç‰‡ä¼šè¢«base64å¤„ç†</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ° static/imgs ç›®å½•ä¸­</span></span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶å‘½å [hash:8][ext][query]</span></span><br><span class="line">          <span class="comment">// [hash:8]: hashå€¼å–8ä½</span></span><br><span class="line">          <span class="comment">// [ext]: ä½¿ç”¨ä¹‹å‰çš„æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">          <span class="comment">// [query]: æ·»åŠ ä¹‹å‰çš„queryå‚æ•°</span></span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/imgs/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2?)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/media/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>, <span class="comment">// æ’é™¤node_modulesä»£ç ä¸ç¼–è¯‘</span></span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// æŒ‡å®šæ£€æŸ¥æ–‡ä»¶çš„æ ¹ç›®å½•</span></span><br><span class="line">      <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// ä»¥ public/index.html ä¸ºæ¨¡æ¿åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line">      <span class="comment">// æ–°çš„htmlæ–‡ä»¶æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š1. å†…å®¹å’Œæºæ–‡ä»¶ä¸€è‡´ 2. è‡ªåŠ¨å¼•å…¥æ‰“åŒ…ç”Ÿæˆçš„jsç­‰èµ„æº</span></span><br><span class="line">      <span class="attr">template</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../public/index.html&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// å…¶ä»–çœç•¥</span></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&quot;localhost&quot;</span>, <span class="comment">// å¯åŠ¨æœåŠ¡å™¨åŸŸå</span></span><br><span class="line">    <span class="attr">port</span>: <span class="string">&quot;3000&quot;</span>, <span class="comment">// å¯åŠ¨æœåŠ¡å™¨ç«¯å£å·</span></span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è¿è¡Œå¼€å‘æ¨¡å¼çš„æŒ‡ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack serve --config ./config/webpack.dev.js</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹-webpack-prod-js">ä¿®æ”¹ webpack.prod.js</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../dist&quot;</span>), <span class="comment">// ç”Ÿäº§æ¨¡å¼éœ€è¦è¾“å‡º</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/main.js&quot;</span>, <span class="comment">// å°† js æ–‡ä»¶è¾“å‡ºåˆ° static/js ç›®å½•ä¸­</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;less-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;sass-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;stylus-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span>, <span class="comment">// å°äº10kbçš„å›¾ç‰‡ä¼šè¢«base64å¤„ç†</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ° static/imgs ç›®å½•ä¸­</span></span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶å‘½å [hash:8][ext][query]</span></span><br><span class="line">          <span class="comment">// [hash:8]: hashå€¼å–8ä½</span></span><br><span class="line">          <span class="comment">// [ext]: ä½¿ç”¨ä¹‹å‰çš„æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">          <span class="comment">// [query]: æ·»åŠ ä¹‹å‰çš„queryå‚æ•°</span></span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/imgs/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2?)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/media/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>, <span class="comment">// æ’é™¤node_modulesä»£ç ä¸ç¼–è¯‘</span></span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// æŒ‡å®šæ£€æŸ¥æ–‡ä»¶çš„æ ¹ç›®å½•</span></span><br><span class="line">      <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// ä»¥ public/index.html ä¸ºæ¨¡æ¿åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line">      <span class="comment">// æ–°çš„htmlæ–‡ä»¶æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š1. å†…å®¹å’Œæºæ–‡ä»¶ä¸€è‡´ 2. è‡ªåŠ¨å¼•å…¥æ‰“åŒ…ç”Ÿæˆçš„jsç­‰èµ„æº</span></span><br><span class="line">      <span class="attr">template</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../public/index.html&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// devServer: &#123;</span></span><br><span class="line">  <span class="comment">//   host: &quot;localhost&quot;, // å¯åŠ¨æœåŠ¡å™¨åŸŸå</span></span><br><span class="line">  <span class="comment">//   port: &quot;3000&quot;, // å¯åŠ¨æœåŠ¡å™¨ç«¯å£å·</span></span><br><span class="line">  <span class="comment">//   open: true, // æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç”Ÿäº§æ¨¡å¼çš„æŒ‡ä»¤ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack --config ./config/webpack.prod.js</span><br></pre></td></tr></table></figure><h3 id="é…ç½®è¿è¡ŒæŒ‡ä»¤">é…ç½®è¿è¡ŒæŒ‡ä»¤</h3><p>ä¸ºäº†æ–¹ä¾¿è¿è¡Œä¸åŒæ¨¡å¼çš„æŒ‡ä»¤ï¼Œæˆ‘ä»¬å°†æŒ‡ä»¤å®šä¹‰åœ¨ package.json ä¸­ scripts é‡Œé¢</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="comment">// å…¶ä»–çœç•¥</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npm run dev&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx webpack serve --config ./config/webpack.dev.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx webpack --config ./config/webpack.prod.js&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ä»¥åå¯åŠ¨æŒ‡ä»¤ï¼š</p><ul><li>å¼€å‘æ¨¡å¼ï¼š<code>npm start</code> æˆ– <code>npm run dev</code></li><li>ç”Ÿäº§æ¨¡å¼ï¼š<code>npm run build</code></li></ul><h1>Css å¤„ç†</h1><h2 id="æå–-Css-æˆå•ç‹¬æ–‡ä»¶">æå– Css æˆå•ç‹¬æ–‡ä»¶</h2><p>Css æ–‡ä»¶ç›®å‰è¢«æ‰“åŒ…åˆ° js æ–‡ä»¶ä¸­ï¼Œå½“ js æ–‡ä»¶åŠ è½½æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ª style æ ‡ç­¾æ¥ç”Ÿæˆæ ·å¼</p><p>è¿™æ ·å¯¹äºç½‘ç«™æ¥è¯´ï¼Œä¼šå‡ºç°é—ªå±ç°è±¡ï¼Œç”¨æˆ·ä½“éªŒä¸å¥½</p><p>æˆ‘ä»¬åº”è¯¥æ˜¯å•ç‹¬çš„ Css æ–‡ä»¶ï¼Œé€šè¿‡ link æ ‡ç­¾åŠ è½½æ€§èƒ½æ‰å¥½</p><h3 id="ä¸‹è½½åŒ…-v7">ä¸‹è½½åŒ…</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i mini-css-extract-plugin -D</span><br></pre></td></tr></table></figure><h3 id="é…ç½®-v12">é…ç½®</h3><ul><li>webpack.prod.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;mini-css-extract-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../dist&quot;</span>), <span class="comment">// ç”Ÿäº§æ¨¡å¼éœ€è¦è¾“å‡º</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/main.js&quot;</span>, <span class="comment">// å°† js æ–‡ä»¶è¾“å‡ºåˆ° static/js ç›®å½•ä¸­</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">        <span class="attr">use</span>: [<span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>, <span class="string">&quot;css-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;less-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;sass-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;stylus-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span>, <span class="comment">// å°äº10kbçš„å›¾ç‰‡ä¼šè¢«base64å¤„ç†</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ° static/imgs ç›®å½•ä¸­</span></span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶å‘½å [hash:8][ext][query]</span></span><br><span class="line">          <span class="comment">// [hash:8]: hashå€¼å–8ä½</span></span><br><span class="line">          <span class="comment">// [ext]: ä½¿ç”¨ä¹‹å‰çš„æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">          <span class="comment">// [query]: æ·»åŠ ä¹‹å‰çš„queryå‚æ•°</span></span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/imgs/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2?)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/media/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>, <span class="comment">// æ’é™¤node_modulesä»£ç ä¸ç¼–è¯‘</span></span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// æŒ‡å®šæ£€æŸ¥æ–‡ä»¶çš„æ ¹ç›®å½•</span></span><br><span class="line">      <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// ä»¥ public/index.html ä¸ºæ¨¡æ¿åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line">      <span class="comment">// æ–°çš„htmlæ–‡ä»¶æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š1. å†…å®¹å’Œæºæ–‡ä»¶ä¸€è‡´ 2. è‡ªåŠ¨å¼•å…¥æ‰“åŒ…ç”Ÿæˆçš„jsç­‰èµ„æº</span></span><br><span class="line">      <span class="attr">template</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../public/index.html&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// æå–cssæˆå•ç‹¬æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// å®šä¹‰è¾“å‡ºæ–‡ä»¶åå’Œç›®å½•</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&quot;static/css/main.css&quot;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// devServer: &#123;</span></span><br><span class="line">  <span class="comment">//   host: &quot;localhost&quot;, // å¯åŠ¨æœåŠ¡å™¨åŸŸå</span></span><br><span class="line">  <span class="comment">//   port: &quot;3000&quot;, // å¯åŠ¨æœåŠ¡å™¨ç«¯å£å·</span></span><br><span class="line">  <span class="comment">//   open: true, // æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="è¿è¡ŒæŒ‡ä»¤-v12">è¿è¡ŒæŒ‡ä»¤</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure><h2 id="Css-å…¼å®¹æ€§å¤„ç†">Css å…¼å®¹æ€§å¤„ç†</h2><h3 id="ä¸‹è½½åŒ…-v8">ä¸‹è½½åŒ…</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i postcss-loader postcss postcss-preset-env -D</span><br></pre></td></tr></table></figure><h3 id="é…ç½®-v13">é…ç½®</h3><ul><li>webpack.prod.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;mini-css-extract-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../dist&quot;</span>), <span class="comment">// ç”Ÿäº§æ¨¡å¼éœ€è¦è¾“å‡º</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/main.js&quot;</span>, <span class="comment">// å°† js æ–‡ä»¶è¾“å‡ºåˆ° static/js ç›®å½•ä¸­</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">          <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">              <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">                <span class="attr">plugins</span>: [</span><br><span class="line">                  <span class="string">&quot;postcss-preset-env&quot;</span>, <span class="comment">// èƒ½è§£å†³å¤§å¤šæ•°æ ·å¼å…¼å®¹æ€§é—®é¢˜</span></span><br><span class="line">                ],</span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">          <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">              <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">                <span class="attr">plugins</span>: [</span><br><span class="line">                  <span class="string">&quot;postcss-preset-env&quot;</span>, <span class="comment">// èƒ½è§£å†³å¤§å¤šæ•°æ ·å¼å…¼å®¹æ€§é—®é¢˜</span></span><br><span class="line">                ],</span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="string">&quot;less-loader&quot;</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">          <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">              <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">                <span class="attr">plugins</span>: [</span><br><span class="line">                  <span class="string">&quot;postcss-preset-env&quot;</span>, <span class="comment">// èƒ½è§£å†³å¤§å¤šæ•°æ ·å¼å…¼å®¹æ€§é—®é¢˜</span></span><br><span class="line">                ],</span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="string">&quot;sass-loader&quot;</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">          <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">              <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">                <span class="attr">plugins</span>: [</span><br><span class="line">                  <span class="string">&quot;postcss-preset-env&quot;</span>, <span class="comment">// èƒ½è§£å†³å¤§å¤šæ•°æ ·å¼å…¼å®¹æ€§é—®é¢˜</span></span><br><span class="line">                ],</span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="string">&quot;stylus-loader&quot;</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span>, <span class="comment">// å°äº10kbçš„å›¾ç‰‡ä¼šè¢«base64å¤„ç†</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ° static/imgs ç›®å½•ä¸­</span></span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶å‘½å [hash:8][ext][query]</span></span><br><span class="line">          <span class="comment">// [hash:8]: hashå€¼å–8ä½</span></span><br><span class="line">          <span class="comment">// [ext]: ä½¿ç”¨ä¹‹å‰çš„æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">          <span class="comment">// [query]: æ·»åŠ ä¹‹å‰çš„queryå‚æ•°</span></span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/imgs/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2?)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/media/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>, <span class="comment">// æ’é™¤node_modulesä»£ç ä¸ç¼–è¯‘</span></span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// æŒ‡å®šæ£€æŸ¥æ–‡ä»¶çš„æ ¹ç›®å½•</span></span><br><span class="line">      <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// ä»¥ public/index.html ä¸ºæ¨¡æ¿åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line">      <span class="comment">// æ–°çš„htmlæ–‡ä»¶æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š1. å†…å®¹å’Œæºæ–‡ä»¶ä¸€è‡´ 2. è‡ªåŠ¨å¼•å…¥æ‰“åŒ…ç”Ÿæˆçš„jsç­‰èµ„æº</span></span><br><span class="line">      <span class="attr">template</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../public/index.html&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// æå–cssæˆå•ç‹¬æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// å®šä¹‰è¾“å‡ºæ–‡ä»¶åå’Œç›®å½•</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&quot;static/css/main.css&quot;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// devServer: &#123;</span></span><br><span class="line">  <span class="comment">//   host: &quot;localhost&quot;, // å¯åŠ¨æœåŠ¡å™¨åŸŸå</span></span><br><span class="line">  <span class="comment">//   port: &quot;3000&quot;, // å¯åŠ¨æœåŠ¡å™¨ç«¯å£å·</span></span><br><span class="line">  <span class="comment">//   open: true, // æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ§åˆ¶å…¼å®¹æ€§">æ§åˆ¶å…¼å®¹æ€§</h3><p>æˆ‘ä»¬å¯ä»¥åœ¨ <code>package.json</code> æ–‡ä»¶ä¸­æ·»åŠ  <code>browserslist</code> æ¥æ§åˆ¶æ ·å¼çš„å…¼å®¹æ€§åšåˆ°ä»€ä¹ˆç¨‹åº¦ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="comment">// å…¶ä»–çœç•¥</span></span><br><span class="line">  <span class="attr">&quot;browserslist&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;ie &gt;= 8&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>æƒ³è¦çŸ¥é“æ›´å¤šçš„ <code>browserslist</code> é…ç½®ï¼ŒæŸ¥çœ‹<a href="https://github.com/browserslist/browserslist">browserslist æ–‡æ¡£</a></p><p>ä»¥ä¸Šä¸ºäº†æµ‹è¯•å…¼å®¹æ€§æ‰€ä»¥è®¾ç½®å…¼å®¹æµè§ˆå™¨ ie8 ä»¥ä¸Šã€‚</p><p>å®é™…å¼€å‘ä¸­æˆ‘ä»¬ä¸€èˆ¬ä¸è€ƒè™‘æ—§ç‰ˆæœ¬æµè§ˆå™¨äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™æ ·è®¾ç½®ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="comment">// å…¶ä»–çœç•¥</span></span><br><span class="line">  <span class="attr">&quot;browserslist&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;last 2 version&quot;</span><span class="punctuation">,</span>  <span class="comment">// æœ€è¿‘çš„ä¸¤ä¸ªç‰ˆæœ¬</span></span><br><span class="line">      <span class="string">&quot;&gt; 1%&quot;</span><span class="punctuation">,</span> <span class="comment">// è¦†ç›–99%çš„æµè§ˆå™¨</span></span><br><span class="line">      <span class="string">&quot;not dead&quot;</span> <span class="comment">// æ­»çš„</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="åˆå¹¶é…ç½®">åˆå¹¶é…ç½®</h3><ul><li>webpack.prod.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;mini-css-extract-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å¤„ç†æ ·å¼çš„Loaders</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getStyleLoaders</span> = (<span class="params">preProcessor</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> [</span><br><span class="line">    <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">    <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">          <span class="attr">plugins</span>: [</span><br><span class="line">            <span class="string">&quot;postcss-preset-env&quot;</span>, <span class="comment">// èƒ½è§£å†³å¤§å¤šæ•°æ ·å¼å…¼å®¹æ€§é—®é¢˜</span></span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    preProcessor,</span><br><span class="line">  ].<span class="title function_">filter</span>(<span class="title class_">Boolean</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../dist&quot;</span>), <span class="comment">// ç”Ÿäº§æ¨¡å¼éœ€è¦è¾“å‡º</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/main.js&quot;</span>, <span class="comment">// å°† js æ–‡ä»¶è¾“å‡ºåˆ° static/js ç›®å½•ä¸­</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">        <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(),</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;less-loader&quot;</span>),</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;sass-loader&quot;</span>),</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">        <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;stylus-loader&quot;</span>),</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span>, <span class="comment">// å°äº10kbçš„å›¾ç‰‡ä¼šè¢«base64å¤„ç†</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ° static/imgs ç›®å½•ä¸­</span></span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶å‘½å [hash:8][ext][query]</span></span><br><span class="line">          <span class="comment">// [hash:8]: hashå€¼å–8ä½</span></span><br><span class="line">          <span class="comment">// [ext]: ä½¿ç”¨ä¹‹å‰çš„æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">          <span class="comment">// [query]: æ·»åŠ ä¹‹å‰çš„queryå‚æ•°</span></span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/imgs/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2?)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/media/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>, <span class="comment">// æ’é™¤node_modulesä»£ç ä¸ç¼–è¯‘</span></span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// æŒ‡å®šæ£€æŸ¥æ–‡ä»¶çš„æ ¹ç›®å½•</span></span><br><span class="line">      <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// ä»¥ public/index.html ä¸ºæ¨¡æ¿åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line">      <span class="comment">// æ–°çš„htmlæ–‡ä»¶æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š1. å†…å®¹å’Œæºæ–‡ä»¶ä¸€è‡´ 2. è‡ªåŠ¨å¼•å…¥æ‰“åŒ…ç”Ÿæˆçš„jsç­‰èµ„æº</span></span><br><span class="line">      <span class="attr">template</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../public/index.html&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// æå–cssæˆå•ç‹¬æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// å®šä¹‰è¾“å‡ºæ–‡ä»¶åå’Œç›®å½•</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&quot;static/css/main.css&quot;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// devServer: &#123;</span></span><br><span class="line">  <span class="comment">//   host: &quot;localhost&quot;, // å¯åŠ¨æœåŠ¡å™¨åŸŸå</span></span><br><span class="line">  <span class="comment">//   port: &quot;3000&quot;, // å¯åŠ¨æœåŠ¡å™¨ç«¯å£å·</span></span><br><span class="line">  <span class="comment">//   open: true, // æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="è¿è¡ŒæŒ‡ä»¤-v13">è¿è¡ŒæŒ‡ä»¤</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure><h2 id="Css-å‹ç¼©">Css å‹ç¼©</h2><h3 id="ä¸‹è½½åŒ…-v9">ä¸‹è½½åŒ…</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i css-minimizer-webpack-plugin -D</span><br></pre></td></tr></table></figure><h3 id="é…ç½®-v14">é…ç½®</h3><ul><li>webpack.prod.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;mini-css-extract-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CssMinimizerPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;css-minimizer-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å¤„ç†æ ·å¼çš„Loaders</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getStyleLoaders</span> = (<span class="params">preProcessor</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> [</span><br><span class="line">    <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">    <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">          <span class="attr">plugins</span>: [</span><br><span class="line">            <span class="string">&quot;postcss-preset-env&quot;</span>, <span class="comment">// èƒ½è§£å†³å¤§å¤šæ•°æ ·å¼å…¼å®¹æ€§é—®é¢˜</span></span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    preProcessor,</span><br><span class="line">  ].<span class="title function_">filter</span>(<span class="title class_">Boolean</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../dist&quot;</span>), <span class="comment">// ç”Ÿäº§æ¨¡å¼éœ€è¦è¾“å‡º</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/main.js&quot;</span>, <span class="comment">// å°† js æ–‡ä»¶è¾“å‡ºåˆ° static/js ç›®å½•ä¸­</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">        <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(),</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;less-loader&quot;</span>),</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;sass-loader&quot;</span>),</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">        <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;stylus-loader&quot;</span>),</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span>, <span class="comment">// å°äº10kbçš„å›¾ç‰‡ä¼šè¢«base64å¤„ç†</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ° static/imgs ç›®å½•ä¸­</span></span><br><span class="line">          <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶å‘½å [hash:8][ext][query]</span></span><br><span class="line">          <span class="comment">// [hash:8]: hashå€¼å–8ä½</span></span><br><span class="line">          <span class="comment">// [ext]: ä½¿ç”¨ä¹‹å‰çš„æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">          <span class="comment">// [query]: æ·»åŠ ä¹‹å‰çš„queryå‚æ•°</span></span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/imgs/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2?)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/media/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>, <span class="comment">// æ’é™¤node_modulesä»£ç ä¸ç¼–è¯‘</span></span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// æŒ‡å®šæ£€æŸ¥æ–‡ä»¶çš„æ ¹ç›®å½•</span></span><br><span class="line">      <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// ä»¥ public/index.html ä¸ºæ¨¡æ¿åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line">      <span class="comment">// æ–°çš„htmlæ–‡ä»¶æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š1. å†…å®¹å’Œæºæ–‡ä»¶ä¸€è‡´ 2. è‡ªåŠ¨å¼•å…¥æ‰“åŒ…ç”Ÿæˆçš„jsç­‰èµ„æº</span></span><br><span class="line">      <span class="attr">template</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../public/index.html&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// æå–cssæˆå•ç‹¬æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// å®šä¹‰è¾“å‡ºæ–‡ä»¶åå’Œç›®å½•</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&quot;static/css/main.css&quot;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// csså‹ç¼©</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">CssMinimizerPlugin</span>(),</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// devServer: &#123;</span></span><br><span class="line">  <span class="comment">//   host: &quot;localhost&quot;, // å¯åŠ¨æœåŠ¡å™¨åŸŸå</span></span><br><span class="line">  <span class="comment">//   port: &quot;3000&quot;, // å¯åŠ¨æœåŠ¡å™¨ç«¯å£å·</span></span><br><span class="line">  <span class="comment">//   open: true, // æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="è¿è¡ŒæŒ‡ä»¤-v14">è¿è¡ŒæŒ‡ä»¤</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure><h1>html å‹ç¼©</h1><p>é»˜è®¤ç”Ÿäº§æ¨¡å¼å·²ç»å¼€å¯äº†ï¼šhtml å‹ç¼©å’Œ js å‹ç¼©</p><p>ä¸éœ€è¦é¢å¤–è¿›è¡Œé…ç½®</p><h1>æ€»ç»“</h1><p>æˆ‘ä»¬å­¦ä¼šäº† Webpack åŸºæœ¬ä½¿ç”¨ï¼ŒæŒæ¡äº†ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ol><li><p>ä¸¤ç§å¼€å‘æ¨¡å¼</p><ul><li>å¼€å‘æ¨¡å¼ï¼šä»£ç èƒ½ç¼–è¯‘è‡ªåŠ¨åŒ–è¿è¡Œ</li><li>ç”Ÿäº§æ¨¡å¼ï¼šä»£ç ç¼–è¯‘ä¼˜åŒ–è¾“å‡º</li></ul></li><li><p>Webpack åŸºæœ¬åŠŸèƒ½</p><ul><li>å¼€å‘æ¨¡å¼ï¼šå¯ä»¥ç¼–è¯‘ ES Module è¯­æ³•</li><li>ç”Ÿäº§æ¨¡å¼ï¼šå¯ä»¥ç¼–è¯‘ ES Module è¯­æ³•ï¼Œå‹ç¼© js ä»£ç </li></ul></li><li><p>Webpack é…ç½®æ–‡ä»¶</p><ul><li>5 ä¸ªæ ¸å¿ƒæ¦‚å¿µ<ul><li>entry</li><li>output</li><li>loader</li><li>plugins</li><li>mode</li></ul></li><li>devServer é…ç½®</li></ul></li><li><p>Webpack è„šæœ¬æŒ‡ä»¤ç”¨æ³•</p><ul><li><code>webpack</code> ç›´æ¥æ‰“åŒ…è¾“å‡º</li><li><code>webpack serve</code> å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œå†…å­˜ç¼–è¯‘æ‰“åŒ…æ²¡æœ‰è¾“å‡º</li></ul></li></ol><hr><h1>Webpack5é«˜çº§ä¼˜åŒ–</h1><h2 id="ä»‹ç»-v2">ä»‹ç»</h2><p>ä¸»è¦ä»‹ç» Webpack é«˜çº§é…ç½®ã€‚</p><p>æ‰€è°“é«˜çº§é…ç½®å…¶å®å°±æ˜¯è¿›è¡Œ Webpack ä¼˜åŒ–ï¼Œè®©æˆ‘ä»¬ä»£ç åœ¨ç¼–è¯‘/è¿è¡Œæ—¶æ€§èƒ½æ›´å¥½~</p><p>æˆ‘ä»¬ä¼šä»ä»¥ä¸‹è§’åº¦æ¥è¿›è¡Œä¼˜åŒ–ï¼š</p><ol><li>æå‡å¼€å‘ä½“éªŒ</li><li>æå‡æ‰“åŒ…æ„å»ºé€Ÿåº¦</li><li>å‡å°‘ä»£ç ä½“ç§¯</li><li>ä¼˜åŒ–ä»£ç è¿è¡Œæ€§èƒ½</li></ol><h1>æå‡å¼€å‘ä½“éªŒ</h1><h2 id="SourceMap">SourceMap</h2><h3 id="ä¸ºä»€ä¹ˆ">ä¸ºä»€ä¹ˆ</h3><p>å¼€å‘æ—¶æˆ‘ä»¬è¿è¡Œçš„ä»£ç æ˜¯ç»è¿‡ webpack ç¼–è¯‘åçš„ï¼Œä¾‹å¦‚ä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * ATTENTION: The &quot;eval&quot; devtool has been used (maybe by default in mode: &quot;development&quot;).</span></span><br><span class="line"><span class="comment"> * This devtool is neither made for production nor for readable output files.</span></span><br><span class="line"><span class="comment"> * It uses &quot;eval()&quot; calls to create a separate source file in the browser devtools.</span></span><br><span class="line"><span class="comment"> * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)</span></span><br><span class="line"><span class="comment"> * or disable the default devtool with &quot;devtool: false&quot;.</span></span><br><span class="line"><span class="comment"> * If you are looking for production-ready output files, see mode: &quot;production&quot; (https://webpack.js.org/configuration/mode/).</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/******/</span> (<span class="function">() =&gt;</span> &#123; <span class="comment">// webpackBootstrap</span></span><br><span class="line"><span class="comment">/******/</span> <span class="string">&quot;use strict&quot;</span>;</span><br><span class="line"><span class="comment">/******/</span> <span class="keyword">var</span> __webpack_modules__ = (&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***/</span> <span class="string">&quot;./node_modules/css-loader/dist/cjs.js!./node_modules/less-loader/dist/cjs.js!./src/less/index.less&quot;</span>:</span><br><span class="line"><span class="comment">/*!**********************************************************************************************************!*\</span></span><br><span class="line"><span class="comment">  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/less-loader/dist/cjs.js!./src/less/index.less ***!</span></span><br><span class="line"><span class="comment">  \**********************************************************************************************************/</span></span><br><span class="line"><span class="comment">/***/</span> (<span class="function">(<span class="params"><span class="variable language_">module</span>, __webpack_exports__, __webpack_require__</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">eval</span>(<span class="string">&quot;__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, &#123;\n/* harmony export */   \&quot;default\&quot;: () =&gt; (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ &#125;);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/noSourceMaps.js */ \&quot;./node_modules/css-loader/dist/runtime/noSourceMaps.js\&quot;);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ \&quot;./node_modules/css-loader/dist/runtime/api.js\&quot;);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \&quot;.box2 &#123;\\n  width: 100px;\\n  height: 100px;\\n  background-color: deeppink;\\n&#125;\\n\&quot;, \&quot;\&quot;]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n//# sourceURL=webpack://webpack5/./src/less/index.less?./node_modules/css-loader/dist/cjs.js!./node_modules/less-loader/dist/cjs.js&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/***/</span> &#125;),</span><br><span class="line"><span class="comment">// å…¶ä»–çœç•¥</span></span><br></pre></td></tr></table></figure><p>æ‰€æœ‰ css å’Œ js åˆå¹¶æˆäº†ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”å¤šäº†å…¶ä»–ä»£ç ã€‚æ­¤æ—¶å¦‚æœä»£ç è¿è¡Œå‡ºé”™é‚£ä¹ˆæç¤ºä»£ç é”™è¯¯ä½ç½®æˆ‘ä»¬æ˜¯çœ‹ä¸æ‡‚çš„ã€‚ä¸€æ—¦å°†æ¥å¼€å‘ä»£ç æ–‡ä»¶å¾ˆå¤šï¼Œé‚£ä¹ˆå¾ˆéš¾å»å‘ç°é”™è¯¯å‡ºç°åœ¨å“ªé‡Œã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦æ›´åŠ å‡†ç¡®çš„é”™è¯¯æç¤ºï¼Œæ¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½çš„å¼€å‘ä»£ç ã€‚</p><h3 id="æ˜¯ä»€ä¹ˆ">æ˜¯ä»€ä¹ˆ</h3><p>SourceMapï¼ˆæºä»£ç æ˜ å°„ï¼‰æ˜¯ä¸€ä¸ªç”¨æ¥ç”Ÿæˆæºä»£ç ä¸æ„å»ºåä»£ç ä¸€ä¸€æ˜ å°„çš„æ–‡ä»¶çš„æ–¹æ¡ˆã€‚</p><p>å®ƒä¼šç”Ÿæˆä¸€ä¸ª xxx.map æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«æºä»£ç å’Œæ„å»ºåä»£ç æ¯ä¸€è¡Œã€æ¯ä¸€åˆ—çš„æ˜ å°„å…³ç³»ã€‚å½“æ„å»ºåä»£ç å‡ºé”™äº†ï¼Œä¼šé€šè¿‡ xxx.map æ–‡ä»¶ï¼Œä»æ„å»ºåä»£ç å‡ºé”™ä½ç½®æ‰¾åˆ°æ˜ å°„åæºä»£ç å‡ºé”™ä½ç½®ï¼Œä»è€Œè®©æµè§ˆå™¨æç¤ºæºä»£ç æ–‡ä»¶å‡ºé”™ä½ç½®ï¼Œå¸®åŠ©æˆ‘ä»¬æ›´å¿«çš„æ‰¾åˆ°é”™è¯¯æ ¹æºã€‚</p><h3 id="æ€ä¹ˆç”¨">æ€ä¹ˆç”¨</h3><p>é€šè¿‡æŸ¥çœ‹<a href="https://webpack.docschina.org/configuration/devtool/">Webpack DevTool æ–‡æ¡£</a>å¯çŸ¥ï¼ŒSourceMap çš„å€¼æœ‰å¾ˆå¤šç§æƒ…å†µ.</p><p>ä½†å®é™…å¼€å‘æ—¶æˆ‘ä»¬åªéœ€è¦å…³æ³¨ä¸¤ç§æƒ…å†µå³å¯ï¼š</p><ul><li>å¼€å‘æ¨¡å¼ï¼š<code>cheap-module-source-map</code><ul><li>ä¼˜ç‚¹ï¼šæ‰“åŒ…ç¼–è¯‘é€Ÿåº¦å¿«ï¼ŒåªåŒ…å«è¡Œæ˜ å°„</li><li>ç¼ºç‚¹ï¼šæ²¡æœ‰åˆ—æ˜ å°„</li></ul></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// å…¶ä»–çœç•¥</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&quot;cheap-module-source-map&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li><p>ç”Ÿäº§æ¨¡å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source-map</span><br></pre></td></tr></table></figure><ul><li>ä¼˜ç‚¹ï¼šåŒ…å«è¡Œ/åˆ—æ˜ å°„</li><li>ç¼ºç‚¹ï¼šæ‰“åŒ…ç¼–è¯‘é€Ÿåº¦æ›´æ…¢</li></ul></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// å…¶ä»–çœç•¥</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&quot;source-map&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>æå‡æ‰“åŒ…æ„å»ºé€Ÿåº¦</h1><h2 id="HotModuleReplacement">HotModuleReplacement</h2><h3 id="ä¸ºä»€ä¹ˆ-v2">ä¸ºä»€ä¹ˆ</h3><p>å¼€å‘æ—¶æˆ‘ä»¬ä¿®æ”¹äº†å…¶ä¸­ä¸€ä¸ªæ¨¡å—ä»£ç ï¼ŒWebpack é»˜è®¤ä¼šå°†æ‰€æœ‰æ¨¡å—å…¨éƒ¨é‡æ–°æ‰“åŒ…ç¼–è¯‘ï¼Œé€Ÿåº¦å¾ˆæ…¢ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦åšåˆ°ä¿®æ”¹æŸä¸ªæ¨¡å—ä»£ç ï¼Œå°±åªæœ‰è¿™ä¸ªæ¨¡å—ä»£ç éœ€è¦é‡æ–°æ‰“åŒ…ç¼–è¯‘ï¼Œå…¶ä»–æ¨¡å—ä¸å˜ï¼Œè¿™æ ·æ‰“åŒ…é€Ÿåº¦å°±èƒ½å¾ˆå¿«ã€‚</p><h3 id="æ˜¯ä»€ä¹ˆ-v2">æ˜¯ä»€ä¹ˆ</h3><p>HotModuleReplacementï¼ˆHMR/çƒ­æ¨¡å—æ›¿æ¢ï¼‰ï¼šåœ¨ç¨‹åºè¿è¡Œä¸­ï¼Œæ›¿æ¢ã€æ·»åŠ æˆ–åˆ é™¤æ¨¡å—ï¼Œè€Œæ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ã€‚</p><h3 id="æ€ä¹ˆç”¨-v2">æ€ä¹ˆç”¨</h3><ol><li>åŸºæœ¬é…ç½®</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// å…¶ä»–çœç•¥</span></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&quot;localhost&quot;</span>, <span class="comment">// å¯åŠ¨æœåŠ¡å™¨åŸŸå</span></span><br><span class="line">    <span class="attr">port</span>: <span class="string">&quot;3000&quot;</span>, <span class="comment">// å¯åŠ¨æœåŠ¡å™¨ç«¯å£å·</span></span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">    <span class="attr">hot</span>: <span class="literal">true</span>, <span class="comment">// å¼€å¯HMRåŠŸèƒ½ï¼ˆåªèƒ½ç”¨äºå¼€å‘ç¯å¢ƒï¼Œç”Ÿäº§ç¯å¢ƒä¸éœ€è¦äº†ï¼‰</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ css æ ·å¼ç»è¿‡ style-loader å¤„ç†ï¼Œå·²ç»å…·å¤‡ HMR åŠŸèƒ½äº†ã€‚ ä½†æ˜¯ js è¿˜ä¸è¡Œã€‚</p><ol start="2"><li>JS é…ç½®</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> count <span class="keyword">from</span> <span class="string">&quot;./js/count&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> sum <span class="keyword">from</span> <span class="string">&quot;./js/sum&quot;</span>;</span><br><span class="line"><span class="comment">// å¼•å…¥èµ„æºï¼ŒWebpackæ‰ä¼šå¯¹å…¶æ‰“åŒ…</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./css/iconfont.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./css/index.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./less/index.less&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./sass/index.sass&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./sass/index.scss&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./styl/index.styl&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result1 = <span class="title function_">count</span>(<span class="number">2</span>, <span class="number">1</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result1);</span><br><span class="line"><span class="keyword">const</span> result2 = <span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­æ˜¯å¦æ”¯æŒHMRåŠŸèƒ½</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable language_">module</span>.<span class="property">hot</span>) &#123;</span><br><span class="line">  <span class="variable language_">module</span>.<span class="property">hot</span>.<span class="title function_">accept</span>(<span class="string">&quot;./js/count.js&quot;</span>, <span class="keyword">function</span> (<span class="params">count</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> result1 = <span class="title function_">count</span>(<span class="number">2</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(result1);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">module</span>.<span class="property">hot</span>.<span class="title function_">accept</span>(<span class="string">&quot;./js/sum.js&quot;</span>, <span class="keyword">function</span> (<span class="params">sum</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> result2 = <span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(result2);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™æ ·å†™ä¼šå¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥å®é™…å¼€å‘æˆ‘ä»¬ä¼šä½¿ç”¨å…¶ä»– loader æ¥è§£å†³ã€‚</p><p>æ¯”å¦‚ï¼š<a href="https://github.com/vuejs/vue-loader">vue-loader</a>, <a href="https://github.com/gaearon/react-hot-loader">react-hot-loader</a>ã€‚</p><h2 id="OneOf">OneOf</h2><h3 id="ä¸ºä»€ä¹ˆ-v3">ä¸ºä»€ä¹ˆ</h3><p>æ‰“åŒ…æ—¶æ¯ä¸ªæ–‡ä»¶éƒ½ä¼šç»è¿‡æ‰€æœ‰ loader å¤„ç†ï¼Œè™½ç„¶å› ä¸º <code>test</code> æ­£åˆ™åŸå› å®é™…æ²¡æœ‰å¤„ç†ä¸Šï¼Œä½†æ˜¯éƒ½è¦è¿‡ä¸€éã€‚æ¯”è¾ƒæ…¢ã€‚</p><h3 id="æ˜¯ä»€ä¹ˆ-v3">æ˜¯ä»€ä¹ˆ</h3><p>é¡¾åæ€ä¹‰å°±æ˜¯åªèƒ½åŒ¹é…ä¸Šä¸€ä¸ª loader, å‰©ä¸‹çš„å°±ä¸åŒ¹é…äº†ã€‚</p><h3 id="æ€ä¹ˆç”¨-v3">æ€ä¹ˆç”¨</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="literal">undefined</span>, <span class="comment">// å¼€å‘æ¨¡å¼æ²¡æœ‰è¾“å‡ºï¼Œä¸éœ€è¦æŒ‡å®šè¾“å‡ºç›®å½•</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/main.js&quot;</span>, <span class="comment">// å°† js æ–‡ä»¶è¾“å‡ºåˆ° static/js ç›®å½•ä¸­</span></span><br><span class="line">    <span class="comment">// clean: true, // å¼€å‘æ¨¡å¼æ²¡æœ‰è¾“å‡ºï¼Œä¸éœ€è¦æ¸…ç©ºè¾“å‡ºç»“æœ</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">oneOf</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">            <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>],</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;less-loader&quot;</span>],</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;sass-loader&quot;</span>],</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;stylus-loader&quot;</span>],</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp)$/</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">            <span class="attr">parser</span>: &#123;</span><br><span class="line">              <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">                <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span>, <span class="comment">// å°äº10kbçš„å›¾ç‰‡ä¼šè¢«base64å¤„ç†</span></span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">generator</span>: &#123;</span><br><span class="line">              <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ° static/imgs ç›®å½•ä¸­</span></span><br><span class="line">              <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶å‘½å [hash:8][ext][query]</span></span><br><span class="line">              <span class="comment">// [hash:8]: hashå€¼å–8ä½</span></span><br><span class="line">              <span class="comment">// [ext]: ä½¿ç”¨ä¹‹å‰çš„æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">              <span class="comment">// [query]: æ·»åŠ ä¹‹å‰çš„queryå‚æ•°</span></span><br><span class="line">              <span class="attr">filename</span>: <span class="string">&quot;static/imgs/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2?)$/</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">            <span class="attr">generator</span>: &#123;</span><br><span class="line">              <span class="attr">filename</span>: <span class="string">&quot;static/media/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>, <span class="comment">// æ’é™¤node_modulesä»£ç ä¸ç¼–è¯‘</span></span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// æŒ‡å®šæ£€æŸ¥æ–‡ä»¶çš„æ ¹ç›®å½•</span></span><br><span class="line">      <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// ä»¥ public/index.html ä¸ºæ¨¡æ¿åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line">      <span class="comment">// æ–°çš„htmlæ–‡ä»¶æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š1. å†…å®¹å’Œæºæ–‡ä»¶ä¸€è‡´ 2. è‡ªåŠ¨å¼•å…¥æ‰“åŒ…ç”Ÿæˆçš„jsç­‰èµ„æº</span></span><br><span class="line">      <span class="attr">template</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../public/index.html&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// å¼€å‘æœåŠ¡å™¨</span></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&quot;localhost&quot;</span>, <span class="comment">// å¯åŠ¨æœåŠ¡å™¨åŸŸå</span></span><br><span class="line">    <span class="attr">port</span>: <span class="string">&quot;3000&quot;</span>, <span class="comment">// å¯åŠ¨æœåŠ¡å™¨ç«¯å£å·</span></span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">    <span class="attr">hot</span>: <span class="literal">true</span>, <span class="comment">// å¼€å¯HMRåŠŸèƒ½</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&quot;cheap-module-source-map&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç”Ÿäº§æ¨¡å¼ä¹Ÿæ˜¯å¦‚æ­¤é…ç½®ã€‚</p><h2 id="Include-Exclude">Include/Exclude</h2><h3 id="ä¸ºä»€ä¹ˆ-v4">ä¸ºä»€ä¹ˆ</h3><p>å¼€å‘æ—¶æˆ‘ä»¬éœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„åº“æˆ–æ’ä»¶ï¼Œæ‰€æœ‰æ–‡ä»¶éƒ½ä¸‹è½½åˆ° node_modules ä¸­äº†ã€‚è€Œè¿™äº›æ–‡ä»¶æ˜¯ä¸éœ€è¦ç¼–è¯‘å¯ä»¥ç›´æ¥ä½¿ç”¨çš„ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬åœ¨å¯¹ js æ–‡ä»¶å¤„ç†æ—¶ï¼Œè¦æ’é™¤ node_modules ä¸‹é¢çš„æ–‡ä»¶ã€‚</p><h3 id="æ˜¯ä»€ä¹ˆ-v4">æ˜¯ä»€ä¹ˆ</h3><ul><li>include</li></ul><p>åŒ…å«ï¼Œåªå¤„ç† xxx æ–‡ä»¶</p><ul><li>exclude</li></ul><p>æ’é™¤ï¼Œé™¤äº† xxx æ–‡ä»¶ä»¥å¤–å…¶ä»–æ–‡ä»¶éƒ½å¤„ç†</p><h3 id="æ€ä¹ˆç”¨-v4">æ€ä¹ˆç”¨</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="literal">undefined</span>, <span class="comment">// å¼€å‘æ¨¡å¼æ²¡æœ‰è¾“å‡ºï¼Œä¸éœ€è¦æŒ‡å®šè¾“å‡ºç›®å½•</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/main.js&quot;</span>, <span class="comment">// å°† js æ–‡ä»¶è¾“å‡ºåˆ° static/js ç›®å½•ä¸­</span></span><br><span class="line">    <span class="comment">// clean: true, // å¼€å‘æ¨¡å¼æ²¡æœ‰è¾“å‡ºï¼Œä¸éœ€è¦æ¸…ç©ºè¾“å‡ºç»“æœ</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">oneOf</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">            <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>],</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;less-loader&quot;</span>],</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;sass-loader&quot;</span>],</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;stylus-loader&quot;</span>],</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp)$/</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">            <span class="attr">parser</span>: &#123;</span><br><span class="line">              <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">                <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span>, <span class="comment">// å°äº10kbçš„å›¾ç‰‡ä¼šè¢«base64å¤„ç†</span></span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">generator</span>: &#123;</span><br><span class="line">              <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ° static/imgs ç›®å½•ä¸­</span></span><br><span class="line">              <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶å‘½å [hash:8][ext][query]</span></span><br><span class="line">              <span class="comment">// [hash:8]: hashå€¼å–8ä½</span></span><br><span class="line">              <span class="comment">// [ext]: ä½¿ç”¨ä¹‹å‰çš„æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">              <span class="comment">// [query]: æ·»åŠ ä¹‹å‰çš„queryå‚æ•°</span></span><br><span class="line">              <span class="attr">filename</span>: <span class="string">&quot;static/imgs/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2?)$/</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">            <span class="attr">generator</span>: &#123;</span><br><span class="line">              <span class="attr">filename</span>: <span class="string">&quot;static/media/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            <span class="comment">// exclude: /node_modules/, // æ’é™¤node_modulesä»£ç ä¸ç¼–è¯‘</span></span><br><span class="line">            <span class="attr">include</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>), <span class="comment">// ä¹Ÿå¯ä»¥ç”¨åŒ…å«</span></span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// æŒ‡å®šæ£€æŸ¥æ–‡ä»¶çš„æ ¹ç›®å½•</span></span><br><span class="line">      <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>),</span><br><span class="line">      <span class="attr">exclude</span>: <span class="string">&quot;node_modules&quot;</span>, <span class="comment">// é»˜è®¤å€¼</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// ä»¥ public/index.html ä¸ºæ¨¡æ¿åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line">      <span class="comment">// æ–°çš„htmlæ–‡ä»¶æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š1. å†…å®¹å’Œæºæ–‡ä»¶ä¸€è‡´ 2. è‡ªåŠ¨å¼•å…¥æ‰“åŒ…ç”Ÿæˆçš„jsç­‰èµ„æº</span></span><br><span class="line">      <span class="attr">template</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../public/index.html&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// å¼€å‘æœåŠ¡å™¨</span></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&quot;localhost&quot;</span>, <span class="comment">// å¯åŠ¨æœåŠ¡å™¨åŸŸå</span></span><br><span class="line">    <span class="attr">port</span>: <span class="string">&quot;3000&quot;</span>, <span class="comment">// å¯åŠ¨æœåŠ¡å™¨ç«¯å£å·</span></span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">    <span class="attr">hot</span>: <span class="literal">true</span>, <span class="comment">// å¼€å¯HMRåŠŸèƒ½</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&quot;cheap-module-source-map&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç”Ÿäº§æ¨¡å¼ä¹Ÿæ˜¯å¦‚æ­¤é…ç½®ã€‚</p><h2 id="Cache">Cache</h2><h3 id="ä¸ºä»€ä¹ˆ-v5">ä¸ºä»€ä¹ˆ</h3><p>æ¯æ¬¡æ‰“åŒ…æ—¶ js æ–‡ä»¶éƒ½è¦ç»è¿‡ Eslint æ£€æŸ¥ å’Œ Babel ç¼–è¯‘ï¼Œé€Ÿåº¦æ¯”è¾ƒæ…¢ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç¼“å­˜ä¹‹å‰çš„ Eslint æ£€æŸ¥ å’Œ Babel ç¼–è¯‘ç»“æœï¼Œè¿™æ ·ç¬¬äºŒæ¬¡æ‰“åŒ…æ—¶é€Ÿåº¦å°±ä¼šæ›´å¿«äº†ã€‚</p><h3 id="æ˜¯ä»€ä¹ˆ-v5">æ˜¯ä»€ä¹ˆ</h3><p>å¯¹ Eslint æ£€æŸ¥ å’Œ Babel ç¼–è¯‘ç»“æœè¿›è¡Œç¼“å­˜ã€‚</p><h3 id="æ€ä¹ˆç”¨-v5">æ€ä¹ˆç”¨</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="literal">undefined</span>, <span class="comment">// å¼€å‘æ¨¡å¼æ²¡æœ‰è¾“å‡ºï¼Œä¸éœ€è¦æŒ‡å®šè¾“å‡ºç›®å½•</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/main.js&quot;</span>, <span class="comment">// å°† js æ–‡ä»¶è¾“å‡ºåˆ° static/js ç›®å½•ä¸­</span></span><br><span class="line">    <span class="comment">// clean: true, // å¼€å‘æ¨¡å¼æ²¡æœ‰è¾“å‡ºï¼Œä¸éœ€è¦æ¸…ç©ºè¾“å‡ºç»“æœ</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">oneOf</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">            <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>],</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;less-loader&quot;</span>],</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;sass-loader&quot;</span>],</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">            <span class="attr">use</span>: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;stylus-loader&quot;</span>],</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp)$/</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">            <span class="attr">parser</span>: &#123;</span><br><span class="line">              <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">                <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span>, <span class="comment">// å°äº10kbçš„å›¾ç‰‡ä¼šè¢«base64å¤„ç†</span></span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">generator</span>: &#123;</span><br><span class="line">              <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ° static/imgs ç›®å½•ä¸­</span></span><br><span class="line">              <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶å‘½å [hash:8][ext][query]</span></span><br><span class="line">              <span class="comment">// [hash:8]: hashå€¼å–8ä½</span></span><br><span class="line">              <span class="comment">// [ext]: ä½¿ç”¨ä¹‹å‰çš„æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">              <span class="comment">// [query]: æ·»åŠ ä¹‹å‰çš„queryå‚æ•°</span></span><br><span class="line">              <span class="attr">filename</span>: <span class="string">&quot;static/imgs/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2?)$/</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">            <span class="attr">generator</span>: &#123;</span><br><span class="line">              <span class="attr">filename</span>: <span class="string">&quot;static/media/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            <span class="comment">// exclude: /node_modules/, // æ’é™¤node_modulesä»£ç ä¸ç¼–è¯‘</span></span><br><span class="line">            <span class="attr">include</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>), <span class="comment">// ä¹Ÿå¯ä»¥ç”¨åŒ…å«</span></span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">              <span class="attr">cacheDirectory</span>: <span class="literal">true</span>, <span class="comment">// å¼€å¯babelç¼–è¯‘ç¼“å­˜</span></span><br><span class="line">              <span class="attr">cacheCompression</span>: <span class="literal">false</span>, <span class="comment">// ç¼“å­˜æ–‡ä»¶ä¸è¦å‹ç¼©</span></span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// æŒ‡å®šæ£€æŸ¥æ–‡ä»¶çš„æ ¹ç›®å½•</span></span><br><span class="line">      <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>),</span><br><span class="line">      <span class="attr">exclude</span>: <span class="string">&quot;node_modules&quot;</span>, <span class="comment">// é»˜è®¤å€¼</span></span><br><span class="line">      <span class="attr">cache</span>: <span class="literal">true</span>, <span class="comment">// å¼€å¯ç¼“å­˜</span></span><br><span class="line">      <span class="comment">// ç¼“å­˜ç›®å½•</span></span><br><span class="line">      <span class="attr">cacheLocation</span>: path.<span class="title function_">resolve</span>(</span><br><span class="line">        __dirname,</span><br><span class="line">        <span class="string">&quot;../node_modules/.cache/.eslintcache&quot;</span></span><br><span class="line">      ),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// ä»¥ public/index.html ä¸ºæ¨¡æ¿åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line">      <span class="comment">// æ–°çš„htmlæ–‡ä»¶æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š1. å†…å®¹å’Œæºæ–‡ä»¶ä¸€è‡´ 2. è‡ªåŠ¨å¼•å…¥æ‰“åŒ…ç”Ÿæˆçš„jsç­‰èµ„æº</span></span><br><span class="line">      <span class="attr">template</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../public/index.html&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// å¼€å‘æœåŠ¡å™¨</span></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&quot;localhost&quot;</span>, <span class="comment">// å¯åŠ¨æœåŠ¡å™¨åŸŸå</span></span><br><span class="line">    <span class="attr">port</span>: <span class="string">&quot;3000&quot;</span>, <span class="comment">// å¯åŠ¨æœåŠ¡å™¨ç«¯å£å·</span></span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">    <span class="attr">hot</span>: <span class="literal">true</span>, <span class="comment">// å¼€å¯HMRåŠŸèƒ½</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&quot;cheap-module-source-map&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="Thead">Thead</h2><h3 id="ä¸ºä»€ä¹ˆ-v6">ä¸ºä»€ä¹ˆ</h3><p>å½“é¡¹ç›®è¶Šæ¥è¶Šåºå¤§æ—¶ï¼Œæ‰“åŒ…é€Ÿåº¦è¶Šæ¥è¶Šæ…¢ï¼Œç”šè‡³äºéœ€è¦ä¸€ä¸ªä¸‹åˆæ‰èƒ½æ‰“åŒ…å‡ºæ¥ä»£ç ã€‚è¿™ä¸ªé€Ÿåº¦æ˜¯æ¯”è¾ƒæ…¢çš„ã€‚</p><p>æˆ‘ä»¬æƒ³è¦ç»§ç»­æå‡æ‰“åŒ…é€Ÿåº¦ï¼Œå…¶å®å°±æ˜¯è¦æå‡ js çš„æ‰“åŒ…é€Ÿåº¦ï¼Œå› ä¸ºå…¶ä»–æ–‡ä»¶éƒ½æ¯”è¾ƒå°‘ã€‚</p><p>è€Œå¯¹ js æ–‡ä»¶å¤„ç†ä¸»è¦å°±æ˜¯ eslint ã€babelã€Terser ä¸‰ä¸ªå·¥å…·ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æå‡å®ƒä»¬çš„è¿è¡Œé€Ÿåº¦ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å¼€å¯å¤šè¿›ç¨‹åŒæ—¶å¤„ç† js æ–‡ä»¶ï¼Œè¿™æ ·é€Ÿåº¦å°±æ¯”ä¹‹å‰çš„å•è¿›ç¨‹æ‰“åŒ…æ›´å¿«äº†ã€‚</p><h3 id="æ˜¯ä»€ä¹ˆ-v6">æ˜¯ä»€ä¹ˆ</h3><p>å¤šè¿›ç¨‹æ‰“åŒ…ï¼šå¼€å¯ç”µè„‘çš„å¤šä¸ªè¿›ç¨‹åŒæ—¶å¹²ä¸€ä»¶äº‹ï¼Œé€Ÿåº¦æ›´å¿«ã€‚</p><p><strong>éœ€è¦æ³¨æ„ï¼šè¯·ä»…åœ¨ç‰¹åˆ«è€—æ—¶çš„æ“ä½œä¸­ä½¿ç”¨ï¼Œå› ä¸ºæ¯ä¸ªè¿›ç¨‹å¯åŠ¨å°±æœ‰å¤§çº¦ä¸º 600ms å·¦å³å¼€é”€ã€‚</strong></p><h3 id="æ€ä¹ˆç”¨-v6">æ€ä¹ˆç”¨</h3><p>æˆ‘ä»¬å¯åŠ¨è¿›ç¨‹çš„æ•°é‡å°±æ˜¯æˆ‘ä»¬ CPU çš„æ ¸æ•°ã€‚</p><ol><li>å¦‚ä½•è·å– CPU çš„æ ¸æ•°ï¼Œå› ä¸ºæ¯ä¸ªç”µè„‘éƒ½ä¸ä¸€æ ·ã€‚</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// nodejsæ ¸å¿ƒæ¨¡å—ï¼Œç›´æ¥ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">const</span> os = <span class="built_in">require</span>(<span class="string">&quot;os&quot;</span>);</span><br><span class="line"><span class="comment">// cpuæ ¸æ•°</span></span><br><span class="line"><span class="keyword">const</span> threads = os.<span class="title function_">cpus</span>().<span class="property">length</span>;</span><br></pre></td></tr></table></figure><ol start="2"><li>ä¸‹è½½åŒ…</li></ol><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i thread-loader -D</span><br></pre></td></tr></table></figure><ol start="3"><li>ä½¿ç”¨</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> os = <span class="built_in">require</span>(<span class="string">&quot;os&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;mini-css-extract-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CssMinimizerPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;css-minimizer-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">TerserPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;terser-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// cpuæ ¸æ•°</span></span><br><span class="line"><span class="keyword">const</span> threads = os.<span class="title function_">cpus</span>().<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å¤„ç†æ ·å¼çš„Loaders</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getStyleLoaders</span> = (<span class="params">preProcessor</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> [</span><br><span class="line">    <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">    <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">          <span class="attr">plugins</span>: [</span><br><span class="line">            <span class="string">&quot;postcss-preset-env&quot;</span>, <span class="comment">// èƒ½è§£å†³å¤§å¤šæ•°æ ·å¼å…¼å®¹æ€§é—®é¢˜</span></span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    preProcessor,</span><br><span class="line">  ].<span class="title function_">filter</span>(<span class="title class_">Boolean</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../dist&quot;</span>), <span class="comment">// ç”Ÿäº§æ¨¡å¼éœ€è¦è¾“å‡º</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/main.js&quot;</span>, <span class="comment">// å°† js æ–‡ä»¶è¾“å‡ºåˆ° static/js ç›®å½•ä¸­</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">oneOf</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">            <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;less-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;sass-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;stylus-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp)$/</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">            <span class="attr">parser</span>: &#123;</span><br><span class="line">              <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">                <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span>, <span class="comment">// å°äº10kbçš„å›¾ç‰‡ä¼šè¢«base64å¤„ç†</span></span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">generator</span>: &#123;</span><br><span class="line">              <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ° static/imgs ç›®å½•ä¸­</span></span><br><span class="line">              <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶å‘½å [hash:8][ext][query]</span></span><br><span class="line">              <span class="comment">// [hash:8]: hashå€¼å–8ä½</span></span><br><span class="line">              <span class="comment">// [ext]: ä½¿ç”¨ä¹‹å‰çš„æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">              <span class="comment">// [query]: æ·»åŠ ä¹‹å‰çš„queryå‚æ•°</span></span><br><span class="line">              <span class="attr">filename</span>: <span class="string">&quot;static/imgs/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2?)$/</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">            <span class="attr">generator</span>: &#123;</span><br><span class="line">              <span class="attr">filename</span>: <span class="string">&quot;static/media/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            <span class="comment">// exclude: /node_modules/, // æ’é™¤node_modulesä»£ç ä¸ç¼–è¯‘</span></span><br><span class="line">            <span class="attr">include</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>), <span class="comment">// ä¹Ÿå¯ä»¥ç”¨åŒ…å«</span></span><br><span class="line">            <span class="attr">use</span>: [</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="attr">loader</span>: <span class="string">&quot;thread-loader&quot;</span>, <span class="comment">// å¼€å¯å¤šè¿›ç¨‹</span></span><br><span class="line">                <span class="attr">options</span>: &#123;</span><br><span class="line">                  <span class="attr">workers</span>: threads, <span class="comment">// æ•°é‡</span></span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">                <span class="attr">options</span>: &#123;</span><br><span class="line">                  <span class="attr">cacheDirectory</span>: <span class="literal">true</span>, <span class="comment">// å¼€å¯babelç¼–è¯‘ç¼“å­˜</span></span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;,</span><br><span class="line">            ],</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// æŒ‡å®šæ£€æŸ¥æ–‡ä»¶çš„æ ¹ç›®å½•</span></span><br><span class="line">      <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>),</span><br><span class="line">      <span class="attr">exclude</span>: <span class="string">&quot;node_modules&quot;</span>, <span class="comment">// é»˜è®¤å€¼</span></span><br><span class="line">      <span class="attr">cache</span>: <span class="literal">true</span>, <span class="comment">// å¼€å¯ç¼“å­˜</span></span><br><span class="line">      <span class="comment">// ç¼“å­˜ç›®å½•</span></span><br><span class="line">      <span class="attr">cacheLocation</span>: path.<span class="title function_">resolve</span>(</span><br><span class="line">        __dirname,</span><br><span class="line">        <span class="string">&quot;../node_modules/.cache/.eslintcache&quot;</span></span><br><span class="line">      ),</span><br><span class="line">      threads, <span class="comment">// å¼€å¯å¤šè¿›ç¨‹</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// ä»¥ public/index.html ä¸ºæ¨¡æ¿åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line">      <span class="comment">// æ–°çš„htmlæ–‡ä»¶æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š1. å†…å®¹å’Œæºæ–‡ä»¶ä¸€è‡´ 2. è‡ªåŠ¨å¼•å…¥æ‰“åŒ…ç”Ÿæˆçš„jsç­‰èµ„æº</span></span><br><span class="line">      <span class="attr">template</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../public/index.html&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// æå–cssæˆå•ç‹¬æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// å®šä¹‰è¾“å‡ºæ–‡ä»¶åå’Œç›®å½•</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&quot;static/css/main.css&quot;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// csså‹ç¼©</span></span><br><span class="line">    <span class="comment">// new CssMinimizerPlugin(),</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="attr">minimize</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">minimizer</span>: [</span><br><span class="line">      <span class="comment">// csså‹ç¼©ä¹Ÿå¯ä»¥å†™åˆ°optimization.minimizeré‡Œé¢ï¼Œæ•ˆæœä¸€æ ·çš„</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">CssMinimizerPlugin</span>(),</span><br><span class="line">      <span class="comment">// å½“ç”Ÿäº§æ¨¡å¼ä¼šé»˜è®¤å¼€å¯TerserPluginï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦è¿›è¡Œå…¶ä»–é…ç½®ï¼Œå°±è¦é‡æ–°å†™äº†</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">TerserPlugin</span>(&#123;</span><br><span class="line">        <span class="attr">parallel</span>: threads <span class="comment">// å¼€å¯å¤šè¿›ç¨‹</span></span><br><span class="line">      &#125;)</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// devServer: &#123;</span></span><br><span class="line">  <span class="comment">//   host: &quot;localhost&quot;, // å¯åŠ¨æœåŠ¡å™¨åŸŸå</span></span><br><span class="line">  <span class="comment">//   port: &quot;3000&quot;, // å¯åŠ¨æœåŠ¡å™¨ç«¯å£å·</span></span><br><span class="line">  <span class="comment">//   open: true, // æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&quot;source-map&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ç›®å‰æ‰“åŒ…çš„å†…å®¹éƒ½å¾ˆå°‘ï¼Œæ‰€ä»¥å› ä¸ºå¯åŠ¨è¿›ç¨‹å¼€é”€åŸå› ï¼Œä½¿ç”¨å¤šè¿›ç¨‹æ‰“åŒ…å®é™…ä¸Šä¼šæ˜¾è‘—çš„è®©æˆ‘ä»¬æ‰“åŒ…æ—¶é—´å˜å¾—å¾ˆé•¿ã€‚</p><h1>å‡å°‘ä»£ç ä½“ç§¯</h1><h2 id="Tree-Shaking">Tree Shaking</h2><h3 id="ä¸ºä»€ä¹ˆ-v7">ä¸ºä»€ä¹ˆ</h3><p>å¼€å‘æ—¶æˆ‘ä»¬å®šä¹‰äº†ä¸€äº›å·¥å…·å‡½æ•°åº“ï¼Œæˆ–è€…å¼•ç”¨ç¬¬ä¸‰æ–¹å·¥å…·å‡½æ•°åº“æˆ–ç»„ä»¶åº“ã€‚</p><p>å¦‚æœæ²¡æœ‰ç‰¹æ®Šå¤„ç†çš„è¯æˆ‘ä»¬æ‰“åŒ…æ—¶ä¼šå¼•å…¥æ•´ä¸ªåº“ï¼Œä½†æ˜¯å®é™…ä¸Šå¯èƒ½æˆ‘ä»¬å¯èƒ½åªç”¨ä¸Šæå°éƒ¨åˆ†çš„åŠŸèƒ½ã€‚</p><p>è¿™æ ·å°†æ•´ä¸ªåº“éƒ½æ‰“åŒ…è¿›æ¥ï¼Œä½“ç§¯å°±å¤ªå¤§äº†ã€‚</p><h3 id="æ˜¯ä»€ä¹ˆ-v7">æ˜¯ä»€ä¹ˆ</h3><p><code>Tree Shaking</code> æ˜¯ä¸€ä¸ªæœ¯è¯­ï¼Œé€šå¸¸ç”¨äºæè¿°ç§»é™¤ JavaScript ä¸­çš„æ²¡æœ‰ä½¿ç”¨ä¸Šçš„ä»£ç ã€‚</p><p><strong>æ³¨æ„ï¼šå®ƒä¾èµ– <code>ES Module</code>ã€‚</strong></p><h3 id="æ€ä¹ˆç”¨-v7">æ€ä¹ˆç”¨</h3><p>Webpack å·²ç»é»˜è®¤å¼€å¯äº†è¿™ä¸ªåŠŸèƒ½ï¼Œæ— éœ€å…¶ä»–é…ç½®ã€‚</p><h2 id="Babel-v2">Babel</h2><h3 id="ä¸ºä»€ä¹ˆ-v8">ä¸ºä»€ä¹ˆ</h3><p>Babel ä¸ºç¼–è¯‘çš„æ¯ä¸ªæ–‡ä»¶éƒ½æ’å…¥äº†è¾…åŠ©ä»£ç ï¼Œä½¿ä»£ç ä½“ç§¯è¿‡å¤§ï¼</p><p>Babel å¯¹ä¸€äº›å…¬å…±æ–¹æ³•ä½¿ç”¨äº†éå¸¸å°çš„è¾…åŠ©ä»£ç ï¼Œæ¯”å¦‚ <code>_extend</code>ã€‚é»˜è®¤æƒ…å†µä¸‹ä¼šè¢«æ·»åŠ åˆ°æ¯ä¸€ä¸ªéœ€è¦å®ƒçš„æ–‡ä»¶ä¸­ã€‚</p><p>ä½ å¯ä»¥å°†è¿™äº›è¾…åŠ©ä»£ç ä½œä¸ºä¸€ä¸ªç‹¬ç«‹æ¨¡å—ï¼Œæ¥é¿å…é‡å¤å¼•å…¥ã€‚</p><h3 id="æ˜¯ä»€ä¹ˆ-v8">æ˜¯ä»€ä¹ˆ</h3><p><code>@babel/plugin-transform-runtime</code>: ç¦ç”¨äº† Babel è‡ªåŠ¨å¯¹æ¯ä¸ªæ–‡ä»¶çš„ runtime æ³¨å…¥ï¼Œè€Œæ˜¯å¼•å…¥ <code>@babel/plugin-transform-runtime</code> å¹¶ä¸”ä½¿æ‰€æœ‰è¾…åŠ©ä»£ç ä»è¿™é‡Œå¼•ç”¨ã€‚</p><h3 id="æ€ä¹ˆç”¨-v8">æ€ä¹ˆç”¨</h3><ol><li>ä¸‹è½½åŒ…</li></ol><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i @babel/plugin-transform-runtime -D</span><br></pre></td></tr></table></figure><ol start="2"><li>é…ç½®</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> os = <span class="built_in">require</span>(<span class="string">&quot;os&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;mini-css-extract-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CssMinimizerPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;css-minimizer-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">TerserPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;terser-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// cpuæ ¸æ•°</span></span><br><span class="line"><span class="keyword">const</span> threads = os.<span class="title function_">cpus</span>().<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å¤„ç†æ ·å¼çš„Loaders</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getStyleLoaders</span> = (<span class="params">preProcessor</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> [</span><br><span class="line">    <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">    <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">          <span class="attr">plugins</span>: [</span><br><span class="line">            <span class="string">&quot;postcss-preset-env&quot;</span>, <span class="comment">// èƒ½è§£å†³å¤§å¤šæ•°æ ·å¼å…¼å®¹æ€§é—®é¢˜</span></span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    preProcessor,</span><br><span class="line">  ].<span class="title function_">filter</span>(<span class="title class_">Boolean</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../dist&quot;</span>), <span class="comment">// ç”Ÿäº§æ¨¡å¼éœ€è¦è¾“å‡º</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/main.js&quot;</span>, <span class="comment">// å°† js æ–‡ä»¶è¾“å‡ºåˆ° static/js ç›®å½•ä¸­</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">oneOf</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">            <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;less-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;sass-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;stylus-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp)$/</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">            <span class="attr">parser</span>: &#123;</span><br><span class="line">              <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">                <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span>, <span class="comment">// å°äº10kbçš„å›¾ç‰‡ä¼šè¢«base64å¤„ç†</span></span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">generator</span>: &#123;</span><br><span class="line">              <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ° static/imgs ç›®å½•ä¸­</span></span><br><span class="line">              <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶å‘½å [hash:8][ext][query]</span></span><br><span class="line">              <span class="comment">// [hash:8]: hashå€¼å–8ä½</span></span><br><span class="line">              <span class="comment">// [ext]: ä½¿ç”¨ä¹‹å‰çš„æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">              <span class="comment">// [query]: æ·»åŠ ä¹‹å‰çš„queryå‚æ•°</span></span><br><span class="line">              <span class="attr">filename</span>: <span class="string">&quot;static/imgs/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2?)$/</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">            <span class="attr">generator</span>: &#123;</span><br><span class="line">              <span class="attr">filename</span>: <span class="string">&quot;static/media/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            <span class="comment">// exclude: /node_modules/, // æ’é™¤node_modulesä»£ç ä¸ç¼–è¯‘</span></span><br><span class="line">            <span class="attr">include</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>), <span class="comment">// ä¹Ÿå¯ä»¥ç”¨åŒ…å«</span></span><br><span class="line">            <span class="attr">use</span>: [</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="attr">loader</span>: <span class="string">&quot;thread-loader&quot;</span>, <span class="comment">// å¼€å¯å¤šè¿›ç¨‹</span></span><br><span class="line">                <span class="attr">options</span>: &#123;</span><br><span class="line">                  <span class="attr">workers</span>: threads, <span class="comment">// æ•°é‡</span></span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">                <span class="attr">options</span>: &#123;</span><br><span class="line">                  <span class="attr">cacheDirectory</span>: <span class="literal">true</span>, <span class="comment">// å¼€å¯babelç¼–è¯‘ç¼“å­˜</span></span><br><span class="line">                  <span class="attr">cacheCompression</span>: <span class="literal">false</span>, <span class="comment">// ç¼“å­˜æ–‡ä»¶ä¸è¦å‹ç¼©</span></span><br><span class="line">                  <span class="attr">plugins</span>: [<span class="string">&quot;@babel/plugin-transform-runtime&quot;</span>], <span class="comment">// å‡å°‘ä»£ç ä½“ç§¯</span></span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;,</span><br><span class="line">            ],</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// æŒ‡å®šæ£€æŸ¥æ–‡ä»¶çš„æ ¹ç›®å½•</span></span><br><span class="line">      <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>),</span><br><span class="line">      <span class="attr">exclude</span>: <span class="string">&quot;node_modules&quot;</span>, <span class="comment">// é»˜è®¤å€¼</span></span><br><span class="line">      <span class="attr">cache</span>: <span class="literal">true</span>, <span class="comment">// å¼€å¯ç¼“å­˜</span></span><br><span class="line">      <span class="comment">// ç¼“å­˜ç›®å½•</span></span><br><span class="line">      <span class="attr">cacheLocation</span>: path.<span class="title function_">resolve</span>(</span><br><span class="line">        __dirname,</span><br><span class="line">        <span class="string">&quot;../node_modules/.cache/.eslintcache&quot;</span></span><br><span class="line">      ),</span><br><span class="line">      threads, <span class="comment">// å¼€å¯å¤šè¿›ç¨‹</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// ä»¥ public/index.html ä¸ºæ¨¡æ¿åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line">      <span class="comment">// æ–°çš„htmlæ–‡ä»¶æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š1. å†…å®¹å’Œæºæ–‡ä»¶ä¸€è‡´ 2. è‡ªåŠ¨å¼•å…¥æ‰“åŒ…ç”Ÿæˆçš„jsç­‰èµ„æº</span></span><br><span class="line">      <span class="attr">template</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../public/index.html&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// æå–cssæˆå•ç‹¬æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// å®šä¹‰è¾“å‡ºæ–‡ä»¶åå’Œç›®å½•</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&quot;static/css/main.css&quot;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// csså‹ç¼©</span></span><br><span class="line">    <span class="comment">// new CssMinimizerPlugin(),</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="attr">minimizer</span>: [</span><br><span class="line">      <span class="comment">// csså‹ç¼©ä¹Ÿå¯ä»¥å†™åˆ°optimization.minimizeré‡Œé¢ï¼Œæ•ˆæœä¸€æ ·çš„</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">CssMinimizerPlugin</span>(),</span><br><span class="line">      <span class="comment">// å½“ç”Ÿäº§æ¨¡å¼ä¼šé»˜è®¤å¼€å¯TerserPluginï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦è¿›è¡Œå…¶ä»–é…ç½®ï¼Œå°±è¦é‡æ–°å†™äº†</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">TerserPlugin</span>(&#123;</span><br><span class="line">        <span class="attr">parallel</span>: threads, <span class="comment">// å¼€å¯å¤šè¿›ç¨‹</span></span><br><span class="line">      &#125;),</span><br><span class="line">    ]</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// devServer: &#123;</span></span><br><span class="line">  <span class="comment">//   host: &quot;localhost&quot;, // å¯åŠ¨æœåŠ¡å™¨åŸŸå</span></span><br><span class="line">  <span class="comment">//   port: &quot;3000&quot;, // å¯åŠ¨æœåŠ¡å™¨ç«¯å£å·</span></span><br><span class="line">  <span class="comment">//   open: true, // æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&quot;source-map&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="Image-Minimizer">Image Minimizer</h2><h3 id="ä¸ºä»€ä¹ˆ-v9">ä¸ºä»€ä¹ˆ</h3><p>å¼€å‘å¦‚æœé¡¹ç›®ä¸­å¼•ç”¨äº†è¾ƒå¤šå›¾ç‰‡ï¼Œé‚£ä¹ˆå›¾ç‰‡ä½“ç§¯ä¼šæ¯”è¾ƒå¤§ï¼Œå°†æ¥è¯·æ±‚é€Ÿåº¦æ¯”è¾ƒæ…¢ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å¯¹å›¾ç‰‡è¿›è¡Œå‹ç¼©ï¼Œå‡å°‘å›¾ç‰‡ä½“ç§¯ã€‚</p><p><strong>æ³¨æ„ï¼šå¦‚æœé¡¹ç›®ä¸­å›¾ç‰‡éƒ½æ˜¯åœ¨çº¿é“¾æ¥ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦äº†ã€‚æœ¬åœ°é¡¹ç›®é™æ€å›¾ç‰‡æ‰éœ€è¦è¿›è¡Œå‹ç¼©ã€‚</strong></p><h3 id="æ˜¯ä»€ä¹ˆ-v9">æ˜¯ä»€ä¹ˆ</h3><p><code>image-minimizer-webpack-plugin</code>: ç”¨æ¥å‹ç¼©å›¾ç‰‡çš„æ’ä»¶</p><h3 id="æ€ä¹ˆç”¨-v9">æ€ä¹ˆç”¨</h3><ol><li>ä¸‹è½½åŒ…</li></ol><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i image-minimizer-webpack-plugin imagemin -D</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰å‰©ä¸‹åŒ…éœ€è¦ä¸‹è½½ï¼Œæœ‰ä¸¤ç§æ¨¡å¼ï¼š</p><ul><li>æ— æŸå‹ç¼©</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install imagemin-gifsicle imagemin-jpegtran imagemin-optipng imagemin-svgo -D</span><br></pre></td></tr></table></figure><ul><li>æœ‰æŸå‹ç¼©</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install imagemin-gifsicle imagemin-mozjpeg imagemin-pngquant imagemin-svgo -D</span><br></pre></td></tr></table></figure><blockquote><p><a href="https://baike.baidu.com/item/%E6%97%A0%E6%8D%9F%E3%80%81%E6%9C%89%E6%8D%9F%E5%8E%8B%E7%BC%A9">æœ‰æŸ/æ— æŸå‹ç¼©çš„åŒºåˆ«</a></p></blockquote><ol start="2"><li>é…ç½®</li></ol><p>æˆ‘ä»¬ä»¥æ— æŸå‹ç¼©é…ç½®ä¸ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> os = <span class="built_in">require</span>(<span class="string">&quot;os&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;mini-css-extract-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CssMinimizerPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;css-minimizer-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">TerserPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;terser-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ImageMinimizerPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;image-minimizer-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// cpuæ ¸æ•°</span></span><br><span class="line"><span class="keyword">const</span> threads = os.<span class="title function_">cpus</span>().<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å¤„ç†æ ·å¼çš„Loaders</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getStyleLoaders</span> = (<span class="params">preProcessor</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> [</span><br><span class="line">    <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">    <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">          <span class="attr">plugins</span>: [</span><br><span class="line">            <span class="string">&quot;postcss-preset-env&quot;</span>, <span class="comment">// èƒ½è§£å†³å¤§å¤šæ•°æ ·å¼å…¼å®¹æ€§é—®é¢˜</span></span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    preProcessor,</span><br><span class="line">  ].<span class="title function_">filter</span>(<span class="title class_">Boolean</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../dist&quot;</span>), <span class="comment">// ç”Ÿäº§æ¨¡å¼éœ€è¦è¾“å‡º</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/main.js&quot;</span>, <span class="comment">// å°† js æ–‡ä»¶è¾“å‡ºåˆ° static/js ç›®å½•ä¸­</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">oneOf</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">            <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;less-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;sass-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;stylus-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|svg)$/</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">            <span class="attr">parser</span>: &#123;</span><br><span class="line">              <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">                <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span>, <span class="comment">// å°äº10kbçš„å›¾ç‰‡ä¼šè¢«base64å¤„ç†</span></span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">generator</span>: &#123;</span><br><span class="line">              <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ° static/imgs ç›®å½•ä¸­</span></span><br><span class="line">              <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶å‘½å [hash:8][ext][query]</span></span><br><span class="line">              <span class="comment">// [hash:8]: hashå€¼å–8ä½</span></span><br><span class="line">              <span class="comment">// [ext]: ä½¿ç”¨ä¹‹å‰çš„æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">              <span class="comment">// [query]: æ·»åŠ ä¹‹å‰çš„queryå‚æ•°</span></span><br><span class="line">              <span class="attr">filename</span>: <span class="string">&quot;static/imgs/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2?)$/</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">            <span class="attr">generator</span>: &#123;</span><br><span class="line">              <span class="attr">filename</span>: <span class="string">&quot;static/media/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            <span class="comment">// exclude: /node_modules/, // æ’é™¤node_modulesä»£ç ä¸ç¼–è¯‘</span></span><br><span class="line">            <span class="attr">include</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>), <span class="comment">// ä¹Ÿå¯ä»¥ç”¨åŒ…å«</span></span><br><span class="line">            <span class="attr">use</span>: [</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="attr">loader</span>: <span class="string">&quot;thread-loader&quot;</span>, <span class="comment">// å¼€å¯å¤šè¿›ç¨‹</span></span><br><span class="line">                <span class="attr">options</span>: &#123;</span><br><span class="line">                  <span class="attr">workers</span>: threads, <span class="comment">// æ•°é‡</span></span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">                <span class="attr">options</span>: &#123;</span><br><span class="line">                  <span class="attr">cacheDirectory</span>: <span class="literal">true</span>, <span class="comment">// å¼€å¯babelç¼–è¯‘ç¼“å­˜</span></span><br><span class="line">                  <span class="attr">cacheCompression</span>: <span class="literal">false</span>, <span class="comment">// ç¼“å­˜æ–‡ä»¶ä¸è¦å‹ç¼©</span></span><br><span class="line">                  <span class="attr">plugins</span>: [<span class="string">&quot;@babel/plugin-transform-runtime&quot;</span>], <span class="comment">// å‡å°‘ä»£ç ä½“ç§¯</span></span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;,</span><br><span class="line">            ],</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// æŒ‡å®šæ£€æŸ¥æ–‡ä»¶çš„æ ¹ç›®å½•</span></span><br><span class="line">      <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>),</span><br><span class="line">      <span class="attr">exclude</span>: <span class="string">&quot;node_modules&quot;</span>, <span class="comment">// é»˜è®¤å€¼</span></span><br><span class="line">      <span class="attr">cache</span>: <span class="literal">true</span>, <span class="comment">// å¼€å¯ç¼“å­˜</span></span><br><span class="line">      <span class="comment">// ç¼“å­˜ç›®å½•</span></span><br><span class="line">      <span class="attr">cacheLocation</span>: path.<span class="title function_">resolve</span>(</span><br><span class="line">        __dirname,</span><br><span class="line">        <span class="string">&quot;../node_modules/.cache/.eslintcache&quot;</span></span><br><span class="line">      ),</span><br><span class="line">      threads, <span class="comment">// å¼€å¯å¤šè¿›ç¨‹</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// ä»¥ public/index.html ä¸ºæ¨¡æ¿åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line">      <span class="comment">// æ–°çš„htmlæ–‡ä»¶æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š1. å†…å®¹å’Œæºæ–‡ä»¶ä¸€è‡´ 2. è‡ªåŠ¨å¼•å…¥æ‰“åŒ…ç”Ÿæˆçš„jsç­‰èµ„æº</span></span><br><span class="line">      <span class="attr">template</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../public/index.html&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// æå–cssæˆå•ç‹¬æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// å®šä¹‰è¾“å‡ºæ–‡ä»¶åå’Œç›®å½•</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&quot;static/css/main.css&quot;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// csså‹ç¼©</span></span><br><span class="line">    <span class="comment">// new CssMinimizerPlugin(),</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="attr">minimizer</span>: [</span><br><span class="line">      <span class="comment">// csså‹ç¼©ä¹Ÿå¯ä»¥å†™åˆ°optimization.minimizeré‡Œé¢ï¼Œæ•ˆæœä¸€æ ·çš„</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">CssMinimizerPlugin</span>(),</span><br><span class="line">      <span class="comment">// å½“ç”Ÿäº§æ¨¡å¼ä¼šé»˜è®¤å¼€å¯TerserPluginï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦è¿›è¡Œå…¶ä»–é…ç½®ï¼Œå°±è¦é‡æ–°å†™äº†</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">TerserPlugin</span>(&#123;</span><br><span class="line">        <span class="attr">parallel</span>: threads, <span class="comment">// å¼€å¯å¤šè¿›ç¨‹</span></span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="comment">// å‹ç¼©å›¾ç‰‡</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">ImageMinimizerPlugin</span>(&#123;</span><br><span class="line">        <span class="attr">minimizer</span>: &#123;</span><br><span class="line">          <span class="attr">implementation</span>: <span class="title class_">ImageMinimizerPlugin</span>.<span class="property">imageminGenerate</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">plugins</span>: [</span><br><span class="line">              [<span class="string">&quot;gifsicle&quot;</span>, &#123; <span class="attr">interlaced</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">              [<span class="string">&quot;jpegtran&quot;</span>, &#123; <span class="attr">progressive</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">              [<span class="string">&quot;optipng&quot;</span>, &#123; <span class="attr">optimizationLevel</span>: <span class="number">5</span> &#125;],</span><br><span class="line">              [</span><br><span class="line">                <span class="string">&quot;svgo&quot;</span>,</span><br><span class="line">                &#123;</span><br><span class="line">                  <span class="attr">plugins</span>: [</span><br><span class="line">                    <span class="string">&quot;preset-default&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;prefixIds&quot;</span>,</span><br><span class="line">                    &#123;</span><br><span class="line">                      <span class="attr">name</span>: <span class="string">&quot;sortAttrs&quot;</span>,</span><br><span class="line">                      <span class="attr">params</span>: &#123;</span><br><span class="line">                        <span class="attr">xmlnsOrder</span>: <span class="string">&quot;alphabetical&quot;</span>,</span><br><span class="line">                      &#125;,</span><br><span class="line">                    &#125;,</span><br><span class="line">                  ],</span><br><span class="line">                &#125;,</span><br><span class="line">              ],</span><br><span class="line">            ],</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;),</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// devServer: &#123;</span></span><br><span class="line">  <span class="comment">//   host: &quot;localhost&quot;, // å¯åŠ¨æœåŠ¡å™¨åŸŸå</span></span><br><span class="line">  <span class="comment">//   port: &quot;3000&quot;, // å¯åŠ¨æœåŠ¡å™¨ç«¯å£å·</span></span><br><span class="line">  <span class="comment">//   open: true, // æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&quot;source-map&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>ä¼˜åŒ–ä»£ç è¿è¡Œæ€§èƒ½</h1><h2 id="Code-Split">Code Split</h2><h3 id="ä¸ºä»€ä¹ˆ-v10">ä¸ºä»€ä¹ˆ</h3><p>æ‰“åŒ…ä»£ç æ—¶ä¼šå°†æ‰€æœ‰ js æ–‡ä»¶æ‰“åŒ…åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œä½“ç§¯å¤ªå¤§äº†ã€‚æˆ‘ä»¬å¦‚æœåªè¦æ¸²æŸ“é¦–é¡µï¼Œå°±åº”è¯¥åªåŠ è½½é¦–é¡µçš„ js æ–‡ä»¶ï¼Œå…¶ä»–æ–‡ä»¶ä¸åº”è¯¥åŠ è½½ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶è¿›è¡Œä»£ç åˆ†å‰²ï¼Œç”Ÿæˆå¤šä¸ª js æ–‡ä»¶ï¼Œæ¸²æŸ“å“ªä¸ªé¡µé¢å°±åªåŠ è½½æŸä¸ª js æ–‡ä»¶ï¼Œè¿™æ ·åŠ è½½çš„èµ„æºå°±å°‘ï¼Œé€Ÿåº¦å°±æ›´å¿«ã€‚</p><h3 id="æ˜¯ä»€ä¹ˆ-v10">æ˜¯ä»€ä¹ˆ</h3><p>ä»£ç åˆ†å‰²ï¼ˆCode Splitï¼‰ä¸»è¦åšäº†ä¸¤ä»¶äº‹ï¼š</p><ol><li>åˆ†å‰²æ–‡ä»¶ï¼šå°†æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶è¿›è¡Œåˆ†å‰²ï¼Œç”Ÿæˆå¤šä¸ª js æ–‡ä»¶ã€‚</li><li>æŒ‰éœ€åŠ è½½ï¼šéœ€è¦å“ªä¸ªæ–‡ä»¶å°±åŠ è½½å“ªä¸ªæ–‡ä»¶ã€‚</li></ol><h3 id="æ€ä¹ˆç”¨-v10">æ€ä¹ˆç”¨</h3><p>ä»£ç åˆ†å‰²å®ç°æ–¹å¼æœ‰ä¸åŒçš„æ–¹å¼ï¼Œä¸ºäº†æ›´åŠ æ–¹ä¾¿ä½“ç°å®ƒä»¬ä¹‹é—´çš„å·®å¼‚ï¼Œæˆ‘ä»¬ä¼šåˆ†åˆ«åˆ›å»ºæ–°çš„æ–‡ä»¶æ¥æ¼”ç¤º</p><h5 id="1-å¤šå…¥å£">1. å¤šå…¥å£</h5><ol><li>æ–‡ä»¶ç›®å½•</li></ol><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ public</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">|   â”œâ”€â”€ app.js</span><br><span class="line">|   â””â”€â”€ main.js</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â””â”€â”€ webpack.config.js</span><br></pre></td></tr></table></figure><ol start="2"><li>ä¸‹è½½åŒ…</li></ol><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack webpack-cli html-webpack-plugin -D</span><br></pre></td></tr></table></figure><ol start="3"><li>æ–°å»ºæ–‡ä»¶</li></ol><p>å†…å®¹æ— å…³ç´§è¦ï¼Œä¸»è¦è§‚å¯Ÿæ‰“åŒ…è¾“å‡ºçš„ç»“æœ</p><ul><li>app.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello app&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>main.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello main&quot;</span>);</span><br></pre></td></tr></table></figure><ol start="4"><li>é…ç½®</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// å•å…¥å£</span></span><br><span class="line">  <span class="comment">// entry: &#x27;./src/main.js&#x27;,</span></span><br><span class="line">  <span class="comment">// å¤šå…¥å£</span></span><br><span class="line">  <span class="attr">entry</span>: &#123;</span><br><span class="line">    <span class="attr">main</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">    <span class="attr">app</span>: <span class="string">&quot;./src/app.js&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;./dist&quot;</span>),</span><br><span class="line">    <span class="comment">// [name]æ˜¯webpackå‘½åè§„åˆ™ï¼Œä½¿ç”¨chunkçš„nameä½œä¸ºè¾“å‡ºçš„æ–‡ä»¶åã€‚</span></span><br><span class="line">    <span class="comment">// ä»€ä¹ˆæ˜¯chunkï¼Ÿæ‰“åŒ…çš„èµ„æºå°±æ˜¯chunkï¼Œè¾“å‡ºå‡ºå»å«bundleã€‚</span></span><br><span class="line">    <span class="comment">// chunkçš„nameæ˜¯å•¥å‘¢ï¼Ÿ æ¯”å¦‚ï¼š entryä¸­xxx: &quot;./src/xxx.js&quot;, nameå°±æ˜¯xxxã€‚æ³¨æ„æ˜¯å‰é¢çš„xxxï¼Œå’Œæ–‡ä»¶åæ— å…³ã€‚</span></span><br><span class="line">    <span class="comment">// ä¸ºä»€ä¹ˆéœ€è¦è¿™æ ·å‘½åå‘¢ï¼Ÿå¦‚æœè¿˜æ˜¯ä¹‹å‰å†™æ³•main.jsï¼Œé‚£ä¹ˆæ‰“åŒ…ç”Ÿæˆä¸¤ä¸ªjsæ–‡ä»¶éƒ½ä¼šå«åšmain.jsä¼šå‘ç”Ÿè¦†ç›–ã€‚(å®é™…ä¸Šä¼šç›´æ¥æŠ¥é”™çš„)</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;js/[name].js&quot;</span>,</span><br><span class="line">    <span class="attr">clear</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">template</span>: <span class="string">&quot;./public/index.html&quot;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="5"><li>è¿è¡ŒæŒ‡ä»¤</li></ol><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶åœ¨ dist ç›®å½•æˆ‘ä»¬èƒ½çœ‹åˆ°è¾“å‡ºäº†ä¸¤ä¸ª js æ–‡ä»¶ã€‚</p><p>æ€»ç»“ï¼šé…ç½®äº†å‡ ä¸ªå…¥å£ï¼Œè‡³å°‘è¾“å‡ºå‡ ä¸ª js æ–‡ä»¶ã€‚</p><h5 id="2-æå–é‡å¤ä»£ç ">2. æå–é‡å¤ä»£ç </h5><p>å¦‚æœå¤šå…¥å£æ–‡ä»¶ä¸­éƒ½å¼•ç”¨äº†åŒä¸€ä»½ä»£ç ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›è¿™ä»½ä»£ç è¢«æ‰“åŒ…åˆ°ä¸¤ä¸ªæ–‡ä»¶ä¸­ï¼Œå¯¼è‡´ä»£ç é‡å¤ï¼Œä½“ç§¯æ›´å¤§ã€‚</p><p>æˆ‘ä»¬éœ€è¦æå–å¤šå…¥å£çš„é‡å¤ä»£ç ï¼Œåªæ‰“åŒ…ç”Ÿæˆä¸€ä¸ª js æ–‡ä»¶ï¼Œå…¶ä»–æ–‡ä»¶å¼•ç”¨å®ƒå°±å¥½ã€‚</p><ol><li>ä¿®æ”¹æ–‡ä»¶</li></ol><ul><li>app.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; sum &#125; <span class="keyword">from</span> <span class="string">&quot;./math&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello app&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>));</span><br></pre></td></tr></table></figure><ul><li>main.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; sum &#125; <span class="keyword">from</span> <span class="string">&quot;./math&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello main&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>));</span><br></pre></td></tr></table></figure><ul><li>math.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">sum</span> = (<span class="params">...args</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> args.<span class="title function_">reduce</span>(<span class="function">(<span class="params">p, c</span>) =&gt;</span> p + c, <span class="number">0</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="2"><li>ä¿®æ”¹é…ç½®æ–‡ä»¶</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// å•å…¥å£</span></span><br><span class="line">  <span class="comment">// entry: &#x27;./src/main.js&#x27;,</span></span><br><span class="line">  <span class="comment">// å¤šå…¥å£</span></span><br><span class="line">  <span class="attr">entry</span>: &#123;</span><br><span class="line">    <span class="attr">main</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">    <span class="attr">app</span>: <span class="string">&quot;./src/app.js&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;./dist&quot;</span>),</span><br><span class="line">    <span class="comment">// [name]æ˜¯webpackå‘½åè§„åˆ™ï¼Œä½¿ç”¨chunkçš„nameä½œä¸ºè¾“å‡ºçš„æ–‡ä»¶åã€‚</span></span><br><span class="line">    <span class="comment">// ä»€ä¹ˆæ˜¯chunkï¼Ÿæ‰“åŒ…çš„èµ„æºå°±æ˜¯chunkï¼Œè¾“å‡ºå‡ºå»å«bundleã€‚</span></span><br><span class="line">    <span class="comment">// chunkçš„nameæ˜¯å•¥å‘¢ï¼Ÿ æ¯”å¦‚ï¼š entryä¸­xxx: &quot;./src/xxx.js&quot;, nameå°±æ˜¯xxxã€‚æ³¨æ„æ˜¯å‰é¢çš„xxxï¼Œå’Œæ–‡ä»¶åæ— å…³ã€‚</span></span><br><span class="line">    <span class="comment">// ä¸ºä»€ä¹ˆéœ€è¦è¿™æ ·å‘½åå‘¢ï¼Ÿå¦‚æœè¿˜æ˜¯ä¹‹å‰å†™æ³•main.jsï¼Œé‚£ä¹ˆæ‰“åŒ…ç”Ÿæˆä¸¤ä¸ªjsæ–‡ä»¶éƒ½ä¼šå«åšmain.jsä¼šå‘ç”Ÿè¦†ç›–ã€‚(å®é™…ä¸Šä¼šç›´æ¥æŠ¥é”™çš„)</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;js/[name].js&quot;</span>,</span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">template</span>: <span class="string">&quot;./public/index.html&quot;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">  <span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="comment">// ä»£ç åˆ†å‰²é…ç½®</span></span><br><span class="line">    <span class="attr">splitChunks</span>: &#123;</span><br><span class="line">      <span class="attr">chunks</span>: <span class="string">&quot;all&quot;</span>, <span class="comment">// å¯¹æ‰€æœ‰æ¨¡å—éƒ½è¿›è¡Œåˆ†å‰²</span></span><br><span class="line">      <span class="comment">// ä»¥ä¸‹æ˜¯é»˜è®¤å€¼</span></span><br><span class="line">      <span class="comment">// minSize: 20000, // åˆ†å‰²ä»£ç æœ€å°çš„å¤§å°</span></span><br><span class="line">      <span class="comment">// minRemainingSize: 0, // ç±»ä¼¼äºminSizeï¼Œæœ€åç¡®ä¿æå–çš„æ–‡ä»¶å¤§å°ä¸èƒ½ä¸º0</span></span><br><span class="line">      <span class="comment">// minChunks: 1, // è‡³å°‘è¢«å¼•ç”¨çš„æ¬¡æ•°ï¼Œæ»¡è¶³æ¡ä»¶æ‰ä¼šä»£ç åˆ†å‰²</span></span><br><span class="line">      <span class="comment">// maxAsyncRequests: 30, // æŒ‰éœ€åŠ è½½æ—¶å¹¶è¡ŒåŠ è½½çš„æ–‡ä»¶çš„æœ€å¤§æ•°é‡</span></span><br><span class="line">      <span class="comment">// maxInitialRequests: 30, // å…¥å£jsæ–‡ä»¶æœ€å¤§å¹¶è¡Œè¯·æ±‚æ•°é‡</span></span><br><span class="line">      <span class="comment">// enforceSizeThreshold: 50000, // è¶…è¿‡50kbä¸€å®šä¼šå•ç‹¬æ‰“åŒ…ï¼ˆæ­¤æ—¶ä¼šå¿½ç•¥minRemainingSizeã€maxAsyncRequestsã€maxInitialRequestsï¼‰</span></span><br><span class="line">      <span class="comment">// cacheGroups: &#123; // ç»„ï¼Œå“ªäº›æ¨¡å—è¦æ‰“åŒ…åˆ°ä¸€ä¸ªç»„</span></span><br><span class="line">      <span class="comment">//   defaultVendors: &#123; // ç»„å</span></span><br><span class="line">      <span class="comment">//     test: /[\\/]node_modules[\\/]/, // éœ€è¦æ‰“åŒ…åˆ°ä¸€èµ·çš„æ¨¡å—</span></span><br><span class="line">      <span class="comment">//     priority: -10, // æƒé‡ï¼ˆè¶Šå¤§è¶Šé«˜ï¼‰</span></span><br><span class="line">      <span class="comment">//     reuseExistingChunk: true, // å¦‚æœå½“å‰ chunk åŒ…å«å·²ä»ä¸» bundle ä¸­æ‹†åˆ†å‡ºçš„æ¨¡å—ï¼Œåˆ™å®ƒå°†è¢«é‡ç”¨ï¼Œè€Œä¸æ˜¯ç”Ÿæˆæ–°çš„æ¨¡å—</span></span><br><span class="line">      <span class="comment">//   &#125;,</span></span><br><span class="line">      <span class="comment">//   default: &#123; // å…¶ä»–æ²¡æœ‰å†™çš„é…ç½®ä¼šä½¿ç”¨ä¸Šé¢çš„é»˜è®¤å€¼</span></span><br><span class="line">      <span class="comment">//     minChunks: 2, // è¿™é‡Œçš„minChunksæƒé‡æ›´å¤§</span></span><br><span class="line">      <span class="comment">//     priority: -20,</span></span><br><span class="line">      <span class="comment">//     reuseExistingChunk: true,</span></span><br><span class="line">      <span class="comment">//   &#125;,</span></span><br><span class="line">      <span class="comment">// &#125;,</span></span><br><span class="line">      <span class="comment">// ä¿®æ”¹é…ç½®</span></span><br><span class="line">      <span class="attr">cacheGroups</span>: &#123;</span><br><span class="line">        <span class="comment">// ç»„ï¼Œå“ªäº›æ¨¡å—è¦æ‰“åŒ…åˆ°ä¸€ä¸ªç»„</span></span><br><span class="line">        <span class="comment">// defaultVendors: &#123; // ç»„å</span></span><br><span class="line">        <span class="comment">//   test: /[\\/]node_modules[\\/]/, // éœ€è¦æ‰“åŒ…åˆ°ä¸€èµ·çš„æ¨¡å—</span></span><br><span class="line">        <span class="comment">//   priority: -10, // æƒé‡ï¼ˆè¶Šå¤§è¶Šé«˜ï¼‰</span></span><br><span class="line">        <span class="comment">//   reuseExistingChunk: true, // å¦‚æœå½“å‰ chunk åŒ…å«å·²ä»ä¸» bundle ä¸­æ‹†åˆ†å‡ºçš„æ¨¡å—ï¼Œåˆ™å®ƒå°†è¢«é‡ç”¨ï¼Œè€Œä¸æ˜¯ç”Ÿæˆæ–°çš„æ¨¡å—</span></span><br><span class="line">        <span class="comment">// &#125;,</span></span><br><span class="line">        <span class="attr">default</span>: &#123;</span><br><span class="line">          <span class="comment">// å…¶ä»–æ²¡æœ‰å†™çš„é…ç½®ä¼šä½¿ç”¨ä¸Šé¢çš„é»˜è®¤å€¼</span></span><br><span class="line">          <span class="attr">minSize</span>: <span class="number">0</span>, <span class="comment">// æˆ‘ä»¬å®šä¹‰çš„æ–‡ä»¶ä½“ç§¯å¤ªå°äº†ï¼Œæ‰€ä»¥è¦æ”¹æ‰“åŒ…çš„æœ€å°æ–‡ä»¶ä½“ç§¯</span></span><br><span class="line">          <span class="attr">minChunks</span>: <span class="number">2</span>,</span><br><span class="line">          <span class="attr">priority</span>: -<span class="number">20</span>,</span><br><span class="line">          <span class="attr">reuseExistingChunk</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="3"><li>è¿è¡ŒæŒ‡ä»¤</li></ol><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶æˆ‘ä»¬ä¼šå‘ç°ç”Ÿæˆ 3 ä¸ª js æ–‡ä»¶ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå°±æ˜¯æå–çš„å…¬å…±æ¨¡å—ã€‚</p><h5 id="æŒ‰éœ€åŠ è½½ï¼ŒåŠ¨æ€å¯¼å…¥">æŒ‰éœ€åŠ è½½ï¼ŒåŠ¨æ€å¯¼å…¥</h5><p>æƒ³è¦å®ç°æŒ‰éœ€åŠ è½½ï¼ŒåŠ¨æ€å¯¼å…¥æ¨¡å—ã€‚è¿˜éœ€è¦é¢å¤–é…ç½®ï¼š</p><ol><li>ä¿®æ”¹æ–‡ä»¶</li></ol><ul><li>main.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello main&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// åŠ¨æ€å¯¼å…¥ --&gt; å®ç°æŒ‰éœ€åŠ è½½</span></span><br><span class="line">  <span class="comment">// å³ä½¿åªè¢«å¼•ç”¨äº†ä¸€æ¬¡ï¼Œä¹Ÿä¼šä»£ç åˆ†å‰²</span></span><br><span class="line">  <span class="title function_">import</span>(<span class="string">&quot;./math.js&quot;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">&#123; sum &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>));</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>app.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello app&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>public/index.html</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Code Split<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello webpack<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>è®¡ç®—<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>è¿è¡ŒæŒ‡ä»¤</li></ol><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œä¸€æ—¦é€šè¿‡ import åŠ¨æ€å¯¼å…¥è¯­æ³•å¯¼å…¥æ¨¡å—ï¼Œæ¨¡å—å°±è¢«ä»£ç åˆ†å‰²ï¼ŒåŒæ—¶ä¹Ÿèƒ½æŒ‰éœ€åŠ è½½äº†ã€‚</p><h5 id="å•å…¥å£">å•å…¥å£</h5><p>å¼€å‘æ—¶æˆ‘ä»¬å¯èƒ½æ˜¯å•é¡µé¢åº”ç”¨ï¼ˆSPAï¼‰ï¼Œåªæœ‰ä¸€ä¸ªå…¥å£ï¼ˆå•å…¥å£ï¼‰ã€‚é‚£ä¹ˆæˆ‘ä»¬éœ€è¦è¿™æ ·é…ç½®ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// å•å…¥å£</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="comment">// å¤šå…¥å£</span></span><br><span class="line">  <span class="comment">// entry: &#123;</span></span><br><span class="line">  <span class="comment">//   main: &quot;./src/main.js&quot;,</span></span><br><span class="line">  <span class="comment">//   app: &quot;./src/app.js&quot;,</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;./dist&quot;</span>),</span><br><span class="line">    <span class="comment">// [name]æ˜¯webpackå‘½åè§„åˆ™ï¼Œä½¿ç”¨chunkçš„nameä½œä¸ºè¾“å‡ºçš„æ–‡ä»¶åã€‚</span></span><br><span class="line">    <span class="comment">// ä»€ä¹ˆæ˜¯chunkï¼Ÿæ‰“åŒ…çš„èµ„æºå°±æ˜¯chunkï¼Œè¾“å‡ºå‡ºå»å«bundleã€‚</span></span><br><span class="line">    <span class="comment">// chunkçš„nameæ˜¯å•¥å‘¢ï¼Ÿ æ¯”å¦‚ï¼š entryä¸­xxx: &quot;./src/xxx.js&quot;, nameå°±æ˜¯xxxã€‚æ³¨æ„æ˜¯å‰é¢çš„xxxï¼Œå’Œæ–‡ä»¶åæ— å…³ã€‚</span></span><br><span class="line">    <span class="comment">// ä¸ºä»€ä¹ˆéœ€è¦è¿™æ ·å‘½åå‘¢ï¼Ÿå¦‚æœè¿˜æ˜¯ä¹‹å‰å†™æ³•main.jsï¼Œé‚£ä¹ˆæ‰“åŒ…ç”Ÿæˆä¸¤ä¸ªjsæ–‡ä»¶éƒ½ä¼šå«åšmain.jsä¼šå‘ç”Ÿè¦†ç›–ã€‚(å®é™…ä¸Šä¼šç›´æ¥æŠ¥é”™çš„)</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;js/[name].js&quot;</span>,</span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">template</span>: <span class="string">&quot;./public/index.html&quot;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">  <span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="comment">// ä»£ç åˆ†å‰²é…ç½®</span></span><br><span class="line">    <span class="attr">splitChunks</span>: &#123;</span><br><span class="line">      <span class="attr">chunks</span>: <span class="string">&quot;all&quot;</span>, <span class="comment">// å¯¹æ‰€æœ‰æ¨¡å—éƒ½è¿›è¡Œåˆ†å‰²</span></span><br><span class="line">      <span class="comment">// ä»¥ä¸‹æ˜¯é»˜è®¤å€¼</span></span><br><span class="line">      <span class="comment">// minSize: 20000, // åˆ†å‰²ä»£ç æœ€å°çš„å¤§å°</span></span><br><span class="line">      <span class="comment">// minRemainingSize: 0, // ç±»ä¼¼äºminSizeï¼Œæœ€åç¡®ä¿æå–çš„æ–‡ä»¶å¤§å°ä¸èƒ½ä¸º0</span></span><br><span class="line">      <span class="comment">// minChunks: 1, // è‡³å°‘è¢«å¼•ç”¨çš„æ¬¡æ•°ï¼Œæ»¡è¶³æ¡ä»¶æ‰ä¼šä»£ç åˆ†å‰²</span></span><br><span class="line">      <span class="comment">// maxAsyncRequests: 30, // æŒ‰éœ€åŠ è½½æ—¶å¹¶è¡ŒåŠ è½½çš„æ–‡ä»¶çš„æœ€å¤§æ•°é‡</span></span><br><span class="line">      <span class="comment">// maxInitialRequests: 30, // å…¥å£jsæ–‡ä»¶æœ€å¤§å¹¶è¡Œè¯·æ±‚æ•°é‡</span></span><br><span class="line">      <span class="comment">// enforceSizeThreshold: 50000, // è¶…è¿‡50kbä¸€å®šä¼šå•ç‹¬æ‰“åŒ…ï¼ˆæ­¤æ—¶ä¼šå¿½ç•¥minRemainingSizeã€maxAsyncRequestsã€maxInitialRequestsï¼‰</span></span><br><span class="line">      <span class="comment">// cacheGroups: &#123; // ç»„ï¼Œå“ªäº›æ¨¡å—è¦æ‰“åŒ…åˆ°ä¸€ä¸ªç»„</span></span><br><span class="line">      <span class="comment">//   defaultVendors: &#123; // ç»„å</span></span><br><span class="line">      <span class="comment">//     test: /[\\/]node_modules[\\/]/, // éœ€è¦æ‰“åŒ…åˆ°ä¸€èµ·çš„æ¨¡å—</span></span><br><span class="line">      <span class="comment">//     priority: -10, // æƒé‡ï¼ˆè¶Šå¤§è¶Šé«˜ï¼‰</span></span><br><span class="line">      <span class="comment">//     reuseExistingChunk: true, // å¦‚æœå½“å‰ chunk åŒ…å«å·²ä»ä¸» bundle ä¸­æ‹†åˆ†å‡ºçš„æ¨¡å—ï¼Œåˆ™å®ƒå°†è¢«é‡ç”¨ï¼Œè€Œä¸æ˜¯ç”Ÿæˆæ–°çš„æ¨¡å—</span></span><br><span class="line">      <span class="comment">//   &#125;,</span></span><br><span class="line">      <span class="comment">//   default: &#123; // å…¶ä»–æ²¡æœ‰å†™çš„é…ç½®ä¼šä½¿ç”¨ä¸Šé¢çš„é»˜è®¤å€¼</span></span><br><span class="line">      <span class="comment">//     minChunks: 2, // è¿™é‡Œçš„minChunksæƒé‡æ›´å¤§</span></span><br><span class="line">      <span class="comment">//     priority: -20,</span></span><br><span class="line">      <span class="comment">//     reuseExistingChunk: true,</span></span><br><span class="line">      <span class="comment">//   &#125;,</span></span><br><span class="line">      <span class="comment">// &#125;,</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h6 id="æ›´æ–°é…ç½®">æ›´æ–°é…ç½®</h6><p>æœ€ç»ˆæˆ‘ä»¬ä¼šä½¿ç”¨å•å…¥å£+ä»£ç åˆ†å‰²+åŠ¨æ€å¯¼å…¥æ–¹å¼æ¥è¿›è¡Œé…ç½®ã€‚æ›´æ–°ä¹‹å‰çš„é…ç½®æ–‡ä»¶ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.prod.js</span></span><br><span class="line"><span class="keyword">const</span> os = <span class="built_in">require</span>(<span class="string">&quot;os&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;mini-css-extract-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CssMinimizerPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;css-minimizer-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">TerserPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;terser-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ImageMinimizerPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;image-minimizer-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// cpuæ ¸æ•°</span></span><br><span class="line"><span class="keyword">const</span> threads = os.<span class="title function_">cpus</span>().<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å¤„ç†æ ·å¼çš„Loaders</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getStyleLoaders</span> = (<span class="params">preProcessor</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> [</span><br><span class="line">    <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">    <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">          <span class="attr">plugins</span>: [</span><br><span class="line">            <span class="string">&quot;postcss-preset-env&quot;</span>, <span class="comment">// èƒ½è§£å†³å¤§å¤šæ•°æ ·å¼å…¼å®¹æ€§é—®é¢˜</span></span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    preProcessor,</span><br><span class="line">  ].<span class="title function_">filter</span>(<span class="title class_">Boolean</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../dist&quot;</span>), <span class="comment">// ç”Ÿäº§æ¨¡å¼éœ€è¦è¾“å‡º</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/main.js&quot;</span>, <span class="comment">// å°† js æ–‡ä»¶è¾“å‡ºåˆ° static/js ç›®å½•ä¸­</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">oneOf</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">            <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;less-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;sass-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;stylus-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|svg)$/</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">            <span class="attr">parser</span>: &#123;</span><br><span class="line">              <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">                <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span>, <span class="comment">// å°äº10kbçš„å›¾ç‰‡ä¼šè¢«base64å¤„ç†</span></span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">generator</span>: &#123;</span><br><span class="line">              <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ° static/imgs ç›®å½•ä¸­</span></span><br><span class="line">              <span class="comment">// å°†å›¾ç‰‡æ–‡ä»¶å‘½å [hash:8][ext][query]</span></span><br><span class="line">              <span class="comment">// [hash:8]: hashå€¼å–8ä½</span></span><br><span class="line">              <span class="comment">// [ext]: ä½¿ç”¨ä¹‹å‰çš„æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">              <span class="comment">// [query]: æ·»åŠ ä¹‹å‰çš„queryå‚æ•°</span></span><br><span class="line">              <span class="attr">filename</span>: <span class="string">&quot;static/imgs/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2?)$/</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">            <span class="attr">generator</span>: &#123;</span><br><span class="line">              <span class="attr">filename</span>: <span class="string">&quot;static/media/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            <span class="comment">// exclude: /node_modules/, // æ’é™¤node_modulesä»£ç ä¸ç¼–è¯‘</span></span><br><span class="line">            <span class="attr">include</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>), <span class="comment">// ä¹Ÿå¯ä»¥ç”¨åŒ…å«</span></span><br><span class="line">            <span class="attr">use</span>: [</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="attr">loader</span>: <span class="string">&quot;thread-loader&quot;</span>, <span class="comment">// å¼€å¯å¤šè¿›ç¨‹</span></span><br><span class="line">                <span class="attr">options</span>: &#123;</span><br><span class="line">                  <span class="attr">workers</span>: threads, <span class="comment">// æ•°é‡</span></span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">                <span class="attr">options</span>: &#123;</span><br><span class="line">                  <span class="attr">cacheDirectory</span>: <span class="literal">true</span>, <span class="comment">// å¼€å¯babelç¼–è¯‘ç¼“å­˜</span></span><br><span class="line">                  <span class="attr">cacheCompression</span>: <span class="literal">false</span>, <span class="comment">// ç¼“å­˜æ–‡ä»¶ä¸è¦å‹ç¼©</span></span><br><span class="line">                  <span class="attr">plugins</span>: [<span class="string">&quot;@babel/plugin-transform-runtime&quot;</span>], <span class="comment">// å‡å°‘ä»£ç ä½“ç§¯</span></span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;,</span><br><span class="line">            ],</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// æŒ‡å®šæ£€æŸ¥æ–‡ä»¶çš„æ ¹ç›®å½•</span></span><br><span class="line">      <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>),</span><br><span class="line">      <span class="attr">exclude</span>: <span class="string">&quot;node_modules&quot;</span>, <span class="comment">// é»˜è®¤å€¼</span></span><br><span class="line">      <span class="attr">cache</span>: <span class="literal">true</span>, <span class="comment">// å¼€å¯ç¼“å­˜</span></span><br><span class="line">      <span class="comment">// ç¼“å­˜ç›®å½•</span></span><br><span class="line">      <span class="attr">cacheLocation</span>: path.<span class="title function_">resolve</span>(</span><br><span class="line">        __dirname,</span><br><span class="line">        <span class="string">&quot;../node_modules/.cache/.eslintcache&quot;</span></span><br><span class="line">      ),</span><br><span class="line">      threads, <span class="comment">// å¼€å¯å¤šè¿›ç¨‹</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// ä»¥ public/index.html ä¸ºæ¨¡æ¿åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line">      <span class="comment">// æ–°çš„htmlæ–‡ä»¶æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š1. å†…å®¹å’Œæºæ–‡ä»¶ä¸€è‡´ 2. è‡ªåŠ¨å¼•å…¥æ‰“åŒ…ç”Ÿæˆçš„jsç­‰èµ„æº</span></span><br><span class="line">      <span class="attr">template</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../public/index.html&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// æå–cssæˆå•ç‹¬æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// å®šä¹‰è¾“å‡ºæ–‡ä»¶åå’Œç›®å½•</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&quot;static/css/main.css&quot;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// csså‹ç¼©</span></span><br><span class="line">    <span class="comment">// new CssMinimizerPlugin(),</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="attr">minimizer</span>: [</span><br><span class="line">      <span class="comment">// csså‹ç¼©ä¹Ÿå¯ä»¥å†™åˆ°optimization.minimizeré‡Œé¢ï¼Œæ•ˆæœä¸€æ ·çš„</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">CssMinimizerPlugin</span>(),</span><br><span class="line">      <span class="comment">// å½“ç”Ÿäº§æ¨¡å¼ä¼šé»˜è®¤å¼€å¯TerserPluginï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦è¿›è¡Œå…¶ä»–é…ç½®ï¼Œå°±è¦é‡æ–°å†™äº†</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">TerserPlugin</span>(&#123;</span><br><span class="line">        <span class="attr">parallel</span>: threads, <span class="comment">// å¼€å¯å¤šè¿›ç¨‹</span></span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="comment">// å‹ç¼©å›¾ç‰‡</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">ImageMinimizerPlugin</span>(&#123;</span><br><span class="line">        <span class="attr">minimizer</span>: &#123;</span><br><span class="line">          <span class="attr">implementation</span>: <span class="title class_">ImageMinimizerPlugin</span>.<span class="property">imageminGenerate</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">plugins</span>: [</span><br><span class="line">              [<span class="string">&quot;gifsicle&quot;</span>, &#123; <span class="attr">interlaced</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">              [<span class="string">&quot;jpegtran&quot;</span>, &#123; <span class="attr">progressive</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">              [<span class="string">&quot;optipng&quot;</span>, &#123; <span class="attr">optimizationLevel</span>: <span class="number">5</span> &#125;],</span><br><span class="line">              [</span><br><span class="line">                <span class="string">&quot;svgo&quot;</span>,</span><br><span class="line">                &#123;</span><br><span class="line">                  <span class="attr">plugins</span>: [</span><br><span class="line">                    <span class="string">&quot;preset-default&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;prefixIds&quot;</span>,</span><br><span class="line">                    &#123;</span><br><span class="line">                      <span class="attr">name</span>: <span class="string">&quot;sortAttrs&quot;</span>,</span><br><span class="line">                      <span class="attr">params</span>: &#123;</span><br><span class="line">                        <span class="attr">xmlnsOrder</span>: <span class="string">&quot;alphabetical&quot;</span>,</span><br><span class="line">                      &#125;,</span><br><span class="line">                    &#125;,</span><br><span class="line">                  ],</span><br><span class="line">                &#125;,</span><br><span class="line">              ],</span><br><span class="line">            ],</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;),</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// ä»£ç åˆ†å‰²é…ç½®</span></span><br><span class="line">    <span class="attr">splitChunks</span>: &#123;</span><br><span class="line">      <span class="attr">chunks</span>: <span class="string">&quot;all&quot;</span>, <span class="comment">// å¯¹æ‰€æœ‰æ¨¡å—éƒ½è¿›è¡Œåˆ†å‰²</span></span><br><span class="line">      <span class="comment">// å…¶ä»–å†…å®¹ç”¨é»˜è®¤é…ç½®å³å¯</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// devServer: &#123;</span></span><br><span class="line">  <span class="comment">//   host: &quot;localhost&quot;, // å¯åŠ¨æœåŠ¡å™¨åŸŸå</span></span><br><span class="line">  <span class="comment">//   port: &quot;3000&quot;, // å¯åŠ¨æœåŠ¡å™¨ç«¯å£å·</span></span><br><span class="line">  <span class="comment">//   open: true, // æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&quot;source-map&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h5 id="ç»™åŠ¨æ€å¯¼å…¥æ–‡ä»¶å–åç§°">ç»™åŠ¨æ€å¯¼å…¥æ–‡ä»¶å–åç§°</h5><ol><li>ä¿®æ”¹æ–‡ä»¶</li></ol><ul><li>main.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sum <span class="keyword">from</span> <span class="string">&quot;./js/sum&quot;</span>;</span><br><span class="line"><span class="comment">// å¼•å…¥èµ„æºï¼ŒWebpackæ‰ä¼šå¯¹å…¶æ‰“åŒ…</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./css/iconfont.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./css/index.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./less/index.less&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./sass/index.sass&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./sass/index.scss&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./styl/index.styl&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result2 = <span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¸‹ä»£ç ç”Ÿäº§æ¨¡å¼ä¸‹ä¼šåˆ é™¤</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable language_">module</span>.<span class="property">hot</span>) &#123;</span><br><span class="line">  <span class="variable language_">module</span>.<span class="property">hot</span>.<span class="title function_">accept</span>(<span class="string">&quot;./js/sum.js&quot;</span>, <span class="keyword">function</span> (<span class="params">sum</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> result2 = <span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(result2);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onClick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// eslintä¼šå¯¹åŠ¨æ€å¯¼å…¥è¯­æ³•æŠ¥é”™ï¼Œéœ€è¦ä¿®æ”¹eslinté…ç½®æ–‡ä»¶</span></span><br><span class="line">  <span class="comment">// webpackChunkName: &quot;math&quot;ï¼šè¿™æ˜¯webpackåŠ¨æ€å¯¼å…¥æ¨¡å—å‘½åçš„æ–¹å¼</span></span><br><span class="line">  <span class="comment">// &quot;math&quot;å°†æ¥å°±ä¼šä½œä¸º[name]çš„å€¼æ˜¾ç¤ºã€‚</span></span><br><span class="line">  <span class="title function_">import</span>(<span class="comment">/* webpackChunkName: &quot;math&quot; */</span> <span class="string">&quot;./js/math.js&quot;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">&#123; count &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">count</span>(<span class="number">2</span>, <span class="number">1</span>));</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="2"><li>eslint é…ç½®</li></ol><ul><li>ä¸‹è½½åŒ…</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i eslint-plugin-import -D</span><br></pre></td></tr></table></figure><ul><li>é…ç½®</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .eslintrc.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// ç»§æ‰¿ Eslint è§„åˆ™</span></span><br><span class="line">  <span class="attr">extends</span>: [<span class="string">&quot;eslint:recommended&quot;</span>],</span><br><span class="line">  <span class="attr">env</span>: &#123;</span><br><span class="line">    <span class="attr">node</span>: <span class="literal">true</span>, <span class="comment">// å¯ç”¨nodeä¸­å…¨å±€å˜é‡</span></span><br><span class="line">    <span class="attr">browser</span>: <span class="literal">true</span>, <span class="comment">// å¯ç”¨æµè§ˆå™¨ä¸­å…¨å±€å˜é‡</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="string">&quot;import&quot;</span>], <span class="comment">// è§£å†³åŠ¨æ€å¯¼å…¥importè¯­æ³•æŠ¥é”™é—®é¢˜ --&gt; å®é™…ä½¿ç”¨eslint-plugin-importçš„è§„åˆ™è§£å†³çš„</span></span><br><span class="line">  <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">    <span class="attr">ecmaVersion</span>: <span class="number">6</span>,</span><br><span class="line">    <span class="attr">sourceType</span>: <span class="string">&quot;module&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&quot;no-var&quot;</span>: <span class="number">2</span>, <span class="comment">// ä¸èƒ½ä½¿ç”¨ var å®šä¹‰å˜é‡</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="3"><li>ç»Ÿä¸€å‘½åé…ç½®</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> os = <span class="built_in">require</span>(<span class="string">&quot;os&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;mini-css-extract-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CssMinimizerPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;css-minimizer-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">TerserPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;terser-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ImageMinimizerPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;image-minimizer-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// cpuæ ¸æ•°</span></span><br><span class="line"><span class="keyword">const</span> threads = os.<span class="title function_">cpus</span>().<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å¤„ç†æ ·å¼çš„Loaders</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getStyleLoaders</span> = (<span class="params">preProcessor</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> [</span><br><span class="line">    <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">    <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">          <span class="attr">plugins</span>: [</span><br><span class="line">            <span class="string">&quot;postcss-preset-env&quot;</span>, <span class="comment">// èƒ½è§£å†³å¤§å¤šæ•°æ ·å¼å…¼å®¹æ€§é—®é¢˜</span></span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    preProcessor,</span><br><span class="line">  ].<span class="title function_">filter</span>(<span class="title class_">Boolean</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../dist&quot;</span>), <span class="comment">// ç”Ÿäº§æ¨¡å¼éœ€è¦è¾“å‡º</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/[name].js&quot;</span>, <span class="comment">// å…¥å£æ–‡ä»¶æ‰“åŒ…è¾“å‡ºèµ„æºå‘½åæ–¹å¼</span></span><br><span class="line">    <span class="attr">chunkFilename</span>: <span class="string">&quot;static/js/[name].chunk.js&quot;</span>, <span class="comment">// åŠ¨æ€å¯¼å…¥è¾“å‡ºèµ„æºå‘½åæ–¹å¼</span></span><br><span class="line">    <span class="attr">assetModuleFilename</span>: <span class="string">&quot;static/media/[name].[hash][ext]&quot;</span>, <span class="comment">// å›¾ç‰‡ã€å­—ä½“ç­‰èµ„æºå‘½åæ–¹å¼ï¼ˆæ³¨æ„ç”¨hashï¼‰</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">oneOf</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">            <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;less-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;sass-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;stylus-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|svg)$/</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">            <span class="attr">parser</span>: &#123;</span><br><span class="line">              <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">                <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span>, <span class="comment">// å°äº10kbçš„å›¾ç‰‡ä¼šè¢«base64å¤„ç†</span></span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// generator: &#123;</span></span><br><span class="line">            <span class="comment">//   // å°†å›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ° static/imgs ç›®å½•ä¸­</span></span><br><span class="line">            <span class="comment">//   // å°†å›¾ç‰‡æ–‡ä»¶å‘½å [hash:8][ext][query]</span></span><br><span class="line">            <span class="comment">//   // [hash:8]: hashå€¼å–8ä½</span></span><br><span class="line">            <span class="comment">//   // [ext]: ä½¿ç”¨ä¹‹å‰çš„æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">            <span class="comment">//   // [query]: æ·»åŠ ä¹‹å‰çš„queryå‚æ•°</span></span><br><span class="line">            <span class="comment">//   filename: &quot;static/imgs/[hash:8][ext][query]&quot;,</span></span><br><span class="line">            <span class="comment">// &#125;,</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2?)$/</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">            <span class="comment">// generator: &#123;</span></span><br><span class="line">            <span class="comment">//   filename: &quot;static/media/[hash:8][ext][query]&quot;,</span></span><br><span class="line">            <span class="comment">// &#125;,</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            <span class="comment">// exclude: /node_modules/, // æ’é™¤node_modulesä»£ç ä¸ç¼–è¯‘</span></span><br><span class="line">            <span class="attr">include</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>), <span class="comment">// ä¹Ÿå¯ä»¥ç”¨åŒ…å«</span></span><br><span class="line">            <span class="attr">use</span>: [</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="attr">loader</span>: <span class="string">&quot;thread-loader&quot;</span>, <span class="comment">// å¼€å¯å¤šè¿›ç¨‹</span></span><br><span class="line">                <span class="attr">options</span>: &#123;</span><br><span class="line">                  <span class="attr">workers</span>: threads, <span class="comment">// æ•°é‡</span></span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">                <span class="attr">options</span>: &#123;</span><br><span class="line">                  <span class="attr">cacheDirectory</span>: <span class="literal">true</span>, <span class="comment">// å¼€å¯babelç¼–è¯‘ç¼“å­˜</span></span><br><span class="line">                  <span class="attr">cacheCompression</span>: <span class="literal">false</span>, <span class="comment">// ç¼“å­˜æ–‡ä»¶ä¸è¦å‹ç¼©</span></span><br><span class="line">                  <span class="attr">plugins</span>: [<span class="string">&quot;@babel/plugin-transform-runtime&quot;</span>], <span class="comment">// å‡å°‘ä»£ç ä½“ç§¯</span></span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;,</span><br><span class="line">            ],</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// æŒ‡å®šæ£€æŸ¥æ–‡ä»¶çš„æ ¹ç›®å½•</span></span><br><span class="line">      <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>),</span><br><span class="line">      <span class="attr">exclude</span>: <span class="string">&quot;node_modules&quot;</span>, <span class="comment">// é»˜è®¤å€¼</span></span><br><span class="line">      <span class="attr">cache</span>: <span class="literal">true</span>, <span class="comment">// å¼€å¯ç¼“å­˜</span></span><br><span class="line">      <span class="comment">// ç¼“å­˜ç›®å½•</span></span><br><span class="line">      <span class="attr">cacheLocation</span>: path.<span class="title function_">resolve</span>(</span><br><span class="line">        __dirname,</span><br><span class="line">        <span class="string">&quot;../node_modules/.cache/.eslintcache&quot;</span></span><br><span class="line">      ),</span><br><span class="line">      threads, <span class="comment">// å¼€å¯å¤šè¿›ç¨‹</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// ä»¥ public/index.html ä¸ºæ¨¡æ¿åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line">      <span class="comment">// æ–°çš„htmlæ–‡ä»¶æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š1. å†…å®¹å’Œæºæ–‡ä»¶ä¸€è‡´ 2. è‡ªåŠ¨å¼•å…¥æ‰“åŒ…ç”Ÿæˆçš„jsç­‰èµ„æº</span></span><br><span class="line">      <span class="attr">template</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../public/index.html&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// æå–cssæˆå•ç‹¬æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// å®šä¹‰è¾“å‡ºæ–‡ä»¶åå’Œç›®å½•</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&quot;static/css/[name].css&quot;</span>,</span><br><span class="line">      <span class="attr">chunkFilename</span>: <span class="string">&quot;static/css/[name].chunk.css&quot;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// csså‹ç¼©</span></span><br><span class="line">    <span class="comment">// new CssMinimizerPlugin(),</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="attr">minimizer</span>: [</span><br><span class="line">      <span class="comment">// csså‹ç¼©ä¹Ÿå¯ä»¥å†™åˆ°optimization.minimizeré‡Œé¢ï¼Œæ•ˆæœä¸€æ ·çš„</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">CssMinimizerPlugin</span>(),</span><br><span class="line">      <span class="comment">// å½“ç”Ÿäº§æ¨¡å¼ä¼šé»˜è®¤å¼€å¯TerserPluginï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦è¿›è¡Œå…¶ä»–é…ç½®ï¼Œå°±è¦é‡æ–°å†™äº†</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">TerserPlugin</span>(&#123;</span><br><span class="line">        <span class="attr">parallel</span>: threads, <span class="comment">// å¼€å¯å¤šè¿›ç¨‹</span></span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="comment">// å‹ç¼©å›¾ç‰‡</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">ImageMinimizerPlugin</span>(&#123;</span><br><span class="line">        <span class="attr">minimizer</span>: &#123;</span><br><span class="line">          <span class="attr">implementation</span>: <span class="title class_">ImageMinimizerPlugin</span>.<span class="property">imageminGenerate</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">plugins</span>: [</span><br><span class="line">              [<span class="string">&quot;gifsicle&quot;</span>, &#123; <span class="attr">interlaced</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">              [<span class="string">&quot;jpegtran&quot;</span>, &#123; <span class="attr">progressive</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">              [<span class="string">&quot;optipng&quot;</span>, &#123; <span class="attr">optimizationLevel</span>: <span class="number">5</span> &#125;],</span><br><span class="line">              [</span><br><span class="line">                <span class="string">&quot;svgo&quot;</span>,</span><br><span class="line">                &#123;</span><br><span class="line">                  <span class="attr">plugins</span>: [</span><br><span class="line">                    <span class="string">&quot;preset-default&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;prefixIds&quot;</span>,</span><br><span class="line">                    &#123;</span><br><span class="line">                      <span class="attr">name</span>: <span class="string">&quot;sortAttrs&quot;</span>,</span><br><span class="line">                      <span class="attr">params</span>: &#123;</span><br><span class="line">                        <span class="attr">xmlnsOrder</span>: <span class="string">&quot;alphabetical&quot;</span>,</span><br><span class="line">                      &#125;,</span><br><span class="line">                    &#125;,</span><br><span class="line">                  ],</span><br><span class="line">                &#125;,</span><br><span class="line">              ],</span><br><span class="line">            ],</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;),</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// ä»£ç åˆ†å‰²é…ç½®</span></span><br><span class="line">    <span class="attr">splitChunks</span>: &#123;</span><br><span class="line">      <span class="attr">chunks</span>: <span class="string">&quot;all&quot;</span>, <span class="comment">// å¯¹æ‰€æœ‰æ¨¡å—éƒ½è¿›è¡Œåˆ†å‰²</span></span><br><span class="line">      <span class="comment">// å…¶ä»–å†…å®¹ç”¨é»˜è®¤é…ç½®å³å¯</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// devServer: &#123;</span></span><br><span class="line">  <span class="comment">//   host: &quot;localhost&quot;, // å¯åŠ¨æœåŠ¡å™¨åŸŸå</span></span><br><span class="line">  <span class="comment">//   port: &quot;3000&quot;, // å¯åŠ¨æœåŠ¡å™¨ç«¯å£å·</span></span><br><span class="line">  <span class="comment">//   open: true, // æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&quot;source-map&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="4"><li>è¿è¡ŒæŒ‡ä»¤</li></ol><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack</span><br></pre></td></tr></table></figure><p>è§‚å¯Ÿæ‰“åŒ…è¾“å‡º js æ–‡ä»¶åç§°ã€‚</p><h2 id="Preload-Prefetch">Preload / Prefetch</h2><h3 id="ä¸ºä»€ä¹ˆ-v11">ä¸ºä»€ä¹ˆ</h3><p>æˆ‘ä»¬å‰é¢å·²ç»åšäº†ä»£ç åˆ†å‰²ï¼ŒåŒæ—¶ä¼šä½¿ç”¨ import åŠ¨æ€å¯¼å…¥è¯­æ³•æ¥è¿›è¡Œä»£ç æŒ‰éœ€åŠ è½½ï¼ˆæˆ‘ä»¬ä¹Ÿå«æ‡’åŠ è½½ï¼Œæ¯”å¦‚è·¯ç”±æ‡’åŠ è½½å°±æ˜¯è¿™æ ·å®ç°çš„ï¼‰ã€‚</p><p>ä½†æ˜¯åŠ è½½é€Ÿåº¦è¿˜ä¸å¤Ÿå¥½ï¼Œæ¯”å¦‚ï¼šæ˜¯ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æ—¶æ‰åŠ è½½è¿™ä¸ªèµ„æºçš„ï¼Œå¦‚æœèµ„æºä½“ç§¯å¾ˆå¤§ï¼Œé‚£ä¹ˆç”¨æˆ·ä¼šæ„Ÿè§‰åˆ°æ˜æ˜¾å¡é¡¿æ•ˆæœã€‚</p><p>æˆ‘ä»¬æƒ³åœ¨æµè§ˆå™¨ç©ºé—²æ—¶é—´ï¼ŒåŠ è½½åç»­éœ€è¦ä½¿ç”¨çš„èµ„æºã€‚æˆ‘ä»¬å°±éœ€è¦ç”¨ä¸Š <code>Preload</code> æˆ– <code>Prefetch</code> æŠ€æœ¯ã€‚</p><h3 id="æ˜¯ä»€ä¹ˆ-v11">æ˜¯ä»€ä¹ˆ</h3><ul><li><code>Preload</code>ï¼šå‘Šè¯‰æµè§ˆå™¨ç«‹å³åŠ è½½èµ„æºã€‚</li><li><code>Prefetch</code>ï¼šå‘Šè¯‰æµè§ˆå™¨åœ¨ç©ºé—²æ—¶æ‰å¼€å§‹åŠ è½½èµ„æºã€‚</li></ul><p>å®ƒä»¬å…±åŒç‚¹ï¼š</p><ul><li>éƒ½åªä¼šåŠ è½½èµ„æºï¼Œå¹¶ä¸æ‰§è¡Œã€‚</li><li>éƒ½æœ‰ç¼“å­˜ã€‚</li></ul><p>å®ƒä»¬åŒºåˆ«ï¼š</p><ul><li><code>Preload</code>åŠ è½½ä¼˜å…ˆçº§é«˜ï¼Œ<code>Prefetch</code>åŠ è½½ä¼˜å…ˆçº§ä½ã€‚</li><li><code>Preload</code>åªèƒ½åŠ è½½å½“å‰é¡µé¢éœ€è¦ä½¿ç”¨çš„èµ„æºï¼Œ<code>Prefetch</code>å¯ä»¥åŠ è½½å½“å‰é¡µé¢èµ„æºï¼Œä¹Ÿå¯ä»¥åŠ è½½ä¸‹ä¸€ä¸ªé¡µé¢éœ€è¦ä½¿ç”¨çš„èµ„æºã€‚</li></ul><p>æ€»ç»“ï¼š</p><ul><li>å½“å‰é¡µé¢ä¼˜å…ˆçº§é«˜çš„èµ„æºç”¨ <code>Preload</code> åŠ è½½ã€‚</li><li>ä¸‹ä¸€ä¸ªé¡µé¢éœ€è¦ä½¿ç”¨çš„èµ„æºç”¨ <code>Prefetch</code> åŠ è½½ã€‚</li></ul><p>å®ƒä»¬çš„é—®é¢˜ï¼šå…¼å®¹æ€§è¾ƒå·®ã€‚</p><ul><li>æˆ‘ä»¬å¯ä»¥å» <a href="https://caniuse.com/">Can I Use</a> ç½‘ç«™æŸ¥è¯¢ API çš„å…¼å®¹æ€§é—®é¢˜ã€‚</li><li><code>Preload</code> ç›¸å¯¹äº <code>Prefetch</code> å…¼å®¹æ€§å¥½ä¸€ç‚¹ã€‚</li></ul><h3 id="æ€ä¹ˆç”¨-v11">æ€ä¹ˆç”¨</h3><ol><li>ä¸‹è½½åŒ…</li></ol><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i @vue/preload-webpack-plugin -D</span><br></pre></td></tr></table></figure><ol start="2"><li>é…ç½® webpack.prod.js</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> os = <span class="built_in">require</span>(<span class="string">&quot;os&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;mini-css-extract-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CssMinimizerPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;css-minimizer-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">TerserPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;terser-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ImageMinimizerPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;image-minimizer-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">PreloadWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;@vue/preload-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// cpuæ ¸æ•°</span></span><br><span class="line"><span class="keyword">const</span> threads = os.<span class="title function_">cpus</span>().<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å¤„ç†æ ·å¼çš„Loaders</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getStyleLoaders</span> = (<span class="params">preProcessor</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> [</span><br><span class="line">    <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">    <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">          <span class="attr">plugins</span>: [</span><br><span class="line">            <span class="string">&quot;postcss-preset-env&quot;</span>, <span class="comment">// èƒ½è§£å†³å¤§å¤šæ•°æ ·å¼å…¼å®¹æ€§é—®é¢˜</span></span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    preProcessor,</span><br><span class="line">  ].<span class="title function_">filter</span>(<span class="title class_">Boolean</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../dist&quot;</span>), <span class="comment">// ç”Ÿäº§æ¨¡å¼éœ€è¦è¾“å‡º</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/[name].js&quot;</span>, <span class="comment">// å…¥å£æ–‡ä»¶æ‰“åŒ…è¾“å‡ºèµ„æºå‘½åæ–¹å¼</span></span><br><span class="line">    <span class="attr">chunkFilename</span>: <span class="string">&quot;static/js/[name].chunk.js&quot;</span>, <span class="comment">// åŠ¨æ€å¯¼å…¥è¾“å‡ºèµ„æºå‘½åæ–¹å¼</span></span><br><span class="line">    <span class="attr">assetModuleFilename</span>: <span class="string">&quot;static/media/[name].[hash][ext]&quot;</span>, <span class="comment">// å›¾ç‰‡ã€å­—ä½“ç­‰èµ„æºå‘½åæ–¹å¼ï¼ˆæ³¨æ„ç”¨hashï¼‰</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">oneOf</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">            <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;less-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;sass-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;stylus-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|svg)$/</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">            <span class="attr">parser</span>: &#123;</span><br><span class="line">              <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">                <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span>, <span class="comment">// å°äº10kbçš„å›¾ç‰‡ä¼šè¢«base64å¤„ç†</span></span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// generator: &#123;</span></span><br><span class="line">            <span class="comment">//   // å°†å›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ° static/imgs ç›®å½•ä¸­</span></span><br><span class="line">            <span class="comment">//   // å°†å›¾ç‰‡æ–‡ä»¶å‘½å [hash:8][ext][query]</span></span><br><span class="line">            <span class="comment">//   // [hash:8]: hashå€¼å–8ä½</span></span><br><span class="line">            <span class="comment">//   // [ext]: ä½¿ç”¨ä¹‹å‰çš„æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">            <span class="comment">//   // [query]: æ·»åŠ ä¹‹å‰çš„queryå‚æ•°</span></span><br><span class="line">            <span class="comment">//   filename: &quot;static/imgs/[hash:8][ext][query]&quot;,</span></span><br><span class="line">            <span class="comment">// &#125;,</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2?)$/</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">            <span class="comment">// generator: &#123;</span></span><br><span class="line">            <span class="comment">//   filename: &quot;static/media/[hash:8][ext][query]&quot;,</span></span><br><span class="line">            <span class="comment">// &#125;,</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            <span class="comment">// exclude: /node_modules/, // æ’é™¤node_modulesä»£ç ä¸ç¼–è¯‘</span></span><br><span class="line">            <span class="attr">include</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>), <span class="comment">// ä¹Ÿå¯ä»¥ç”¨åŒ…å«</span></span><br><span class="line">            <span class="attr">use</span>: [</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="attr">loader</span>: <span class="string">&quot;thread-loader&quot;</span>, <span class="comment">// å¼€å¯å¤šè¿›ç¨‹</span></span><br><span class="line">                <span class="attr">options</span>: &#123;</span><br><span class="line">                  <span class="attr">workers</span>: threads, <span class="comment">// æ•°é‡</span></span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">                <span class="attr">options</span>: &#123;</span><br><span class="line">                  <span class="attr">cacheDirectory</span>: <span class="literal">true</span>, <span class="comment">// å¼€å¯babelç¼–è¯‘ç¼“å­˜</span></span><br><span class="line">                  <span class="attr">cacheCompression</span>: <span class="literal">false</span>, <span class="comment">// ç¼“å­˜æ–‡ä»¶ä¸è¦å‹ç¼©</span></span><br><span class="line">                  <span class="attr">plugins</span>: [<span class="string">&quot;@babel/plugin-transform-runtime&quot;</span>], <span class="comment">// å‡å°‘ä»£ç ä½“ç§¯</span></span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;,</span><br><span class="line">            ],</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// æŒ‡å®šæ£€æŸ¥æ–‡ä»¶çš„æ ¹ç›®å½•</span></span><br><span class="line">      <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>),</span><br><span class="line">      <span class="attr">exclude</span>: <span class="string">&quot;node_modules&quot;</span>, <span class="comment">// é»˜è®¤å€¼</span></span><br><span class="line">      <span class="attr">cache</span>: <span class="literal">true</span>, <span class="comment">// å¼€å¯ç¼“å­˜</span></span><br><span class="line">      <span class="comment">// ç¼“å­˜ç›®å½•</span></span><br><span class="line">      <span class="attr">cacheLocation</span>: path.<span class="title function_">resolve</span>(</span><br><span class="line">        __dirname,</span><br><span class="line">        <span class="string">&quot;../node_modules/.cache/.eslintcache&quot;</span></span><br><span class="line">      ),</span><br><span class="line">      threads, <span class="comment">// å¼€å¯å¤šè¿›ç¨‹</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// ä»¥ public/index.html ä¸ºæ¨¡æ¿åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line">      <span class="comment">// æ–°çš„htmlæ–‡ä»¶æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š1. å†…å®¹å’Œæºæ–‡ä»¶ä¸€è‡´ 2. è‡ªåŠ¨å¼•å…¥æ‰“åŒ…ç”Ÿæˆçš„jsç­‰èµ„æº</span></span><br><span class="line">      <span class="attr">template</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../public/index.html&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// æå–cssæˆå•ç‹¬æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// å®šä¹‰è¾“å‡ºæ–‡ä»¶åå’Œç›®å½•</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&quot;static/css/[name].css&quot;</span>,</span><br><span class="line">      <span class="attr">chunkFilename</span>: <span class="string">&quot;static/css/[name].chunk.css&quot;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// csså‹ç¼©</span></span><br><span class="line">    <span class="comment">// new CssMinimizerPlugin(),</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">PreloadWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">rel</span>: <span class="string">&quot;preload&quot;</span>, <span class="comment">// preloadå…¼å®¹æ€§æ›´å¥½</span></span><br><span class="line">      <span class="attr">as</span>: <span class="string">&quot;script&quot;</span>,</span><br><span class="line">      <span class="comment">// rel: &#x27;prefetch&#x27; // prefetchå…¼å®¹æ€§æ›´å·®</span></span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="attr">minimizer</span>: [</span><br><span class="line">      <span class="comment">// csså‹ç¼©ä¹Ÿå¯ä»¥å†™åˆ°optimization.minimizeré‡Œé¢ï¼Œæ•ˆæœä¸€æ ·çš„</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">CssMinimizerPlugin</span>(),</span><br><span class="line">      <span class="comment">// å½“ç”Ÿäº§æ¨¡å¼ä¼šé»˜è®¤å¼€å¯TerserPluginï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦è¿›è¡Œå…¶ä»–é…ç½®ï¼Œå°±è¦é‡æ–°å†™äº†</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">TerserPlugin</span>(&#123;</span><br><span class="line">        <span class="attr">parallel</span>: threads, <span class="comment">// å¼€å¯å¤šè¿›ç¨‹</span></span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="comment">// å‹ç¼©å›¾ç‰‡</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">ImageMinimizerPlugin</span>(&#123;</span><br><span class="line">        <span class="attr">minimizer</span>: &#123;</span><br><span class="line">          <span class="attr">implementation</span>: <span class="title class_">ImageMinimizerPlugin</span>.<span class="property">imageminGenerate</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">plugins</span>: [</span><br><span class="line">              [<span class="string">&quot;gifsicle&quot;</span>, &#123; <span class="attr">interlaced</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">              [<span class="string">&quot;jpegtran&quot;</span>, &#123; <span class="attr">progressive</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">              [<span class="string">&quot;optipng&quot;</span>, &#123; <span class="attr">optimizationLevel</span>: <span class="number">5</span> &#125;],</span><br><span class="line">              [</span><br><span class="line">                <span class="string">&quot;svgo&quot;</span>,</span><br><span class="line">                &#123;</span><br><span class="line">                  <span class="attr">plugins</span>: [</span><br><span class="line">                    <span class="string">&quot;preset-default&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;prefixIds&quot;</span>,</span><br><span class="line">                    &#123;</span><br><span class="line">                      <span class="attr">name</span>: <span class="string">&quot;sortAttrs&quot;</span>,</span><br><span class="line">                      <span class="attr">params</span>: &#123;</span><br><span class="line">                        <span class="attr">xmlnsOrder</span>: <span class="string">&quot;alphabetical&quot;</span>,</span><br><span class="line">                      &#125;,</span><br><span class="line">                    &#125;,</span><br><span class="line">                  ],</span><br><span class="line">                &#125;,</span><br><span class="line">              ],</span><br><span class="line">            ],</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;),</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// ä»£ç åˆ†å‰²é…ç½®</span></span><br><span class="line">    <span class="attr">splitChunks</span>: &#123;</span><br><span class="line">      <span class="attr">chunks</span>: <span class="string">&quot;all&quot;</span>, <span class="comment">// å¯¹æ‰€æœ‰æ¨¡å—éƒ½è¿›è¡Œåˆ†å‰²</span></span><br><span class="line">      <span class="comment">// å…¶ä»–å†…å®¹ç”¨é»˜è®¤é…ç½®å³å¯</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// devServer: &#123;</span></span><br><span class="line">  <span class="comment">//   host: &quot;localhost&quot;, // å¯åŠ¨æœåŠ¡å™¨åŸŸå</span></span><br><span class="line">  <span class="comment">//   port: &quot;3000&quot;, // å¯åŠ¨æœåŠ¡å™¨ç«¯å£å·</span></span><br><span class="line">  <span class="comment">//   open: true, // æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&quot;source-map&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="Network-Cache">Network Cache</h2><h3 id="ä¸ºä»€ä¹ˆ-v12">ä¸ºä»€ä¹ˆ</h3><p>å°†æ¥å¼€å‘æ—¶æˆ‘ä»¬å¯¹é™æ€èµ„æºä¼šä½¿ç”¨ç¼“å­˜æ¥ä¼˜åŒ–ï¼Œè¿™æ ·æµè§ˆå™¨ç¬¬äºŒæ¬¡è¯·æ±‚èµ„æºå°±èƒ½è¯»å–ç¼“å­˜äº†ï¼Œé€Ÿåº¦å¾ˆå¿«ã€‚</p><p>ä½†æ˜¯è¿™æ ·çš„è¯å°±ä¼šæœ‰ä¸€ä¸ªé—®é¢˜, å› ä¸ºå‰åè¾“å‡ºçš„æ–‡ä»¶åæ˜¯ä¸€æ ·çš„ï¼Œéƒ½å« main.jsï¼Œä¸€æ—¦å°†æ¥å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œå› ä¸ºæ–‡ä»¶åæ²¡æœ‰å˜åŒ–å¯¼è‡´æµè§ˆå™¨ä¼šç›´æ¥è¯»å–ç¼“å­˜ï¼Œä¸ä¼šåŠ è½½æ–°èµ„æºï¼Œé¡¹ç›®ä¹Ÿå°±æ²¡æ³•æ›´æ–°äº†ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬ä»æ–‡ä»¶åå…¥æ‰‹ï¼Œç¡®ä¿æ›´æ–°å‰åæ–‡ä»¶åä¸ä¸€æ ·ï¼Œè¿™æ ·å°±å¯ä»¥åšç¼“å­˜äº†ã€‚</p><h3 id="æ˜¯ä»€ä¹ˆ-v12">æ˜¯ä»€ä¹ˆ</h3><p>å®ƒä»¬éƒ½ä¼šç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ hash å€¼ã€‚</p><ul><li><p>fullhashï¼ˆwebpack4 æ˜¯ hashï¼‰</p><p>æ¯æ¬¡ä¿®æ”¹ä»»ä½•ä¸€ä¸ªæ–‡ä»¶ï¼Œæ‰€æœ‰æ–‡ä»¶åçš„ hash å€¼éƒ½å°†æ”¹å˜ã€‚æ‰€ä»¥ä¸€æ—¦ä¿®æ”¹äº†ä»»ä½•ä¸€ä¸ªæ–‡ä»¶ï¼Œæ•´ä¸ªé¡¹ç›®çš„æ–‡ä»¶ç¼“å­˜éƒ½å°†å¤±æ•ˆã€‚</p></li><li><p>chunkhash</p><p>æ ¹æ®ä¸åŒçš„å…¥å£æ–‡ä»¶(Entry)è¿›è¡Œä¾èµ–æ–‡ä»¶è§£æã€æ„å»ºå¯¹åº”çš„ chunkï¼Œç”Ÿæˆå¯¹åº”çš„å“ˆå¸Œå€¼ã€‚æˆ‘ä»¬ js å’Œ css æ˜¯åŒä¸€ä¸ªå¼•å…¥ï¼Œä¼šå…±äº«ä¸€ä¸ª hash å€¼ã€‚</p></li><li><p>contenthash</p><p>æ ¹æ®æ–‡ä»¶å†…å®¹ç”Ÿæˆ hash å€¼ï¼Œåªæœ‰æ–‡ä»¶å†…å®¹å˜åŒ–äº†ï¼Œhash å€¼æ‰ä¼šå˜åŒ–ã€‚æ‰€æœ‰æ–‡ä»¶ hash å€¼æ˜¯ç‹¬äº«ä¸”ä¸åŒçš„ã€‚</p></li></ul><h3 id="æ€ä¹ˆç”¨-v12">æ€ä¹ˆç”¨</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> os = <span class="built_in">require</span>(<span class="string">&quot;os&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;mini-css-extract-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CssMinimizerPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;css-minimizer-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">TerserPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;terser-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ImageMinimizerPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;image-minimizer-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">PreloadWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;@vue/preload-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// cpuæ ¸æ•°</span></span><br><span class="line"><span class="keyword">const</span> threads = os.<span class="title function_">cpus</span>().<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å¤„ç†æ ·å¼çš„Loaders</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getStyleLoaders</span> = (<span class="params">preProcessor</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> [</span><br><span class="line">    <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">    <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">          <span class="attr">plugins</span>: [</span><br><span class="line">            <span class="string">&quot;postcss-preset-env&quot;</span>, <span class="comment">// èƒ½è§£å†³å¤§å¤šæ•°æ ·å¼å…¼å®¹æ€§é—®é¢˜</span></span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    preProcessor,</span><br><span class="line">  ].<span class="title function_">filter</span>(<span class="title class_">Boolean</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../dist&quot;</span>), <span class="comment">// ç”Ÿäº§æ¨¡å¼éœ€è¦è¾“å‡º</span></span><br><span class="line">    <span class="comment">// [contenthash:8]ä½¿ç”¨contenthashï¼Œå–8ä½é•¿åº¦</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/[name].[contenthash:8].js&quot;</span>, <span class="comment">// å…¥å£æ–‡ä»¶æ‰“åŒ…è¾“å‡ºèµ„æºå‘½åæ–¹å¼</span></span><br><span class="line">    <span class="attr">chunkFilename</span>: <span class="string">&quot;static/js/[name].[contenthash:8].chunk.js&quot;</span>, <span class="comment">// åŠ¨æ€å¯¼å…¥è¾“å‡ºèµ„æºå‘½åæ–¹å¼</span></span><br><span class="line">    <span class="attr">assetModuleFilename</span>: <span class="string">&quot;static/media/[name].[hash][ext]&quot;</span>, <span class="comment">// å›¾ç‰‡ã€å­—ä½“ç­‰èµ„æºå‘½åæ–¹å¼ï¼ˆæ³¨æ„ç”¨hashï¼‰</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">oneOf</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">            <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;less-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;sass-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;stylus-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|svg)$/</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">            <span class="attr">parser</span>: &#123;</span><br><span class="line">              <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">                <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span>, <span class="comment">// å°äº10kbçš„å›¾ç‰‡ä¼šè¢«base64å¤„ç†</span></span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// generator: &#123;</span></span><br><span class="line">            <span class="comment">//   // å°†å›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ° static/imgs ç›®å½•ä¸­</span></span><br><span class="line">            <span class="comment">//   // å°†å›¾ç‰‡æ–‡ä»¶å‘½å [hash:8][ext][query]</span></span><br><span class="line">            <span class="comment">//   // [hash:8]: hashå€¼å–8ä½</span></span><br><span class="line">            <span class="comment">//   // [ext]: ä½¿ç”¨ä¹‹å‰çš„æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">            <span class="comment">//   // [query]: æ·»åŠ ä¹‹å‰çš„queryå‚æ•°</span></span><br><span class="line">            <span class="comment">//   filename: &quot;static/imgs/[hash:8][ext][query]&quot;,</span></span><br><span class="line">            <span class="comment">// &#125;,</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2?)$/</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">            <span class="comment">// generator: &#123;</span></span><br><span class="line">            <span class="comment">//   filename: &quot;static/media/[hash:8][ext][query]&quot;,</span></span><br><span class="line">            <span class="comment">// &#125;,</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            <span class="comment">// exclude: /node_modules/, // æ’é™¤node_modulesä»£ç ä¸ç¼–è¯‘</span></span><br><span class="line">            <span class="attr">include</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>), <span class="comment">// ä¹Ÿå¯ä»¥ç”¨åŒ…å«</span></span><br><span class="line">            <span class="attr">use</span>: [</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="attr">loader</span>: <span class="string">&quot;thread-loader&quot;</span>, <span class="comment">// å¼€å¯å¤šè¿›ç¨‹</span></span><br><span class="line">                <span class="attr">options</span>: &#123;</span><br><span class="line">                  <span class="attr">workers</span>: threads, <span class="comment">// æ•°é‡</span></span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">                <span class="attr">options</span>: &#123;</span><br><span class="line">                  <span class="attr">cacheDirectory</span>: <span class="literal">true</span>, <span class="comment">// å¼€å¯babelç¼–è¯‘ç¼“å­˜</span></span><br><span class="line">                  <span class="attr">cacheCompression</span>: <span class="literal">false</span>, <span class="comment">// ç¼“å­˜æ–‡ä»¶ä¸è¦å‹ç¼©</span></span><br><span class="line">                  <span class="attr">plugins</span>: [<span class="string">&quot;@babel/plugin-transform-runtime&quot;</span>], <span class="comment">// å‡å°‘ä»£ç ä½“ç§¯</span></span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;,</span><br><span class="line">            ],</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// æŒ‡å®šæ£€æŸ¥æ–‡ä»¶çš„æ ¹ç›®å½•</span></span><br><span class="line">      <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>),</span><br><span class="line">      <span class="attr">exclude</span>: <span class="string">&quot;node_modules&quot;</span>, <span class="comment">// é»˜è®¤å€¼</span></span><br><span class="line">      <span class="attr">cache</span>: <span class="literal">true</span>, <span class="comment">// å¼€å¯ç¼“å­˜</span></span><br><span class="line">      <span class="comment">// ç¼“å­˜ç›®å½•</span></span><br><span class="line">      <span class="attr">cacheLocation</span>: path.<span class="title function_">resolve</span>(</span><br><span class="line">        __dirname,</span><br><span class="line">        <span class="string">&quot;../node_modules/.cache/.eslintcache&quot;</span></span><br><span class="line">      ),</span><br><span class="line">      threads, <span class="comment">// å¼€å¯å¤šè¿›ç¨‹</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// ä»¥ public/index.html ä¸ºæ¨¡æ¿åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line">      <span class="comment">// æ–°çš„htmlæ–‡ä»¶æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š1. å†…å®¹å’Œæºæ–‡ä»¶ä¸€è‡´ 2. è‡ªåŠ¨å¼•å…¥æ‰“åŒ…ç”Ÿæˆçš„jsç­‰èµ„æº</span></span><br><span class="line">      <span class="attr">template</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../public/index.html&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// æå–cssæˆå•ç‹¬æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// å®šä¹‰è¾“å‡ºæ–‡ä»¶åå’Œç›®å½•</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&quot;static/css/[name].[contenthash:8].css&quot;</span>,</span><br><span class="line">      <span class="attr">chunkFilename</span>: <span class="string">&quot;static/css/[name].[contenthash:8].chunk.css&quot;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// csså‹ç¼©</span></span><br><span class="line">    <span class="comment">// new CssMinimizerPlugin(),</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">PreloadWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">rel</span>: <span class="string">&quot;preload&quot;</span>, <span class="comment">// preloadå…¼å®¹æ€§æ›´å¥½</span></span><br><span class="line">      <span class="attr">as</span>: <span class="string">&quot;script&quot;</span>,</span><br><span class="line">      <span class="comment">// rel: &#x27;prefetch&#x27; // prefetchå…¼å®¹æ€§æ›´å·®</span></span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="attr">minimizer</span>: [</span><br><span class="line">      <span class="comment">// csså‹ç¼©ä¹Ÿå¯ä»¥å†™åˆ°optimization.minimizeré‡Œé¢ï¼Œæ•ˆæœä¸€æ ·çš„</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">CssMinimizerPlugin</span>(),</span><br><span class="line">      <span class="comment">// å½“ç”Ÿäº§æ¨¡å¼ä¼šé»˜è®¤å¼€å¯TerserPluginï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦è¿›è¡Œå…¶ä»–é…ç½®ï¼Œå°±è¦é‡æ–°å†™äº†</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">TerserPlugin</span>(&#123;</span><br><span class="line">        <span class="attr">parallel</span>: threads, <span class="comment">// å¼€å¯å¤šè¿›ç¨‹</span></span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="comment">// å‹ç¼©å›¾ç‰‡</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">ImageMinimizerPlugin</span>(&#123;</span><br><span class="line">        <span class="attr">minimizer</span>: &#123;</span><br><span class="line">          <span class="attr">implementation</span>: <span class="title class_">ImageMinimizerPlugin</span>.<span class="property">imageminGenerate</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">plugins</span>: [</span><br><span class="line">              [<span class="string">&quot;gifsicle&quot;</span>, &#123; <span class="attr">interlaced</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">              [<span class="string">&quot;jpegtran&quot;</span>, &#123; <span class="attr">progressive</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">              [<span class="string">&quot;optipng&quot;</span>, &#123; <span class="attr">optimizationLevel</span>: <span class="number">5</span> &#125;],</span><br><span class="line">              [</span><br><span class="line">                <span class="string">&quot;svgo&quot;</span>,</span><br><span class="line">                &#123;</span><br><span class="line">                  <span class="attr">plugins</span>: [</span><br><span class="line">                    <span class="string">&quot;preset-default&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;prefixIds&quot;</span>,</span><br><span class="line">                    &#123;</span><br><span class="line">                      <span class="attr">name</span>: <span class="string">&quot;sortAttrs&quot;</span>,</span><br><span class="line">                      <span class="attr">params</span>: &#123;</span><br><span class="line">                        <span class="attr">xmlnsOrder</span>: <span class="string">&quot;alphabetical&quot;</span>,</span><br><span class="line">                      &#125;,</span><br><span class="line">                    &#125;,</span><br><span class="line">                  ],</span><br><span class="line">                &#125;,</span><br><span class="line">              ],</span><br><span class="line">            ],</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;),</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// ä»£ç åˆ†å‰²é…ç½®</span></span><br><span class="line">    <span class="attr">splitChunks</span>: &#123;</span><br><span class="line">      <span class="attr">chunks</span>: <span class="string">&quot;all&quot;</span>, <span class="comment">// å¯¹æ‰€æœ‰æ¨¡å—éƒ½è¿›è¡Œåˆ†å‰²</span></span><br><span class="line">      <span class="comment">// å…¶ä»–å†…å®¹ç”¨é»˜è®¤é…ç½®å³å¯</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// devServer: &#123;</span></span><br><span class="line">  <span class="comment">//   host: &quot;localhost&quot;, // å¯åŠ¨æœåŠ¡å™¨åŸŸå</span></span><br><span class="line">  <span class="comment">//   port: &quot;3000&quot;, // å¯åŠ¨æœåŠ¡å™¨ç«¯å£å·</span></span><br><span class="line">  <span class="comment">//   open: true, // æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&quot;source-map&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>é—®é¢˜ï¼š</li></ul><p>å½“æˆ‘ä»¬ä¿®æ”¹ math.js æ–‡ä»¶å†é‡æ–°æ‰“åŒ…çš„æ—¶å€™ï¼Œå› ä¸º contenthash åŸå› ï¼Œmath.js æ–‡ä»¶ hash å€¼å‘ç”Ÿäº†å˜åŒ–ï¼ˆè¿™æ˜¯æ­£å¸¸çš„ï¼‰ã€‚</p><p>ä½†æ˜¯ main.js æ–‡ä»¶çš„ hash å€¼ä¹Ÿå‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™ä¼šå¯¼è‡´ main.js çš„ç¼“å­˜å¤±æ•ˆã€‚æ˜æ˜æˆ‘ä»¬åªä¿®æ”¹ math.js, ä¸ºä»€ä¹ˆ main.js ä¹Ÿä¼šå˜èº«å˜åŒ–å‘¢ï¼Ÿ</p><ul><li>åŸå› ï¼š<ul><li>æ›´æ–°å‰ï¼šmath.xxx.js, main.js å¼•ç”¨çš„ math.xxx.js</li><li>æ›´æ–°åï¼šmath.yyy.js, main.js å¼•ç”¨çš„ math.yyy.js, æ–‡ä»¶åå‘ç”Ÿäº†å˜åŒ–ï¼Œé—´æ¥å¯¼è‡´ main.js ä¹Ÿå‘ç”Ÿäº†å˜åŒ–</li></ul></li><li>è§£å†³ï¼š</li></ul><p>å°† hash å€¼å•ç‹¬ä¿ç®¡åœ¨ä¸€ä¸ª runtime æ–‡ä»¶ä¸­ã€‚</p><p>æˆ‘ä»¬æœ€ç»ˆè¾“å‡ºä¸‰ä¸ªæ–‡ä»¶ï¼šmainã€mathã€runtimeã€‚å½“ math æ–‡ä»¶å‘é€å˜åŒ–ï¼Œå˜åŒ–çš„æ˜¯ math å’Œ runtime æ–‡ä»¶ï¼Œmain ä¸å˜ã€‚</p><p>runtime æ–‡ä»¶åªä¿å­˜æ–‡ä»¶çš„ hash å€¼å’Œå®ƒä»¬ä¸æ–‡ä»¶å…³ç³»ï¼Œæ•´ä¸ªæ–‡ä»¶ä½“ç§¯å°±æ¯”è¾ƒå°ï¼Œæ‰€ä»¥å˜åŒ–é‡æ–°è¯·æ±‚çš„ä»£ä»·ä¹Ÿå°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> os = <span class="built_in">require</span>(<span class="string">&quot;os&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;mini-css-extract-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CssMinimizerPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;css-minimizer-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">TerserPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;terser-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ImageMinimizerPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;image-minimizer-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">PreloadWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;@vue/preload-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// cpuæ ¸æ•°</span></span><br><span class="line"><span class="keyword">const</span> threads = os.<span class="title function_">cpus</span>().<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å¤„ç†æ ·å¼çš„Loaders</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getStyleLoaders</span> = (<span class="params">preProcessor</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> [</span><br><span class="line">    <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">    <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">          <span class="attr">plugins</span>: [</span><br><span class="line">            <span class="string">&quot;postcss-preset-env&quot;</span>, <span class="comment">// èƒ½è§£å†³å¤§å¤šæ•°æ ·å¼å…¼å®¹æ€§é—®é¢˜</span></span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    preProcessor,</span><br><span class="line">  ].<span class="title function_">filter</span>(<span class="title class_">Boolean</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../dist&quot;</span>), <span class="comment">// ç”Ÿäº§æ¨¡å¼éœ€è¦è¾“å‡º</span></span><br><span class="line">    <span class="comment">// [contenthash:8]ä½¿ç”¨contenthashï¼Œå–8ä½é•¿åº¦</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/[name].[contenthash:8].js&quot;</span>, <span class="comment">// å…¥å£æ–‡ä»¶æ‰“åŒ…è¾“å‡ºèµ„æºå‘½åæ–¹å¼</span></span><br><span class="line">    <span class="attr">chunkFilename</span>: <span class="string">&quot;static/js/[name].[contenthash:8].chunk.js&quot;</span>, <span class="comment">// åŠ¨æ€å¯¼å…¥è¾“å‡ºèµ„æºå‘½åæ–¹å¼</span></span><br><span class="line">    <span class="attr">assetModuleFilename</span>: <span class="string">&quot;static/media/[name].[hash][ext]&quot;</span>, <span class="comment">// å›¾ç‰‡ã€å­—ä½“ç­‰èµ„æºå‘½åæ–¹å¼ï¼ˆæ³¨æ„ç”¨hashï¼‰</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">oneOf</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">            <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;less-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;sass-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;stylus-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|svg)$/</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">            <span class="attr">parser</span>: &#123;</span><br><span class="line">              <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">                <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span>, <span class="comment">// å°äº10kbçš„å›¾ç‰‡ä¼šè¢«base64å¤„ç†</span></span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// generator: &#123;</span></span><br><span class="line">            <span class="comment">//   // å°†å›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ° static/imgs ç›®å½•ä¸­</span></span><br><span class="line">            <span class="comment">//   // å°†å›¾ç‰‡æ–‡ä»¶å‘½å [hash:8][ext][query]</span></span><br><span class="line">            <span class="comment">//   // [hash:8]: hashå€¼å–8ä½</span></span><br><span class="line">            <span class="comment">//   // [ext]: ä½¿ç”¨ä¹‹å‰çš„æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">            <span class="comment">//   // [query]: æ·»åŠ ä¹‹å‰çš„queryå‚æ•°</span></span><br><span class="line">            <span class="comment">//   filename: &quot;static/imgs/[hash:8][ext][query]&quot;,</span></span><br><span class="line">            <span class="comment">// &#125;,</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2?)$/</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">            <span class="comment">// generator: &#123;</span></span><br><span class="line">            <span class="comment">//   filename: &quot;static/media/[hash:8][ext][query]&quot;,</span></span><br><span class="line">            <span class="comment">// &#125;,</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            <span class="comment">// exclude: /node_modules/, // æ’é™¤node_modulesä»£ç ä¸ç¼–è¯‘</span></span><br><span class="line">            <span class="attr">include</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>), <span class="comment">// ä¹Ÿå¯ä»¥ç”¨åŒ…å«</span></span><br><span class="line">            <span class="attr">use</span>: [</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="attr">loader</span>: <span class="string">&quot;thread-loader&quot;</span>, <span class="comment">// å¼€å¯å¤šè¿›ç¨‹</span></span><br><span class="line">                <span class="attr">options</span>: &#123;</span><br><span class="line">                  <span class="attr">workers</span>: threads, <span class="comment">// æ•°é‡</span></span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">                <span class="attr">options</span>: &#123;</span><br><span class="line">                  <span class="attr">cacheDirectory</span>: <span class="literal">true</span>, <span class="comment">// å¼€å¯babelç¼–è¯‘ç¼“å­˜</span></span><br><span class="line">                  <span class="attr">cacheCompression</span>: <span class="literal">false</span>, <span class="comment">// ç¼“å­˜æ–‡ä»¶ä¸è¦å‹ç¼©</span></span><br><span class="line">                  <span class="attr">plugins</span>: [<span class="string">&quot;@babel/plugin-transform-runtime&quot;</span>], <span class="comment">// å‡å°‘ä»£ç ä½“ç§¯</span></span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;,</span><br><span class="line">            ],</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// æŒ‡å®šæ£€æŸ¥æ–‡ä»¶çš„æ ¹ç›®å½•</span></span><br><span class="line">      <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>),</span><br><span class="line">      <span class="attr">exclude</span>: <span class="string">&quot;node_modules&quot;</span>, <span class="comment">// é»˜è®¤å€¼</span></span><br><span class="line">      <span class="attr">cache</span>: <span class="literal">true</span>, <span class="comment">// å¼€å¯ç¼“å­˜</span></span><br><span class="line">      <span class="comment">// ç¼“å­˜ç›®å½•</span></span><br><span class="line">      <span class="attr">cacheLocation</span>: path.<span class="title function_">resolve</span>(</span><br><span class="line">        __dirname,</span><br><span class="line">        <span class="string">&quot;../node_modules/.cache/.eslintcache&quot;</span></span><br><span class="line">      ),</span><br><span class="line">      threads, <span class="comment">// å¼€å¯å¤šè¿›ç¨‹</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// ä»¥ public/index.html ä¸ºæ¨¡æ¿åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line">      <span class="comment">// æ–°çš„htmlæ–‡ä»¶æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š1. å†…å®¹å’Œæºæ–‡ä»¶ä¸€è‡´ 2. è‡ªåŠ¨å¼•å…¥æ‰“åŒ…ç”Ÿæˆçš„jsç­‰èµ„æº</span></span><br><span class="line">      <span class="attr">template</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../public/index.html&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// æå–cssæˆå•ç‹¬æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// å®šä¹‰è¾“å‡ºæ–‡ä»¶åå’Œç›®å½•</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&quot;static/css/[name].[contenthash:8].css&quot;</span>,</span><br><span class="line">      <span class="attr">chunkFilename</span>: <span class="string">&quot;static/css/[name].[contenthash:8].chunk.css&quot;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// csså‹ç¼©</span></span><br><span class="line">    <span class="comment">// new CssMinimizerPlugin(),</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">PreloadWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">rel</span>: <span class="string">&quot;preload&quot;</span>, <span class="comment">// preloadå…¼å®¹æ€§æ›´å¥½</span></span><br><span class="line">      <span class="attr">as</span>: <span class="string">&quot;script&quot;</span>,</span><br><span class="line">      <span class="comment">// rel: &#x27;prefetch&#x27; // prefetchå…¼å®¹æ€§æ›´å·®</span></span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="attr">minimizer</span>: [</span><br><span class="line">      <span class="comment">// csså‹ç¼©ä¹Ÿå¯ä»¥å†™åˆ°optimization.minimizeré‡Œé¢ï¼Œæ•ˆæœä¸€æ ·çš„</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">CssMinimizerPlugin</span>(),</span><br><span class="line">      <span class="comment">// å½“ç”Ÿäº§æ¨¡å¼ä¼šé»˜è®¤å¼€å¯TerserPluginï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦è¿›è¡Œå…¶ä»–é…ç½®ï¼Œå°±è¦é‡æ–°å†™äº†</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">TerserPlugin</span>(&#123;</span><br><span class="line">        <span class="attr">parallel</span>: threads, <span class="comment">// å¼€å¯å¤šè¿›ç¨‹</span></span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="comment">// å‹ç¼©å›¾ç‰‡</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">ImageMinimizerPlugin</span>(&#123;</span><br><span class="line">        <span class="attr">minimizer</span>: &#123;</span><br><span class="line">          <span class="attr">implementation</span>: <span class="title class_">ImageMinimizerPlugin</span>.<span class="property">imageminGenerate</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">plugins</span>: [</span><br><span class="line">              [<span class="string">&quot;gifsicle&quot;</span>, &#123; <span class="attr">interlaced</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">              [<span class="string">&quot;jpegtran&quot;</span>, &#123; <span class="attr">progressive</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">              [<span class="string">&quot;optipng&quot;</span>, &#123; <span class="attr">optimizationLevel</span>: <span class="number">5</span> &#125;],</span><br><span class="line">              [</span><br><span class="line">                <span class="string">&quot;svgo&quot;</span>,</span><br><span class="line">                &#123;</span><br><span class="line">                  <span class="attr">plugins</span>: [</span><br><span class="line">                    <span class="string">&quot;preset-default&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;prefixIds&quot;</span>,</span><br><span class="line">                    &#123;</span><br><span class="line">                      <span class="attr">name</span>: <span class="string">&quot;sortAttrs&quot;</span>,</span><br><span class="line">                      <span class="attr">params</span>: &#123;</span><br><span class="line">                        <span class="attr">xmlnsOrder</span>: <span class="string">&quot;alphabetical&quot;</span>,</span><br><span class="line">                      &#125;,</span><br><span class="line">                    &#125;,</span><br><span class="line">                  ],</span><br><span class="line">                &#125;,</span><br><span class="line">              ],</span><br><span class="line">            ],</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;),</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// ä»£ç åˆ†å‰²é…ç½®</span></span><br><span class="line">    <span class="attr">splitChunks</span>: &#123;</span><br><span class="line">      <span class="attr">chunks</span>: <span class="string">&quot;all&quot;</span>, <span class="comment">// å¯¹æ‰€æœ‰æ¨¡å—éƒ½è¿›è¡Œåˆ†å‰²</span></span><br><span class="line">      <span class="comment">// å…¶ä»–å†…å®¹ç”¨é»˜è®¤é…ç½®å³å¯</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// æå–runtimeæ–‡ä»¶</span></span><br><span class="line">    <span class="attr">runtimeChunk</span>: &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="function">(<span class="params">entrypoint</span>) =&gt;</span> <span class="string">`runtime~<span class="subst">$&#123;entrypoint.name&#125;</span>`</span>, <span class="comment">// runtimeæ–‡ä»¶å‘½åè§„åˆ™</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// devServer: &#123;</span></span><br><span class="line">  <span class="comment">//   host: &quot;localhost&quot;, // å¯åŠ¨æœåŠ¡å™¨åŸŸå</span></span><br><span class="line">  <span class="comment">//   port: &quot;3000&quot;, // å¯åŠ¨æœåŠ¡å™¨ç«¯å£å·</span></span><br><span class="line">  <span class="comment">//   open: true, // æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&quot;source-map&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="Core-js">Core-js</h2><h3 id="ä¸ºä»€ä¹ˆ-v13">ä¸ºä»€ä¹ˆ</h3><p>è¿‡å»æˆ‘ä»¬ä½¿ç”¨ babel å¯¹ js ä»£ç è¿›è¡Œäº†å…¼å®¹æ€§å¤„ç†ï¼Œå…¶ä¸­ä½¿ç”¨@babel/preset-env æ™ºèƒ½é¢„è®¾æ¥å¤„ç†å…¼å®¹æ€§é—®é¢˜ã€‚</p><p>å®ƒèƒ½å°† ES6 çš„ä¸€äº›è¯­æ³•è¿›è¡Œç¼–è¯‘è½¬æ¢ï¼Œæ¯”å¦‚ç®­å¤´å‡½æ•°ã€ç‚¹ç‚¹ç‚¹è¿ç®—ç¬¦ç­‰ã€‚ä½†æ˜¯å¦‚æœæ˜¯ async å‡½æ•°ã€promise å¯¹è±¡ã€æ•°ç»„çš„ä¸€äº›æ–¹æ³•ï¼ˆincludesï¼‰ç­‰ï¼Œå®ƒæ²¡åŠæ³•å¤„ç†ã€‚</p><p>æ‰€ä»¥æ­¤æ—¶æˆ‘ä»¬ js ä»£ç ä»ç„¶å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼Œä¸€æ—¦é‡åˆ°ä½ç‰ˆæœ¬æµè§ˆå™¨ä¼šç›´æ¥æŠ¥é”™ã€‚æ‰€ä»¥æˆ‘ä»¬æƒ³è¦å°† js å…¼å®¹æ€§é—®é¢˜å½»åº•è§£å†³</p><h3 id="æ˜¯ä»€ä¹ˆ-v13">æ˜¯ä»€ä¹ˆ</h3><p><code>core-js</code> æ˜¯ä¸“é—¨ç”¨æ¥åš ES6 ä»¥åŠä»¥ä¸Š API çš„ <code>polyfill</code>ã€‚</p><p><code>polyfill</code>ç¿»è¯‘è¿‡æ¥å«åšå«ç‰‡/è¡¥ä¸ã€‚å°±æ˜¯ç”¨ç¤¾åŒºä¸Šæä¾›çš„ä¸€æ®µä»£ç ï¼Œè®©æˆ‘ä»¬åœ¨ä¸å…¼å®¹æŸäº›æ–°ç‰¹æ€§çš„æµè§ˆå™¨ä¸Šï¼Œä½¿ç”¨è¯¥æ–°ç‰¹æ€§ã€‚</p><h3 id="æ€ä¹ˆç”¨-v13">æ€ä¹ˆç”¨</h3><ol><li>ä¿®æ”¹ main.js</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> count <span class="keyword">from</span> <span class="string">&quot;./js/count&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> sum <span class="keyword">from</span> <span class="string">&quot;./js/sum&quot;</span>;</span><br><span class="line"><span class="comment">// å¼•å…¥èµ„æºï¼ŒWebpackæ‰ä¼šå¯¹å…¶æ‰“åŒ…</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./css/iconfont.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./css/index.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./less/index.less&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./sass/index.sass&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./sass/index.scss&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./styl/index.styl&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result1 = <span class="title function_">count</span>(<span class="number">2</span>, <span class="number">1</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result1);</span><br><span class="line"><span class="keyword">const</span> result2 = <span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result2);</span><br><span class="line"><span class="comment">// æ·»åŠ promiseä»£ç </span></span><br><span class="line"><span class="keyword">const</span> promise = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>();</span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello promise&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ Eslint ä¼šå¯¹ Promise æŠ¥é”™ã€‚</p><ol start="2"><li>ä¿®æ”¹é…ç½®æ–‡ä»¶</li></ol><ul><li>ä¸‹è½½åŒ…</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i @babel/eslint-parser -D</span><br></pre></td></tr></table></figure><ul><li>.eslintrc.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// ç»§æ‰¿ Eslint è§„åˆ™</span></span><br><span class="line">  <span class="attr">extends</span>: [<span class="string">&quot;eslint:recommended&quot;</span>],</span><br><span class="line">  <span class="attr">parser</span>: <span class="string">&quot;@babel/eslint-parser&quot;</span>, <span class="comment">// æ”¯æŒæœ€æ–°çš„æœ€ç»ˆ ECMAScript æ ‡å‡†</span></span><br><span class="line">  <span class="attr">env</span>: &#123;</span><br><span class="line">    <span class="attr">node</span>: <span class="literal">true</span>, <span class="comment">// å¯ç”¨nodeä¸­å…¨å±€å˜é‡</span></span><br><span class="line">    <span class="attr">browser</span>: <span class="literal">true</span>, <span class="comment">// å¯ç”¨æµè§ˆå™¨ä¸­å…¨å±€å˜é‡</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="string">&quot;import&quot;</span>], <span class="comment">// è§£å†³åŠ¨æ€å¯¼å…¥importè¯­æ³•æŠ¥é”™é—®é¢˜ --&gt; å®é™…ä½¿ç”¨eslint-plugin-importçš„è§„åˆ™è§£å†³çš„</span></span><br><span class="line">  <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">    <span class="attr">ecmaVersion</span>: <span class="number">6</span>, <span class="comment">// es6</span></span><br><span class="line">    <span class="attr">sourceType</span>: <span class="string">&quot;module&quot;</span>, <span class="comment">// es module</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&quot;no-var&quot;</span>: <span class="number">2</span>, <span class="comment">// ä¸èƒ½ä½¿ç”¨ var å®šä¹‰å˜é‡</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="3"><li>è¿è¡ŒæŒ‡ä»¤</li></ol><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶è§‚å¯Ÿæ‰“åŒ…è¾“å‡ºçš„ js æ–‡ä»¶ï¼Œæˆ‘ä»¬å‘ç° Promise è¯­æ³•å¹¶æ²¡æœ‰ç¼–è¯‘è½¬æ¢ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>core-js</code> æ¥è¿›è¡Œ <code>polyfill</code>ã€‚</p><ol start="4"><li>ä½¿ç”¨<code>core-js</code></li></ol><ul><li>ä¸‹è½½åŒ…</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i core-js</span><br></pre></td></tr></table></figure><ul><li>æ‰‹åŠ¨å…¨éƒ¨å¼•å…¥</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;core-js&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> count <span class="keyword">from</span> <span class="string">&quot;./js/count&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> sum <span class="keyword">from</span> <span class="string">&quot;./js/sum&quot;</span>;</span><br><span class="line"><span class="comment">// å¼•å…¥èµ„æºï¼ŒWebpackæ‰ä¼šå¯¹å…¶æ‰“åŒ…</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./css/iconfont.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./css/index.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./less/index.less&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./sass/index.sass&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./sass/index.scss&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./styl/index.styl&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result1 = <span class="title function_">count</span>(<span class="number">2</span>, <span class="number">1</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result1);</span><br><span class="line"><span class="keyword">const</span> result2 = <span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result2);</span><br><span class="line"><span class="comment">// æ·»åŠ promiseä»£ç </span></span><br><span class="line"><span class="keyword">const</span> promise = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>();</span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello promise&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¿™æ ·å¼•å…¥ä¼šå°†æ‰€æœ‰å…¼å®¹æ€§ä»£ç å…¨éƒ¨å¼•å…¥ï¼Œä½“ç§¯å¤ªå¤§äº†ã€‚æˆ‘ä»¬åªæƒ³å¼•å…¥ promise çš„ <code>polyfill</code>ã€‚</p><ul><li>æ‰‹åŠ¨æŒ‰éœ€å¼•å…¥</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;core-js/es/promise&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> count <span class="keyword">from</span> <span class="string">&quot;./js/count&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> sum <span class="keyword">from</span> <span class="string">&quot;./js/sum&quot;</span>;</span><br><span class="line"><span class="comment">// å¼•å…¥èµ„æºï¼ŒWebpackæ‰ä¼šå¯¹å…¶æ‰“åŒ…</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./css/iconfont.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./css/index.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./less/index.less&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./sass/index.sass&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./sass/index.scss&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./styl/index.styl&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result1 = <span class="title function_">count</span>(<span class="number">2</span>, <span class="number">1</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result1);</span><br><span class="line"><span class="keyword">const</span> result2 = <span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result2);</span><br><span class="line"><span class="comment">// æ·»åŠ promiseä»£ç </span></span><br><span class="line"><span class="keyword">const</span> promise = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>();</span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello promise&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>åªå¼•å…¥æ‰“åŒ… promise çš„ <code>polyfill</code>ï¼Œæ‰“åŒ…ä½“ç§¯æ›´å°ã€‚ä½†æ˜¯å°†æ¥å¦‚æœè¿˜æƒ³ä½¿ç”¨å…¶ä»–è¯­æ³•ï¼Œæˆ‘éœ€è¦æ‰‹åŠ¨å¼•å…¥åº“å¾ˆéº»çƒ¦ã€‚</p><ul><li><p>è‡ªåŠ¨æŒ‰éœ€å¼•å…¥</p><ul><li>main.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> count <span class="keyword">from</span> <span class="string">&quot;./js/count&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> sum <span class="keyword">from</span> <span class="string">&quot;./js/sum&quot;</span>;</span><br><span class="line"><span class="comment">// å¼•å…¥èµ„æºï¼ŒWebpackæ‰ä¼šå¯¹å…¶æ‰“åŒ…</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./css/iconfont.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./css/index.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./less/index.less&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./sass/index.sass&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./sass/index.scss&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./styl/index.styl&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result1 = <span class="title function_">count</span>(<span class="number">2</span>, <span class="number">1</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result1);</span><br><span class="line"><span class="keyword">const</span> result2 = <span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result2);</span><br><span class="line"><span class="comment">// æ·»åŠ promiseä»£ç </span></span><br><span class="line"><span class="keyword">const</span> promise = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>();</span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello promise&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>babel.config.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// æ™ºèƒ½é¢„è®¾ï¼šèƒ½å¤Ÿç¼–è¯‘ES6è¯­æ³•</span></span><br><span class="line">  <span class="attr">presets</span>: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&quot;@babel/preset-env&quot;</span>,</span><br><span class="line">      <span class="comment">// æŒ‰éœ€åŠ è½½core-jsçš„polyfill</span></span><br><span class="line">      &#123; <span class="attr">useBuiltIns</span>: <span class="string">&quot;usage&quot;</span>, <span class="attr">corejs</span>: &#123; <span class="attr">version</span>: <span class="string">&quot;3&quot;</span>, <span class="attr">proposals</span>: <span class="literal">true</span> &#125; &#125;,</span><br><span class="line">    ],</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ul><p>æ­¤æ—¶å°±ä¼šè‡ªåŠ¨æ ¹æ®æˆ‘ä»¬ä»£ç ä¸­ä½¿ç”¨çš„è¯­æ³•ï¼Œæ¥æŒ‰éœ€åŠ è½½ç›¸åº”çš„ <code>polyfill</code> äº†ã€‚</p><h2 id="PWA">PWA</h2><h3 id="ä¸ºä»€ä¹ˆ-v14">ä¸ºä»€ä¹ˆ</h3><p>å¼€å‘ Web App é¡¹ç›®ï¼Œé¡¹ç›®ä¸€æ—¦å¤„äºç½‘ç»œç¦»çº¿æƒ…å†µï¼Œå°±æ²¡æ³•è®¿é—®äº†ã€‚</p><p>æˆ‘ä»¬å¸Œæœ›ç»™é¡¹ç›®æä¾›ç¦»çº¿ä½“éªŒã€‚</p><h3 id="æ˜¯ä»€ä¹ˆ-v14">æ˜¯ä»€ä¹ˆ</h3><p>æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åº(progressive web application - PWA)ï¼šæ˜¯ä¸€ç§å¯ä»¥æä¾›ç±»ä¼¼äº native app(åŸç”Ÿåº”ç”¨ç¨‹åº) ä½“éªŒçš„ Web App çš„æŠ€æœ¯ã€‚</p><p>å…¶ä¸­æœ€é‡è¦çš„æ˜¯ï¼Œåœ¨ <strong>ç¦»çº¿(offline)</strong> æ—¶åº”ç”¨ç¨‹åºèƒ½å¤Ÿç»§ç»­è¿è¡ŒåŠŸèƒ½ã€‚</p><p>å†…éƒ¨é€šè¿‡ Service Workers æŠ€æœ¯å®ç°çš„ã€‚</p><h3 id="æ€ä¹ˆç”¨-v14">æ€ä¹ˆç”¨</h3><ol><li>ä¸‹è½½åŒ…</li></ol><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i workbox-webpack-plugin -D</span><br></pre></td></tr></table></figure><ol start="2"><li>ä¿®æ”¹é…ç½®æ–‡ä»¶</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> os = <span class="built_in">require</span>(<span class="string">&quot;os&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;mini-css-extract-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CssMinimizerPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;css-minimizer-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">TerserPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;terser-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ImageMinimizerPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;image-minimizer-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">PreloadWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;@vue/preload-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">WorkboxPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;workbox-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// cpuæ ¸æ•°</span></span><br><span class="line"><span class="keyword">const</span> threads = os.<span class="title function_">cpus</span>().<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å¤„ç†æ ·å¼çš„Loaders</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getStyleLoaders</span> = (<span class="params">preProcessor</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> [</span><br><span class="line">    <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">    <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">          <span class="attr">plugins</span>: [</span><br><span class="line">            <span class="string">&quot;postcss-preset-env&quot;</span>, <span class="comment">// èƒ½è§£å†³å¤§å¤šæ•°æ ·å¼å…¼å®¹æ€§é—®é¢˜</span></span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    preProcessor,</span><br><span class="line">  ].<span class="title function_">filter</span>(<span class="title class_">Boolean</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../dist&quot;</span>), <span class="comment">// ç”Ÿäº§æ¨¡å¼éœ€è¦è¾“å‡º</span></span><br><span class="line">    <span class="comment">// [contenthash:8]ä½¿ç”¨contenthashï¼Œå–8ä½é•¿åº¦</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/[name].[contenthash:8].js&quot;</span>, <span class="comment">// å…¥å£æ–‡ä»¶æ‰“åŒ…è¾“å‡ºèµ„æºå‘½åæ–¹å¼</span></span><br><span class="line">    <span class="attr">chunkFilename</span>: <span class="string">&quot;static/js/[name].[contenthash:8].chunk.js&quot;</span>, <span class="comment">// åŠ¨æ€å¯¼å…¥è¾“å‡ºèµ„æºå‘½åæ–¹å¼</span></span><br><span class="line">    <span class="attr">assetModuleFilename</span>: <span class="string">&quot;static/media/[name].[hash][ext]&quot;</span>, <span class="comment">// å›¾ç‰‡ã€å­—ä½“ç­‰èµ„æºå‘½åæ–¹å¼ï¼ˆæ³¨æ„ç”¨hashï¼‰</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">oneOf</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="comment">// ç”¨æ¥åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">            <span class="comment">// use æ•°ç»„é‡Œé¢ Loader æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span></span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;less-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;sass-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">            <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(<span class="string">&quot;stylus-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|svg)$/</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">            <span class="attr">parser</span>: &#123;</span><br><span class="line">              <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">                <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span>, <span class="comment">// å°äº10kbçš„å›¾ç‰‡ä¼šè¢«base64å¤„ç†</span></span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// generator: &#123;</span></span><br><span class="line">            <span class="comment">//   // å°†å›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ° static/imgs ç›®å½•ä¸­</span></span><br><span class="line">            <span class="comment">//   // å°†å›¾ç‰‡æ–‡ä»¶å‘½å [hash:8][ext][query]</span></span><br><span class="line">            <span class="comment">//   // [hash:8]: hashå€¼å–8ä½</span></span><br><span class="line">            <span class="comment">//   // [ext]: ä½¿ç”¨ä¹‹å‰çš„æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">            <span class="comment">//   // [query]: æ·»åŠ ä¹‹å‰çš„queryå‚æ•°</span></span><br><span class="line">            <span class="comment">//   filename: &quot;static/imgs/[hash:8][ext][query]&quot;,</span></span><br><span class="line">            <span class="comment">// &#125;,</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2?)$/</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">            <span class="comment">// generator: &#123;</span></span><br><span class="line">            <span class="comment">//   filename: &quot;static/media/[hash:8][ext][query]&quot;,</span></span><br><span class="line">            <span class="comment">// &#125;,</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            <span class="comment">// exclude: /node_modules/, // æ’é™¤node_modulesä»£ç ä¸ç¼–è¯‘</span></span><br><span class="line">            <span class="attr">include</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>), <span class="comment">// ä¹Ÿå¯ä»¥ç”¨åŒ…å«</span></span><br><span class="line">            <span class="attr">use</span>: [</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="attr">loader</span>: <span class="string">&quot;thread-loader&quot;</span>, <span class="comment">// å¼€å¯å¤šè¿›ç¨‹</span></span><br><span class="line">                <span class="attr">options</span>: &#123;</span><br><span class="line">                  <span class="attr">workers</span>: threads, <span class="comment">// æ•°é‡</span></span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">                <span class="attr">options</span>: &#123;</span><br><span class="line">                  <span class="attr">cacheDirectory</span>: <span class="literal">true</span>, <span class="comment">// å¼€å¯babelç¼–è¯‘ç¼“å­˜</span></span><br><span class="line">                  <span class="attr">cacheCompression</span>: <span class="literal">false</span>, <span class="comment">// ç¼“å­˜æ–‡ä»¶ä¸è¦å‹ç¼©</span></span><br><span class="line">                  <span class="attr">plugins</span>: [<span class="string">&quot;@babel/plugin-transform-runtime&quot;</span>], <span class="comment">// å‡å°‘ä»£ç ä½“ç§¯</span></span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;,</span><br><span class="line">            ],</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// æŒ‡å®šæ£€æŸ¥æ–‡ä»¶çš„æ ¹ç›®å½•</span></span><br><span class="line">      <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>),</span><br><span class="line">      <span class="attr">exclude</span>: <span class="string">&quot;node_modules&quot;</span>, <span class="comment">// é»˜è®¤å€¼</span></span><br><span class="line">      <span class="attr">cache</span>: <span class="literal">true</span>, <span class="comment">// å¼€å¯ç¼“å­˜</span></span><br><span class="line">      <span class="comment">// ç¼“å­˜ç›®å½•</span></span><br><span class="line">      <span class="attr">cacheLocation</span>: path.<span class="title function_">resolve</span>(</span><br><span class="line">        __dirname,</span><br><span class="line">        <span class="string">&quot;../node_modules/.cache/.eslintcache&quot;</span></span><br><span class="line">      ),</span><br><span class="line">      threads, <span class="comment">// å¼€å¯å¤šè¿›ç¨‹</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// ä»¥ public/index.html ä¸ºæ¨¡æ¿åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line">      <span class="comment">// æ–°çš„htmlæ–‡ä»¶æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š1. å†…å®¹å’Œæºæ–‡ä»¶ä¸€è‡´ 2. è‡ªåŠ¨å¼•å…¥æ‰“åŒ…ç”Ÿæˆçš„jsç­‰èµ„æº</span></span><br><span class="line">      <span class="attr">template</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../public/index.html&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// æå–cssæˆå•ç‹¬æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// å®šä¹‰è¾“å‡ºæ–‡ä»¶åå’Œç›®å½•</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&quot;static/css/[name].[contenthash:8].css&quot;</span>,</span><br><span class="line">      <span class="attr">chunkFilename</span>: <span class="string">&quot;static/css/[name].[contenthash:8].chunk.css&quot;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// csså‹ç¼©</span></span><br><span class="line">    <span class="comment">// new CssMinimizerPlugin(),</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">PreloadWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">rel</span>: <span class="string">&quot;preload&quot;</span>, <span class="comment">// preloadå…¼å®¹æ€§æ›´å¥½</span></span><br><span class="line">      <span class="attr">as</span>: <span class="string">&quot;script&quot;</span>,</span><br><span class="line">      <span class="comment">// rel: &#x27;prefetch&#x27; // prefetchå…¼å®¹æ€§æ›´å·®</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">WorkboxPlugin</span>.<span class="title class_">GenerateSW</span>(&#123;</span><br><span class="line">      <span class="comment">// è¿™äº›é€‰é¡¹å¸®åŠ©å¿«é€Ÿå¯ç”¨ ServiceWorkers</span></span><br><span class="line">      <span class="comment">// ä¸å…è®¸é—ç•™ä»»ä½•â€œæ—§çš„â€ ServiceWorkers</span></span><br><span class="line">      <span class="attr">clientsClaim</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">skipWaiting</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="attr">minimizer</span>: [</span><br><span class="line">      <span class="comment">// csså‹ç¼©ä¹Ÿå¯ä»¥å†™åˆ°optimization.minimizeré‡Œé¢ï¼Œæ•ˆæœä¸€æ ·çš„</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">CssMinimizerPlugin</span>(),</span><br><span class="line">      <span class="comment">// å½“ç”Ÿäº§æ¨¡å¼ä¼šé»˜è®¤å¼€å¯TerserPluginï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦è¿›è¡Œå…¶ä»–é…ç½®ï¼Œå°±è¦é‡æ–°å†™äº†</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">TerserPlugin</span>(&#123;</span><br><span class="line">        <span class="attr">parallel</span>: threads, <span class="comment">// å¼€å¯å¤šè¿›ç¨‹</span></span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="comment">// å‹ç¼©å›¾ç‰‡</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">ImageMinimizerPlugin</span>(&#123;</span><br><span class="line">        <span class="attr">minimizer</span>: &#123;</span><br><span class="line">          <span class="attr">implementation</span>: <span class="title class_">ImageMinimizerPlugin</span>.<span class="property">imageminGenerate</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">plugins</span>: [</span><br><span class="line">              [<span class="string">&quot;gifsicle&quot;</span>, &#123; <span class="attr">interlaced</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">              [<span class="string">&quot;jpegtran&quot;</span>, &#123; <span class="attr">progressive</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">              [<span class="string">&quot;optipng&quot;</span>, &#123; <span class="attr">optimizationLevel</span>: <span class="number">5</span> &#125;],</span><br><span class="line">              [</span><br><span class="line">                <span class="string">&quot;svgo&quot;</span>,</span><br><span class="line">                &#123;</span><br><span class="line">                  <span class="attr">plugins</span>: [</span><br><span class="line">                    <span class="string">&quot;preset-default&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;prefixIds&quot;</span>,</span><br><span class="line">                    &#123;</span><br><span class="line">                      <span class="attr">name</span>: <span class="string">&quot;sortAttrs&quot;</span>,</span><br><span class="line">                      <span class="attr">params</span>: &#123;</span><br><span class="line">                        <span class="attr">xmlnsOrder</span>: <span class="string">&quot;alphabetical&quot;</span>,</span><br><span class="line">                      &#125;,</span><br><span class="line">                    &#125;,</span><br><span class="line">                  ],</span><br><span class="line">                &#125;,</span><br><span class="line">              ],</span><br><span class="line">            ],</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;),</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// ä»£ç åˆ†å‰²é…ç½®</span></span><br><span class="line">    <span class="attr">splitChunks</span>: &#123;</span><br><span class="line">      <span class="attr">chunks</span>: <span class="string">&quot;all&quot;</span>, <span class="comment">// å¯¹æ‰€æœ‰æ¨¡å—éƒ½è¿›è¡Œåˆ†å‰²</span></span><br><span class="line">      <span class="comment">// å…¶ä»–å†…å®¹ç”¨é»˜è®¤é…ç½®å³å¯</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// devServer: &#123;</span></span><br><span class="line">  <span class="comment">//   host: &quot;localhost&quot;, // å¯åŠ¨æœåŠ¡å™¨åŸŸå</span></span><br><span class="line">  <span class="comment">//   port: &quot;3000&quot;, // å¯åŠ¨æœåŠ¡å™¨ç«¯å£å·</span></span><br><span class="line">  <span class="comment">//   open: true, // æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&quot;source-map&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="3"><li>ä¿®æ”¹ main.js</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> count <span class="keyword">from</span> <span class="string">&quot;./js/count&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> sum <span class="keyword">from</span> <span class="string">&quot;./js/sum&quot;</span>;</span><br><span class="line"><span class="comment">// å¼•å…¥èµ„æºï¼ŒWebpackæ‰ä¼šå¯¹å…¶æ‰“åŒ…</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./css/iconfont.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./css/index.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./less/index.less&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./sass/index.sass&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./sass/index.scss&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./styl/index.styl&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result1 = <span class="title function_">count</span>(<span class="number">2</span>, <span class="number">1</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result1);</span><br><span class="line"><span class="keyword">const</span> result2 = <span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result2);</span><br><span class="line"><span class="comment">// æ·»åŠ promiseä»£ç </span></span><br><span class="line"><span class="keyword">const</span> promise = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>();</span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello promise&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">includes</span>(<span class="number">5</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="string">&quot;serviceWorker&quot;</span> <span class="keyword">in</span> navigator) &#123;</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;load&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    navigator.<span class="property">serviceWorker</span></span><br><span class="line">      .<span class="title function_">register</span>(<span class="string">&quot;/service-worker.js&quot;</span>)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function">(<span class="params">registration</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;SW registered: &quot;</span>, registration);</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">catch</span>(<span class="function">(<span class="params">registrationError</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;SW registration failed: &quot;</span>, registrationError);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>è¿è¡ŒæŒ‡ä»¤</li></ol><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å¦‚æœç›´æ¥é€šè¿‡ VSCode è®¿é—®æ‰“åŒ…åé¡µé¢ï¼Œåœ¨æµè§ˆå™¨æ§åˆ¶å°ä¼šå‘ç° <code>SW registration failed</code>ã€‚</p><p>å› ä¸ºæˆ‘ä»¬æ‰“å¼€çš„è®¿é—®è·¯å¾„æ˜¯ï¼š<code>http://127.0.0.1:5500/dist/index.html</code>ã€‚æ­¤æ—¶é¡µé¢ä¼šå»è¯·æ±‚ <code>service-worker.js</code> æ–‡ä»¶ï¼Œè¯·æ±‚è·¯å¾„æ˜¯ï¼š<code>http://127.0.0.1:5500/service-worker.js</code>ï¼Œè¿™æ ·æ‰¾ä¸åˆ°ä¼š 404ã€‚</p><p>å®é™… <code>service-worker.js</code> æ–‡ä»¶è·¯å¾„æ˜¯ï¼š<code>http://127.0.0.1:5500/dist/service-worker.js</code>ã€‚</p><ol><li>è§£å†³è·¯å¾„é—®é¢˜</li></ol><ul><li>ä¸‹è½½åŒ…</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i serve -g</span><br></pre></td></tr></table></figure><p>serve ä¹Ÿæ˜¯ç”¨æ¥å¯åŠ¨å¼€å‘æœåŠ¡å™¨æ¥éƒ¨ç½²ä»£ç æŸ¥çœ‹æ•ˆæœçš„ã€‚</p><ul><li>è¿è¡ŒæŒ‡ä»¤</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">serve dist</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶é€šè¿‡ serve å¯åŠ¨çš„æœåŠ¡å™¨æˆ‘ä»¬ service-worker å°±èƒ½æ³¨å†ŒæˆåŠŸäº†ã€‚</p><ol start="2"><li>æ‰“åŒ…æ—¶ä¼šå‡ºç°æŠ¥é”™ï¼š</li></ol><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Error: Error with &#x27;src\images\1.jpeg&#x27;: &#x27;&quot;C:\Users\86176\Desktop\webpack\webpack_code\node_modules\jpegtran-bin\vendor\jpegtran.exe&quot;&#x27;</span><br><span class="line">Error with &#x27;src\images\3.gif&#x27;: spawn C:\Users\86176\Desktop\webpack\webpack_code\node_modules\optipng-bin\vendor\optipng.exe ENOENT</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬éœ€è¦å®‰è£…ä¸¤ä¸ªæ–‡ä»¶åˆ° node_modules ä¸­æ‰èƒ½è§£å†³, æ–‡ä»¶å¯ä»¥ä»è¯¾ä»¶ä¸­æ‰¾åˆ°ï¼š</p><ul><li>jpegtran.exe</li></ul><p>éœ€è¦å¤åˆ¶åˆ° <code>node_modules\jpegtran-bin\vendor</code> ä¸‹é¢</p><blockquote><p><a href="http://jpegclub.org/jpegtran/">jpegtran å®˜ç½‘åœ°å€</a></p></blockquote><ul><li>optipng.exe</li></ul><p>éœ€è¦å¤åˆ¶åˆ° <code>node_modules\optipng-bin\vendor</code> ä¸‹é¢</p><blockquote><p><a href="http://optipng.sourceforge.net/">OptiPNG å®˜ç½‘åœ°å€</a></p></blockquote><h1>æ€»ç»“</h1><p>æˆ‘ä»¬ä» 4 ä¸ªè§’åº¦å¯¹ webpack å’Œä»£ç è¿›è¡Œäº†ä¼˜åŒ–ï¼š</p><ol><li><p>æå‡å¼€å‘ä½“éªŒ</p><ul><li>ä½¿ç”¨ <code>Source Map</code> è®©å¼€å‘æˆ–ä¸Šçº¿æ—¶ä»£ç æŠ¥é”™èƒ½æœ‰æ›´åŠ å‡†ç¡®çš„é”™è¯¯æç¤ºã€‚</li></ul></li><li><p>æå‡ webpack æå‡æ‰“åŒ…æ„å»ºé€Ÿåº¦</p><ul><li>ä½¿ç”¨ <code>HotModuleReplacement</code> è®©å¼€å‘æ—¶åªé‡æ–°ç¼–è¯‘æ‰“åŒ…æ›´æ–°å˜åŒ–äº†çš„ä»£ç ï¼Œä¸å˜çš„ä»£ç ä½¿ç”¨ç¼“å­˜ï¼Œä»è€Œä½¿æ›´æ–°é€Ÿåº¦æ›´å¿«ã€‚</li><li>ä½¿ç”¨ <code>OneOf</code> è®©èµ„æºæ–‡ä»¶ä¸€æ—¦è¢«æŸä¸ª loader å¤„ç†äº†ï¼Œå°±ä¸ä¼šç»§ç»­éå†äº†ï¼Œæ‰“åŒ…é€Ÿåº¦æ›´å¿«ã€‚</li><li>ä½¿ç”¨ <code>Include/Exclude</code> æ’é™¤æˆ–åªæ£€æµ‹æŸäº›æ–‡ä»¶ï¼Œå¤„ç†çš„æ–‡ä»¶æ›´å°‘ï¼Œé€Ÿåº¦æ›´å¿«ã€‚</li><li>ä½¿ç”¨ <code>Cache</code> å¯¹ eslint å’Œ babel å¤„ç†çš„ç»“æœè¿›è¡Œç¼“å­˜ï¼Œè®©ç¬¬äºŒæ¬¡æ‰“åŒ…é€Ÿåº¦æ›´å¿«ã€‚</li><li>ä½¿ç”¨ <code>Thead</code> å¤šè¿›ç¨‹å¤„ç† eslint å’Œ babel ä»»åŠ¡ï¼Œé€Ÿåº¦æ›´å¿«ã€‚ï¼ˆéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿›ç¨‹å¯åŠ¨é€šä¿¡éƒ½æœ‰å¼€é”€çš„ï¼Œè¦åœ¨æ¯”è¾ƒå¤šä»£ç å¤„ç†æ—¶ä½¿ç”¨æ‰æœ‰æ•ˆæœï¼‰</li></ul></li><li><p>å‡å°‘ä»£ç ä½“ç§¯</p><ul><li>ä½¿ç”¨ <code>Tree Shaking</code> å‰”é™¤äº†æ²¡æœ‰ä½¿ç”¨çš„å¤šä½™ä»£ç ï¼Œè®©ä»£ç ä½“ç§¯æ›´å°ã€‚</li><li>ä½¿ç”¨ <code>@babel/plugin-transform-runtime</code> æ’ä»¶å¯¹ babel è¿›è¡Œå¤„ç†ï¼Œè®©è¾…åŠ©ä»£ç ä»ä¸­å¼•å…¥ï¼Œè€Œä¸æ˜¯æ¯ä¸ªæ–‡ä»¶éƒ½ç”Ÿæˆè¾…åŠ©ä»£ç ï¼Œä»è€Œä½“ç§¯æ›´å°ã€‚</li><li>ä½¿ç”¨ <code>Image Minimizer</code> å¯¹é¡¹ç›®ä¸­å›¾ç‰‡è¿›è¡Œå‹ç¼©ï¼Œä½“ç§¯æ›´å°ï¼Œè¯·æ±‚é€Ÿåº¦æ›´å¿«ã€‚ï¼ˆéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœé¡¹ç›®ä¸­å›¾ç‰‡éƒ½æ˜¯åœ¨çº¿é“¾æ¥ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦äº†ã€‚æœ¬åœ°é¡¹ç›®é™æ€å›¾ç‰‡æ‰éœ€è¦è¿›è¡Œå‹ç¼©ã€‚ï¼‰</li></ul></li><li><p>ä¼˜åŒ–ä»£ç è¿è¡Œæ€§èƒ½</p><ul><li>ä½¿ç”¨ <code>Code Split</code> å¯¹ä»£ç è¿›è¡Œåˆ†å‰²æˆå¤šä¸ª js æ–‡ä»¶ï¼Œä»è€Œä½¿å•ä¸ªæ–‡ä»¶ä½“ç§¯æ›´å°ï¼Œå¹¶è¡ŒåŠ è½½ js é€Ÿåº¦æ›´å¿«ã€‚å¹¶é€šè¿‡ import åŠ¨æ€å¯¼å…¥è¯­æ³•è¿›è¡ŒæŒ‰éœ€åŠ è½½ï¼Œä»è€Œè¾¾åˆ°éœ€è¦ä½¿ç”¨æ—¶æ‰åŠ è½½è¯¥èµ„æºï¼Œä¸ç”¨æ—¶ä¸åŠ è½½èµ„æºã€‚</li><li>ä½¿ç”¨ <code>Preload / Prefetch</code> å¯¹ä»£ç è¿›è¡Œæå‰åŠ è½½ï¼Œç­‰æœªæ¥éœ€è¦ä½¿ç”¨æ—¶å°±èƒ½ç›´æ¥ä½¿ç”¨ï¼Œä»è€Œç”¨æˆ·ä½“éªŒæ›´å¥½ã€‚</li><li>ä½¿ç”¨ <code>Network Cache</code> èƒ½å¯¹è¾“å‡ºèµ„æºæ–‡ä»¶è¿›è¡Œæ›´å¥½çš„å‘½åï¼Œå°†æ¥å¥½åšç¼“å­˜ï¼Œä»è€Œç”¨æˆ·ä½“éªŒæ›´å¥½ã€‚</li><li>ä½¿ç”¨ <code>Core-js</code> å¯¹ js è¿›è¡Œå…¼å®¹æ€§å¤„ç†ï¼Œè®©æˆ‘ä»¬ä»£ç èƒ½è¿è¡Œåœ¨ä½ç‰ˆæœ¬æµè§ˆå™¨ã€‚</li><li>ä½¿ç”¨ <code>PWA</code> èƒ½è®©ä»£ç ç¦»çº¿ä¹Ÿèƒ½è®¿é—®ï¼Œä»è€Œæå‡ç”¨æˆ·ä½“éªŒã€‚</li></ul></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;åŸºæœ¬ä½¿ç”¨&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;Webpack&lt;/code&gt; æ˜¯ä¸€ä¸ªé™æ€èµ„æºæ‰“åŒ…å·¥å…·ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å®ƒä¼šä»¥ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ä½œä¸ºæ‰“åŒ…çš„å…¥å£ï¼Œå°†æˆ‘ä»¬æ•´ä¸ªé¡¹ç›®æ‰€æœ‰æ–‡ä»¶ç¼–è¯‘ç»„åˆæˆä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶è¾“å‡ºå‡ºå»ã€‚&lt;/p&gt;
&lt;p&gt;è¾“å‡ºçš„æ–‡ä»¶å°±æ˜¯ç¼–è¯‘å¥½çš„</summary>
      
    
    
    
    <category term="å‰ç«¯ğŸ’¥" scheme="https://blog.cilicili.xyz/categories/%E5%89%8D%E7%AB%AF%F0%9F%92%A5/"/>
    
    
    <category term="Webpack" scheme="https://blog.cilicili.xyz/tags/Webpack/"/>
    
  </entry>
  
  <entry>
    <title>ã€åç«¯ã€‘åŸºäºExpressçš„å¤§äº‹ä»¶åå°APIé¡¹ç›®</title>
    <link href="https://blog.cilicili.xyz/posts/b9d48db8.html"/>
    <id>https://blog.cilicili.xyz/posts/b9d48db8.html</id>
    <published>2022-09-08T10:16:46.000Z</published>
    <updated>2022-09-09T09:34:52.864Z</updated>
    
    <content type="html"><![CDATA[<h1>å¤§äº‹ä»¶åå° API é¡¹ç›®</h1><blockquote><p><a href="https://www.showdoc.cc/escook?page_id=3707158761215217">API æ¥å£æ–‡æ¡£</a></p></blockquote><h2 id="é¡¹ç›®åˆå§‹åŒ–">é¡¹ç›®åˆå§‹åŒ–</h2><h3 id="åˆ›å»ºé¡¹ç›®">åˆ›å»ºé¡¹ç›®</h3><ol><li>æ–°å»º <code>api_server</code> æ–‡ä»¶å¤¹ä½œä¸ºé¡¹ç›®æ ¹ç›®å½•ï¼Œå¹¶åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­è¿è¡Œå¦‚ä¸‹çš„å‘½ä»¤ï¼Œåˆå§‹åŒ–åŒ…ç®¡ç†é…ç½®æ–‡ä»¶ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure><ol start="2"><li>è¿è¡Œå¦‚ä¸‹çš„å‘½ä»¤ï¼Œå®‰è£…ç‰¹å®šç‰ˆæœ¬çš„ <code>express</code>ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i express@4.17.1</span><br></pre></td></tr></table></figure><ol start="3"><li>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­æ–°å»º <code>app.js</code> ä½œä¸ºæ•´ä¸ªé¡¹ç›®çš„å…¥å£æ–‡ä»¶ï¼Œå¹¶åˆå§‹åŒ–å¦‚ä¸‹çš„ä»£ç ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="comment">// åˆ›å»º express çš„æœåŠ¡å™¨å®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// write your code here...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨ app.listen æ–¹æ³•ï¼ŒæŒ‡å®šç«¯å£å·å¹¶å¯åŠ¨webæœåŠ¡å™¨</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3007</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;api server running at http://127.0.0.1:3007&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="é…ç½®-cors-è·¨åŸŸ">é…ç½® cors è·¨åŸŸ</h3><ol><li>è¿è¡Œå¦‚ä¸‹çš„å‘½ä»¤ï¼Œå®‰è£… <code>cors</code> ä¸­é—´ä»¶ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i cors@2.8.5</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ <code>app.js</code> ä¸­å¯¼å…¥å¹¶é…ç½® <code>cors</code> ä¸­é—´ä»¶ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cors = <span class="built_in">require</span>(<span class="string">&#x27;cors&#x27;</span>)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cors</span>())</span><br></pre></td></tr></table></figure><h3 id="é…ç½®è§£æè¡¨å•æ•°æ®çš„ä¸­é—´ä»¶">é…ç½®è§£æè¡¨å•æ•°æ®çš„ä¸­é—´ä»¶</h3><p>é€šè¿‡å¦‚ä¸‹çš„ä»£ç ï¼Œé…ç½®è§£æ <code>application/x-www-form-urlencoded</code> æ ¼å¼çš„è¡¨å•æ•°æ®çš„ä¸­é—´ä»¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">urlencoded</span>(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;))</span><br></pre></td></tr></table></figure><h3 id="åˆå§‹åŒ–è·¯ç”±ç›¸å…³çš„æ–‡ä»¶å¤¹">åˆå§‹åŒ–è·¯ç”±ç›¸å…³çš„æ–‡ä»¶å¤¹</h3><ol><li>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­ï¼Œæ–°å»º <code>router</code> æ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾æ‰€æœ‰çš„<code>è·¯ç”±</code>æ¨¡å—</li></ol><blockquote><p>è·¯ç”±æ¨¡å—ä¸­ï¼Œåªå­˜æ”¾å®¢æˆ·ç«¯çš„è¯·æ±‚ä¸å¤„ç†å‡½æ•°ä¹‹é—´çš„æ˜ å°„å…³ç³»</p></blockquote><ol start="2"><li>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­ï¼Œæ–°å»º <code>router_handler</code> æ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾æ‰€æœ‰çš„ <code>è·¯ç”±å¤„ç†å‡½æ•°æ¨¡å—</code></li></ol><blockquote><p>è·¯ç”±å¤„ç†å‡½æ•°æ¨¡å—ä¸­ï¼Œä¸“é—¨è´Ÿè´£å­˜æ”¾æ¯ä¸ªè·¯ç”±å¯¹åº”çš„å¤„ç†å‡½æ•°</p></blockquote><h3 id="åˆå§‹åŒ–ç”¨æˆ·è·¯ç”±æ¨¡å—">åˆå§‹åŒ–ç”¨æˆ·è·¯ç”±æ¨¡å—</h3><ol><li>åœ¨ <code>router</code> æ–‡ä»¶å¤¹ä¸­ï¼Œæ–°å»º <code>user.js</code> æ–‡ä»¶ï¼Œä½œä¸ºç”¨æˆ·çš„è·¯ç”±æ¨¡å—ï¼Œå¹¶åˆå§‹åŒ–ä»£ç ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="comment">// åˆ›å»ºè·¯ç”±å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨å†Œæ–°ç”¨æˆ·</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/reguser&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;reguser OK&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç™»å½•</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;login OK&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ <code>app.js</code> ä¸­ï¼Œå¯¼å…¥æ³¨å†Œç”¨æˆ·è·¯ç”±æ¨¡å— ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> userRouter = <span class="built_in">require</span>(<span class="string">&#x27;./router/user&#x27;</span>)</span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/api&#x27;</span>, userRouter)</span><br></pre></td></tr></table></figure><h3 id="æŠ½ç¦»ç”¨æˆ·è·¯ç”±æ¨¡å—ä¸­çš„å¤„ç†å‡½æ•°">æŠ½ç¦»ç”¨æˆ·è·¯ç”±æ¨¡å—ä¸­çš„å¤„ç†å‡½æ•°</h3><blockquote><p>ç›®çš„ï¼šä¸ºäº†ä¿è¯ <code>è·¯ç”±æ¨¡å—</code> çš„çº¯ç²¹æ€§ï¼Œæ‰€æœ‰çš„ <code>è·¯ç”±å¤„ç†å‡½æ•°</code>ï¼Œå¿…é¡»æŠ½ç¦»åˆ°å¯¹åº”çš„ <code>è·¯ç”±å¤„ç†å‡½æ•°æ¨¡å—</code> ä¸­</p></blockquote><ol><li>åœ¨ <code>/router_handler/user.js</code> ä¸­ï¼Œä½¿ç”¨ <code>exports</code> å¯¹è±¡ï¼Œåˆ†åˆ«å‘å¤–å…±äº«å¦‚ä¸‹ä¸¤ä¸ª <code>è·¯ç”±å¤„ç†å‡½æ•°</code> ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åœ¨è¿™é‡Œå®šä¹‰å’Œç”¨æˆ·ç›¸å…³çš„è·¯ç”±å¤„ç†å‡½æ•°ï¼Œä¾› /router/user.js æ¨¡å—è¿›è¡Œè°ƒç”¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨å†Œç”¨æˆ·çš„å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">regUser</span> = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;reguser OK&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç™»å½•çš„å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">login</span> = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;login OK&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>å°† <code>/router/user.js</code> ä¸­çš„ä»£ç ä¿®æ”¹ä¸ºå¦‚ä¸‹ç»“æ„ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥ç”¨æˆ·è·¯ç”±å¤„ç†å‡½æ•°æ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> userHandler = <span class="built_in">require</span>(<span class="string">&#x27;../router_handler/user&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨å†Œæ–°ç”¨æˆ·</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/reguser&#x27;</span>, userHandler.<span class="property">regUser</span>)</span><br><span class="line"><span class="comment">// ç™»å½•</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>, userHandler.<span class="property">login</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router</span><br></pre></td></tr></table></figure><h2 id="ç™»å½•æ³¨å†Œ">ç™»å½•æ³¨å†Œ</h2><h3 id="æ–°å»º-ev-users-è¡¨">æ–°å»º ev_users è¡¨</h3><p>åœ¨ <code>test</code> æ•°æ®åº“ä¸­ï¼Œæ–°å»º <code>ev_users</code> è¡¨å¦‚ä¸‹ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/ev_users.77f8cdd3.png" alt="ev_usersè¡¨ç»“æ„"></p><h3 id="å®‰è£…å¹¶é…ç½®-mysql-æ¨¡å—">å®‰è£…å¹¶é…ç½® mysql æ¨¡å—</h3><blockquote><p>åœ¨ API æ¥å£é¡¹ç›®ä¸­ï¼Œéœ€è¦å®‰è£…å¹¶é…ç½® <code>mysql</code> è¿™ä¸ªç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œæ¥è¿æ¥å’Œæ“ä½œ MySQL æ•°æ®åº“</p></blockquote><ol><li>è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå®‰è£… <code>mysql</code> æ¨¡å—ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i mysql@2.18.1</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­æ–°å»º <code>/db/index.js</code> æ–‡ä»¶ï¼Œåœ¨æ­¤è‡ªå®šä¹‰æ¨¡å—ä¸­åˆ›å»ºæ•°æ®åº“çš„è¿æ¥å¯¹è±¡ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºæ•°æ®åº“è¿æ¥å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> db = mysql.<span class="title function_">createPool</span>(&#123;</span><br><span class="line">  <span class="attr">host</span>: <span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">  <span class="attr">user</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">  <span class="attr">password</span>: <span class="string">&#x27;admin123&#x27;</span>,</span><br><span class="line">  <span class="attr">database</span>: <span class="string">&#x27;my_db_01&#x27;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘å¤–å…±äº« db æ•°æ®åº“è¿æ¥å¯¹è±¡</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = db</span><br></pre></td></tr></table></figure><h3 id="æ³¨å†Œ">æ³¨å†Œ</h3><h4 id="å®ç°æ­¥éª¤">å®ç°æ­¥éª¤</h4><ol><li>æ£€æµ‹è¡¨å•æ•°æ®æ˜¯å¦åˆæ³•</li><li>æ£€æµ‹ç”¨æˆ·åæ˜¯å¦è¢«å ç”¨</li><li>å¯¹å¯†ç è¿›è¡ŒåŠ å¯†å¤„ç†</li><li>æ’å…¥æ–°ç”¨æˆ·</li></ol><h4 id="æ£€æµ‹è¡¨å•æ•°æ®æ˜¯å¦åˆæ³•">æ£€æµ‹è¡¨å•æ•°æ®æ˜¯å¦åˆæ³•</h4><p>åˆ¤æ–­ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦ä¸ºç©º</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¥æ”¶è¡¨å•æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> userinfo = req.<span class="property">body</span></span><br><span class="line"><span class="comment">// åˆ¤æ–­æ•°æ®æ˜¯å¦åˆæ³•</span></span><br><span class="line"><span class="keyword">if</span> (!userinfo.<span class="property">username</span> || !userinfo.<span class="property">password</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> res.<span class="title function_">send</span>(&#123; <span class="attr">status</span>: <span class="number">1</span>, <span class="attr">message</span>: <span class="string">&#x27;ç”¨æˆ·åæˆ–å¯†ç ä¸èƒ½ä¸ºç©ºï¼&#x27;</span> &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ£€æµ‹ç”¨æˆ·åæ˜¯å¦è¢«å ç”¨">æ£€æµ‹ç”¨æˆ·åæ˜¯å¦è¢«å ç”¨</h4><ol><li>å¯¼å…¥æ•°æ®åº“æ“ä½œæ¨¡å—ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> db = <span class="built_in">require</span>(<span class="string">&#x27;../db/index&#x27;</span>)</span><br></pre></td></tr></table></figure><ol start="2"><li>å®šä¹‰ SQL è¯­å¥ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sql = <span class="string">`select * from ev_users where username=?`</span></span><br></pre></td></tr></table></figure><ol start="3"><li>æ‰§è¡Œ SQL è¯­å¥å¹¶æ ¹æ®ç»“æœåˆ¤æ–­ç”¨æˆ·åæ˜¯å¦è¢«å ç”¨ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">db.<span class="title function_">query</span>(sql, [userinfo.<span class="property">username</span>], <span class="keyword">function</span> (<span class="params">err, results</span>) &#123;</span><br><span class="line">  <span class="comment">// æ‰§è¡Œ SQL è¯­å¥å¤±è´¥</span></span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="keyword">return</span> res.<span class="title function_">send</span>(&#123; <span class="attr">status</span>: <span class="number">1</span>, <span class="attr">message</span>: err.<span class="property">message</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ç”¨æˆ·åè¢«å ç”¨</span></span><br><span class="line">  <span class="keyword">if</span> (results.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> res.<span class="title function_">send</span>(&#123; <span class="attr">status</span>: <span class="number">1</span>, <span class="attr">message</span>: <span class="string">&#x27;ç”¨æˆ·åè¢«å ç”¨ï¼Œè¯·æ›´æ¢å…¶ä»–ç”¨æˆ·åï¼&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// <span class="doctag">TODO:</span> ç”¨æˆ·åå¯ç”¨ï¼Œç»§ç»­åç»­æµç¨‹...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="å¯¹å¯†ç è¿›è¡ŒåŠ å¯†å¤„ç†">å¯¹å¯†ç è¿›è¡ŒåŠ å¯†å¤„ç†</h4><blockquote><p>ä¸ºäº†ä¿è¯å¯†ç çš„å®‰å…¨æ€§ï¼Œä¸å»ºè®®åœ¨æ•°æ®åº“ä»¥ <code>æ˜æ–‡</code> çš„å½¢å¼ä¿å­˜ç”¨æˆ·å¯†ç ï¼Œæ¨èå¯¹å¯†ç è¿›è¡Œ <code>åŠ å¯†å­˜å‚¨</code></p></blockquote><hr><p>åœ¨å½“å‰é¡¹ç›®ä¸­ï¼Œä½¿ç”¨ <code>bcryptjs</code> å¯¹ç”¨æˆ·å¯†ç è¿›è¡ŒåŠ å¯†ï¼Œä¼˜ç‚¹ï¼š</p><ul><li>åŠ å¯†ä¹‹åçš„å¯†ç ï¼Œ<strong>æ— æ³•è¢«é€†å‘ç ´è§£</strong></li><li>åŒä¸€æ˜æ–‡å¯†ç å¤šæ¬¡åŠ å¯†ï¼Œå¾—åˆ°çš„<strong>åŠ å¯†ç»“æœå„ä¸ç›¸åŒ</strong>ï¼Œä¿è¯äº†å®‰å…¨æ€§</li></ul><hr><ol><li>è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ <code>bcryptjs</code> ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i bcryptjs@2.4.3</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ <code>/router_handler/user.js</code> ä¸­ï¼Œå¯¼å…¥ <code>bcryptjs</code> ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bcrypt = <span class="built_in">require</span>(<span class="string">&#x27;bcryptjs&#x27;</span>)</span><br></pre></td></tr></table></figure><ol start="3"><li>åœ¨æ³¨å†Œç”¨æˆ·çš„å¤„ç†å‡½æ•°ä¸­ï¼Œç¡®è®¤ç”¨æˆ·åå¯ç”¨ä¹‹åï¼Œè°ƒç”¨ <code>bcrypt.hashSync(æ˜æ–‡å¯†ç , éšæœºç›çš„é•¿åº¦)</code> æ–¹æ³•ï¼Œå¯¹ç”¨æˆ·çš„å¯†ç è¿›è¡ŒåŠ å¯†å¤„ç†ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¹ç”¨æˆ·çš„å¯†ç ,è¿›è¡Œ bcrype åŠ å¯†ï¼Œè¿”å›å€¼æ˜¯åŠ å¯†ä¹‹åçš„å¯†ç å­—ç¬¦ä¸²</span></span><br><span class="line">userinfo.<span class="property">password</span> = bcrypt.<span class="title function_">hashSync</span>(userinfo.<span class="property">password</span>, <span class="number">10</span>)</span><br></pre></td></tr></table></figure><h4 id="æ’å…¥æ–°ç”¨æˆ·">æ’å…¥æ–°ç”¨æˆ·</h4><ol><li>å®šä¹‰æ’å…¥ç”¨æˆ·çš„ SQL è¯­å¥ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sql = <span class="string">&#x27;insert into ev_users set ?&#x27;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>è°ƒç”¨ <code>db.query()</code> æ‰§è¡Œ SQL è¯­å¥ï¼Œæ’å…¥æ–°ç”¨æˆ·ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">db.<span class="title function_">query</span>(sql, &#123; <span class="attr">username</span>: userinfo.<span class="property">username</span>, <span class="attr">password</span>: userinfo.<span class="property">password</span> &#125;, <span class="keyword">function</span> (<span class="params">err, results</span>) &#123;</span><br><span class="line">  <span class="comment">// æ‰§è¡Œ SQL è¯­å¥å¤±è´¥</span></span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> res.<span class="title function_">send</span>(&#123; <span class="attr">status</span>: <span class="number">1</span>, <span class="attr">message</span>: err.<span class="property">message</span> &#125;)</span><br><span class="line">  <span class="comment">// SQL è¯­å¥æ‰§è¡ŒæˆåŠŸï¼Œä½†å½±å“è¡Œæ•°ä¸ä¸º 1</span></span><br><span class="line">  <span class="keyword">if</span> (results.<span class="property">affectedRows</span> !== <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> res.<span class="title function_">send</span>(&#123; <span class="attr">status</span>: <span class="number">1</span>, <span class="attr">message</span>: <span class="string">&#x27;æ³¨å†Œç”¨æˆ·å¤±è´¥ï¼Œè¯·ç¨åå†è¯•ï¼&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ³¨å†ŒæˆåŠŸ</span></span><br><span class="line">  res.<span class="title function_">send</span>(&#123; <span class="attr">status</span>: <span class="number">0</span>, <span class="attr">message</span>: <span class="string">&#x27;æ³¨å†ŒæˆåŠŸï¼&#x27;</span> &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="ä¼˜åŒ–-res-send-ä»£ç ">ä¼˜åŒ– res.send() ä»£ç </h3><blockquote><p>åœ¨å¤„ç†å‡½æ•°ä¸­ï¼Œéœ€è¦å¤šæ¬¡è°ƒç”¨ <code>res.send()</code> å‘å®¢æˆ·ç«¯å“åº” <code>å¤„ç†å¤±è´¥</code> çš„ç»“æœï¼Œä¸ºäº†ç®€åŒ–ä»£ç ï¼Œå¯ä»¥æ‰‹åŠ¨å°è£…ä¸€ä¸ª <a href="http://res.cc">res.cc</a>() å‡½æ•°</p></blockquote><ol><li>åœ¨ <code>app.js</code> ä¸­ï¼Œæ‰€æœ‰è·¯ç”±ä¹‹å‰ï¼Œå£°æ˜ä¸€ä¸ªå…¨å±€ä¸­é—´ä»¶ï¼Œä¸º res å¯¹è±¡æŒ‚è½½ä¸€ä¸ª <code>res.cc()</code> å‡½æ•° ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å“åº”æ•°æ®çš„ä¸­é—´ä»¶</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">req, res, next</span>) &#123;</span><br><span class="line">  <span class="comment">// status = 0 ä¸ºæˆåŠŸï¼› status = 1 ä¸ºå¤±è´¥ï¼› é»˜è®¤å°† status çš„å€¼è®¾ç½®ä¸º 1ï¼Œæ–¹ä¾¿å¤„ç†å¤±è´¥çš„æƒ…å†µ</span></span><br><span class="line">  res.<span class="property">cc</span> = <span class="keyword">function</span> (<span class="params">err, status = <span class="number">1</span></span>) &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(&#123;</span><br><span class="line">      <span class="comment">// çŠ¶æ€</span></span><br><span class="line">      status,</span><br><span class="line">      <span class="comment">// çŠ¶æ€æè¿°ï¼Œåˆ¤æ–­ err æ˜¯ é”™è¯¯å¯¹è±¡ è¿˜æ˜¯ å­—ç¬¦ä¸²</span></span><br><span class="line">      <span class="attr">message</span>: err <span class="keyword">instanceof</span> <span class="title class_">Error</span> ? err.<span class="property">message</span> : err,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="ä¼˜åŒ–è¡¨å•æ•°æ®éªŒè¯">ä¼˜åŒ–è¡¨å•æ•°æ®éªŒè¯</h3><blockquote><p>è¡¨å•éªŒè¯çš„åŸåˆ™ï¼šå‰ç«¯éªŒè¯ä¸ºè¾…ï¼Œåç«¯éªŒè¯ä¸ºä¸»ï¼Œåç«¯<strong>æ°¸è¿œä¸è¦ç›¸ä¿¡</strong>å‰ç«¯æäº¤è¿‡æ¥çš„<strong>ä»»ä½•å†…å®¹</strong></p></blockquote><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå‰åç«¯éƒ½éœ€è¦å¯¹è¡¨å•çš„æ•°æ®è¿›è¡Œåˆæ³•æ€§çš„éªŒè¯ï¼Œè€Œä¸”ï¼Œ<strong>åç«¯åšä¸ºæ•°æ®åˆæ³•æ€§éªŒè¯çš„æœ€åä¸€ä¸ªå…³å£</strong>ï¼Œåœ¨æ‹¦æˆªéæ³•æ•°æ®æ–¹é¢ï¼Œèµ·åˆ°äº†è‡³å…³é‡è¦çš„ä½œç”¨ã€‚</p><p>å•çº¯çš„ä½¿ç”¨ <code>if...else...</code> çš„å½¢å¼å¯¹æ•°æ®åˆæ³•æ€§è¿›è¡ŒéªŒè¯ï¼Œæ•ˆç‡ä½ä¸‹ã€å‡ºé”™ç‡é«˜ã€ç»´æŠ¤æ€§å·®ã€‚å› æ­¤ï¼Œæ¨èä½¿ç”¨<strong>ç¬¬ä¸‰æ–¹æ•°æ®éªŒè¯æ¨¡å—</strong>ï¼Œæ¥é™ä½å‡ºé”™ç‡ã€æé«˜éªŒè¯çš„æ•ˆç‡ä¸å¯ç»´æŠ¤æ€§ï¼Œ<strong>è®©åç«¯ç¨‹åºå‘˜æŠŠæ›´å¤šçš„ç²¾åŠ›æ”¾åœ¨æ ¸å¿ƒä¸šåŠ¡é€»è¾‘çš„å¤„ç†ä¸Š</strong>ã€‚</p><ol><li>å®‰è£… <code>joi</code> åŒ…ï¼Œä¸ºè¡¨å•ä¸­æºå¸¦çš„æ¯ä¸ªæ•°æ®é¡¹ï¼Œå®šä¹‰éªŒè¯è§„åˆ™ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install joi</span><br></pre></td></tr></table></figure><ol start="2"><li>å®‰è£… <code>@escook/express-joi</code> ä¸­é—´ä»¶ï¼Œæ¥å®ç°è‡ªåŠ¨å¯¹è¡¨å•æ•°æ®è¿›è¡ŒéªŒè¯çš„åŠŸèƒ½ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i @escook/express-joi</span><br></pre></td></tr></table></figure><ol start="3"><li>æ–°å»º <code>/schema/user.js</code> ç”¨æˆ·ä¿¡æ¯éªŒè¯è§„åˆ™æ¨¡å—ï¼Œå¹¶åˆå§‹åŒ–ä»£ç å¦‚ä¸‹ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> joi = <span class="built_in">require</span>(<span class="string">&#x27;joi&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * string() å€¼å¿…é¡»æ˜¯å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment"> * alphanum() å€¼åªèƒ½æ˜¯åŒ…å« a-zA-Z0-9 çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment"> * min(length) æœ€å°é•¿åº¦</span></span><br><span class="line"><span class="comment"> * max(length) æœ€å¤§é•¿åº¦</span></span><br><span class="line"><span class="comment"> * required() å€¼æ˜¯å¿…å¡«é¡¹ï¼Œä¸èƒ½ä¸º undefined</span></span><br><span class="line"><span class="comment"> * pattern(æ­£åˆ™è¡¨è¾¾å¼) å€¼å¿…é¡»ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼çš„è§„åˆ™</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨æˆ·åçš„éªŒè¯è§„åˆ™</span></span><br><span class="line"><span class="keyword">const</span> username = joi.<span class="title function_">string</span>().<span class="title function_">alphanum</span>().<span class="title function_">min</span>(<span class="number">1</span>).<span class="title function_">max</span>(<span class="number">10</span>).required()</span><br><span class="line"><span class="comment">// å¯†ç çš„éªŒè¯è§„åˆ™</span></span><br><span class="line"><span class="keyword">const</span> password = joi</span><br><span class="line">  .<span class="title function_">string</span>()</span><br><span class="line">  .<span class="title function_">pattern</span>(<span class="regexp">/^[\S]&#123;6,12&#125;$/</span>)</span><br><span class="line">  .required()</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨å†Œå’Œç™»å½•è¡¨å•çš„éªŒè¯è§„åˆ™å¯¹è±¡</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">reg_login_schema</span> = &#123;</span><br><span class="line">  <span class="comment">// è¡¨ç¤ºéœ€è¦å¯¹ req.body ä¸­çš„æ•°æ®è¿›è¡ŒéªŒè¯</span></span><br><span class="line">  <span class="attr">body</span>: &#123;</span><br><span class="line">    username,</span><br><span class="line">    password,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>ä¿®æ”¹ <code>/router/user.js</code> ä¸­çš„ä»£ç å¦‚ä¸‹ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥ç”¨æˆ·è·¯ç”±å¤„ç†å‡½æ•°æ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> userHandler = <span class="built_in">require</span>(<span class="string">&#x27;../router_handler/user&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. å¯¼å…¥éªŒè¯è¡¨å•æ•°æ®çš„ä¸­é—´ä»¶</span></span><br><span class="line"><span class="keyword">const</span> expressJoi = <span class="built_in">require</span>(<span class="string">&#x27;@escook/express-joi&#x27;</span>)</span><br><span class="line"><span class="comment">// 2. å¯¼å…¥éœ€è¦çš„éªŒè¯è§„åˆ™å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> &#123; reg_login_schema &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../schema/user&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨å†Œæ–°ç”¨æˆ·</span></span><br><span class="line"><span class="comment">// 3. åœ¨æ³¨å†Œæ–°ç”¨æˆ·çš„è·¯ç”±ä¸­ï¼Œå£°æ˜å±€éƒ¨ä¸­é—´ä»¶ï¼Œå¯¹å½“å‰è¯·æ±‚ä¸­æºå¸¦çš„æ•°æ®è¿›è¡ŒéªŒè¯</span></span><br><span class="line"><span class="comment">// 3.1 æ•°æ®éªŒè¯é€šè¿‡åï¼Œä¼šæŠŠè¿™æ¬¡è¯·æ±‚æµè½¬ç»™åé¢çš„è·¯ç”±å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="comment">// 3.2 æ•°æ®éªŒè¯å¤±è´¥åï¼Œç»ˆæ­¢åç»­ä»£ç çš„æ‰§è¡Œï¼Œå¹¶æŠ›å‡ºä¸€ä¸ªå…¨å±€çš„ Error é”™è¯¯ï¼Œè¿›å…¥å…¨å±€é”™è¯¯çº§åˆ«ä¸­é—´ä»¶ä¸­è¿›è¡Œå¤„ç†</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/reguser&#x27;</span>, <span class="title function_">expressJoi</span>(reg_login_schema), userHandler.<span class="property">regUser</span>)</span><br><span class="line"><span class="comment">// ç™»å½•</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>, userHandler.<span class="property">login</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router</span><br></pre></td></tr></table></figure><ol start="5"><li>åœ¨ <code>app.js</code> çš„å…¨å±€é”™è¯¯çº§åˆ«ä¸­é—´ä»¶ä¸­ï¼Œæ•è·éªŒè¯å¤±è´¥çš„é”™è¯¯ï¼Œå¹¶æŠŠéªŒè¯å¤±è´¥çš„ç»“æœå“åº”ç»™å®¢æˆ·ç«¯ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> joi = <span class="built_in">require</span>(<span class="string">&#x27;joi&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// é”™è¯¯ä¸­é—´ä»¶</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">err, req, res, next</span>) &#123;</span><br><span class="line">  <span class="comment">// æ•°æ®éªŒè¯å¤±è´¥</span></span><br><span class="line">  <span class="keyword">if</span> (err <span class="keyword">instanceof</span> joi.<span class="property">ValidationError</span>) <span class="keyword">return</span> res.<span class="title function_">cc</span>(err)</span><br><span class="line">  <span class="comment">// æœªçŸ¥é”™è¯¯</span></span><br><span class="line">  res.<span class="title function_">cc</span>(err)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="ç™»å½•">ç™»å½•</h3><h4 id="å®ç°æ­¥éª¤-v2">å®ç°æ­¥éª¤</h4><ol><li>æ£€æµ‹è¡¨å•æ•°æ®æ˜¯å¦åˆæ³•</li><li>æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·çš„æ•°æ®</li><li>åˆ¤æ–­ç”¨æˆ·è¾“å…¥çš„å¯†ç æ˜¯å¦æ­£ç¡®</li><li>ç”Ÿæˆ JWT çš„ Token å­—ç¬¦ä¸²</li></ol><h4 id="æ£€æµ‹ç™»å½•è¡¨å•çš„æ•°æ®æ˜¯å¦åˆæ³•">æ£€æµ‹ç™»å½•è¡¨å•çš„æ•°æ®æ˜¯å¦åˆæ³•</h4><ol><li>å°† <code>/router/user.js</code> ä¸­ <code>ç™»å½•</code> çš„è·¯ç”±ä»£ç ä¿®æ”¹å¦‚ä¸‹ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç™»å½•çš„è·¯ç”±</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>, <span class="title function_">expressJoi</span>(reg_login_schema), userHandler.<span class="property">login</span>)</span><br></pre></td></tr></table></figure><h4 id="æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·çš„æ•°æ®">æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·çš„æ•°æ®</h4><ol><li>æ¥æ”¶è¡¨å•æ•°æ®ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> userinfo = req.<span class="property">body</span></span><br></pre></td></tr></table></figure><ol start="2"><li>å®šä¹‰ SQL è¯­å¥ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sql = <span class="string">`select * from ev_users where username=?`</span></span><br></pre></td></tr></table></figure><ol start="3"><li>æ‰§è¡Œ SQL è¯­å¥ï¼ŒæŸ¥è¯¢ç”¨æˆ·çš„æ•°æ®ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">db.<span class="title function_">query</span>(sql, userinfo.<span class="property">username</span>, <span class="keyword">function</span> (<span class="params">err, results</span>) &#123;</span><br><span class="line">  <span class="comment">// æ‰§è¡Œ SQL è¯­å¥å¤±è´¥</span></span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> res.<span class="title function_">cc</span>(err)</span><br><span class="line">  <span class="comment">// æ‰§è¡Œ SQL è¯­å¥æˆåŠŸï¼Œä½†æ˜¯æŸ¥è¯¢åˆ°æ•°æ®æ¡æ•°ä¸ç­‰äº 1</span></span><br><span class="line">  <span class="keyword">if</span> (results.<span class="property">length</span> !== <span class="number">1</span>) <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&#x27;ç™»å½•å¤±è´¥ï¼&#x27;</span>)</span><br><span class="line">  <span class="comment">// TODOï¼šåˆ¤æ–­ç”¨æˆ·è¾“å…¥çš„ç™»å½•å¯†ç æ˜¯å¦å’Œæ•°æ®åº“ä¸­çš„å¯†ç ä¸€è‡´</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="åˆ¤æ–­ç”¨æˆ·è¾“å…¥çš„å¯†ç æ˜¯å¦æ­£ç¡®">åˆ¤æ–­ç”¨æˆ·è¾“å…¥çš„å¯†ç æ˜¯å¦æ­£ç¡®</h4><blockquote><p>æ ¸å¿ƒå®ç°æ€è·¯ï¼šè°ƒç”¨ <code>bcrypt.compareSync(ç”¨æˆ·æäº¤çš„å¯†ç , æ•°æ®åº“ä¸­çš„å¯†ç )</code> æ–¹æ³•æ¯”è¾ƒå¯†ç æ˜¯å¦ä¸€è‡´</p></blockquote><blockquote><p>è¿”å›å€¼æ˜¯å¸ƒå°”å€¼ï¼ˆtrue ä¸€è‡´ã€false ä¸ä¸€è‡´ï¼‰</p></blockquote><p>å…·ä½“çš„å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‹¿ç€ç”¨æˆ·è¾“å…¥çš„å¯†ç ,å’Œæ•°æ®åº“ä¸­å­˜å‚¨çš„å¯†ç è¿›è¡Œå¯¹æ¯”</span></span><br><span class="line"><span class="keyword">const</span> compareResult = bcrypt.<span class="title function_">compareSync</span>(userinfo.<span class="property">password</span>, results[<span class="number">0</span>].<span class="property">password</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœå¯¹æ¯”çš„ç»“æœç­‰äº false, åˆ™è¯æ˜ç”¨æˆ·è¾“å…¥çš„å¯†ç é”™è¯¯</span></span><br><span class="line"><span class="keyword">if</span> (!compareResult) &#123;</span><br><span class="line">  <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&#x27;ç™»å½•å¤±è´¥ï¼&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TODOï¼šç™»å½•æˆåŠŸï¼Œç”Ÿæˆ Token å­—ç¬¦ä¸²</span></span><br></pre></td></tr></table></figure><h4 id="ç”Ÿæˆ-JWT-çš„-Token-å­—ç¬¦ä¸²">ç”Ÿæˆ JWT çš„ Token å­—ç¬¦ä¸²</h4><blockquote><p>æ ¸å¿ƒæ³¨æ„ç‚¹ï¼šåœ¨ç”Ÿæˆ Token å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œä¸€å®šè¦å‰”é™¤ <strong>å¯†ç </strong> å’Œ <strong>å¤´åƒ</strong> çš„å€¼</p></blockquote><ol><li>é€šè¿‡ ES6 çš„é«˜çº§è¯­æ³•ï¼Œå¿«é€Ÿå‰”é™¤ <code>å¯†ç </code> å’Œ <code>å¤´åƒ</code> çš„å€¼ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‰”é™¤å®Œæ¯•ä¹‹åï¼Œuser ä¸­åªä¿ç•™äº†ç”¨æˆ·çš„ id, username, nickname, email è¿™å››ä¸ªå±æ€§çš„å€¼</span></span><br><span class="line"><span class="keyword">const</span> user = &#123; ...results[<span class="number">0</span>], <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">user_pic</span>: <span class="string">&#x27;&#x27;</span> &#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>è¿è¡Œå¦‚ä¸‹çš„å‘½ä»¤ï¼Œå®‰è£…ç”Ÿæˆ Token å­—ç¬¦ä¸²çš„åŒ…ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i jsonwebtoken@8.5.1</span><br></pre></td></tr></table></figure><ol start="3"><li>åœ¨ <code>/router_handler/user.js</code> æ¨¡å—çš„å¤´éƒ¨åŒºåŸŸï¼Œå¯¼å…¥ <code>jsonwebtoken</code> åŒ…ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”¨è¿™ä¸ªåŒ…æ¥ç”Ÿæˆ Token å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">const</span> jwt = <span class="built_in">require</span>(<span class="string">&#x27;jsonwebtoken&#x27;</span>)</span><br></pre></td></tr></table></figure><ol start="4"><li>åˆ›å»º <code>config.js</code> æ–‡ä»¶ï¼Œå¹¶å‘å¤–å…±äº« <strong>åŠ å¯†</strong> å’Œ <strong>è¿˜åŸ</strong> Token çš„ <code>jwtSecretKey</code> å­—ç¬¦ä¸²ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">jwtSecretKey</span>: <span class="string">&#x27;Bruce&#x27;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="5"><li>å°†ç”¨æˆ·ä¿¡æ¯å¯¹è±¡åŠ å¯†æˆ Token å­—ç¬¦ä¸²ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">const</span> config = <span class="built_in">require</span>(<span class="string">&#x27;../config&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”Ÿæˆ Token å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">const</span> tokenStr = jwt.<span class="title function_">sign</span>(user, config.<span class="property">jwtSecretKey</span>, &#123;</span><br><span class="line">  <span class="attr">expiresIn</span>: <span class="string">&#x27;10h&#x27;</span>, <span class="comment">// token æœ‰æ•ˆæœŸä¸º 10 ä¸ªå°æ—¶</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="6"><li>å°†ç”Ÿæˆçš„ Token å­—ç¬¦ä¸²å“åº”ç»™å®¢æˆ·ç«¯ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">res.<span class="title function_">send</span>(&#123;</span><br><span class="line">  <span class="attr">status</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">message</span>: <span class="string">&#x27;ç™»å½•æˆåŠŸï¼&#x27;</span>,</span><br><span class="line">  <span class="comment">// ä¸ºäº†æ–¹ä¾¿å®¢æˆ·ç«¯ä½¿ç”¨ Tokenï¼Œåœ¨æœåŠ¡å™¨ç«¯ç›´æ¥æ‹¼æ¥ä¸Š Bearer çš„å‰ç¼€</span></span><br><span class="line">  <span class="attr">token</span>: <span class="string">&#x27;Bearer &#x27;</span> + tokenStr,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="é…ç½®è§£æ-Token-çš„ä¸­é—´ä»¶">é…ç½®è§£æ Token çš„ä¸­é—´ä»¶</h3><ol><li>è¿è¡Œå¦‚ä¸‹çš„å‘½ä»¤ï¼Œå®‰è£…è§£æ Token çš„ä¸­é—´ä»¶ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i express-jwt@<span class="number">5.3</span><span class="number">.3</span></span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ <code>app.js</code> ä¸­æ³¨å†Œè·¯ç”±ä¹‹å‰ï¼Œé…ç½®è§£æ Token çš„ä¸­é—´ä»¶ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">const</span> config = <span class="built_in">require</span>(<span class="string">&#x27;./config&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§£æ token çš„ä¸­é—´ä»¶</span></span><br><span class="line"><span class="keyword">const</span> expressJWT = <span class="built_in">require</span>(<span class="string">&#x27;express-jwt&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ .unless(&#123; path: [/^\/api\//] &#125;) æŒ‡å®šå“ªäº›æ¥å£ä¸éœ€è¦è¿›è¡Œ Token çš„èº«ä»½è®¤è¯</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">expressJWT</span>(&#123; <span class="attr">secret</span>: config.<span class="property">jwtSecretKey</span> &#125;).<span class="title function_">unless</span>(&#123; <span class="attr">path</span>: [<span class="regexp">/^\/api\//</span>] &#125;))</span><br></pre></td></tr></table></figure><ol start="3"><li>åœ¨ <code>app.js</code> ä¸­çš„ <code>é”™è¯¯çº§åˆ«ä¸­é—´ä»¶</code> é‡Œé¢ï¼Œæ•è·å¹¶å¤„ç† Token è®¤è¯å¤±è´¥åçš„é”™è¯¯ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é”™è¯¯ä¸­é—´ä»¶</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">err, req, res, next</span>) &#123;</span><br><span class="line">  <span class="comment">// çœç•¥å…¶å®ƒä»£ç ...</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ•è·èº«ä»½è®¤è¯å¤±è´¥çš„é”™è¯¯</span></span><br><span class="line">  <span class="keyword">if</span> (err.<span class="property">name</span> === <span class="string">&#x27;UnauthorizedError&#x27;</span>) <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&#x27;èº«ä»½è®¤è¯å¤±è´¥ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æœªçŸ¥é”™è¯¯...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="ä¸ªäººä¸­å¿ƒ">ä¸ªäººä¸­å¿ƒ</h2><h3 id="è·å–ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯">è·å–ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯</h3><h4 id="å®ç°æ­¥éª¤-v3">å®ç°æ­¥éª¤</h4><ol><li>åˆå§‹åŒ– <strong>è·¯ç”±</strong> æ¨¡å—</li><li>åˆå§‹åŒ– <strong>è·¯ç”±å¤„ç†å‡½æ•°</strong> æ¨¡å—</li><li>è·å–ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯</li></ol><h4 id="åˆå§‹åŒ–è·¯ç”±æ¨¡å—">åˆå§‹åŒ–è·¯ç”±æ¨¡å—</h4><ol><li>åˆ›å»º <code>/router/userinfo.js</code> è·¯ç”±æ¨¡å—ï¼Œå¹¶åˆå§‹åŒ–å¦‚ä¸‹çš„ä»£ç ç»“æ„ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥ express</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="comment">// åˆ›å»ºè·¯ç”±å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/userinfo&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;ok&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘å¤–å…±äº«è·¯ç”±å¯¹è±¡</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ <code>app.js</code> ä¸­å¯¼å…¥å¹¶ä½¿ç”¨ä¸ªäººä¸­å¿ƒçš„è·¯ç”±æ¨¡å—ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥å¹¶ä½¿ç”¨ç”¨æˆ·ä¿¡æ¯è·¯ç”±æ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> userinfoRouter = <span class="built_in">require</span>(<span class="string">&#x27;./router/userinfo&#x27;</span>)</span><br><span class="line"><span class="comment">// æ³¨æ„ï¼šä»¥ /my å¼€å¤´çš„æ¥å£ï¼Œéƒ½æ˜¯æœ‰æƒé™çš„æ¥å£ï¼Œéœ€è¦è¿›è¡Œ Token èº«ä»½è®¤è¯</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/my&#x27;</span>, userinfoRouter)</span><br></pre></td></tr></table></figure><h4 id="åˆå§‹åŒ–è·¯ç”±å¤„ç†å‡½æ•°æ¨¡å—">åˆå§‹åŒ–è·¯ç”±å¤„ç†å‡½æ•°æ¨¡å—</h4><ol><li>åˆ›å»º <code>/router_handler/userinfo.js</code> è·¯ç”±å¤„ç†å‡½æ•°æ¨¡å—ï¼Œå¹¶åˆå§‹åŒ–å¦‚ä¸‹çš„ä»£ç ç»“æ„ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯çš„å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">getUserInfo</span> = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;ok&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>ä¿®æ”¹ <code>/router/userinfo.js</code> ä¸­çš„ä»£ç å¦‚ä¸‹ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥ç”¨æˆ·ä¿¡æ¯çš„å¤„ç†å‡½æ•°æ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> userinfo_handler = <span class="built_in">require</span>(<span class="string">&#x27;../router_handler/userinfo&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/userinfo&#x27;</span>, userinfo_handler.<span class="property">getUserInfo</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router</span><br></pre></td></tr></table></figure><h4 id="è·å–ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯-v2">è·å–ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯</h4><ol><li>åœ¨ <code>/router_handler/userinfo.js</code> å¤´éƒ¨å¯¼å…¥æ•°æ®åº“æ“ä½œæ¨¡å—ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥æ•°æ®åº“æ“ä½œæ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> db = <span class="built_in">require</span>(<span class="string">&#x27;../db/index&#x27;</span>)</span><br></pre></td></tr></table></figure><ol start="2"><li>å®šä¹‰ SQL è¯­å¥ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®ç”¨æˆ·çš„ idï¼ŒæŸ¥è¯¢ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line"><span class="comment">// æ³¨æ„ï¼šä¸ºäº†é˜²æ­¢ç”¨æˆ·çš„å¯†ç æ³„éœ²ï¼Œéœ€è¦æ’é™¤ password å­—æ®µ</span></span><br><span class="line"><span class="keyword">const</span> sql = <span class="string">`select id, username, nickname, email, user_pic from ev_users where id=?`</span></span><br></pre></td></tr></table></figure><ol start="3"><li>è°ƒç”¨ <code>db.query()</code> æ‰§è¡Œ SQL è¯­å¥ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨æ„ï¼šreq å¯¹è±¡ä¸Šçš„ user å±æ€§ï¼Œæ˜¯ Token è§£ææˆåŠŸï¼Œexpress-jwt ä¸­é—´ä»¶å¸®æˆ‘ä»¬æŒ‚è½½ä¸Šå»çš„</span></span><br><span class="line">db.<span class="title function_">query</span>(sql, req.<span class="property">user</span>.<span class="property">id</span>, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 1. æ‰§è¡Œ SQL è¯­å¥å¤±è´¥</span></span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> res.<span class="title function_">cc</span>(err)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. æ‰§è¡Œ SQL è¯­å¥æˆåŠŸï¼Œä½†æ˜¯æŸ¥è¯¢åˆ°çš„æ•°æ®æ¡æ•°ä¸ç­‰äº 1</span></span><br><span class="line">  <span class="keyword">if</span> (results.<span class="property">length</span> !== <span class="number">1</span>) <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&#x27;è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3. å°†ç”¨æˆ·ä¿¡æ¯å“åº”ç»™å®¢æˆ·ç«¯</span></span><br><span class="line">  res.<span class="title function_">send</span>(&#123;</span><br><span class="line">    <span class="attr">status</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯æˆåŠŸï¼&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: results[<span class="number">0</span>],</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="æ›´æ–°ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯">æ›´æ–°ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯</h3><h4 id="å®ç°æ­¥éª¤-v4">å®ç°æ­¥éª¤</h4><ol><li>å®šä¹‰è·¯ç”±å’Œå¤„ç†å‡½æ•°</li><li>éªŒè¯è¡¨å•æ•°æ®</li><li>å®ç°æ›´æ–°ç”¨æˆ·åŸºæœ¬ä¿¡æ¯çš„åŠŸèƒ½</li></ol><h4 id="å®šä¹‰è·¯ç”±å’Œå¤„ç†å‡½æ•°">å®šä¹‰è·¯ç”±å’Œå¤„ç†å‡½æ•°</h4><ol><li>åœ¨ <code>/router/userinfo.js</code> æ¨¡å—ä¸­ï¼Œæ–°å¢ <code>æ›´æ–°ç”¨æˆ·åŸºæœ¬ä¿¡æ¯</code> çš„è·¯ç”±ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ›´æ–°ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/userinfo&#x27;</span>, userinfo_handler.<span class="property">updateUserInfo</span>)</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ <code>/router_handler/userinfo.js</code> æ¨¡å—ä¸­ï¼Œå®šä¹‰å¹¶å‘å¤–å…±äº« <code>æ›´æ–°ç”¨æˆ·åŸºæœ¬ä¿¡æ¯</code> çš„è·¯ç”±å¤„ç†å‡½æ•°ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ›´æ–°ç”¨æˆ·åŸºæœ¬ä¿¡æ¯çš„å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">updateUserInfo</span> = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;ok&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="éªŒè¯è¡¨å•æ•°æ®">éªŒè¯è¡¨å•æ•°æ®</h4><ol><li>åœ¨ <code>/schema/user.js</code> éªŒè¯è§„åˆ™æ¨¡å—ä¸­ï¼Œå®šä¹‰ <code>id</code>ï¼Œ<code>nickname</code>ï¼Œ<code>email</code> çš„éªŒè¯è§„åˆ™å¦‚ä¸‹ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ id, nickname, emial çš„éªŒè¯è§„åˆ™</span></span><br><span class="line"><span class="keyword">const</span> id = joi.<span class="title function_">number</span>().<span class="title function_">integer</span>().<span class="title function_">min</span>(<span class="number">1</span>).required()</span><br><span class="line"><span class="keyword">const</span> nickname = joi.<span class="title function_">string</span>().required()</span><br><span class="line"><span class="keyword">const</span> email = joi.<span class="title function_">string</span>().<span class="title function_">email</span>().required()</span><br></pre></td></tr></table></figure><ol start="2"><li>å¹¶ä½¿ç”¨ <code>exports</code> å‘å¤–å…±äº«å¦‚ä¸‹çš„ <code>éªŒè¯è§„åˆ™å¯¹è±¡</code>ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éªŒè¯è§„åˆ™å¯¹è±¡ - æ›´æ–°ç”¨æˆ·åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">update_userinfo_schema</span> = &#123;</span><br><span class="line">  <span class="attr">body</span>: &#123;</span><br><span class="line">    id,</span><br><span class="line">    nickname,</span><br><span class="line">    email,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>åœ¨ <code>/router/userinfo.js</code> æ¨¡å—ä¸­ï¼Œå¯¼å…¥éªŒè¯æ•°æ®åˆæ³•æ€§çš„ä¸­é—´ä»¶ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥éªŒè¯æ•°æ®åˆæ³•æ€§çš„ä¸­é—´ä»¶</span></span><br><span class="line"><span class="keyword">const</span> expressJoi = <span class="built_in">require</span>(<span class="string">&#x27;@escook/express-joi&#x27;</span>)</span><br></pre></td></tr></table></figure><ol start="4"><li>åœ¨ <code>/router/userinfo.js</code> æ¨¡å—ä¸­ï¼Œå¯¼å…¥éœ€è¦çš„éªŒè¯è§„åˆ™å¯¹è±¡ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥éœ€è¦çš„éªŒè¯è§„åˆ™å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> &#123; update_userinfo_schema &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../schema/user&#x27;</span>)</span><br></pre></td></tr></table></figure><ol start="5"><li>åœ¨ <code>/router/userinfo.js</code> æ¨¡å—ä¸­ï¼Œä¿®æ”¹ <code>æ›´æ–°ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯</code> çš„è·¯ç”±å¦‚ä¸‹ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ›´æ–°ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/userinfo&#x27;</span>, <span class="title function_">expressJoi</span>(update_userinfo_schema), userinfo_handler.<span class="property">updateUserInfo</span>)</span><br></pre></td></tr></table></figure><h4 id="å®ç°æ›´æ–°ç”¨æˆ·åŸºæœ¬ä¿¡æ¯çš„åŠŸèƒ½">å®ç°æ›´æ–°ç”¨æˆ·åŸºæœ¬ä¿¡æ¯çš„åŠŸèƒ½</h4><ol><li>å®šä¹‰å¾…æ‰§è¡Œçš„ SQL è¯­å¥ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sql = <span class="string">`update ev_users set ? where id=?`</span></span><br></pre></td></tr></table></figure><ol start="2"><li>è°ƒç”¨ <code>db.query()</code> æ‰§è¡Œ SQL è¯­å¥å¹¶ä¼ å‚ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">db.<span class="title function_">query</span>(sql, [req.<span class="property">body</span>, req.<span class="property">body</span>.<span class="property">id</span>], <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ‰§è¡Œ SQL è¯­å¥å¤±è´¥</span></span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> res.<span class="title function_">cc</span>(err)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ‰§è¡Œ SQL è¯­å¥æˆåŠŸï¼Œä½†å½±å“è¡Œæ•°ä¸ä¸º 1</span></span><br><span class="line">  <span class="keyword">if</span> (results.<span class="property">affectedRows</span> !== <span class="number">1</span>) <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&#x27;ä¿®æ”¹ç”¨æˆ·åŸºæœ¬ä¿¡æ¯å¤±è´¥ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯æˆåŠŸ</span></span><br><span class="line">  <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&#x27;ä¿®æ”¹ç”¨æˆ·åŸºæœ¬ä¿¡æ¯æˆåŠŸï¼&#x27;</span>, <span class="number">0</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="é‡ç½®å¯†ç ">é‡ç½®å¯†ç </h3><h4 id="å®ç°æ­¥éª¤-v5">å®ç°æ­¥éª¤</h4><ol><li>å®šä¹‰è·¯ç”±å’Œå¤„ç†å‡½æ•°</li><li>éªŒè¯è¡¨å•æ•°æ®</li><li>å®ç°é‡ç½®å¯†ç çš„åŠŸèƒ½</li></ol><h4 id="å®šä¹‰è·¯ç”±å’Œå¤„ç†å‡½æ•°-v2">å®šä¹‰è·¯ç”±å’Œå¤„ç†å‡½æ•°</h4><ol><li>åœ¨ <code>/router/userinfo.js</code> æ¨¡å—ä¸­ï¼Œæ–°å¢ <code>é‡ç½®å¯†ç </code> çš„è·¯ç”±ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é‡ç½®å¯†ç çš„è·¯ç”±</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/updatepwd&#x27;</span>, userinfo_handler.<span class="property">updatePassword</span>)</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ <code>/router_handler/userinfo.js</code> æ¨¡å—ä¸­ï¼Œå®šä¹‰å¹¶å‘å¤–å…±äº« <code>é‡ç½®å¯†ç </code> çš„è·¯ç”±å¤„ç†å‡½æ•°ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é‡ç½®å¯†ç çš„å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">updatePassword</span> = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;ok&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="éªŒè¯è¡¨å•æ•°æ®-v2">éªŒè¯è¡¨å•æ•°æ®</h4><blockquote><p>æ ¸å¿ƒéªŒè¯æ€è·¯ï¼šæ—§å¯†ç ä¸æ–°å¯†ç ï¼Œå¿…é¡»ç¬¦åˆå¯†ç çš„éªŒè¯è§„åˆ™ï¼Œå¹¶ä¸”æ–°å¯†ç ä¸èƒ½ä¸æ—§å¯†ç ä¸€è‡´ï¼</p></blockquote><ol><li>åœ¨ <code>/schema/user.js</code> æ¨¡å—ä¸­ï¼Œä½¿ç”¨ <code>exports</code> å‘å¤–å…±äº«å¦‚ä¸‹çš„ <code>éªŒè¯è§„åˆ™å¯¹è±¡</code>ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éªŒè¯è§„åˆ™å¯¹è±¡ - é‡ç½®å¯†ç </span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">update_password_schema</span> = &#123;</span><br><span class="line">  <span class="attr">body</span>: &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨ password è¿™ä¸ªè§„åˆ™ï¼ŒéªŒè¯ req.body.oldPwd çš„å€¼</span></span><br><span class="line">    <span class="attr">oldPwd</span>: password,</span><br><span class="line">    <span class="comment">// ä½¿ç”¨ joi.not(joi.ref(&#x27;oldPwd&#x27;)).concat(password) è§„åˆ™ï¼ŒéªŒè¯ req.body.newPwd çš„å€¼</span></span><br><span class="line">    <span class="comment">// è§£è¯»ï¼š</span></span><br><span class="line">    <span class="comment">// 1. joi.ref(&#x27;oldPwd&#x27;) è¡¨ç¤º newPwd çš„å€¼å¿…é¡»å’Œ oldPwd çš„å€¼ä¿æŒä¸€è‡´</span></span><br><span class="line">    <span class="comment">// 2. joi.not(joi.ref(&#x27;oldPwd&#x27;)) è¡¨ç¤º newPwd çš„å€¼ä¸èƒ½ç­‰äº oldPwd çš„å€¼</span></span><br><span class="line">    <span class="comment">// 3. .concat() ç”¨äºåˆå¹¶ joi.not(joi.ref(&#x27;oldPwd&#x27;)) å’Œ password è¿™ä¸¤æ¡éªŒè¯è§„åˆ™</span></span><br><span class="line">    <span class="attr">newPwd</span>: joi.<span class="title function_">not</span>(joi.<span class="title function_">ref</span>(<span class="string">&#x27;oldPwd&#x27;</span>)).<span class="title function_">concat</span>(password),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ <code>/router/userinfo.js</code> æ¨¡å—ä¸­ï¼Œå¯¼å…¥éœ€è¦çš„éªŒè¯è§„åˆ™å¯¹è±¡ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥éœ€è¦çš„éªŒè¯è§„åˆ™å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> &#123; update_userinfo_schema, update_password_schema &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../schema/user&#x27;</span>)</span><br></pre></td></tr></table></figure><ol start="3"><li>å¹¶åœ¨ <code>é‡ç½®å¯†ç çš„è·¯ç”±</code> ä¸­ï¼Œä½¿ç”¨ <code>update_password_schema</code> è§„åˆ™éªŒè¯è¡¨å•çš„æ•°æ®ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/updatepwd&#x27;</span>, <span class="title function_">expressJoi</span>(update_password_schema), userinfo_handler.<span class="property">updatePassword</span>)</span><br></pre></td></tr></table></figure><h4 id="å®ç°é‡ç½®å¯†ç çš„åŠŸèƒ½">å®ç°é‡ç½®å¯†ç çš„åŠŸèƒ½</h4><ol><li>æ ¹æ® <code>id</code> æŸ¥è¯¢ç”¨æˆ·æ˜¯å¦å­˜åœ¨ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰æ ¹æ® id æŸ¥è¯¢ç”¨æˆ·æ•°æ®çš„ SQL è¯­å¥</span></span><br><span class="line"><span class="keyword">const</span> sql = <span class="string">`select * from ev_users where id=?`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œ SQL è¯­å¥æŸ¥è¯¢ç”¨æˆ·æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">db.<span class="title function_">query</span>(sql, req.<span class="property">user</span>.<span class="property">id</span>, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ‰§è¡Œ SQL è¯­å¥å¤±è´¥</span></span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> res.<span class="title function_">cc</span>(err)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ£€æŸ¥æŒ‡å®š id çš„ç”¨æˆ·æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">  <span class="keyword">if</span> (results.<span class="property">length</span> !== <span class="number">1</span>) <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&#x27;ç”¨æˆ·ä¸å­˜åœ¨ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// TODOï¼šåˆ¤æ–­æäº¤çš„æ—§å¯†ç æ˜¯å¦æ­£ç¡®</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="2"><li>åˆ¤æ–­æäº¤çš„ <strong>æ—§å¯†ç </strong> æ˜¯å¦æ­£ç¡®ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨å¤´éƒ¨åŒºåŸŸå¯¼å…¥ bcryptjs åï¼Œ</span></span><br><span class="line"><span class="comment">// å³å¯ä½¿ç”¨ bcrypt.compareSync(æäº¤çš„å¯†ç ï¼Œæ•°æ®åº“ä¸­çš„å¯†ç ) æ–¹æ³•éªŒè¯å¯†ç æ˜¯å¦æ­£ç¡®</span></span><br><span class="line"><span class="comment">// compareSync() å‡½æ•°çš„è¿”å›å€¼ä¸ºå¸ƒå°”å€¼ï¼Œtrue è¡¨ç¤ºå¯†ç æ­£ç¡®ï¼Œfalse è¡¨ç¤ºå¯†ç é”™è¯¯</span></span><br><span class="line"><span class="keyword">const</span> bcrypt = <span class="built_in">require</span>(<span class="string">&#x27;bcryptjs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­æäº¤çš„æ—§å¯†ç æ˜¯å¦æ­£ç¡®</span></span><br><span class="line"><span class="keyword">const</span> compareResult = bcrypt.<span class="title function_">compareSync</span>(req.<span class="property">body</span>.<span class="property">oldPwd</span>, results[<span class="number">0</span>].<span class="property">password</span>)</span><br><span class="line"><span class="keyword">if</span> (!compareResult) <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&#x27;åŸå¯†ç é”™è¯¯ï¼&#x27;</span>)</span><br></pre></td></tr></table></figure><ol start="3"><li>å¯¹æ–°å¯†ç è¿›è¡Œ <code>bcrypt</code> åŠ å¯†ä¹‹åï¼Œæ›´æ–°åˆ°æ•°æ®åº“ä¸­ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰æ›´æ–°ç”¨æˆ·å¯†ç çš„ SQL è¯­å¥</span></span><br><span class="line"><span class="keyword">const</span> sql = <span class="string">`update ev_users set password=? where id=?`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹æ–°å¯†ç è¿›è¡Œ bcrypt åŠ å¯†å¤„ç†</span></span><br><span class="line"><span class="keyword">const</span> newPwd = bcrypt.<span class="title function_">hashSync</span>(req.<span class="property">body</span>.<span class="property">newPwd</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œ SQL è¯­å¥ï¼Œæ ¹æ® id æ›´æ–°ç”¨æˆ·çš„å¯†ç </span></span><br><span class="line">db.<span class="title function_">query</span>(sql, [newPwd, req.<span class="property">user</span>.<span class="property">id</span>], <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// SQL è¯­å¥æ‰§è¡Œå¤±è´¥</span></span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> res.<span class="title function_">cc</span>(err)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// SQL è¯­å¥æ‰§è¡ŒæˆåŠŸï¼Œä½†æ˜¯å½±å“è¡Œæ•°ä¸ç­‰äº 1</span></span><br><span class="line">  <span class="keyword">if</span> (results.<span class="property">affectedRows</span> !== <span class="number">1</span>) <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&#x27;æ›´æ–°å¯†ç å¤±è´¥ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ›´æ–°å¯†ç æˆåŠŸ</span></span><br><span class="line">  res.<span class="title function_">cc</span>(<span class="string">&#x27;æ›´æ–°å¯†ç æˆåŠŸï¼&#x27;</span>, <span class="number">0</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="æ›´æ–°ç”¨æˆ·å¤´åƒ">æ›´æ–°ç”¨æˆ·å¤´åƒ</h3><h4 id="å®ç°æ­¥éª¤-v6">å®ç°æ­¥éª¤</h4><ol><li>å®šä¹‰è·¯ç”±å’Œå¤„ç†å‡½æ•°</li><li>éªŒè¯è¡¨å•æ•°æ®</li><li>å®ç°æ›´æ–°ç”¨æˆ·å¤´åƒçš„åŠŸèƒ½</li></ol><h4 id="å®šä¹‰è·¯ç”±å’Œå¤„ç†å‡½æ•°-v3">å®šä¹‰è·¯ç”±å’Œå¤„ç†å‡½æ•°</h4><ol><li>åœ¨ <code>/router/userinfo.js</code> æ¨¡å—ä¸­ï¼Œæ–°å¢ <code>æ›´æ–°ç”¨æˆ·å¤´åƒ</code> çš„è·¯ç”±ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ›´æ–°ç”¨æˆ·å¤´åƒçš„è·¯ç”±</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/update/avatar&#x27;</span>, userinfo_handler.<span class="property">updateAvatar</span>)</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ <code>/router_handler/userinfo.js</code> æ¨¡å—ä¸­ï¼Œå®šä¹‰å¹¶å‘å¤–å…±äº« <code>æ›´æ–°ç”¨æˆ·å¤´åƒ</code> çš„è·¯ç”±å¤„ç†å‡½æ•°ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ›´æ–°ç”¨æˆ·å¤´åƒçš„å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">updateAvatar</span> = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;ok&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="éªŒè¯è¡¨å•æ•°æ®-v3">éªŒè¯è¡¨å•æ•°æ®</h4><ol><li>åœ¨ <code>/schema/user.js</code> éªŒè¯è§„åˆ™æ¨¡å—ä¸­ï¼Œå®šä¹‰ <code>avatar</code> çš„éªŒè¯è§„åˆ™å¦‚ä¸‹ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// dataUri() æŒ‡çš„æ˜¯å¦‚ä¸‹æ ¼å¼çš„å­—ç¬¦ä¸²æ•°æ®ï¼š</span></span><br><span class="line"><span class="comment">// data:image/png;base64,VE9PTUFOWVNFQ1JFVFM=</span></span><br><span class="line"><span class="keyword">const</span> avatar = joi.<span class="title function_">string</span>().<span class="title function_">dataUri</span>().required()</span><br></pre></td></tr></table></figure><ol start="2"><li>å¹¶ä½¿ç”¨ <code>exports</code> å‘å¤–å…±äº«å¦‚ä¸‹çš„ <code>éªŒè¯è§„åˆ™å¯¹è±¡</code>ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éªŒè¯è§„åˆ™å¯¹è±¡ - æ›´æ–°å¤´åƒ</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">update_avatar_schema</span> = &#123;</span><br><span class="line">  <span class="attr">body</span>: &#123;</span><br><span class="line">    avatar,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>åœ¨ <code>/router/userinfo.js</code> æ¨¡å—ä¸­ï¼Œå¯¼å…¥éœ€è¦çš„éªŒè¯è§„åˆ™å¯¹è±¡ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; update_avatar_schema &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../schema/user&#x27;</span>)</span><br></pre></td></tr></table></figure><ol start="4"><li>åœ¨ <code>/router/userinfo.js</code> æ¨¡å—ä¸­ï¼Œä¿®æ”¹ <code>æ›´æ–°ç”¨æˆ·å¤´åƒ</code> çš„è·¯ç”±å¦‚ä¸‹ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/update/avatar&#x27;</span>, <span class="title function_">expressJoi</span>(update_avatar_schema), userinfo_handler.<span class="property">updateAvatar</span>)</span><br></pre></td></tr></table></figure><h4 id="å®ç°æ›´æ–°ç”¨æˆ·å¤´åƒçš„åŠŸèƒ½">å®ç°æ›´æ–°ç”¨æˆ·å¤´åƒçš„åŠŸèƒ½</h4><ol><li>å®šä¹‰æ›´æ–°ç”¨æˆ·å¤´åƒçš„ SQL è¯­å¥ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sql = <span class="string">&#x27;update ev_users set user_pic=? where id=?&#x27;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>è°ƒç”¨ <code>db.query()</code> æ‰§è¡Œ SQL è¯­å¥ï¼Œæ›´æ–°å¯¹åº”ç”¨æˆ·çš„å¤´åƒï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">db.<span class="title function_">query</span>(sql, [req.<span class="property">body</span>.<span class="property">avatar</span>, req.<span class="property">user</span>.<span class="property">id</span>], <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ‰§è¡Œ SQL è¯­å¥å¤±è´¥</span></span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> res.<span class="title function_">cc</span>(err)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ‰§è¡Œ SQL è¯­å¥æˆåŠŸï¼Œä½†æ˜¯å½±å“è¡Œæ•°ä¸ç­‰äº 1</span></span><br><span class="line">  <span class="keyword">if</span> (results.<span class="property">affectedRows</span> !== <span class="number">1</span>) <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&#x27;æ›´æ–°å¤´åƒå¤±è´¥ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ›´æ–°ç”¨æˆ·å¤´åƒæˆåŠŸ</span></span><br><span class="line">  <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&#x27;æ›´æ–°å¤´åƒæˆåŠŸï¼&#x27;</span>, <span class="number">0</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="æ–‡ç« åˆ†ç±»ç®¡ç†">æ–‡ç« åˆ†ç±»ç®¡ç†</h2><h3 id="æ–°å»º-ev-article-cate-è¡¨">æ–°å»º ev_article_cate è¡¨</h3><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/ev_article_cate.f52fe7ce.png" alt="æ–‡ç« åˆ†ç±»è¡¨ç»“æ„"></p><h3 id="è·å–æ–‡ç« åˆ†ç±»åˆ—è¡¨">è·å–æ–‡ç« åˆ†ç±»åˆ—è¡¨</h3><h4 id="å®ç°æ­¥éª¤-v7">å®ç°æ­¥éª¤</h4><ol><li>åˆå§‹åŒ–è·¯ç”±æ¨¡å—</li><li>åˆå§‹åŒ–è·¯ç”±å¤„ç†å‡½æ•°æ¨¡å—</li><li>è·å–æ–‡ç« åˆ†ç±»åˆ—è¡¨æ•°æ®</li></ol><h4 id="åˆå§‹åŒ–è·¯ç”±æ¨¡å—-v2">åˆå§‹åŒ–è·¯ç”±æ¨¡å—</h4><ol><li>åˆ›å»º <code>/router/artcate.js</code> è·¯ç”±æ¨¡å—ï¼Œå¹¶åˆå§‹åŒ–å¦‚ä¸‹çš„ä»£ç ç»“æ„ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥ express</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="comment">// åˆ›å»ºè·¯ç”±å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ–‡ç« åˆ†ç±»çš„åˆ—è¡¨æ•°æ®</span></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/cates&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;ok&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘å¤–å…±äº«è·¯ç”±å¯¹è±¡</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ <code>app.js</code> ä¸­å¯¼å…¥å¹¶ä½¿ç”¨æ–‡ç« åˆ†ç±»çš„è·¯ç”±æ¨¡å—ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥å¹¶ä½¿ç”¨æ–‡ç« åˆ†ç±»è·¯ç”±æ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> artCateRouter = <span class="built_in">require</span>(<span class="string">&#x27;./router/artcate&#x27;</span>)</span><br><span class="line"><span class="comment">// ä¸ºæ–‡ç« åˆ†ç±»çš„è·¯ç”±æŒ‚è½½ç»Ÿä¸€çš„è®¿é—®å‰ç¼€ /my/article</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/my/article&#x27;</span>, artCateRouter)</span><br></pre></td></tr></table></figure><h4 id="åˆå§‹åŒ–è·¯ç”±å¤„ç†å‡½æ•°æ¨¡å—-v2">åˆå§‹åŒ–è·¯ç”±å¤„ç†å‡½æ•°æ¨¡å—</h4><ol><li>åˆ›å»º <code>/router_handler/artcate.js</code> è·¯ç”±å¤„ç†å‡½æ•°æ¨¡å—ï¼Œå¹¶åˆå§‹åŒ–å¦‚ä¸‹çš„ä»£ç ç»“æ„ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–æ–‡ç« åˆ†ç±»åˆ—è¡¨æ•°æ®çš„å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">getArticleCates</span> = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;ok&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>ä¿®æ”¹ <code>/router/artcate.js</code> ä¸­çš„ä»£ç å¦‚ä¸‹ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥æ–‡ç« åˆ†ç±»çš„è·¯ç”±å¤„ç†å‡½æ•°æ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> artcate_handler = <span class="built_in">require</span>(<span class="string">&#x27;../router_handler/artcate&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ–‡ç« åˆ†ç±»çš„åˆ—è¡¨æ•°æ®</span></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/cates&#x27;</span>, artcate_handler.<span class="property">getArticleCates</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router</span><br></pre></td></tr></table></figure><h4 id="è·å–æ–‡ç« åˆ†ç±»åˆ—è¡¨æ•°æ®">è·å–æ–‡ç« åˆ†ç±»åˆ—è¡¨æ•°æ®</h4><ol><li>åœ¨ <code>/router_handler/artcate.js</code> å¤´éƒ¨å¯¼å…¥æ•°æ®åº“æ“ä½œæ¨¡å—ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥æ•°æ®åº“æ“ä½œæ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> db = <span class="built_in">require</span>(<span class="string">&#x27;../db/index&#x27;</span>)</span><br></pre></td></tr></table></figure><ol start="2"><li>å®šä¹‰ SQL è¯­å¥ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®åˆ†ç±»çš„çŠ¶æ€ï¼Œè·å–æ‰€æœ‰æœªè¢«åˆ é™¤çš„åˆ†ç±»åˆ—è¡¨æ•°æ®</span></span><br><span class="line"><span class="comment">// is_delete ä¸º 0 è¡¨ç¤ºæ²¡æœ‰è¢« æ ‡è®°ä¸ºåˆ é™¤ çš„æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> sql = <span class="string">&#x27;select * from ev_article_cate where is_delete=0 order by id asc&#x27;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>è°ƒç”¨ <code>db.query()</code> æ‰§è¡Œ SQL è¯­å¥ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">db.<span class="title function_">query</span>(sql, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 1. æ‰§è¡Œ SQL è¯­å¥å¤±è´¥</span></span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> res.<span class="title function_">cc</span>(err)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. æ‰§è¡Œ SQL è¯­å¥æˆåŠŸ</span></span><br><span class="line">  res.<span class="title function_">send</span>(&#123;</span><br><span class="line">    <span class="attr">status</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;è·å–æ–‡ç« åˆ†ç±»åˆ—è¡¨æˆåŠŸï¼&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: results,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="æ–°å¢æ–‡ç« åˆ†ç±»">æ–°å¢æ–‡ç« åˆ†ç±»</h3><h4 id="å®ç°æ­¥éª¤-v8">å®ç°æ­¥éª¤</h4><ol><li>å®šä¹‰è·¯ç”±å’Œå¤„ç†å‡½æ•°</li><li>éªŒè¯è¡¨å•æ•°æ®</li><li>æŸ¥è¯¢ <code>åˆ†ç±»åç§°</code> ä¸ <code>åˆ†ç±»åˆ«å</code> æ˜¯å¦è¢«å ç”¨</li><li>å®ç°æ–°å¢æ–‡ç« åˆ†ç±»çš„åŠŸèƒ½</li></ol><h4 id="å®šä¹‰è·¯ç”±å’Œå¤„ç†å‡½æ•°-v4">å®šä¹‰è·¯ç”±å’Œå¤„ç†å‡½æ•°</h4><ol><li>åœ¨ <code>/router/artcate.js</code> æ¨¡å—ä¸­ï¼Œæ·»åŠ  <code>æ–°å¢æ–‡ç« åˆ†ç±»</code> çš„è·¯ç”±ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–°å¢æ–‡ç« åˆ†ç±»çš„è·¯ç”±</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/addcates&#x27;</span>, artcate_handler.<span class="property">addArticleCates</span>)</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ <code>/router_handler/artcate.js</code> æ¨¡å—ä¸­ï¼Œå®šä¹‰å¹¶å‘å¤–å…±äº« <code>æ–°å¢æ–‡ç« åˆ†ç±»</code> çš„è·¯ç”±å¤„ç†å‡½æ•°ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–°å¢æ–‡ç« åˆ†ç±»çš„å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">addArticleCates</span> = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;ok&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="éªŒè¯è¡¨å•æ•°æ®-v4">éªŒè¯è¡¨å•æ•°æ®</h4><ol><li>åˆ›å»º <code>/schema/artcate.js</code> æ–‡ç« åˆ†ç±»æ•°æ®éªŒè¯æ¨¡å—ï¼Œå¹¶å®šä¹‰å¦‚ä¸‹çš„éªŒè¯è§„åˆ™ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥å®šä¹‰éªŒè¯è§„åˆ™çš„æ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> joi = <span class="built_in">require</span>(<span class="string">&#x27;joi&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ åˆ†ç±»åç§° å’Œ åˆ†ç±»åˆ«å çš„æ ¡éªŒè§„åˆ™</span></span><br><span class="line"><span class="keyword">const</span> name = joi.<span class="title function_">string</span>().required()</span><br><span class="line"><span class="keyword">const</span> alias = joi.<span class="title function_">string</span>().<span class="title function_">alphanum</span>().required()</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ ¡éªŒè§„åˆ™å¯¹è±¡ - æ·»åŠ åˆ†ç±»</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">add_cate_schema</span> = &#123;</span><br><span class="line">  <span class="attr">body</span>: &#123;</span><br><span class="line">    name,</span><br><span class="line">    alias,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ <code>/router/artcate.js</code> æ¨¡å—ä¸­ï¼Œä½¿ç”¨ <code>add_cate_schema</code> å¯¹æ•°æ®è¿›è¡ŒéªŒè¯ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥éªŒè¯æ•°æ®çš„ä¸­é—´ä»¶</span></span><br><span class="line"><span class="keyword">const</span> expressJoi = <span class="built_in">require</span>(<span class="string">&#x27;@escook/express-joi&#x27;</span>)</span><br><span class="line"><span class="comment">// å¯¼å…¥æ–‡ç« åˆ†ç±»çš„éªŒè¯æ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> &#123; add_cate_schema &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../schema/artcate&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–°å¢æ–‡ç« åˆ†ç±»çš„è·¯ç”±</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/addcates&#x27;</span>, <span class="title function_">expressJoi</span>(add_cate_schema), artcate_handler.<span class="property">addArticleCates</span>)</span><br></pre></td></tr></table></figure><h4 id="æŸ¥è¯¢åˆ†ç±»åç§°ä¸åˆ«åæ˜¯å¦è¢«å ç”¨">æŸ¥è¯¢åˆ†ç±»åç§°ä¸åˆ«åæ˜¯å¦è¢«å ç”¨</h4><ol><li>å®šä¹‰æŸ¥é‡çš„ SQL è¯­å¥ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰æŸ¥è¯¢ åˆ†ç±»åç§° ä¸ åˆ†ç±»åˆ«å æ˜¯å¦è¢«å ç”¨çš„ SQL è¯­å¥</span></span><br><span class="line"><span class="keyword">const</span> sql = <span class="string">`select * from ev_article_cate where name=? or alias=?`</span></span><br></pre></td></tr></table></figure><ol start="2"><li>è°ƒç”¨ <code>db.query()</code> æ‰§è¡ŒæŸ¥é‡çš„æ“ä½œï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‰§è¡ŒæŸ¥é‡æ“ä½œ</span></span><br><span class="line">db.<span class="title function_">query</span>(sql, [req.<span class="property">body</span>.<span class="property">name</span>, req.<span class="property">body</span>.<span class="property">alias</span>], <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ‰§è¡Œ SQL è¯­å¥å¤±è´¥</span></span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> res.<span class="title function_">cc</span>(err)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ¤æ–­ åˆ†ç±»åç§° å’Œ åˆ†ç±»åˆ«å æ˜¯å¦è¢«å ç”¨</span></span><br><span class="line">  <span class="keyword">if</span> (results.<span class="property">length</span> === <span class="number">2</span>) <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&#x27;åˆ†ç±»åç§°ä¸åˆ«åè¢«å ç”¨ï¼Œè¯·æ›´æ¢åé‡è¯•ï¼&#x27;</span>)</span><br><span class="line">  <span class="comment">// åˆ†åˆ«åˆ¤æ–­ åˆ†ç±»åç§° å’Œ åˆ†ç±»åˆ«å æ˜¯å¦è¢«å ç”¨</span></span><br><span class="line">  <span class="keyword">if</span> (results.<span class="property">length</span> === <span class="number">1</span> &amp;&amp; results[<span class="number">0</span>].<span class="property">name</span> === req.<span class="property">body</span>.<span class="property">name</span>) <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&#x27;åˆ†ç±»åç§°è¢«å ç”¨ï¼Œè¯·æ›´æ¢åé‡è¯•ï¼&#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span> (results.<span class="property">length</span> === <span class="number">1</span> &amp;&amp; results[<span class="number">0</span>].<span class="property">alias</span> === req.<span class="property">body</span>.<span class="property">alias</span>) <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&#x27;åˆ†ç±»åˆ«åè¢«å ç”¨ï¼Œè¯·æ›´æ¢åé‡è¯•ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// TODOï¼šæ–°å¢æ–‡ç« åˆ†ç±»</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="å®ç°æ–°å¢æ–‡ç« åˆ†ç±»çš„åŠŸèƒ½">å®ç°æ–°å¢æ–‡ç« åˆ†ç±»çš„åŠŸèƒ½</h4><ol><li>å®šä¹‰æ–°å¢æ–‡ç« åˆ†ç±»çš„ SQL è¯­å¥ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sql = <span class="string">`insert into ev_article_cate set ?`</span></span><br></pre></td></tr></table></figure><ol start="2"><li>è°ƒç”¨ <code>db.query()</code> æ‰§è¡Œæ–°å¢æ–‡ç« åˆ†ç±»çš„ SQL è¯­å¥ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">db.<span class="title function_">query</span>(sql, req.<span class="property">body</span>, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// SQL è¯­å¥æ‰§è¡Œå¤±è´¥</span></span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> res.<span class="title function_">cc</span>(err)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// SQL è¯­å¥æ‰§è¡ŒæˆåŠŸï¼Œä½†æ˜¯å½±å“è¡Œæ•°ä¸ç­‰äº 1</span></span><br><span class="line">  <span class="keyword">if</span> (results.<span class="property">affectedRows</span> !== <span class="number">1</span>) <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&#x27;æ–°å¢æ–‡ç« åˆ†ç±»å¤±è´¥ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ–°å¢æ–‡ç« åˆ†ç±»æˆåŠŸ</span></span><br><span class="line">  res.<span class="title function_">cc</span>(<span class="string">&#x27;æ–°å¢æ–‡ç« åˆ†ç±»æˆåŠŸï¼&#x27;</span>, <span class="number">0</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="æ ¹æ®-Id-åˆ é™¤æ–‡ç« åˆ†ç±»">æ ¹æ® Id åˆ é™¤æ–‡ç« åˆ†ç±»</h3><h4 id="å®ç°æ­¥éª¤-v9">å®ç°æ­¥éª¤</h4><ol><li>å®šä¹‰è·¯ç”±å’Œå¤„ç†å‡½æ•°</li><li>éªŒè¯è¡¨å•æ•°æ®</li><li>å®ç°åˆ é™¤æ–‡ç« åˆ†ç±»çš„åŠŸèƒ½</li></ol><h4 id="å®šä¹‰è·¯ç”±å’Œå¤„ç†å‡½æ•°-v5">å®šä¹‰è·¯ç”±å’Œå¤„ç†å‡½æ•°</h4><ol><li>åœ¨ <code>/router/artcate.js</code> æ¨¡å—ä¸­ï¼Œæ·»åŠ  <code>åˆ é™¤æ–‡ç« åˆ†ç±»</code> çš„è·¯ç”±ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ é™¤æ–‡ç« åˆ†ç±»çš„è·¯ç”±</span></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/deletecate/:id&#x27;</span>, artcate_handler.<span class="property">deleteCateById</span>)</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ <code>/router_handler/artcate.js</code> æ¨¡å—ä¸­ï¼Œå®šä¹‰å¹¶å‘å¤–å…±äº« <code>åˆ é™¤æ–‡ç« åˆ†ç±»</code> çš„è·¯ç”±å¤„ç†å‡½æ•°ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ é™¤æ–‡ç« åˆ†ç±»çš„å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">deleteCateById</span> = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;ok&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="éªŒè¯è¡¨å•æ•°æ®-v5">éªŒè¯è¡¨å•æ•°æ®</h4><ol><li>åœ¨ <code>/schema/artcate.js</code> éªŒè¯è§„åˆ™æ¨¡å—ä¸­ï¼Œå®šä¹‰ id çš„éªŒè¯è§„åˆ™å¦‚ä¸‹ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ åˆ†ç±»Id çš„æ ¡éªŒè§„åˆ™</span></span><br><span class="line"><span class="keyword">const</span> id = joi.<span class="title function_">number</span>().<span class="title function_">integer</span>().<span class="title function_">min</span>(<span class="number">1</span>).required()</span><br></pre></td></tr></table></figure><ol start="2"><li>å¹¶ä½¿ç”¨ <code>exports</code> å‘å¤–å…±äº«å¦‚ä¸‹çš„ <code>éªŒè¯è§„åˆ™å¯¹è±¡</code>ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¡éªŒè§„åˆ™å¯¹è±¡ - åˆ é™¤åˆ†ç±»</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">delete_cate_schema</span> = &#123;</span><br><span class="line">  <span class="attr">params</span>: &#123;</span><br><span class="line">    id,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>åœ¨ <code>/router/artcate.js</code> æ¨¡å—ä¸­ï¼Œå¯¼å…¥éœ€è¦çš„éªŒè¯è§„åˆ™å¯¹è±¡ï¼Œå¹¶åœ¨è·¯ç”±ä¸­ä½¿ç”¨ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥åˆ é™¤åˆ†ç±»çš„éªŒè¯è§„åˆ™å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> &#123; delete_cate_schema &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../schema/artcate&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤æ–‡ç« åˆ†ç±»çš„è·¯ç”±</span></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/deletecate/:id&#x27;</span>, <span class="title function_">expressJoi</span>(delete_cate_schema), artcate_handler.<span class="property">deleteCateById</span>)</span><br></pre></td></tr></table></figure><h4 id="å®ç°åˆ é™¤æ–‡ç« åˆ†ç±»çš„åŠŸèƒ½">å®ç°åˆ é™¤æ–‡ç« åˆ†ç±»çš„åŠŸèƒ½</h4><ol><li>å®šä¹‰åˆ é™¤æ–‡ç« åˆ†ç±»çš„ SQL è¯­å¥ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sql = <span class="string">`update ev_article_cate set is_delete=1 where id=?`</span></span><br></pre></td></tr></table></figure><ol start="2"><li>è°ƒç”¨ <code>db.query()</code> æ‰§è¡Œåˆ é™¤æ–‡ç« åˆ†ç±»çš„ SQL è¯­å¥ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">db.<span class="title function_">query</span>(sql, req.<span class="property">params</span>.<span class="property">id</span>, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ‰§è¡Œ SQL è¯­å¥å¤±è´¥</span></span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> res.<span class="title function_">cc</span>(err)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// SQL è¯­å¥æ‰§è¡ŒæˆåŠŸï¼Œä½†æ˜¯å½±å“è¡Œæ•°ä¸ç­‰äº 1</span></span><br><span class="line">  <span class="keyword">if</span> (results.<span class="property">affectedRows</span> !== <span class="number">1</span>) <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&#x27;åˆ é™¤æ–‡ç« åˆ†ç±»å¤±è´¥ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ é™¤æ–‡ç« åˆ†ç±»æˆåŠŸ</span></span><br><span class="line">  res.<span class="title function_">cc</span>(<span class="string">&#x27;åˆ é™¤æ–‡ç« åˆ†ç±»æˆåŠŸï¼&#x27;</span>, <span class="number">0</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="æ ¹æ®-Id-è·å–æ–‡ç« åˆ†ç±»æ•°æ®">æ ¹æ® Id è·å–æ–‡ç« åˆ†ç±»æ•°æ®</h3><h4 id="å®ç°æ­¥éª¤-v10">å®ç°æ­¥éª¤</h4><ol><li>å®šä¹‰è·¯ç”±å’Œå¤„ç†å‡½æ•°</li><li>éªŒè¯è¡¨å•æ•°æ®</li><li>å®ç°è·å–æ–‡ç« åˆ†ç±»çš„åŠŸèƒ½</li></ol><h4 id="å®šä¹‰è·¯ç”±å’Œå¤„ç†å‡½æ•°-v6">å®šä¹‰è·¯ç”±å’Œå¤„ç†å‡½æ•°</h4><ol><li>åœ¨ <code>/router/artcate.js</code> æ¨¡å—ä¸­ï¼Œæ·»åŠ  <code>æ ¹æ® Id è·å–æ–‡ç« åˆ†ç±»</code> çš„è·¯ç”±ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/cates/:id&#x27;</span>, artcate_handler.<span class="property">getArticleById</span>)</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ <code>/router_handler/artcate.js</code> æ¨¡å—ä¸­ï¼Œå®šä¹‰å¹¶å‘å¤–å…±äº« <code>æ ¹æ® Id è·å–æ–‡ç« åˆ†ç±»</code> çš„è·¯ç”±å¤„ç†å‡½æ•°ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ® Id è·å–æ–‡ç« åˆ†ç±»çš„å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">getArticleById</span> = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;ok&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="éªŒè¯è¡¨å•æ•°æ®-v6">éªŒè¯è¡¨å•æ•°æ®</h4><ol><li>åœ¨ <code>/schema/artcate.js</code> éªŒè¯è§„åˆ™æ¨¡å—ä¸­ï¼Œä½¿ç”¨ <code>exports</code> å‘å¤–å…±äº«å¦‚ä¸‹çš„ <code>éªŒè¯è§„åˆ™å¯¹è±¡</code>ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¡éªŒè§„åˆ™å¯¹è±¡ - æ ¹æ® Id è·å–åˆ†ç±»</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">get_cate_schema</span> = &#123;</span><br><span class="line">  <span class="attr">params</span>: &#123;</span><br><span class="line">    id,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ <code>/router/artcate.js</code> æ¨¡å—ä¸­ï¼Œå¯¼å…¥éœ€è¦çš„éªŒè¯è§„åˆ™å¯¹è±¡ï¼Œå¹¶åœ¨è·¯ç”±ä¸­ä½¿ç”¨ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥æ ¹æ® Id è·å–åˆ†ç±»çš„éªŒè¯è§„åˆ™å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> &#123; get_cate_schema &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../schema/artcate&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ ¹æ® Id è·å–æ–‡ç« åˆ†ç±»çš„è·¯ç”±</span></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/cates/:id&#x27;</span>, <span class="title function_">expressJoi</span>(get_cate_schema), artcate_handler.<span class="property">getArticleById</span>)</span><br></pre></td></tr></table></figure><h4 id="å®ç°è·å–æ–‡ç« åˆ†ç±»çš„åŠŸèƒ½">å®ç°è·å–æ–‡ç« åˆ†ç±»çš„åŠŸèƒ½</h4><ol><li>å®šä¹‰æ ¹æ® Id è·å–æ–‡ç« åˆ†ç±»çš„ SQL è¯­å¥ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sql = <span class="string">`select * from ev_article_cate where id=?`</span></span><br></pre></td></tr></table></figure><ol start="2"><li>è°ƒç”¨ <code>db.query()</code> æ‰§è¡Œ SQL è¯­å¥ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">db.<span class="title function_">query</span>(sql, req.<span class="property">params</span>.<span class="property">id</span>, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ‰§è¡Œ SQL è¯­å¥å¤±è´¥</span></span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> res.<span class="title function_">cc</span>(err)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// SQL è¯­å¥æ‰§è¡ŒæˆåŠŸï¼Œä½†æ˜¯æ²¡æœ‰æŸ¥è¯¢åˆ°ä»»ä½•æ•°æ®</span></span><br><span class="line">  <span class="keyword">if</span> (results.<span class="property">length</span> !== <span class="number">1</span>) <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&#x27;è·å–æ–‡ç« åˆ†ç±»æ•°æ®å¤±è´¥ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æŠŠæ•°æ®å“åº”ç»™å®¢æˆ·ç«¯</span></span><br><span class="line">  res.<span class="title function_">send</span>(&#123;</span><br><span class="line">    <span class="attr">status</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;è·å–æ–‡ç« åˆ†ç±»æ•°æ®æˆåŠŸï¼&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: results[<span class="number">0</span>],</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="æ ¹æ®-Id-æ›´æ–°æ–‡ç« åˆ†ç±»æ•°æ®">æ ¹æ® Id æ›´æ–°æ–‡ç« åˆ†ç±»æ•°æ®</h3><h4 id="å®ç°æ­¥éª¤-v11">å®ç°æ­¥éª¤</h4><ol><li>å®šä¹‰è·¯ç”±å’Œå¤„ç†å‡½æ•°</li><li>éªŒè¯è¡¨å•æ•°æ®</li><li>æŸ¥è¯¢ <code>åˆ†ç±»åç§°</code> ä¸ <code>åˆ†ç±»åˆ«å</code> æ˜¯å¦è¢«å ç”¨</li><li>å®ç°æ›´æ–°æ–‡ç« åˆ†ç±»çš„åŠŸèƒ½</li></ol><h4 id="å®šä¹‰è·¯ç”±å’Œå¤„ç†å‡½æ•°-v7">å®šä¹‰è·¯ç”±å’Œå¤„ç†å‡½æ•°</h4><ol><li>åœ¨ <code>/router/artcate.js</code> æ¨¡å—ä¸­ï¼Œæ·»åŠ  <code>æ›´æ–°æ–‡ç« åˆ†ç±»</code> çš„è·¯ç”±ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ›´æ–°æ–‡ç« åˆ†ç±»çš„è·¯ç”±</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/updatecate&#x27;</span>, artcate_handler.<span class="property">updateCateById</span>)</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ <code>/router_handler/artcate.js</code> æ¨¡å—ä¸­ï¼Œå®šä¹‰å¹¶å‘å¤–å…±äº« <code>æ›´æ–°æ–‡ç« åˆ†ç±»</code> çš„è·¯ç”±å¤„ç†å‡½æ•°ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ›´æ–°æ–‡ç« åˆ†ç±»çš„å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">updateCateById</span> = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;ok&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="éªŒè¯è¡¨å•æ•°æ®-v7">éªŒè¯è¡¨å•æ•°æ®</h4><ol><li>åœ¨ <code>/schema/artcate.js</code> éªŒè¯è§„åˆ™æ¨¡å—ä¸­ï¼Œä½¿ç”¨ <code>exports</code> å‘å¤–å…±äº«å¦‚ä¸‹çš„ <code>éªŒè¯è§„åˆ™å¯¹è±¡</code>ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¡éªŒè§„åˆ™å¯¹è±¡ - æ›´æ–°åˆ†ç±»</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">update_cate_schema</span> = &#123;</span><br><span class="line">  <span class="attr">body</span>: &#123;</span><br><span class="line">    <span class="title class_">Id</span>: id,</span><br><span class="line">    name,</span><br><span class="line">    alias,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ <code>/router/artcate.js</code> æ¨¡å—ä¸­ï¼Œå¯¼å…¥éœ€è¦çš„éªŒè¯è§„åˆ™å¯¹è±¡ï¼Œå¹¶åœ¨è·¯ç”±ä¸­ä½¿ç”¨ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥æ›´æ–°æ–‡ç« åˆ†ç±»çš„éªŒè¯è§„åˆ™å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> &#123; update_cate_schema &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../schema/artcate&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°æ–‡ç« åˆ†ç±»çš„è·¯ç”±</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/updatecate&#x27;</span>, <span class="title function_">expressJoi</span>(update_cate_schema), artcate_handler.<span class="property">updateCateById</span>)</span><br></pre></td></tr></table></figure><h4 id="æŸ¥è¯¢åˆ†ç±»åç§°ä¸åˆ«åæ˜¯å¦è¢«å ç”¨-v2">æŸ¥è¯¢åˆ†ç±»åç§°ä¸åˆ«åæ˜¯å¦è¢«å ç”¨</h4><ol><li>å®šä¹‰æŸ¥é‡çš„ SQL è¯­å¥ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰æŸ¥è¯¢ åˆ†ç±»åç§° ä¸ åˆ†ç±»åˆ«å æ˜¯å¦è¢«å ç”¨çš„ SQL è¯­å¥</span></span><br><span class="line"><span class="keyword">const</span> sql = <span class="string">`select * from ev_article_cate where Id&lt;&gt;? and (name=? or alias=?)`</span></span><br></pre></td></tr></table></figure><ol start="2"><li>è°ƒç”¨ <code>db.query()</code> æ‰§è¡ŒæŸ¥é‡çš„æ“ä½œï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‰§è¡ŒæŸ¥é‡æ“ä½œ</span></span><br><span class="line">db.<span class="title function_">query</span>(sql, [req.<span class="property">body</span>.<span class="property">Id</span>, req.<span class="property">body</span>.<span class="property">name</span>, req.<span class="property">body</span>.<span class="property">alias</span>], <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ‰§è¡Œ SQL è¯­å¥å¤±è´¥</span></span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> res.<span class="title function_">cc</span>(err)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ¤æ–­ åˆ†ç±»åç§° å’Œ åˆ†ç±»åˆ«å æ˜¯å¦è¢«å ç”¨</span></span><br><span class="line">  <span class="keyword">if</span> (results.<span class="property">length</span> === <span class="number">2</span>) <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&#x27;åˆ†ç±»åç§°ä¸åˆ«åè¢«å ç”¨ï¼Œè¯·æ›´æ¢åé‡è¯•ï¼&#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span> (results.<span class="property">length</span> === <span class="number">1</span> &amp;&amp; results[<span class="number">0</span>].<span class="property">name</span> === req.<span class="property">body</span>.<span class="property">name</span>) <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&#x27;åˆ†ç±»åç§°è¢«å ç”¨ï¼Œè¯·æ›´æ¢åé‡è¯•ï¼&#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span> (results.<span class="property">length</span> === <span class="number">1</span> &amp;&amp; results[<span class="number">0</span>].<span class="property">alias</span> === req.<span class="property">body</span>.<span class="property">alias</span>) <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&#x27;åˆ†ç±»åˆ«åè¢«å ç”¨ï¼Œè¯·æ›´æ¢åé‡è¯•ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// TODOï¼šæ›´æ–°æ–‡ç« åˆ†ç±»</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="å®ç°æ›´æ–°æ–‡ç« åˆ†ç±»çš„åŠŸèƒ½">å®ç°æ›´æ–°æ–‡ç« åˆ†ç±»çš„åŠŸèƒ½</h4><ol><li>å®šä¹‰æ›´æ–°æ–‡ç« åˆ†ç±»çš„ SQL è¯­å¥ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sql = <span class="string">`update ev_article_cate set ? where Id=?`</span></span><br></pre></td></tr></table></figure><ol start="2"><li>è°ƒç”¨ <code>db.query()</code> æ‰§è¡Œ SQL è¯­å¥ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">db.<span class="title function_">query</span>(sql, [req.<span class="property">body</span>, req.<span class="property">body</span>.<span class="property">Id</span>], <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ‰§è¡Œ SQL è¯­å¥å¤±è´¥</span></span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> res.<span class="title function_">cc</span>(err)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// SQL è¯­å¥æ‰§è¡ŒæˆåŠŸï¼Œä½†æ˜¯å½±å“è¡Œæ•°ä¸ç­‰äº 1</span></span><br><span class="line">  <span class="keyword">if</span> (results.<span class="property">affectedRows</span> !== <span class="number">1</span>) <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&#x27;æ›´æ–°æ–‡ç« åˆ†ç±»å¤±è´¥ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ›´æ–°æ–‡ç« åˆ†ç±»æˆåŠŸ</span></span><br><span class="line">  res.<span class="title function_">cc</span>(<span class="string">&#x27;æ›´æ–°æ–‡ç« åˆ†ç±»æˆåŠŸï¼&#x27;</span>, <span class="number">0</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="æ–‡ç« ç®¡ç†">æ–‡ç« ç®¡ç†</h2><h3 id="æ–°å»º-ev-articles-è¡¨">æ–°å»º ev_articles è¡¨</h3><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/ev_articles.01220b03.png" alt="ev_articlesè¡¨ç»“æ„"></p><h3 id="å‘å¸ƒæ–°æ–‡ç« ">å‘å¸ƒæ–°æ–‡ç« </h3><h4 id="å®ç°æ­¥éª¤-v12">å®ç°æ­¥éª¤</h4><ol><li>åˆå§‹åŒ–è·¯ç”±æ¨¡å—</li><li>åˆå§‹åŒ–è·¯ç”±å¤„ç†å‡½æ•°æ¨¡å—</li><li>ä½¿ç”¨ multer è§£æè¡¨å•æ•°æ®</li><li>éªŒè¯è¡¨å•æ•°æ®</li><li>å®ç°å‘å¸ƒæ–‡ç« çš„åŠŸèƒ½</li></ol><h4 id="åˆå§‹åŒ–è·¯ç”±æ¨¡å—-v3">åˆå§‹åŒ–è·¯ç”±æ¨¡å—</h4><ol><li>åˆ›å»º <code>/router/article.js</code> è·¯ç”±æ¨¡å—ï¼Œå¹¶åˆå§‹åŒ–å¦‚ä¸‹çš„ä»£ç ç»“æ„ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥ express</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="comment">// åˆ›å»ºè·¯ç”±å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘å¸ƒæ–°æ–‡ç« </span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/add&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;ok&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘å¤–å…±äº«è·¯ç”±å¯¹è±¡</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ <code>app.js</code> ä¸­å¯¼å…¥å¹¶ä½¿ç”¨æ–‡ç« çš„è·¯ç”±æ¨¡å—ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥å¹¶ä½¿ç”¨æ–‡ç« è·¯ç”±æ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> articleRouter = <span class="built_in">require</span>(<span class="string">&#x27;./router/article&#x27;</span>)</span><br><span class="line"><span class="comment">// ä¸ºæ–‡ç« çš„è·¯ç”±æŒ‚è½½ç»Ÿä¸€çš„è®¿é—®å‰ç¼€ /my/article</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/my/article&#x27;</span>, articleRouter)</span><br></pre></td></tr></table></figure><h4 id="åˆå§‹åŒ–è·¯ç”±å¤„ç†å‡½æ•°æ¨¡å—-v3">åˆå§‹åŒ–è·¯ç”±å¤„ç†å‡½æ•°æ¨¡å—</h4><ol><li>åˆ›å»º <code>/router_handler/article.js</code> è·¯ç”±å¤„ç†å‡½æ•°æ¨¡å—ï¼Œå¹¶åˆå§‹åŒ–å¦‚ä¸‹çš„ä»£ç ç»“æ„ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‘å¸ƒæ–°æ–‡ç« çš„å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">addArticle</span> = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;ok&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>ä¿®æ”¹ <code>/router/article.js</code> ä¸­çš„ä»£ç å¦‚ä¸‹ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥æ–‡ç« çš„è·¯ç”±å¤„ç†å‡½æ•°æ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> article_handler = <span class="built_in">require</span>(<span class="string">&#x27;../router_handler/article&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘å¸ƒæ–°æ–‡ç« </span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/add&#x27;</span>, article_handler.<span class="property">addArticle</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨-multer-è§£æè¡¨å•æ•°æ®">ä½¿ç”¨ multer è§£æè¡¨å•æ•°æ®</h4><blockquote><p>æ³¨æ„ï¼šä½¿ç”¨ <code>express.urlencoded()</code> ä¸­é—´ä»¶æ— æ³•è§£æ <code>multipart/form-data</code> æ ¼å¼çš„è¯·æ±‚ä½“æ•°æ®ã€‚</p></blockquote><blockquote><p>å½“å‰é¡¹ç›®ï¼Œæ¨èä½¿ç”¨ multer æ¥è§£æ <code>multipart/form-data</code> æ ¼å¼çš„è¡¨å•æ•°æ®ã€‚<a href="https://www.npmjs.com/package/multer">https://www.npmjs.com/package/multer</a></p></blockquote><ol><li>è¿è¡Œå¦‚ä¸‹çš„ç»ˆç«¯å‘½ä»¤ï¼Œåœ¨é¡¹ç›®ä¸­å®‰è£… <code>multer</code>ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i multer@1.4.2</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ <code>/router_handler/article.js</code> æ¨¡å—ä¸­å¯¼å…¥å¹¶é…ç½® <code>multer</code>ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥è§£æ formdata æ ¼å¼è¡¨å•æ•°æ®çš„åŒ…</span></span><br><span class="line"><span class="keyword">const</span> multer = <span class="built_in">require</span>(<span class="string">&#x27;multer&#x27;</span>)</span><br><span class="line"><span class="comment">// å¯¼å…¥å¤„ç†è·¯å¾„çš„æ ¸å¿ƒæ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»º multer çš„å®ä¾‹å¯¹è±¡ï¼Œé€šè¿‡ dest å±æ€§æŒ‡å®šæ–‡ä»¶çš„å­˜æ”¾è·¯å¾„</span></span><br><span class="line"><span class="keyword">const</span> upload = <span class="title function_">multer</span>(&#123; <span class="attr">dest</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;../uploads&#x27;</span>) &#125;)</span><br></pre></td></tr></table></figure><ol start="3"><li>ä¿®æ”¹ <code>å‘å¸ƒæ–°æ–‡ç« </code> çš„è·¯ç”±å¦‚ä¸‹ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‘å¸ƒæ–°æ–‡ç« çš„è·¯ç”±</span></span><br><span class="line"><span class="comment">// upload.single() æ˜¯ä¸€ä¸ªå±€éƒ¨ç”Ÿæ•ˆçš„ä¸­é—´ä»¶ï¼Œç”¨æ¥è§£æ FormData æ ¼å¼çš„è¡¨å•æ•°æ®</span></span><br><span class="line"><span class="comment">// å°†æ–‡ä»¶ç±»å‹çš„æ•°æ®ï¼Œè§£æå¹¶æŒ‚è½½åˆ° req.file å±æ€§ä¸­</span></span><br><span class="line"><span class="comment">// å°†æ–‡æœ¬ç±»å‹çš„æ•°æ®ï¼Œè§£æå¹¶æŒ‚è½½åˆ° req.body å±æ€§ä¸­</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/add&#x27;</span>, upload.<span class="title function_">single</span>(<span class="string">&#x27;cover_img&#x27;</span>), article_handler.<span class="property">addArticle</span>)</span><br></pre></td></tr></table></figure><ol start="4"><li>åœ¨ <code>/router_handler/article.js</code> æ¨¡å—ä¸­çš„ <code>addArticle</code> å¤„ç†å‡½æ•°ä¸­ï¼Œå°† <code>multer</code> è§£æå‡ºæ¥çš„æ•°æ®è¿›è¡Œæ‰“å°ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‘å¸ƒæ–°æ–‡ç« çš„å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">addArticle</span> = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">body</span>) <span class="comment">// æ–‡æœ¬ç±»å‹çš„æ•°æ®</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;--------åˆ†å‰²çº¿----------&#x27;</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">file</span>) <span class="comment">// æ–‡ä»¶ç±»å‹çš„æ•°æ®</span></span><br><span class="line"></span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;ok&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="éªŒè¯è¡¨å•æ•°æ®-v8">éªŒè¯è¡¨å•æ•°æ®</h4><blockquote><p>å®ç°æ€è·¯ï¼šé€šè¿‡ express-joi <strong>è‡ªåŠ¨éªŒè¯</strong> req.body ä¸­çš„æ–‡æœ¬æ•°æ®ï¼›é€šè¿‡ if åˆ¤æ–­<strong>æ‰‹åŠ¨éªŒè¯</strong> req.file ä¸­çš„æ–‡ä»¶æ•°æ®ï¼›</p></blockquote><ol><li>åˆ›å»º <code>/schema/article.js</code> éªŒè¯è§„åˆ™æ¨¡å—ï¼Œå¹¶åˆå§‹åŒ–å¦‚ä¸‹çš„ä»£ç ç»“æ„ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥å®šä¹‰éªŒè¯è§„åˆ™çš„æ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> joi = <span class="built_in">require</span>(<span class="string">&#x27;joi&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ æ ‡é¢˜ã€åˆ†ç±»Idã€å†…å®¹ã€å‘å¸ƒçŠ¶æ€ çš„éªŒè¯è§„åˆ™</span></span><br><span class="line"><span class="keyword">const</span> title = joi.<span class="title function_">string</span>().required()</span><br><span class="line"><span class="keyword">const</span> cate_id = joi.<span class="title function_">number</span>().<span class="title function_">integer</span>().<span class="title function_">min</span>(<span class="number">1</span>).required()</span><br><span class="line"><span class="keyword">const</span> content = joi.<span class="title function_">string</span>().required().<span class="title function_">allow</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> state = joi.<span class="title function_">string</span>().<span class="title function_">valid</span>(<span class="string">&#x27;å·²å‘å¸ƒ&#x27;</span>, <span class="string">&#x27;è‰ç¨¿&#x27;</span>).required()</span><br><span class="line"></span><br><span class="line"><span class="comment">// éªŒè¯è§„åˆ™å¯¹è±¡ - å‘å¸ƒæ–‡ç« </span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">add_article_schema</span> = &#123;</span><br><span class="line">  <span class="attr">body</span>: &#123;</span><br><span class="line">    title,</span><br><span class="line">    cate_id,</span><br><span class="line">    content,</span><br><span class="line">    state,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ <code>/router/article.js</code> æ¨¡å—ä¸­ï¼Œå¯¼å…¥éœ€è¦çš„éªŒè¯è§„åˆ™å¯¹è±¡ï¼Œå¹¶åœ¨è·¯ç”±ä¸­ä½¿ç”¨ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥éªŒè¯æ•°æ®çš„ä¸­é—´ä»¶</span></span><br><span class="line"><span class="keyword">const</span> expressJoi = <span class="built_in">require</span>(<span class="string">&#x27;@escook/express-joi&#x27;</span>)</span><br><span class="line"><span class="comment">// å¯¼å…¥æ–‡ç« çš„éªŒè¯æ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> &#123; add_article_schema &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../schema/article&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘å¸ƒæ–°æ–‡ç« çš„è·¯ç”±</span></span><br><span class="line"><span class="comment">// æ³¨æ„ï¼šåœ¨å½“å‰çš„è·¯ç”±ä¸­ï¼Œå…ˆåä½¿ç”¨äº†ä¸¤ä¸ªä¸­é—´ä»¶ï¼š</span></span><br><span class="line"><span class="comment">//       å…ˆä½¿ç”¨ multer è§£æè¡¨å•æ•°æ®</span></span><br><span class="line"><span class="comment">//       å†ä½¿ç”¨ expressJoi å¯¹è§£æçš„è¡¨å•æ•°æ®è¿›è¡ŒéªŒè¯</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/add&#x27;</span>, upload.<span class="title function_">single</span>(<span class="string">&#x27;cover_img&#x27;</span>), <span class="title function_">expressJoi</span>(add_article_schema), article_handler.<span class="property">addArticle</span>)</span><br></pre></td></tr></table></figure><ol start="3"><li>åœ¨ <code>/router_handler/article.js</code> æ¨¡å—ä¸­çš„ <code>addArticle</code> å¤„ç†å‡½æ•°ä¸­ï¼Œé€šè¿‡ <code>if</code> åˆ¤æ–­å®¢æˆ·ç«¯æ˜¯å¦æäº¤äº† <code>å°é¢å›¾ç‰‡</code>ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‘å¸ƒæ–°æ–‡ç« çš„å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">addArticle</span> = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æ‰‹åŠ¨åˆ¤æ–­æ˜¯å¦ä¸Šä¼ äº†æ–‡ç« å°é¢</span></span><br><span class="line">  <span class="keyword">if</span> (!req.<span class="property">file</span> || req.<span class="property">file</span>.<span class="property">fieldname</span> !== <span class="string">&#x27;cover_img&#x27;</span>) <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&#x27;æ–‡ç« å°é¢æ˜¯å¿…é€‰å‚æ•°ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// TODOï¼šè¡¨å•æ•°æ®åˆæ³•ï¼Œç»§ç»­åé¢çš„å¤„ç†æµç¨‹...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="å®ç°å‘å¸ƒæ–‡ç« çš„åŠŸèƒ½">å®ç°å‘å¸ƒæ–‡ç« çš„åŠŸèƒ½</h4><ol><li>æ•´ç†è¦æ’å…¥æ•°æ®åº“çš„æ–‡ç« ä¿¡æ¯å¯¹è±¡ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥å¤„ç†è·¯å¾„çš„ path æ ¸å¿ƒæ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> articleInfo = &#123;</span><br><span class="line">  <span class="comment">// æ ‡é¢˜ã€å†…å®¹ã€çŠ¶æ€ã€æ‰€å±çš„åˆ†ç±»Id</span></span><br><span class="line">  ...req.<span class="property">body</span>,</span><br><span class="line">  <span class="comment">// æ–‡ç« å°é¢åœ¨æœåŠ¡å™¨ç«¯çš„å­˜æ”¾è·¯å¾„</span></span><br><span class="line">  <span class="attr">cover_img</span>: path.<span class="title function_">join</span>(<span class="string">&#x27;/uploads&#x27;</span>, req.<span class="property">file</span>.<span class="property">filename</span>),</span><br><span class="line">  <span class="comment">// æ–‡ç« å‘å¸ƒæ—¶é—´</span></span><br><span class="line">  <span class="attr">pub_date</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(),</span><br><span class="line">  <span class="comment">// æ–‡ç« ä½œè€…çš„Id</span></span><br><span class="line">  <span class="attr">author_id</span>: req.<span class="property">user</span>.<span class="property">id</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>å®šä¹‰å‘å¸ƒæ–‡ç« çš„ SQL è¯­å¥ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sql = <span class="string">`insert into ev_articles set ?`</span></span><br></pre></td></tr></table></figure><ol start="3"><li>è°ƒç”¨ <code>db.query()</code> æ‰§è¡Œå‘å¸ƒæ–‡ç« çš„ SQL è¯­å¥ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥æ•°æ®åº“æ“ä½œæ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> db = <span class="built_in">require</span>(<span class="string">&#x27;../db/index&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œ SQL è¯­å¥</span></span><br><span class="line">db.<span class="title function_">query</span>(sql, articleInfo, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ‰§è¡Œ SQL è¯­å¥å¤±è´¥</span></span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> res.<span class="title function_">cc</span>(err)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ‰§è¡Œ SQL è¯­å¥æˆåŠŸï¼Œä½†æ˜¯å½±å“è¡Œæ•°ä¸ç­‰äº 1</span></span><br><span class="line">  <span class="keyword">if</span> (results.<span class="property">affectedRows</span> !== <span class="number">1</span>) <span class="keyword">return</span> res.<span class="title function_">cc</span>(<span class="string">&#x27;å‘å¸ƒæ–‡ç« å¤±è´¥ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å‘å¸ƒæ–‡ç« æˆåŠŸ</span></span><br><span class="line">  res.<span class="title function_">cc</span>(<span class="string">&#x27;å‘å¸ƒæ–‡ç« æˆåŠŸ&#x27;</span>, <span class="number">0</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="4"><li>åœ¨ <code>app.js</code> ä¸­ï¼Œä½¿ç”¨ <code>express.static()</code> ä¸­é—´ä»¶ï¼Œå°† <code>uploads</code> ç›®å½•ä¸­çš„å›¾ç‰‡æ‰˜ç®¡ä¸ºé™æ€èµ„æºï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‰˜ç®¡é™æ€èµ„æºæ–‡ä»¶</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/uploads&#x27;</span>, express.<span class="title function_">static</span>(<span class="string">&#x27;./uploads&#x27;</span>))</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;å¤§äº‹ä»¶åå° API é¡¹ç›®&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.showdoc.cc/escook?page_id=3707158761215217&quot;&gt;API æ¥å£æ–‡æ¡£&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id</summary>
      
    
    
    
    <category term="åç«¯ğŸŸ" scheme="https://blog.cilicili.xyz/categories/%E5%90%8E%E7%AB%AF%F0%9F%8D%9F/"/>
    
    
    <category term="Express" scheme="https://blog.cilicili.xyz/tags/Express/"/>
    
    <category term="é¡¹ç›®" scheme="https://blog.cilicili.xyz/tags/%E9%A1%B9%E7%9B%AE/"/>
    
  </entry>
  
  <entry>
    <title>ã€å‰ç«¯ã€‘æ­£åˆ™è¡¨è¾¾å¼çš„ç®€å•ä½¿ç”¨</title>
    <link href="https://blog.cilicili.xyz/posts/5405255.html"/>
    <id>https://blog.cilicili.xyz/posts/5405255.html</id>
    <published>2022-09-08T08:23:14.000Z</published>
    <updated>2022-09-13T13:01:19.526Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ­£åˆ™è¡¨è¾¾å¼">æ­£åˆ™è¡¨è¾¾å¼</h2><ul><li><strong>æ­£åˆ™è¡¨è¾¾å¼</strong>ï¼ˆRegular Expressionï¼‰æ˜¯ç”¨äº<strong>åŒ¹é…</strong>å­—ç¬¦ä¸²ä¸­å­—ç¬¦ç»„åˆçš„æ¨¡å¼ã€‚</li><li>åœ¨ JavaScriptä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¹Ÿæ˜¯å¯¹è±¡ ã€‚</li><li>é€šå¸¸ç”¨æ¥<strong>æŸ¥æ‰¾ã€æ›¿æ¢</strong>é‚£äº›ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼çš„æ–‡æœ¬ï¼Œè®¸å¤šè¯­è¨€éƒ½æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ã€‚</li></ul><h2 id="è¯­æ³•">è¯­æ³•</h2><h3 id="å®šä¹‰æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•">å®šä¹‰æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•</h3><ol><li><p>å­—é¢é‡å½¢å¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> å˜é‡å = <span class="regexp">/è¡¨è¾¾å¼/</span></span><br></pre></td></tr></table></figure><ul><li>å…¶ä¸­ï¼Œ<code>/  /</code>æ˜¯æ­£åˆ™è¡¨è¾¾å¼å­—é¢é‡</li><li>æ˜¯<code>object</code>ï¼ˆå¤æ‚æ•°æ®ç±»å‹ï¼‰</li></ul></li><li><p>å†…ç½®æ„é€ å‡½æ•°åˆ›å»º</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> res=<span class="keyword">new</span> <span class="title class_">RegExp</span>(â€˜abcdâ€™)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res) <span class="comment">//  /abcd/</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="åˆ¤æ–­æ˜¯å¦æœ‰ç¬¦åˆè§„åˆ™çš„å­—ç¬¦ä¸²">åˆ¤æ–­æ˜¯å¦æœ‰ç¬¦åˆè§„åˆ™çš„å­—ç¬¦ä¸²</h3><p><code>test()</code>æ–¹æ³•ï¼šç”¨æ¥æŸ¥çœ‹æ­£åˆ™è¡¨è¾¾å¼ä¸æŒ‡å®šçš„å­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…ã€‚</p><p>ä¾‹å¦‚ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220908163255374.png" alt="image-20220908163255374"></p><h3 id="æ£€æŸ¥ï¼ˆæŸ¥æ‰¾ï¼‰ç¬¦åˆè§„åˆ™çš„å­—ç¬¦ä¸²">æ£€æŸ¥ï¼ˆæŸ¥æ‰¾ï¼‰ç¬¦åˆè§„åˆ™çš„å­—ç¬¦ä¸²</h3><p><code>exec()</code> æ–¹æ³•ï¼šåœ¨ä¸€ä¸ªæŒ‡å®šå­—ç¬¦ä¸²ä¸­æ‰§è¡Œä¸€ä¸ªæœç´¢åŒ¹é…ã€‚</p><p>ä¾‹å¦‚ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220908163433792.png" alt="image-20220908163433792"></p><h2 id="å…ƒå­—ç¬¦-v2">å…ƒå­—ç¬¦</h2><ul><li><p><strong>æ™®é€šå­—ç¬¦</strong></p><p>å¤§å¤šæ•°çš„å­—ç¬¦ä»…èƒ½å¤Ÿæè¿°å®ƒä»¬æœ¬èº«ï¼Œè¿™äº›å­—ç¬¦ç§°ä½œæ™®é€šå­—ç¬¦ï¼Œä¾‹å¦‚æ‰€æœ‰çš„å­—æ¯å’Œæ•°å­—ã€‚ ä¹Ÿå°±æ˜¯è¯´æ™®é€šå­—ç¬¦åªèƒ½å¤ŸåŒ¹é…å­—ç¬¦ä¸²ä¸­ä¸å®ƒä»¬ç›¸åŒçš„å­—ç¬¦ã€‚</p></li><li><p><strong>å…ƒå­—ç¬¦ï¼ˆç‰¹æ®Šå­—ç¬¦ï¼‰</strong></p><p>æ˜¯ä¸€äº›å…·æœ‰ç‰¹æ®Šå«ä¹‰çš„å­—ç¬¦ï¼Œå¯ä»¥æå¤§æé«˜äº†çµæ´»æ€§å’Œå¼ºå¤§çš„åŒ¹é…åŠŸèƒ½ã€‚</p><ul><li>æ¯”å¦‚ï¼Œè§„å®šç”¨æˆ·åªèƒ½è¾“å…¥è‹±æ–‡26ä¸ªè‹±æ–‡å­—æ¯ï¼Œæ™®é€šå­—ç¬¦çš„è¯ abcdefghijklmâ€¦â€¦</li><li>ä½†æ˜¯æ¢æˆå…ƒå­—ç¬¦å†™æ³•ï¼š [a-z]</li></ul></li></ul><h3 id="è¾¹ç•Œç¬¦">è¾¹ç•Œç¬¦</h3><p>æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„è¾¹ç•Œç¬¦ï¼ˆä½ç½®ç¬¦ï¼‰ç”¨æ¥<strong>æç¤ºå­—ç¬¦æ‰€å¤„çš„ä½ç½®</strong>ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªå­—ç¬¦ï¼š</p><table><thead><tr><th style="text-align:center">è¾¹ç•Œç¬¦</th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">^</td><td style="text-align:center">è¡¨ç¤ºåŒ¹é…è¡Œé¦–çš„æ–‡æœ¬ï¼ˆä»¥è°å¼€å§‹ï¼‰</td></tr><tr><td style="text-align:center">$</td><td style="text-align:center">è¡¨ç¤ºåŒ¹é…è¡Œå°¾çš„æ–‡æœ¬ï¼ˆä»¥è°ç»“æŸï¼‰</td></tr></tbody></table><p><strong>å¦‚æœ<code>^</code>å’Œ<code>$</code>åœ¨ä¸€èµ·ï¼Œè¡¨ç¤ºå¿…é¡»æ˜¯ç²¾ç¡®åŒ¹é…ã€‚</strong></p><p>ä¾‹å¦‚ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220908163943056.png" alt="image-20220908163943056"></p><h3 id="é‡è¯-v2">é‡è¯</h3><p>é‡è¯ç”¨æ¥ <strong>è®¾å®šæŸä¸ªæ¨¡å¼å‡ºç°çš„æ¬¡æ•°</strong></p><table><thead><tr><th style="text-align:center">é‡è¯</th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">*</td><td style="text-align:center">é‡å¤é›¶æ¬¡æˆ–æ›´å¤šæ¬¡</td></tr><tr><td style="text-align:center">+</td><td style="text-align:center">é‡å¤ä¸€æ¬¡æˆ–æ›´å¤šæ¬¡</td></tr><tr><td style="text-align:center">ï¼Ÿ</td><td style="text-align:center">é‡å¤é›¶æ¬¡æˆ–ä¸€æ¬¡</td></tr><tr><td style="text-align:center">{n}</td><td style="text-align:center">é‡å¤næ¬¡</td></tr><tr><td style="text-align:center">{nï¼Œ}</td><td style="text-align:center">é‡å¤næ¬¡æˆ–æ›´å¤šæ¬¡</td></tr><tr><td style="text-align:center">{nï¼Œm}</td><td style="text-align:center">é‡å¤nåˆ°mæ¬¡z</td></tr></tbody></table><p><strong>æ³¨æ„ï¼šé€—å·å·¦å³é‡è¯åƒä¸‡ä¸è¦å‡ºç°ç©ºæ ¼</strong></p><p>ä¾‹å¦‚ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220908164211679.png" alt="image-20220908164211679"></p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220908164224761.png" alt="image-20220908164224761"></p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220908164251792.png" alt="image-20220908164251792"></p><h3 id="å­—ç¬¦ç±»">å­—ç¬¦ç±»</h3><h4 id="åŒ¹é…å­—ç¬¦é›†åˆ"><code>[ ]</code>åŒ¹é…å­—ç¬¦é›†åˆ</h4><p>åé¢çš„å­—ç¬¦ä¸²åªè¦<strong>åŒ…å«</strong> abc <strong>ä¸­ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œéƒ½è¿”å› true</strong> ã€‚</p><p>ä¾‹å¦‚ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220908164401167.png" alt="image-20220908164401167"></p><h4 id="é‡Œé¢åŠ ä¸Š-è¿å­—ç¬¦"><code>[ ]</code>é‡Œé¢åŠ ä¸Š <code>-</code> è¿å­—ç¬¦</h4><p>è¡¨ç¤ºä¸€ä¸ªèŒƒå›´ï¼Œæ¯”å¦‚ï¼š</p><ul><li><p><code>[a-z]</code> è¡¨ç¤º <code>a</code> åˆ° <code>z</code> <code>26</code>ä¸ªè‹±æ–‡å­—æ¯éƒ½å¯ä»¥</p></li><li><p><code>[a-zA-Z]</code> è¡¨ç¤º<strong>å¤§å°å†™</strong>éƒ½å¯ä»¥</p></li><li><p><code>[0-9]</code> è¡¨ç¤º <code>0~9</code> çš„æ•°å­—éƒ½å¯ä»¥</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220908164628350.png" alt="image-20220908164628350"></p></li></ul><h4 id="é‡Œé¢åŠ ä¸Š-å–åç¬¦å·"><code>[ ]</code> é‡Œé¢åŠ ä¸Š <code>^</code> å–åç¬¦å·</h4><p>æ¯”å¦‚ï¼š</p><ul><li><p><code>[^a-z]</code> åŒ¹é…é™¤äº†å°å†™å­—æ¯ä»¥å¤–çš„å­—ç¬¦</p></li><li><p>æ³¨æ„è¦å†™åˆ°ä¸­æ‹¬å·é‡Œé¢</p></li></ul><h4 id="åŒ¹é…é™¤æ¢è¡Œç¬¦ä¹‹å¤–çš„ä»»ä½•å•ä¸ªå­—ç¬¦"><code>.</code>  åŒ¹é…é™¤æ¢è¡Œç¬¦ä¹‹å¤–çš„ä»»ä½•å•ä¸ªå­—ç¬¦</h4><h4 id="é¢„å®šä¹‰å­—ç¬¦">é¢„å®šä¹‰å­—ç¬¦</h4><p>æŒ‡çš„æ˜¯æŸäº›å¸¸è§æ¨¡å¼çš„ç®€å†™æ–¹å¼</p><table><thead><tr><th>é¢„å®šç±»</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>\d</td><td>åŒ¹é…<strong>0-9ä¹‹é—´</strong>çš„ä»»ä¸€æ•°å­—ï¼Œç›¸å½“äº**[0-9]**</td></tr><tr><td>\D</td><td>åŒ¹é…æ‰€æœ‰<strong>0-9ä»¥å¤–</strong>çš„å­—ç¬¦ï¼Œç›¸å½“äº**[^0-9]**</td></tr><tr><td>\w</td><td>åŒ¹é…ä»»æ„çš„<strong>å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿</strong>ï¼Œç›¸å½“äº**[A-Za-z0-9]**</td></tr><tr><td>\W</td><td>é™¤æ‰€æœ‰å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ä»¥å¤–çš„å­—ç¬¦ï¼Œç›¸å½“äº**[^A-Za-z0-9_]**</td></tr><tr><td>\s</td><td>åŒ¹é…ç©ºæ ¼ï¼ˆåŒ…æ‹¬æ¢è¡Œç¬¦ã€åˆ¶è¡¨ç¬¦ã€ç©ºæ ¼ç¬¦ç­‰ï¼‰ï¼Œç›¸å½“äº**[\t\r\n\v\f]**</td></tr><tr><td>\S</td><td>åŒ¹é…éç©ºæ ¼çš„å­—ç¬¦ï¼Œç›¸å½“äº**[^\t\r\n\v\f]**</td></tr></tbody></table><p>æ¯”å¦‚ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220908165321171.png" alt="image-20220908165321171"></p><h4 id="ä¿®é¥°ç¬¦-v2">ä¿®é¥°ç¬¦</h4><p>ä¿®é¥°ç¬¦<strong>çº¦æŸæ­£åˆ™æ‰§è¡Œçš„æŸäº›ç»†èŠ‚è¡Œä¸º</strong>ï¼Œå¦‚æ˜¯å¦åŒºåˆ†å¤§å°å†™ã€æ˜¯å¦æ”¯æŒå¤šè¡ŒåŒ¹é…ç­‰ã€‚</p><h5 id="ç®€å•ä¿®é¥°ç¬¦">ç®€å•ä¿®é¥°ç¬¦</h5><p>è¯­æ³•ï¼š<code>/è¡¨è¾¾å¼/ä¿®é¥°ç¬¦</code></p><ul><li><p><code>i</code> æ˜¯å•è¯ <code>ignore</code> çš„ç¼©å†™ï¼Œæ­£åˆ™åŒ¹é…æ—¶<strong>å­—æ¯ä¸åŒºåˆ†å¤§å°å†™</strong></p></li><li><p><code>g</code> æ˜¯å•è¯ <code>global</code> çš„ç¼©å†™ï¼ŒåŒ¹é…<strong>æ‰€æœ‰æ»¡è¶³æ­£åˆ™è¡¨è¾¾å¼çš„ç»“æœ</strong></p></li></ul><p>æ¯”å¦‚ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220908165508957.png" alt="image-20220908165508957"></p><h5 id="æ›¿æ¢replace">æ›¿æ¢replace</h5><p>è¯­æ³•ï¼š<code>å­—ç¬¦ä¸².replace(/æ­£åˆ™è¡¨è¾¾å¼/,'æ›¿æ¢çš„æ–‡æœ¬')</code></p><h2 id="æ­£åˆ™çš„è´ªå©ªå’Œéè´ªå©ª">æ­£åˆ™çš„è´ªå©ªå’Œéè´ªå©ª</h2><h3 id="è´ªå©ªï¼ˆ-ï¼‰">è´ªå©ªï¼ˆ+ï¼‰</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/\d+/</span></span><br><span class="line"><span class="comment">//èƒ½æ•è·çš„æœ€å¤§é•¿åº¦</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">exec</span>(<span class="string">&#x27;abc12345678abc&#x27;</span>)) <span class="comment">// 12345678</span></span><br></pre></td></tr></table></figure><h3 id="éè´ªå©ªï¼ˆ-ï¼‰">éè´ªå©ªï¼ˆ?ï¼‰</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/\d+?/</span></span><br><span class="line"><span class="comment">//èƒ½æ•è·çš„æœ€å°é•¿åº¦</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">exec</span>(<span class="string">&#x27;abc12345678abc&#x27;</span>)) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><h3 id="">??</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/\d??/</span></span><br><span class="line"><span class="comment">//èƒ½æ•è·çš„æœ€å°é•¿åº¦</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">exec</span>(<span class="string">&#x27;12345678abc&#x27;</span>)) <span class="comment">// &#x27;&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="n-è·å–-n-ä¸ª">{n,}? è·å– n ä¸ª</h3><p>å½“ n ä¸º 1 çš„æ—¶å€™ï¼Œç­‰ä»·äº<code>+</code></p><p>å½“ n ä¸º 0 çš„æ—¶å€™ï¼Œç­‰ä»·äº<code>*</code></p><h3 id="ä¾‹å­">ä¾‹å­</h3><ol><li><p>è·å–å¼€æ ‡ç­¾</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">&#x27;&lt;div&gt;ä½ æ˜¯ä»€ä¹ˆå‘€&lt;/div&gt;&#x27;</span></span><br><span class="line"><span class="comment">//è·å–å¼€æ ‡ç­¾</span></span><br><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/&lt;.+?&gt;/</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">exec</span>(str)) <span class="comment">//div</span></span><br></pre></td></tr></table></figure></li><li><p>åŒ¹é…çš„ä¸€ä¸ªå­—ç¬¦</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/abcd&#123;2&#125;/</span></span><br><span class="line"><span class="comment">//æ˜¯åŒ¹é…å‰é¢ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;abcdabcd&#x27;</span>)) <span class="comment">//false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;abcdd&#x27;</span>)) <span class="comment">//true</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="æ­£åˆ™ç‰¹æ®Šå­—ç¬¦">æ­£åˆ™ç‰¹æ®Šå­—ç¬¦</h2><h3 id="ï¼šä¸€ä¸ªæ•´ä½“"><strong><code>()</code>ï¼šä¸€ä¸ªæ•´ä½“</strong></h3><p><strong>ä½œç”¨</strong>ï¼š1. è¡¨ç¤ºæŠŠ abcd å½“ä½œä¸€ä¸ªæ•´ä½“2. å•ç‹¬æ•è·</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/(abcd)&#123;2&#125;/</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;abcdabcd&#x27;</span>)) <span class="comment">//true</span></span><br></pre></td></tr></table></figure><p>å•ç‹¬æ•è·çš„åœºæ™¯ï¼š ä»å·¦æ‹¬å·å¼€å§‹ä¾æ¬¡æ•è·ï¼Œå½“ä½œæ•´ä½“</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/(\d+(\s+))\d+/</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">exec</span>(<span class="string">&#x27;123   123&#x27;</span>))</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/e6c9d24ely1h01nv3p5a3j20s40aojse.jpg" alt="image-20220307215550475"></p><p>ä¸å†™å°æ‹¬å·æ—¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/\d+\s+\d+/</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">exec</span>(<span class="string">&#x27;123   123&#x27;</span>))</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/e6c9d24ely1h01o1qxc3ij20s80840te.jpg" alt="image-20220307220213888"></p><h3 id="ï¼šæ•´ä½“æ•è·"><code>(?:)</code>ï¼šæ•´ä½“æ•è·</h3><p><strong>ï½œï¼šå ä½æˆ–</strong>.è¡¨ç¤ºå·¦è¾¹æˆ–è€…å³è¾¹éƒ½è¡Œï¼Œå¤§éƒ¨åˆ†æ—¶å€™å’Œå°æ‹¬å·è¿ç”¨.åˆ†å¼€çš„æ˜¯å·¦è¾¹å³è¾¹æ•´ä¸ª</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/(abc|def)/</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;abcd&#x27;</span>)) <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;defa&#x27;</span>)) <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;bcd&#x27;</span>)) <span class="comment">//false</span></span><br></pre></td></tr></table></figure><p><strong>å°ç»ƒä¹ </strong>ï¼šå¦‚æœæˆ‘ä»¬ä¸åŠ å°æ‹¬å·ã€‚ä¸‹åˆ—æ­£åˆ™è¡¨ç¤ºï¼Œä»¥ abc å¼€å¤´ï¼Œä»¥ def ç»“å°¾</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/^abc|def$/</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;abcd&#x27;</span>)) <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;defa&#x27;</span>)) <span class="comment">//false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;bcd&#x27;</span>)) <span class="comment">//false</span></span><br><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/^ab(c|d)ef$/</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;abcd&#x27;</span>)) <span class="comment">//false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;defa&#x27;</span>)) <span class="comment">//false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;bcd&#x27;</span>)) <span class="comment">//false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;abcef&#x27;</span>)) <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;abdef&#x27;</span>)) <span class="comment">//true</span></span><br></pre></td></tr></table></figure><p><strong>[]</strong>ï¼šè¡¨ç¤ºåŒ…å«ä¸­é—´çš„ä»»æ„ä¸€ä¸ªéƒ½è¡Œ.<strong>å ä¸€ä¸ªå­—ç¬¦ä½ç½®</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/[abcd]/</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;abcd&#x27;</span>)) <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;d&#x27;</span>)) <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;b&#x27;</span>)) <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;a&#x27;</span>)) <span class="comment">//true</span></span><br></pre></td></tr></table></figure><p><strong>[^]</strong>ï¼šè¡¨ç¤ºåŒ…å«ä¸­é—´çš„ä»»æ„ä¸€ä¸ªéƒ½è¡Œ.<strong>å ä¸€ä¸ªå­—ç¬¦ä½ç½®</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¡¨ç¤ºç”±ä¸€ä¸ªå­—ç¬¦ç»„æˆï¼Œåªè¦ä¸æ˜¯a.b,cï¼Œdä¸­çš„éƒ½å¯ä»¥</span></span><br><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/^[^abcd]$/</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;a&#x27;</span>)) <span class="comment">//false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;f&#x27;</span>)) <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;b&#x27;</span>)) <span class="comment">//false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;c&#x27;</span>)) <span class="comment">//false</span></span><br></pre></td></tr></table></figure><p><strong>-</strong>ï¼šæ˜¯ä½¿ç”¨åœ¨[]é‡Œé¢çš„ç¬¦å·ï¼Œè¡¨ç¤ºä»å“ªä¸€ä¸ªå­—ç¬¦åˆ°å“ªä¸€ä¸ªå­—ç¬¦.ï¼Œå‰ææ˜¯ä»–ä»¬çš„ Ascll æ˜¯è¿ç€çš„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¡¨ç¤ºç”±ä¸€ä¸ªå­—ç¬¦ç»„æˆï¼Œå¯ä»¥æ˜¯0-9ä»»æ„</span></span><br><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/^[0-9]$/</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;0&#x27;</span>)) <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;1&#x27;</span>)) <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;10&#x27;</span>)) <span class="comment">//false</span></span><br><span class="line"><span class="comment">//è¡¨ç¤ºç”±ä¸€ä¸ªå­—ç¬¦ç»„æˆï¼Œå¯ä»¥æ˜¯å°å†™å­—æ¯a-zä»»æ„</span></span><br><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/^[a-z]$/</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;a&#x27;</span>)) <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;Z&#x27;</span>)) <span class="comment">//false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;A&#x27;</span>)) <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è¡¨ç¤ºç”±ä¸€ä¸ªå­—ç¬¦ç»„æˆï¼Œå¯ä»¥æ˜¯å¤§å†™å­—æ¯A-Zä»»æ„</span></span><br><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/^[A-Z]$/</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;a&#x27;</span>)) <span class="comment">//false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;Z&#x27;</span>)) <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;A&#x27;</span>)) <span class="comment">//true</span></span><br></pre></td></tr></table></figure><h3 id="ç­‰ä»·ç»„åˆå½¢å¼">ç­‰ä»·ç»„åˆå½¢å¼</h3><ul><li><strong>[0-9a-zA-Z_]ç­‰ä»·äº\w</strong></li><li><strong>[^0-9a-za-z_]ç­‰ä»·äº\W</strong></li><li><strong>[0-9]ç­‰ä»·äº\d</strong></li><li><strong>[^0-9]ç­‰ä»·äº\D</strong></li><li><strong>[ ]ç­‰ä»·äº\s</strong></li><li><strong>[^ ]ç­‰ä»·äº\S</strong></li></ul><p>å½“æˆ‘ä»¬åœ¨**[]<strong>é‡Œé¢çš„æ—¶å€™ï¼Œç‚¹</strong>(.)**å°±è¡¨ç¤ºä¸€ä¸ªç‚¹ï¼Œä¸æ˜¯ä¸Šæ–‡æ‰€è¿°çš„éæ¢è¡Œä»»æ„å­—ç¬¦</p><h4 id="å°ç»ƒä¹ ">å°ç»ƒä¹ </h4><p>éªŒè¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåªèƒ½ç”±å­—æ¯æ•°æ®ä¸‹åˆ’çº¿ç»„æˆï¼Œ6-12 ä½ï¼Œä¸èƒ½ä»¥ä¸‹åˆ’çº¿å¼€å¤´</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/^[0-9a-zA-Z]\w&#123;5,11&#125;$/</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;123acd&#x27;</span>)) <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;_11213sa&#x27;</span>)) <span class="comment">//false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;q1w_dee&#x27;</span>)) <span class="comment">//true</span></span><br></pre></td></tr></table></figure><p>è·å– HTML æ ‡ç­¾é‡Œé¢çš„ text</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">&#x27;&lt;div&gt;ä½ æ˜¯ä»€ä¹ˆå‘€&lt;/div&gt;&#x27;</span></span><br><span class="line"><span class="comment">//è·å–å¼€æ ‡ç­¾</span></span><br><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/&gt;(.+)&lt;/</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">exec</span>(str))</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/e6c9d24ely1h01ozwnjqyj20ru09imyd.jpg" alt="image-20220307223502689"></p><h3 id="æ­£åˆ™è¡¨è¾¾å¼çš„é¢„æŸ¥">æ­£åˆ™è¡¨è¾¾å¼çš„é¢„æŸ¥</h3><p>æ¯”å¦‚ï¼šâ€œES2015ï¼ŒES2016ï¼ŒES2017 éƒ½æ˜¯ JavaScript çš„è¯­æ³•æ ‡å‡†â€ï¼Œæˆ‘ä»¬æƒ³è¦æŸ¥åˆ° ES2015ï¼ŒES2016</p><h4 id="æ­£å‘è‚¯å®šé¢„æŸ¥">æ­£å‘è‚¯å®šé¢„æŸ¥(?=)</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/^ES(?=2015|2016)/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å­—ç¬¦ä¸²ES2015,ES2016æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯æˆ‘åªæ•è·ES</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;ES2015&#x27;</span>)) <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;ES2016&#x27;</span>)) <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;ES2017&#x27;</span>)) <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">exec</span>(<span class="string">&#x27;ES2015&#x27;</span>))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">exec</span>(<span class="string">&#x27;ES2016&#x27;</span>))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">exec</span>(<span class="string">&#x27;ES2017&#x27;</span>))</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="https://tva1.sinaimg.cn/large/e6c9d24ely1h01pg9nnlej20ry0g6gn7.jpg" alt="image-20220307225046423"></p><h4 id="æ­£å‘å¦å®šé¢„æŸ¥">æ­£å‘å¦å®šé¢„æŸ¥(?!)</h4><p>å½“æˆ‘åœ¨æ•è·å†…å®¹çš„æ—¶å€™ï¼Œåé¢å¿…é¡»è·Ÿç€ä¸æ˜¯æˆ‘æ‰€æŒ‡å®šçš„.æˆ‘è¦çš„æ˜¯ ESï¼Œä½†æ˜¯åé¢ä¸èƒ½è·Ÿ 2015 å’Œ 2016</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/ES(?!2015|2016)/</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">exec</span>(<span class="string">&#x27;ES2015&#x27;</span>)) <span class="comment">//null</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">exec</span>(<span class="string">&#x27;ES2016&#x27;</span>)) <span class="comment">//null</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">exec</span>(<span class="string">&#x27;ES2017&#x27;</span>)) <span class="comment">//false</span></span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="https://tva1.sinaimg.cn/large/e6c9d24ely1h01pq8p6jwj20ri09qwfb.jpg" alt="image-20220307230022106"></p><h4 id="è´Ÿå‘è‚¯å®šé¢„æŸ¥">è´Ÿå‘è‚¯å®šé¢„æŸ¥(?&lt;=)</h4><p>åé¢æ˜¯ ESï¼Œè¦æ±‚å‰é¢æ˜¯ 2015 æˆ–è€… 2016</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/(?&lt;=2015|2016)ES/</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">exec</span>(<span class="string">&#x27;2015ES&#x27;</span>))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">exec</span>(<span class="string">&#x27;2016ES&#x27;</span>))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">exec</span>(<span class="string">&#x27;2017ES&#x27;</span>))</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="https://tva1.sinaimg.cn/large/e6c9d24ely1h01q8uc01dj20r20fyq4j.jpg" alt="image-20220307231814557"></p><h4 id="è´Ÿå‘å¦å®šé¢„æŸ¥">è´Ÿå‘å¦å®šé¢„æŸ¥(?&lt;!)</h4><p>åé¢æ˜¯ ESï¼Œè¦æ±‚å‰é¢ä¸èƒ½æ˜¯ 2015 æˆ–è€… 2016</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/(?&lt;!2015|2016)ES/</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">exec</span>(<span class="string">&#x27;2015ES&#x27;</span>))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">exec</span>(<span class="string">&#x27;2016ES&#x27;</span>))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">exec</span>(<span class="string">&#x27;2017ES&#x27;</span>))</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="https://tva1.sinaimg.cn/large/e6c9d24ely1h01qbzycfuj20re0aat9i.jpg" alt="image-20220307232116753"></p><h3 id="é‡å¤å‡ºç°ç¬¦å·">é‡å¤å‡ºç°ç¬¦å·</h3><p><strong>/num</strong>ï¼šnum æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œè¡¨ç¤ºæ­£åˆ™ç¬¬ num ä¸ªå¯è¢«æ•è·çš„()ã€‚</p><p>è¿™ä¸ªå¯è¢«æ•è·çš„å°æ‹¬å·ä½ç½®æ˜¯ä»€ä¹ˆï¼Œå‡ºç°ä¸€ä»½ä¸€æ¨¡ä¸€æ ·çš„å†…å®¹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/(abc|def)\d+\1/</span></span><br><span class="line"><span class="comment">//å‰é¢æ˜¯abcï¼Œåé¢å°±å¿…é¡»æ˜¯abc</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;abc123abc&#x27;</span>)) <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;def123&#x27;</span>)) <span class="comment">//false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;abc123def&#x27;</span>)) <span class="comment">//false</span></span><br></pre></td></tr></table></figure><h3 id="é‚®ç®±åŒ¹é…">é‚®ç®±åŒ¹é…</h3><p>åå­—ï¼š6-8 ä½ï¼Œä¸èƒ½ä»¥_å¼€å¤´ï¼Œåªèƒ½æ˜¯æ•°å­—ï¼Œå­—æ¯ä¸‹åˆ’çº¿ç»„æˆ</p><p>åªèƒ½æ˜¯ qq æˆ–è€… 163 æˆ–è€… sins é‚®ç®±</p><p><a href="http://xn--epr1cy90e9mx0gc.com">åç¼€åªèƒ½æ˜¯.com</a> <a href="http://xn--1nu597d.cn">æˆ–è€….cn</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/^[0-9a-zA-Z]\w&#123;5,7&#125;@(qq|163|sina)\.(com|cn)$/</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;asdf11@qq.com&#x27;</span>))</span><br></pre></td></tr></table></figure><h3 id="æ‰‹æœºå·">æ‰‹æœºå·</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/^(?:\+86)?((133|158)\d&#123;8&#125;)$/</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">exec</span>(<span class="string">&#x27;+8613378324567&#x27;</span>))</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="https://tva1.sinaimg.cn/large/e6c9d24ely1h01qt460cej20s609wdh6.jpg" alt="image-20220307233743247"></p><h2 id="æ­£åˆ™è¡¨è¾¾å¼æ ‡è¯†ç¬¦">æ­£åˆ™è¡¨è¾¾å¼æ ‡è¯†ç¬¦</h2><p>æ ‡è¯†ç¬¦ï¼šæ˜¯å†™åœ¨æ­£åˆ™è¡¨è¾¾å¼å¤–é¢ï¼Œç”¨æ¥ä¿®é¥°æ•´ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„</p><p><strong>iï¼šå¿½ç•¥å¤§å°å†™</strong></p><p><strong>gï¼šå…¨å±€</strong></p><p><strong>yï¼šç²˜æ€§å…¨å±€</strong></p><p>è¯­æ³•ï¼š<code>/abcc/igy</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">New</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;abcd&#x27;</span>,<span class="string">&#x27;igy)</span></span><br></pre></td></tr></table></figure><h3 id="iï¼Œå¿½ç•¥å¤§å°å†™">iï¼Œå¿½ç•¥å¤§å°å†™</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arg = <span class="regexp">/abcd/</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arg.<span class="title function_">test</span>(<span class="string">&#x27;abcd&#x27;</span>)) <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arg.<span class="title function_">test</span>(<span class="string">&#x27;abcD&#x27;</span>)) <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arg = <span class="regexp">/abcd/i</span> <span class="comment">//å¿½ç•¥å¤§å°å†™</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arg.<span class="title function_">test</span>(<span class="string">&#x27;abcd&#x27;</span>)) <span class="comment">//false</span></span><br></pre></td></tr></table></figure><h3 id="gï¼Œå…¨å±€åŒ¹é…">gï¼Œå…¨å±€åŒ¹é…</h3><p>å› ä¸ºæˆ‘ä»¬åŒ¹é…æˆ–è€…æ•è·éƒ½æ˜¯åªèƒ½æ•è·ç¬¬ä¸€ä¸ª</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arg = <span class="regexp">/abc/g</span> <span class="comment">//å…¨å±€</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•è·ç¬¬äºŒæ¬¡ï¼Œä¼šä»ç¬¬ä¸€æ¬¡çš„ç»“æŸä½å¼€å§‹æŸ¥æ‰¾</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arg.<span class="title function_">exec</span>(<span class="string">&#x27;abc123abc123abc&#x27;</span>)) <span class="comment">//0</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arg.<span class="title function_">exec</span>(<span class="string">&#x27;abc123abc123abc&#x27;</span>)) <span class="comment">//6</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arg.<span class="title function_">exec</span>(<span class="string">&#x27;abc123abc123abc&#x27;</span>)) <span class="comment">//12</span></span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/e6c9d24ely1h01rgyl694j20rg0oa774.jpg" alt="image-20220308000037389"></p><h3 id="yï¼Œç²˜æ€§å…¨å±€">yï¼Œç²˜æ€§å…¨å±€</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arg = <span class="regexp">/abc/y</span> <span class="comment">//å…¨å±€</span></span><br><span class="line"><span class="comment">// æ•è·ç¬¬äºŒæ¬¡ï¼Œä¼šä»ç¬¬ä¸€æ¬¡çš„ç»“æŸä½å¼€å§‹æŸ¥æ‰¾</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arg.<span class="title function_">exec</span>(<span class="string">&#x27;abc123abc123abc&#x27;</span>)) <span class="comment">//0</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arg.<span class="title function_">exec</span>(<span class="string">&#x27;abc123abc123abc&#x27;</span>)) <span class="comment">//null</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arg.<span class="title function_">exec</span>(<span class="string">&#x27;abc123abc123abc&#x27;</span>)) <span class="comment">//0</span></span><br><span class="line"><span class="comment">// å¿…é¡»è¦ç´§è·Ÿç€</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arg.<span class="title function_">exec</span>(<span class="string">&#x27;abcabcabc123abc&#x27;</span>)) <span class="comment">//3</span></span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="https://tva1.sinaimg.cn/large/e6c9d24ely1h01riyfgxcj20rs0hs767.jpg" alt="image-20220308000233640"></p><hr><blockquote><p>å‚è€ƒæ–‡ç« ï¼š</p><p><a href="https://donghuan1224.gitee.io/my-blog/2022/02/10/%E8%BF%B7%E6%83%91%E7%82%B9%E5%90%88%E9%9B%86/6_%E6%AD%A3%E5%88%99%E5%AD%A6%E4%B9%A0/#toc-heading-28">https://donghuan1224.gitee.io/my-blog/2022/02/10/è¿·æƒ‘ç‚¹åˆé›†/6_æ­£åˆ™å­¦ä¹ /#toc-heading-28</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;æ­£åˆ™è¡¨è¾¾å¼&quot;&gt;æ­£åˆ™è¡¨è¾¾å¼&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ­£åˆ™è¡¨è¾¾å¼&lt;/strong&gt;ï¼ˆRegular Expressionï¼‰æ˜¯ç”¨äº&lt;strong&gt;åŒ¹é…&lt;/strong&gt;å­—ç¬¦ä¸²ä¸­å­—ç¬¦ç»„åˆçš„æ¨¡å¼ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ JavaScriptä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼</summary>
      
    
    
    
    <category term="å‰ç«¯ğŸ’¥" scheme="https://blog.cilicili.xyz/categories/%E5%89%8D%E7%AB%AF%F0%9F%92%A5/"/>
    
    
    <category term="æ­£åˆ™è¡¨è¾¾å¼" scheme="https://blog.cilicili.xyz/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>ã€å‰ç«¯ã€‘Vueæ ¸å¿ƒåŸºç¡€(Vue2.x &amp; Vue3.x &amp; å¸¸ç”¨ç»„ä»¶åº“)</title>
    <link href="https://blog.cilicili.xyz/posts/4070eb25.html"/>
    <id>https://blog.cilicili.xyz/posts/4070eb25.html</id>
    <published>2022-09-06T13:06:54.000Z</published>
    <updated>2022-09-09T12:14:38.965Z</updated>
    
    <content type="html"><![CDATA[<h1>Vue æ ¸å¿ƒåŸºç¡€</h1><p><a href="https://cn.vuejs.org/">å®˜ç½‘ä¼ é€é—¨</a></p><blockquote><p>Vue æ˜¯åŠ¨æ€æ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼ JavaScript æ¡†æ¶</p><p>Vue å€Ÿé‰´ Angular çš„æ¨¡æ¿å’Œæ•°æ®ç»‘å®šæŠ€æœ¯ï¼ŒReact çš„ç»„ä»¶åŒ–å’Œè™šæ‹Ÿ DOM æŠ€æœ¯</p></blockquote><h2 id="æ•°æ®é©±åŠ¨è§†å›¾">æ•°æ®é©±åŠ¨è§†å›¾</h2><h3 id="MVVMæ¨¡å‹">MVVMæ¨¡å‹</h3><ul><li>Mï¼šæ¨¡å‹<strong>Model</strong>ï¼Œ<code>data</code>ä¸­çš„æ•°æ®</li><li>Vï¼šè§†å›¾<strong>View</strong>ï¼Œæ¨¡æ¿ä»£ç </li><li>VMï¼šè§†å›¾æ¨¡å‹<strong>ViewModel</strong>ï¼Œ<code>Vueå®ä¾‹</code></li></ul><p>è§‚å¯Ÿå‘ç°</p><ul><li><code>data</code>ä¸­æ‰€æœ‰çš„å±æ€§ï¼Œæœ€åéƒ½å‡ºç°åœ¨äº†<code>vm</code>èº«ä¸Š</li><li><code>vm</code>èº«ä¸Šæ‰€æœ‰çš„å±æ€§åŠ<code>VueåŸå‹</code>èº«ä¸Šæ‰€æœ‰çš„å±æ€§ï¼Œåœ¨<code>Vueæ¨¡æ¿</code>ä¸­éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨</li></ul><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/1643097677438-36b4834c-18e8-4cd0-aa8e-c5f154e6bde0.jpeg" alt="img"></p><p>MVVMï¼šæ•°æ®é©±åŠ¨è§†å›¾ï¼Œå³é€šè¿‡ä¿®æ”¹è§†å›¾å°±èƒ½æ”¹å˜æ•°æ®ï¼Œåè¿‡æ¥ä¹Ÿå¯ä»¥ã€‚</p><p>æœ¬è´¨ï¼š<strong>äº‹ä»¶ + æ–¹æ³• + æ”¹å˜æ•°æ® = ViewModel</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> @<span class="attr">click</span>=<span class="string">&quot;changeName&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span>  // äº‹ä»¶</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123;   </span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;vue&#x27;</span>,</span><br><span class="line"><span class="attr">list</span>: [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>]</span><br><span class="line">&#125;</span><br><span class="line">&#125;  <span class="comment">// Model</span></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">changeName</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;åŒè¶Š&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;  <span class="comment">// æ–¹æ³•</span></span><br></pre></td></tr></table></figure><h2 id="æ•°æ®ä»£ç†">æ•°æ®ä»£ç†</h2><h3 id="Object-defineProperty-çš„ä½¿ç”¨">Object.defineProperty() çš„ä½¿ç”¨</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Vue&#x27;</span>,</span><br><span class="line">  <span class="attr">sex</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> number = <span class="number">19</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é…ç½®ä¸€</span></span><br><span class="line"><span class="comment">// å‚æ•°ï¼šå¯¹è±¡ã€å±æ€§åã€é…ç½®</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(person, <span class="string">&#x27;age&#x27;</span>, &#123;</span><br><span class="line">  <span class="comment">// å±æ€§å€¼</span></span><br><span class="line">  <span class="attr">value</span>: <span class="number">21</span>,</span><br><span class="line">  <span class="comment">// å±æ€§æ˜¯å¦å¯ä¿®æ”¹</span></span><br><span class="line">  <span class="attr">writable</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// å±æ€§æ˜¯å¦å¯æšä¸¾ï¼ˆéå†ï¼‰</span></span><br><span class="line">  <span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// å±æ€§æ˜¯å¦å¯åˆ é™¤</span></span><br><span class="line">  <span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(person)</span><br><span class="line"></span><br><span class="line"><span class="comment">// é…ç½®äºŒ</span></span><br><span class="line"><span class="comment">// getterã€setter ä¸èƒ½å’Œ valueã€writable åŒæ—¶æŒ‡å®š</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(person, <span class="string">&#x27;age&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">enumberable</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;age å±æ€§è¢«è¯»å–&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> number</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">set</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;age å±æ€§è¢«ä¿®æ”¹&#x27;</span>, value)</span><br><span class="line">    number = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="ä½•ä¸ºæ•°æ®ä»£ç†">ä½•ä¸ºæ•°æ®ä»£ç†</h3><p>æ•°æ®ä»£ç†ï¼šé€šè¿‡ä¸€ä¸ªå¯¹è±¡å¯¹å¦ä¸€ä¸ªå¯¹è±¡çš„å±æ€§è¿›è¡Œæ“ä½œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">a</span>: <span class="number">21</span> &#125;</span><br><span class="line"><span class="keyword">let</span> obj2 = &#123; <span class="attr">b</span>: <span class="number">10</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj2, <span class="string">&#x27;a&#x27;</span>, &#123;</span><br><span class="line">  <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> obj.<span class="property">a</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">set</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    obj.<span class="property">a</span> = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">obj2.<span class="property">a</span> <span class="comment">// 21</span></span><br><span class="line">obj2.<span class="property">a</span> = <span class="number">1000</span></span><br><span class="line">obj.<span class="property">a</span> <span class="comment">// 1000</span></span><br></pre></td></tr></table></figure><h3 id="Vue-ä¸­çš„æ•°æ®ä»£ç†">Vue ä¸­çš„æ•°æ®ä»£ç†</h3><p><img src= "/img/loading.gif" data-lazy-src="https://brucecai55520.gitee.io/bruceblog/assets/img/%E6%95%B0%E6%8D%AE%E4%BB%A3%E7%90%86.d776171e.png" alt="img"></p><p>Vue ä¸­é€šè¿‡ vm å®ä¾‹å¯¹è±¡ä»£ç†å¯¹ data å¯¹è±¡å±æ€§çš„æ“ä½œï¼Œè®©æˆ‘ä»¬æ›´æ–¹ä¾¿æ“ä½œ data ä¸­çš„æ•°æ®ã€‚</p><p>data ä¸­çš„æ•°æ®å®é™…ä¸Šè¢«å­˜åœ¨ <code>vm._data</code> å±æ€§ä¸Šï¼Œå¦‚æœä¸è¿›è¡Œä»£ç†ï¼Œä½¿ç”¨èµ·æ¥å¾ˆä¸æ–¹ä¾¿ã€‚</p><p>é€šè¿‡ <code>Object.defineProperty()</code> ç»™ vm æ·»åŠ å±æ€§ï¼Œå¹¶ä¸”æŒ‡å®š getter å’Œ setterï¼Œé€šè¿‡ getter å’Œ setter è®¿é—®å’Œä¿®æ”¹ data å¯¹åº”æ˜¯å±æ€§ã€‚</p><h2 id="Vue-ç›‘æµ‹æ•°æ®çš„åŸç†">Vue ç›‘æµ‹æ•°æ®çš„åŸç†</h2><blockquote><p>ç›‘æµ‹æ•°æ®ï¼Œå³ Vue æ˜¯å¦‚ä½•ç›‘å¬æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œä»è€Œé‡æ–°è§£ææ¨¡æ¿æ¸²æŸ“é¡µé¢çš„ã€‚Vue ä¼šç›‘æµ‹ data ä¸­æ‰€æœ‰å±‚çº§çš„æ•°æ®ã€‚</p></blockquote><h3 id="Vue-ç›‘æµ‹å¯¹è±¡æ•°æ®">Vue ç›‘æµ‹å¯¹è±¡æ•°æ®</h3><ul><li><p>åŸç†ï¼šé€šè¿‡ <code>Object.defineProperty()</code> ä¸ºå±æ€§æ·»åŠ  <code>getter</code>ã€<code>setter</code> ï¼Œå¯¹å±æ€§çš„è¯»å–ã€ä¿®æ”¹è¿›è¡Œæ‹¦æˆªï¼Œå³æ•°æ®åŠ«æŒ</p></li><li><p>å­˜åœ¨é—®é¢˜ï¼š</p><ul><li>å¯¹è±¡æ–°å¢åŠ çš„å±æ€§ï¼Œé»˜è®¤ä¸åšå“åº”å¼å¤„ç†</li><li>å¯¹è±¡åˆ é™¤å±æ€§ï¼Œä¹Ÿä¸æ˜¯å“åº”å¼çš„</li></ul></li><li><p>è§£å†³åŠæ³•ï¼Œä½¿ç”¨å¦‚ä¸‹ API ï¼š</p><ul><li><code>Vue.set(target, propertyName/index, value)</code></li><li><code>vm.$set(target, propertyName/index, value)</code></li><li><code>Vue.delete(target, propertyName/index)</code></li><li><code>vm.$delete(target, propertyName/index)</code></li></ul></li><li><p><code>Vue.set()</code> å’Œ <code>vm.$set()</code> ä¸èƒ½ç»™ vm æˆ– vm çš„æ ¹æ•°æ®å¯¹è±¡æ·»åŠ å±æ€§ï¼ˆå³ dataï¼‰</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç®€å•æ¨¡æ‹Ÿå®ç°å¯¹è±¡çš„æ•°æ®ç›‘æµ‹ï¼ŒVue æ›´å®Œå–„</span></span><br><span class="line"><span class="comment">// Vue é€šè¿‡ vm.name å³å¯ä¿®æ”¹</span></span><br><span class="line"><span class="comment">// Vue å®ç°æ·±å±‚ç›‘å¬</span></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Vue&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">99</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Observer</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> keys = <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj)</span><br><span class="line"></span><br><span class="line">  keys.<span class="title function_">forEach</span>(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="variable language_">this</span>, key, &#123;</span><br><span class="line">      <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> obj[key]</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="title function_">set</span>(<span class="params">value</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ•°æ®è¢«ä¿®æ”¹ï¼Œé‡æ–°è§£ææ¨¡æ¿...&#x27;</span>)</span><br><span class="line">        obj[key] = value</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> vm = &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> observer = <span class="keyword">new</span> <span class="title class_">Observer</span>(person)</span><br><span class="line">vm.<span class="property">_data</span> = observer</span><br></pre></td></tr></table></figure><h3 id="Vue-ç›‘æµ‹æ•°ç»„">Vue ç›‘æµ‹æ•°ç»„</h3><ul><li>åŸç†ï¼šé€šè¿‡é‡å†™æ•°ç»„çš„ API å®ç°æ‹¦æˆªï¼š<code>push()ã€pop()ã€shift()ã€unshift()ã€splice()ã€sort()ã€reverse()</code></li><li>7 ä¸ª API ä¹‹æ‰€ä»¥æ˜¯å“åº”å¼çš„ï¼Œæ˜¯å› ä¸º Vue å¯¹è¿™äº›æ–¹æ³•è¿›è¡Œäº†<a href="https://cn.vuejs.org/v2/guide/list.html#%E6%95%B0%E7%BB%84%E6%9B%B4%E6%96%B0%E6%A3%80%E6%B5%8B">åŒ…è£¹ </a>ï¼Œå³äºŒæ¬¡å°è£…ã€‚åšäº†ä¸¤ä»¶äº‹ï¼šè°ƒç”¨å¯¹åº”çš„åŸç”Ÿæ–¹æ³•æ›´æ–°æ•°ç»„ &amp; é‡æ–°è§£ææ¨¡æ¿æ›´æ–°é¡µé¢</li><li>å­˜åœ¨é—®é¢˜ï¼š<ul><li>ç›´æ¥é€šè¿‡æ•°ç»„ä¸‹æ ‡ä¿®æ”¹æ˜¯<a href="https://cn.vuejs.org/v2/guide/reactivity.html#%E5%AF%B9%E4%BA%8E%E6%95%B0%E7%BB%84">éå“åº”å¼çš„</a></li></ul></li><li>è§£å†³åŠæ³•ï¼š<ul><li>ä½¿ç”¨ 7 ä¸ª API ä¿®æ”¹æ•°ç»„</li><li><code>Vue.set()</code>ã€<code>vm.$set()</code></li><li><code>Vue.delete()</code>ã€<code>vm.$delete()</code></li></ul></li><li><a href="https://segmentfault.com/a/1190000015783546">æ€å¦æ–‡ç« </a></li></ul><h2 id="æ’å€¼è¯­æ³•">æ’å€¼è¯­æ³•</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>ç”¨æˆ·åï¼š&#123;&#123; username &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>å¯†ç &#123;&#123; password &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- &#123;&#123;&#125;&#125; æ”¯æŒç®€ JS è¡¨è¾¾å¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; flag ? 111 : 000&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;docsify&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="number">55520</span>,</span><br><span class="line">    <span class="attr">flag</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å±æ€§ç»‘å®šæŒ‡ä»¤-v-bind">å±æ€§ç»‘å®šæŒ‡ä»¤ v-bind</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-bind:placeholder</span>=<span class="string">&quot;desc&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- v-bind ç®€å†™å½¢å¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;url&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;è¿™æ˜¯ä¸€å¼ å›¾ç‰‡&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- v-bind æ”¯æŒ JS è¡¨è¾¾å¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:id</span>=<span class="string">&quot;&#x27;hello&#x27; + 1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">desc</span>: <span class="string">&#x27;è¯·è¾“å…¥ç”¨æˆ·å&#x27;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;www.baidu.com&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åŒå‘ç»‘å®šæŒ‡ä»¤-v-model">åŒå‘ç»‘å®šæŒ‡ä»¤ v-model</h2><p><code>v-model</code> ç”¨äºè¡¨å•å…ƒç´ å¦‚ <code>input</code>ï¼Œ<code>textarea</code>ï¼Œ<code>select</code> ã€‚</p><h3 id="v-model-åŸºç¡€ç”¨æ³•">v-model åŸºç¡€ç”¨æ³•</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; username &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model:value</span>=<span class="string">&quot;username&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;username&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; province &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">v-model</span>=<span class="string">&quot;province&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>è¯·é€‰æ‹©<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span>åŒ—äº¬<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>&gt;</span>ä¸Šæµ·<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;3&quot;</span>&gt;</span>å¹¿å·<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="v-model-æŒ‡ä»¤ä¿®é¥°ç¬¦">v-model æŒ‡ä»¤ä¿®é¥°ç¬¦</h3><table><thead><tr><th>ä¿®é¥°ç¬¦</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>.number</td><td>å°†ç”¨æˆ·è¾“å…¥è½¬ä¸ºæ•°å€¼ç±»å‹</td><td><code>&lt;input v-model.number=&quot;age&quot; /&gt;</code></td></tr><tr><td>.trim</td><td>åˆ é™¤è¾“å…¥çš„é¦–å°¾ç©ºç™½å­—ç¬¦</td><td><code>&lt;input v-model.trim=&quot;msg&quot;&gt;</code></td></tr><tr><td>.lazy</td><td>å½“å¤±å»ç„¦ç‚¹æ—¶ï¼Œæ‰æ›´æ–°æ•°æ®ï¼Œç±»ä¼¼é˜²æŠ–</td><td><code>&lt;input v-model.lazy=&quot;msg&quot;&gt;</code></td></tr></tbody></table><h3 id="v-model-æ”¶é›†è¡¨å•æ•°æ®">v-model æ”¶é›†è¡¨å•æ•°æ®</h3><ul><li><p><code>&lt;input type=&quot;text&quot;/&gt;</code> ï¼Œæ”¶é›†çš„æ˜¯ <code>value</code> å€¼ï¼Œç”¨æˆ·è¾“å…¥çš„å°±æ˜¯ <code>value</code> å€¼ã€‚</p></li><li><p><code>&lt;input type=&quot;radio&quot;/&gt;</code> ï¼Œæ”¶é›†çš„æ˜¯ <code>value</code> å€¼ï¼Œä¸”è¦ç»™æ ‡ç­¾é…ç½® <code>value</code> å€¼ã€‚</p></li><li><p><code>&lt;input type=&quot;checkbox&quot;/&gt;</code></p><ul><li>æ²¡æœ‰é…ç½® <code>value</code> å±æ€§ï¼Œæ”¶é›†çš„å°±æ˜¯ <code>checked</code></li><li>é…ç½®äº† valueå±æ€§:<ul><li><code>v-model</code> çš„åˆå§‹å€¼æ˜¯éæ•°ç»„ï¼Œé‚£ä¹ˆæ”¶é›†çš„å°±æ˜¯ <code>checked</code></li><li><code>v-model</code> çš„åˆå§‹å€¼æ˜¯æ•°ç»„ï¼Œé‚£ä¹ˆæ”¶é›†çš„çš„å°±æ˜¯ <code>value</code> ç»„æˆçš„æ•°ç»„</li></ul></li></ul></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">form</span> @<span class="attr">submit.prevent</span>=<span class="string">&quot;demo&quot;</span>&gt;</span></span><br><span class="line">    è´¦å·ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model.trim</span>=<span class="string">&quot;userInfo.account&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.password&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    å¹´é¾„ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model.number</span>=<span class="string">&quot;userInfo.age&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    æ€§åˆ«ï¼š ç”·<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;male&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    å¥³<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;female&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    çˆ±å¥½ï¼š å­¦ä¹ <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;study&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    æ‰“æ¸¸æˆ<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;game&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    åƒé¥­<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;eat&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    æ‰€å±æ ¡åŒº</span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.city&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>è¯·é€‰æ‹©æ ¡åŒº<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;beijing&quot;</span>&gt;</span>åŒ—äº¬<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;shanghai&quot;</span>&gt;</span>ä¸Šæµ·<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;shenzhen&quot;</span>&gt;</span>æ·±åœ³<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;wuhan&quot;</span>&gt;</span>æ­¦æ±‰<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    å…¶ä»–ä¿¡æ¯ï¼š</span><br><span class="line">    <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">v-model.lazy</span>=<span class="string">&quot;userInfo.other&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.agree&quot;</span> /&gt;</span>é˜…è¯»æ¥å—åè®®</span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>æäº¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">userInfo</span>:&#123;</span><br><span class="line">      <span class="attr">account</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="attr">password</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">      <span class="attr">sex</span>:<span class="string">&#x27;female&#x27;</span>,</span><br><span class="line">      <span class="attr">hobby</span>:[],</span><br><span class="line">      <span class="attr">city</span>:<span class="string">&#x27;beijing&#x27;</span>,</span><br><span class="line">      <span class="attr">other</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="attr">agree</span>:<span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">demo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">userInfo</span>))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äº‹ä»¶ç»‘å®šæŒ‡ä»¤-v-on">äº‹ä»¶ç»‘å®šæŒ‡ä»¤ v-on</h2><h3 id="v-on-åŸºç¡€ç”¨æ³•">v-on åŸºç¡€ç”¨æ³•</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>countçš„å€¼ï¼š&#123;&#123; count &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;add&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- v-on ç¼©å†™å½¢å¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;add&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">add</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">count</span>++</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="äº‹ä»¶å‚æ•°å¯¹è±¡">äº‹ä»¶å‚æ•°å¯¹è±¡</h3><p>å¦‚æœäº‹ä»¶å¤„ç†å‡½æ•°æ²¡æœ‰ä¼ å‚ï¼Œåˆ™é»˜è®¤ä¼šä¼ ä¸€ä¸ªæ—¶é—´å‚æ•°å¯¹è±¡ <code>$event</code> ï¼Œé€šè¿‡å®ƒå¯ä»¥è·å–è§¦å‘äº‹ä»¶çš„å…ƒç´ ï¼Œå¹¶è¿›è¡Œç›¸å…³æ“ä½œã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">add</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    e.<span class="property">target</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">count</span>++</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœäº‹ä»¶å¤„ç†å‡½æ•°ä¼ é€’å‚æ•°äº†ï¼Œåˆ™é»˜è®¤çš„ <code>$event</code> ä¼šè¢«è¦†ç›–ï¼Œéœ€è¦æ‰‹åŠ¨è¿›è¡Œä¼ é€’ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;add(2, $event)&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">add</span>(<span class="params">step, e</span>) &#123;</span><br><span class="line">    e.<span class="property">target</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">count</span> += step</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="äº‹ä»¶ä¿®é¥°ç¬¦">äº‹ä»¶ä¿®é¥°ç¬¦</h3><table><thead><tr><th>äº‹ä»¶ä¿®é¥°ç¬¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>.prevent</strong></td><td>é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Œå¦‚ a é“¾æ¥è·³è½¬ã€è¡¨å•æäº¤</td></tr><tr><td><strong>.stop</strong></td><td>é˜»æ­¢äº‹ä»¶å†’æ³¡</td></tr><tr><td>.once</td><td>ç»‘å®šçš„äº‹ä»¶åªè§¦å‘ 1 æ¬¡</td></tr><tr><td>.capture</td><td>ä»¥æ•è·æ¨¡å¼è§¦å‘äº‹ä»¶å¤„ç†å‡½æ•°</td></tr><tr><td>.self</td><td>åªæœ‰åœ¨ <code>event.target</code> æ˜¯å½“å‰å…ƒç´ è‡ªèº«æ—¶è§¦å‘äº‹ä»¶å¤„ç†å‡½æ•°</td></tr><tr><td>.passive</td><td>äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºç«‹å³æ‰§è¡Œï¼Œæ— éœ€ç­‰å¾…äº‹ä»¶å›è°ƒæ‰§è¡Œå®Œæ¯•</td></tr></tbody></table><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;www.baidu.com&quot;</span> @<span class="attr">click.prevent</span>=<span class="string">&quot;fn&quot;</span>&gt;</span>é˜»æ­¢é“¾æ¥è·³è½¬<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> @<span class="attr">click.stop</span>=<span class="string">&quot;handleClick&quot;</span>&gt;</span>é˜»æ­¢äº‹ä»¶å†’æ³¡<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- .passive ï¼šå¦‚ `onwheel` é¼ æ ‡æ»šè½®äº‹ä»¶ï¼Œæ˜¯å…ˆæ‰§è¡Œäº‹ä»¶çš„å›è°ƒå†è¿›è¡Œæ»šåŠ¨ã€‚ --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¦‚æœå›è°ƒæ¯”è¾ƒè€—æ—¶ï¼Œé‚£ä¹ˆä¼šç­‰ä¸€æ®µæ—¶é—´æ‰å‘ç”Ÿæ»šåŠ¨ã€‚ æ·»åŠ  .passive åï¼Œåˆ™å…ˆè¿›è¡Œæ»šåŠ¨å†æ‰§è¡Œå›è°ƒã€‚--&gt;</span></span><br></pre></td></tr></table></figure><h3 id="æŒ‰é”®ä¿®é¥°ç¬¦">æŒ‰é”®ä¿®é¥°ç¬¦</h3><ol><li>Vue ä¸­å¸¸ç”¨çš„æŒ‰é”®åˆ«åï¼š</li></ol><ul><li>å›è½¦ =&gt; enter</li><li>åˆ é™¤ =&gt; delete (æ•è·â€œåˆ é™¤â€å’Œâ€œé€€æ ¼â€é”®)</li><li>é€€å‡º =&gt; esc</li><li>ç©ºæ ¼ =&gt; space</li><li>æ¢è¡Œ =&gt; tab (ç‰¹æ®Šï¼Œå¿…é¡»é…åˆ keydown å»ä½¿ç”¨)</li><li>ä¸Š =&gt; up</li><li>ä¸‹ =&gt; down</li><li>å·¦ =&gt; left</li><li>å³ =&gt; right</li></ul><ol start="3"><li><p>Vue æœªæä¾›åˆ«åçš„æŒ‰é”®ï¼Œå¯ä»¥ä½¿ç”¨æŒ‰é”®åŸå§‹çš„ <code>key</code> å€¼å»ç»‘å®šï¼Œä½†æ³¨æ„è¦è½¬ä¸º kebab-caseï¼ˆçŸ­æ¨ªçº¿å‘½åï¼‰</p></li><li><p>ç³»ç»Ÿä¿®é¥°é”®ï¼ˆç”¨æ³•ç‰¹æ®Šï¼‰ï¼šctrlã€altã€shiftã€metaï¼ˆå³ win é”®ï¼‰</p></li></ol><ul><li>é…åˆ keyup ä½¿ç”¨ï¼šæŒ‰ä¸‹ä¿®é¥°é”®çš„åŒæ—¶ï¼Œå†æŒ‰ä¸‹å…¶ä»–é”®ï¼Œéšåé‡Šæ”¾å…¶ä»–é”®ï¼Œäº‹ä»¶æ‰è¢«è§¦å‘ã€‚</li><li>é…åˆ keydown ä½¿ç”¨ï¼šæ­£å¸¸è§¦å‘äº‹ä»¶ã€‚</li></ul><ol start="5"><li><p>å¯ä½¿ç”¨ keyCode å»æŒ‡å®šå…·ä½“çš„æŒ‰é”®ï¼Œæ­¤æ³•ä¸æ¨èï¼Œå› ä¸º keyCode ä»¥åå¯èƒ½åºŸé™¤</p></li><li><p><code>Vue.config.keyCodes.è‡ªå®šä¹‰é”®å = é”®ç </code> ï¼Œå¯ä»¥å»å®šåˆ¶æŒ‰é”®åˆ«å</p></li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">keyup.enter</span>=<span class="string">&quot;submit&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">keyup.esc</span>=<span class="string">&quot;back&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">keydown.tab</span>=<span class="string">&quot;showInfo&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">keyup.caps-lock</span>=<span class="string">&quot;showInfo&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">keyup.huiche</span>=<span class="string">&quot;showInfo&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">keyup.13</span>=<span class="string">&quot;showInfo&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">  Vue.config.keyCodes.huiche = 13</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="æ¡ä»¶æ¸²æŸ“æŒ‡ä»¤">æ¡ä»¶æ¸²æŸ“æŒ‡ä»¤</h2><h3 id="åŸºç¡€ç”¨æ³•">åŸºç¡€ç”¨æ³•</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">&quot;status === 200&quot;</span>&gt;</span>success<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-else-if</span>=<span class="string">&quot;status === 201&quot;</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-else</span>&gt;</span>yyy<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-show</span>=<span class="string">&quot;status === 404&quot;</span>&gt;</span>error<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- template åªèƒ½å’Œ v-if æ­é…ä½¿ç”¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">&quot;status === 200&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>111<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>222<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>333<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="v-if-å’Œ-v-show-çš„åŒºåˆ«">v-if å’Œ v-show çš„åŒºåˆ«</h3><p>å®ç°åŸç†ä¸åŒï¼š</p><ul><li><code>v-if</code> é€šè¿‡åˆ›å»ºæˆ–åˆ é™¤ DOM å…ƒç´ æ¥æ§åˆ¶å…ƒç´ çš„æ˜¾ç¤ºä¸éšè—</li><li><code>v-show</code> é€šè¿‡æ·»åŠ æˆ–åˆ é™¤å…ƒç´ çš„ <code>style=&quot;display: none&quot;</code> æ ·å¼æ¥æ§åˆ¶å…ƒç´ çš„æ˜¾ç¤ºä¸éšè—</li></ul><p>æ€§èƒ½æ¶ˆè€—ä¸åŒï¼š</p><ul><li><code>v-if</code> åˆ‡æ¢å¼€é”€æ›´é«˜ï¼Œå¦‚æœè¿è¡Œæ—¶æ¡ä»¶å¾ˆå°‘æ”¹å˜ï¼Œä½¿ç”¨ <code>v-if</code> æ›´å¥½</li><li><code>v-show</code> åˆå§‹æ¸²æŸ“å¼€é”€æ›´é«˜ï¼Œå¦‚æœåˆ‡æ¢é¢‘ç¹ï¼Œä½¿ç”¨ <code>v-show</code> æ›´å¥½</li></ul><h2 id="åˆ—è¡¨æ¸²æŸ“æŒ‡ä»¤-v-for">åˆ—è¡¨æ¸²æŸ“æŒ‡ä»¤ v-for</h2><h3 id="åŸºæœ¬ç”¨æ³•">åŸºæœ¬ç”¨æ³•</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- éå†æ•°ç»„ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in list&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- éå†å¯¹è±¡ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(value, key) in obj&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;key&quot;</span>&gt;</span>&#123;&#123; key &#125;&#125; - &#123;&#123; value &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- éå†å­—ç¬¦ä¸² --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(char, index) in str&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span>&#123;&#123; index &#125;&#125; - &#123;&#123; char &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- éå†æ¬¡æ•° --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(number, index) in 5&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span>&#123;&#123; index &#125;&#125; - &#123;&#123; number &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">list</span>: [...],</span><br><span class="line">    <span class="attr">obj</span>: &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;Bruce&#x27;</span>,</span><br><span class="line">      <span class="attr">age</span>: <span class="number">88</span>,</span><br><span class="line">      <span class="attr">sex</span>: <span class="string">&#x27;unknown&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">str</span>: <span class="string">&#x27;hello vue&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="key-çš„ä½œç”¨">key çš„ä½œç”¨</h3><p><strong><code>key</code> çš„ä½œç”¨ï¼š</strong></p><ul><li>å½“åˆ—è¡¨çš„æ•°æ®å˜åŒ–æ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œvue ä¼šå°½å¯èƒ½çš„å¤ç”¨å·²å­˜åœ¨çš„ DOM å…ƒç´ ï¼Œä»è€Œæå‡æ¸²æŸ“çš„æ€§èƒ½ã€‚ä½†è¿™ç§é»˜è®¤çš„æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ï¼Œä¼šå¯¼è‡´æœ‰çŠ¶æ€çš„åˆ—è¡¨æ— æ³•è¢«æ­£ç¡®æ›´æ–°ã€‚</li><li>ä¸ºäº†ç»™ vue ä¸€ä¸ªæç¤ºï¼Œä»¥ä¾¿å®ƒèƒ½è·Ÿè¸ªæ¯ä¸ªèŠ‚ç‚¹çš„èº«ä»½ï¼Œä»è€Œåœ¨ä¿è¯æœ‰çŠ¶æ€çš„åˆ—è¡¨è¢«æ­£ç¡®æ›´æ–°çš„å‰æä¸‹ï¼Œæå‡æ¸²æŸ“çš„æ€§èƒ½ã€‚æ­¤æ—¶ï¼Œéœ€è¦ä¸ºæ¯é¡¹æä¾›ä¸€ä¸ªå”¯ä¸€çš„ key å±æ€§ã€‚</li><li><code>key</code> æ˜¯è™šæ‹Ÿ DOM å¯¹è±¡çš„æ ‡è¯†ï¼Œå¯æé«˜é¡µé¢æ›´æ–°æ¸²æŸ“çš„æ•ˆç‡ã€‚å½“æ•°æ®å˜åŒ–æ—¶ï¼ŒVue ä¼šæ ¹æ®æ–°æ•°æ®ç”Ÿæˆæ–°çš„è™šæ‹Ÿ DOMï¼Œéšåè¿›è¡Œæ–°æ—§è™šæ‹Ÿ DOM çš„å·®å¼‚æ¯”è¾ƒ</li></ul><p><strong>æ¯”è¾ƒè§„åˆ™</strong></p><ul><li>æ—§è™šæ‹Ÿ DOM æ‰¾åˆ°å’Œæ–°è™šæ‹Ÿ DOM ç›¸åŒçš„ keyï¼š<ul><li>è‹¥å†…å®¹æ²¡å˜ï¼Œç›´æ¥å¤ç”¨çœŸå® DOM</li><li>è‹¥å†…å®¹æ”¹å˜ï¼Œç”Ÿæˆæ–°çš„çœŸå® DOMï¼Œæ›¿æ¢æ—§çš„çœŸå® DOM</li></ul></li><li>æ—§è™šæ‹Ÿ DOM æœªæ‰¾åˆ°å’Œæ–°è™šæ‹Ÿ DOM ç›¸åŒçš„ keyï¼šåˆ›å»ºæ–°çš„çœŸå® DOMï¼Œæ¸²æŸ“åˆ°é¡µé¢</li></ul><p><strong><code>key</code> çš„æ³¨æ„äº‹é¡¹ï¼š</strong></p><ul><li>key çš„å€¼åªèƒ½æ˜¯<strong>å­—ç¬¦ä¸²</strong>æˆ–<strong>æ•°å­—</strong>ç±»å‹</li><li>key çš„å€¼å¿…é¡»å…·æœ‰å”¯ä¸€æ€§ï¼ˆå³ï¼škey çš„å€¼ä¸èƒ½é‡å¤ï¼‰</li><li>å»ºè®®æŠŠæ•°æ®é¡¹ id å±æ€§çš„å€¼ä½œä¸º key çš„å€¼ï¼ˆå› ä¸º id å±æ€§çš„å€¼å…·æœ‰å”¯ä¸€æ€§ï¼‰</li><li>ä½¿ç”¨ index çš„å€¼å½“ä½œ key çš„å€¼æ²¡æœ‰æ„ä¹‰ï¼ˆå› ä¸º index çš„å€¼ä¸å…·æœ‰å”¯ä¸€æ€§ï¼‰</li><li>å»ºè®®ä½¿ç”¨ v-for æŒ‡ä»¤æ—¶ä¸€å®šè¦æŒ‡å®š key çš„å€¼ï¼ˆæ—¢æå‡æ€§èƒ½ã€åˆé˜²æ­¢åˆ—è¡¨çŠ¶æ€ç´Šä¹±ï¼‰</li></ul><p><img src= "/img/loading.gif" data-lazy-src="https://brucecai55520.gitee.io/bruceblog/assets/img/key.2e34b3cc.png" alt="keyçš„ä½œç”¨"></p><h2 id="å…¶å®ƒå†…ç½®æŒ‡ä»¤">å…¶å®ƒå†…ç½®æŒ‡ä»¤</h2><h3 id="v-text">v-text</h3><p><code>v-text</code> æŒ‡ä»¤ä¼šè¦†ç›–å…ƒç´ é»˜è®¤å€¼ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-text</span>=<span class="string">&quot;username&quot;</span>&gt;</span>è¿™æ®µå†…å®¹ä¼šè¢«è¦†ç›–<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> &#123; <span class="attr">username</span>: <span class="string">&quot;Bruce&quot;</span> &#125; &#125;</span><br></pre></td></tr></table></figure><h3 id="v-html">v-html</h3><blockquote><p>v-html å­˜åœ¨å®‰å…¨é—®é¢˜ï¼Œå®¹æ˜“å¯¼è‡´ XSS æ”»å‡»</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-html</span>=<span class="string">&quot;desc&quot;</span>&gt;</span>åŸæœ¬å†…å®¹è¢«è¦†ç›–<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">desc</span>: <span class="string">&#x27;&lt;h1 style=&quot;color: red&quot;&gt;çº¢è‰²æ ‡é¢˜&lt;/h1&gt;&#x27;</span>ï¼Œ</span><br><span class="line">    <span class="attr">str</span>: <span class="string">&#x27;&lt;a href=&quot;http://www.baidu.com?&quot;+document.cookie&gt;å…„å¼Ÿæˆ‘æ‰¾åˆ°ä½ æƒ³è¦çš„èµ„æºäº†ï¼Œå¿«æ¥ï¼&lt;/a&gt;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="v-cloak">v-cloak</h3><ul><li>æœ¬è´¨æ˜¯ä¸€ä¸ªç‰¹æ®Šå±æ€§ï¼ŒVue å®ä¾‹åˆ›å»ºå®Œæ¯•å¹¶æ¥ç®¡å®¹å™¨åï¼Œä¼šåˆ é™¤ <code>v-cloak</code> å±æ€§</li><li>ä½¿ç”¨ CSS é…åˆ <code>v-cloak</code> å¯è§£å†³ç½‘é€Ÿæ…¢æ—¶é¡µé¢å±•ç¤º çš„é—®é¢˜</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[v-cloak]</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-cloak</span>&gt;</span>&#123;&#123; username &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="v-once">v-once</h3><ul><li><code>v-once</code> æ‰€åœ¨èŠ‚ç‚¹åˆæ¬¡æ¸²æŸ“åå°±æˆä¸ºé™æ€å†…å®¹</li><li>å³æ•°æ®å˜åŒ–ä¸ä¼šå¼•èµ· <code>v-once</code> æ‰€åœ¨èŠ‚ç‚¹å†…å®¹çš„æ›´æ–°ï¼Œå¯ç”¨äºä¼˜åŒ–æ€§èƒ½</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-once</span>&gt;</span>åˆæ¬¡çš„å†…å®¹ï¼š&#123;&#123; content &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>æœ€æ–°çš„å†…å®¹ï¼š&#123;&#123; content &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="v-pre">v-pre</h3><ul><li>è·³è¿‡æ‰€åœ¨èŠ‚ç‚¹çš„ç¼–è¯‘è¿‡ç¨‹</li><li>æ²¡æœ‰ä½¿ç”¨æ’å€¼è¯­æ³•ç­‰ç‰¹æ®Šè¯­æ³•çš„èŠ‚ç‚¹ï¼Œå¯ç”¨å…¶è·³è¿‡ç¼–è¯‘è¿‡ç¨‹ï¼ŒåŠ å¿«ç¼–è¯‘</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-pre</span>&gt;</span>Vue å†…ç½®æŒ‡ä»¤<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>ç”¨æˆ·åï¼š&#123;&#123; username &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="è¿‡æ»¤å™¨">è¿‡æ»¤å™¨</h2><ul><li>è¿‡æ»¤å™¨å¸¸ç”¨äºæ–‡æœ¬çš„æ ¼å¼åŒ–ï¼Œå¯ç”¨åœ¨æ’å€¼è¡¨è¾¾å¼å’Œ <code>v-bind</code> å±æ€§ç»‘å®šã€‚</li><li>è¿‡æ»¤å™¨åªåœ¨ <code>vue 2.x</code> å’Œ <code>vue 1.x</code> ä¸­æ”¯æŒï¼Œ<code>vue 3.x</code> åºŸå¼ƒäº†è¿‡æ»¤å™¨ï¼Œå®˜æ–¹å»ºè®®ä½¿ç”¨è®¡ç®—å±æ€§æˆ–æ–¹æ³•ä»£æ›¿è¿‡æ»¤å™¨ã€‚</li></ul><h3 id="åŸºæœ¬ä½¿ç”¨-v2">åŸºæœ¬ä½¿ç”¨</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åœ¨ JS è¡¨è¾¾å¼å°¾éƒ¨é€šè¿‡ç®¡é“ç¬¦è¿›è¡Œè°ƒç”¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; message | capitalize &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:id</span>=<span class="string">&quot;rawId | formatId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ç§æœ‰è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="attr">filters</span>: &#123;</span><br><span class="line">  <span class="title function_">capitalize</span>(<span class="params">str</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> str.<span class="title function_">charAt</span>(<span class="number">0</span>).<span class="title function_">toUpperCase</span>() + str.<span class="title function_">slice</span>(<span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨ main.js ä¸­å®šä¹‰å…¨å±€è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">filter</span>(<span class="string">&#x27;capitalize&#x27;</span>, <span class="function">(<span class="params">str</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> str.<span class="title function_">charAt</span>(<span class="number">0</span>).<span class="title function_">toUpperCase</span>() + str.<span class="title function_">slice</span>(<span class="number">1</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å¦‚æœç§æœ‰è¿‡æ»¤å™¨å’Œå…¨å±€è¿‡æ»¤å™¨å†²çªï¼ŒæŒ‰ç…§å°±è¿‘åŸåˆ™è°ƒç”¨ç§æœ‰è¿‡æ»¤å™¨ã€‚</p><h3 id="è¿ç»­è°ƒç”¨å¤šä¸ªè¿‡æ»¤å™¨">è¿ç»­è°ƒç”¨å¤šä¸ªè¿‡æ»¤å™¨</h3><p>è¿‡æ»¤å™¨ä»å·¦å¾€å³è°ƒç”¨ï¼Œå‰ä¸€ä¸ªè¿‡æ»¤å™¨çš„ç»“æœäº¤ç»™ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨ç»§ç»­å¤„ç†ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; text | capitalize | maxLength &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="è¿‡æ»¤å™¨ä¼ å‚">è¿‡æ»¤å™¨ä¼ å‚</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; message | myFilter(arg1, arg2) &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ°¸è¿œéƒ½æ˜¯ç®¡é“ç¬¦å‰çš„å€¼</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">filter</span>(<span class="string">&#x27;myFilter&#x27;</span>, <span class="function">(<span class="params">value, arg1, arg2</span>) =&gt;</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="computed-è®¡ç®—å±æ€§">computed è®¡ç®—å±æ€§</h2><ul><li>å®šä¹‰ï¼šä½¿ç”¨çš„å±æ€§ä¸å­˜åœ¨ï¼Œè¦é€šè¿‡å·²æœ‰å±æ€§è®¡ç®—å¾—åˆ°</li><li>åŸç†ï¼šåº•å±‚ä½¿ç”¨äº† <code>Object.defineProperty()</code> æä¾›çš„ getter å’Œ setter</li><li>getter ä½•æ—¶æ‰§è¡Œï¼š<ul><li>åˆæ¬¡è¯»å–æ—¶æ‰§è¡Œä¸€æ¬¡</li><li>ä¾èµ–çš„æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶æ‰§è¡Œ</li></ul></li><li>ä¼˜ç‚¹ï¼šä¸ <code>methods</code> ç›¸æ¯”ï¼Œæœ‰ç¼“å­˜æœºåˆ¶ï¼Œæ•ˆç‡æ›´é«˜</li><li>è‹¥è®¡ç®—å±æ€§è¦ä¿®æ”¹ï¼Œå¿…é¡»å£°æ˜ setter å“åº”ä¿®æ”¹ï¼Œä¸” setter ä¸­è¦å¼•èµ·ä¾èµ–çš„æ•°æ®å‘ç”Ÿæ”¹å˜</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; fullName &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®Œæ•´å†™æ³•</span></span><br><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">  <span class="attr">fullName</span>: &#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// è®¡ç®—å±æ€§ä¾èµ–äºå·²æœ‰å±æ€§å¾—åˆ°</span></span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span> + <span class="variable language_">this</span>.<span class="property">lastName</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">value</span>) &#123;</span><br><span class="line">      <span class="comment">// setter ä¸­è¦å¼•èµ·ä¾èµ–æ•°æ®çš„å˜åŒ–</span></span><br><span class="line">      <span class="keyword">const</span> arr = value.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">firstName</span> = arr[<span class="number">0</span>]</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">lastName</span> = arr[<span class="number">1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®€å†™å½¢å¼</span></span><br><span class="line"><span class="comment">// åªæœ‰æ˜ç¡®è®¡ç®—å±æ€§ä¸éœ€è¦è¢«ä¿®æ”¹æ—¶ï¼Œæ‰èƒ½ç”¨ç®€å†™å½¢å¼ï¼Œå³æ²¡æœ‰ setter</span></span><br><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">  <span class="title function_">fullName</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="variable language_">this</span>.<span class="property">lastName</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="watch-ä¾¦å¬å™¨">watch ä¾¦å¬å™¨</h2><p><code>watch</code> ä¾¦å¬å™¨å…è®¸å¼€å‘è€…ç›‘è§†æ•°æ®çš„å˜åŒ–ï¼Œé’ˆå¯¹æ•°æ®çš„å˜åŒ–åšç‰¹å®šçš„æ“ä½œã€‚</p><blockquote><p>ä¾¦å¬å™¨å¯ä»¥ç›‘å¬æ™®é€šå±æ€§å’Œè®¡ç®—å±æ€§</p><p><code>computed</code> èƒ½å®Œæˆçš„åŠŸèƒ½ï¼Œ<code>watch</code> ä¹Ÿèƒ½</p><p><code>watch</code> èƒ½å®Œæˆçš„åŠŸèƒ½ï¼Œ<code>computed</code> ä¸ä¸€å®šï¼Œå¦‚å¼‚æ­¥æ“ä½œ</p></blockquote><ul><li>Vue ç®¡ç†çš„å‡½æ•°å†™æˆæ™®é€šå‡½æ•°ï¼Œä½¿å…¶ <code>this</code> æŒ‡å‘ vue å®ä¾‹å¯¹è±¡</li><li>ä¸è¢« Vue ç®¡ç†çš„å‡½æ•°å†™æˆç®­å¤´å‡½æ•°ï¼ˆå®šæ—¶å™¨å›è°ƒã€<code>ajax</code> å›è°ƒã€<code>Promise</code> å›è°ƒï¼‰ï¼Œè¿™æ ·å…¶ <code>this</code> æ‰æ˜¯ vue å®ä¾‹å¯¹è±¡</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// watch ç®€å†™å½¢å¼</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="title function_">username</span>(<span class="params">newVal, oldVal</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ–°å€¼: &#x27;</span>, newVal)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ—§å€¼: &#x27;</span>, oldVal)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œç»„ä»¶åœ¨åˆæ¬¡åŠ è½½å®Œæ¯•åä¸ä¼šè°ƒç”¨ <code>watch</code> ä¾¦å¬å™¨ã€‚å¦‚æœæƒ³è®© <code>watch</code> ä¾¦å¬å™¨ç«‹å³è¢«è°ƒç”¨ï¼Œéœ€è¦ä½¿ç”¨ <code>immediate</code> é€‰é¡¹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">watch</span>: &#123;</span><br><span class="line">  <span class="comment">// å¯¹è±¡å½¢å¼çš„ä¾¦å¬å™¨</span></span><br><span class="line">  <span class="attr">username</span>: &#123;</span><br><span class="line">    <span class="comment">// handler å±æ€§æ˜¯å›ºå®šå†™æ³•</span></span><br><span class="line">    <span class="title function_">handler</span>(<span class="params">newVal, oldVal</span>) &#123;</span><br><span class="line">      ...</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">immediate</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ <code>watch</code> ä¾¦å¬çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœå¯¹è±¡ä¸­çš„å±æ€§å€¼å‘ç”Ÿäº†å˜åŒ–ï¼Œåˆ™æ— æ³•è¢«ç›‘å¬åˆ°ã€‚æ­¤æ—¶éœ€è¦ä½¿ç”¨ <code>deep</code> é€‰é¡¹è¿›è¡Œ<strong>æ·±åº¦ç›‘å¬</strong>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">info</span>: &#123; <span class="attr">username</span>: <span class="string">&#x27;admin&#x27;</span> &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="attr">info</span>: &#123;</span><br><span class="line">      <span class="title function_">handler</span>(<span class="params">newVal</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(newVal)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">deep</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è‹¥åªæƒ³ç›‘å¬å¯¹è±¡é‡Œå•ä¸ªå±æ€§çš„å˜åŒ–ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">info</span>: &#123; <span class="attr">username</span>: <span class="string">&#x27;admin&#x27;</span> &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="comment">// è®°å¾—åŠ å¼•å·</span></span><br><span class="line">    <span class="string">&#x27;info.username&#x27;</span>: &#123;</span><br><span class="line">      <span class="title function_">handler</span>(<span class="params">newVal</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(newVal)</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ Vue å®ä¾‹çš„ <code>$watch</code> ç›‘å¬ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;...&#125;)</span><br><span class="line"></span><br><span class="line">vm.$watch(<span class="string">&#x27;isHot&#x27;</span>,&#123;</span><br><span class="line">  <span class="attr">immediate</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">deep</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="title function_">handler</span>(<span class="params">newValue,oldValue</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue, oldValue)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">vm.$watch(<span class="string">&#x27;isHot&#x27;</span>,<span class="keyword">function</span>(<span class="params">newValue,oldValue</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue, oldValue)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="åŠ¨æ€ç»‘å®š-class-å’Œ-style">åŠ¨æ€ç»‘å®š class å’Œ style</h2><p>é€šè¿‡åŠ¨æ€ç»‘å®š <code>class</code> å±æ€§å’Œè¡Œå†… <code>style</code> æ ·å¼ï¼Œå¯åŠ¨æ€æ“ä½œå…ƒç´ æ ·å¼ã€‚</p><h3 id="åŠ¨æ€ç»‘å®š-class-ç±»å">åŠ¨æ€ç»‘å®š class ç±»å</h3><ul><li>å­—ç¬¦ä¸²å†™æ³•ï¼šç±»åä¸ç¡®å®šï¼Œè¦åŠ¨æ€è·å–</li><li>å¯¹è±¡å†™æ³•ï¼šè¦ç»‘å®šå¤šä¸ªæ ·å¼ï¼Œä¸ªæ•°ä¸ç¡®å®šï¼Œåå­—ä¹Ÿä¸ç¡®å®š</li><li>æ•°ç»„å†™æ³•ï¼šè¦ç»‘å®šå¤šä¸ªæ ·å¼ï¼Œä¸ªæ•°ç¡®å®šï¼Œåå­—ä¹Ÿç¡®å®šï¼Œä½†ä¸ç¡®å®šç”¨ä¸ç”¨</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">  <span class="selector-class">.happy</span> &#123;</span><br><span class="line">    ...;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.sad</span> &#123;</span><br><span class="line">    ...;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;basic&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;mood&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeMood&quot;</span>&gt;</span>å­—ç¬¦ä¸²å†™æ³•<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;basic&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;arr&quot;</span>&gt;</span>æ•°ç»„å†™æ³•<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;basic&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;classObj&quot;</span>&gt;</span>å¯¹è±¡å†™æ³•<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">mood</span>: <span class="string">&#x27;happy&#x27;</span>,</span><br><span class="line">      <span class="attr">arr</span>: [<span class="string">&#x27;happy&#x27;</span>, <span class="string">&#x27;sad&#x27;</span>],</span><br><span class="line">      <span class="attr">classObj</span>: &#123;</span><br><span class="line">        <span class="attr">happy</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">sad</span>: <span class="literal">false</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">changeMood</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">mood</span> = <span class="string">&#x27;sad&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åŠ¨æ€ç»‘å®š-style-æ ·å¼">åŠ¨æ€ç»‘å®š style æ ·å¼</h3><p><code>css</code> å±æ€§åæ—¢å¯ä»¥ç”¨é©¼å³°å½¢å¼ï¼Œä¹Ÿèƒ½ç”¨çŸ­æ¨ªçº¿å½¢å¼ï¼ˆéœ€è¦ä½¿ç”¨å¼•å·æ‹¬èµ·æ¥ï¼‰ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;color: active, fontSize: fsize + &#x27;px&#x27;, &#x27;background-color&#x27;: bgcolor&#125;&quot;</span>&gt;</span>å¯¹è±¡å†™æ³•<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">&quot;styleObj&quot;</span>&gt;</span>å¯¹è±¡å†™æ³•<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">&quot;[styleObj, styleObj2]&quot;</span>&gt;</span>æ•°ç»„å†™æ³•ï¼ˆç”¨å¾—å°‘ï¼‰<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">active</span>: <span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">    <span class="attr">fsize</span>: <span class="number">30</span>,</span><br><span class="line">    <span class="attr">bgcolor</span>: <span class="string">&#x27;yellow&#x27;</span>,</span><br><span class="line">    <span class="attr">styleObj</span>: &#123;</span><br><span class="line">      <span class="attr">color</span>: <span class="string">&#x27;active&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;font-size&#x27;</span>: <span class="string">&#x27;20px&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">styleObj2</span>: &#123;</span><br><span class="line">      <span class="attr">backgroundColor</span>: <span class="string">&#x27;yellow&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="vue-ç”Ÿå‘½å‘¨æœŸ">vue ç”Ÿå‘½å‘¨æœŸ</h2><p>vue ç”Ÿå‘½å‘¨æœŸæ˜¯æŒ‡ä¸€ä¸ªç»„ä»¶ä»åˆ›å»ºã€è¿è¡Œã€é”€æ¯çš„æ•´ä¸ªè¿‡ç¨‹ã€‚æ¯ä¸ªé˜¶æ®µå¯¹åº”ç€ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚</p><p>ç”Ÿå‘½å‘¨æœŸé’©å­ä¹Ÿå¯ç†è§£ä¸ºï¼šVue åœ¨ç‰¹å®šçš„æ—¶åˆ»è°ƒç”¨ç‰¹å®šçš„å‡½æ•°ã€‚</p><p>é™¤äº†å›¾ä¸­ 8 ä¸ªé’©å­ï¼Œè¿˜æœ‰ <code>nextTick</code>ï¼Œ<code>activated</code>ï¼Œ<code>deactivated</code></p><p>å…³äºé”€æ¯è¿‡ç¨‹ï¼š</p><ul><li>é”€æ¯åå€ŸåŠ© Vue å¼€å‘è€…å·¥å…·çœ‹ä¸åˆ°ä»»ä½•ä¿¡æ¯ã€‚</li><li>é”€æ¯åè‡ªå®šä¹‰äº‹ä»¶ä¼šå¤±æ•ˆï¼Œä½†åŸç”Ÿ DOM äº‹ä»¶ä¾ç„¶æœ‰æ•ˆã€‚</li><li>ä¸€èˆ¬ä¸åœ¨ <code>beforeDestroy</code> æ“ä½œæ•°æ®ï¼Œå› ä¸ºå³ä¾¿æ“ä½œæ•°æ®ï¼Œä¹Ÿä¸ä¼šå†è§¦å‘æ›´æ–°æµç¨‹</li></ul><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/lifecycle2.6eba8c66.png" alt="ç”Ÿå‘½å‘¨æœŸå›¾2"> <img src= "/img/loading.gif" data-lazy-src="https://brucecai55520.gitee.io/bruceblog/assets/img/lifecycle.e6900649.png" alt="ç”Ÿå‘½å‘¨æœŸå›¾"></p><h1>Vue ç»„ä»¶åŒ–ç¼–ç¨‹</h1><blockquote><p>ç»„ä»¶ï¼šå®ç°åº”ç”¨å±€éƒ¨åŠŸèƒ½ä»£ç å’Œèµ„æºçš„é›†åˆ</p></blockquote><h2 id="éå•æ–‡ä»¶ç»„ä»¶">éå•æ–‡ä»¶ç»„ä»¶</h2><p>éå•æ–‡ä»¶ç»„ä»¶å³æ‰€æœ‰ç»„ä»¶å†™åœ¨åŒä¸€ä¸ªæ–‡ä»¶é‡Œã€‚</p><h3 id="åŸºæœ¬ä½¿ç”¨-v3">åŸºæœ¬ä½¿ç”¨</h3><p>å®šä¹‰ç»„ä»¶ï¼š</p><ul><li>ä½¿ç”¨<code>Vue.extend(options)</code>åˆ›å»ºï¼Œå’Œ<code>new Vue(options)</code>çš„åŒºåˆ«<ul><li><code>el</code> ä¸å†™ï¼Œæœ€ç»ˆæ‰€æœ‰çš„ç»„ä»¶éƒ½è¦ç»è¿‡ vm çš„ç®¡ç†ï¼Œç”± vm çš„ <code>el</code> å†³å®šæœåŠ¡å“ªä¸ªå®¹å™¨</li><li><code>data</code> å¿…é¡»å†™æˆå‡½æ•°ï¼Œé¿å…ç»„ä»¶è¢«å¤ç”¨æ—¶ï¼Œæ•°æ®å­˜åœ¨å¼•ç”¨å…³ç³»</li><li>ä½¿ç”¨ <code>template</code> èŠ‚ç‚¹å¯é…ç½®ç»„ä»¶ç»“æ„</li></ul></li></ul><p>æ³¨å†Œç»„ä»¶ï¼›</p><ul><li>å±€éƒ¨æ³¨å†Œï¼š<code>components</code> é€‰é¡¹</li><li>å…¨å±€æ³¨å†Œï¼š<code>Vue.component('ç»„ä»¶å',ç»„ä»¶)</code></li></ul><p>ä½¿ç”¨ç»„ä»¶ï¼š<code>&lt;school&gt;&lt;/school&gt;</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">hello</span>&gt;</span><span class="tag">&lt;/<span class="name">hello</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">school</span>&gt;</span><span class="tag">&lt;/<span class="name">school</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»º student ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> student = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">      &lt;h2&gt;å­¦ç”Ÿå§“åï¼š&#123;&#123;studentName&#125;&#125;&lt;/h2&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">studentName</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»º hello ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> hello = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">      &lt;h2&gt;&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;Tom&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»º school ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> school = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;school&#x27;</span>,</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">      &lt;h2&gt;å­¦æ ¡åç§°ï¼š&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span></span><br><span class="line"><span class="string">      &lt;student&gt;&lt;/student&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;åŒ—äº¬å¤§å­¦&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ç»„ä»¶åµŒå¥—</span></span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    student,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨å±€æ³¨å†Œ</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;hello&#x27;</span>, hello)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">  <span class="comment">// å±€éƒ¨æ³¨å†Œ</span></span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    school,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>æ³¨æ„äº‹é¡¹ï¼š</p><ol><li>ç»„ä»¶å</li></ol><ul><li>ä¸€ä¸ªå•è¯ï¼šschool, School</li><li>å¤šä¸ªå•è¯ï¼šmy-school, MySchool(éœ€è¦ vue-cli æ”¯æŒ)</li></ul><ol start="2"><li>ä½¿ç”¨ç»„ä»¶</li></ol><ul><li><code>&lt;school&gt;&lt;/school&gt;</code></li><li><code>&lt;school /&gt;</code> (éœ€è¦ vue-cli æ”¯æŒ)</li></ul><ol start="3"><li><code>const school = Vue.extend(options)</code> å¯ç®€å†™ä¸º <code>const school = options</code>ã€‚è¿™æ˜¯è„šæ‰‹æ¶é‡Œ <code>&lt;script&gt;</code> ä»£ç çš„ç®€å†™æ¥æºã€‚</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">HelloWorld</span> <span class="keyword">from</span> <span class="string">&#x27;./components/HelloWorld.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="title class_">HelloWorld</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®Œæ•´å†™æ³•</span></span><br><span class="line"><span class="keyword">const</span> vc = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="title class_">HelloWorld</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> vc</span><br></pre></td></tr></table></figure><h3 id="å…³äº-VueComponent-æ„é€ å‡½æ•°">å…³äº VueComponent æ„é€ å‡½æ•°</h3><ol><li>ç»„ä»¶æœ¬è´¨æ˜¯ä¸€ä¸ªåä¸º <code>VueComponent</code> çš„æ„é€ å‡½æ•°ï¼Œä¸æ˜¯ç¨‹åºå‘˜å®šä¹‰çš„ï¼Œæ˜¯ <code>Vue.extend</code> ç”Ÿæˆçš„</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> school = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;...&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">dir</span>(school) <span class="comment">//Æ’ VueComponent (options)</span></span><br></pre></td></tr></table></figure><ol start="2"><li><p>ä½¿ç”¨ç»„ä»¶æ—¶ï¼ŒVue è‡ªåŠ¨åˆ›å»ºç»„ä»¶å®ä¾‹å¯¹è±¡ï¼Œå³ <code>new VueComponent(options)</code> æ˜¯ Vue åšçš„</p></li><li><p>æ¯æ¬¡è°ƒç”¨ <code>Vue.extend</code>ï¼Œè¿”å›çš„éƒ½æ˜¯ä¸€ä¸ªå…¨æ–°çš„ <code>VueComponent</code> æ„é€ å‡½æ•°</p></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> school = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;...&#125;)</span><br><span class="line"><span class="keyword">const</span> student = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;...&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(school === student) <span class="comment">// false</span></span><br></pre></td></tr></table></figure><ol start="4"><li><p>ç»„ä»¶çš„ <code>this</code> æŒ‡å‘ <code>VueComponent</code> å®ä¾‹å¯¹è±¡ï¼Œè€Œé Vue å®ä¾‹å¯¹è±¡</p></li><li><p>é‡è¦çš„å†…ç½®å…³ç³»ï¼š<code>VueComponent.prototype.__proto__ === Vue.prototype</code> ï¼Œè¿™ä¸ªæ”¹åŠ¨ä½¿å¾—ç»„ä»¶å®ä¾‹å¯¹è±¡å¾—ä»¥è®¿é—® Vue åŸå‹ä¸Šçš„å±æ€§æ–¹æ³•</p></li></ol><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/VueComponent.66788a9c.png" alt="VueComponent"></p><h2 id="å•æ–‡ä»¶ç»„ä»¶">å•æ–‡ä»¶ç»„ä»¶</h2><p>å•æ–‡ä»¶ç»„ä»¶å³ <code>.vue</code> æ–‡ä»¶</p><h2 id="scoped-è§£å†³æ ·å¼å†²çª">scoped è§£å†³æ ·å¼å†²çª</h2><ul><li>åŸç†ï¼šä¸ºå½“å‰ç»„ä»¶æ‰€æœ‰ DOM å…ƒç´ åˆ†é…å”¯ä¸€çš„è‡ªå®šä¹‰å±æ€§ï¼Œå†™æ ·å¼æ—¶ä½¿ç”¨å±æ€§é€‰æ‹©å™¨é˜²æ­¢æ ·å¼å†²çªé—®é¢˜</li><li><code>scoped</code> åªç»™å­ç»„ä»¶æœ€å¤–å±‚çš„ div æ·»åŠ äº†è‡ªå®šä¹‰å±æ€§ <code>[data-v-xxx]</code> ï¼Œå­ç»„ä»¶å†…éƒ¨çš„æ ‡ç­¾å¹¶æ²¡æœ‰æ·»åŠ ã€‚å› æ­¤çˆ¶ç»„ä»¶åªèƒ½ä¿®æ”¹å­ç»„ä»¶æœ€å¤–å±‚çš„ div æ ·å¼ï¼Œä¿®æ”¹å­ç»„ä»¶å†…å±‚å…ƒç´ çš„æ ·å¼æ˜¯ä¸å¯è¡Œçš„</li><li>è‹¥æƒ³è®©æŸäº›æ ·å¼å¯¹å­ç»„ä»¶ç”Ÿæ•ˆï¼Œéœ€ä½¿ç”¨ <code>/deep/</code> æ·±åº¦é€‰æ‹©å™¨</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ç»†ç»†å“å‘³ */</span></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line"><span class="selector-class">.title</span> &#123;</span><br><span class="line">  <span class="comment">/* ä¸åŠ  /deep/ï¼Œé€‰æ‹©å™¨æ ¼å¼ä¸º .title[data-v-052242de] */</span></span><br><span class="line">  <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/deep/ <span class="selector-class">.title</span> &#123;</span><br><span class="line">  <span class="comment">/* åŠ  /deep/ï¼Œé€‰æ‹©å™¨æ ¼å¼ä¸º [data-v-052242de] .title */</span></span><br><span class="line">  <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="ç»„ä»¶é€šä¿¡">ç»„ä»¶é€šä¿¡</h2><h3 id="è‡ªå®šä¹‰å±æ€§-props">è‡ªå®šä¹‰å±æ€§ props</h3><blockquote><p>çˆ¶ä¼ å­ã€å­ä¼ çˆ¶</p></blockquote><p><code>props</code> éªŒè¯ï¼š</p><ul><li>åŸºç¡€ç±»å‹æ£€æŸ¥ï¼š<code>String, Number, Boolean, Array, Object, Date, Function, Symbol</code></li><li>å¤šä¸ªå¯èƒ½çš„ç±»å‹</li><li>å¿…å¡«é¡¹æ£€æŸ¥</li><li><a href="https://www.cnblogs.com/mmzuo-798/p/15188014.html">é»˜è®¤å€¼</a></li><li>è‡ªå®šä¹‰éªŒè¯å‡½æ•° <code>validator</code></li><li><code>props</code> æ˜¯åªè¯»çš„ï¼Œè‹¥æ˜¯å¯¹è±¡ï¼Œå¯¹è±¡å†…éƒ¨çš„ä¿®æ”¹ä¸æŠ¥é”™ï¼Œä½†ä¸æ¨èã€‚è‹¥éœ€ä¿®æ”¹ï¼Œåˆ™æŠŠ <code>props</code> å†…å®¹æ‹·è´ä¸€ä»½åˆ° <code>data</code> è¿›è¡Œä¿®æ”¹</li></ul><p><strong>çˆ¶ä¼ å­ï¼š</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- çˆ¶ç»„ä»¶ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è‹¥ props å±æ€§ä½¿ç”¨é©¼å³°å‘½åæ³•ï¼Œå¯ä½¿ç”¨é©¼å³°å½¢å¼æˆ–çŸ­æ¨ªçº¿åˆ†éš”å½¢å¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Son</span> <span class="attr">:num</span>=<span class="string">&quot;count&quot;</span> <span class="attr">:msg</span>=<span class="string">&quot;message&quot;</span> <span class="attr">:pub-time</span>=<span class="string">&quot;time&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Son</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å­ç»„ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>çˆ¶ç»„ä»¶ä¼ è¿‡æ¥çš„å€¼ï¼š&#123;&#123; num &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>çˆ¶ç»„ä»¶ä¼ è¿‡æ¥çš„å€¼ï¼š&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•°ç»„å½¢å¼</span></span><br><span class="line"><span class="attr">props</span>: [<span class="string">&#x27;num&#x27;</span>, <span class="string">&#x27;msg&#x27;</span>, <span class="string">&#x27;pubTime&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»…é™åˆ¶ç±»å‹</span></span><br><span class="line"><span class="attr">props</span>: &#123;</span><br><span class="line">  <span class="attr">num</span>: <span class="title class_">Number</span>,</span><br><span class="line">  <span class="attr">msg</span>: <span class="title class_">String</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹è±¡å½¢å¼</span></span><br><span class="line"><span class="attr">props</span>: &#123;</span><br><span class="line">  <span class="attr">num</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">Number</span>,</span><br><span class="line">    <span class="attr">default</span>: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">msg</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: [<span class="title class_">String</span>, <span class="title class_">Number</span>],</span><br><span class="line">    <span class="attr">required</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="title function_">validator</span>(<span class="params">value</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> value === <span class="string">&#x27;hello&#x27;</span> || value === <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">default</span>: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å­ä¼ çˆ¶ï¼š</strong></p><ul><li>çˆ¶ç»„ä»¶é€šè¿‡ <code>props</code> ç»™å­ç»„ä»¶ä¼ é€’å‡½æ•°ï¼Œå­ç»„ä»¶è°ƒç”¨è¯¥å‡½æ•°å³å¯ä¿®æ”¹çˆ¶ç»„ä»¶çš„æ•°æ®</li><li>ç»„ä»¶ <code>methods</code> é‡Œå‡½æ•°çš„ this å§‹ç»ˆæŒ‡å‘è¯¥ç»„ä»¶å®ä¾‹ï¼Œå¯ç†è§£ä¸º Vue åº•å±‚å¯¹è¿™äº›å‡½æ•°åšäº†<code>bind</code>å¤„ç†</li><li>é€šè¿‡<code>bind</code>ä¿®æ”¹ this æŒ‡å‘åçš„æ–°å‡½æ•°ï¼Œå…¶ this æŒ‡å‘ä¸èƒ½å†æ¬¡ä¿®æ”¹ã€‚<a href="https://cn.vuejs.org/v2/api/#methods">å®˜ç½‘è¯´æ˜</a></li><li><a href="https://segmentfault.com/q/1010000015951625">æ€å¦æ–‡ç« </a></li><li>ä¸æ¨èè¯¥æ–¹å¼è¿›è¡Œå­ä¼ çˆ¶ï¼Œæ¨èä½¿ç”¨è‡ªå®šä¹‰äº‹ä»¶</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Son</span> <span class="attr">:addCount</span>=<span class="string">&quot;addCount&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Son</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">count</span>: <span class="number">1</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">addCount</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">count</span>++</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">props</span>: [<span class="string">&#x27;addCount&#x27;</span>],</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">add</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">addCount</span>()</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰äº‹ä»¶">è‡ªå®šä¹‰äº‹ä»¶</h3><blockquote><p>è‡ªå®šä¹‰äº‹ä»¶å¯ç”¨äºå®ç°å­ä¼ çˆ¶</p></blockquote><p>å­ç»„ä»¶è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼Œå¹¶ä¼ é€’æ•°æ®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­ç»„ä»¶</span></span><br><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">add</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">count</span> += <span class="number">1</span></span><br><span class="line">    <span class="variable language_">this</span>.$emit(<span class="string">&#x27;count-change&#x27;</span>, <span class="variable language_">this</span>.<span class="property">count</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çˆ¶ç»„ä»¶ç›‘å¬å­ç»„ä»¶çš„è‡ªå®šä¹‰äº‹ä»¶ï¼Œå¹¶è°ƒç”¨å›è°ƒå‡½æ•°å¤„ç†æ•°æ®ï¼š</p><ul><li>çˆ¶ç»„ä»¶é€šè¿‡ <code>this.$refs.xxx.$on('äº‹ä»¶åç§°',å›è°ƒ)</code> ç›‘å¬å­ç»„ä»¶è‡ªå®šä¹‰äº‹ä»¶æ—¶ï¼Œå›è°ƒå‡½æ•°è¦ä¹ˆé…ç½®åœ¨ <code>methods</code> ä¸­ï¼Œè¦ä¹ˆç”¨ç®­å¤´å‡½æ•°ï¼Œå¦åˆ™ this æŒ‡å‘ä¼šå‡ºé—®é¢˜</li><li>ç»„ä»¶ä¸Šä¹Ÿå¯ä»¥ç»‘å®šåŸç”Ÿ DOM äº‹ä»¶ï¼Œéœ€è¦ä½¿ç”¨ <code>native</code> ä¿®é¥°ç¬¦</li><li>è‹¥æƒ³è®©è‡ªå®šä¹‰äº‹ä»¶åªè§¦å‘ä¸€æ¬¡ï¼Œå¯ä»¥ä½¿ç”¨ <code>once</code> ä¿®é¥°ç¬¦ï¼Œæˆ– <code>$once</code> æ–¹æ³•</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ–¹å¼ä¸€ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Son</span> @<span class="attr">count-change</span>=<span class="string">&quot;getNewCount&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Son</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Son</span> @<span class="attr">count-change.once</span>=<span class="string">&quot;getNewCount&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Son</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ–¹å¼äºŒ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Son</span> <span class="attr">ref</span>=<span class="string">&quot;sonRef&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Son</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ç›‘å¬å­ç»„ä»¶åŸç”Ÿ DOM äº‹ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Son</span> @<span class="attr">click.native</span>=<span class="string">&quot;handleClick&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Son</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">father</span>: <span class="number">1</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">getNewCount</span>(<span class="params">val</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">father</span> = val</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// æ–¹å¼äºŒ</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">sonRef</span>.$on(<span class="string">&#x27;count-change&#x27;</span>, <span class="variable language_">this</span>.<span class="property">getNewCount</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">sonRef</span>.$once(<span class="string">&#x27;count-change&#x27;</span>, <span class="variable language_">this</span>.<span class="property">getNewCount</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æˆ–</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">sonRef</span>.$on(<span class="string">&#x27;count-change&#x27;</span>, <span class="function">(<span class="params">val</span>) =&gt;</span> (<span class="variable language_">this</span>.<span class="property">father</span> = val))</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è§£ç»‘è‡ªå®šä¹‰äº‹ä»¶<code>this.$off()</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è§£ç»‘å•ä¸ªè‡ªå®šä¹‰äº‹ä»¶</span></span><br><span class="line"><span class="variable language_">this</span>.$off(<span class="string">&#x27;count-change&#x27;</span>)</span><br><span class="line"><span class="comment">// è§£ç»‘å¤šä¸ªè‡ªå®šä¹‰äº‹ä»¶</span></span><br><span class="line"><span class="variable language_">this</span>.$off([<span class="string">&#x27;count-change&#x27;</span>, <span class="string">&#x27;add&#x27;</span>])</span><br><span class="line"><span class="comment">// è§£ç»‘æ‰€æœ‰è‡ªå®šä¹‰äº‹ä»¶</span></span><br><span class="line"><span class="variable language_">this</span>.$off()</span><br></pre></td></tr></table></figure><h3 id="EventBus-å…¨å±€äº‹ä»¶æ€»çº¿">EventBus å…¨å±€äº‹ä»¶æ€»çº¿</h3><blockquote><p>æ€æƒ³ï¼šå¼„ä¸€ä¸ªæ‰€æœ‰ç»„ä»¶å®ä¾‹éƒ½èƒ½è®¿é—®åˆ°çš„ Vue å®ä¾‹å¯¹è±¡ï¼ŒVue åŸå‹ä¸ŠåŒ…å«äº‹ä»¶å¤„ç†çš„ç›¸å…³æ–¹æ³•ï¼ŒåŒ…æ‹¬ <code>$on, $emit, $off, $once</code></p></blockquote><p><strong>æ–¹å¼ä¸€</strong></p><p>å®‰è£…å…¨å±€äº‹ä»¶æ€»çº¿ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$bus</span> = <span class="variable language_">this</span></span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>æ•°æ®æ¥æ”¶æ–¹ä¸ºè‡ªå®šä¹‰äº‹ä»¶ç»‘å®šå›è°ƒå‡½æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">handleData</span>(<span class="params"></span>) &#123;...&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$bus</span>.$on(<span class="string">&#x27;share&#x27;</span>, <span class="variable language_">this</span>.<span class="property">handleData</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// ç»„ä»¶é”€æ¯ï¼Œè§£ç»‘äº‹ä»¶</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$bus</span>.$off(<span class="string">&#x27;share&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ•°æ®å‘é€æ–¹è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">sendData</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$bus</span>.$emit(<span class="string">&#x27;share&#x27;</span>, <span class="number">666</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ–¹å¼äºŒ</strong></p><p>åˆ›å»º eventBus.js æ¨¡å—ï¼Œå¹¶å‘å¤–å…±äº«ä¸€ä¸ª Vue çš„å®ä¾‹å¯¹è±¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// eventBus.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vue</span>()</span><br></pre></td></tr></table></figure><p>åœ¨æ•°æ®å‘é€æ–¹ï¼Œè°ƒç”¨ <code>bus.$emit('äº‹ä»¶åç§°', è¦å‘é€çš„æ•°æ®)</code> æ–¹æ³•è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•°æ®å‘é€æ–¹</span></span><br><span class="line"><span class="keyword">import</span> bus <span class="keyword">from</span> <span class="string">&#x27;./eventBus.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">sendData</span>(<span class="params"></span>) &#123;</span><br><span class="line">      bus.$emit(<span class="string">&#x27;share&#x27;</span>, <span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æ•°æ®æ¥æ”¶æ–¹ï¼Œé€šè¿‡ <code>bus.$on('äº‹ä»¶åç§°', äº‹ä»¶å¤„ç†å‡½æ•°)</code> ä¸ºè‡ªå®šä¹‰äº‹ä»¶æ³¨å†Œäº‹ä»¶å¤„ç†å‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•°æ®æ¥æ”¶æ–¹</span></span><br><span class="line"><span class="keyword">import</span> bus <span class="keyword">from</span> <span class="string">&#x27;./eventBus.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">msg</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ç»†èŠ‚1ï¼šåœ¨ created é’©å­ä¸­æ³¨å†Œå‡½æ•°</span></span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// ç»†èŠ‚2ï¼šä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œåˆ™ this æŒ‡å‘è¯¥ç»„ä»¶è€Œé bus</span></span><br><span class="line">    bus.$on(<span class="string">&#x27;share&#x27;</span>, <span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">msg</span> = val</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒ">æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒ</h3><blockquote><p>ä¸å…¨å±€äº‹ä»¶æ€»çº¿å¾ˆç›¸ä¼¼ï¼Œå› æ­¤ä¸€èˆ¬ç”¨äº‹ä»¶æ€»çº¿ï¼Œä¸ç”¨è¿™ä¸ª</p></blockquote><p>å®‰è£…ç¬¬ä¸‰æ–¹åº“ <code>PubSubJS</code> ï¼š<code>npm install -S pubsub.js</code></p><p>è®¢é˜…æ¶ˆæ¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pubsub <span class="keyword">from</span> <span class="string">&#x27;pubsub-js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">handleData</span>(<span class="params">messageName, data</span>) &#123;...&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">pubId</span> = pubsub.<span class="title function_">subscribe</span>(<span class="string">&#x27;share&#x27;</span>, <span class="variable language_">this</span>.<span class="property">handleData</span>)</span><br><span class="line">    <span class="comment">// or</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">pubId</span> = pubsub.<span class="title function_">subscribe</span>(<span class="string">&#x27;share&#x27;</span>, <span class="function">(<span class="params">messageName, data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// ç»„ä»¶é”€æ¯ï¼Œå–æ¶ˆè®¢é˜…</span></span><br><span class="line">    pubsub.<span class="title function_">unsubscribe</span>(<span class="variable language_">this</span>.<span class="property">pubId</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‘å¸ƒæ¶ˆæ¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pubsub <span class="keyword">from</span> <span class="string">&#x27;pubsub-js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">sendData</span>(<span class="params"></span>) &#123;</span><br><span class="line">      pubsub.<span class="title function_">publish</span>(<span class="string">&#x27;share&#x27;</span>, <span class="number">666</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ref-refs">ref / $refs</h3><p><code>ref</code> ç”¨äºç»™ DOM å…ƒç´ æˆ–å­ç»„ä»¶æ³¨å†Œå¼•ç”¨ä¿¡æ¯ã€‚æ¯ä¸ª vue å®ä¾‹éƒ½æœ‰ <code>$refs</code> å¯¹è±¡ï¼Œé‡Œé¢å­˜å‚¨ç€ DOM å…ƒç´ æˆ–å­ç»„ä»¶çš„å¼•ç”¨ã€‚é€šè¿‡è¯¥æ–¹å¼å¯ä»¥è·å–åˆ° DOM å…ƒç´ æˆ–å­ç»„ä»¶å®ä¾‹ã€‚</p><blockquote><p>å¯ä»¥çˆ¶ä¼ å­ï¼Œä¹Ÿèƒ½å­ä¼ çˆ¶ã€‚å­ä¼ çˆ¶è¦å’Œè‡ªå®šä¹‰äº‹ä»¶æ­é…ä½¿ç”¨ã€‚</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼•ç”¨ DOM å…ƒç´  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">ref</span>=<span class="string">&quot;pp&quot;</span>&gt;</span>è¿™æ˜¯æ®µè½<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;getRef&quot;</span>&gt;</span>è·å– DOM å…ƒç´ <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¼•ç”¨å­ç»„ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">son</span> <span class="attr">ref</span>=<span class="string">&quot;sonRef&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">son</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;getComponent&quot;</span>&gt;</span>è·å–å­ç»„ä»¶å®ä¾‹å¼•ç”¨<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">getRef</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// è·å–å…ƒç´ çš„å¼•ç”¨</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">pp</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">pp</span>.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">getComponent</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">sonRef</span>)</span><br><span class="line">    <span class="comment">// å¯ä»¥è®¿é—®å­ç»„ä»¶çš„æ•°æ®å’Œæ–¹æ³•</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">sonRef</span>.<span class="property">count</span> = <span class="number">1</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">sonRef</span>.<span class="title function_">add</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»„ä»¶çš„ <code>$nextTick(cb)</code> æ–¹æ³•ï¼Œä¼šæŠŠ cb å›è°ƒæ¨è¿Ÿåˆ°ä¸‹ä¸€ä¸ª DOM æ›´æ–°å‘¨æœŸä¹‹åæ‰§è¡Œï¼Œå³åœ¨ DOM æ›´æ–°å®Œæˆåå†æ‰§è¡Œå›è°ƒï¼Œä»è€Œä¿è¯ cb å›è°ƒå¯ä»¥è·å–æœ€æ–°çš„ DOM å…ƒç´ ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">showInput</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">inputVisible</span> = <span class="literal">true</span></span><br><span class="line">    <span class="comment">// å¯¹è¾“å…¥æ¡†çš„æ“ä½œæ¨è¿Ÿåˆ° DOM æ›´æ–°å®Œæˆä¹‹å</span></span><br><span class="line">    <span class="variable language_">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">input</span>.<span class="title function_">focus</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>Vue ç»„ä»¶è¿›é˜¶</h1><h2 id="åŠ¨æ€ç»„ä»¶">åŠ¨æ€ç»„ä»¶</h2><p>vue æä¾›äº†å†…ç½®çš„ <code>&lt;component&gt;</code> ç»„ä»¶ç”¨äºåŠ¨æ€åˆ‡æ¢ç»„ä»¶ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é€šè¿‡ is å±æ€§æŒ‡å®šè¦æ¸²æŸ“çš„ç»„ä»¶ï¼Œä¼ é€’çš„æ˜¯å­—ç¬¦ä¸² --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;comName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;comName = &#x27;Left&#x27;&quot;</span>&gt;</span>å±•ç¤ºLeftç»„ä»¶<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;comName = &#x27;Right&#x27;&quot;</span>&gt;</span>å±•ç¤ºRightç»„ä»¶<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="keep-alive">keep-alive</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåˆ‡æ¢åŠ¨æ€ç»„ä»¶æ—¶æ— æ³•ä¿æŒç»„ä»¶çš„çŠ¶æ€ã€‚æ­¤æ—¶å¯ä»¥ä½¿ç”¨ vue å†…ç½®çš„ <code>&lt;keep-alive&gt;</code> ç»„ä»¶ä¿æŒåŠ¨æ€ç»„ä»¶çš„çŠ¶æ€ï¼Œå¯¹è¢«åŒ…è£¹çš„ç»„ä»¶è¿›è¡ŒçŠ¶æ€ç¼“å­˜ã€‚</p><p>è¢« <code>&lt;keep-alive&gt;</code> åŒ…è£¹çš„ç»„ä»¶ä¼šå¤šå‡ºä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼šå½“ç»„ä»¶è¢«æ¿€æ´»æ—¶ï¼Œè§¦å‘ <code>activated</code> é’©å­ï¼›å½“ç»„ä»¶è¢«ç¼“å­˜æ—¶ï¼Œè§¦å‘ <code>deactivated</code> é’©å­ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;comName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>&lt;keep-alive&gt;</code> çš„ <code>include</code> å’Œ <code>exclude</code> å±æ€§ï¼Œåˆ†åˆ«ç”¨äºæŒ‡æ˜å“ªäº›ç»„ä»¶è¦ç¼“å­˜ã€å“ªäº›ç»„ä»¶ä¸è¦ç¼“å­˜ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">keep-alive</span> <span class="attr">include</span>=<span class="string">&quot;Left, Right&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;comName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">keep-alive</span> <span class="attr">:include</span>=<span class="string">&quot;[&#x27;News&#x27;, &#x27;Message&#x27;]&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="æ’æ§½">æ’æ§½</h2><h3 id="ä½•ä¸ºæ’æ§½">ä½•ä¸ºæ’æ§½</h3><p>æ’æ§½å¯ä»¥ç†è§£ä¸ºç»„ä»¶å°è£…æœŸé—´ï¼Œä¸ºç”¨æˆ·é¢„ç•™çš„<strong>å†…å®¹å ä½ç¬¦</strong>ã€‚å®ƒæ˜¯ vue ä¸ºç»„ä»¶å°è£…è€…æä¾›çš„èƒ½åŠ›ï¼Œå…è®¸å¼€å‘è€…åœ¨å°è£…ç»„ä»¶æ—¶ï¼ŒæŠŠ<strong>ä¸ç¡®å®šçš„ã€å¸Œæœ›ç”±ç”¨æˆ·æŒ‡å®šçš„éƒ¨åˆ†</strong>å®šä¹‰ä¸ºæ’æ§½ã€‚</p><h3 id="æ’æ§½åŸºæœ¬ç”¨æ³•">æ’æ§½åŸºæœ¬ç”¨æ³•</h3><p>åŸºç¡€ä½¿ç”¨ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å­ç»„ä»¶ä¸­é¢„ç•™æ’æ§½ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;contianer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>è¿™æ˜¯å­ç»„ä»¶<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- çˆ¶ç»„ä»¶ä½¿ç”¨å­ç»„ä»¶æ—¶ï¼Œå‘æ’æ§½å¡«å……å†…å®¹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">child-comp</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¡«å……åˆ°æ’æ§½çš„å†…å®¹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">child-comp</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœå­ç»„ä»¶æ²¡æœ‰é¢„ç•™æ’æ§½ï¼Œé‚£ä¹ˆçˆ¶ç»„ä»¶å¡«å……ç»™å­ç»„ä»¶çš„è‡ªå®šä¹‰å†…å®¹ä¼šè¢«ä¸¢å¼ƒï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å­ç»„ä»¶æ²¡æœ‰é¢„ç•™æ’æ§½ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;contianer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>è¿™æ˜¯å­ç»„ä»¶<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- çˆ¶ç»„ä»¶çš„è‡ªå®šä¹‰å†…å®¹ä¼šè¢«ä¸¢å¼ƒ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">child-comp</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ®µè‡ªå®šä¹‰å†…å®¹ä¼šè¢«ä¸¢å¼ƒ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">child-comp</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å­ç»„ä»¶å¯ä»¥ä¸ºæ’æ§½æä¾›<strong>åå¤‡å†…å®¹</strong>ï¼Œå½“çˆ¶ç»„ä»¶æ²¡æœ‰æä¾›è‡ªå®šä¹‰å†…å®¹æ—¶ï¼Œåå¤‡å†…å®¹å°±ä¼šç”Ÿæ•ˆã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å­ç»„ä»¶æä¾›åå¤‡å†…å®¹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;contianer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>è¿™æ˜¯å­ç»„ä»¶<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span>è¿™æ˜¯åå¤‡å†…å®¹ï¼Œçˆ¶ç»„ä»¶æ²¡æœ‰æä¾›è‡ªå®šä¹‰å†…å®¹å°±ä¼šç”Ÿæ•ˆ<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- çˆ¶ç»„ä»¶æ²¡æœ‰æä¾›è‡ªå®šä¹‰å†…å®¹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">child-comp</span>&gt;</span> <span class="tag">&lt;/<span class="name">child-comp</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å…·åæ’æ§½">å…·åæ’æ§½</h3><p>ç»„ä»¶åœ¨é¢„ç•™æ’æ§½æ—¶å¯ä»¥è®¾ç½® <code>name</code> å±æ€§ï¼Œä¸ºæ’æ§½æŒ‡å®šåç§°ï¼Œè¿™ç§æœ‰å…·ä½“åç§°çš„æ’æ§½å°±å«å…·åæ’æ§½ã€‚ æ²¡æœ‰è®¾ç½® <code>name</code> åç§°çš„æ’æ§½é»˜è®¤åç§°ä¸º <code>default</code> ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å­ç»„ä»¶é¢„ç•™å¤šä¸ªå…·åæ’æ§½ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;contianer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>è¿™æ˜¯å­ç»„ä»¶<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;title&quot;</span>&gt;</span>title å…·åæ’æ§½<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;content&quot;</span>&gt;</span>content å…·åæ’æ§½<span class="tag">&lt;/<span class="name">slot</span>&gt;</span>&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span>æ²¡æœ‰è®¾ç½® name åç§°åˆ™é»˜è®¤ä¸º default<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><p>çˆ¶ç»„ä»¶å‘å…·åæ’æ§½æä¾›è‡ªå®šä¹‰å†…å®¹</p><ul><li>æ–°çš„å†™æ³•ï¼šåŒ…è£¹ä¸€ä¸ª <code>&lt;template&gt;</code> æ ‡ç­¾ï¼ŒåŒæ—¶åœ¨ <code>&lt;template&gt;</code> ä¸­é€šè¿‡ <code>v-slot:åç§°</code> æŒ‡æ˜æ’æ§½çš„åç§°ã€‚ç®€å†™å½¢å¼ä¸º <code>#åç§°</code> ï¼Œä¸” <code>v-slot</code> åªèƒ½ä½¿ç”¨åœ¨ <code>&lt;template&gt;</code> å’Œç»„ä»¶æ ‡ç­¾ä¸Šï¼Œæ™®é€š HTML æ ‡ç­¾ä¸è¡Œ</li><li>æ—§çš„å†™æ³•ï¼š<code>slot=&quot;åç§°&quot;</code> æŒ‡æ˜æ’æ§½åç§°</li><li>å¦‚æœä¸æŒ‡å®šæ’æ§½åç§°ï¼Œé‚£ä¹ˆè‡ªå®šä¹‰å†…å®¹ä¼šè¢«å¡«å……åˆ°æ‰€æœ‰çš„ <code>default</code> æ’æ§½å½“ä¸­</li><li>åŒä¸€æ’æ§½å¡«å……å¤šä¸ªå†…å®¹ï¼Œæ˜¯è¿½åŠ ä¸æ˜¯è¦†ç›–</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- çˆ¶ç»„ä»¶å‘å…·åæ’æ§½æä¾›è‡ªå®šä¹‰å†…å®¹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">child-comp</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span> <span class="attr">slot</span>=<span class="string">&quot;title&quot;</span>&gt;</span>ã€Šèµ æ±ªä¼¦ã€‹<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ã€Šé™å¤œæ€ã€‹<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- ç®€å†™å½¢å¼ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">content</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>åºŠå‰æ˜æœˆå…‰ï¼Œç–‘æ˜¯åœ°ä¸Šéœœã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>ä¸¾å¤´æœ›æ˜æœˆï¼Œä½å¤´æ€æ•…ä¹¡ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ®µå†…å®¹æ²¡æœ‰æŒ‡å®šåç§°ï¼Œä¼šè¢«å¡«å……åˆ°æ‰€æœ‰ default æ’æ§½ä¸­ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">child-comp</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ä½œç”¨åŸŸæ’æ§½">ä½œç”¨åŸŸæ’æ§½</h3><ul><li>ç»„ä»¶å¯ä»¥ä¸ºæ’æ§½ç»‘å®šè‡ªå®šä¹‰å±æ€§ <code>props</code> ï¼Œè¿™ç§æ’æ§½å«ä½œç”¨åŸŸæ’æ§½</li><li>ç†è§£ï¼šæ•°æ®åœ¨ç»„ä»¶çš„è‡ªèº«ï¼Œä½†æ ¹æ®æ•°æ®ç”Ÿæˆçš„ç»“æ„éœ€è¦ç»„ä»¶çš„ä½¿ç”¨è€…æ¥å†³å®š</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å­ç»„ä»¶ä¸ºæ’æ§½ç»‘å®š props æ•°æ® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">slot</span> <span class="attr">v-for</span>=<span class="string">&quot;item in list&quot;</span> <span class="attr">:user</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">list</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;Lily&#x27;</span>,</span><br><span class="line">          <span class="attr">state</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;Ben&#x27;</span>,</span><br><span class="line">          <span class="attr">state</span>: <span class="literal">false</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">id</span>: <span class="number">3</span>,</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;Water&#x27;</span>,</span><br><span class="line">          <span class="attr">state</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çˆ¶ç»„ä»¶å‘æ’æ§½æä¾›è‡ªå®šä¹‰å†…å®¹æ—¶ï¼Œå¯ä»¥æ¥æ”¶ä½œç”¨åŸŸæ’æ§½æä¾›çš„æ•°æ®ï¼š</p><ul><li>æ—§å†™æ³•ï¼š<code>scope=&quot;scope&quot;</code> ã€<code>slot-scope=&quot;scope&quot;</code></li><li>æ–°å†™æ³•ï¼š<code>v-slot:default=&quot;scope&quot;</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">child-comp</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>ä½œç”¨åŸŸæ’æ§½æä¾›çš„æ•°æ®ï¼š&#123;&#123; scope &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span> <span class="attr">slot</span>=<span class="string">&quot;default&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; scope &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">child-comp</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­æ¥æ”¶åˆ°çš„æ•°æ® <code>scope</code> æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// scope çš„å†…å®¹</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&#x27;user&#x27;</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;id&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Lily&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;state&#x27;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æ¥æ”¶ä½œç”¨åŸŸæ’æ§½æä¾›çš„æ•°æ®æ—¶å¯ä»¥ä½¿ç”¨è§£æ„èµ‹å€¼ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">child-comp</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>=<span class="string">&quot;&#123;user&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>idï¼š&#123;&#123; user.id &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>nameï¼š&#123;&#123; user.name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>stateï¼š&#123;&#123; user.state &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">child-comp</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="è‡ªå®šä¹‰æŒ‡ä»¤">è‡ªå®šä¹‰æŒ‡ä»¤</h2><h3 id="åˆ†ç±»">åˆ†ç±»</h3><ul><li>ç§æœ‰è‡ªå®šä¹‰æŒ‡ä»¤ï¼šåœ¨ç»„ä»¶çš„ <code>directives</code> èŠ‚ç‚¹å£°æ˜</li><li>å…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤ï¼šåœ¨ <code>main.js</code> æ–‡ä»¶ä¸­å£°æ˜</li></ul><h3 id="å®Œæ•´å†™æ³•">å®Œæ•´å†™æ³•</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-focus</span>=<span class="string">&quot;content&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">content</span>: <span class="number">666</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">directives</span>: &#123;</span><br><span class="line">  <span class="attr">focus</span>: &#123;</span><br><span class="line">    <span class="comment">// æŒ‡ä»¤ä¸å…ƒç´ æˆåŠŸç»‘å®šæ—¶æ‰§è¡Œï¼Œæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">    <span class="title function_">bind</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">      el.<span class="property">value</span> = binding.<span class="property">value</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŒ‡ä»¤æ‰€åœ¨å…ƒç´ æ’å…¥é¡µé¢æ—¶æ‰§è¡Œï¼Œæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">    <span class="title function_">inserted</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">      <span class="comment">// ä¸€è¿›å…¥é¡µé¢è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹</span></span><br><span class="line">      el.<span class="title function_">focus</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŒ‡ä»¤æ‰€åœ¨å…ƒç´ é‡æ–°è§£æï¼ˆä¸ªäººè§‰å¾—ä¸åº”æ˜¯æ¸²æŸ“ï¼Œè€Œæ˜¯è§£æï¼Œé‡æ–°è§£æä¸ä¸€å®šé‡æ–°æ¸²æŸ“ï¼‰æ—¶æ‰§è¡Œï¼Œæ‰§è¡Œ 0+N æ¬¡</span></span><br><span class="line">    <span class="title function_">update</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">      el.<span class="property">value</span> = binding.<span class="property">value</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨å±€å†™æ³•</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;focus&#x27;</span>, &#123;</span><br><span class="line">  <span class="title function_">bind</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">    el.<span class="property">value</span> = binding.<span class="property">value</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">inserted</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">    el.<span class="title function_">focus</span>()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">update</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">    el.<span class="property">value</span> = binding.<span class="property">value</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="ç®€å†™å½¢å¼">ç®€å†™å½¢å¼</h3><ul><li>å½“ <code>bind</code> å‡½æ•°å’Œ <code>update</code> å‡½æ•°é‡Œçš„é€»è¾‘å®Œå…¨ç›¸åŒæ—¶ï¼Œå¯ä»¥ç®€å†™</li><li>ä¸éœ€è¦å®šä¹‰ <code>inserted</code> å‡½æ•°æ‰ä½¿ç”¨ç®€å†™å½¢å¼</li><li>å› æ­¤ç®€å†™å½¢å¼çš„è°ƒç”¨æ—¶æœºï¼šåˆæ¬¡ç»‘å®šå’Œ DOM æ›´æ–°ï¼ˆæŒ‡ä»¤æ‰€åœ¨æ¨¡æ¿è¢«é‡æ–°è§£æï¼‰</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-color</span>=<span class="string">&quot;&#x27;red&#x27;&quot;</span>&gt;</span>ç®€å†™å½¢å¼<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">directives</span>: &#123;</span><br><span class="line">  <span class="title function_">color</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">    el.<span class="property">style</span>.<span class="property">color</span> = binding.<span class="property">value</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨å±€å†™æ³•</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;color&#x27;</span>, <span class="function">(<span class="params">el, binding</span>) =&gt;</span> &#123;</span><br><span class="line">  el.<span class="property">style</span>.<span class="property">color</span> = binding.<span class="property">value</span></span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure><h3 id="æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹</h3><ul><li>è‡ªå®šä¹‰æŒ‡ä»¤ä½¿ç”¨æ—¶éœ€è¦æ·»åŠ  <code>v-</code> å‰ç¼€</li><li>æŒ‡ä»¤åå¦‚æœæ˜¯å¤šä¸ªå•è¯ï¼Œè¦ä½¿ç”¨ <code>kebab-case</code> çŸ­æ¨ªçº¿å‘½åæ–¹å¼ï¼Œä¸è¦ç”¨ <code>camelCase</code> é©¼å³°å‘½å</li><li>è‡ªå®šä¹‰æŒ‡ä»¤ä¸‰ä¸ªå‡½æ•°é‡Œçš„ <code>this</code> æŒ‡å‘ <code>window</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">v-big-number</span>=<span class="string">&quot;n&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">n</span>: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">directives</span>: &#123;</span><br><span class="line">  <span class="comment">// æ·»åŠ å¼•å·æ‰æ˜¯å¯¹è±¡é”®åå®Œæ•´å†™æ³•</span></span><br><span class="line">  <span class="comment">// å¹³æ—¶ä¸åŠ å¼•å·éƒ½æ˜¯ç®€å†™å½¢å¼</span></span><br><span class="line">  <span class="comment">// é‡åˆ°çŸ­æ¨ªçº¿çš„é”®åå°±å¿…é¡»æ·»åŠ å¼•å·</span></span><br><span class="line">  <span class="string">&#x27;big-number&#x27;</span>: &#123;</span><br><span class="line">    <span class="title function_">bind</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>) <span class="comment">// Window</span></span><br><span class="line">      el.<span class="property">innerText</span> = binding.<span class="property">value</span> * <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Mixin-æ··å…¥">Mixin æ··å…¥</h2><ul><li>Mixin å¯ä»¥æŠŠå¤šä¸ªç»„ä»¶å…±ç”¨çš„é…ç½®æå–æˆä¸€ä¸ªæ··å…¥å¯¹è±¡</li><li>æ··å…¥å’Œç»„ä»¶è‡ªèº«çš„é…ç½®ä¼šåˆå¹¶</li><li><code>data</code> ã€<code>methods</code> è‹¥å†²çªä»¥è‡ªèº«ä¸ºå‡†</li><li>å¯¹äºç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œæ‰§è¡ŒåŠ¨ä½œä¼šåˆå¹¶ï¼Œä¸”å…ˆæ‰§è¡Œ Mixin é‡Œçš„åŠ¨ä½œ</li></ul><p>å®šä¹‰æ··å…¥ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mixin.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> mixin = &#123;</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">showName</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello mixin&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> mixin2 = &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">x</span>: <span class="number">100</span>,</span><br><span class="line">      <span class="attr">y</span>: <span class="number">200</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨å±€éƒ¨æ··å…¥ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mixin, mixin2 &#125; <span class="keyword">from</span> <span class="string">&#x27;../mixin.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;School&#x27;</span>,</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">schoolName</span>: <span class="string">&#x27;åŒ—å¤§&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mixins</span>: [mixin, mixin2],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨å…¨å±€æ··å…¥ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; mixin, mixin2 &#125; <span class="keyword">from</span> <span class="string">&#x27;./mixin.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">mixin</span>(mixin)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">mixin</span>(mixin2)</span><br></pre></td></tr></table></figure><h2 id="æ’ä»¶">æ’ä»¶</h2><ul><li>ç”¨äºå¢å¼º Vue</li><li>æœ¬è´¨æ˜¯åŒ…å« <code>install</code> æ–¹æ³•çš„ä¸€å¯¹è±¡ï¼Œ<code>install</code> ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ Vue æ„é€ å‡½æ•°ï¼Œç¬¬äºŒä¸ªä»¥åçš„å‚æ•°æ˜¯æ’ä»¶ä½¿ç”¨è€…ä¼ é€’çš„æ•°æ®</li></ul><p>å®šä¹‰æ’ä»¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// plugins.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">install</span>(<span class="params">Vue, ...rest</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(rest)</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Vue</span>.<span class="title function_">filter</span>(...)</span><br><span class="line">    <span class="title class_">Vue</span>.<span class="title function_">directive</span>(...)</span><br><span class="line">    <span class="title class_">Vue</span>.<span class="title function_">mixin</span>(...)</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myProperty</span> = <span class="string">&#x27;plugins&#x27;</span></span><br><span class="line">    <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myMethod</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ’ä»¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> plugins <span class="keyword">from</span> <span class="string">&#x27;./plugins.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(plugins, <span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure><h2 id="nextTick">$nextTick</h2><ul><li>è¯­æ³•ï¼š<code>this.$nextTick(å›è°ƒå‡½æ•°)</code></li><li>ä½œç”¨ï¼šåœ¨ä¸‹ä¸€æ¬¡ DOM æ›´æ–°ç»“æŸåæ‰§è¡Œå…¶æŒ‡å®šçš„å›è°ƒ</li><li>ä»€ä¹ˆæ—¶å€™ç”¨ï¼šå½“æ”¹å˜æ•°æ®åï¼Œè¦åŸºäºæ›´æ–°åçš„ DOM è¿›è¡Œæ“ä½œæ—¶ï¼Œè¦åœ¨ <code>nextTick</code> æŒ‡å®šçš„å›è°ƒå‡½æ•°ä¸­æ‰§è¡Œ</li><li>ç»„ä»¶çš„ <code>$nextTick(cb)</code> æ–¹æ³•ï¼Œä¼šæŠŠ cb å›è°ƒæ¨è¿Ÿåˆ°ä¸‹ä¸€ä¸ª DOM æ›´æ–°å‘¨æœŸä¹‹åæ‰§è¡Œï¼Œå³åœ¨ DOM æ›´æ–°å®Œæˆåå†æ‰§è¡Œå›è°ƒï¼Œä»è€Œä¿è¯ cb å›è°ƒå¯ä»¥è·å–æœ€æ–°çš„ DOM å…ƒç´ </li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">showInput</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">inputVisible</span> = <span class="literal">true</span></span><br><span class="line">    <span class="comment">// å¯¹è¾“å…¥æ¡†çš„æ“ä½œæ¨è¿Ÿåˆ° DOM æ›´æ–°å®Œæˆä¹‹å</span></span><br><span class="line">    <span class="variable language_">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">input</span>.<span class="title function_">focus</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>Vue è„šæ‰‹æ¶</h1><p><a href="https://cli.vuejs.org/zh/">å®˜ç½‘ä¼ é€é—¨</a></p><h2 id="åˆ›å»º-Vue-é¡¹ç›®">åˆ›å»º Vue é¡¹ç›®</h2><ul><li>å…¨å±€å®‰è£… vue è„šæ‰‹æ¶ï¼š<code>npm i -g @vue/cli</code></li><li>åˆ›å»ºé¡¹ç›®ï¼š<code>vue create project-name</code></li><li>è¿è¡Œé¡¹ç›®ï¼š<code>npm run serve</code></li><li>æš´éœ² webpack é…ç½®ï¼š<code>vue inspect &gt; output.js</code></li></ul><h2 id="Vue-è„šæ‰‹æ¶é¡¹ç›®ç»“æ„">Vue è„šæ‰‹æ¶é¡¹ç›®ç»“æ„</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ node_modules</span><br><span class="line">â”œâ”€â”€ public</span><br><span class="line">â”‚ â”œâ”€â”€ favicon.ico: é¡µç­¾å›¾æ ‡</span><br><span class="line">â”‚ â””â”€â”€ index.html: ä¸»é¡µé¢</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚ â”œâ”€â”€ assets: å­˜æ”¾é™æ€èµ„æº</span><br><span class="line">â”‚ â”‚ â””â”€â”€ logo.png</span><br><span class="line">â”‚ â”‚â”€â”€ component: å­˜æ”¾ç»„ä»¶</span><br><span class="line">â”‚ â”‚ â””â”€â”€ HelloWorld.vue</span><br><span class="line">â”‚ â”‚â”€â”€ App.vue: æ±‡æ€»æ‰€æœ‰ç»„ä»¶</span><br><span class="line">â”‚ â”‚â”€â”€ main.js: å…¥å£æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ .gitignore: git ç‰ˆæœ¬ç®¡åˆ¶å¿½ç•¥çš„é…ç½®</span><br><span class="line">â”œâ”€â”€ babel.config.js: babel çš„é…ç½®æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ package.json: åº”ç”¨åŒ…é…ç½®æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ README.md: åº”ç”¨æè¿°æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ package-lock.jsonï¼šåŒ…ç‰ˆæœ¬æ§åˆ¶æ–‡ä»¶</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/vue-cli.4f118ba8.png" alt="Vueè„šæ‰‹æ¶é¡¹ç›®ç»“æ„"></p><p><code>index.html</code> ä»£ç åˆ†æï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é’ˆå¯¹IEæµè§ˆå™¨çš„ä¸€ä¸ªç‰¹æ®Šé…ç½®ï¼Œå«ä¹‰æ˜¯è®©IEæµè§ˆå™¨ä»¥æœ€é«˜çš„æ¸²æŸ“çº§åˆ«æ¸²æŸ“é¡µé¢ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼€å¯ç§»åŠ¨ç«¯çš„ç†æƒ³è§†å£ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width,initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;%= BASE_URL %&gt; è¡¨ç¤º public æ–‡ä»¶å¤¹è·¯å¾„ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%= BASE_URL %&gt;favicon.ico&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ‹¿ package-lock.json çš„ name ä½œä¸ºæ ‡é¢˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>&lt;%= htmlWebpackPlugin.options.title %&gt;<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å½“æµè§ˆå™¨ä¸æ”¯æŒjsæ—¶noscriptä¸­çš„å…ƒç´ å°±ä¼šè¢«æ¸²æŸ“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">noscript</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">strong</span>&gt;</span>We&#x27;re sorry but &lt;%= htmlWebpackPlugin.options.title %&gt; doesn&#x27;t work properly without JavaScript enabled. Please enable it to continue.<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">noscript</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å®¹å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- built files will be auto injected --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ä¸åŒç‰ˆæœ¬çš„-Vue-ä¸-render-å‡½æ•°">ä¸åŒç‰ˆæœ¬çš„ Vue ä¸ <code>render</code> å‡½æ•°</h2><ol><li><code>vue.js</code> ä¸ <code>vue.runtime.xxx.js</code> çš„åŒºåˆ«ï¼š</li></ol><ul><li><code>import Vue from 'vue'</code> é»˜è®¤å¯¼å…¥ <code>vue.runtime.esm.js</code></li><li><code>vue.js</code> æ˜¯å®Œæ•´ç‰ˆçš„ Vueï¼ŒåŒ…å«ï¼šæ ¸å¿ƒåŠŸèƒ½ + æ¨¡æ¿è§£æå™¨</li><li><code>vue.runtime.xxx.js</code> æ˜¯è¿è¡Œç‰ˆçš„ Vueï¼ŒåªåŒ…å«ï¼šæ ¸å¿ƒåŠŸèƒ½ï¼›æ²¡æœ‰æ¨¡æ¿è§£æå™¨</li></ul><ol start="2"><li><code>vue.runtime.xxx.js</code> æ²¡æœ‰æ¨¡æ¿è§£æå™¨ï¼Œæ•…ä¸èƒ½ä½¿ç”¨ <code>template</code> é…ç½®é¡¹ï¼Œéœ€ä½¿ç”¨ <code>render</code> å‡½æ•°æ¥æ”¶åˆ°çš„ <code>createElement</code> å‡½æ•°å»æŒ‡å®šå…·ä½“å†…å®¹</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.js&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// render()</span></span><br><span class="line"><span class="attr">render</span>: <span class="keyword">function</span>(<span class="params">createElement</span>) &#123;</span><br><span class="line">  <span class="comment">// åˆ›å»ºå…ƒç´ </span></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">createElement</span>(<span class="string">&#x27;h1&#x27;</span>, <span class="string">&#x27;Hello Vue&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="attr">render</span>: <span class="function"><span class="params">createElement</span> =&gt;</span> <span class="title function_">createElement</span>(<span class="title class_">App</span>)</span><br></pre></td></tr></table></figure><h2 id="vue-config-js-é…ç½®æ–‡ä»¶">vue.config.js é…ç½®æ–‡ä»¶</h2><ol><li>ä½¿ç”¨ <code>vue inspect &gt; output.js</code> å¯ä»¥æŸ¥çœ‹åˆ° Vue è„šæ‰‹æ¶çš„é»˜è®¤é…ç½®ã€‚</li><li>ä½¿ç”¨ <code>vue.config.js</code> å¯ä»¥å¯¹è„šæ‰‹æ¶è¿›è¡Œä¸ªæ€§åŒ–å®šåˆ¶ï¼Œ<a href="https://cli.vuejs.org/zh/config/">è¯¦æƒ…</a></li></ol><h2 id="TodoList-æ¡ˆä¾‹æ€»ç»“">TodoList æ¡ˆä¾‹æ€»ç»“</h2><ol><li>ç»„ä»¶åŒ–ç¼–ç æµç¨‹ï¼š</li></ol><ul><li>æ‹†åˆ†é™æ€ç»„ä»¶ï¼šç»„ä»¶è¦æŒ‰ç…§åŠŸèƒ½ç‚¹æ‹†åˆ†ï¼Œå‘½åä¸è¦ä¸ html å…ƒç´ å†²çªã€‚</li><li>å®ç°åŠ¨æ€ç»„ä»¶ï¼šè€ƒè™‘å¥½æ•°æ®çš„å­˜æ”¾ä½ç½®ï¼Œæ•°æ®æ˜¯ä¸€ä¸ªç»„ä»¶åœ¨ç”¨ï¼Œè¿˜æ˜¯ä¸€äº›ç»„ä»¶åœ¨ç”¨ï¼š<ul><li>ä¸€ä¸ªç»„ä»¶åœ¨ç”¨ï¼šæ”¾åœ¨ç»„ä»¶è‡ªèº«å³å¯</li><li>ä¸€äº›ç»„ä»¶åœ¨ç”¨ï¼šæ”¾åœ¨ä»–ä»¬å…±åŒçš„çˆ¶ç»„ä»¶ä¸Šï¼ˆçŠ¶æ€æå‡ï¼‰</li></ul></li><li>å®ç°äº¤äº’ï¼šä»ç»‘å®šäº‹ä»¶å¼€å§‹ã€‚</li></ul><ol start="2"><li><code>props</code> é€‚ç”¨äºï¼š</li></ol><ul><li>çˆ¶ ==&gt; å­</li><li>å­ ==&gt; çˆ¶ï¼ˆè¦æ±‚çˆ¶å…ˆç»™å­ä¸€ä¸ªå‡½æ•°ï¼‰</li></ul><ol start="3"><li><p><code>v-model</code> ç»‘å®šçš„å€¼ä¸èƒ½æ˜¯ <code>props</code> ä¼ è¿‡æ¥çš„å€¼ï¼Œå› ä¸º <code>props</code> æ˜¯ä¸å¯ä»¥ä¿®æ”¹çš„ï¼</p></li><li><p><code>props</code> ä¼ è¿‡æ¥çš„è‹¥æ˜¯å¯¹è±¡ç±»å‹çš„å€¼ï¼Œä¿®æ”¹å¯¹è±¡ä¸­çš„å±æ€§æ—¶ Vue ä¸ä¼šæŠ¥é”™ï¼Œä½†ä¸æ¨è</p></li></ol><h2 id="ä¸€äº›ç¬¬ä¸‰æ–¹åŒ…">ä¸€äº›ç¬¬ä¸‰æ–¹åŒ…</h2><ul><li><a href="https://gitee.com/mirrors/nanoid#nano-id">nanoid</a></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install nanoid</span><br><span class="line"></span><br><span class="line">import &#123; nanoid &#125; from nanoid</span><br><span class="line"></span><br><span class="line">model.id = nanoid()</span><br></pre></td></tr></table></figure><ul><li><a href="https://dayjs.fenxianglu.cn/">dayjs</a></li></ul><h1>Vue ç½‘ç»œè¯·æ±‚</h1><h2 id="Vue-è„šæ‰‹æ¶é…ç½®ä»£ç†">Vue è„šæ‰‹æ¶é…ç½®ä»£ç†</h2><h3 id="é…ç½®å•ä¸ªä»£ç†">é…ç½®å•ä¸ªä»£ç†</h3><p>åœ¨ <code>vue.config.js</code> ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line">  <span class="attr">proxy</span>: <span class="string">&#x27;http://localhost:5000&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä¼˜ç‚¹ï¼šé…ç½®ç®€å•ï¼Œè¯·æ±‚èµ„æºæ—¶ç›´æ¥å‘ç»™å‰ç«¯ï¼ˆ8080ï¼‰å³å¯ã€‚</li><li>ç¼ºç‚¹ï¼šä¸èƒ½é…ç½®å¤šä¸ªä»£ç†ï¼Œä¸èƒ½çµæ´»çš„æ§åˆ¶è¯·æ±‚æ˜¯å¦èµ°ä»£ç†ã€‚</li><li>å·¥ä½œæ–¹å¼ï¼šè‹¥æŒ‰ç…§ä¸Šè¿°é…ç½®ä»£ç†ï¼Œå½“è¯·æ±‚äº†å‰ç«¯ä¸å­˜åœ¨çš„èµ„æºæ—¶ï¼Œé‚£ä¹ˆè¯¥è¯·æ±‚ä¼šè½¬å‘ç»™æœåŠ¡å™¨ ï¼ˆä¼˜å…ˆåŒ¹é…å‰ç«¯èµ„æºï¼‰</li></ul><h3 id="é…ç½®å¤šä¸ªä»£ç†">é…ç½®å¤šä¸ªä»£ç†</h3><p>ç¼–å†™ <code>vue.config.js</code> é…ç½®å…·ä½“ä»£ç†è§„åˆ™ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;/api1&#x27;</span>: &#123;</span><br><span class="line">        <span class="comment">// åŒ¹é…æ‰€æœ‰ä»¥ &#x27;/api1&#x27;å¼€å¤´çš„è¯·æ±‚è·¯å¾„</span></span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;http://localhost:5000&#x27;</span>, <span class="comment">// ä»£ç†ç›®æ ‡çš„åŸºç¡€è·¯å¾„</span></span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// æŠŠè·¯å¾„çš„ /api1 æ›¿æ¢ä¸ºç©ºä¸²</span></span><br><span class="line">        <span class="attr">pathRewrite</span>: &#123; <span class="string">&#x27;^/api1&#x27;</span>: <span class="string">&#x27;&#x27;</span> &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&#x27;/api2&#x27;</span>: &#123;</span><br><span class="line">        <span class="comment">// åŒ¹é…æ‰€æœ‰ä»¥ &#x27;/api2&#x27;å¼€å¤´çš„è¯·æ±‚è·¯å¾„</span></span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;http://localhost:5001&#x27;</span>,</span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">pathRewrite</span>: &#123; <span class="string">&#x27;^/api2&#x27;</span>: <span class="string">&#x27;&#x27;</span> &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">changeOrigin è®¾ç½®ä¸º true æ—¶ï¼ŒæœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚å¤´ä¸­çš„ hostï¼šlocalhost:5000</span></span><br><span class="line"><span class="comment">changeOrigin è®¾ç½®ä¸º false æ—¶ï¼ŒæœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚å¤´ä¸­çš„ hostï¼šlocalhost:8080</span></span><br><span class="line"><span class="comment">changeOrigin é»˜è®¤ä¸º true</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><ul><li>ä¼˜ç‚¹ï¼šå¯ä»¥é…ç½®å¤šä¸ªä»£ç†ï¼Œä¸”å¯ä»¥çµæ´»çš„æ§åˆ¶è¯·æ±‚æ˜¯å¦èµ°ä»£ç†ã€‚</li><li>ç¼ºç‚¹ï¼šé…ç½®ç•¥å¾®ç¹çï¼Œè¯·æ±‚èµ„æºæ—¶å¿…é¡»åŠ å‰ç¼€</li></ul><h2 id="vue-2-x-å…¨å±€é…ç½®-axios">vue 2.x å…¨å±€é…ç½® axios</h2><p>å®é™…é¡¹ç›®å¼€å‘ä¸­ï¼Œå‡ ä¹æ¯ä¸ªç»„ä»¶ä¸­éƒ½ä¼šä½¿ç”¨ <code>axios</code> å‘èµ·æ•°æ®è¯·æ±‚ã€‚æ­¤æ—¶ä¼šé‡åˆ°å¦‚ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š</p><ul><li>æ¯ä¸ªç»„ä»¶ä¸­éƒ½éœ€è¦å¯¼å…¥ <code>axios</code>ï¼ˆä»£ç è‡ƒè‚¿ï¼‰</li><li>æ¯æ¬¡å‘è¯·æ±‚éƒ½éœ€è¦å¡«å†™å®Œæ•´çš„è¯·æ±‚è·¯å¾„ï¼ˆä¸åˆ©äºåæœŸçš„ç»´æŠ¤ï¼‰</li></ul><p>åœ¨ <code>main.js</code> æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é…ç½®è¯·æ±‚æ ¹è·¯å¾„</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = <span class="string">&#x27;http://api.com&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠŠ axios æŒ‚è½½åˆ° Vue åŸå‹ä¸Š</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$http</span> = aixos</span><br></pre></td></tr></table></figure><p><strong>ä¼˜ç‚¹</strong>ï¼šæ¯ä¸ªç»„ä»¶å¯ä»¥é€šè¿‡ <code>this.$http.get</code> ç›´æ¥å‘èµ·è¯·æ±‚ï¼Œæ— éœ€å†å¯¼å…¥ <code>axios</code> ï¼›è‹¥æ ¹è·¯å¾„å‘ç”Ÿæ”¹å˜ï¼Œåªéœ€ä¿®æ”¹ <code>axios.defaults.baseURL</code> ï¼Œæœ‰åˆ©äºä»£ç ç»´æŠ¤ã€‚</p><p><strong>ç¼ºç‚¹</strong>ï¼šæ— æ³•å®ç° <code>API</code> çš„å¤ç”¨ã€‚å³å¤šä¸ªç»„ä»¶éœ€è¦å¯¹åŒä¸€ä¸ªæ¥å£å‘èµ·è¯·æ±‚ï¼Œé‚£ä¹ˆæ¯ä¸ªç»„ä»¶éƒ½éœ€è¦é‡å¤ä¹¦å†™ <code>this.$http.get('/users')</code> ç±»ä¼¼çš„ä»£ç ï¼Œé€ æˆå†—ä½™ã€‚ï¼ˆè§†é¢‘ä¸Šçš„è¯´æ³•ï¼Œä¸ªäººè®¤ä¸ºçœŸæ­£çš„ç¼ºç‚¹æ˜¯å¦‚æœå­˜åœ¨å¤šä¸ªæ ¹è·¯å¾„ï¼Œè¿™ç§æ–¹å¼æ— æ³•è§£å†³ï¼Œæ‰€ä»¥æ‰ä¼šæœ‰ä¸‹é¢çš„æ”¹è¿›æ–¹å¼ã€‚ï¼‰</p><p><strong>æ”¹è¿›</strong>ï¼šå¯¹äºæ¯ä¸€ä¸ªæ ¹è·¯å¾„ï¼Œç‹¬ç«‹å°è£…ä¸€ä¸ª <code>request.js</code> æ¨¡å—ï¼Œç»„ä»¶å¯¼å…¥æ‰€éœ€æ ¹è·¯å¾„å¯¹åº”çš„ <code>axios</code> è¿›è¡Œä½¿ç”¨ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»º axios å®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> request = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&#x27;http://api.taobao.com&#x27;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> request</span><br></pre></td></tr></table></figure><h1>Vuex</h1><p><a href="https://vuex.vuejs.org/zh/">å®˜ç½‘ä¼ é€é—¨</a></p><h2 id="æ¦‚è¿°">æ¦‚è¿°</h2><p>ä½•ä¸º Vuex ï¼Ÿ</p><p>Vuex ä¸“é—¨åœ¨ Vue ä¸­å®ç°é›†ä¸­å¼çŠ¶æ€ï¼ˆæ•°æ®ï¼‰ç®¡ç†çš„ä¸€ä¸ª Vue æ’ä»¶ï¼Œå¯¹ Vue åº”ç”¨ä¸­å¤šä¸ªç»„ä»¶çš„å…±äº«çŠ¶æ€è¿›è¡Œé›†ä¸­å¼çš„ç®¡ç†ï¼Œä¹Ÿæ˜¯ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œé€‚ç”¨äºä»»æ„ç»„ä»¶é—´é€šä¿¡</p><p>ä½•æ—¶ç”¨ Vuex ï¼Ÿ</p><ul><li>å¤šä¸ªç»„ä»¶ä¾èµ–äºåŒä¸€çŠ¶æ€</li><li>æ¥è‡ªä¸åŒç»„ä»¶çš„è¡Œä¸ºéœ€è¦å˜æ›´åŒä¸€çŠ¶æ€</li></ul><p>Vuex å·¥ä½œåŸç†å›¾ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/vuex.6007da7c.png" alt="Vuexå·¥ä½œåŸç†"></p><p>å®˜æ–¹ Vuex é¡¹ç›®ç»“æ„ç¤ºä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ index.html</span><br><span class="line">â”œâ”€â”€ main.js</span><br><span class="line">â”œâ”€â”€ api</span><br><span class="line">â”‚   â””â”€â”€ ... # æŠ½å–å‡ºAPIè¯·æ±‚</span><br><span class="line">â”œâ”€â”€ components</span><br><span class="line">â”‚   â”œâ”€â”€ App.vue</span><br><span class="line">â”‚   â””â”€â”€ ...</span><br><span class="line">â””â”€â”€ store</span><br><span class="line">    â”œâ”€â”€ index.js          # ç»„è£…æ¨¡å—å¹¶å¯¼å‡º store çš„åœ°æ–¹</span><br><span class="line">    â”œâ”€â”€ actions.js        # æ ¹çº§åˆ«çš„ action</span><br><span class="line">    â”œâ”€â”€ mutations.js      # æ ¹çº§åˆ«çš„ mutation</span><br><span class="line">    â””â”€â”€ modules</span><br><span class="line">        â”œâ”€â”€ cart.js       # è´­ç‰©è½¦æ¨¡å—</span><br><span class="line">        â””â”€â”€ products.js   # äº§å“æ¨¡å—</span><br></pre></td></tr></table></figure><h2 id="Vuex-æ ¸å¿ƒæ¦‚å¿µ">Vuex æ ¸å¿ƒæ¦‚å¿µ</h2><h3 id="state">state</h3><ul><li>Vuex ç®¡ç†çš„çŠ¶æ€å¯¹è±¡</li><li>å”¯ä¸€çš„</li></ul><h3 id="actions">actions</h3><ul><li>å€¼ä¸ºä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«å¤šä¸ªå“åº”ç”¨æˆ·åŠ¨ä½œçš„å›è°ƒå‡½æ•°</li><li>é€šè¿‡ <code>commit()</code>è§¦å‘ mutation ä¸­å‡½æ•°çš„è°ƒç”¨ï¼Œé—´æ¥æ›´æ–° state</li><li>å¯åŒ…å«å¼‚æ­¥ä»£ç </li></ul><h3 id="mutations">mutations</h3><ul><li>å€¼ä¸ºä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«å¤šä¸ªç›´æ¥æ›´æ–° state çš„æ–¹æ³•</li><li>ä¸èƒ½å†™å¼‚æ­¥ä»£ç ï¼Œåªèƒ½å•çº¯åœ°æ“ä½œ state</li></ul><h3 id="getters">getters</h3><ul><li>å€¼ä¸ºä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«å¤šä¸ªç”¨äºè¿”å›æ•°æ®çš„å‡½æ•°</li><li>ç±»ä¼¼äºè®¡ç®—å±æ€§ï¼Œgetters è¿”å›çš„æ•°æ®ä¾èµ–äº state çš„æ•°æ®</li></ul><h3 id="modules">modules</h3><ul><li>ä¸€ä¸ª module æ˜¯ä¸€ä¸ª store çš„é…ç½®å¯¹è±¡ï¼Œä¸ä¸€ä¸ªç»„ä»¶å¯¹åº”</li></ul><h2 id="æ­å»º-Vuex-ç¯å¢ƒ">æ­å»º Vuex ç¯å¢ƒ</h2><p>å®‰è£… Vuexï¼š<code>npm install vuex@3 --save</code></p><blockquote><p>æ³¨æ„ï¼šVue2 å®‰è£… Vuex3ï¼ŒVue3 å®‰è£… Vuex4ï¼Œç‰ˆæœ¬éœ€å¯¹åº”ã€‚</p></blockquote><p>åˆ›å»ºæ–‡ä»¶ <code>src/store/index.js</code> ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> actions = &#123;&#125;</span><br><span class="line"><span class="keyword">const</span> mutations = &#123;&#125;</span><br><span class="line"><span class="keyword">const</span> state = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  actions,</span><br><span class="line">  mutations,</span><br><span class="line">  state,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><code>main.js</code> é…ç½® <code>store</code> ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  store,</span><br><span class="line">  <span class="attr">render</span>: <span class="function">(<span class="params">h</span>) =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="åŸºæœ¬ä½¿ç”¨-v4">åŸºæœ¬ä½¿ç”¨</h2><p>ç»„ä»¶å®ä¾‹ä¸ <code>Actions</code> å’Œ <code>Mutations</code> å¯¹è¯ï¼š</p><ul><li>è‹¥æ²¡æœ‰ç½‘ç»œè¯·æ±‚æˆ–å…¶ä»–ä¸šåŠ¡é€»è¾‘ï¼Œç»„ä»¶ä¸­ä¹Ÿå¯ä»¥è¶Šè¿‡ <code>actions</code> ï¼Œå³ä¸å†™<code>dispatch</code>ï¼Œç›´æ¥ç¼–å†™<code>commit</code>ï¼š</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;ADD&#x27;</span>, <span class="variable language_">this</span>.<span class="property">number</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">incrementOdd</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;addOdd&#x27;</span>, <span class="variable language_">this</span>.<span class="property">number</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">incrementAsync</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;addAsync&#x27;</span>, <span class="variable language_">this</span>.<span class="property">number</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®šä¹‰ <code>Actions</code> å’Œ <code>Mutations</code>ï¼š</p><ul><li><code>context</code> æ˜¯ä¸€ä¸ªè¿·ä½ ç‰ˆçš„ <code>store</code>ï¼Œå¯è®¿é—® <code>dispatch</code>, <code>commit</code> æ–¹æ³•å’Œ <code>state</code></li><li><code>mutations</code> çš„åŠ¨ä½œç±»å‹ä¸€èˆ¬ç”¨å¤§å†™ï¼Œä¸ <code>actions</code> åŒºåˆ†</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">  <span class="comment">// context æ˜¯ä¸€ä¸ªè¿·ä½ ç‰ˆçš„ store</span></span><br><span class="line">  <span class="comment">// å¯è®¿é—® dispatch, commit æ–¹æ³•å’Œ state</span></span><br><span class="line">  <span class="title function_">addOdd</span>(<span class="params">context, value</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (context.<span class="property">state</span>.<span class="property">sum</span> % <span class="number">2</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">      context.<span class="title function_">commit</span>(<span class="string">&#x27;ADD&#x27;</span>, value)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">addAsync</span>(<span class="params">context, value</span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      context.<span class="title function_">commit</span>(<span class="string">&#x27;ADD&#x27;</span>, value)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">  <span class="comment">// mutations çš„åŠ¨ä½œç±»å‹ä¸€èˆ¬ç”¨å¤§å†™ï¼Œä¸ actions åŒºåˆ†</span></span><br><span class="line">  <span class="title function_">ADD</span>(<span class="params">state, value</span>) &#123;</span><br><span class="line">    state.<span class="property">sum</span> += value</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">  <span class="attr">sum</span>: <span class="number">0</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  actions,</span><br><span class="line">  mutations,</span><br><span class="line">  state,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ç»„ä»¶è®¿é—® Vuex çš„æ•°æ®ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; $store.state.sum &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="getters-çš„ä½¿ç”¨">getters çš„ä½¿ç”¨</h2><ul><li>å½“ <code>state</code> ä¸­çš„æ•°æ®éœ€è¦ç»è¿‡åŠ å·¥åå†ä½¿ç”¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>getters</code> åŠ å·¥</li><li>å®ƒä¸æ˜¯å¿…é¡»çš„ï¼Œå½“åŠ å·¥é€»è¾‘å¤æ‚ä¸”éœ€è¦å¤ç”¨æ—¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨</li><li><code>state</code> ä¸ <code>getters</code> çš„å…³ç³»æœ‰ç‚¹åƒ <code>data</code> å’Œ <code>computed</code> çš„å…³ç³»</li><li>ç»„ä»¶è¯»å–ï¼š<code>$store.getters.bigSum</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">const</span> getters = &#123;</span><br><span class="line">  <span class="title function_">bigSum</span>(<span class="params">state</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> state.<span class="property">sum</span> * <span class="number">10</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  actions,</span><br><span class="line">  mutations,</span><br><span class="line">  state,</span><br><span class="line">  getters</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="å››ä¸ª-mapXxx-æ–¹æ³•">å››ä¸ª mapXxx æ–¹æ³•</h2><h3 id="mapState">mapState()</h3><ul><li>å°† <code>state</code> çŠ¶æ€æ˜ å°„ä¸ºè®¡ç®—å±æ€§</li><li>å¯¹è±¡å†™æ³•ï¼šé”®ä¸ºè‡ªå–çš„è®¡ç®—å±æ€§åï¼Œå€¼ä¸ºå¯¹åº”çš„çŠ¶æ€ï¼ˆå¿…é¡»ä¸ºå­—ç¬¦ä¸²ï¼‰</li><li>æ•°ç»„å†™æ³•ï¼šå½“é”®å€¼åŒåï¼Œå¯ç›´æ¥å†™çŠ¶æ€åï¼ˆå­—ç¬¦ä¸²ï¼‰</li><li>å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼š<code>&#123;sum: f, price: f&#125;</code></li><li>æ³¨æ„å¯¹è±¡çš„ <code>...&#123;&#125;</code> å±•å¼€å†™æ³•</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">  <span class="comment">// æ‰‹åŠ¨å†™æ³•</span></span><br><span class="line">  <span class="title function_">sum</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">sum</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">price</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">price</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¯¹è±¡å†™æ³•</span></span><br><span class="line">  ...<span class="title function_">mapState</span>(&#123;<span class="attr">sum</span>: <span class="string">&#x27;sum&#x27;</span>, <span class="attr">price</span>: <span class="string">&#x27;price&#x27;</span>&#125;),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ•°ç»„å†™æ³•</span></span><br><span class="line">  ...<span class="title function_">mapState</span>([<span class="string">&#x27;sum&#x27;</span>, <span class="string">&#x27;price&#x27;</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="mapGetters">mapGetters</h3><ul><li>å°† <code>getters</code> çš„æ•°æ®æ˜ å°„ä¸ºè®¡ç®—å±æ€§</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">  <span class="title function_">bigSum</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">getters</span>.<span class="property">bigSum</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">double</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">getters</span>.<span class="property">double</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¯¹è±¡å†™æ³•</span></span><br><span class="line">  ...<span class="title function_">mapGetters</span>(&#123;<span class="attr">bigSum</span>: <span class="string">&#x27;bigSum&#x27;</span>, <span class="attr">double</span>: <span class="string">&#x27;double&#x27;</span>&#125;),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ•°ç»„å†™æ³•</span></span><br><span class="line">  ...<span class="title function_">mapGetters</span>([<span class="string">&#x27;bigSum&#x27;</span>, <span class="string">&#x27;double&#x27;</span>]),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="mapActions">mapActions</h3><ul><li>ç”Ÿæˆä¸ <code>actions</code> å¯¹è¯çš„å‡½æ•°ï¼Œå³åŒ…å« <code>$store.dispatch()</code></li><li><code>mapActions</code> ç”Ÿæˆçš„å‡½æ•°ä¸ä¼šä¼ å…¥å‚æ•°ï¼Œéœ€è¦åœ¨è°ƒç”¨æ—¶æ‰‹åŠ¨ä¼ å…¥æ•°æ®ï¼Œä¸ä¼ å‚é»˜è®¤ä¼ å…¥ <code>$event</code></li><li>æ•°ç»„å†™æ³•è¦æ³¨æ„å‡½æ•°åå’Œ <code>actions</code> åŠ¨ä½œç±»å‹åŒåï¼Œè°ƒç”¨æ—¶å‹¿å†™é”™</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapActions &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="comment">// æ‰‹åŠ¨å†™æ³•</span></span><br><span class="line">  <span class="title function_">incrementOdd</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;addOdd&#x27;</span>, <span class="variable language_">this</span>.<span class="property">number</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">incrementAsync</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;addAsync&#x27;</span>, <span class="variable language_">this</span>.<span class="property">number</span>)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¯¹è±¡å†™æ³•</span></span><br><span class="line">  ...<span class="title function_">mapActions</span>(&#123;<span class="attr">incrementOdd</span>: <span class="string">&#x27;addOdd&#x27;</span>, <span class="attr">incrementAsync</span>: <span class="string">&#x27;addAsync&#x27;</span>&#125;),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ•°ç»„å†™æ³•</span></span><br><span class="line">  ...<span class="title function_">mapActions</span>([<span class="string">&#x27;addOdd&#x27;</span>, <span class="string">&#x27;addAsync&#x27;</span>]),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;incrementOdd(number)&quot;</span>&gt;</span>å¥‡æ•°+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="mapMutations">mapMutations</h3><ul><li>ç”Ÿæˆä¸ <code>mutations</code> å¯¹è¯çš„å‡½æ•°ï¼Œå³åŒ…å« <code>$store.commit()</code></li><li>åŒæ ·æ³¨æ„ä¼ é€’å‚æ•°ï¼Œä»¥åŠæ•°ç»„å½¢å¼å‡½æ•°åçš„é—®é¢˜</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapMutations &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;ADD&#x27;</span>, <span class="variable language_">this</span>.<span class="property">number</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">decrement</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;SUB&#x27;</span>, <span class="variable language_">this</span>.<span class="property">number</span>)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¯¹è±¡å†™æ³•</span></span><br><span class="line">  ...<span class="title function_">mapMutations</span>(&#123;<span class="attr">increment</span>: <span class="string">&#x27;ADD&#x27;</span>, <span class="attr">decrement</span>: <span class="string">&#x27;SUB&#x27;</span>&#125;),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ•°ç»„å†™æ³•</span></span><br><span class="line">  ...<span class="title function_">mapMutations</span>([<span class="string">&#x27;ADD&#x27;</span>, <span class="string">&#x27;SUB&#x27;</span>]),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Vuex-æ¨¡å—åŒ–-å‘½åç©ºé—´">Vuex æ¨¡å—åŒ–&amp;å‘½åç©ºé—´</h2><p>è®©ä»£ç æ›´å¥½ç»´æŠ¤ï¼Œè®©å¤šç§æ•°æ®åˆ†ç±»æ›´åŠ æ˜ç¡®ï¼Œæ¯ä¸€ç±»æ•°æ®åŠå…¶ç›¸å…³æ“ä½œå¯¹åº”ä¸€ä¸ª <code>store</code> ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/store/index.js</span></span><br><span class="line"><span class="keyword">const</span> countAbout = &#123;</span><br><span class="line">  <span class="comment">// å¼€å¯å‘½åç©ºé—´</span></span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">sum</span>: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;...&#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;...&#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="title function_">bigSum</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.<span class="property">sum</span> * <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> personAbout = &#123;</span><br><span class="line">  <span class="comment">// å¼€å¯å‘½åç©ºé—´</span></span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">personList</span>: []</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;...&#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;...&#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;...&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">    countAbout,</span><br><span class="line">    personAbout</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å¼€å¯å‘½åç©ºé—´åï¼Œç»„ä»¶ä¸­è¯»å– <code>state</code> æ•°æ®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›´æ¥è¯»å–</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">personAbout</span>.<span class="property">personList</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// mapState è¯»å–</span></span><br><span class="line">...<span class="title function_">mapState</span>(<span class="string">&#x27;countAbout&#x27;</span>,[<span class="string">&#x27;sum&#x27;</span>,<span class="string">&#x27;school&#x27;</span>]),</span><br></pre></td></tr></table></figure><p>å¼€å¯å‘½åç©ºé—´åï¼Œç»„ä»¶ä¸­è¯»å– <code>getters</code> æ•°æ®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›´æ¥è¯»å–</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">getters</span>[<span class="string">&#x27;countAbout/bigSum&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// mapGetters è¯»å–ï¼š</span></span><br><span class="line">...<span class="title function_">mapGetters</span>(<span class="string">&#x27;countAbout&#x27;</span>,[<span class="string">&#x27;bigSum&#x27;</span>])</span><br></pre></td></tr></table></figure><p>å¼€å¯å‘½åç©ºé—´åï¼Œç»„ä»¶ä¸­è°ƒç”¨ <code>dispatch</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›´æ¥ dispatch</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;countAbout/addODdd&#x27;</span>, <span class="variable language_">this</span>.<span class="property">number</span>)</span><br><span class="line"><span class="comment">// å€ŸåŠ© mapActions</span></span><br><span class="line">...<span class="title function_">mapActions</span>(<span class="string">&#x27;countAbout&#x27;</span>, &#123;<span class="attr">incrementOdd</span>:<span class="string">&#x27;addOdd&#x27;</span>, <span class="attr">incrementWait</span>:<span class="string">&#x27;addAsync&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure><p>å¼€å¯å‘½åç©ºé—´åï¼Œç»„ä»¶ä¸­è°ƒç”¨ <code>commit</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›´æ¥ commit</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;personAbout/ADD_PERSON&#x27;</span>, person)</span><br><span class="line"><span class="comment">// å€ŸåŠ© mapMutations</span></span><br><span class="line">...<span class="title function_">mapMutations</span>(<span class="string">&#x27;countAbout&#x27;</span>,&#123;<span class="attr">increment</span>:<span class="string">&#x27;ADD&#x27;</span>,<span class="attr">decrement</span>:<span class="string">&#x27;SUB&#x27;</span>&#125;),</span><br></pre></td></tr></table></figure><h1>Vue Router</h1><p><a href="https://router.vuejs.org/zh/">å®˜ç½‘ä¼ é€é—¨</a></p><h2 id="è·¯ç”±">è·¯ç”±</h2><h3 id="ä½•ä¸ºè·¯ç”±">ä½•ä¸ºè·¯ç”±</h3><ul><li>ä¸€ç»„è·¯ç”±å³ä¸€ç»„æ˜ å°„å…³ç³»ï¼ˆkey-valueï¼‰</li><li>key ä¸ºè·¯å¾„ï¼Œvalue å¯èƒ½æ˜¯ function æˆ– component</li></ul><h3 id="å‰ç«¯è·¯ç”±">å‰ç«¯è·¯ç”±</h3><p>å‰ç«¯è·¯ç”±å³åœ°å€å’Œç»„ä»¶ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼ˆä»¥ä¸‹å·²å“ˆå¸Œæ¨¡å¼ä¸ºä¾‹ï¼‰ã€‚</p><p>å‰ç«¯è·¯ç”±ç®€æ˜“å·¥ä½œæ–¹å¼ï¼š</p><ol><li>ç”¨æˆ·ç‚¹å‡»äº†é¡µé¢ä¸Šçš„è·¯ç”±é“¾æ¥</li><li>URL åœ°å€çš„ Hash å€¼å‘ç”Ÿå˜åŒ–</li><li>å‰ç«¯è·¯ç”±ç›‘å¬åˆ° Hash å€¼çš„å˜åŒ–</li><li>å‰ç«¯è·¯ç”±æ¸²æŸ“ Hash åœ°å€å¯¹åº”çš„ç»„ä»¶</li></ol><p>å®ç°ç®€æ˜“çš„å‰ç«¯è·¯ç”±ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- a é“¾æ¥æ·»åŠ å¯¹åº” Hash å€¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#/home&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#/movie&quot;</span>&gt;</span>Movie<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#/about&quot;</span>&gt;</span>About<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- åŠ¨æ€æ¸²æŸ“ç»„ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;compName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">compName</span>: <span class="string">&#x27;Home&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// ç›‘å¬ Hash åœ°å€æ”¹å˜ï¼Œåˆ‡æ¢ç»„ä»¶</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">onhashchange</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">switch</span>(location.<span class="property">hash</span>) &#123;</span><br><span class="line">        <span class="attr">case</span>: <span class="string">&#x27;#/home&#x27;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">compName</span> = <span class="string">&#x27;Home&#x27;</span></span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="attr">case</span>: <span class="string">&#x27;#/movie&#x27;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">compName</span> = <span class="string">&#x27;Movie&#x27;</span></span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="attr">case</span>: <span class="string">&#x27;#/about&#x27;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">compName</span> = <span class="string">&#x27;About&#x27;</span></span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åç«¯è·¯ç”±">åç«¯è·¯ç”±</h3><ul><li>åç«¯è·¯ç”±æ˜¯æŒ‡è¯·æ±‚æ–¹å¼ã€è¯·æ±‚åœ°å€ä¸ <code>function</code> å¤„ç†å‡½æ•°ä¹‹é—´çš„å¯¹åº”å…³ç³»</li><li>æœåŠ¡å™¨æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚ï¼Œæ ¹æ®è¯·æ±‚æ–¹å¼ã€è·¯å¾„åŒ¹é…å¯¹åº”çš„å‡½æ•°å¤„ç†è¯·æ±‚ï¼Œè¿”å›å“åº”æ•°æ®</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>()</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/userlist&#x27;</span>, <span class="keyword">function</span>(<span class="params">req, res</span>) &#123;...&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router</span><br></pre></td></tr></table></figure><h2 id="å•é¡µé¢åº”ç”¨ç¨‹åº-SPA">å•é¡µé¢åº”ç”¨ç¨‹åº SPA</h2><p>å•é¡µé¢åº”ç”¨ç¨‹åºå°†æ‰€æœ‰çš„åŠŸèƒ½å±€é™äºä¸€ä¸ª web é¡µé¢ä¸­ï¼Œä»…åœ¨è¯¥ web é¡µé¢åˆå§‹åŒ–æ—¶åŠ è½½ç›¸åº”çš„èµ„æºï¼ˆ HTMLã€JavaScript å’Œ CSSï¼‰ã€‚ ä¸€æ—¦é¡µé¢åŠ è½½å®Œæˆäº†ï¼ŒSPA ä¸ä¼šå› ä¸ºç”¨æˆ·çš„æ“ä½œè€Œè¿›è¡Œé¡µé¢çš„é‡æ–°åŠ è½½æˆ–è·³è½¬ã€‚è€Œæ˜¯åˆ©ç”¨ JavaScript åŠ¨æ€åœ°å˜æ¢ HTML çš„å†…å®¹ï¼Œä»è€Œå®ç°é¡µé¢ä¸ç”¨æˆ·çš„äº¤äº’ã€‚</p><p>SPA çš„ä¼˜ç‚¹ï¼š</p><ul><li>è‰¯å¥½çš„äº¤äº’ä½“éªŒ<ul><li>å†…å®¹çš„æ”¹å˜ä¸éœ€è¦é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢</li><li>æ•°æ®é€šè¿‡ <code>Ajax</code> å¼‚æ­¥è·å–</li><li>æ²¡æœ‰é¡µé¢è·³è½¬ï¼Œä¸ä¼šå‡ºç°ç™½å±ç°è±¡</li></ul></li><li>è‰¯å¥½çš„å‰åç›¾å·¥ä½œåˆ†ç¦»æ¨¡å¼<ul><li>åç«¯ä¸“æ³¨äºæä¾› API æ¥å£ï¼Œæ›´æ˜“å®ç°æ¥å£å¤ç”¨</li><li>å‰ç«¯ä¸“æ³¨é¡µé¢æ¸²æŸ“ï¼Œæ›´åˆ©äºå‰ç«¯å·¥ç¨‹åŒ–å‘å±•</li></ul></li><li>å‡è½»æœåŠ¡å™¨å‹åŠ›<ul><li>æœåŠ¡å™¨åªæä¾›æ•°æ®ï¼Œä¸è´Ÿè´£é¡µé¢çš„åˆæˆä¸é€»è¾‘å¤„ç†ï¼Œååèƒ½åŠ›ä¼šæé«˜</li></ul></li></ul><p>SPA çš„ç¼ºç‚¹ï¼š</p><ul><li>é¦–å±åŠ è½½æ…¢ï¼šå¯ä½¿ç”¨è·¯ç”±æ‡’åŠ è½½ã€ä»£ç å‹ç¼©ã€CDN åŠ é€Ÿã€ç½‘ç»œä¼ è¾“å‹ç¼©</li><li>ä¸åˆ©äº SEO ï¼šSSR æœåŠ¡å™¨ç«¯æ¸²æŸ“</li></ul><h2 id="vue-router-åˆä½“éªŒ">vue-router åˆä½“éªŒ</h2><p>å®‰è£… <code>vue-router</code>ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-router@3.5.2 -S</span><br></pre></td></tr></table></figure><p>åˆ›å»ºè·¯ç”±æ¨¡å—ï¼Œåœ¨ <code>src</code> æºä»£ç ç›®å½•ä¸‹ï¼Œæ–°å»º <code>router/index.js</code> è·¯ç”±æ¨¡å—ï¼Œåˆå§‹åŒ–ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;@/component/Home.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;@/component/About.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Movie</span> <span class="keyword">from</span> <span class="string">&#x27;@/component/Movie.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠŠ VueRouter å®‰è£…ä¸º Vue çš„æ’ä»¶</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·¯ç”±åŒ¹é…è§„åˆ™</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Home</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>, <span class="attr">component</span>: <span class="title class_">About</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/movie&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Movie</span> &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºè·¯ç”±å®ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  routes,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><p>åœ¨ <code>main.js</code> æ–‡ä»¶ä¸­å¯¼å…¥å¹¶æŒ‚è½½è·¯ç”±æ¨¡å—ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router/index.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  router,</span><br><span class="line">  <span class="attr">render</span>: <span class="function">(<span class="params">h</span>) =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><p>åœ¨ç»„ä»¶ä¸­å£°æ˜è·¯ç”±é“¾æ¥å’Œå ä½ç¬¦ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è·¯ç”±é“¾æ¥ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>å…³äº<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/movie&quot;</span>&gt;</span>ç”µå½±<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è·¯ç”±å‡ºå£ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>ç»„ä»¶åˆ†ä¸ºè·¯ç”±ç»„ä»¶å’Œä¸€èˆ¬ç»„ä»¶ï¼Œå‰è€…æ”¾åœ¨ <code>pages(æˆ–views)</code> æ–‡ä»¶å¤¹ï¼Œåè€…æ”¾åœ¨ <code>components</code> æ–‡ä»¶å¤¹</li><li>æ¯ä¸ªç»„ä»¶éƒ½æœ‰ <code>$route</code> å±æ€§ï¼Œå­˜å‚¨ç€ç»„ä»¶çš„è·¯ç”±è§„åˆ™ä¿¡æ¯</li><li><code>$router</code> æ˜¯è·¯ç”±å™¨å¯¹è±¡ï¼Œæ•´ä¸ª SPA åªæœ‰ä¸€ä¸ª</li></ul><h2 id="å£°æ˜å¼å¯¼èˆª">å£°æ˜å¼å¯¼èˆª</h2><p><code>&lt;router-link&gt;</code> 4 ä¸ªå¸¸ç”¨å±æ€§ï¼š</p><ol><li><code>to</code> å±æ€§</li></ol><ul><li>ç”¨äºæŒ‡å®šè·³è½¬è·¯ç”±</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li><code>tag</code> å±æ€§</li></ol><ul><li>æŒ‡æ˜ <code>&lt;router-link&gt;</code> æœ€ç»ˆè¢«æ¸²æŸ“ä¸ºä½•ç§æ ‡ç­¾ï¼Œé»˜è®¤æ˜¯ a æ ‡ç­¾</li><li>æ¸²æŸ“ä¸ºå…¶ä»–æ ‡ç­¾ä¹Ÿä¼šç›‘å¬ç‚¹å‡»ï¼Œè§¦å‘å¯¼èˆª</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span> <span class="attr">tag</span>=<span class="string">&quot;li&quot;</span>&gt;</span>tag<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span>tag<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="3"><li><code>replace</code> å±æ€§</li></ol><ul><li>è·¯ç”±è·³è½¬ä¸ä¼šå¢åŠ æ–°çš„å†å²è®°å½•ï¼Œè€Œæ˜¯æ›¿æ¢å½“å‰å†å²è®°å½•</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span> <span class="attr">replace</span>&gt;</span>About<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="4"><li><code>active-class</code> å±æ€§</li></ol><ul><li>æŒ‡æ˜è·¯ç”±è¢«æ¿€æ´»æ—¶æ·»åŠ çš„ç±»åï¼Œé»˜è®¤ä¸º <code>router-link-active</code></li><li>è¯¦è§<a href="https://brucecai55520.gitee.io/bruceblog/notes/vue/vue-router.html#%E8%B7%AF%E7%94%B1%E9%AB%98%E4%BA%AE">è·¯ç”±é«˜äº®</a></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span>&gt;</span>About<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="è·¯ç”±é«˜äº®">è·¯ç”±é«˜äº®</h2><p>è¢«æ¿€æ´»çš„è·¯ç”±é“¾æ¥ï¼Œé»˜è®¤ä¼šæ·»åŠ  <code>router-link-active</code> çš„ç±»åã€‚å¯æ®æ­¤ä¸ºæ¿€æ´»çš„è·¯ç”±é“¾æ¥è®¾ç½®é«˜äº®çš„æ ·å¼ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.router-link-active</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">  <span class="attribute">background-color</span>: pink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®šä¹‰è·¯ç”±æ¨¡å—æ—¶å¯ä»¥è‡ªå®šä¹‰è·¯ç”±é“¾æ¥è¢«æ¿€æ´»æ—¶æ·»åŠ çš„ç±»åï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="comment">// é»˜è®¤çš„ router-link-active ä¼šè¢«è¦†ç›–</span></span><br><span class="line">  <span class="attr">linkActiveClass</span>: <span class="string">&#x27;active-hello&#x27;</span>,</span><br><span class="line">  routes,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å£°æ˜è·¯ç”±é“¾æ¥æ—¶ä¹Ÿå¯ç”¨ <code>active-class</code> å±æ€§è‡ªå®šä¹‰æ¿€æ´»ç±»åï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- router-link-active ä¼šè¢«è¦†ç›–ä¸º active --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>About<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="è·¯ç”±é‡å®šå‘">è·¯ç”±é‡å®šå‘</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  <span class="comment">// è®¿é—® / è·³è½¬åˆ° /home</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/home&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">component</span>: <span class="string">&#x27;Home&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>, <span class="attr">component</span>: <span class="string">&#x27;About&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/movie&#x27;</span>, <span class="attr">component</span>: <span class="string">&#x27;Movie&#x27;</span> &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  routes,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><h2 id="åµŒå¥—è·¯ç”±">åµŒå¥—è·¯ç”±</h2><p><code>About</code> ç»„ä»¶ä¸­å£°æ˜å­è·¯ç”±é“¾æ¥å’Œå­è·¯ç”±å ä½ç¬¦ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;about-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è¦æŠŠçˆ¶è·¯ç”±å¯«ä¸Š --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about/tab1&quot;</span>&gt;</span>tab1<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about/tab2&quot;</span>&gt;</span>tab2<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡ <code>children</code> å±æ€§å£°æ˜å­è·¯ç”±è§„åˆ™ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="string">&#x27;About&#x27;</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      <span class="comment">// æ³¨æ„ä¸è¦å†™æˆ /tab1</span></span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;tab1&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Tab1</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;tab2&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Tab2</span> &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="ç¼–ç¨‹å¼å¯¼èˆª">ç¼–ç¨‹å¼å¯¼èˆª</h2><p>å£°æ˜å¼å¯¼èˆªï¼š</p><ul><li>é€šè¿‡ç‚¹å‡»é“¾æ¥å®ç°å¯¼èˆª</li><li>å¦‚æ™®é€šç½‘é¡µç‚¹å‡» <code>a</code> é“¾æ¥ï¼Œ<code>vue</code> ç‚¹å‡» <code>&lt;router-link&gt;</code></li></ul><p>ç¼–ç¨‹å¼å¯¼èˆªï¼š</p><ul><li>é€šè¿‡è°ƒç”¨ API å®ç°å¯¼èˆª</li><li>æ™®é€šç½‘é¡µé€šè¿‡ <code>location.href</code> çš„æ–¹å¼è·³è½¬é¡µé¢ä¹Ÿæ˜¯ç¼–ç¨‹å¼å¯¼èˆª</li></ul><p><code>vue-router</code> ä¸­å®ç°ç¼–ç¨‹å¼å¯¼èˆªçš„ API ï¼š</p><ul><li><code>this.$router.push('hashåœ°å€')</code> ï¼šè·³è½¬åˆ°æŒ‡å®šé¡µé¢ï¼Œå¹¶å¢åŠ ä¸€æ¡å†å²è®°å½•</li><li><code>this.$router.replace('hashåœ°å€')</code> ï¼šè·³è½¬é¡µé¢ï¼Œä½†ä¸ä¼šæ–°å¢å†å²è®°å½•ï¼Œè€Œæ˜¯æ›¿æ¢å½“å‰çš„å†å²è®°å½•</li><li><code>this.$router.go(æ•°å€¼)</code> ï¼šå†å²è®°å½•å‰è¿›æˆ–åé€€ï¼Œç›¸å½“äºç‚¹å‡»æµè§ˆå™¨å‰è¿›åé€€ç®­å¤´</li><li><code>this.$router.forward()</code> ï¼šå‰è¿›ä¸€æ­¥</li><li><code>this.$router.back()</code> ï¼šåé€€ä¸€æ­¥</li></ul><h2 id="å‘½åè·¯ç”±">å‘½åè·¯ç”±</h2><p>ç»™è·¯ç”±å‘½åï¼ŒæŸäº›æƒ…å†µå¯ç®€åŒ–è·¯ç”±è·³è½¬å†™æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;about&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">About</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123; name: &#x27;about&#x27;&#125; &quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123; name: &#x27;about&#x27;, query: &#123; id: 1, title: &#x27;hello&#x27; &#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="è·¯ç”±ä¼ å‚">è·¯ç”±ä¼ å‚</h2><h3 id="query-å‚æ•°">query å‚æ•°</h3><p>ä¼ é€’å‚æ•°ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å­—ç¬¦ä¸²å†™æ³• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;`/home/detail?id=$&#123;id&#125;&amp;title=$&#123;title&#125;`&quot;</span>&gt;</span>å­—ç¬¦ä¸²å†™æ³•<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¯¹è±¡å†™æ³• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:to</span>=<span class="string">&quot;&#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">    path: &#x27;/home/detail&#x27;,</span></span></span><br><span class="line"><span class="string"><span class="tag">    query: &#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">      id: 1,</span></span></span><br><span class="line"><span class="string"><span class="tag">      title: &#x27;hello&#x27;,</span></span></span><br><span class="line"><span class="string"><span class="tag">    &#125;</span></span></span><br><span class="line"><span class="string"><span class="tag">  &#125;&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  å¯¹è±¡å†™æ³•</span><br><span class="line"><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">`/home/detail?id=<span class="subst">$&#123;id&#125;</span>&amp;title=<span class="subst">$&#123;title&#125;</span>`</span>)</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123; <span class="attr">path</span>: <span class="string">&#x27;/home/detail&#x27;</span>, <span class="attr">query</span>: &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">title</span>: <span class="string">&#x27;query&#x27;</span> &#125; &#125;)</span><br></pre></td></tr></table></figure><p>æ¥æ”¶å‚æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">query</span>.<span class="property">id</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">query</span>.<span class="property">title</span></span><br></pre></td></tr></table></figure><h3 id="params-å‚æ•°ï¼ˆåŠ¨æ€è·¯ç”±ï¼‰">params å‚æ•°ï¼ˆåŠ¨æ€è·¯ç”±ï¼‰</h3><p>åŠ¨æ€è·¯ç”±æ˜¯æŠŠ Hash åœ°å€ä¸­å¯å˜çš„éƒ¨åˆ†å®šä¹‰ä¸ºå‚æ•°é¡¹ï¼Œä»è€Œæé«˜è·¯ç”±è§„åˆ™çš„å¤ç”¨æ€§ã€‚</p><p>å£°æ˜ params å‚æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰åŠ¨æ€è·¯ç”±å‚æ•°</span></span><br><span class="line">&#123; <span class="attr">path</span>: <span class="string">&#x27;/movie/:id/:age&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Movie</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¸‹ç±»ä¼¼çš„è·¯ç”±è§„åˆ™éƒ½èƒ½åˆå¹¶ä¸ºä¸Šè¿°è§„åˆ™ï¼Œå¤ç”¨æ€§å¾—åˆ°æé«˜</span></span><br><span class="line">&#123; <span class="attr">path</span>: <span class="string">&#x27;/movie/1/21&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Movie</span> &#125;</span><br><span class="line">&#123; <span class="attr">path</span>: <span class="string">&#x27;/movie/2/22&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Movie</span> &#125;</span><br><span class="line">&#123; <span class="attr">path</span>: <span class="string">&#x27;/movie/3/23&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Movie</span> &#125;</span><br></pre></td></tr></table></figure><p>ä¼ é€’ params å‚æ•°ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;/movie/1/21&quot;</span>&gt;</span>å­—ç¬¦ä¸²å†™æ³•<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¯¹è±¡å†™æ³•åªèƒ½å’Œ name æ­é…ä½¿ç”¨ï¼Œä¸èƒ½å’Œ path æ­é… --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:to</span>=<span class="string">&quot;&#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">  name: &#x27;movie&#x27;,</span></span></span><br><span class="line"><span class="string"><span class="tag">  params: &#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">    id: 1,</span></span></span><br><span class="line"><span class="string"><span class="tag">    age: 21</span></span></span><br><span class="line"><span class="string"><span class="tag">  &#125;</span></span></span><br><span class="line"><span class="string"><span class="tag">&#125;&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  å¯¹è±¡å†™æ³•</span><br><span class="line"><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- query å’Œ params å¯ä»¥ä¸€èµ·ç”¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;`/movie/1/21?id=$&#123;id&#125;`&quot;</span>&gt;</span>å­—ç¬¦ä¸²å†™æ³•<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:to</span>=<span class="string">&quot;&#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">    name:&#x27;movie&#x27;, </span></span></span><br><span class="line"><span class="string"><span class="tag">    params: &#123;id:1, age:21&#125;, </span></span></span><br><span class="line"><span class="string"><span class="tag">    query: &#123;school: &#x27;love&#x27;&#125;</span></span></span><br><span class="line"><span class="string"><span class="tag">  &#125;&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  å¯¹è±¡å†™æ³•</span><br><span class="line"><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">`/movie/1/21?id=<span class="subst">$&#123;id&#125;</span>`</span>)</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;movie&#x27;</span>, <span class="attr">params</span>: &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">age</span>: <span class="number">21</span> &#125;, <span class="attr">query</span>: &#123; <span class="attr">school</span>: <span class="string">&#x27;love&#x27;</span> &#125; &#125;)</span><br></pre></td></tr></table></figure><p>æ¥æ”¶ params å‚æ•°ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;movie-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Movieç»„ä»¶ï¼Œå‚æ•°å€¼ï¼š&#123;&#123; this.$route.params.id &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="è·¯ç”±çš„-props-é…ç½®">è·¯ç”±çš„ props é…ç½®</h3><p>ç®€åŒ–è·¯ç”±ç»„ä»¶æ¥æ”¶å‚æ•°ã€‚</p><p>åœ¨è·¯ç”±è§„åˆ™ä¸­å¼€å¯ <code>props</code> ä¼ å‚ï¼Œç»„ä»¶å¯ä»¥ä½¿ç”¨ <code>props</code> æ¥æ”¶è·¯ç”±å‚æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/movie/:id/:title&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="title class_">Movie</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ–¹å¼ä¸€ï¼šè¯¥å¯¹è±¡ä¸­çš„æ‰€æœ‰ key-value éƒ½ä¼šä»¥ props çš„å½¢å¼ä¼ ç»™ç»„ä»¶</span></span><br><span class="line">  <span class="comment">// è¯¥æ–¹å¼æ˜¯å†™æ­»çš„ï¼Œå°‘ç”¨</span></span><br><span class="line">  <span class="attr">props</span>: &#123;<span class="attr">id</span>: <span class="number">666</span>, <span class="attr">title</span>: <span class="string">&#x27;hello&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ–¹å¼äºŒï¼šæŠŠ params å‚æ•°ä»¥ props çš„å½¢å¼ä¼ ç»™ç»„ä»¶</span></span><br><span class="line">  <span class="comment">// åªèƒ½æ¥æ”¶ params å‚æ•°</span></span><br><span class="line">  <span class="attr">props</span>: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ–¹å¼ä¸‰ï¼šå‡½æ•°å†™æ³•ï¼Œå•¥éƒ½èƒ½ä¼ </span></span><br><span class="line">  <span class="title function_">props</span>(<span class="params">$route</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">id</span>: $route.<span class="property">query</span>.<span class="property">id</span>,</span><br><span class="line">      <span class="attr">title</span>: $route.<span class="property">params</span>.<span class="property">title</span>,</span><br><span class="line">      <span class="attr">age</span>: <span class="number">21</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»„ä»¶æ¥æ”¶å‚æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// ä½¿ç”¨ props æ¥æ”¶è·¯ç”±è§„åˆ™çš„å‚æ•°é¡¹</span></span><br><span class="line">  <span class="attr">props</span>: [<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;title&#x27;</span>],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Movieç»„ä»¶ï¼Œå‚æ•°å€¼ï¼š&#123;&#123; id &#125;&#125;ï¼Œé¢˜ç›®ï¼š&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="è·¯ç”±ä¼ å‚æ³¨æ„äº‹é¡¹">è·¯ç”±ä¼ å‚æ³¨æ„äº‹é¡¹</h3><ol><li>path ä¸èƒ½å’Œ params ä¸€èµ·ä½¿ç”¨ã€‚path+queryã€name+query/params éƒ½è¡Œ</li><li>å¦‚ä½•æŒ‡å®š params å‚æ•°å¯ä¼ å¯ä¸ä¼ ï¼Ÿ</li></ol><ul><li>è‹¥å£°æ˜äº† params å‚æ•° <code>path: '/movie/:title'</code>ï¼Œé»˜è®¤æ˜¯å¿…é¡»è¦ä¼ é€’ params å‚æ•°çš„ï¼Œå¦åˆ™ URL ä¼šå‡ºç°é—®é¢˜</li><li>æŒ‡å®š params å‚æ•°å¯ä¸ä¼ ï¼š<code>path: '/movie/:title?'</code></li></ul><ol start="3"><li>å·²æŒ‡æ˜ params å‚æ•°å¯ä¼ å¯ä¸ä¼ ï¼Œä½†å¦‚æœä¼ é€’ç©ºä¸²ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ</li></ol><ul><li>ä¼ é€’ç©ºä¸²ï¼ŒURL ä¹Ÿä¼šå‡ºç°é—®é¢˜</li><li>æ–¹æ³•ï¼šä½¿ç”¨ <code>undefined</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;search&#x27;</span>, <span class="attr">params</span>: &#123; <span class="attr">keyword</span>: <span class="string">&#x27;&#x27;</span> &#125;, <span class="attr">query</span>: &#123; <span class="attr">key</span>: <span class="variable language_">this</span>.<span class="property">key</span> &#125; &#125;)</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;search&#x27;</span>, <span class="attr">params</span>: &#123; <span class="attr">keyword</span>: <span class="string">&#x27;&#x27;</span> || <span class="literal">undefined</span> &#125;, <span class="attr">query</span>: &#123; <span class="attr">key</span>: <span class="variable language_">this</span>.<span class="property">key</span> &#125; &#125;)</span><br></pre></td></tr></table></figure><h2 id="è·¯ç”±å…ƒä¿¡æ¯-meta">è·¯ç”±å…ƒä¿¡æ¯ meta</h2><p>åœ¨ <code>meta</code> ä¸­å¯ä»¥ä¸ºè·¯ç”±æ·»åŠ è‡ªå®šä¹‰ä¿¡æ¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;about&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">About</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;hello&#x27;</span>, <span class="attr">isAuth</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="è·¯ç”±å®ˆå«">è·¯ç”±å®ˆå«</h2><blockquote><p>ä½œç”¨ï¼šå¯¹è·¯ç”±è¿›è¡Œæƒé™æ§åˆ¶ã€‚</p><p>åˆ†ç±»ï¼šå…¨å±€å®ˆå«ã€ç‹¬äº«å®ˆå«ã€ç»„ä»¶å†…å®ˆå«</p></blockquote><h3 id="å…¨å±€å®ˆå«">å…¨å±€å®ˆå«</h3><ul><li>å…¨å±€å‰ç½®å®ˆå«ï¼š<code>beforeEach()</code></li><li>å…¨å±€åç½®å®ˆå«ï¼š<code>afterEach()</code></li></ul><p>å®ˆå«å›è°ƒå‡½æ•° 3 ä¸ªå½¢å‚ï¼š</p><ul><li><code>to</code> ï¼šå°†è¦è®¿é—®çš„è·¯ç”±çš„ä¿¡æ¯å¯¹è±¡ï¼Œå³ <code>$route</code></li><li><code>from</code> ï¼šå°†è¦ç¦»å¼€çš„è·¯ç”±çš„ä¿¡æ¯å¯¹è±¡</li><li><code>next</code> ï¼šæ”¾è¡Œå‡½æ•°ï¼ˆåç½®å®ˆå«æ²¡æœ‰ï¼‰</li></ul><p><code>next</code> å‡½æ•° 3 ç§è°ƒç”¨æ–¹å¼ï¼š</p><ul><li>ç›´æ¥æ”¾è¡Œï¼š<code>next()</code></li><li>å¼ºåˆ¶è·³è½¬åˆ°å…¶ä»–è·¯ç”±ï¼š<code>next(/login)</code></li><li>é˜»æ­¢æœ¬æ¬¡è·³è½¬ï¼š<code>next(false)</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;...&#125;)</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span>(to.<span class="property">path</span> === <span class="string">&#x27;/main&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> token = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(token) &#123;</span><br><span class="line">      <span class="title function_">next</span>()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title function_">next</span>(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title function_">next</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">(<span class="params">to,<span class="keyword">from</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span>(to.<span class="property">meta</span>.<span class="property">title</span>) &#123;</span><br><span class="line">    <span class="comment">// ä¿®æ”¹ç½‘é¡µæ ‡é¢˜</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = to.<span class="property">meta</span>.<span class="property">title</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">&#x27;vue_test&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="ç‹¬äº«è·¯ç”±å®ˆå«">ç‹¬äº«è·¯ç”±å®ˆå«</h3><ul><li>æŸä¸€æ¡è·¯ç”±è§„åˆ™ç‹¬äº«çš„å®ˆå«</li><li>ç‹¬äº«å®ˆå«åªä¸€ä¸ª</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;about&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="title class_">About</span>,</span><br><span class="line">  <span class="title function_">beforeEnter</span>(<span class="params">to, <span class="keyword">from</span> ,next</span>) &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»„ä»¶å†…è·¯ç”±å®ˆå«">ç»„ä»¶å†…è·¯ç”±å®ˆå«</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;About&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿›å…¥å®ˆå«ï¼šé€šè¿‡è·¯ç”±è§„åˆ™ï¼Œè¿›å…¥è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨</span></span><br><span class="line">  <span class="title function_">beforeRouteEnter</span>(<span class="params">to, <span class="keyword">from</span>, next</span>) &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç¦»å¼€å®ˆå«ï¼šé€šè¿‡è·¯ç”±è§„åˆ™ï¼Œç¦»å¼€è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨</span></span><br><span class="line">  beforeRouteLeave (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å„ä¸ªå®ˆå«æ‰§è¡Œé¡ºåº">å„ä¸ªå®ˆå«æ‰§è¡Œé¡ºåº</h3><p>ä» <code>About</code> ç»„ä»¶é€šè¿‡è·¯ç”±è§„åˆ™è¿›å…¥ <code>Home</code> ç»„ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">About-beforeRouteLeave</span><br><span class="line">beforeEach</span><br><span class="line">Home-beforeEnter</span><br><span class="line">Home-beforeRouteEnter</span><br><span class="line">afterEach</span><br><span class="line">Homeç»„ä»¶ç”Ÿå‘½å‘¨æœŸå¼€å§‹</span><br></pre></td></tr></table></figure><h2 id="vue-router-4-x">vue-router 4.x</h2><p>ç›®å‰ <code>vue-router</code> æœ‰ <code>3.x</code> å’Œ <code>4.x</code> ä¸¤ä¸ªç‰ˆæœ¬ï¼Œå‰è€…åªèƒ½åœ¨ <code>vue2.x</code> ä¸­ä½¿ç”¨ï¼Œåè€…åªèƒ½åœ¨ <code>vue3.x</code> ä¸­ä½¿ç”¨ã€‚</p><p>ä¸‹é¢æ˜¯ <code>vue-router 4.x</code> åˆä½“éªŒï¼š</p><p>å®‰è£… <code>vue-router 4.x</code> ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-router@next -S</span><br></pre></td></tr></table></figure><p>åˆ›å»ºè·¯ç”±æ¨¡å—ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä» vue-router æŒ‰éœ€å¯¼å…¥ä¸¤ä¸ªæ–¹æ³•</span></span><br><span class="line"><span class="comment">// createRouterï¼šåˆ›å»ºè·¯ç”±å®ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="comment">// createWebHashHistoryï¼šæŒ‡å®šè·¯ç”±å·¥ä½œæ¨¡å¼ä¸º hash æ¨¡å¼</span></span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHashHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHashHistory</span>(),</span><br><span class="line">  <span class="attr">routes</span>: [&#123; <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Home</span> &#125;],</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><p><code>main.js</code> å¯¼å…¥å¹¶æŒ‚è½½è·¯ç”±æ¨¡å—ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><h1>Vue3</h1><p><a href="https://v3.cn.vuejs.org/">å®˜ç½‘ä¼ é€é—¨</a>Vue3 çš„å˜åŒ–</p><p><strong>æ€§èƒ½çš„æå‡</strong></p><ul><li>æ‰“åŒ…å¤§å°å‡å°‘ 41%</li><li>åˆæ¬¡æ¸²æŸ“å¿« 55%, æ›´æ–°æ¸²æŸ“å¿« 133%</li><li>å†…å­˜å‡å°‘ 54%</li></ul><p><strong>æºç çš„å‡çº§</strong></p><ul><li>ä½¿ç”¨ Proxy ä»£æ›¿ defineProperty å®ç°å“åº”å¼</li><li>é‡å†™è™šæ‹Ÿ DOM çš„å®ç°å’Œ Tree-Shaking</li></ul><p><strong>æ‹¥æŠ± TypeScript</strong></p><ul><li>Vue3 å¯ä»¥æ›´å¥½çš„æ”¯æŒ TypeScript</li></ul><p><strong>æ–°çš„ç‰¹æ€§</strong></p><ol><li>Composition APIï¼ˆç»„åˆ APIï¼‰</li></ol><ul><li>setup é…ç½®</li><li>ref ä¸ reactive</li><li>watch ä¸ watchEffect</li><li>provide ä¸ inject</li><li>â€¦</li></ul><ol start="2"><li>æ–°çš„å†…ç½®ç»„ä»¶</li></ol><ul><li>Fragment</li><li>Teleport</li><li>Suspense</li></ul><ol start="3"><li>å…¶ä»–æ”¹å˜</li></ol><ul><li>æ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­</li><li>data é€‰é¡¹åº”å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°</li><li>ç§»é™¤ keyCode æ”¯æŒä½œä¸º v-on çš„ä¿®é¥°ç¬¦</li><li>â€¦</li></ul><h2 id="åˆ›å»º-Vue3-å·¥ç¨‹">åˆ›å»º Vue3 å·¥ç¨‹</h2><h3 id="vite-å’Œ-vue-cli-å¯¹æ¯”">vite å’Œ vue-cli å¯¹æ¯”</h3><table><thead><tr><th></th><th>vite</th><th>vue-cli</th></tr></thead><tbody><tr><td>æ”¯æŒçš„ vue ç‰ˆæœ¬</td><td>ä»…æ”¯æŒ vue3.x</td><td>æ”¯æŒ 2.x å’Œ 3.x</td></tr><tr><td>æ˜¯å¦åŸºäº webpack</td><td>å¦</td><td>æ˜¯</td></tr><tr><td>è¿è¡Œé€Ÿåº¦</td><td>å¿«</td><td>è¾ƒæ…¢</td></tr><tr><td>åŠŸèƒ½å®Œæ•´åº¦</td><td>å°è€Œå·§</td><td>å¤§è€Œå…¨</td></tr><tr><td>æ˜¯å¦å»ºè®®ä¼ä¸šçº§å¼€å‘ä½¿ç”¨</td><td>æš‚ä¸å»ºè®®</td><td>å»ºè®®</td></tr></tbody></table><h3 id="ä½¿ç”¨-vue-cli-åˆ›å»º">ä½¿ç”¨ vue-cli åˆ›å»º</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### æŸ¥çœ‹ @vue/cli ç‰ˆæœ¬ï¼Œç¡®ä¿ @vue/cli ç‰ˆæœ¬åœ¨4.5.0ä»¥ä¸Š</span></span><br><span class="line">vue --version</span><br><span class="line"><span class="comment">### å®‰è£…æˆ–è€…å‡çº§ @vue/cli</span></span><br><span class="line">npm install -g @vue/cli</span><br><span class="line"><span class="comment">### åˆ›å»º</span></span><br><span class="line">vue create vue_test</span><br><span class="line"><span class="comment">### å¯åŠ¨</span></span><br><span class="line"><span class="built_in">cd</span> vue_test</span><br><span class="line">npm run serve</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨-vite-åˆ›å»º">ä½¿ç”¨ vite åˆ›å»º</h3><ul><li><a href="https://vitejs.cn/">vite </a>ï¼šæ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·</li><li>ä¼˜åŠ¿ï¼š<ul><li>å¼€å‘ç¯å¢ƒä¸­ï¼Œæ— éœ€æ‰“åŒ…æ“ä½œï¼Œå¯å¿«é€Ÿå†·å¯åŠ¨ï¼ˆwebpack æ¯æ¬¡è¿è¡Œé¡¹ç›®éƒ½è¦æ‰“åŒ…ï¼‰</li><li>è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½ HMRï¼ˆæ›´æ”¹ä»£ç å±€éƒ¨åˆ·æ–°ï¼Œwebpack ä¹Ÿè¡Œï¼Œä½† vite æ›´è½»é‡ï¼‰</li><li>çœŸæ­£çš„æŒ‰éœ€ç¼–è¯‘ï¼Œæ— éœ€ç­‰å¾…æ•´ä¸ªåº”ç”¨ç¼–è¯‘å®Œæˆ</li></ul></li><li>ä¼ ç»Ÿæ„å»º ä¸ vite æ„å»ºå¯¹æ¯”ï¼ˆvite ç°ç”¨ç°åˆ†æï¼ŒæŒ‰éœ€å¯¼å…¥ï¼Œå› æ­¤é¡¹ç›®å¯åŠ¨æ›´å¿«ï¼‰</li></ul><p><img src= "/img/loading.gif" data-lazy-src="https://brucecai55520.gitee.io/bruceblog/assets/img/bundle.532fd73f.png" alt="Bundle"></p><p><img src= "/img/loading.gif" data-lazy-src="https://brucecai55520.gitee.io/bruceblog/assets/img/ESM.9634d534.png" alt="ESM"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm init vite-app é¡¹ç›®åç§°</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> é¡¹ç›®åç§°</span><br><span class="line">npm install</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><h2 id="Vue3-é¡¹ç›®ç»“æ„">Vue3 é¡¹ç›®ç»“æ„</h2><p>Vue3 ä¸­ <code>main.js</code> ä»£ç æœ‰æ‰€æ”¹å˜ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸å†å¼•å…¥ Vue æ„é€ å‡½æ•°ï¼Œè€Œæ˜¯å¼•å…¥ createApp å·¥å‚å‡½æ•°</span></span><br><span class="line"><span class="comment">// createAppå‡½æ•°ï¼šåˆ›å»º vue çš„ SPA å®ä¾‹</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºåº”ç”¨å®ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><p>Vue3 æ”¯æŒå®šä¹‰å¤šä¸ªæ ¹èŠ‚ç‚¹ï¼Œç»„ä»¶çš„ <code>&lt;template&gt;</code> æ”¯æŒå®šä¹‰å¤šä¸ªæ ¹èŠ‚ç‚¹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æ ¹èŠ‚ç‚¹<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æ ¹èŠ‚ç‚¹<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å¸¸ç”¨-Composition-API">å¸¸ç”¨ Composition API</h2><h3 id="setup">setup</h3><ul><li>setup æ˜¯ Vue3 ä¸­ä¸€ä¸ªæ–°çš„é…ç½®é¡¹ï¼Œå€¼ä¸ºå‡½æ•°</li><li>ç»„ä»¶ä¸­ä½¿ç”¨çš„æ•°æ®ã€æ–¹æ³•ç­‰éƒ½è¦é…ç½®åœ¨ setup ä¸­</li><li>setup å‡½æ•°ä¸¤ç§è¿”å›å€¼ï¼š<ul><li>è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­çš„å±æ€§ã€æ–¹æ³•å¯åœ¨æ¨¡æ¿ä¸­ç›´æ¥ä½¿ç”¨</li><li>è¿”å›ä¸€ä¸ªæ¸²æŸ“å‡½æ•°ï¼Œå¯è‡ªå®šä¹‰æ¸²æŸ“å†…å®¹</li></ul></li><li>setup å‡½æ•°çš„å‚æ•°ï¼š<ul><li>propsï¼šå€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«äº†ç»„ä»¶å¤–éƒ¨ä¼ è¿›æ¥ï¼Œä¸”ç»„ä»¶å†…éƒ¨å£°æ˜æ¥æ”¶çš„å±æ€§</li><li>contextï¼šä¸Šä¸‹æ–‡å¯¹è±¡<ul><li><code>attrs</code>ï¼šå€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«äº†ç»„ä»¶å¤–éƒ¨ä¼ è¿›æ¥ï¼Œä¸”ç»„ä»¶å†…éƒ¨æ²¡æœ‰å£°æ˜æ¥æ”¶çš„å±æ€§ï¼Œç›¸å½“äº <code>this.$attrs</code></li><li><code>slots</code>ï¼šæ”¶åˆ°çš„æ’æ§½å†…å®¹ï¼Œç›¸å½“äº <code>this.$slots</code></li><li><code>emit</code>ï¼šè§¦å‘è‡ªå®šä¹‰äº‹ä»¶çš„å‡½æ•°ï¼Œç›¸å½“äº <code>this.$emit</code></li></ul></li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ²¡é”™ï¼Œæ¸²æŸ“å‡½æ•°å°±å« h</span></span><br><span class="line"><span class="keyword">import</span> &#123; h &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span><br><span class="line">  <span class="attr">props</span>: [<span class="string">&#x27;title&#x27;</span>],</span><br><span class="line">  <span class="comment">// Vue3 éœ€è¦å£°æ˜è‡ªå®šä¹‰äº‹ä»¶ï¼Œè™½ç„¶ä¸å£°æ˜ä¹Ÿèƒ½è¿è¡Œ</span></span><br><span class="line">  <span class="attr">emits</span>: [<span class="string">&#x27;changeCount&#x27;</span>],</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿”å›å‡½æ•°</span></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  setup() &#123;</span></span><br><span class="line"><span class="comment">    return () =&gt; h(&#x27;h1&#x27;, &#x27;Hello&#x27;)</span></span><br><span class="line"><span class="comment">  &#125;,</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿”å›å¯¹è±¡</span></span><br><span class="line">  <span class="title function_">setup</span>(<span class="params">props, context</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> name = <span class="string">&#x27;Vue3&#x27;</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">sayHello</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">      context.<span class="title function_">emit</span>(<span class="string">&#x27;changeCount&#x27;</span>, <span class="number">888</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      name,</span><br><span class="line">      sayHello,</span><br><span class="line">      test,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li>setup åœ¨ <code>beforeCreate</code> é’©å­ä¹‹å‰æ‰§è¡Œï¼Œ<code>this</code> ä¸º <code>undefined</code></li><li>setup ä¸è¦å’Œ Vue2 é…ç½®æ··ç”¨ã€‚Vue2 çš„é…ç½®å¯ä»¥è®¿é—®åˆ° setup çš„å±æ€§æ–¹æ³•ï¼Œåè¿‡æ¥ä¸è¡Œï¼›å¦‚æœ‰é‡åï¼Œsetup ä¼˜å…ˆ</li><li>setup ä¸èƒ½æ˜¯ async å‡½æ•°ï¼Œå› ä¸º async å‡½æ•°è¿”å›çš„æ˜¯ promise ä¸æ˜¯å¯¹è±¡ï¼Œä¼šå¯¼è‡´æ¨¡æ¿æ— æ³•è®¿é—®å±æ€§æ–¹æ³•</li><li>è‹¥è¦è¿”å› promise å®ä¾‹ï¼Œéœ€è¦ <code>Suspense</code> å’Œå¼‚æ­¥ç»„ä»¶çš„é…åˆ</li></ul><h3 id="ref-å‡½æ•°">ref å‡½æ•°</h3><p>ä½œç”¨ï¼šå®šä¹‰å“åº”å¼æ•°æ®</p><p>è¯­æ³•ï¼š<code>const name = ref(initValue)</code></p><ul><li><code>ref</code> å‡½æ•°è¿”å›ä¸€ä¸ª <code>RefImpl</code>(reference implement) å®ä¾‹å¯¹è±¡ï¼Œå…¨ç§°å¼•ç”¨å®ç°çš„å®ä¾‹å¯¹è±¡</li><li>å®ƒåŒ…å«å“åº”å¼æ•°æ®ï¼Œç®€ç§°å¼•ç”¨å¯¹è±¡ã€reference å¯¹è±¡ã€ref å¯¹è±¡</li><li>JS è®¿é—®æ•°æ®ï¼š<code>name.value</code></li><li>æ¨¡æ¿è®¿é—®æ•°æ®ï¼š<code>&lt;div&gt;&lt;/div&gt;</code></li></ul><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li><code>ref</code> å‡½æ•°å¯ä»¥æ¥æ”¶åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹</li><li>åŸºæœ¬ç±»å‹æ•°æ®çš„å“åº”å¼è¿˜æ˜¯é  <code>Object.defineProperty()</code> å®Œæˆ</li><li>å¯¹è±¡ç±»å‹æ•°æ®ä½¿ç”¨ ES6 çš„ Proxy å®ç°å“åº”å¼ï¼ŒVue3 æŠŠç›¸å…³æ“ä½œå°è£…åœ¨ <code>reactive</code> å‡½æ•°ä¸­</li><li>æŒ‰ç…§ä¹‹å‰çš„åŠæ³•ï¼Œå¯¹äºå¯¹è±¡æ•°æ®ï¼Œåº”è¯¥éå†æ¯ä¸€å±‚çš„å±æ€§æ·»åŠ  <code>getter</code> ã€<code>setter</code>ï¼Œä½† Vue3 ä½¿ç”¨ Proxy æŠŠå†…éƒ¨æ•°æ®ä¸€å£æ°”ç›‘æµ‹äº†</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; jobInfo.type &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> name = <span class="title function_">ref</span>(<span class="string">&#x27;Vue3&#x27;</span>)</span><br><span class="line">    <span class="keyword">let</span> jobInfo = <span class="title function_">ref</span>(&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;frontend&#x27;</span>,</span><br><span class="line">      <span class="attr">salary</span>: <span class="string">&#x27;40w&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">changeInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">      name.<span class="property">value</span> = <span class="string">&#x27;é±¿é±¼ä¸&#x27;</span></span><br><span class="line">      <span class="comment">// jobInfo æ˜¯ RefImpl å®ä¾‹</span></span><br><span class="line">      <span class="comment">// jobInfo.value æ˜¯ Proxy å®ä¾‹å¯¹è±¡</span></span><br><span class="line">      jobInfo.<span class="property">value</span>.<span class="property">salary</span> = <span class="string">&#x27;50w&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      name,</span><br><span class="line">      jobInfo,</span><br><span class="line">      changeInfo,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="reactive-å‡½æ•°">reactive å‡½æ•°</h3><ul><li>å®šä¹‰å¼•ç”¨ç±»å‹çš„å“åº”å¼æ•°æ®ï¼Œä¸å¯ç”¨äº jibenleixingshuju</li><li><code>const ä»£ç†å¯¹è±¡ = reactive(æºå¯¹è±¡)</code> æ¥æ”¶å¯¹è±¡æˆ–æ•°ç»„ï¼Œè¿”å›ä»£ç†å¯¹è±¡ï¼ˆProxy çš„å®ä¾‹å¯¹è±¡ï¼‰</li><li><code>reactive</code> çš„å“åº”å¼æ˜¯æ·±åº¦çš„</li><li>åŸºäº ES6 çš„ Proxy å®ç°ï¼Œé€šè¿‡ä»£ç†å¯¹è±¡æ“ä½œæºå¯¹è±¡å†…éƒ¨æ•°æ®</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;Vue3&#x27;</span>,</span><br><span class="line">      <span class="attr">sex</span>: <span class="string">&#x27;unknown&#x27;</span>,</span><br><span class="line">      <span class="attr">info</span>: &#123;</span><br><span class="line">        <span class="attr">school</span>: <span class="string">&#x27;Oxford&#x27;</span>,</span><br><span class="line">        <span class="attr">major</span>: <span class="string">&#x27;computer&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> color = <span class="title function_">reactive</span>([<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;green&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">changeInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">      person.<span class="property">info</span>.<span class="property">major</span> = <span class="string">&#x27;art&#x27;</span></span><br><span class="line">      color[<span class="number">0</span>] = <span class="string">&#x27;yellow&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      person,</span><br><span class="line">      color,</span><br><span class="line">      changeInfo,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ref-VS-reactive">ref VS reactive</h3><p>å®šä¹‰æ•°æ®ï¼š</p><ul><li>ref ç”¨äºå®šä¹‰åŸºæœ¬ç±»å‹æ•°æ®</li><li>reactive ç”¨äºå®šä¹‰å¯¹è±¡æˆ–æ•°ç»„ç±»å‹æ•°æ®</li><li>ref ä¹Ÿå¯å®šä¹‰å¯¹è±¡æˆ–æ•°ç»„ç±»å‹æ•°æ®ï¼Œå†…éƒ¨é€šè¿‡ reactive è½¬ä¸ºä»£ç†å¯¹è±¡</li><li>ä¸€èˆ¬ä½¿ç”¨ reactive å‡½æ•°ï¼Œå¯ä»¥æŠŠæ‰€æœ‰æ•°æ®å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡</li></ul><p>åŸç†ï¼š</p><ul><li>ref é€šè¿‡ <code>Object.defineProperty()</code> å®ç°å“åº”å¼</li><li>reactive é€šè¿‡ Proxy å®ç°å“åº”å¼ï¼ŒReflect æ“ä½œæºå¯¹è±¡æ•°æ®</li></ul><p>ä½¿ç”¨è§’åº¦ï¼š</p><ul><li>ref å®šä¹‰æ•°æ®ï¼Œè®¿é—®æ•°æ®éœ€è¦ <code>.value</code>ï¼Œæ¨¡æ¿ä¸­ä¸éœ€è¦</li><li>reactive å®šä¹‰çš„æ•°æ®ï¼Œéƒ½ä¸éœ€è¦</li></ul><h3 id="Vue3-å“åº”å¼åŸç†">Vue3 å“åº”å¼åŸç†</h3><ul><li>é€šè¿‡ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy">Proxy </a>ä»£ç†ï¼Œæ‹¦æˆªå¯¹å¯¹è±¡å±æ€§çš„æ“ä½œï¼ŒåŒ…æ‹¬å¢åˆ æ”¹æŸ¥</li><li>é€šè¿‡ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect">Reflect </a>åå°„ï¼Œå¯¹æºå¯¹è±¡çš„å±æ€§è¿›è¡Œæ“ä½œ</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> originPerson = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Lily&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">22</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> <span class="title class_">Proxy</span>(originPerson, &#123;</span><br><span class="line">  <span class="comment">// æ‹¦æˆªå¢åŠ å’ŒæŸ¥è¯¢æ“ä½œ</span></span><br><span class="line">  <span class="title function_">get</span>(<span class="params">target, prop</span>) &#123;</span><br><span class="line">    <span class="comment">// è¯»å–æºå¯¹è±¡çš„å±æ€§</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">get</span>(originPerson, prop)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// æ‹¦æˆªä¿®æ”¹æ“ä½œ</span></span><br><span class="line">  <span class="title function_">set</span>(<span class="params">target, prop, value</span>) &#123;</span><br><span class="line">    <span class="comment">// ä¿®æ”¹æºå¯¹è±¡çš„å±æ€§</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target, prop, value)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// æ‹¦æˆªåˆ é™¤æ“ä½œ</span></span><br><span class="line">  <span class="title function_">deleteProperty</span>(<span class="params">target, prop</span>) &#123;</span><br><span class="line">    <span class="comment">// åˆ é™¤æºå¯¹è±¡çš„å±æ€§</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">deleteProperty</span>(target, prop)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">name</span>)</span><br><span class="line">person.<span class="property">age</span> = <span class="number">33</span></span><br><span class="line">person.<span class="property">sex</span> = <span class="string">&#x27;unknown&#x27;</span></span><br><span class="line"><span class="keyword">delete</span> person.<span class="property">age</span></span><br></pre></td></tr></table></figure><h3 id="computed-å‡½æ•°">computed å‡½æ•°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, computed &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">      <span class="attr">firstName</span>: <span class="string">&#x27;Cai&#x27;</span>,</span><br><span class="line">      <span class="attr">lastName</span>: <span class="string">&#x27;QP&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¡ç®—å±æ€§ç®€å†™å½¢å¼</span></span><br><span class="line">    person.<span class="property">fullName</span> = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> person.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span> + person.<span class="property">lastName</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¡ç®—å±æ€§å®Œæ•´å½¢å¼</span></span><br><span class="line">    person.<span class="property">fullName</span> = <span class="title function_">computed</span>(&#123;</span><br><span class="line">      <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> person.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span> + person.<span class="property">lastName</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="title function_">set</span>(<span class="params">value</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> arr = value.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">        person.<span class="property">firstName</span> = arr[<span class="number">0</span>]</span><br><span class="line">        person.<span class="property">lastName</span> = arr[<span class="number">1</span>]</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      person,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="watch-å‡½æ•°">watch å‡½æ•°</h3><p>Vue3 <code>watch</code> èƒ½ä¾¦å¬çš„ä¸œè¥¿ï¼š</p><blockquote><p>A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, reactive, watch &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•°æ®</span></span><br><span class="line"><span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">let</span> msg = <span class="title function_">ref</span>(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Vue3&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">  <span class="attr">info</span>: &#123;</span><br><span class="line">    <span class="attr">job</span>: &#123;</span><br><span class="line">      <span class="attr">salary</span>: <span class="number">40</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>ä¾¦å¬ ref å®šä¹‰çš„å“åº”å¼æ•°æ®</strong>ï¼š</p><ul><li>æ³¨æ„ä¸è¦å†™æˆ <code>sum.value</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‚æ•°ï¼šä¾¦å¬çš„æ•°æ®ï¼Œå›è°ƒï¼Œå…¶ä»–é…ç½®</span></span><br><span class="line"><span class="title function_">watch</span>(</span><br><span class="line">  sum,</span><br><span class="line">  <span class="function">(<span class="params">newVal, oldVal</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newVal, oldVal)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">immediate</span>: <span class="literal">true</span> &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><strong>ä¾¦å¬å¤šä¸ª ref å®šä¹‰çš„å“åº”å¼æ•°æ®</strong>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// newValï¼ŒoldVal ä¹Ÿæ˜¯æ•°ç»„</span></span><br><span class="line"><span class="title function_">watch</span>([sum, msg], <span class="function">(<span class="params">newVal, oldVal</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(newVal, oldVal)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>ä¾¦å¬ ref å®šä¹‰çš„å¯¹è±¡ç±»å‹æ•°æ®</strong>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”¨ ref å®šä¹‰å¯¹è±¡ç±»å‹æ•°æ®</span></span><br><span class="line"><span class="keyword">let</span> person = <span class="title function_">ref</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Vue3&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">  <span class="attr">info</span>: &#123;</span><br><span class="line">    <span class="attr">job</span>: &#123;</span><br><span class="line">      <span class="attr">salary</span>: <span class="number">40</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼€å¯æ·±åº¦ç›‘å¬æ‰æœ‰æ•ˆï¼Œæ­¤æ—¶ç›‘å¬çš„æ˜¯ RefImpl å®ä¾‹</span></span><br><span class="line"><span class="comment">// Ref å®ä¾‹çš„ value æ˜¯ Proxy å¯¹è±¡ï¼Œå­˜çš„æ˜¯åœ°å€</span></span><br><span class="line"><span class="comment">// å› æ­¤æ— æ³•ç›‘å¬ person å†…éƒ¨å±æ€§çš„å˜åŒ–</span></span><br><span class="line"><span class="title function_">watch</span>(person, <span class="function">(<span class="params">newVal, oldVal</span>) =&gt;</span> &#123; ... &#125;, &#123; <span class="attr">deep</span>:<span class="literal">true</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ä¸ªå’Œ â€œä¾¦å¬ reactive å‡½æ•°ç›´æ¥è¿”å›çš„é‚£ä¸€æ•´å¨å“åº”å¼æ•°æ®â€ æ•ˆæœä¸€è‡´</span></span><br><span class="line"><span class="title function_">watch</span>(person.<span class="property">value</span>, <span class="function">(<span class="params">newVal, oldVal</span>) =&gt;</span> &#123;...&#125;)</span><br></pre></td></tr></table></figure><p><strong>ä¾¦å¬ reactive å‡½æ•°ç›´æ¥è¿”å›çš„é‚£ä¸€æ•´å¨å“åº”å¼æ•°æ®</strong>ï¼š</p><ul><li>oldVal æ˜¯é”™è¯¯çš„ï¼å’Œ newVal çš„å€¼ä¸€æ ·</li><li>å¼ºåˆ¶å¼€å¯äº†æ·±åº¦ä¾¦å¬ï¼Œ<code>deep</code> é…ç½®ä¸ç”Ÿæ•ˆï¼</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">watch</span>(</span><br><span class="line">  person,</span><br><span class="line">  <span class="function">(<span class="params">newVal, oldVal</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newVal, oldVal)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">immediate</span>: <span class="literal">true</span>, <span class="attr">deep</span>: <span class="literal">false</span> &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><strong>ä¾¦å¬ reactive å®šä¹‰çš„å“åº”å¼æ•°æ®æŸä¸ªå±æ€§</strong>ï¼š</p><ul><li>å¦‚æœæ˜¯ <code>() =&gt; person.info</code> oldVal ä¹Ÿæ˜¯é”™è¯¯çš„ï¼</li><li><code>() =&gt; person.name</code> oldVal æ˜¯æ­£ç¡®çš„ï¼Œä½•æ—¶å¯¹ä½•æ—¶é”™è‡ªå·±ç¢ç£¨å§ï¼</li><li>æ­¤å¤„æ²¡æœ‰å¼ºåˆ¶å¼€å¯æ·±åº¦ç›‘å¬</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¦‚æœç›‘è§†çš„å±æ€§è¿˜æ˜¯å¯¹è±¡ï¼Œåˆ™éœ€è¦å¼€å¯æ·±åº¦ç›‘å¬</span></span><br><span class="line"><span class="title function_">watch</span>(</span><br><span class="line">  <span class="function">() =&gt;</span> person.<span class="property">info</span>,</span><br><span class="line">  <span class="function">(<span class="params">newVal, oldVal</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newVal, oldVal)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">deep</span>: <span class="literal">true</span> &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><strong>ä¾¦å¬ reactive å®šä¹‰çš„å“åº”å¼æ•°æ®å¤šä¸ªå±æ€§</strong>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">watch</span>(</span><br><span class="line">  [<span class="function">() =&gt;</span> person.<span class="property">name</span>, <span class="function">() =&gt;</span> person.<span class="property">info</span>],</span><br><span class="line">  <span class="function">(<span class="params">newVal, oldVal</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newVal, oldVal)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">deep</span>: <span class="literal">true</span> &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="watchEffect-å‡½æ•°">watchEffect å‡½æ•°</h3><ul><li><code>watchEffect</code> ä¸éœ€è¦æŒ‡æ˜ç›‘å¬å“ªä¸ªå±æ€§ï¼Œå›è°ƒé‡Œç”¨åˆ°å“ªä¸ªå±æ€§ï¼Œå°±è‡ªåŠ¨ç›‘å¬å“ªä¸ªå±æ€§</li><li><code>computed</code> æ³¨é‡è®¡ç®—çš„å€¼ï¼Œå³å›è°ƒå‡½æ•°çš„è¿”å›å€¼ï¼Œå› æ­¤å¿…é¡»æœ‰è¿”å›å€¼</li><li><code>watchEffect</code> æ›´æ³¨é‡è¿‡ç¨‹ï¼Œå³å›è°ƒå‡½æ•°çš„å‡½æ•°ä½“ï¼Œå› æ­¤å¯æ²¡æœ‰è¿”å›å€¼</li><li><code>watchEffect</code> æ²¡æœ‰å¼€å¯æ·±åº¦ç›‘å¬ï¼Œä¹Ÿä¸èƒ½å¼€å¯æ·±åº¦ç›‘å¬ï¼</li><li><code>watchEffect</code> å†…éƒ¨è‡ªè¡Œä¿®æ”¹æ•°æ®ï¼Œä¸ä¼šé‡æ–°è°ƒç”¨å›è°ƒï¼Œå› æ­¤ä¸ä¼šå‡ºç°é€’å½’è°ƒç”¨</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å›è°ƒä¸­ç”¨åˆ°çš„æ•°æ®åªè¦å‘ç”Ÿå˜åŒ–ï¼Œåˆ™ç›´æ¥é‡æ–°æ‰§è¡Œå›è°ƒ</span></span><br><span class="line"><span class="title function_">watchEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> total = sum.<span class="property">value</span></span><br><span class="line">  <span class="keyword">let</span> p = person</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;watchEffect...&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="ç”Ÿå‘½å‘¨æœŸ">ç”Ÿå‘½å‘¨æœŸ</h3><p>æ³¨æ„å’Œ <code>vue2.x</code> çš„ç”Ÿå‘½å‘¨æœŸå›¾ä½œå¯¹æ¯”ï¼Œ<code>beforeDestroy</code> å’Œ <code>destroyed</code> å˜ä¸º <code>beforeUnmount</code> å’Œ <code>unmounted</code> ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/lifecycle.d2f8a1b7.svg" alt="vu3-lifecycle"></p><p>Vue3 ä¹Ÿæä¾›äº† Composition API å½¢å¼çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä¸ Vue2 ä¸­é’©å­å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š</p><ul><li><code>beforeCreate</code>===&gt;<code>setup()</code></li><li><code>created</code>=======&gt;<code>setup()</code></li><li><code>beforeMount</code> ===&gt;<code>onBeforeMount</code></li><li><code>mounted</code>=======&gt;<code>onMounted</code></li><li><code>beforeUpdate</code>===&gt;<code>onBeforeUpdate</code></li><li><code>updated</code> =======&gt;<code>onUpdated</code></li><li><code>beforeUnmount</code> ==&gt;<code>onBeforeUnmount</code></li><li><code>unmounted</code> =====&gt;<code>onUnmounted</code></li></ul><p>è‹¥å’Œé…ç½®é¡¹ç”Ÿå‘½é’©å­ä¸€èµ·ä½¿ç”¨ï¼Œåˆ™ç»„åˆå¼ä¼šæ¯”é…ç½®é¡¹çš„å…ˆæ‰§è¡Œï¼Œå¦‚ <code>onBeforeMount</code> å…ˆäº <code>beforeMount</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; onBeforeMount, onMounted, onBeforeUpdate, onUpdated, onBeforeUnmount, onUnmounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---setup---&#x27;</span>)</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//é€šè¿‡ç»„åˆå¼APIçš„å½¢å¼å»ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸé’©å­</span></span><br><span class="line">  <span class="title function_">onBeforeMount</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---onBeforeMount---&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---onMounted---&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="title function_">onBeforeUpdate</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---onBeforeUpdate---&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="title function_">onUpdated</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---onUpdated---&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="title function_">onBeforeUnmount</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---onBeforeUnmount---&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="title function_">onUnmounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---onUnmounted---&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;sum&#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="hook-å‡½æ•°">hook å‡½æ•°</h3><ul><li>hook æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠ setup å‡½æ•°çš„ Composition API è¿›è¡Œäº†å°è£…</li><li>ç±»ä¼¼ Vue2 çš„ Mixinï¼Œèƒ½å¤ç”¨ä»£ç ï¼Œè®© setup é‡Œçš„é€»è¾‘æ›´æ¸…æ™°</li><li>hook æ”¾åœ¨ hooks æ–‡ä»¶å¤¹ä¸­ï¼Œä¸€ä¸ªæ–‡ä»¶å¯¹åº”ä¸€ä¸ªåŠŸèƒ½æ¨¡å—ï¼Œä»¥ <code>useXxx</code> å‘½å</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// hooks/usePoint.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; reactive, onMounted, onBeforeUnmount &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">//å®ç°é¼ æ ‡â€œæ‰“ç‚¹â€ç›¸å…³çš„æ•°æ®</span></span><br><span class="line">  <span class="keyword">let</span> point = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">y</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å®ç°é¼ æ ‡â€œæ‰“ç‚¹â€ç›¸å…³çš„æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">savePoint</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    point.<span class="property">x</span> = event.<span class="property">pageX</span></span><br><span class="line">    point.<span class="property">y</span> = event.<span class="property">pageY</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å®ç°é¼ æ ‡â€œæ‰“ç‚¹â€ç›¸å…³çš„ç”Ÿå‘½å‘¨æœŸé’©å­</span></span><br><span class="line">  <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, savePoint)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onBeforeUnmount</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;click&#x27;</span>, savePoint)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> point</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ hook</span></span><br><span class="line"><span class="keyword">import</span> usePoint <span class="keyword">from</span> <span class="string">&#x27;../hooks/usePoint.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> point = <span class="title function_">usePoint</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123; point &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="toRef-å‡½æ•°">toRef å‡½æ•°</h3><ul><li>åˆ›å»ºä¸€ä¸ª RefImpl å®ä¾‹å¯¹è±¡ï¼Œå…¶ value å€¼æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡çš„æŸä¸ªå±æ€§ï¼Œä¿®æ”¹ value å€¼ä¼šä¿®æ”¹æºå¯¹è±¡å¯¹åº”çš„å±æ€§</li><li>åº”ç”¨ï¼šéœ€è¦æŠŠå“åº”å¼å¯¹è±¡çš„æŸä¸ªå±æ€§å•ç‹¬æä¾›ç»™å¤–éƒ¨ä½¿ç”¨</li><li>æ‰¹é‡åˆ›å»ºï¼š<code>toRefs</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive, toRef, toRefs&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Vue3&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">info</span>: &#123;</span><br><span class="line">      <span class="attr">job</span>: &#123;</span><br><span class="line">        <span class="attr">salary</span>: <span class="number">40</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">// æ³¨æ„ä¸èƒ½å†™æˆ ref(person.name)ï¼Œè¿™å’Œæºå¯¹è±¡æ˜¯å‰²è£‚å¼€çš„</span></span><br><span class="line">    <span class="attr">name</span>: <span class="title function_">toRef</span>(person, <span class="string">&#x27;name&#x27;</span>),</span><br><span class="line">    <span class="attr">salary</span>: <span class="title function_">toRef</span>(person.<span class="property">info</span>.<span class="property">job</span>, <span class="string">&#x27;salary&#x27;</span>)</span><br><span class="line">    <span class="comment">// or</span></span><br><span class="line">    ...<span class="title function_">toRefs</span>(person)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å…¶å®ƒ-Composition-API">å…¶å®ƒ Composition API</h2><h3 id="shallowReactive-shallowRef">shallowReactive &amp; shallowRef</h3><ul><li><code>shallowReactive</code>ï¼šåªå¤„ç†å¯¹è±¡æœ€å¤–å±‚å±æ€§çš„å“åº”å¼ï¼Œå³æµ…å“åº”å¼</li><li><code>shallowRef</code>ï¼šåŸºæœ¬æ•°æ®ç±»å‹å’Œ <code>ref</code> ç›¸åŒï¼Œå¯¹è±¡æ•°æ®ä¸å†ä¼šè°ƒç”¨ <code>reactive</code>ï¼Œå› æ­¤åªæœ‰å¯¹è±¡å¼•ç”¨æ”¹å˜äº†æ‰æ˜¯å“åº”å¼çš„</li><li>è‹¥ä¸€ä¸ªå¯¹è±¡æ•°æ®ï¼Œç»“æ„å¾ˆæ·±ï¼Œä½†åªæœ‰æœ€å¤–å±‚å±æ€§å˜åŒ–ï¼Œå¯ç”¨ <code>shallowReactive</code></li><li>è‹¥ä¸€ä¸ªå¯¹è±¡æ•°æ®ï¼Œå±æ€§ä¸ä¼šæ”¹å˜ï¼Œè€Œæ˜¯ä½¿ç”¨æ–°å¯¹è±¡æ›¿æ¢ï¼Œå¯ç”¨ <code>shallowRef</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; shallowReactive, shallowRef &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> person = <span class="title function_">shallowReactive</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Vue3&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">21</span>,</span><br><span class="line">    <span class="attr">info</span>: &#123;</span><br><span class="line">      <span class="attr">job</span>: &#123;</span><br><span class="line">        <span class="attr">salary</span>: <span class="number">22</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">let</span> x = <span class="title function_">shallowRef</span>(&#123;</span><br><span class="line">    <span class="attr">y</span>: <span class="number">0</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    person,</span><br><span class="line">    x</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="readonly-shallowReadonly">readonly &amp; shallowReadonly</h3><ul><li><code>readonly</code>: è®©ä¸€ä¸ªå“åº”å¼æ•°æ®å˜ä¸ºåªè¯»çš„ï¼ˆæ·±åªè¯»ï¼‰</li><li><code>shallowReadonly</code>ï¼šè®©ä¸€ä¸ªå“åº”å¼æ•°æ®å˜ä¸ºåªè¯»çš„ï¼ˆæµ…åªè¯»ï¼‰</li><li>åº”ç”¨åœºæ™¯: ä¸å¸Œæœ›æ•°æ®è¢«ä¿®æ”¹æ—¶ï¼Œå¦‚ä½ ç”¨äº†åˆ«äººçš„å“åº”å¼æ•°æ®ï¼Œä½†æ˜¯åˆ«äººä¸å¸Œæœ›ä½ ä¿®æ”¹æ—¶</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;...&#125;)</span><br><span class="line"></span><br><span class="line">  sum = <span class="title function_">readonly</span>(sum)</span><br><span class="line">  person = <span class="title function_">shallowReadonly</span>(person)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    sum,</span><br><span class="line">    person</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="toRaw-markRaw">toRaw &amp; markRaw</h3><p><code>toRaw</code>ï¼š</p><ul><li>å°†ä¸€ä¸ªç”± <code>reactive</code> ç”Ÿæˆçš„å“åº”å¼å¯¹è±¡è½¬ä¸ºæ™®é€šå¯¹è±¡</li><li>ç”¨äºè¯»å–å“åº”å¼å¯¹è±¡å¯¹åº”çš„æ™®é€šå¯¹è±¡ï¼Œå¯¹è¯¥æ™®é€šå¯¹è±¡çš„æ“ä½œä¸ä¼šå¼•èµ·é¡µé¢æ›´æ–°</li></ul><p><code>markRaw</code>ï¼š</p><ul><li>æ ‡è®°ä¸€ä¸ªå¯¹è±¡ï¼Œè®©å…¶ä¸æˆä¸ºå“åº”å¼å¯¹è±¡</li><li>æœ‰äº›å€¼ä¸åº”è®¾ç½®ä¸ºå“åº”å¼ï¼Œæ¯”å¦‚å¤æ‚çš„ç¬¬ä¸‰æ–¹åº“</li><li>å½“æ¸²æŸ“å¤æ‚ä¸”ä¸å˜çš„æ•°æ®æ—¶ï¼Œè·³è¿‡å“åº”å¼è½¬æ¢å¯æé«˜æ€§èƒ½</li></ul><p>æ³¨æ„ï¼šä»…ä»…è®©æ•°æ®å˜ä¸ºéå“åº”å¼çš„ï¼Œæ•°æ®å˜çš„ä¾æ—§å˜ï¼Œåªæ˜¯æ²¡å¼•èµ·é¡µé¢æ›´æ–°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">showRawPerson</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> p = <span class="title function_">toRaw</span>(person);</span><br><span class="line">    p.<span class="property">age</span>++;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(p);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(person);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">addCar</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> car = &#123; <span class="attr">name</span>: <span class="string">&quot;å¥”é©°&quot;</span>, <span class="attr">price</span>: <span class="number">40</span> &#125;;</span><br><span class="line">    person.<span class="property">car</span> = <span class="title function_">markRaw</span>(car);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="customRef">customRef</h3><p>åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ refï¼Œå¹¶å¯¹å…¶ä¾èµ–é¡¹è·Ÿè¸ªå’Œæ›´æ–°è§¦å‘è¿›è¡Œæ˜¾å¼æ§åˆ¶</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;keyword&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123; keyword &#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, customRef &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Demo&#x27;</span>,</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// è‡ªå®šä¹‰ myRef</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">myRef</span>(<span class="params">value, delay</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> timer</span><br><span class="line">      <span class="comment">// é€šè¿‡customRefå»å®ç°è‡ªå®šä¹‰</span></span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">customRef</span>(<span class="function">(<span class="params">track, trigger</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="comment">//å‘Šè¯‰Vueè¿™ä¸ªvalueå€¼æ˜¯éœ€è¦è¢«â€œè¿½è¸ªâ€çš„</span></span><br><span class="line">            <span class="title function_">track</span>()</span><br><span class="line">            <span class="keyword">return</span> value</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="title function_">set</span>(<span class="params">newValue</span>) &#123;</span><br><span class="line">            <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">            timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              value = newValue</span><br><span class="line">              <span class="comment">// å‘Šè¯‰Vueå»æ›´æ–°ç•Œé¢</span></span><br><span class="line">              <span class="title function_">trigger</span>()</span><br><span class="line">            &#125;, delay)</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> keyword = <span class="title function_">myRef</span>(<span class="string">&#x27;hello&#x27;</span>, <span class="number">500</span>)</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      keyword,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="provide-inject">provide / inject</h3><p>å®ç°ç¥–å…ˆç»„ä»¶ä¸åä»£ç»„ä»¶ä¹‹é—´é€šä¿¡ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="https://brucecai55520.gitee.io/bruceblog/assets/img/provide-inject.840efd40.png" alt="provide-inject"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¥–å…ˆç»„ä»¶ä¼ é€’æ•°æ®</span></span><br><span class="line"><span class="keyword">import</span> &#123; provide, reactive, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> car = <span class="title function_">reactive</span>(&#123;...&#125;)</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">provide</span>(<span class="string">&#x27;sum&#x27;</span>, sum)</span><br><span class="line">  <span class="title function_">provide</span>(<span class="string">&#x27;car&#x27;</span>, car)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åä»£ç»„ä»¶æ¥æ”¶æ•°æ®</span></span><br><span class="line"><span class="keyword">import</span> &#123; inject &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> car = <span class="title function_">inject</span>(<span class="string">&#x27;car&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> sum = <span class="title function_">inject</span>(<span class="string">&#x27;sum&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> &#123; car, sum &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å“åº”å¼æ•°æ®çš„åˆ¤æ–­">å“åº”å¼æ•°æ®çš„åˆ¤æ–­</h3><ul><li><code>isRef</code>: æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºä¸€ä¸ª <code>ref</code> å¯¹è±¡</li><li><code>isReactive</code>: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>reactive</code> åˆ›å»ºçš„å“åº”å¼ä»£ç†</li><li><code>isReadonly</code>: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>readonly</code> åˆ›å»ºçš„åªè¯»ä»£ç†</li><li><code>isProxy</code>: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>reactive</code> æˆ–è€… <code>readonly</code> æ–¹æ³•åˆ›å»ºçš„ä»£ç†</li></ul><h2 id="Compositon-API-çš„ä¼˜åŠ¿">Compositon API çš„ä¼˜åŠ¿</h2><p><strong>Options API å­˜åœ¨çš„é—®é¢˜</strong></p><p>ä½¿ç”¨ä¼ ç»Ÿ Options API ä¸­ï¼Œæ–°å¢æˆ–è€…ä¿®æ”¹ä¸€ä¸ªéœ€æ±‚ï¼Œå°±éœ€è¦åˆ†åˆ«åœ¨ dataï¼Œmethodsï¼Œcomputed ç­‰åœ°æ–¹ä¿®æ”¹ã€‚</p><p><strong>Composition API çš„ä¼˜åŠ¿</strong></p><p>å¯ä»¥æ›´åŠ ä¼˜é›…åœ°ç»„ç»‡ä»£ç ã€å‡½æ•°ï¼Œè®©ç›¸å…³åŠŸèƒ½çš„ä»£ç æ›´åŠ æœ‰åºçš„ç»„ç»‡åœ¨ä¸€èµ·ã€‚è¯´ç™½äº†å°±æ˜¯è®©åŒä¸€ä¸ªåŠŸèƒ½çš„ä»£ç æ•´åˆåˆ°ä¸€èµ·ï¼Œæ—¥åä¿®æ”¹ä»£ç ç›´æ¥æ‰¾å¯¹åº”çš„åŠŸèƒ½æ¨¡å—ã€‚</p><h2 id="æ–°çš„ç»„ä»¶">æ–°çš„ç»„ä»¶</h2><h3 id="Fragment">Fragment</h3><ul><li>åœ¨ Vue2 ä¸­: ç»„ä»¶å¿…é¡»æœ‰ä¸€ä¸ªæ ¹æ ‡ç­¾</li><li>åœ¨ Vue3 ä¸­: ç»„ä»¶å¯ä»¥æ²¡æœ‰æ ¹æ ‡ç­¾, å†…éƒ¨ä¼šå°†å¤šä¸ªæ ‡ç­¾åŒ…å«åœ¨ä¸€ä¸ª <code>Fragment</code> è™šæ‹Ÿå…ƒç´ ä¸­</li><li>å¥½å¤„: å‡å°‘æ ‡ç­¾å±‚çº§, å‡å°å†…å­˜å ç”¨</li></ul><h3 id="Teleport">Teleport</h3><ul><li>å°†åŒ…è£¹çš„ HTML ç»“æ„ç§»åŠ¨åˆ°æŒ‡å®šå…ƒç´ çš„æœ«å°¾</li><li><code>to</code> å±æ€§ä¸º CSS é€‰æ‹©å™¨</li></ul><p>ç®€æ˜“çš„æ¨¡æ€æ¡†æ•ˆæœï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">teleport</span> <span class="attr">to</span>=<span class="string">&quot;#root&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;isShow&quot;</span> <span class="attr">class</span>=<span class="string">&quot;mask&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dialog&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªå¼¹çª—<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;isShow = false&quot;</span>&gt;</span>å…³é—­å¼¹çª—<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">teleport</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mask</span> &#123;</span><br><span class="line">  <span class="comment">/* é®ç½©å±‚é“ºæ»¡çª—å£ */</span></span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.dialog</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Suspense">Suspense</h3><p>ç­‰å¾…å¼‚æ­¥ç»„ä»¶æ—¶æ¸²æŸ“é¢å¤–å†…å®¹ï¼Œè®©ç”¨æˆ·ä½“éªŒæ›´å¥½</p><p>å¼‚æ­¥å¼•å…¥ç»„ä»¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineAsyncComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Child</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">() =&gt;</span> <span class="title function_">import</span>(<span class="string">&#x27;./components/Child.vue&#x27;</span>))</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>Suspense</code> åŒ…è£¹ç»„ä»¶ï¼Œå®é™…ä¸Šæ˜¯å¾€æ’æ§½å¡«å……å†…å®¹ï¼Œ<code>default</code> æ’æ§½å¡«å……ç»„ä»¶å†…å®¹ï¼Œ<code>fallback</code> æ’æ§½å¡«å……ç»„ä»¶åŠ è½½æ—¶æ˜¾ç¤ºçš„å†…å®¹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Suspense</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:default</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Child</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:fallback</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>åŠ è½½ä¸­ï¼Œè¯·ç¨ç­‰...<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Suspense</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦å¤–ï¼Œè‹¥ <code>Child</code> ç»„ä»¶çš„ <code>setup</code> å‡½æ•°è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œä¹Ÿèƒ½æ¸²æŸ“ <code>fallback</code> é‡Œçš„å†…å®¹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">resolve</span>(&#123;sum&#125;)</span><br><span class="line">    &#125;, <span class="number">3000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å…¶ä»–æ”¹å˜">å…¶ä»–æ”¹å˜</h2><ul><li>å…¨å±€ API çš„è½¬ç§»</li></ul><p>Vue3 å°†å…¨å±€çš„ APIï¼Œå³ï¼š<code>Vue.xxx</code> è°ƒæ•´åˆ°åº”ç”¨å®ä¾‹ <code>app</code> ä¸Šï¼š</p><table><thead><tr><th>Vue2 å…¨å±€ API</th><th>Vue3 å®ä¾‹ API</th></tr></thead><tbody><tr><td><a href="http://Vue.config.xxx">Vue.config.xxx</a></td><td><a href="http://app.config.xxx">app.config.xxx</a></td></tr><tr><td>Vue.config.productionTip</td><td>ç§»é™¤</td></tr><tr><td>Vue.component</td><td>app.component</td></tr><tr><td>Vue.directive</td><td>app.directive</td></tr><tr><td>Vue.mixin</td><td>app.mixin</td></tr><tr><td>Vue.use</td><td>app.use</td></tr><tr><td>Vue.prototype</td><td>app.config.globalProperties</td></tr></tbody></table><ul><li><code>data</code> é€‰é¡¹åº”å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°</li><li>è¿‡æ¸¡ç±»åçš„æ›´æ”¹ï¼š</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Vue2 */</span></span><br><span class="line"><span class="selector-class">.v-enter</span>,</span><br><span class="line"><span class="selector-class">.v-leave-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.v-leave</span>,</span><br><span class="line"><span class="selector-class">.v-enter-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Vue3 */</span></span><br><span class="line"><span class="selector-class">.v-enter-from</span>,</span><br><span class="line"><span class="selector-class">.v-leave-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v-leave-from</span>,</span><br><span class="line"><span class="selector-class">.v-enter-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç§»é™¤ <code>keyCode</code> ä½œä¸º <code>v-on</code> çš„ä¿®é¥°ç¬¦ï¼ŒåŒæ—¶ä¹Ÿä¸å†æ”¯æŒ <code>config.keyCodes</code></li><li>ç§»é™¤ <code>v-on.native</code>ä¿®é¥°ç¬¦ï¼Œå­ç»„ä»¶æ²¡æœ‰åœ¨ <code>emits: ['close']</code> å£°æ˜çš„è‡ªå®šä¹‰äº‹ä»¶ä½œä¸ºåŸç”Ÿäº‹ä»¶å¤„ç†</li><li>ç§»é™¤è¿‡æ»¤å™¨ <code>filter</code></li><li>â€¦</li></ul><h2 id="ç»„ä»¶ä¸Šçš„-v-model">ç»„ä»¶ä¸Šçš„ v-model</h2><p>å½“éœ€è¦ç»´æŠ¤ç»„ä»¶å†…å¤–æ•°æ®çš„åŒæ­¥æ—¶ï¼Œå¯ä»¥åœ¨ç»„ä»¶ä¸Šä½¿ç”¨ <code>v-model</code> æŒ‡ä»¤ã€‚</p><p>çˆ¶ç»„ä»¶ä¼ å€¼ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- çˆ¶ç»„ä»¶ä¼ å€¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">my-counter</span> <span class="attr">v-model:number</span>=<span class="string">&quot;count&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-counter</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å­ç»„ä»¶åœ¨ <code>emits</code> èŠ‚ç‚¹å£°æ˜è‡ªå®šä¹‰äº‹ä»¶ï¼Œæ ¼å¼ä¸º <code>update:xxx</code> ï¼Œè°ƒç”¨ <code>$emit</code> è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">props</span>: [<span class="string">&#x27;number&#x27;</span>],</span><br><span class="line">  <span class="attr">emits</span>: [<span class="string">&#x27;update:number&#x27;</span>],</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">add</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.$emit(<span class="string">&#x27;update:number&#x27;</span>, <span class="variable language_">this</span>.<span class="property">number</span>++)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œåœ¨ <code>vue3</code> ä¸­ <code>props</code> å±æ€§åŒæ ·æ˜¯åªè¯»çš„ï¼Œä¸Šé¢ <code>this.number++</code> å¹¶æ²¡æœ‰ä¿®æ”¹ <code>number</code> çš„å€¼ã€‚</p><p>å…¶å®é€šè¿‡ <code>v-bind</code> ä¼ å€¼å’Œç›‘å¬è‡ªå®šä¹‰äº‹ä»¶çš„æ–¹å¼èƒ½å®ç°å’Œ <code>v-model</code> ç›¸åŒçš„æ•ˆæœã€‚</p><h2 id="EventBus">EventBus</h2><p>å€ŸåŠ©äºç¬¬ä¸‰æ–¹çš„åŒ… <code>mitt</code> æ¥åˆ›å»º <code>eventBus</code> å¯¹è±¡ï¼Œä»è€Œå®ç°å…„å¼Ÿç»„ä»¶ä¹‹é—´çš„æ•°æ®å…±äº«ã€‚</p><p>å®‰è£… <code>mitt</code> ä¾èµ–åŒ…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mitt@2.1.0</span><br></pre></td></tr></table></figure><p>åˆ›å»ºå…¬å…±çš„ <code>eventBus</code> æ¨¡å—ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&#x27;mitt&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»º EventBus å®ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> bus = <span class="title function_">mitt</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> bus</span><br></pre></td></tr></table></figure><p>æ•°æ®æ¥æ”¶æ–¹è°ƒç”¨ <code>bus.on()</code> ç›‘å¬è‡ªå®šä¹‰äº‹ä»¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> bus <span class="keyword">from</span> <span class="string">&#x27;./eventBus.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">count</span>: <span class="number">0</span> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    bus.<span class="title function_">on</span>(<span class="string">&#x27;countChange&#x27;</span>, <span class="function">(<span class="params">count</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">count</span> = count</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ•°æ®æ¥å‘é€æ–¹è°ƒç”¨ <code>bus.emit()</code> è§¦å‘äº‹ä»¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> bus <span class="keyword">from</span> <span class="string">&#x27;./eventBus.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">cout</span>: <span class="number">0</span> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">addCount</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">count</span>++</span><br><span class="line">      bus.<span class="title function_">emit</span>(<span class="string">&#x27;countChange&#x27;</span>, <span class="variable language_">this</span>.<span class="property">count</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="vue-3-x-å…¨å±€é…ç½®-axios">vue 3.x å…¨å±€é…ç½® axios</h2><p>å®é™…é¡¹ç›®å¼€å‘ä¸­ï¼Œå‡ ä¹æ¯ä¸ªç»„ä»¶ä¸­éƒ½ä¼šä½¿ç”¨ <code>axios</code> å‘èµ·æ•°æ®è¯·æ±‚ã€‚æ­¤æ—¶ä¼šé‡åˆ°å¦‚ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š</p><ul><li>æ¯ä¸ªç»„ä»¶ä¸­éƒ½éœ€è¦å¯¼å…¥ <code>axios</code>ï¼ˆä»£ç è‡ƒè‚¿ï¼‰</li><li>æ¯æ¬¡å‘è¯·æ±‚éƒ½éœ€è¦å¡«å†™å®Œæ•´çš„è¯·æ±‚è·¯å¾„ï¼ˆä¸åˆ©äºåæœŸçš„ç»´æŠ¤ï¼‰</li></ul><p>åœ¨ <code>main.js</code> æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é…ç½®è¯·æ±‚æ ¹è·¯å¾„</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = <span class="string">&#x27;http://api.com&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å°† axios æŒ‚è½½ä¸º app å…¨å±€è‡ªå®šä¹‰å±æ€§</span></span><br><span class="line"><span class="comment">// æ¯ä¸ªç»„ä»¶å¯é€šè¿‡ this.$http è®¿é—®åˆ° axios</span></span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$http</span> = axios</span><br></pre></td></tr></table></figure><p>ç»„ä»¶è°ƒç”¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">get</span>(<span class="string">&#x27;/users&#x27;</span>)</span><br></pre></td></tr></table></figure><hr><blockquote><p>è§†é¢‘ç¬”è®°å†…å®¹æ¥è‡ªBç«™å°šç¡…è°·çš„<a href="https://www.bilibili.com/video/BV1Zy4y1K7SH?p=1&amp;vd_source=f5b24b9dd30b3acd2bf669dccabe17d6">å¼ å¤©ç¦¹è€å¸ˆ</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;Vue æ ¸å¿ƒåŸºç¡€&lt;/h1&gt;
&lt;p&gt;&lt;a href=&quot;https://cn.vuejs.org/&quot;&gt;å®˜ç½‘ä¼ é€é—¨&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Vue æ˜¯åŠ¨æ€æ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼ JavaScript æ¡†æ¶&lt;/p&gt;
&lt;p&gt;Vue å€Ÿé‰´ Angular çš„æ¨¡æ¿</summary>
      
    
    
    
    <category term="å‰ç«¯ğŸ’¥" scheme="https://blog.cilicili.xyz/categories/%E5%89%8D%E7%AB%AF%F0%9F%92%A5/"/>
    
    
    <category term="Vue" scheme="https://blog.cilicili.xyz/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>ã€åç«¯ã€‘åŸºäºNode.jsçš„æ•°æ®åº“ä¸èº«ä»½è®¤è¯</title>
    <link href="https://blog.cilicili.xyz/posts/706992d4.html"/>
    <id>https://blog.cilicili.xyz/posts/706992d4.html</id>
    <published>2022-09-06T08:33:45.000Z</published>
    <updated>2022-09-09T09:35:00.216Z</updated>
    
    <content type="html"><![CDATA[<h1>æ•°æ®åº“å’Œèº«ä»½è®¤è¯</h1><ol><li><p>æ•°æ®åº“ï¼ˆdatabaseï¼‰æ˜¯ç”¨æ¥<strong>ç»„ç»‡ã€å­˜å‚¨å’Œç®¡ç†</strong>æ•°æ®çš„ä»“åº“ã€‚</p><p>ç”¨æˆ·å¯ä»¥å¯¹æ•°æ®åº“ä¸­çš„æ•°æ®è¿›è¡Œ<strong>æ–°å¢ã€æŸ¥è¯¢ã€æ›´æ–°ã€åˆ é™¤</strong>ç­‰æ“ä½œã€‚</p></li><li><p>æœ€å¸¸è§çš„æ•°æ®åº“æœ‰å¦‚ä¸‹å‡ ä¸ªï¼š</p></li></ol><ul><li><p>MySQL æ•°æ®åº“ï¼ˆç›®å‰ä½¿ç”¨æœ€å¹¿æ³›ã€æµè¡Œåº¦æœ€é«˜çš„å¼€æºå…è´¹æ•°æ®åº“ï¼›Community + Enterpriseï¼‰</p></li><li><p>Oracle æ•°æ®åº“ï¼ˆæ”¶è´¹ï¼‰</p></li><li><p>SQL Server æ•°æ®åº“ï¼ˆæ”¶è´¹ï¼‰</p></li><li><p>Mongodb æ•°æ®åº“ï¼ˆCommunity + Enterpriseï¼‰</p></li></ul><ol start="3"><li><p>å…¶ä¸­ï¼ŒMySQLã€Oracleã€SQL Server å±äº<strong>ä¼ ç»Ÿå‹æ•°æ®åº“</strong>ï¼ˆåˆå«åšï¼šå…³ç³»å‹æ•°æ®åº“ æˆ– SQL æ•°æ®åº“ï¼‰ã€‚</p><p>è€Œ Mongodb å±äº<strong>æ–°å‹æ•°æ®åº“</strong>ï¼ˆåˆå«åšï¼šéå…³ç³»å‹æ•°æ®åº“ æˆ– NoSQL æ•°æ®åº“ï¼‰ï¼Œå®ƒåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¼¥è¡¥äº†ä¼ ç»Ÿå‹æ•°æ®åº“çš„ç¼ºé™·ã€‚</p></li><li><p>åœ¨ä¼ ç»Ÿå‹æ•°æ®åº“ä¸­ï¼Œæ•°æ®çš„ç»„ç»‡ç»“æ„åˆ†ä¸º**æ•°æ®åº“(database)ã€æ•°æ®è¡¨(table)ã€æ•°æ®è¡Œ(row)ã€å­—æ®µ(field)**è¿™ 4 å¤§éƒ¨åˆ†ç»„æˆã€‚</p></li></ol><h2 id="å®‰è£…MySQL">å®‰è£…MySQL</h2><p>å¯¹äºå¼€å‘äººå‘˜æ¥è¯´ï¼Œåªéœ€è¦å®‰è£… MySQL Server å’Œ MySQL Workbench ï¼ˆNavicatï¼‰è¿™ä¸¤ä¸ªè½¯ä»¶ï¼Œå°±èƒ½æ»¡è¶³å¼€å‘çš„éœ€è¦äº†ã€‚</p><ul><li><p>MySQL Serverï¼šä¸“é—¨ç”¨æ¥æä¾›æ•°æ®å­˜å‚¨å’ŒæœåŠ¡çš„è½¯ä»¶ã€‚</p></li><li><p>MySQL Workbenchï¼ˆNacicatï¼‰ï¼šå¯è§†åŒ–çš„ MySQL ç®¡ç†å·¥å…·ï¼Œé€šè¿‡å®ƒï¼Œå¯ä»¥æ–¹ä¾¿çš„æ“ä½œå­˜å‚¨åœ¨ MySQL Server ä¸­çš„æ•°æ®ã€‚</p></li></ul><h3 id="ä»€ä¹ˆæ˜¯SQL">ä»€ä¹ˆæ˜¯SQL</h3><p>SQLï¼ˆè‹±æ–‡å…¨ç§°ï¼šStructured Query Languageï¼‰æ˜¯ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼Œä¸“é—¨ç”¨æ¥è®¿é—®å’Œå¤„ç†æ•°æ®åº“çš„ç¼–ç¨‹è¯­è¨€ã€‚</p><p>èƒ½å¤Ÿè®©æˆ‘ä»¬<strong>ä»¥ç¼–ç¨‹çš„å½¢å¼</strong>ï¼Œ<strong>æ“ä½œæ•°æ®åº“é‡Œé¢çš„æ•°æ®</strong>ã€‚</p><p><strong>ä¸‰ä¸ªå…³é”®ç‚¹</strong>ï¼š</p><p>â‘  SQL æ˜¯ä¸€é—¨æ•°æ®åº“ç¼–ç¨‹è¯­è¨€</p><p>â‘¡ ä½¿ç”¨ SQL è¯­è¨€ç¼–å†™å‡ºæ¥çš„ä»£ç ï¼Œå«åš SQL è¯­å¥</p><p>â‘¢ SQL è¯­è¨€åªèƒ½åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ä½¿ç”¨ï¼ˆä¾‹å¦‚ MySQLã€Oracleã€SQL Serverï¼‰ã€‚éå…³ç³»å‹æ•°æ®åº“ï¼ˆä¾‹å¦‚ Mongodbï¼‰ä¸æ”¯æŒ SQL è¯­è¨€</p><h3 id="SQLèƒ½åšä»€ä¹ˆ">SQLèƒ½åšä»€ä¹ˆ</h3><p>â‘  ä»æ•°æ®åº“ä¸­<strong>æŸ¥è¯¢æ•°æ®</strong></p><p>â‘¡ å‘æ•°æ®åº“ä¸­<strong>æ’å…¥æ–°çš„æ•°æ®</strong></p><p>â‘¢ <strong>æ›´æ–°</strong>æ•°æ®åº“ä¸­çš„<strong>æ•°æ®</strong></p><p>â‘£ ä»æ•°æ®åº“<strong>åˆ é™¤æ•°æ®</strong></p><p>â‘¤ å¯ä»¥åˆ›å»ºæ–°æ•°æ®åº“</p><p>â‘¥ å¯åœ¨æ•°æ®åº“ä¸­åˆ›å»ºæ–°è¡¨</p><p>â‘¦ å¯åœ¨æ•°æ®åº“ä¸­åˆ›å»ºå­˜å‚¨è¿‡ç¨‹ã€è§†å›¾</p><p>â‘§ etcâ€¦</p><h2 id="MySQLçš„åŸºæœ¬ä½¿ç”¨">MySQLçš„åŸºæœ¬ä½¿ç”¨</h2><h3 id="SQLçš„SELECTè¯­å¥">SQLçš„SELECTè¯­å¥</h3><p>SELECT è¯­å¥ç”¨äºä»è¡¨ä¸­<strong>æŸ¥è¯¢æ•°æ®</strong>ã€‚æ‰§è¡Œçš„ç»“æœè¢«å­˜å‚¨åœ¨ä¸€ä¸ª<strong>ç»“æœè¡¨</strong>ä¸­ï¼ˆç§°ä¸º<strong>ç»“æœé›†</strong>ï¼‰ã€‚</p><p>è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906185509837.png" alt="image-20220906185509837"></p><blockquote><p><strong>æ³¨æ„</strong>ï¼šSQL è¯­å¥ä¸­çš„å…³é”®å­—å¯¹<strong>å¤§å°å†™ä¸æ•æ„Ÿ</strong>ã€‚SELECT ç­‰æ•ˆäº selectï¼ŒFROM ç­‰æ•ˆäº fromã€‚</p></blockquote><h3 id="SQLçš„-INSERT-INTOè¯­å¥">SQLçš„ INSERT INTOè¯­å¥</h3><p><strong>INSERT INTO</strong> è¯­å¥ç”¨äºå‘æ•°æ®è¡¨ä¸­<strong>æ’å…¥æ–°çš„æ•°æ®è¡Œ</strong>ã€‚</p><p>è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906185726369.png" alt="image-20220906185726369"></p><h3 id="SQLçš„UPDATEè¯­å¥">SQLçš„UPDATEè¯­å¥</h3><p><strong>Update</strong> è¯­å¥ç”¨äº<strong>ä¿®æ”¹è¡¨ä¸­çš„æ•°æ®</strong>ã€‚</p><p>è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906190034371.png" alt="image-20220906190034371"></p><p>ä¾‹å¦‚ï¼šæŠŠ users è¡¨ä¸­ id ä¸º 7 çš„ç”¨æˆ·å¯†ç ï¼Œæ›´æ–°ä¸º 888888ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> users <span class="keyword">SET</span> password<span class="operator">=</span><span class="string">&#x27;888888&#x27;</span> <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">7</span></span><br></pre></td></tr></table></figure><h3 id="SQLçš„DELETEè¯­å¥">SQLçš„DELETEè¯­å¥</h3><p><strong>DELETE</strong> è¯­å¥ç”¨äº<strong>åˆ é™¤è¡¨ä¸­çš„è¡Œ</strong>ã€‚</p><p>è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906190356539.png" alt="image-20220906190356539"></p><h3 id="SQLçš„WHEREå­å¥">SQLçš„WHEREå­å¥</h3><p>WHERE å­å¥ç”¨äº<strong>é™å®šé€‰æ‹©çš„æ ‡å‡†</strong>ã€‚åœ¨ <strong>SELECTã€UPDATEã€DELETE</strong> è¯­å¥ä¸­ï¼Œ<strong>çš†å¯ä½¿ç”¨</strong> WHERE å­å¥æ¥é™å®šé€‰æ‹©çš„æ ‡å‡†ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906190558124.png" alt="image-20220906190558124"></p><p><strong>å¯åœ¨WHEREå­å¥ä¸­ä½¿ç”¨çš„è¿ç®—ç¬¦</strong>ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906190644158.png" alt="image-20220906190644158"></p><blockquote><p><strong>æ³¨æ„</strong>ï¼šåœ¨æŸäº›ç‰ˆæœ¬çš„SQLä¸­ï¼Œæ“ä½œç¬¦&lt; &gt;å¯ä»¥å†™ä¸º!=</p></blockquote><p><strong>WHEREå­å¥ç¤ºä¾‹</strong>ï¼šå¯ä»¥é€šè¿‡ WHERE å­å¥æ¥é™å®š SELECT çš„æŸ¥è¯¢æ¡ä»¶</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906190825402.png" alt="image-20220906190825402"></p><h3 id="SQL-çš„-AND-å’Œ-OR-è¿ç®—ç¬¦">SQL çš„ AND å’Œ OR è¿ç®—ç¬¦</h3><p>AND å’Œ OR å¯<strong>åœ¨ WHERE å­è¯­å¥</strong>ä¸­<strong>æŠŠä¸¤ä¸ªæˆ–å¤šä¸ªæ¡ä»¶ç»“åˆèµ·æ¥</strong>ã€‚</p><p>AND è¡¨ç¤º<strong>å¿…é¡»åŒæ—¶æ»¡è¶³å¤šä¸ªæ¡ä»¶</strong>ï¼Œç›¸å½“äº JavaScript ä¸­çš„ &amp;&amp; è¿ç®—ç¬¦ï¼Œä¾‹å¦‚ <strong>if (a !== 10 &amp;&amp; a !== 20)</strong></p><p>OR è¡¨ç¤º<strong>åªè¦æ»¡è¶³ä»»æ„ä¸€ä¸ªæ¡ä»¶å³å¯</strong>ï¼Œç›¸å½“äº JavaScript ä¸­çš„ || è¿ç®—ç¬¦ï¼Œä¾‹å¦‚ <strong>if(a !== 10 || a !== 20)</strong></p><h3 id="SQLçš„ORDER-BYå­å¥">SQLçš„ORDER BYå­å¥</h3><p>ORDER BY è¯­å¥ç”¨äº<strong>æ ¹æ®æŒ‡å®šçš„åˆ—å¯¹ç»“æœé›†è¿›è¡Œæ’åº</strong>ã€‚</p><p>ORDER BY è¯­å¥<strong>é»˜è®¤</strong>æŒ‰ç…§<strong>å‡åº</strong>å¯¹è®°å½•è¿›è¡Œæ’åºã€‚</p><p>å¦‚æœæ‚¨å¸Œæœ›æŒ‰ç…§<strong>é™åº</strong>å¯¹è®°å½•è¿›è¡Œæ’åºï¼Œå¯ä»¥ä½¿ç”¨ <strong>DESC</strong> å…³é”®å­—ã€‚</p><h4 id="ORDER-BY-å­å¥-å‡åºæ’åº">ORDER BY å­å¥-å‡åºæ’åº</h4><p>ORDER BY é»˜è®¤è¿›è¡Œå‡åºæ’åºï¼›å…¶ä¸­ï¼ŒASCå…³é”®å­—ä»£è¡¨å‡åºæ’åº</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">ORDER</span> <span class="keyword">BY</span> status;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">ORDER</span> <span class="keyword">BY</span> status <span class="keyword">ASC</span>;</span><br></pre></td></tr></table></figure><h4 id="ORDER-BY-å­å¥-é™åºæ’åº"><strong>ORDER BY</strong> <strong>å­å¥</strong>-é™åºæ’åº</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">ORDER</span> <span class="keyword">BY</span> id <span class="keyword">DESC</span></span><br></pre></td></tr></table></figure><h4 id="ORDER-BY-å­—å¥-å¤šé‡æ’åº">ORDER BY å­—å¥-å¤šé‡æ’åº</h4><p>å¯¹ users è¡¨ä¸­çš„æ•°æ®ï¼Œå…ˆæŒ‰ç…§ <strong>status</strong> å­—æ®µè¿›è¡Œ<strong>é™åºæ’åº</strong>ï¼Œå†æŒ‰ç…§ <strong>username</strong> çš„å­—æ¯é¡ºåºï¼Œè¿›è¡Œ<strong>å‡åºæ’åº</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">ORDER</span> <span class="keyword">BY</span> status <span class="keyword">DESC</span>, username <span class="keyword">ASC</span></span><br></pre></td></tr></table></figure><h3 id="SQLçš„COUNT-å‡½æ•°">SQLçš„COUNT(*)å‡½æ•°</h3><p><strong>COUNT(*)</strong> å‡½æ•°ç”¨äºè¿”å›<strong>æŸ¥è¯¢ç»“æœçš„æ€»æ•°æ®æ¡æ•°</strong>ã€‚</p><p>è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906191825445.png" alt="image-20220906191825445"></p><h4 id="ä½¿ç”¨ASä¸ºåˆ—è®¾ç½®åˆ«å">ä½¿ç”¨ASä¸ºåˆ—è®¾ç½®åˆ«å</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> total <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> status<span class="operator">=</span><span class="number">0</span></span><br></pre></td></tr></table></figure><h2 id="Node-æ“ä½œ-mysql">Node æ“ä½œ mysql</h2><h3 id="åœ¨é¡¹ç›®ä¸­æ“ä½œæ•°æ®åº“çš„æ­¥éª¤">åœ¨é¡¹ç›®ä¸­æ“ä½œæ•°æ®åº“çš„æ­¥éª¤</h3><p>â‘  å®‰è£…æ“ä½œ MySQL æ•°æ®åº“çš„ç¬¬ä¸‰æ–¹æ¨¡å—ï¼ˆ<strong>mysql</strong>ï¼‰</p><p>â‘¡ é€šè¿‡ mysql æ¨¡å—<strong>è¿æ¥åˆ° MySQL æ•°æ®åº“</strong></p><p>â‘¢ é€šè¿‡ mysql æ¨¡å—<strong>æ‰§è¡Œ SQL è¯­å¥</strong></p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906192230370.png" alt="image-20220906192230370"></p><h3 id="é…ç½®-mysql-æ¨¡å—">é…ç½® mysql æ¨¡å—</h3><ol><li>å®‰è£… mysql æ¨¡å—</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mysql</span><br></pre></td></tr></table></figure><ol start="2"><li>é…ç½®mysqlæ¨¡å—ï¼Œå¹¶å»ºç«‹è¿æ¥</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.å¯¼å…¥mysqlæ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>)</span><br><span class="line"><span class="comment">// 2.å»ºç«‹ä¸MySQLæ•°æ®åº“çš„è¿æ¥</span></span><br><span class="line"><span class="keyword">const</span> db = mysql.<span class="title function_">createPool</span>(&#123;</span><br><span class="line">  <span class="attr">host</span>: <span class="string">&#x27;127.0.0.1&#x27;</span>,  <span class="comment">// æ•°æ®åº“çš„IPåœ°å€</span></span><br><span class="line">  <span class="attr">user</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">  <span class="attr">password</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">  <span class="attr">database</span>: <span class="string">&#x27;test&#x27;</span>,  <span class="comment">// æŒ‡å®šè¦æ“ä½œå“ªä¸ªæ•°æ®åº“</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="3"><li>æµ‹è¯•æ˜¯å¦æ­£å¸¸å·¥ä½œ</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db.<span class="title function_">query</span>(<span class="string">&#x27;select 1&#x27;</span>, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(results)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="æ“ä½œ-mysql-æ•°æ®åº“">æ“ä½œ mysql æ•°æ®åº“</h3><ol><li>æŸ¥è¯¢æ•°æ®</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db.<span class="title function_">query</span>(<span class="string">&#x27;select * from users&#x27;</span>, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(results)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="2"><li>æ’å…¥æ•°æ®</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¦æ’å…¥åˆ°usersè¡¨ä¸­çš„æ•°æ®å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> user = &#123; username; <span class="string">&#x27;Bruce&#x27;</span>, <span class="attr">password</span>: <span class="string">&#x27;pcc321&#x27;</span>&#125;</span><br><span class="line"><span class="comment">// å¾…æ‰§è¡Œçš„SQLè¯­å¥ï¼Œå…¶ä¸­è‹±æ–‡çš„ ? è¡¨ç¤ºå ä½ç¬¦</span></span><br><span class="line"><span class="keyword">const</span> sqlStr = <span class="string">&#x27;INSERT INTO users (username, password) VALUES (?, ?)&#x27;</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨æ•°ç»„çš„å½¢å¼ä¸ºå ä½ç¬¦æŒ‡å®šå…·ä½“çš„å€¼</span></span><br><span class="line">db.<span class="title function_">query</span>(sqlStr, [user.<span class="property">username</span>, user.<span class="property">password</span>], <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">  <span class="keyword">if</span> (results.<span class="property">affectedRows</span> === <span class="number">1</span>) &#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ’å…¥æˆåŠŸ&#x27;</span>)&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å‘è¡¨ä¸­æ–°å¢æ•°æ®æ—¶ï¼Œå¦‚æœæ•°æ®å¯¹è±¡çš„æ¯ä¸ªå±æ€§å’Œæ•°æ®è¡¨çš„å­—æ®µä¸€ä¸€å¯¹åº”ï¼Œåˆ™å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼å¿«é€Ÿæ’å…¥æ•°æ®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user = &#123;<span class="attr">username</span>:<span class="string">&#x27;Bruce&#x27;</span>, <span class="attr">password</span>:<span class="string">&#x27;55520&#x27;</span>&#125;</span><br><span class="line"><span class="keyword">const</span> sql = <span class="string">&#x27;INSERT INTO users SET ?&#x27;</span></span><br><span class="line">db.<span class="title function_">query</span>(sql, user, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="3"><li>æ›´æ–°æ•°æ®</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¦æ›´æ–°çš„æ•°æ®å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> user = &#123; <span class="attr">id</span>:<span class="number">7</span>, <span class="attr">username</span>:<span class="string">&#x27;aaa&#x27;</span>, <span class="attr">password</span>:<span class="string">&#x27;000&#x27;</span>&#125;</span><br><span class="line"><span class="comment">// è¦æ‰§è¡Œçš„SQLè¯­å¥</span></span><br><span class="line"><span class="keyword">const</span> sql = <span class="string">&#x27;UPDATE users SET username=?, password=? WHERE id=?&#x27;</span></span><br><span class="line"><span class="comment">// è°ƒç”¨db.query()æ‰§è¡ŒSQLè¯­å¥çš„åŒæ—¶ï¼Œä½¿ç”¨æ•°ç»„ä¾æ¬¡ä¸ºå ä½ç¬¦æŒ‡å®šå…·ä½“çš„å€¼</span></span><br><span class="line">db.<span class="title function_">query</span>(sql, [user.<span class="property">username</span>, user.<span class="property">password</span>, user.<span class="property">id</span>], <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>æ›´æ–°è¡¨æ•°æ®æ—¶ï¼Œå¦‚æœæ•°æ®å¯¹è±¡çš„æ¯ä¸ªå±æ€§å’Œæ•°æ®è¡¨çš„å­—æ®µä¸€ä¸€å¯¹åº”ï¼Œåˆ™å¿«æ·æ–¹å¼ä¸ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user = &#123;<span class="attr">id</span>:<span class="number">7</span>,<span class="attr">username</span>:<span class="string">&#x27;Bruce&#x27;</span>,<span class="attr">password</span>:<span class="string">&#x27;55520&#x27;</span>&#125;</span><br><span class="line"><span class="keyword">const</span> sql = <span class="string">&#x27;UPDATE users SET ? WHERE id=?&#x27;</span></span><br><span class="line">db.<span class="title function_">query</span>(sql, [user, user.<span class="property">id</span>], <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="4"><li>åˆ é™¤æ•°æ®</li></ol><p>å¦‚æœSQLè¯­å¥ä¸­æœ‰å¤šä¸ªå ä½ç¬¦ï¼Œå¿…é¡»ä½¿ç”¨æ•°ç»„ä¸ºæ¯ä¸ªå ä½ç¬¦æŒ‡å®šå…·ä½“çš„å€¼ã€‚</p><p>å¦‚æœåªæœ‰ä¸€ä¸ªå ä½ç¬¦ï¼Œåˆ™å¯ä»¥çœç•¥æ•°ç»„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sql = <span class="string">&#x27;DELETE FROM users WHERE id=?&#x27;</span></span><br><span class="line">db.<span class="title function_">query</span>(sql, id, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ DELETE è¯­å¥ï¼Œä¼šæŠŠçœŸæ­£çš„æŠŠæ•°æ®ä»è¡¨ä¸­åˆ é™¤æ‰ã€‚ä¸ºäº†ä¿é™©èµ·è§ï¼Œ<strong>æ¨èä½¿ç”¨</strong>æ ‡è®°åˆ é™¤çš„å½¢å¼ï¼Œæ¥<strong>æ¨¡æ‹Ÿåˆ é™¤çš„åŠ¨ä½œ</strong>ã€‚</p><p>æ‰€è°“çš„æ ‡è®°åˆ é™¤ï¼Œå°±æ˜¯åœ¨è¡¨ä¸­è®¾ç½®ç±»ä¼¼äº <strong>status</strong> è¿™æ ·çš„<strong>çŠ¶æ€å­—æ®µ</strong>ï¼Œæ¥<strong>æ ‡è®°</strong>å½“å‰è¿™æ¡æ•°æ®æ˜¯å¦è¢«åˆ é™¤ã€‚</p><p>å½“ç”¨æˆ·æ‰§è¡Œäº†åˆ é™¤çš„åŠ¨ä½œæ—¶ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰æ‰§è¡Œ DELETE è¯­å¥æŠŠæ•°æ®åˆ é™¤æ‰ï¼Œè€Œæ˜¯æ‰§è¡Œäº† UPDATE è¯­å¥ï¼Œå°†è¿™æ¡æ•°æ®å¯¹åº”çš„ status å­—æ®µæ ‡è®°ä¸ºåˆ é™¤å³å¯ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">db.<span class="title function_">query</span>(<span class="string">&#x27;UPDATE users SET status=1 WHERE id=?&#x27;</span>, <span class="number">7</span>, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="Web-å¼€å‘æ¨¡å¼">Web å¼€å‘æ¨¡å¼</h2><p>ç›®å‰ä¸»æµçš„ Web å¼€å‘æ¨¡å¼æœ‰<strong>ä¸¤ç§</strong>ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul><li><p>åŸºäº<strong>æœåŠ¡ç«¯æ¸²æŸ“</strong>çš„ä¼ ç»Ÿ Web å¼€å‘æ¨¡å¼</p></li><li><p>åŸºäº<strong>å‰åç«¯åˆ†ç¦»</strong>çš„æ–°å‹ Web å¼€å‘æ¨¡å¼</p></li></ul><h3 id="æœåŠ¡ç«¯æ¸²æŸ“">æœåŠ¡ç«¯æ¸²æŸ“</h3><p>æœåŠ¡å™¨å‘é€ç»™å®¢æˆ·ç«¯çš„ HTML é¡µé¢ï¼Œæ˜¯<strong>åœ¨æœåŠ¡å™¨é€šè¿‡å­—ç¬¦ä¸²çš„æ‹¼æ¥åŠ¨æ€ç”Ÿæˆ</strong>çš„ã€‚</p><p>å› æ­¤å®¢æˆ·ç«¯ä¸éœ€è¦ä½¿ç”¨ Ajax é¢å¤–è¯·æ±‚é¡µé¢çš„æ•°æ®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/index.html&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 1.è¦æ¸²æŸ“çš„æ•°æ®</span></span><br><span class="line">  <span class="keyword">const</span> user = &#123; <span class="attr">name</span>: <span class="string">&#x27;Bruce&#x27;</span>, <span class="attr">age</span>: <span class="number">29</span> &#125;</span><br><span class="line">  <span class="comment">// 2.æœåŠ¡å™¨ç«¯é€šè¿‡å­—ç¬¦ä¸²çš„æ‹¼æ¥ï¼ŒåŠ¨æ€ç”ŸæˆHTMLå†…å®¹</span></span><br><span class="line">  <span class="keyword">const</span> html = <span class="string">`&lt;h1&gt;username:<span class="subst">$&#123;user.name&#125;</span>, age:<span class="subst">$&#123;user.age&#125;</span>&lt;/h1&gt;`</span></span><br><span class="line">  <span class="comment">// 3.æŠŠç”Ÿæˆå¥½çš„é¡µé¢å†…å®¹å“åº”ç»™å®¢æˆ·ç«¯ã€‚å› æ­¤ï¼Œå®¢æˆ·ç«¯æ‹¿åˆ°çš„æ˜¯å¸¦æœ‰çœŸå®æ•°æ®çš„HTMLé¡µé¢</span></span><br><span class="line">  res.<span class="title function_">send</span>(html)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä¼˜ç‚¹ï¼š</p><ul><li><strong>å‰ç«¯è€—æ—¶çŸ­</strong>ã€‚æµè§ˆå™¨åªéœ€ç›´æ¥æ¸²æŸ“é¡µé¢ï¼Œæ— éœ€é¢å¤–è¯·æ±‚æ•°æ®ã€‚</li><li><strong>æœ‰åˆ©äº SEO</strong>ã€‚æœåŠ¡å™¨å“åº”çš„æ˜¯å®Œæ•´çš„ HTML é¡µé¢å†…å®¹ï¼Œæœ‰åˆ©äºçˆ¬è™«çˆ¬å–ä¿¡æ¯ã€‚</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li><strong>å ç”¨æœåŠ¡å™¨èµ„æº</strong>ã€‚æœåŠ¡å™¨éœ€è¦å®Œæˆé¡µé¢å†…å®¹çš„æ‹¼æ¥ï¼Œè‹¥è¯·æ±‚æ¯”è¾ƒå¤šï¼Œä¼šå¯¹æœåŠ¡å™¨é€ æˆä¸€å®šè®¿é—®å‹åŠ›ã€‚</li><li><strong>ä¸åˆ©äºå‰åç«¯åˆ†ç¦»ï¼Œå¼€å‘æ•ˆç‡ä½</strong>ã€‚</li></ul><h3 id="å‰åç«¯åˆ†ç¦»">å‰åç«¯åˆ†ç¦»</h3><p>å‰åç«¯åˆ†ç¦»çš„å¼€å‘æ¨¡å¼ï¼Œä¾èµ–äº Ajax æŠ€æœ¯çš„å¹¿æ³›åº”ç”¨ã€‚åç«¯åªè´Ÿè´£æä¾› API æ¥å£ï¼Œå‰ç«¯ä½¿ç”¨ Ajax è°ƒç”¨æ¥å£ã€‚</p><p>ä¼˜ç‚¹ï¼š</p><ul><li><strong>å¼€å‘ä½“éªŒå¥½</strong>ã€‚å‰ç«¯ä¸“ä¸šé¡µé¢å¼€å‘ï¼Œåç«¯ä¸“æ³¨æ¥å£å¼€å‘ã€‚</li><li><strong>ç”¨æˆ·ä½“éªŒå¥½</strong>ã€‚é¡µé¢å±€éƒ¨åˆ·æ–°ï¼Œæ— éœ€é‡æ–°è¯·æ±‚é¡µé¢ã€‚</li><li><strong>å‡è½»æœåŠ¡å™¨çš„æ¸²æŸ“å‹åŠ›</strong>ã€‚é¡µé¢æœ€ç»ˆåœ¨æµè§ˆå™¨é‡Œç”Ÿæˆã€‚</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li><p><strong>ä¸åˆ©äº SEO</strong>ã€‚å®Œæ•´çš„ HTML é¡µé¢åœ¨æµè§ˆå™¨æ‹¼æ¥å®Œæˆï¼Œå› æ­¤çˆ¬è™«æ— æ³•çˆ¬å–é¡µé¢çš„æœ‰æ•ˆä¿¡æ¯ã€‚</p><p>ï¼ˆè§£å†³æ–¹æ¡ˆï¼šVueã€React ç­‰æ¡†æ¶çš„ SSRï¼ˆserver side renderï¼‰æŠ€æœ¯èƒ½è§£å†³ SEO é—®é¢˜ã€‚ï¼‰</p></li></ul><h3 id="å¦‚ä½•é€‰æ‹©">å¦‚ä½•é€‰æ‹©</h3><ul><li>ä¼ä¸šçº§ç½‘ç«™ï¼Œä¸»è¦åŠŸèƒ½æ˜¯å±•ç¤ºï¼Œæ²¡æœ‰å¤æ‚äº¤äº’ï¼Œä¸”éœ€è¦è‰¯å¥½çš„ SEOï¼Œå¯è€ƒè™‘æœåŠ¡ç«¯æ¸²æŸ“</li><li>åå°ç®¡ç†é¡¹ç›®ï¼Œäº¤äº’æ€§å¼ºï¼Œæ— éœ€è€ƒè™‘ SEOï¼Œå¯ä½¿ç”¨å‰åç«¯åˆ†ç¦»</li><li>ä¸ºåŒæ—¶å…¼é¡¾é¦–é¡µæ¸²æŸ“é€Ÿåº¦å’Œå‰åç«¯åˆ†ç¦»å¼€å‘æ•ˆç‡ï¼Œå¯é‡‡ç”¨é¦–å±æœåŠ¡å™¨ç«¯æ¸²æŸ“+å…¶ä»–é¡µé¢å‰åç«¯åˆ†ç¦»çš„å¼€å‘æ¨¡å¼</li></ul><h2 id="èº«ä»½è®¤è¯">èº«ä»½è®¤è¯</h2><h3 id="ä»€ä¹ˆæ˜¯èº«ä»½è®¤è¯">ä»€ä¹ˆæ˜¯èº«ä»½è®¤è¯</h3><p><strong>èº«ä»½è®¤è¯</strong>ï¼ˆAuthenticationï¼‰åˆç§°â€œèº«ä»½éªŒè¯â€ã€â€œé‰´æƒâ€ï¼Œæ˜¯æŒ‡<strong>é€šè¿‡ä¸€å®šçš„æ‰‹æ®µï¼Œå®Œæˆå¯¹ç”¨æˆ·èº«ä»½çš„ç¡®è®¤</strong>ã€‚</p><h4 id="ä¸åŒå¼€å‘æ¨¡å¼ä¸‹çš„èº«ä»½è®¤è¯">ä¸åŒå¼€å‘æ¨¡å¼ä¸‹çš„èº«ä»½è®¤è¯</h4><p>å¯¹äº<strong>æœåŠ¡ç«¯æ¸²æŸ“</strong>å’Œ<strong>å‰åç«¯åˆ†ç¦»</strong>è¿™ä¸¤ç§å¼€å‘æ¨¡å¼æ¥è¯´ï¼Œåˆ†åˆ«æœ‰ç€ä¸åŒçš„èº«ä»½è®¤è¯æ–¹æ¡ˆï¼š</p><p>â‘  <strong>æœåŠ¡ç«¯æ¸²æŸ“</strong>æ¨èä½¿ç”¨ <strong>Session</strong> <strong>è®¤è¯æœºåˆ¶</strong></p><p>â‘¡ <strong>å‰åç«¯åˆ†ç¦»</strong>æ¨èä½¿ç”¨ <strong>JWT</strong> <strong>è®¤è¯æœºåˆ¶</strong></p><h3 id="HTTPåè®®çš„æ— çŠ¶æ€æ€§">HTTPåè®®çš„æ— çŠ¶æ€æ€§</h3><p>HTTP åè®®çš„æ— çŠ¶æ€æ€§ï¼ŒæŒ‡çš„æ˜¯å®¢æˆ·ç«¯<strong>çš„æ¯æ¬¡</strong> <strong>HTTP</strong> <strong>è¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„</strong>ï¼Œè¿ç»­å¤šä¸ªè¯·æ±‚ä¹‹é—´æ²¡æœ‰ç›´æ¥çš„å…³ç³»ï¼Œ<strong>æœåŠ¡å™¨ä¸ä¼šä¸»åŠ¨ä¿ç•™æ¯æ¬¡</strong> <strong>HTTP</strong> <strong>è¯·æ±‚çš„çŠ¶æ€</strong>ã€‚</p><h4 id="å¦‚ä½•çªç ´HTTPæ— çŠ¶æ€çš„é™åˆ¶">å¦‚ä½•çªç ´HTTPæ— çŠ¶æ€çš„é™åˆ¶</h4><p>åœ¨Webå¼€å‘ä¸­å°†<strong>Cookie</strong>ä½œä¸ºèº«ä»½è®¤è¯çš„æ–¹å¼ï¼Œç±»ä¼¼äºç°å®ç”Ÿæ´»ä¸­è¶…å¸‚ä¼šå‘˜å¡æœºåˆ¶ã€‚</p><h5 id="ä»€ä¹ˆæ˜¯Cookie">ä»€ä¹ˆæ˜¯Cookie</h5><ul><li><p>Cookie æ˜¯<strong>å­˜å‚¨åœ¨ç”¨æˆ·æµè§ˆå™¨ä¸­çš„ä¸€æ®µä¸è¶…è¿‡</strong> <strong>4 KB</strong> <strong>çš„å­—ç¬¦ä¸²</strong>ã€‚</p></li><li><p>å®ƒç”±ä¸€ä¸ªåç§°ï¼ˆNameï¼‰ã€ä¸€ä¸ªå€¼ï¼ˆValueï¼‰å’Œå…¶å®ƒå‡ ä¸ªç”¨äºæ§åˆ¶ Cookie æœ‰æ•ˆæœŸã€å®‰å…¨æ€§ã€ä½¿ç”¨èŒƒå›´çš„å¯é€‰å±æ€§ç»„æˆã€‚</p></li><li><p>ä¸åŒåŸŸåä¸‹çš„ Cookie å„è‡ªç‹¬ç«‹ï¼Œæ¯å½“å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚æ—¶ï¼Œä¼š<strong>è‡ªåŠ¨</strong>æŠŠ<strong>å½“å‰åŸŸåä¸‹</strong>æ‰€æœ‰<strong>æœªè¿‡æœŸçš„</strong> <strong>Cookie</strong> ä¸€åŒå‘é€åˆ°æœåŠ¡å™¨ã€‚</p></li></ul><p><strong>Cookie</strong>çš„å‡ å¤§ç‰¹æ€§ï¼šâ‘  è‡ªåŠ¨å‘é€  â‘¡ åŸŸåç‹¬ç«‹  â‘¢ è¿‡æœŸæ—¶é™  â‘£ 4KB é™åˆ¶</p><h5 id="Cookieåœ¨èº«ä»½è®¤è¯ä¸­çš„ä½œç”¨">Cookieåœ¨èº«ä»½è®¤è¯ä¸­çš„ä½œç”¨</h5><p>å®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡è¯·æ±‚æœåŠ¡å™¨çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨<strong>é€šè¿‡å“åº”å¤´çš„å½¢å¼</strong>ï¼Œå‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªèº«ä»½è®¤è¯çš„ Cookieï¼Œå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨å°† Cookie ä¿å­˜åœ¨æµè§ˆå™¨ä¸­ã€‚</p><p>éšåï¼Œå½“å®¢æˆ·ç«¯æµè§ˆå™¨æ¯æ¬¡è¯·æ±‚æœåŠ¡å™¨çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼š<strong>è‡ªåŠ¨</strong>å°†èº«ä»½è®¤è¯ç›¸å…³çš„ Cookieï¼Œ<strong>é€šè¿‡è¯·æ±‚å¤´çš„å½¢å¼</strong>å‘é€ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å³å¯éªŒæ˜å®¢æˆ·ç«¯çš„èº«ä»½ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906201647455.png" alt="image-20220906201647455"></p><h5 id="Cookieä¸å…·æœ‰å®‰å…¨æ€§">Cookieä¸å…·æœ‰å®‰å…¨æ€§</h5><p>ç”±äº Cookie æ˜¯å­˜å‚¨åœ¨æµè§ˆå™¨ä¸­çš„ï¼Œè€Œä¸”<strong>æµè§ˆå™¨ä¹Ÿæä¾›äº†è¯»å†™</strong> <strong>Cookie</strong> <strong>çš„</strong> <strong>API</strong>ï¼Œå› æ­¤ <strong>Cookie</strong> <strong>å¾ˆå®¹æ˜“è¢«ä¼ªé€ </strong>ï¼Œä¸å…·æœ‰å®‰å…¨æ€§ã€‚å› æ­¤ä¸å»ºè®®æœåŠ¡å™¨å°†é‡è¦çš„éšç§æ•°æ®ï¼Œé€šè¿‡ Cookie çš„å½¢å¼å‘é€ç»™æµè§ˆå™¨ã€‚</p><h3 id="Session-è®¤è¯æœºåˆ¶">Session è®¤è¯æœºåˆ¶</h3><h4 id="Session-å·¥ä½œåŸç†">Session å·¥ä½œåŸç†</h4><p><img src= "/img/loading.gif" data-lazy-src="https://brucecai55520.gitee.io/bruceblog/assets/img/Session.c66d5499.png" alt="session"></p><h4 id="Express-ä¸­ä½¿ç”¨-Session-è®¤è¯">Express ä¸­ä½¿ç”¨ Session è®¤è¯</h4><ol><li>å®‰è£… express-session ä¸­é—´ä»¶</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install express-session</span><br></pre></td></tr></table></figure><ol start="2"><li>é…ç½®ä¸­é—´ä»¶</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> session = <span class="built_in">require</span>(<span class="string">&#x27;express-session&#x27;</span>)</span><br><span class="line"><span class="comment">// ä½¿ç”¨app.use()æ¥æ³¨å†Œsessionä¸­é—´ä»¶</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">session</span>(&#123;</span><br><span class="line">    <span class="attr">secret</span>: <span class="string">&#x27;Bruce&#x27;</span>, <span class="comment">// secret çš„å€¼ä¸ºä»»æ„å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="attr">resave</span>: <span class="literal">false</span>,  <span class="comment">// å›ºå®šå†™æ³•</span></span><br><span class="line">    <span class="attr">saveUninitalized</span>: <span class="literal">true</span>, <span class="comment">// å›ºå®šå†™æ³•</span></span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><ol start="3"><li>å‘ session ä¸­å­˜æ•°æ®</li></ol><p>ä¸­é—´ä»¶é…ç½®æˆåŠŸåï¼Œå¯é€šè¿‡ <code>req.session</code> è®¿é—® session å¯¹è±¡ï¼Œå­˜å‚¨ç”¨æˆ·ä¿¡æ¯</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/api/login&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  req.<span class="property">session</span>.<span class="property">user</span> = req.<span class="property">body</span></span><br><span class="line">  req.<span class="property">session</span>.<span class="property">isLogin</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  res.<span class="title function_">send</span>(&#123; <span class="attr">status</span>: <span class="number">0</span>, <span class="attr">msg</span>: <span class="string">&#x27;login done&#x27;</span> &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="4"><li>ä» session å–æ•°æ®</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–ç”¨æˆ·å§“åçš„æ¥å£</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/api/username&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•</span></span><br><span class="line">  <span class="keyword">if</span> (!req.<span class="property">session</span>.<span class="property">isLogin</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> res.<span class="title function_">send</span>(&#123; <span class="attr">status</span>: <span class="number">1</span>, <span class="attr">msg</span>: <span class="string">&#x27;fail&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  res.<span class="title function_">send</span>(&#123; <span class="attr">status</span>: <span class="number">0</span>, <span class="attr">msg</span>: <span class="string">&#x27;success&#x27;</span>, <span class="attr">username</span>: req.<span class="property">session</span>.<span class="property">user</span>.<span class="property">username</span> &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="5"><li><p>æ¸…ç©º session</p><p>è°ƒç”¨ <strong>req.session.destroy()</strong> å‡½æ•°ï¼Œå³å¯æ¸…ç©ºæœåŠ¡å™¨ä¿å­˜çš„ session ä¿¡æ¯ã€‚</p></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/api/logout&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ¸…ç©ºå½“å‰å®¢æˆ·ç«¯çš„sessionä¿¡æ¯</span></span><br><span class="line">  req.<span class="property">session</span>.<span class="title function_">destroy</span>()</span><br><span class="line">  res.<span class="title function_">send</span>(&#123; <span class="attr">status</span>: <span class="number">0</span>, <span class="attr">msg</span>: <span class="string">&#x27;logout done&#x27;</span> &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="Sessionè®¤è¯çš„å±€é™æ€§">Sessionè®¤è¯çš„å±€é™æ€§</h4><p>Session è®¤è¯æœºåˆ¶éœ€è¦é…åˆ Cookie æ‰èƒ½å®ç°ã€‚ç”±äº Cookie é»˜è®¤ä¸æ”¯æŒè·¨åŸŸè®¿é—®ï¼Œæ‰€ä»¥ï¼Œå½“æ¶‰åŠåˆ°å‰ç«¯è·¨åŸŸè¯·æ±‚åç«¯æ¥å£çš„æ—¶å€™ï¼Œ<strong>éœ€è¦åšå¾ˆå¤šé¢å¤–çš„é…ç½®</strong>ï¼Œæ‰èƒ½å®ç°è·¨åŸŸ Session è®¤è¯ã€‚</p><blockquote><p><strong>æ³¨æ„</strong>ï¼š</p><ul><li><p>å½“å‰ç«¯è¯·æ±‚åç«¯æ¥å£<strong>ä¸å­˜åœ¨è·¨åŸŸé—®é¢˜</strong>çš„æ—¶å€™ï¼Œ<strong>æ¨èä½¿ç”¨</strong> <strong>Session</strong> èº«ä»½è®¤è¯æœºåˆ¶ã€‚</p></li><li><p>å½“å‰ç«¯éœ€è¦è·¨åŸŸè¯·æ±‚åç«¯æ¥å£çš„æ—¶å€™ï¼Œä¸æ¨èä½¿ç”¨ Session èº«ä»½è®¤è¯æœºåˆ¶ï¼Œæ¨èä½¿ç”¨ JWT è®¤è¯æœºåˆ¶ã€‚</p></li></ul></blockquote><h3 id="JWT-è®¤è¯æœºåˆ¶">JWT è®¤è¯æœºåˆ¶</h3><p>å‰åç«¯åˆ†ç¦»æ¨èä½¿ç”¨ JWTï¼ˆJSON Web Tokenï¼‰è®¤è¯æœºåˆ¶ï¼Œæ˜¯ç›®å‰æœ€æµè¡Œçš„è·¨åŸŸè®¤è¯è§£å†³æ–¹æ¡ˆ</p><h4 id="JWT-å·¥ä½œåŸç†">JWT å·¥ä½œåŸç†</h4><p>ç”¨æˆ·çš„ä¿¡æ¯é€šè¿‡ Token å­—ç¬¦ä¸²çš„å½¢å¼ï¼Œä¿å­˜åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ä¸­ã€‚æœåŠ¡å™¨é€šè¿‡è¿˜åŸ Token å­—ç¬¦ä¸²çš„å½¢å¼æ¥è®¤è¯ç”¨æˆ·çš„èº«ä»½ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/JWT.6a82c41d.png" alt="JWT"></p><h5 id="JWT-ç»„æˆéƒ¨åˆ†">JWT ç»„æˆéƒ¨åˆ†</h5><ul><li>é€šå¸¸ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯ <code>Headerï¼ˆå¤´éƒ¨ï¼‰ã€Payloadï¼ˆæœ‰æ•ˆè·è½½ï¼‰ã€Signatureï¼ˆç­¾åï¼‰</code>ã€‚ä¸‰è€…ä½¿ç”¨ <code>.</code> åˆ†éš”</li></ul><p>å…¶ä¸­ï¼š</p><ul><li><code>Payload</code> æ˜¯çœŸæ­£çš„ç”¨æˆ·ä¿¡æ¯ï¼ŒåŠ å¯†åçš„å­—ç¬¦ä¸²</li><li><code>Header</code> å’Œ <code>Signature</code> æ˜¯å®‰å…¨æ€§ç›¸å…³éƒ¨åˆ†ï¼Œä¿è¯ <code>Token</code> å®‰å…¨æ€§</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¼å¼å¦‚ä¸‹</span></span><br><span class="line"><span class="title class_">Header</span>.<span class="property">Payload</span>.<span class="property">Signature</span></span><br><span class="line"><span class="comment">// JWTå­—ç¬¦ä¸²çš„ç¤ºä¾‹</span></span><br><span class="line">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.<span class="property">eyJpZCI6MTcsInVzZXJuYW1lIjoiQnJ1Y2UiLCJwYXNzd29yZCI6IiIsIm5pY2tuYW1lIjoiaGVsbG8iLCJlbWFpbCI6InNjdXRAcXEuY29tIiwidXNlcl9waWMiOiIiLCJpYXQiOjE2NDE4NjU3MzEsImV4cCI6MTY0MTkwMTczMX0</span>.<span class="property">bmqzAkNSZgD8IZxRGGyVlVwGl7EGMtWitvjGD</span>-a5U5c</span><br></pre></td></tr></table></figure><h5 id="JWT-ä½¿ç”¨æ–¹å¼">JWT ä½¿ç”¨æ–¹å¼</h5><ul><li>å®¢æˆ·ç«¯ä¼šæŠŠ JWT å­˜å‚¨åœ¨ <strong>localStorage</strong> æˆ– <strong>sessionStorage</strong> ä¸­</li><li>æ­¤åå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯é€šä¿¡éœ€è¦æºå¸¦ JWT è¿›è¡Œèº«ä»½è®¤è¯ï¼Œå°† JWT å­˜åœ¨ HTTP è¯·æ±‚å¤´ Authorization å­—æ®µä¸­</li><li>åŠ ä¸Š Bearer å‰ç¼€</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Authorization</span>: <span class="title class_">Bearer</span> &lt;token&gt;</span><br></pre></td></tr></table></figure><h5 id="Express-ä½¿ç”¨-JWT">Express ä½¿ç”¨ JWT</h5><ol><li>å®‰è£…å¹¶ä½¿ç”¨<code>require()</code>å‡½æ•°å¯¼å…¥</li></ol><ul><li><code>jsonwebtoken</code> ç”¨äº<strong>ç”Ÿæˆ JWT å­—ç¬¦ä¸²</strong></li><li><code>express-jwt</code> ç”¨äº<strong>å°† JWT å­—ç¬¦ä¸²è§£æè¿˜åŸæˆ JSON å¯¹è±¡</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install jsonwebtoken express-jwt</span><br></pre></td></tr></table></figure><ol start="2"><li>å®šä¹‰ secret å¯†é’¥</li></ol><ul><li>ä¸ºä¿è¯ JWT å­—ç¬¦ä¸²çš„å®‰å…¨æ€§ï¼Œé˜²æ­¢å…¶åœ¨ç½‘ç»œä¼ è¾“è¿‡ç¨‹ä¸­è¢«ç ´è§£ï¼Œéœ€å®šä¹‰ç”¨äºåŠ å¯†å’Œè§£å¯†çš„ secret å¯†é’¥</li><li>ç”Ÿæˆ JWT å­—ç¬¦ä¸²æ—¶ï¼Œä½¿ç”¨å¯†é’¥åŠ å¯†ä¿¡æ¯ï¼Œå¾—åˆ°åŠ å¯†å¥½çš„ JWT å­—ç¬¦ä¸²</li><li>æŠŠ JWT å­—ç¬¦ä¸²è§£æè¿˜åŸæˆ JSON å¯¹è±¡æ—¶ï¼Œä½¿ç”¨å¯†é’¥è§£å¯†</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> jwt = <span class="built_in">require</span>(<span class="string">&#x27;jsonwebtoken&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> expressJWT = <span class="built_in">require</span>(<span class="string">&#x27;express-jwt&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯†é’¥ä¸ºä»»æ„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">const</span> secretKey = <span class="string">&#x27;itheuima No1 ^_^&#x27;</span></span><br></pre></td></tr></table></figure><ol start="3"><li><p>ç”Ÿæˆ JWT å­—ç¬¦ä¸²</p><p>è°ƒç”¨ <strong>jsonwebtoken</strong> åŒ…æä¾›çš„ <strong>sign()</strong> æ–¹æ³•ï¼Œå°†ç”¨æˆ·çš„ä¿¡æ¯åŠ å¯†æˆ JWT å­—ç¬¦ä¸²ï¼Œå“åº”ç»™å®¢æˆ·ç«¯</p></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/api/login&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">  res.<span class="title function_">send</span>(&#123;</span><br><span class="line">    <span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;ç™»å½•æˆåŠŸ&#x27;</span>,</span><br><span class="line">    <span class="comment">// jwt.sign() ç”Ÿæˆ JWT å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="comment">// å‚æ•°ï¼šç”¨æˆ·ä¿¡æ¯å¯¹è±¡ã€åŠ å¯†å¯†é’¥ã€é…ç½®å¯¹è±¡-tokenæœ‰æ•ˆæœŸ</span></span><br><span class="line">    <span class="comment">// å°½é‡ä¸ä¿å­˜æ•æ„Ÿä¿¡æ¯ï¼Œå› æ­¤åªæœ‰ç”¨æˆ·åï¼Œæ²¡æœ‰å¯†ç </span></span><br><span class="line">    <span class="attr">token</span>: jwt.<span class="title function_">sign</span>(&#123;<span class="attr">username</span>: userInfo.<span class="property">username</span>&#125;, secretKey, &#123;<span class="attr">expiresIn</span>: <span class="string">&#x27;30s&#x27;</span>&#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="4"><li>JWT å­—ç¬¦ä¸²è¿˜åŸä¸º JSON å¯¹è±¡</li></ol><ul><li>å®¢æˆ·ç«¯è®¿é—®æœ‰æƒé™çš„æ¥å£æ—¶ï¼Œéœ€é€šè¿‡è¯·æ±‚å¤´çš„ <code>Authorization</code> å­—æ®µï¼Œå°† Token å­—ç¬¦ä¸²å‘é€åˆ°æœåŠ¡å™¨è¿›è¡Œèº«ä»½è®¤è¯</li><li>æœåŠ¡å™¨å¯ä»¥é€šè¿‡ express-jwt ä¸­é—´ä»¶å°†å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„ Token è§£æè¿˜åŸæˆ JSON å¯¹è±¡</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// unless(&#123; path: [/^\/api\//] &#125;) æŒ‡å®šå“ªäº›æ¥å£æ— éœ€è®¿é—®æƒé™</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">expressJWT</span>(&#123; <span class="attr">secret</span>: secretKey &#125;).<span class="title function_">unless</span>(&#123; <span class="attr">path</span>: [<span class="regexp">/^\/api\//</span>] &#125;))</span><br></pre></td></tr></table></figure><ol start="5"><li>è·å–ç”¨æˆ·ä¿¡æ¯</li></ol><ul><li>å½“ express-jwt ä¸­é—´ä»¶é…ç½®æˆåŠŸåï¼Œå³å¯åœ¨é‚£äº›æœ‰æƒé™çš„æ¥å£ä¸­ï¼Œä½¿ç”¨ <code>req.user</code> å¯¹è±¡ï¼Œæ¥è®¿é—®ä» JWT å­—ç¬¦ä¸²ä¸­è§£æå‡ºæ¥çš„ç”¨æˆ·ä¿¡æ¯</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™æ˜¯ä¸€ä¸ªæœ‰æƒé™çš„APIæ¥å£</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/admin/getinfo&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">user</span>)</span><br><span class="line">  res.<span class="title function_">send</span>(&#123;</span><br><span class="line">    <span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;è·å–ä¿¡æ¯æˆåŠŸ&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: req.<span class="property">user</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="6"><li>æ•è·è§£æ JWT å¤±è´¥åäº§ç”Ÿçš„é”™è¯¯</li></ol><ul><li>å½“ä½¿ç”¨ express-jwt è§£æ Token å­—ç¬¦ä¸²æ—¶ï¼Œå¦‚æœå®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„ Token å­—ç¬¦ä¸²è¿‡æœŸæˆ–ä¸åˆæ³•ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªè§£æå¤±è´¥çš„é”™è¯¯ï¼Œå½±å“é¡¹ç›®çš„æ­£å¸¸è¿è¡Œ</li><li>é€šè¿‡ Express çš„é”™è¯¯ä¸­é—´ä»¶ï¼Œæ•è·è¿™ä¸ªé”™è¯¯å¹¶è¿›è¡Œç›¸å…³çš„å¤„ç†</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">err, req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err.<span class="property">name</span> === <span class="string">&#x27;UnauthorizedError&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> res.<span class="title function_">send</span>(&#123; <span class="attr">status</span>: <span class="number">401</span>, <span class="attr">message</span>: <span class="string">&#x27;Invalid token&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  res.<span class="title function_">send</span>(&#123; <span class="attr">status</span>: <span class="number">500</span>, <span class="attr">message</span>: <span class="string">&#x27;Unknown error&#x27;</span> &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;æ•°æ®åº“å’Œèº«ä»½è®¤è¯&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;æ•°æ®åº“ï¼ˆdatabaseï¼‰æ˜¯ç”¨æ¥&lt;strong&gt;ç»„ç»‡ã€å­˜å‚¨å’Œç®¡ç†&lt;/strong&gt;æ•°æ®çš„ä»“åº“ã€‚&lt;/p&gt;
&lt;p&gt;ç”¨æˆ·å¯ä»¥å¯¹æ•°æ®åº“ä¸­çš„æ•°æ®è¿›è¡Œ&lt;strong&gt;æ–°å¢ã€æŸ¥è¯¢ã€æ›´æ–°ã€åˆ é™¤&lt;/strong&gt;ç­‰æ“ä½œã€‚&lt;/p&gt;
&lt;/l</summary>
      
    
    
    
    <category term="åç«¯ğŸŸ" scheme="https://blog.cilicili.xyz/categories/%E5%90%8E%E7%AB%AF%F0%9F%8D%9F/"/>
    
    
    <category term="Node" scheme="https://blog.cilicili.xyz/tags/Node/"/>
    
    <category term="Express" scheme="https://blog.cilicili.xyz/tags/Express/"/>
    
    <category term="æ•°æ®åº“" scheme="https://blog.cilicili.xyz/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>ã€åç«¯ã€‘Expresså¿«é€Ÿå…¥é—¨</title>
    <link href="https://blog.cilicili.xyz/posts/3f9f8ce4.html"/>
    <id>https://blog.cilicili.xyz/posts/3f9f8ce4.html</id>
    <published>2022-09-05T14:05:13.000Z</published>
    <updated>2022-09-09T09:35:02.289Z</updated>
    
    <content type="html"><![CDATA[<h1>Express</h1><p><a href="https://www.expressjs.com.cn/">å®˜ç½‘ä¼ é€é—¨</a></p><blockquote><p>åŸºäº Node.js å¹³å°ï¼Œå¿«é€Ÿã€å¼€æ”¾ã€æç®€çš„ Web å¼€å‘æ¡†æ¶</p></blockquote><p>Express çš„ä½œç”¨å’ŒNode.jså†…ç½®çš„httpæ¨¡å—ç±»ä¼¼ï¼Œæ˜¯ç”¨äºå¿«é€Ÿåˆ›å»ºWebæœåŠ¡å™¨çš„ç¬¬ä¸‰æ–¹æ¨¡å—ã€‚</p><p><strong>Expressçš„ä½œç”¨ï¼š</strong></p><p>å¯¹äºå‰ç«¯ç¨‹åºå‘˜æ¥è¯´ï¼Œæœ€å¸¸è§çš„ä¸¤ç§æœåŠ¡å™¨ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul><li><p>Web ç½‘ç«™æœåŠ¡å™¨ï¼šä¸“é—¨å¯¹å¤–æä¾› Web ç½‘é¡µèµ„æºçš„æœåŠ¡å™¨ã€‚</p></li><li><p>API æ¥å£æœåŠ¡å™¨ï¼šä¸“é—¨å¯¹å¤–æä¾› API æ¥å£çš„æœåŠ¡å™¨ã€‚</p></li></ul><p>ä½¿ç”¨ Expressï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿ã€å¿«é€Ÿçš„åˆ›å»º Web ç½‘ç«™çš„æœåŠ¡å™¨æˆ– API æ¥å£çš„æœåŠ¡å™¨ã€‚</p><h2 id="Express-åˆä½“éªŒ">Express åˆä½“éªŒ</h2><h3 id="åŸºæœ¬ä½¿ç”¨">åŸºæœ¬ä½¿ç”¨</h3><p>å®‰è£… Expressï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install express</span><br></pre></td></tr></table></figure><p>åˆ›å»ºæœåŠ¡å™¨ï¼Œç›‘å¬å®¢æˆ·ç«¯è¯·æ±‚ï¼Œå¹¶è¿”å›å†…å®¹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="comment">// åˆ›å»º web æœåŠ¡å™¨</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬å®¢æˆ·ç«¯çš„ GET å’Œ POST è¯·æ±‚ï¼Œå¹¶å‘å®¢æˆ·ç«¯å“åº”å…·ä½“çš„å†…å®¹</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/user&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">gender</span>: <span class="string">&#x27;ç”·&#x27;</span> &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/user&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;è¯·æ±‚æˆåŠŸ&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// é€šè¿‡ req.query å¯ä»¥è·å–åˆ°å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„æŸ¥è¯¢å‚æ•°ï¼Œä¾‹å¦‚?name=zs&amp;age=20</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">query</span>)</span><br><span class="line">  res.<span class="title function_">send</span>(req.<span class="property">query</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™é‡Œçš„ :id æ˜¯ä¸€ä¸ªåŠ¨æ€çš„å‚æ•°</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/user/:ids/:username&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// req.params æ˜¯åŠ¨æ€åŒ¹é…åˆ°çš„ URL å‚æ•°ï¼Œé»˜è®¤æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">params</span>)</span><br><span class="line">  res.<span class="title function_">send</span>(req.<span class="property">params</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">80</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;express server running at http://127.0.0.1&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="æ‰˜ç®¡é™æ€èµ„æº">æ‰˜ç®¡é™æ€èµ„æº</h3><ul><li>é€šè¿‡ <code>express.static()</code> æ–¹æ³•å¯åˆ›å»ºé™æ€èµ„æºæœåŠ¡å™¨ï¼Œå‘å¤–å¼€æ”¾è®¿é—®é™æ€èµ„æºã€‚</li><li>Express åœ¨æŒ‡å®šçš„é™æ€ç›®å½•ä¸­æŸ¥æ‰¾æ–‡ä»¶ï¼Œå¹¶å¯¹å¤–æä¾›èµ„æºçš„è®¿é—®è·¯å¾„ï¼Œå­˜æ”¾é™æ€æ–‡ä»¶çš„ç›®å½•åä¸ä¼šå‡ºç°åœ¨ URL ä¸­</li><li>è®¿é—®é™æ€èµ„æºæ—¶ï¼Œä¼šæ ¹æ®æ‰˜ç®¡é¡ºåºæŸ¥æ‰¾æ–‡ä»¶</li><li>å¯ä¸ºé™æ€èµ„æºè®¿é—®è·¯å¾„æ·»åŠ å‰ç¼€</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">static</span>(<span class="string">&#x27;public&#x27;</span>)) <span class="comment">// ç°åœ¨ï¼Œä½ å°±å¯ä»¥è®¿é—®publicç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶äº†</span></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">static</span>(<span class="string">&#x27;files&#x27;</span>))  <span class="comment">// æ‰˜ç®¡å¤šä¸ªé™æ€èµ„æºç›®å½•ï¼Œè¯·å¤šæ¬¡è°ƒç”¨</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/bruce&#x27;</span>, express.<span class="title function_">static</span>(<span class="string">&#x27;bruce&#x27;</span>)) <span class="comment">// æŒ‚è½½è·¯å¾„å‰ç¼€</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å¯ç›´æ¥è®¿é—® public, files ç›®å½•ä¸‹çš„é™æ€èµ„æº</span></span><br><span class="line"><span class="comment">http://localhost:3000/images/bg.jpg</span></span><br><span class="line"><span class="comment">http://localhost:3000/css/style.css</span></span><br><span class="line"><span class="comment">http://localhost:3000/js/login.js</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">é€šè¿‡å¸¦æœ‰ /bruce å‰ç¼€çš„åœ°å€è®¿é—® bruce ç›®å½•ä¸‹çš„æ–‡ä»¶</span></span><br><span class="line"><span class="comment">http://localhost:8080/bruce/images/logo.png</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="nodemon">nodemon</h3><h4 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨nodemonï¼Ÿ">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨nodemonï¼Ÿ</h4><p>åœ¨ç¼–å†™è°ƒè¯• Node.js é¡¹ç›®çš„æ—¶å€™ï¼Œå¦‚æœä¿®æ”¹äº†é¡¹ç›®çš„ä»£ç ï¼Œåˆ™éœ€è¦é¢‘ç¹çš„æ‰‹åŠ¨ close æ‰ï¼Œç„¶åå†é‡æ–°å¯åŠ¨ï¼Œéå¸¸ç¹çã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <a href="https://www.npmjs.com/package/nodemon">nodemon</a>è¿™ä¸ªå·¥å…·ï¼Œå®ƒèƒ½å¤Ÿç›‘å¬é¡¹ç›®æ–‡ä»¶çš„å˜åŠ¨ï¼Œå½“ä»£ç è¢«ä¿®æ”¹åï¼Œ<code>nodemon</code> ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬é‡å¯é¡¹ç›®ï¼Œæå¤§æ–¹ä¾¿äº†å¼€å‘å’Œè°ƒè¯•ã€‚</p><h4 id="å®‰è£…nodemon">å®‰è£…nodemon</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g nodemon</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨nodemon">ä½¿ç”¨nodemon</h4><ul><li><p>å½“åŸºäº <code>Node.js</code> ç¼–å†™äº†ä¸€ä¸ªç½‘ç«™åº”ç”¨çš„æ—¶å€™ï¼Œä¼ ç»Ÿçš„æ–¹å¼ï¼Œæ˜¯è¿è¡Œ <code>node app.js</code> å‘½ä»¤ï¼Œæ¥å¯åŠ¨é¡¹ç›®ã€‚è¿™æ ·åšçš„<strong>åå¤„</strong>æ˜¯ï¼šä»£ç è¢«ä¿®æ”¹ä¹‹åï¼Œéœ€è¦æ‰‹åŠ¨é‡å¯é¡¹ç›®ã€‚</p></li><li><p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å°† <code>node</code> å‘½ä»¤æ›¿æ¢ä¸º <code>nodemon</code> å‘½ä»¤ï¼Œä½¿ç”¨ <code>nodemon app.js</code> æ¥å¯åŠ¨é¡¹ç›®ã€‚è¿™æ ·åšçš„<strong>å¥½å¤„</strong>æ˜¯ï¼šä»£ç è¢«ä¿®æ”¹ä¹‹åï¼Œä¼šè¢« <code>nodemon</code> ç›‘å¬åˆ°ï¼Œä»è€Œå®ç°è‡ªåŠ¨é‡å¯é¡¹ç›®çš„æ•ˆæœã€‚</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># node app.js</span></span><br><span class="line">nodemon app.js</span><br></pre></td></tr></table></figure><h2 id="Express-è·¯ç”±">Express è·¯ç”±</h2><h4 id="ä»€ä¹ˆæ˜¯è·¯ç”±">ä»€ä¹ˆæ˜¯è·¯ç”±</h4><p>å¹¿ä¹‰ä¸Šæ¥è®²ï¼Œè·¯ç”±å°±æ˜¯<strong>æ˜ å°„å…³ç³»</strong>ã€‚</p><h4 id="Expressä¸­çš„è·¯ç”±">Expressä¸­çš„è·¯ç”±</h4><p>åœ¨ <code>Express</code> ä¸­ï¼Œè·¯ç”±æŒ‡çš„æ˜¯<strong>å®¢æˆ·ç«¯çš„è¯·æ±‚</strong>ä¸<strong>æœåŠ¡å™¨å¤„ç†å‡½æ•°</strong>ä¹‹é—´çš„<strong>æ˜ å°„å…³ç³»</strong>ã€‚</p><p><code>Express</code> ä¸­çš„è·¯ç”±åˆ† <strong>3</strong> éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯<strong>è¯·æ±‚çš„ç±»å‹ã€è¯·æ±‚çš„ URL åœ°å€ã€å¤„ç†å‡½æ•°</strong>ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906134425528.png" alt="image-20220906134425528"></p><h4 id="Expressä¸­çš„è·¯ç”±çš„ä¾‹å­">Expressä¸­çš„è·¯ç”±çš„ä¾‹å­</h4><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906134446465.png" alt="image-20220906134446465"></p><h4 id="è·¯ç”±çš„åŒ¹é…è¿‡ç¨‹">è·¯ç”±çš„åŒ¹é…è¿‡ç¨‹</h4><p>æ¯å½“ä¸€ä¸ªè¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨ä¹‹åï¼Œ<strong>éœ€è¦å…ˆç»è¿‡è·¯ç”±çš„åŒ¹é…</strong>ï¼Œåªæœ‰åŒ¹é…æˆåŠŸä¹‹åï¼Œæ‰ä¼šè°ƒç”¨å¯¹åº”çš„å¤„ç†å‡½æ•°ã€‚</p><p>åœ¨åŒ¹é…æ—¶ï¼Œä¼šæŒ‰ç…§è·¯ç”±çš„é¡ºåºè¿›è¡ŒåŒ¹é…ï¼Œå¦‚æœ<strong>è¯·æ±‚ç±»å‹</strong>å’Œ<strong>è¯·æ±‚çš„ URL</strong> åŒæ—¶åŒ¹é…æˆåŠŸï¼Œåˆ™ <code>Express</code> ä¼šå°†è¿™æ¬¡è¯·æ±‚ï¼Œè½¬äº¤ç»™å¯¹åº”çš„ <code>function å‡½æ•°</code>è¿›è¡Œå¤„ç†ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906134540314.png" alt="image-20220906134540314"></p><blockquote><p>è·¯ç”±åŒ¹é…çš„<strong>æ³¨æ„ç‚¹</strong>ï¼š</p><p>â‘  æŒ‰ç…§å®šä¹‰çš„<strong>å…ˆåé¡ºåº</strong>è¿›è¡ŒåŒ¹é…</p><p>â‘¡ <strong>è¯·æ±‚ç±»å‹</strong>å’Œ<strong>è¯·æ±‚çš„URL</strong>åŒæ—¶åŒ¹é…æˆåŠŸï¼Œæ‰ä¼šè°ƒç”¨å¯¹åº”çš„å¤„ç†å‡½æ•°</p></blockquote><h4 id="è·¯ç”±çš„ä½¿ç”¨">è·¯ç”±çš„ä½¿ç”¨</h4><p>**æœ€ç®€å•çš„ç”¨æ³•ï¼š**åœ¨ Express ä¸­ä½¿ç”¨è·¯ç”±æœ€ç®€å•çš„æ–¹å¼ï¼Œå°±æ˜¯æŠŠè·¯ç”±æŒ‚è½½åˆ° app ä¸Šã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>,<span class="function">(<span class="params">req,res</span>) =&gt;</span> &#123;res.<span class="title function_">send</span>(<span class="string">&#x27;Hello World.&#x27;</span>)&#125;)</span><br></pre></td></tr></table></figure><h5 id="æ¨¡å—åŒ–è·¯ç”±">æ¨¡å—åŒ–è·¯ç”±</h5><p>ä¸ºäº†æ–¹ä¾¿å¯¹è·¯ç”±è¿›è¡Œæ¨¡å—åŒ–çš„ç®¡ç†ï¼ŒExpress <strong>ä¸å»ºè®®</strong>å°†è·¯ç”±ç›´æ¥æŒ‚è½½åˆ° app ä¸Šï¼Œè€Œæ˜¯<strong>æ¨èå°†è·¯ç”±æŠ½ç¦»ä¸ºå•ç‹¬çš„æ¨¡å—ã€‚</strong></p><p><strong>å°†è·¯ç”±æŠ½ç¦»ä¸ºå•ç‹¬æ¨¡å—çš„æ­¥éª¤å¦‚ä¸‹ï¼š</strong></p><p>â‘  åˆ›å»ºè·¯ç”±æ¨¡å—å¯¹åº”çš„ <code>.js</code> æ–‡ä»¶</p><p>â‘¡ è°ƒç”¨ <code>express.Router()</code> å‡½æ•°åˆ›å»ºè·¯ç”±å¯¹è±¡</p><p>â‘¢ å‘è·¯ç”±å¯¹è±¡ä¸ŠæŒ‚è½½å…·ä½“çš„è·¯ç”±</p><p>â‘£ ä½¿ç”¨ <code>module.exports</code> å‘å¤–å…±äº«è·¯ç”±å¯¹è±¡</p><p>â‘¤ ä½¿ç”¨ <code>app.use()</code> å‡½æ•°æ³¨å†Œè·¯ç”±æ¨¡å—</p><p><strong>åˆ›å»ºè·¯ç”±æ¨¡å—ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥router.js</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="comment">// åˆ›å»ºè·¯ç”±å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‚è½½è·å–ç”¨æˆ·åˆ—è¡¨çš„è·¯ç”±</span></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/user/list&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;Get user list.&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// æŒ‚è½½æ·»åŠ ç”¨æˆ·çš„è·¯ç”±</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/user/add&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;Add new user.&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘å¤–å¯¼å‡ºè·¯ç”±å¯¹è±¡</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router</span><br></pre></td></tr></table></figure><p>æ³¨å†Œè·¯ç”±æ¨¡å—ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> router = <span class="built_in">require</span>(<span class="string">&#x27;./router&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨å†Œè·¯ç”±æ¨¡å—ï¼Œæ·»åŠ è®¿é—®å‰ç¼€ // app.use() å‡½æ•°çš„ä½œç”¨ï¼Œå°±æ˜¯æ¥æ³¨å†Œå…¨å±€ä¸­é—´ä»¶</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/api&#x27;</span>, router)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">80</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;http://127.0.0.1&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="Express-ä¸­é—´ä»¶">Express ä¸­é—´ä»¶</h2><ul><li>ä¸­é—´ä»¶ï¼ˆMiddlewareï¼‰æ˜¯æŒ‡<strong>ä¸šåŠ¡æµç¨‹</strong>çš„<strong>ä¸­é—´å¤„ç†ç¯èŠ‚</strong></li><li>å½“ä¸€ä¸ªè¯·æ±‚åˆ°è¾¾ <code>Express</code> çš„æœåŠ¡å™¨ä¹‹åï¼Œå¯ä»¥è¿ç»­è°ƒç”¨å¤šä¸ªä¸­é—´ä»¶ï¼Œä»è€Œå¯¹è¿™æ¬¡è¯·æ±‚è¿›è¡Œé¢„å¤„ç†ã€‚</li></ul><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906135857522.png" alt="image-20220906135857522"></p><ul><li>ä¸­é—´ä»¶æœ¬è´¨æ˜¯ä¸€ä¸ª<code>funcitonå¤„ç†å‡½æ•°</code>ï¼ŒExpressä¸­é—´ä»¶çš„æ ¼å¼å¦‚ä¸‹ï¼š</li></ul><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906135933713.png" alt="image-20220906135933713"></p><blockquote><p><strong>æ³¨æ„</strong>ï¼šä¸­é—´ä»¶å‡½æ•°çš„å½¢å‚åˆ—è¡¨ä¸­ï¼Œå¿…é¡»åŒ…å« <code>next</code> å‚æ•°ã€‚è€Œè·¯ç”±å¤„ç†å‡½æ•°ä¸­åªåŒ…å« <code>req</code> å’Œ <code>res</code>ã€‚</p></blockquote><ul><li><strong>next</strong> <strong>å‡½æ•°</strong>æ˜¯å®ç°<strong>å¤šä¸ªä¸­é—´ä»¶è¿ç»­è°ƒç”¨</strong>çš„å…³é”®ï¼Œå®ƒè¡¨ç¤ºæŠŠæµè½¬å…³ç³»<strong>è½¬äº¤</strong>ç»™ä¸‹ä¸€ä¸ª<strong>ä¸­é—´ä»¶</strong>æˆ–<strong>è·¯ç”±</strong>ã€‚</li></ul><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906140849659.png" alt="image-20220906140849659"></p><blockquote><p>ä¸­é—´ä»¶<strong>æ³¨æ„äº‹é¡¹</strong>ï¼›</p><p>â‘  ä¸€å®šè¦åœ¨<strong>è·¯ç”±ä¹‹å‰</strong>æ³¨å†Œä¸­é—´ä»¶</p><p>â‘¡ å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„è¯·æ±‚ï¼Œ<strong>å¯ä»¥è¿ç»­è°ƒç”¨å¤šä¸ª</strong>ä¸­é—´ä»¶è¿›è¡Œå¤„ç†</p><p>â‘¢ æ‰§è¡Œå®Œä¸­é—´ä»¶çš„ä¸šåŠ¡ä»£ç ä¹‹åï¼Œ<strong>ä¸è¦å¿˜è®°è°ƒç”¨ next() å‡½æ•°</strong></p><p>â‘£ ä¸ºäº†<strong>é˜²æ­¢ä»£ç é€»è¾‘æ··ä¹±</strong>ï¼Œè°ƒç”¨ <code>next()</code> å‡½æ•°åä¸è¦å†å†™é¢å¤–çš„ä»£ç </p><p>è¿ç»­è°ƒç”¨å¤šä¸ªä¸­é—´ä»¶æ—¶ï¼Œå¤šä¸ªä¸­é—´ä»¶ä¹‹é—´ï¼Œ<strong>å…±äº«</strong> <code>req</code> å’Œ <code>res</code> å¯¹è±¡</p></blockquote><h3 id="ä¸­é—´ä»¶çš„ä½œç”¨">ä¸­é—´ä»¶çš„ä½œç”¨</h3><p>å¤šä¸ªä¸­é—´ä»¶ä¹‹é—´ï¼Œ<strong>å…±äº«åŒä¸€ä»½</strong> <strong><code>req</code></strong> <strong>å’Œ</strong> <strong><code>res</code></strong>ã€‚åŸºäºè¿™æ ·çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸Šæ¸¸çš„ä¸­é—´ä»¶ä¸­ï¼Œ<strong>ç»Ÿä¸€</strong>ä¸º <code>req</code> æˆ– <code>res</code> å¯¹è±¡æ·»åŠ è‡ªå®šä¹‰çš„å±æ€§æˆ–æ–¹æ³•ï¼Œä¾›ä¸‹æ¸¸çš„ä¸­é—´ä»¶æˆ–è·¯ç”±è¿›è¡Œä½¿ç”¨ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906141435373.png" alt="image-20220906141435373"></p><h3 id="å®šä¹‰ä¸­é—´ä»¶å‡½æ•°">å®šä¹‰ä¸­é—´ä»¶å‡½æ•°</h3><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906141051034.png" alt="image-20220906141051034"></p><h3 id="å…¨å±€ä¸­é—´ä»¶">å…¨å±€ä¸­é—´ä»¶</h3><ul><li>å®¢æˆ·ç«¯å‘èµ·çš„ä»»ä½•è¯·æ±‚ï¼Œåˆ°è¾¾æœåŠ¡å™¨ä¹‹åï¼Œéƒ½ä¼šè§¦å‘çš„ä¸­é—´ä»¶ï¼Œå«åšå…¨å±€ç”Ÿæ•ˆçš„ä¸­é—´ä»¶ã€‚</li><li>é€šè¿‡è°ƒç”¨ <code>app.use()</code>(ä¸­é—´ä»¶å‡½æ•°)ï¼Œå³å¯å®šä¹‰ä¸€ä¸ªå…¨å±€ç”Ÿæ•ˆçš„ä¸­é—´ä»¶ã€‚</li><li>å¯ä»¥ä½¿ç”¨ <code>app.use()</code> è¿ç»­å®šä¹‰å¤šä¸ªå…¨å±€ä¸­é—´ä»¶ã€‚å®¢æˆ·ç«¯è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨ä¹‹åï¼Œä¼šæŒ‰ç…§ä¸­é—´ä»¶å®šä¹‰çš„å…ˆåé¡ºåºä¾æ¬¡è¿›è¡Œè°ƒç”¨ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ç¬¬ä¸€ä¸ªå…¨å±€ä¸­é—´ä»¶</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è°ƒç”¨äº†ç¬¬1ä¸ªå…¨å±€ä¸­é—´ä»¶&#x27;</span>)</span><br><span class="line">  <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// å®šä¹‰ç¬¬äºŒä¸ªå…¨å±€ä¸­é—´ä»¶</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è°ƒç”¨äº†ç¬¬2ä¸ªå…¨å±€ä¸­é—´ä»¶&#x27;</span>)</span><br><span class="line">  <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/user&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;User page.&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">80</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;http://127.0.0.1&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="å±€éƒ¨ä¸­é—´ä»¶">å±€éƒ¨ä¸­é—´ä»¶</h3><ul><li><strong>ä¸ä½¿ç”¨</strong> <code>app.use()</code> å®šä¹‰çš„ä¸­é—´ä»¶ï¼Œå«åšå±€éƒ¨ç”Ÿæ•ˆçš„ä¸­é—´ä»¶ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ä¸­é—´ä»¶å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">mw1</span> = (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è°ƒç”¨äº†ç¬¬ä¸€ä¸ªå±€éƒ¨ç”Ÿæ•ˆçš„ä¸­é—´ä»¶&#x27;</span>)</span><br><span class="line">  <span class="title function_">next</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">mw2</span> = (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è°ƒç”¨äº†ç¬¬äºŒä¸ªå±€éƒ¨ç”Ÿæ•ˆçš„ä¸­é—´ä»¶&#x27;</span>)</span><br><span class="line">  <span class="title function_">next</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸¤ç§å®šä¹‰å¤šä¸ªå±€éƒ¨ä¸­é—´ä»¶çš„æ–¹å¼</span></span><br><span class="line"><span class="comment">// mw1,mw2åªåœ¨â€œå½“å‰è·¯ç”±ä¸­ç”Ÿæ•ˆâ€ï¼Œè¿™ç§ç”¨æ³•å±äºâ€œå±€éƒ¨ç”Ÿæ•ˆçš„ä¸­é—´ä»¶â€</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/hello&#x27;</span>, mw2, mw1, <span class="function">(<span class="params">req, res</span>) =&gt;</span> res.<span class="title function_">send</span>(<span class="string">&#x27;hello page.&#x27;</span>))</span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/about&#x27;</span>, [mw1, mw2], <span class="function">(<span class="params">req, res</span>) =&gt;</span> res.<span class="title function_">send</span>(<span class="string">&#x27;about page.&#x27;</span>))</span><br><span class="line"><span class="comment">// mw1,mw2ä¸ä¼šå½±å“ä¸‹é¢è¿™ä¸ªè·¯ç”±</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/user&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> res.<span class="title function_">send</span>(<span class="string">&#x27;User page.&#x27;</span>))</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">80</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Express server running at http://127.0.0.1&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="ä¸­é—´ä»¶åˆ†ç±»">ä¸­é—´ä»¶åˆ†ç±»</h3><p>Express å®˜æ–¹æŠŠ<strong>å¸¸è§çš„ä¸­é—´ä»¶ç”¨æ³•</strong>ï¼Œåˆ†æˆäº† <strong>5 å¤§ç±»</strong>ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><p>â‘  <strong>åº”ç”¨çº§åˆ«</strong>çš„ä¸­é—´ä»¶</p><p>â‘¡ <strong>è·¯ç”±çº§åˆ«</strong>çš„ä¸­é—´ä»¶</p><p>â‘¢ <strong>é”™è¯¯çº§åˆ«</strong>çš„ä¸­é—´ä»¶</p><p>â‘£ <strong>Express å†…ç½®</strong>çš„ä¸­é—´ä»¶</p><p>â‘¤ <strong>ç¬¬ä¸‰æ–¹</strong>çš„ä¸­é—´ä»¶</p><p><strong>è¯¦ç»†ä¿¡æ¯ï¼š</strong></p><ol><li><p><strong>åº”ç”¨çº§åˆ«</strong>çš„ä¸­é—´ä»¶ï¼šé€šè¿‡ <code>app.use()</code> æˆ– <code>app.get()</code> æˆ– <code>app.post()</code> ï¼Œç»‘å®šåˆ° <code>app</code> å®ä¾‹ä¸Šçš„ä¸­é—´ä»¶ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906142716941.png" alt="image-20220906142716941"></p></li><li><p><strong>è·¯ç”±çº§åˆ«</strong>çš„ä¸­é—´ä»¶ï¼šç»‘å®šåˆ° <code>express.Router()</code> å®ä¾‹ä¸Šçš„ä¸­é—´ä»¶ï¼Œå«åšè·¯ç”±çº§åˆ«çš„ä¸­é—´ä»¶ã€‚ç”¨æ³•å’Œåº”ç”¨çº§åˆ«ä¸­é—´ä»¶æ²¡æœ‰åŒºåˆ«ï¼Œåº”ç”¨çº§åˆ«ä¸­é—´ä»¶æ˜¯ç»‘å®šåˆ° <code>app</code> å®ä¾‹ä¸Šï¼Œè·¯ç”±çº§åˆ«ä¸­é—´ä»¶ç»‘å®šåˆ° <code>router</code> å®ä¾‹ä¸Šã€‚</p></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>()</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">req, res, next</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>)</span><br><span class="line">  <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/&#x27;</span>, router)</span><br></pre></td></tr></table></figure><ol start="3"><li><strong>é”™è¯¯çº§åˆ«</strong>çš„ä¸­é—´ä»¶</li></ol><ul><li><strong>ä½œç”¨</strong>ï¼šç”¨æ¥æ•è·æ•´ä¸ªé¡¹ç›®ä¸­å‘ç”Ÿçš„å¼‚å¸¸é”™è¯¯ï¼Œä»è€Œé˜²æ­¢é¡¹ç›®å¼‚å¸¸å´©æºƒçš„é—®é¢˜ã€‚</li><li><strong>æ ¼å¼</strong>ï¼šé”™è¯¯çº§åˆ«ä¸­é—´ä»¶çš„å¤„ç†å‡½æ•°ä¸­ï¼Œå¿…é¡»æœ‰ <strong>4</strong> ä¸ªå½¢å‚ï¼Œå½¢å‚é¡ºåºä»å‰åˆ°ååˆ†åˆ«æ˜¯ <code>(err, req, res, next)</code> ã€‚</li><li><strong>æ³¨æ„</strong>ï¼šé”™è¯¯çº§åˆ«çš„ä¸­é—´ä»¶å¿…é¡»æ³¨å†Œåœ¨æ‰€æœ‰è·¯ç”±ä¹‹åã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;æœåŠ¡å™¨å†…éƒ¨å‘ç”Ÿäº†é”™è¯¯ï¼&#x27;</span>)</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;Home page.&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰é”™è¯¯çº§åˆ«çš„ä¸­é—´ä»¶ï¼Œæ•è·æ•´ä¸ªé¡¹ç›®çš„å¼‚å¸¸é”™è¯¯ï¼Œä»è€Œé˜²æ­¢ç¨‹åºçš„å´©æºƒ</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">err, req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å‘ç”Ÿäº†é”™è¯¯ï¼&#x27;</span> + err.<span class="property">message</span>)</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;Errorï¼š&#x27;</span> + err.<span class="property">message</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">80</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Express server running at http://127.0.0.1&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="4"><li>Express <strong>å†…ç½®ä¸­é—´ä»¶</strong></li></ol><p>è‡ª Express 4.16.0 ç‰ˆæœ¬å¼€å§‹ï¼ŒExpress å†…ç½®äº† <strong>3</strong> ä¸ªå¸¸ç”¨çš„ä¸­é—´ä»¶ï¼Œæå¤§çš„æé«˜äº† <code>Express</code> é¡¹ç›®çš„å¼€å‘æ•ˆç‡å’Œä½“éªŒï¼š</p><ul><li><code>express.static</code> å¿«é€Ÿæ‰˜ç®¡é™æ€èµ„æºçš„å†…ç½®ä¸­é—´ä»¶ï¼Œä¾‹å¦‚ï¼š HTML æ–‡ä»¶ã€å›¾ç‰‡ã€CSS æ ·å¼ç­‰ï¼ˆæ— å…¼å®¹æ€§ï¼‰</li><li><code>express.json</code> è§£æ JSON æ ¼å¼çš„è¯·æ±‚ä½“æ•°æ®ï¼ˆ<strong>æœ‰å…¼å®¹æ€§</strong>ï¼Œä»…åœ¨ 4.16.0+ ç‰ˆæœ¬ä¸­å¯ç”¨ï¼‰</li><li><code>express.urlencoded</code> è§£æ URL-encoded æ ¼å¼çš„è¯·æ±‚ä½“æ•°æ®ï¼ˆæœ‰å…¼å®¹æ€§ï¼Œä»…åœ¨ 4.16.0+ ç‰ˆæœ¬ä¸­å¯ç”¨ï¼‰</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é…ç½®è§£æapplication/jsonæ ¼å¼æ•°æ®çš„å†…ç½®ä¸­é—´ä»¶</span></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">json</span>())</span><br><span class="line"><span class="comment">// é…ç½®è§£æapplication/x-www-form-urlencodedæ ¼å¼æ•°æ®çš„å†…ç½®ä¸­é—´ä»¶</span></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">urlencoded</span>(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;))</span><br></pre></td></tr></table></figure><ol start="5"><li><strong>ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶</strong></li></ol><p>é Express å®˜æ–¹å†…ç½®çš„ï¼Œè€Œæ˜¯ç”±ç¬¬ä¸‰æ–¹å¼€å‘å‡ºæ¥çš„ä¸­é—´ä»¶ï¼Œå«åšç¬¬ä¸‰æ–¹ä¸­é—´ä»¶ã€‚</p><p>ä¾‹å¦‚ï¼šåœ¨ <code>express@4.16.0</code> ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œç»å¸¸ä½¿ç”¨ <code>body-parser</code> è¿™ä¸ªç¬¬ä¸‰æ–¹ä¸­é—´ä»¶ï¼Œæ¥è§£æè¯·æ±‚ä½“æ•°æ®ã€‚</p><p>ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š</p><p>â‘  è¿è¡Œ <code>npm install body-parser</code> å®‰è£…ä¸­é—´ä»¶</p><p>â‘¡ ä½¿ç”¨ <code>require</code> å¯¼å…¥ä¸­é—´ä»¶</p><p>â‘¢ è°ƒç”¨ <code>app.use()</code> æ³¨å†Œå¹¶ä½¿ç”¨ä¸­é—´ä»¶</p><blockquote><p><strong>æ³¨æ„ï¼š</strong></p><p><code>Express</code> å†…ç½®çš„ <code>express.urlencoded</code> ä¸­é—´ä»¶ï¼Œå°±æ˜¯åŸºäº <code>body-parser</code> è¿™ä¸ªç¬¬ä¸‰æ–¹ä¸­é—´ä»¶è¿›ä¸€æ­¥å°è£…å‡ºæ¥çš„ã€‚</p></blockquote><h3 id="è‡ªå®šä¹‰ä¸­é—´ä»¶">è‡ªå®šä¹‰ä¸­é—´ä»¶</h3><ol><li><p><strong>éœ€æ±‚æè¿°</strong>ä¸å®ç°æ­¥éª¤</p><p>æ‰‹åŠ¨æ¨¡æ‹Ÿä¸€ä¸ªç±»ä¼¼äº <code>express.urlencoded</code> è¿™æ ·çš„ä¸­é—´ä»¶ï¼Œæ¥è§£æ <code>POST</code> æäº¤åˆ°æœåŠ¡å™¨çš„è¡¨å•æ•°æ®ã€‚</p><p><strong>å®ç°æ­¥éª¤ï¼š</strong></p><p>â‘  å®šä¹‰ä¸­é—´ä»¶</p><p>â‘¡ ç›‘å¬ <code>req</code> çš„ <code>data</code> äº‹ä»¶</p><p>â‘¢ ç›‘å¬ <code>req</code> çš„ <code>end</code> äº‹ä»¶</p><p>â‘£ ä½¿ç”¨ <code>querystring</code> æ¨¡å—è§£æè¯·æ±‚ä½“æ•°æ®</p><p>â‘¤ å°†è§£æå‡ºæ¥çš„æ•°æ®å¯¹è±¡æŒ‚è½½ä¸º <code>req.body</code></p><p>â‘¥ å°†è‡ªå®šä¹‰ä¸­é—´ä»¶å°è£…ä¸ºæ¨¡å—</p></li><li><p><strong>å®šä¹‰</strong>ä¸­é—´ä»¶</p><p>ä½¿ç”¨ <code>app.use()</code> æ¥å®šä¹‰å…¨å±€ç”Ÿæ•ˆçš„ä¸­é—´ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p></li></ol><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906150421909.png" alt="image-20220906150421909"></p><ol start="3"><li><p>ç›‘å¬ <strong>req</strong> çš„ <strong>data</strong> äº‹ä»¶</p><p>åœ¨ä¸­é—´ä»¶ä¸­ï¼Œéœ€è¦ç›‘å¬ req å¯¹è±¡çš„ data äº‹ä»¶ï¼Œæ¥è·å–å®¢æˆ·ç«¯å‘é€åˆ°æœåŠ¡å™¨çš„æ•°æ®ã€‚</p><p>å¦‚æœæ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œæ— æ³•ä¸€æ¬¡æ€§å‘é€å®Œæ¯•ï¼Œåˆ™å®¢æˆ·ç«¯ä¼š<strong>æŠŠæ•°æ®åˆ‡å‰²åï¼Œåˆ†æ‰¹å‘é€åˆ°æœåŠ¡å™¨</strong>ã€‚æ‰€ä»¥ data äº‹ä»¶å¯èƒ½ä¼šè§¦å‘å¤šæ¬¡ï¼Œæ¯ä¸€æ¬¡è§¦å‘ data äº‹ä»¶æ—¶ï¼Œ<strong>è·å–åˆ°æ•°æ®åªæ˜¯å®Œæ•´æ•°æ®çš„ä¸€éƒ¨åˆ†</strong>ï¼Œéœ€è¦æ‰‹åŠ¨å¯¹æ¥æ”¶åˆ°çš„æ•°æ®è¿›è¡Œæ‹¼æ¥ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906150519601.png" alt="image-20220906150519601"></p></li><li><p>ç›‘å¬<strong>req</strong>çš„<strong>end</strong>äº‹ä»¶</p><p>å½“è¯·æ±‚ä½“æ•°æ®<strong>æ¥æ”¶å®Œæ¯•</strong>ä¹‹åï¼Œä¼šè‡ªåŠ¨è§¦å‘ req çš„ end äº‹ä»¶ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ req çš„ end äº‹ä»¶ä¸­ï¼Œ<strong>æ‹¿åˆ°å¹¶å¤„ç†å®Œæ•´çš„è¯·æ±‚ä½“æ•°æ®</strong>ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906150650805.png" alt="image-20220906150650805"></p></li><li><p>ä½¿ç”¨<strong>querystring</strong>æ¨¡å—è§£æè¯·æ±‚ä½“æ•°æ®</p><p>Node.js å†…ç½®äº†ä¸€ä¸ª <strong>querystring</strong> æ¨¡å—ï¼Œ<strong>ä¸“é—¨ç”¨æ¥å¤„ç†æŸ¥è¯¢å­—ç¬¦ä¸²</strong>ã€‚é€šè¿‡è¿™ä¸ªæ¨¡å—æä¾›çš„ <strong>parse()</strong> å‡½æ•°ï¼Œå¯ä»¥è½»æ¾æŠŠæŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œè§£ææˆå¯¹è±¡çš„æ ¼å¼ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906150744982.png" alt="image-20220906150744982"></p></li><li><p>å°†è§£æå‡ºæ¥çš„æ•°æ®å¯¹è±¡æŒ‚è½½ä¸º <strong>req.body</strong></p><p>ä¸Šæ¸¸çš„ä¸­é—´ä»¶å’Œä¸‹æ¸¸çš„ä¸­é—´ä»¶åŠè·¯ç”±ä¹‹é—´ï¼Œ<strong>å…±äº«åŒä¸€ä»½</strong> <strong>req</strong> <strong>å’Œ</strong> <strong>res</strong>ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†è§£æå‡ºæ¥çš„æ•°æ®ï¼ŒæŒ‚è½½ä¸º req çš„è‡ªå®šä¹‰å±æ€§ï¼Œå‘½åä¸º req.bodyï¼Œä¾›ä¸‹æ¸¸ä½¿ç”¨ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906151130422.png" alt="image-20220906151130422"></p></li><li><p>å°†è‡ªå®šä¹‰ä¸­é—´ä»¶å°è£…ä¸ºæ¨¡å—</p><p>ä¸ºäº†ä¼˜åŒ–ä»£ç çš„ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè‡ªå®šä¹‰çš„ä¸­é—´ä»¶å‡½æ•°ï¼Œå°è£…ä¸ºç‹¬ç«‹çš„æ¨¡å—ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906151206420.png" alt="image-20220906151206420"></p></li></ol><h3 id="ä½¿ç”¨Expresså†™æ¥å£">ä½¿ç”¨Expresså†™æ¥å£</h3><ol><li><p>åˆ›å»ºåŸºæœ¬çš„æœåŠ¡å™¨</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906153054509.png" alt="image-20220906153054509"></p></li><li><p>åˆ›å»ºAPIè·¯ç”±æ¨¡å—</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906153128520.png" alt="image-20220906153128520"></p></li><li><p>ç¼–å†™GETæ¥å£</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906153215106.png" alt="image-20220906153215106"></p></li><li><p>ç¼–å†™POSTæ¥å£</p><blockquote><p>**æ³¨æ„ï¼š**å¦‚æœè¦è·å– URL-encoded æ ¼å¼çš„è¯·æ±‚ä½“æ•°æ®ï¼Œå¿…é¡»é…ç½®ä¸­é—´ä»¶</p><p><strong>app.use(express.urlencoded({ extended: false }))</strong></p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906153244806.png" alt="image-20220906153244806"></p></li></ol><h2 id="CORS-è·¨åŸŸèµ„æºå…±äº«">CORS è·¨åŸŸèµ„æºå…±äº«</h2><h3 id="æ¥å£çš„è·¨åŸŸé—®é¢˜">æ¥å£çš„è·¨åŸŸé—®é¢˜</h3><p>è§£å†³æ¥å£è·¨åŸŸé—®é¢˜çš„æ–¹æ¡ˆä¸»è¦æœ‰ä¸¤ç§ï¼š</p><p>â‘  <code>CORS</code>ï¼ˆä¸»æµçš„è§£å†³æ–¹æ¡ˆï¼Œæ¨èä½¿ç”¨ï¼‰</p><p>â‘¡ <code>JSONP</code>ï¼ˆæœ‰ç¼ºé™·çš„è§£å†³æ–¹æ¡ˆï¼šåªæ”¯æŒ GET è¯·æ±‚ï¼‰</p><h3 id="cors-ä¸­é—´ä»¶è§£å†³è·¨åŸŸ">cors ä¸­é—´ä»¶è§£å†³è·¨åŸŸ</h3><ul><li>å®‰è£…ä¸­é—´ä»¶ï¼š<code>npm install cors</code></li><li>å¯¼å…¥ä¸­é—´ä»¶ï¼š<code>const cors = require('cors')</code></li><li>é…ç½®ä¸­é—´ä»¶ï¼š<code>app.use(cors())</code></li></ul><h3 id="CORS">CORS</h3><ul><li><p>CORSï¼ˆCross-Origin Resource Sharingï¼Œè·¨åŸŸèµ„æºå…±äº«ï¼‰ç”±ä¸€ç³»åˆ— HTTP å“åº”å¤´ç»„æˆï¼Œ<strong>è¿™äº›</strong> <strong>HTTP</strong> <strong>å“åº”å¤´å†³å®šæµè§ˆå™¨æ˜¯å¦é˜»æ­¢å‰ç«¯</strong> <strong>JS</strong> <strong>ä»£ç è·¨åŸŸè·å–èµ„æº</strong>ã€‚</p></li><li><p>æµè§ˆå™¨çš„<strong>åŒæºå®‰å…¨ç­–ç•¥</strong>é»˜è®¤ä¼šé˜»æ­¢ç½‘é¡µâ€œè·¨åŸŸâ€è·å–èµ„æºã€‚ä½†å¦‚æœæ¥å£æœåŠ¡å™¨é…ç½®äº† <strong>CORS ç›¸å…³çš„ HTTP å“åº”å¤´</strong>ï¼Œå°±å¯<strong>è§£é™¤æµè§ˆå™¨ç«¯çš„è·¨åŸŸè®¿é—®é™åˆ¶</strong>ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906154410181.png" alt="image-20220906154410181"><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906154426471.png" alt="image-20220906154426471"></p><p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p></li><li><p>CORS ä¸»è¦åœ¨<strong>æœåŠ¡å™¨ç«¯</strong>è¿›è¡Œé…ç½®ã€‚å®¢æˆ·ç«¯æµè§ˆå™¨<strong>æ— é¡»åšä»»ä½•é¢å¤–çš„é…ç½®</strong>ï¼Œå³å¯è¯·æ±‚å¼€å¯äº† CORS çš„æ¥å£ã€‚</p></li><li><p>CORS åœ¨æµè§ˆå™¨ä¸­<strong>æœ‰å…¼å®¹æ€§</strong>ã€‚åªæœ‰æ”¯æŒ XMLHttpRequest Level2 çš„æµè§ˆå™¨ï¼Œæ‰èƒ½æ­£å¸¸è®¿é—®å¼€å¯äº† CORS çš„æœåŠ¡ç«¯æ¥å£ï¼ˆä¾‹å¦‚ï¼šIE10+ã€Chrome4+ã€FireFox3.5+ï¼‰ã€‚</p></li></ul><h3 id="CORS-å¸¸è§å“åº”å¤´">CORS å¸¸è§å“åº”å¤´</h3><ol><li><p><code>Access-Control-Allow-Origin</code>ï¼šåˆ¶å®šäº†å…è®¸è®¿é—®èµ„æºçš„å¤–åŸŸ URLã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åªå…è®¸æ¥è‡ª http://itcast.cn çš„è¯·æ±‚</span></span><br><span class="line">res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="string">&#x27;http://bruceblog.io&#x27;</span>) </span><br><span class="line"><span class="comment">// å…è®¸æ¥è‡ªä»»ä½•åŸŸçš„è¯·æ±‚</span></span><br><span class="line">res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>)</span><br></pre></td></tr></table></figure></li><li><p><code>Access-Control-Allow-Headers</code></p></li></ol><ul><li><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒCORS ä»…æ”¯æŒå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€å¦‚ä¸‹çš„ 9 ä¸ªè¯·æ±‚å¤´ï¼š<code>Acceptã€Accept-Languageã€Content-Languageã€DPRã€Downlinkã€Save-Dataã€Viewport-Widthã€Width ã€Content-Type ï¼ˆå€¼ä»…é™äº text/plainã€multipart/form-dataã€application/x-www-form-urlencoded ä¸‰è€…ä¹‹ä¸€ï¼‰</code></p></li><li><p>å¦‚æœå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€äº†é¢å¤–çš„è¯·æ±‚å¤´ä¿¡æ¯ï¼Œåˆ™éœ€è¦åœ¨æœåŠ¡å™¨ç«¯ï¼Œé€šè¿‡ <code>Access-Control-Allow-Headers</code> å¯¹é¢å¤–çš„è¯·æ±‚å¤´è¿›è¡Œå£°æ˜ï¼Œå¦åˆ™è¿™æ¬¡è¯·æ±‚ä¼šå¤±è´¥ï¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span>, <span class="string">&#x27;Content-Type, X-Custom-Header&#x27;</span>)</span><br></pre></td></tr></table></figure></li></ul><ol start="3"><li><code>Access-Control-Allow-Methods</code></li></ol><ul><li><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>CORS</code> ä»…æ”¯æŒå®¢æˆ·ç«¯å‘èµ· <code>GETã€POSTã€HEAD</code> è¯·æ±‚ã€‚å¦‚æœå®¢æˆ·ç«¯å¸Œæœ›é€šè¿‡ <code>PUTã€DELETE</code> ç­‰æ–¹å¼è¯·æ±‚æœåŠ¡å™¨çš„èµ„æºï¼Œåˆ™éœ€è¦åœ¨æœåŠ¡å™¨ç«¯ï¼Œé€šè¿‡ <code>Access-Control-Alow-Methods</code> æ¥<strong>æŒ‡æ˜å®é™…è¯·æ±‚æ‰€å…è®¸ä½¿ç”¨çš„ HTTP æ–¹æ³•</strong>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span>, <span class="string">&#x27;POST, GET, DELETE, HEAD&#x27;</span>)</span><br><span class="line">res.<span class="title function_">setHEader</span>(<span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span>, <span class="string">&#x27;*&#x27;</span>)</span><br></pre></td></tr></table></figure></li></ul><h3 id="CORS-è¯·æ±‚åˆ†ç±»">CORS è¯·æ±‚åˆ†ç±»</h3><h4 id="ç®€å•è¯·æ±‚">ç®€å•è¯·æ±‚</h4><ul><li><strong>è¯·æ±‚æ–¹å¼</strong>ï¼šGETã€POSTã€HEAD ä¸‰è€…ä¹‹ä¸€</li><li><strong>HTTP å¤´éƒ¨ä¿¡æ¯</strong>ä¸è¶…è¿‡ä»¥ä¸‹å‡ ç§å­—æ®µï¼š<strong>æ— è‡ªå®šä¹‰å¤´éƒ¨å­—æ®µ</strong>ã€Acceptã€Accept-Languageã€Content-Languageã€DPRã€Downlinkã€Save-Dataã€Viewport-Widthã€Width ã€Content-Typeï¼ˆåªæœ‰ä¸‰ä¸ªå€¼ application/x-www-formurlencodedã€multipart/form-dataã€text/plainï¼‰</li></ul><h4 id="é¢„æ£€è¯·æ±‚">é¢„æ£€è¯·æ±‚</h4><ul><li>è¯·æ±‚æ–¹å¼ä¸º <strong>GETã€POSTã€HEAD ä¹‹å¤–çš„è¯·æ±‚ Method ç±»å‹</strong></li><li>è¯·æ±‚å¤´ä¸­<strong>åŒ…å«è‡ªå®šä¹‰å¤´éƒ¨å­—æ®µ</strong></li><li>å‘æœåŠ¡å™¨å‘é€äº† <strong>application/json æ ¼å¼çš„æ•°æ®</strong></li></ul><p>åœ¨æµè§ˆå™¨ä¸æœåŠ¡å™¨æ­£å¼é€šä¿¡ä¹‹å‰ï¼Œæµè§ˆå™¨ä¼š<strong>å…ˆå‘é€ OPTION è¯·æ±‚è¿›è¡Œé¢„æ£€ï¼Œä»¥è·çŸ¥æœåŠ¡å™¨æ˜¯å¦å…è®¸è¯¥å®é™…è¯·æ±‚</strong>ï¼Œæ‰€ä»¥è¿™ä¸€æ¬¡çš„ OPTION è¯·æ±‚ç§°ä¸ºâ€œé¢„æ£€è¯·æ±‚â€ã€‚<strong>æœåŠ¡å™¨æˆåŠŸå“åº”é¢„æ£€è¯·æ±‚åï¼Œæ‰ä¼šå‘é€çœŸæ­£çš„è¯·æ±‚ï¼Œå¹¶ä¸”æºå¸¦çœŸå®æ•°æ®</strong>ã€‚</p><h4 id="ç®€å•è¯·æ±‚å’Œé¢„æ£€è¯·æ±‚çš„åŒºåˆ«">ç®€å•è¯·æ±‚å’Œé¢„æ£€è¯·æ±‚çš„åŒºåˆ«</h4><p><strong>ç®€å•è¯·æ±‚çš„ç‰¹ç‚¹</strong>ï¼šå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´åªä¼šå‘ç”Ÿä¸€æ¬¡è¯·æ±‚ã€‚</p><p><strong>é¢„æ£€è¯·æ±‚çš„ç‰¹ç‚¹</strong>ï¼šå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´ä¼šå‘ç”Ÿä¸¤æ¬¡è¯·æ±‚ï¼ŒOPTION é¢„æ£€è¯·æ±‚æˆåŠŸä¹‹åï¼Œæ‰ä¼šå‘èµ·çœŸæ­£çš„è¯·æ±‚ã€‚</p><h3 id="JSONPæ¥å£">JSONPæ¥å£</h3><p><strong>æ¦‚å¿µ</strong>ï¼šæµè§ˆå™¨ç«¯é€šè¿‡ <code>&lt;script&gt;</code> æ ‡ç­¾çš„ <code>src</code> å±æ€§ï¼Œè¯·æ±‚æœåŠ¡å™¨ä¸Šçš„æ•°æ®ï¼ŒåŒæ—¶ï¼ŒæœåŠ¡å™¨è¿”å›ä¸€ä¸ªå‡½æ•°çš„è°ƒç”¨ã€‚è¿™ç§è¯·æ±‚æ•°æ®çš„æ–¹å¼å«åš <strong>JSONP</strong>ã€‚</p><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><p>â‘  <code>JSONP</code> ä¸å±äºçœŸæ­£çš„ Ajax è¯·æ±‚ï¼Œå› ä¸ºå®ƒæ²¡æœ‰ä½¿ç”¨ <code>XMLHttpRequest</code> è¿™ä¸ªå¯¹è±¡ã€‚</p><p>â‘¡ <code>JSONP</code> ä»…æ”¯æŒ GET è¯·æ±‚ï¼Œä¸æ”¯æŒ POSTã€PUTã€DELETE ç­‰è¯·æ±‚ã€‚</p><h4 id="åˆ›å»ºJSONPæ¥å£çš„æ³¨æ„äº‹é¡¹">åˆ›å»ºJSONPæ¥å£çš„æ³¨æ„äº‹é¡¹</h4><p>å¦‚æœé¡¹ç›®ä¸­<code>å·²ç»é…ç½®äº† CORS</code> è·¨åŸŸèµ„æºå…±äº«ï¼Œä¸ºäº†<strong>é˜²æ­¢å†²çª</strong>ï¼Œ<code>å¿…é¡»åœ¨é…ç½® CORS ä¸­é—´ä»¶ä¹‹å‰å£°æ˜ JSONP çš„æ¥å£</code>ã€‚å¦åˆ™ JSONP æ¥å£ä¼šè¢«å¤„ç†æˆå¼€å¯äº† CORS çš„æ¥å£ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906160915000.png" alt="image-20220906160915000"></p><h4 id="å®ç°JSONPæ¥å£">å®ç°JSONPæ¥å£</h4><p><strong>æ­¥éª¤</strong>ï¼š</p><p>â‘  <strong>è·å–</strong>å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„<strong>å›è°ƒå‡½æ•°çš„åå­—</strong></p><p>â‘¡ <strong>å¾—åˆ°</strong>è¦é€šè¿‡ JSONP å½¢å¼<strong>å‘é€ç»™å®¢æˆ·ç«¯çš„æ•°æ®</strong></p><p>â‘¢ æ ¹æ®å‰ä¸¤æ­¥å¾—åˆ°çš„æ•°æ®ï¼Œ<strong>æ‹¼æ¥å‡ºä¸€ä¸ªå‡½æ•°è°ƒç”¨çš„å­—ç¬¦ä¸²</strong></p><p>â‘£ æŠŠä¸Šä¸€æ­¥æ‹¼æ¥å¾—åˆ°çš„å­—ç¬¦ä¸²ï¼Œå“åº”ç»™å®¢æˆ·ç«¯çš„ <code>&lt;script&gt;</code> æ ‡ç­¾è¿›è¡Œè§£ææ‰§è¡Œ</p><p><strong>å…·ä½“ä»£ç </strong>ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906162211835.png" alt="image-20220906162211835"></p><h5 id="åœ¨ç½‘é¡µä¸­ä½¿ç”¨jQuaryå‘èµ·JSONPè¯·æ±‚"><strong>åœ¨ç½‘é¡µä¸­ä½¿ç”¨jQuaryå‘èµ·JSONPè¯·æ±‚</strong></h5><p>è°ƒç”¨ <code>$.ajax()</code> å‡½æ•°ï¼Œæä¾› <code>JSONP çš„é…ç½®é€‰é¡¹</code>ï¼Œä»è€Œå‘èµ· <code>JSONP è¯·æ±‚</code>ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220906162322481.png" alt="image-20220906162322481"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;Express&lt;/h1&gt;
&lt;p&gt;&lt;a href=&quot;https://www.expressjs.com.cn/&quot;&gt;å®˜ç½‘ä¼ é€é—¨&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åŸºäº Node.js å¹³å°ï¼Œå¿«é€Ÿã€å¼€æ”¾ã€æç®€çš„ Web å¼€å‘æ¡†æ¶&lt;/p&gt;
&lt;/blockquote&gt;</summary>
      
    
    
    
    <category term="åç«¯ğŸŸ" scheme="https://blog.cilicili.xyz/categories/%E5%90%8E%E7%AB%AF%F0%9F%8D%9F/"/>
    
    
    <category term="Node" scheme="https://blog.cilicili.xyz/tags/Node/"/>
    
    <category term="Express" scheme="https://blog.cilicili.xyz/tags/Express/"/>
    
  </entry>
  
  <entry>
    <title>ã€åç«¯ã€‘Node.jså¿«é€Ÿå…¥é—¨</title>
    <link href="https://blog.cilicili.xyz/posts/f9892742.html"/>
    <id>https://blog.cilicili.xyz/posts/f9892742.html</id>
    <published>2022-09-05T02:09:44.000Z</published>
    <updated>2022-09-09T09:35:03.733Z</updated>
    
    <content type="html"><![CDATA[<h1>Nodejs åŸºç¡€</h1><p><a href="https://nodejs.org/en/">å®˜ç½‘ä¼ é€é—¨</a></p><h2 id="åˆè¯†-Nodejs">åˆè¯† Nodejs</h2><blockquote><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“ çš„ JavaScript è¿è¡Œæ—¶ç¯å¢ƒ</p></blockquote><ul><li>åŸºäº <a href="http://www.expressjs.com.cn/">Express æ¡†æ¶ </a>ï¼Œå¯ä»¥å¿«é€Ÿæ„å»º Web åº”ç”¨</li><li>åŸºäº <a href="https://electronjs.org/">Electron æ¡†æ¶</a>ï¼Œå¯ä»¥æ„å»ºè·¨å¹³å°çš„æ¡Œé¢åº”ç”¨</li><li>åŸºäº <a href="http://restify.com/">restify æ¡†æ¶</a>ï¼Œå¯ä»¥å¿«é€Ÿæ„å»º API æ¥å£é¡¹ç›®</li><li>è¯»å†™å’Œæ“ä½œæ•°æ®åº“ã€åˆ›å»ºå®ç”¨çš„å‘½ä»¤è¡Œå·¥å…·è¾…åŠ©å‰ç«¯å¼€å‘ã€etcâ€¦</li></ul><h2 id="Buffer-ç¼“å†²åŒº">Buffer ç¼“å†²åŒº</h2><blockquote><p><a href="http://nodejs.cn/api/buffer.html">Buffer ç¼“å†²åŒºæ–‡æ¡£</a></p></blockquote><ul><li>Buffer çš„ç»“æ„ä¸æ•°ç»„ç±»ä¼¼ï¼Œæ“ä½œæ–¹æ³•ä¹Ÿä¸æ•°ç»„ç±»ä¼¼</li><li>æ•°ç»„ä¸èƒ½å­˜å‚¨äºŒè¿›åˆ¶æ–‡ä»¶ï¼ŒBuffer æ˜¯ä¸“é—¨å­˜å‚¨äºŒè¿›åˆ¶æ•°æ®çš„</li><li>Buffer å­˜å‚¨çš„æ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œæ˜¾ç¤ºæ—¶ä»¥ 16 è¿›åˆ¶çš„å½¢å¼æ˜¾ç¤º</li><li>Buffer æ¯ä¸€ä¸ªå…ƒç´ èŒƒå›´æ˜¯ 00~ffï¼Œå³ 0<sub>255ã€00000000</sub>11111111</li><li>æ¯ä¸€ä¸ªå…ƒç´ å ç”¨ä¸€ä¸ªå­—èŠ‚å†…å­˜</li><li>Buffer æ˜¯å¯¹åº•å±‚å†…å­˜çš„ç›´æ¥æ“ä½œï¼Œå› æ­¤å¤§å°ä¸€æ—¦ç¡®å®šå°±ä¸èƒ½ä¿®æ”¹</li></ul><p>Buffer å¸¸ç”¨æ–¹æ³•ï¼š</p><ul><li><code>Buffer.from(str[, encoding])</code>ï¼šå°†ä¸€ä¸ªå­—ç¬¦ä¸²è½¬æ¢ä¸º Buffer</li><li><code>Buffer.alloc(size)</code>ï¼šåˆ›å»ºæŒ‡å®šå¤§å°çš„ Buffer</li><li><code>Buffer.alloUnsafe(size)</code>ï¼šåˆ›å»ºæŒ‡å®šå¤§å°çš„ Bufferï¼Œå¯èƒ½åŒ…å«æ•æ„Ÿæ•°æ®ï¼ˆåˆ†é…å†…å­˜æ—¶ä¸ä¼šæ¸…é™¤å†…å­˜æ®‹ç•™çš„æ•°æ®ï¼‰</li><li><code>buf.toString()</code>ï¼šå°† Buffer æ•°æ®è½¬ä¸ºå­—ç¬¦ä¸²</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;Helloå‰ç«¯&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> buf = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(str)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å ç”¨å†…å­˜çš„å¤§å°ï¼Œä¸€ä¸ªæ±‰å­—3å­—èŠ‚ 13</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf.<span class="property">length</span>)</span><br><span class="line"><span class="comment">// å­—ç¬¦ä¸²çš„é•¿åº¦ 7</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="property">length</span>)</span><br><span class="line"><span class="comment">// 8è¿›åˆ¶è¾“å‡ºç¬¬ä¸€ä¸ªå…ƒç´  145</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf[<span class="number">1</span>].<span class="title function_">toString</span>(<span class="number">8</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ª10ä¸ªå­—èŠ‚çš„buffer</span></span><br><span class="line"><span class="keyword">var</span> buf2 = <span class="title class_">Buffer</span>.<span class="title function_">alloc</span>(<span class="number">10</span>)</span><br><span class="line"><span class="comment">//é€šè¿‡ç´¢å¼•ï¼Œæ¥æ“ä½œbufä¸­çš„å…ƒç´ </span></span><br><span class="line">buf2[<span class="number">0</span>] = <span class="number">88</span></span><br><span class="line">buf2[<span class="number">1</span>] = <span class="number">255</span></span><br><span class="line">buf2[<span class="number">2</span>] = <span class="number">0xaa</span></span><br><span class="line">buf2[<span class="number">3</span>] = <span class="number">255</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> buf3 = <span class="title class_">Buffer</span>.<span class="title function_">allocUnsafe</span>(<span class="number">10</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf3)</span><br></pre></td></tr></table></figure><h2 id="fs-æ–‡ä»¶ç³»ç»Ÿæ¨¡å—">fs æ–‡ä»¶ç³»ç»Ÿæ¨¡å—</h2><ul><li>fs æ¨¡å—ä¸­æ‰€æœ‰çš„æ“ä½œéƒ½æœ‰ä¸¤ç§å½¢å¼å¯ä¾›é€‰æ‹©:åŒæ­¥å’Œå¼‚æ­¥</li><li>åŒæ­¥æ–‡ä»¶ç³»ç»Ÿä¼šé˜»å¡ç¨‹åºçš„æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯é™¤éæ“ä½œå®Œæ¯•ï¼Œå¦åˆ™ä¸ä¼šå‘ä¸‹æ‰§è¡Œä»£ç </li><li>å¼‚æ­¥æ–‡ä»¶ç³»ç»Ÿä¸ä¼šé˜»å¡ç¨‹åºçš„æ‰§è¡Œï¼Œè€Œæ˜¯åœ¨æ“ä½œå®Œæˆæ—¶ï¼Œé€šè¿‡å›è°ƒå‡½æ•°å°†ç»“æœè¿”å›</li><li>å®é™…å¼€å‘å¾ˆå°‘ç”¨åŒæ­¥æ–¹å¼ï¼Œå› æ­¤åªä»‹ç»å¼‚æ­¥æ–¹å¼</li></ul><p>æ‰“å¼€æ¨¡å¼ï¼š</p><table><thead><tr><th>æ¨¡å¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>r</td><td>è¯»å–æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸å­˜åœ¨æŠ›å¼‚å¸¸</td></tr><tr><td>r+</td><td>è¯»å†™æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸å­˜åœ¨æŠ›å¼‚å¸¸</td></tr><tr><td>rs</td><td>åŒæ­¥æ¨¡å¼ä¸‹æ‰“å¼€æ–‡ä»¶ç”¨äºè¯»å–</td></tr><tr><td>rs+</td><td>åŒæ­¥æ¨¡å¼ä¸‹æ‰“å¼€æ–‡ä»¶ç”¨äºè¯»å†™</td></tr><tr><td>w</td><td>å†™æ–‡ä»¶ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºï¼Œå­˜åœ¨åˆ™è¦†ç›–åŸæœ‰å†…å®¹</td></tr><tr><td>wx</td><td>å†™æ–‡ä»¶ï¼Œæ–‡ä»¶å­˜åœ¨æ‰“å¼€å¤±è´¥</td></tr><tr><td>w+</td><td>è¯»å†™æ–‡ä»¶ï¼Œä¸å­˜åœ¨åˆ›å»ºï¼Œå­˜åœ¨æˆªæ–­</td></tr><tr><td>wx+</td><td>è¯»å†™ï¼Œå­˜åœ¨æ‰“å¼€å¤±è´¥</td></tr><tr><td>a</td><td>è¿½åŠ ï¼Œä¸å­˜åœ¨åˆ›å»º</td></tr><tr><td>ax</td><td>è¿½åŠ ï¼Œå­˜åœ¨å¤±è´¥</td></tr><tr><td>a+</td><td>è¿½åŠ å’Œè¯»å–ï¼Œä¸å­˜åœ¨åˆ›å»º</td></tr><tr><td>ax+</td><td>è¿½åŠ å’Œè¯»å–ï¼Œå­˜åœ¨å¤±è´¥</td></tr></tbody></table><h3 id="è¯»å–æ–‡ä»¶">è¯»å–æ–‡ä»¶</h3><h4 id="ç®€å•æ–‡ä»¶è¯»å–">ç®€å•æ–‡ä»¶è¯»å–</h4><p>è¯­æ³•æ ¼å¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fs.<span class="title function_">readFile</span>(path[, options], callback)</span><br></pre></td></tr></table></figure><ul><li><p><code>path</code>ï¼šæ–‡ä»¶è·¯å¾„</p></li><li><p><code>options</code>ï¼šé…ç½®é€‰é¡¹ï¼Œè‹¥æ˜¯å­—ç¬¦ä¸²åˆ™æŒ‡å®šç¼–ç æ ¼å¼</p><ul><li><code>encoding</code>ï¼šç¼–ç æ ¼å¼</li><li><code>flag</code>ï¼šæ‰“å¼€æ–¹å¼</li></ul></li><li><p><code>callback</code>ï¼šå›è°ƒå‡½æ•°</p><ul><li><code>err</code>ï¼šé”™è¯¯ä¿¡æ¯</li><li><code>data</code>ï¼šè¯»å–çš„æ•°æ®ï¼Œå¦‚æœæœªæŒ‡å®šç¼–ç æ ¼å¼åˆ™è¿”å›ä¸€ä¸ª Buffer</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./files/1.txt&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, data</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span>(err) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;failed!&#x27;</span> + err.<span class="property">message</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;content:&#x27;</span> + data)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤åˆ¶æ–‡ä»¶å†…å®¹</span></span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&quot;C:/Users/ç¬”è®°.mp3&quot;</span>, <span class="keyword">function</span>(<span class="params">err, data</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(!err) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line"><span class="comment">// å°†dataå†™å…¥åˆ°æ–‡ä»¶ä¸­</span></span><br><span class="line">fs.<span class="title function_">writeFile</span>(<span class="string">&quot;C:/Users/hello.jpg&quot;</span>, data, <span class="keyword">function</span>(<span class="params">err</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(!err)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ–‡ä»¶å†™å…¥æˆåŠŸ&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125; );</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="æµå¼æ–‡ä»¶è¯»å–">æµå¼æ–‡ä»¶è¯»å–</h4><ul><li>ç®€å•æ–‡ä»¶è¯»å–çš„æ–¹å¼ä¼šä¸€æ¬¡æ€§è¯»å–æ–‡ä»¶å†…å®¹åˆ°å†…å­˜ä¸­ï¼Œè‹¥æ–‡ä»¶è¾ƒå¤§ï¼Œä¼šå ç”¨è¿‡å¤šå†…å­˜å½±å“ç³»ç»Ÿæ€§èƒ½ï¼Œä¸”è¯»å–é€Ÿåº¦æ…¢</li><li>å¤§æ–‡ä»¶é€‚åˆç”¨æµå¼æ–‡ä»¶è¯»å–ï¼Œå®ƒä¼šåˆ†å¤šæ¬¡å°†æ–‡ä»¶è¯»å–åˆ°å†…å­˜ä¸­</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªå¯è¯»æµ</span></span><br><span class="line"><span class="keyword">var</span> rs = fs.<span class="title function_">createReadStream</span>(<span class="string">&#x27;C:/Users/ç¬”è®°.mp3&#x27;</span>)</span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªå¯å†™æµ</span></span><br><span class="line"><span class="keyword">var</span> ws = fs.<span class="title function_">createWriteStream</span>(<span class="string">&#x27;a.mp3&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬æµçš„å¼€å¯å’Œå…³é—­</span></span><br><span class="line"><span class="comment">// è¿™å‡ ä¸ªç›‘å¬ä¸æ˜¯å¿…é¡»çš„</span></span><br><span class="line">rs.<span class="title function_">once</span>(<span class="string">&#x27;open&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å¯è¯»æµæ‰“å¼€äº†~~&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">rs.<span class="title function_">once</span>(<span class="string">&#x27;close&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å¯è¯»æµå…³é—­äº†~~&#x27;</span>)</span><br><span class="line">  <span class="comment">//æ•°æ®è¯»å–å®Œæ¯•ï¼Œå…³é—­å¯å†™æµ</span></span><br><span class="line">  ws.<span class="title function_">end</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">ws.<span class="title function_">once</span>(<span class="string">&#x27;open&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å¯å†™æµæ‰“å¼€äº†~~&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">ws.<span class="title function_">once</span>(<span class="string">&#x27;close&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å¯å†™æµå…³é—­äº†~~&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¦è¯»å–ä¸€ä¸ªå¯è¯»æµä¸­çš„æ•°æ®ï¼Œè¦ä¸ºå¯è¯»æµç»‘å®šä¸€ä¸ªdataäº‹ä»¶ï¼Œdataäº‹ä»¶ç»‘å®šå®Œæ¯•è‡ªåŠ¨å¼€å§‹è¯»å–æ•°æ®</span></span><br><span class="line">rs.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br><span class="line">  <span class="comment">//å°†è¯»å–åˆ°çš„æ•°æ®å†™å…¥åˆ°å¯å†™æµä¸­</span></span><br><span class="line">  ws.<span class="title function_">write</span>(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ç®€ä¾¿æ–¹å¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> rs = fs.<span class="title function_">createReadStream</span>(<span class="string">&#x27;C:/Users/lilichao/Desktop/ç¬”è®°.mp3&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> ws = fs.<span class="title function_">createWriteStream</span>(<span class="string">&#x27;b.mp3&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// pipe()å¯ä»¥å°†å¯è¯»æµä¸­çš„å†…å®¹ï¼Œç›´æ¥è¾“å‡ºåˆ°å¯å†™æµä¸­</span></span><br><span class="line">rs.<span class="title function_">pipe</span>(ws)</span><br></pre></td></tr></table></figure><h3 id="å†™å…¥æ–‡ä»¶">å†™å…¥æ–‡ä»¶</h3><blockquote><p><strong>ä¸¤ä¸ªæ³¨æ„ç‚¹ï¼š</strong></p><p>â‘  fs.writeFile()æ–¹æ³•åªèƒ½ç”¨æ¥åˆ›å»ºæ–‡ä»¶ï¼Œä¸èƒ½ç”¨æ¥åˆ›å»ºè·¯å¾„ã€‚</p><p>â‘¡ é‡å¤è°ƒç”¨fs.writeFile()å†™å…¥åŒä¸€ä¸ªæ–‡ä»¶ï¼Œæ–°å†™å…¥çš„å†…å®¹ä¼šè¦†ç›–ä¹‹å‰çš„æ—§å†…å®¹ã€‚</p></blockquote><h4 id="ç®€å•æ–‡ä»¶å†™å…¥">ç®€å•æ–‡ä»¶å†™å…¥</h4><p>è¯­æ³•æ ¼å¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fs.<span class="title function_">writeFile</span>(file, data[, options], callback)</span><br></pre></td></tr></table></figure><ul><li><code>file</code>ï¼šæ–‡ä»¶è·¯å¾„</li><li><code>data</code>ï¼šå†™å…¥å†…å®¹</li><li><code>options</code>ï¼šé…ç½®é€‰é¡¹ï¼ŒåŒ…å« <code>encoding, mode, flag</code>ï¼›è‹¥æ˜¯å­—ç¬¦ä¸²åˆ™æŒ‡å®šç¼–ç æ ¼å¼</li><li><code>callback</code>ï¼šå›è°ƒå‡½æ•°</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line">fs.<span class="title function_">writeFile</span>(<span class="string">&#x27;./files/2.txt&#x27;</span>, <span class="string">&#x27;Hello Nodejs&#x27;</span>, <span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;failed!&#x27;</span> + err.<span class="property">message</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;success!&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">writeFile</span>(<span class="string">&#x27;C:/Users/hello.txt&#x27;</span>, <span class="string">&#x27;é€šè¿‡ writeFile å†™å…¥çš„å†…å®¹&#x27;</span>, &#123; <span class="attr">flag</span>: <span class="string">&#x27;w&#x27;</span> &#125;, <span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å†™å…¥æˆåŠŸï¼&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="æµå¼æ–‡ä»¶å†™å…¥">æµå¼æ–‡ä»¶å†™å…¥</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŒæ­¥ã€å¼‚æ­¥ã€ç®€å•æ–‡ä»¶çš„å†™å…¥éƒ½ä¸é€‚åˆå¤§æ–‡ä»¶çš„å†™å…¥ï¼Œæ€§èƒ½è¾ƒå·®ï¼Œå®¹æ˜“å¯¼è‡´å†…å­˜æº¢å‡º</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªå¯å†™æµ</span></span><br><span class="line"><span class="keyword">var</span> ws = fs.<span class="title function_">createWriteStream</span>(<span class="string">&#x27;hello3.txt&#x27;</span>)</span><br><span class="line"></span><br><span class="line">ws.<span class="title function_">once</span>(<span class="string">&#x27;open&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æµæ‰“å¼€äº†~~&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">ws.<span class="title function_">once</span>(<span class="string">&#x27;close&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æµå…³é—­äº†~~&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡wså‘æ–‡ä»¶ä¸­è¾“å‡ºå†…å®¹</span></span><br><span class="line">ws.<span class="title function_">write</span>(<span class="string">&#x27;é€šè¿‡å¯å†™æµå†™å…¥æ–‡ä»¶çš„å†…å®¹&#x27;</span>)</span><br><span class="line">ws.<span class="title function_">write</span>(<span class="string">&#x27;1&#x27;</span>)</span><br><span class="line">ws.<span class="title function_">write</span>(<span class="string">&#x27;2&#x27;</span>)</span><br><span class="line">ws.<span class="title function_">write</span>(<span class="string">&#x27;3&#x27;</span>)</span><br><span class="line">ws.<span class="title function_">write</span>(<span class="string">&#x27;4&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…³é—­æµ</span></span><br><span class="line">ws.<span class="title function_">end</span>()</span><br></pre></td></tr></table></figure><h3 id="è·¯å¾„åŠ¨æ€æ‹¼æ¥é—®é¢˜-dirname">è·¯å¾„åŠ¨æ€æ‹¼æ¥é—®é¢˜ <code>__dirname</code></h3><ul><li>åœ¨ä½¿ç”¨ fs æ¨¡å—æ“ä½œæ–‡ä»¶æ—¶ï¼Œå¦‚æœæä¾›çš„æ“ä½œè·¯å¾„æ˜¯ä»¥ <code>./</code> æˆ– <code>../</code> å¼€å¤´çš„ç›¸å¯¹è·¯å¾„æ—¶ï¼Œå®¹æ˜“å‡ºç°è·¯å¾„åŠ¨æ€æ‹¼æ¥é”™è¯¯çš„é—®é¢˜</li><li>åŸå› ï¼šä»£ç åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œä¼šä»¥æ‰§è¡Œ node å‘½ä»¤æ—¶æ‰€å¤„çš„ç›®å½•ï¼ŒåŠ¨æ€æ‹¼æ¥å‡ºè¢«æ“ä½œæ–‡ä»¶çš„å®Œæ•´è·¯å¾„</li><li>è§£å†³æ–¹æ¡ˆï¼šåœ¨ä½¿ç”¨ fs æ¨¡å—æ“ä½œæ–‡ä»¶æ—¶ï¼Œç›´æ¥æä¾›å®Œæ•´çš„è·¯å¾„ï¼Œä»è€Œé˜²æ­¢è·¯å¾„åŠ¨æ€æ‹¼æ¥çš„é—®é¢˜</li><li><code>__dirname</code> è·å–æ–‡ä»¶æ‰€å¤„çš„ç»å¯¹è·¯å¾„</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fs.<span class="title function_">readFile</span>(__dirname + <span class="string">&#x27;/files/1.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, data</span>) &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="å…¶å®ƒæ“ä½œ">å…¶å®ƒæ“ä½œ</h3><p>éªŒè¯è·¯å¾„æ˜¯å¦å­˜åœ¨ï¼š</p><ul><li><code>fs.exists(path, callback)</code></li><li><code>fs.existsSync(path)</code></li></ul><p>è·å–æ–‡ä»¶ä¿¡æ¯ï¼š</p><ul><li><code>fs.stat(path, callback)</code></li><li><code>fs.stat(path)</code></li></ul><p>åˆ é™¤æ–‡ä»¶ï¼š</p><ul><li><code>fs.unlink(path, callback)</code></li><li><code>fs.unlinkSync(path)</code></li></ul><p>åˆ—å‡ºæ–‡ä»¶ï¼š</p><ul><li><code>fs.readdir(path[,options], callback)</code></li><li><code>fs.readdirSync(path[, options])</code></li></ul><p>æˆªæ–­æ–‡ä»¶ï¼š</p><ul><li><code>fs.truncate(path, len, callback)</code></li><li><code>fs.truncateSync(path, len)</code></li></ul><p>å»ºç«‹ç›®å½•ï¼š</p><ul><li><code>fs.mkdir(path[, mode], callback)</code></li><li><code>fs.mkdirSync(path[, mode])</code></li></ul><p>åˆ é™¤ç›®å½•ï¼š</p><ul><li><code>fs.rmdir(path, callback)</code></li><li><code>fs.rmdirSync(path)</code></li></ul><p>é‡å‘½åæ–‡ä»¶å’Œç›®å½•ï¼š</p><ul><li><code>fs.rename(oldPath, newPath, callback)</code></li><li><code>fs.renameSync(oldPath, newPath)</code></li></ul><p>ç›‘è§†æ–‡ä»¶æ›´æ”¹ï¼š</p><ul><li><code>fs.watchFile(filename[, options], listener)</code></li></ul><h2 id="path-è·¯å¾„æ¨¡å—">path è·¯å¾„æ¨¡å—</h2><p>path æ¨¡å—æ˜¯ Node.js å®˜æ–¹æä¾›çš„ã€ç”¨æ¥å¤„ç†è·¯å¾„çš„æ¨¡å—ã€‚å®ƒæä¾›äº†ä¸€ç³»åˆ—çš„æ–¹æ³•å’Œå±æ€§ï¼Œç”¨æ¥æ»¡è¶³ç”¨æˆ·å¯¹è·¯å¾„çš„å¤„ç†éœ€æ±‚ã€‚</p><h3 id="è·¯å¾„æ‹¼æ¥-path-join">è·¯å¾„æ‹¼æ¥ <code>path.join()</code></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨æ„ ../ ä¼šæŠµæ¶ˆå‰é¢çš„è·¯å¾„</span></span><br><span class="line"><span class="comment">// ./ ä¼šè¢«å¿½ç•¥</span></span><br><span class="line"><span class="keyword">const</span> pathStr = path.<span class="title function_">join</span>(<span class="string">&#x27;/a&#x27;</span>, <span class="string">&#x27;/b/c&#x27;</span>, <span class="string">&#x27;../../&#x27;</span>, <span class="string">&#x27;./d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(pathStr) <span class="comment">// \a\d\e</span></span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">readFile</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;./files/1.txt&#x27;</span>), <span class="string">&#x27;utf8&#x27;</span>, <span class="keyword">function</span> (<span class="params">err, dataStr</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(dataStr)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="è·å–è·¯å¾„ä¸­æ–‡ä»¶å-path-basename">è·å–è·¯å¾„ä¸­æ–‡ä»¶å <code>path.basename()</code></h3><p>ä½¿ç”¨ <code>path.basename()</code> æ–¹æ³•ï¼Œå¯ä»¥è·å–è·¯å¾„ä¸­çš„æœ€åä¸€éƒ¨åˆ†ï¼Œå¸¸é€šè¿‡è¯¥æ–¹æ³•è·å–è·¯å¾„ä¸­çš„æ–‡ä»¶å</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path.<span class="title function_">basename</span>(path[, ext])</span><br></pre></td></tr></table></figure><ul><li>path: æ–‡ä»¶è·¯å¾„</li><li>ext: æ–‡ä»¶æ‰©å±•å</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰æ–‡ä»¶çš„å­˜æ”¾è·¯å¾„</span></span><br><span class="line"><span class="keyword">const</span> fpath = <span class="string">&#x27;/a/b/c/index.html&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fullName = path.<span class="title function_">basename</span>(fpath)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fullName) <span class="comment">// index.html</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> nameWithoutExt = path.<span class="title function_">basename</span>(fpath, <span class="string">&#x27;.html&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(nameWithoutExt) <span class="comment">// index</span></span><br></pre></td></tr></table></figure><h3 id="è·å–è·¯å¾„ä¸­æ–‡ä»¶æ‰©å±•å-path-extname">è·å–è·¯å¾„ä¸­æ–‡ä»¶æ‰©å±•å <code>path.extname()</code></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fpath = <span class="string">&#x27;/a/b/c/index.html&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fext = path.<span class="title function_">extname</span>(fpath)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fext) <span class="comment">// .html</span></span><br></pre></td></tr></table></figure><h2 id="http-æ¨¡å—">http æ¨¡å—</h2><p><strong>http æ¨¡å—</strong>æ˜¯ Node.js å®˜æ–¹æä¾›çš„ã€ç”¨æ¥<strong>åˆ›å»º web æœåŠ¡å™¨</strong>çš„æ¨¡å—ã€‚é€šè¿‡httpæ¨¡å—æä¾›çš„<code>http.createServer()</code>æ–¹æ³•ï¼Œå°±èƒ½æ–¹ä¾¿çš„æŠŠä¸€å°æ™®é€šçš„ç”µè„‘ï¼Œå˜æˆä¸€å°WebæœåŠ¡å™¨ï¼Œä»è€Œå¯¹å¤–æä¾›Webèµ„æºæœåŠ¡ã€‚</p><blockquote><p>åœ¨ç½‘ç»œèŠ‚ç‚¹ä¸­ï¼Œè´Ÿè´£æ¶ˆè´¹èµ„æºçš„ç”µè„‘ï¼Œå«åš<strong>å®¢æˆ·ç«¯;</strong></p><p>è´Ÿè´£å¯¹å¤–æä¾›ç½‘ç»œèµ„æºçš„ç”µè„‘ï¼Œå«åš<strong>æœåŠ¡å™¨</strong>ã€‚</p></blockquote><p><strong>reqè¯·æ±‚å¯¹è±¡</strong>ï¼šåªè¦æœåŠ¡å™¨æ¥æ”¶åˆ°äº†å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå°±ä¼šè°ƒç”¨é€šè¿‡server.on()ä¸ºæœåŠ¡å™¨ç»‘å®šçš„requestäº‹ä»¶å¤„ç†å‡½æ•°ã€‚å¦‚æœæƒ³åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ï¼Œè®¿é—®ä¸å®¢æˆ·ç«¯ç›¸å…³çš„æ•°æ®æˆ–å±æ€§ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„æ–¹å¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">server.<span class="title function_">on</span>(<span class="string">&#x27;request&#x27;</span>,<span class="function">(<span class="params">req</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="comment">// reqæ˜¯è¯·æ±‚å¯¹è±¡ï¼Œå®ƒåŒ…å«äº†ä¸å®¢æˆ·ç«¯ç›¸å…³çš„æ•°æ®å’Œå±æ€§ï¼Œä¾‹å¦‚ï¼š</span></span><br><span class="line"><span class="comment">// req.url æ˜¯å®¢æˆ·ç«¯è¯·æ±‚çš„URLåœ°å€</span></span><br><span class="line"><span class="comment">// req.method æ˜¯å®¢æˆ·ç«¯çš„methodè¯·æ±‚ç±»å‹</span></span><br><span class="line"><span class="keyword">const</span> str = <span class="string">&#x27;Your request url is $&#123;req.url&#125;, and request method is $&#123;req.method&#125;&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>resè¯·æ±‚å¯¹è±¡</strong>ï¼šåœ¨æœåŠ¡å™¨çš„requestäº‹ä»¶å¤„ç†å‡½æ•°ä¸­ï¼Œå¦‚æœæƒ³è®¿é—®ä¸æœåŠ¡å™¨ç›¸å…³çš„æ•°æ®æˆ–å±æ€§ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„æ–¹å¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">server.<span class="title function_">on</span>(<span class="string">&#x27;request&#x27;</span>,<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="comment">// resæ˜¯å“åº”å¯¹è±¡ï¼Œå®ƒåŒ…å«äº†ä¸æœåŠ¡å™¨ç›¸å…³çš„æ•°æ®å’Œå±æ€§ï¼Œä¾‹å¦‚</span></span><br><span class="line">    <span class="comment">// è¦å‘é€åˆ°å®¢æˆ·ç«¯çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">const</span> str = <span class="string">&#x27;Your request url is $&#123;req.url&#125;, and request method is $&#123;req.method&#125;&#x27;</span></span><br><span class="line">    <span class="comment">// res.end() æ–¹æ³•çš„ä½œç”¨ï¼šå‘å®¢æˆ·ç«¯å‘é€æŒ‡å®šçš„å†…å®¹ï¼Œå¹¶ç»“æŸè¿™æ¬¡è¯·æ±‚çš„å¤„ç†è¿‡ç¨‹</span></span><br><span class="line">res.<span class="title function_">end</span>(str)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜</strong>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">server.<span class="title function_">on</span>(<span class="string">&#x27;request&#x27;</span>,<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="comment">// å‘é€çš„å†…å®¹åŒ…å«ä¸­æ–‡</span></span><br><span class="line"><span class="keyword">const</span> str = <span class="string">&#x27;Your request url is $&#123;req.url&#125;, and request method is $&#123;req.method&#125;&#x27;</span></span><br><span class="line"><span class="comment">// ä¸ºäº†é˜²æ­¢ä¸­æ–‡æ˜¾ç¤ºä¹±ç çš„é—®é¢˜ï¼Œéœ€è¦è®¾ç½®å“åº”å¤´ Content-Type çš„å€¼ä¸º text/html; charset=utf-8</span></span><br><span class="line">    res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Content-Type&#x27;</span>,<span class="string">&#x27;text/html;charset=utf-8&#x27;</span>)</span><br><span class="line">    <span class="comment">// æŠŠåŒ…å«ä¸­æ–‡çš„å†…å®¹ï¼Œå“åº”ç»™å®¢æˆ·ç«¯</span></span><br><span class="line">res.<span class="title function_">end</span>(str)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>æ ¹æ®ä¸åŒçš„urlå“åº”ä¸åŒçš„htmlå†…å®¹</strong></p><p>æ ¸å¿ƒå®ç°æ­¥éª¤ï¼š</p><p>â‘  è·å–<code>è¯·æ±‚çš„ url åœ°å€</code></p><p>â‘¡ è®¾ç½®<code>é»˜è®¤çš„å“åº”å†…å®¹</code>ä¸º 404 Not found</p><p>â‘¢ åˆ¤æ–­ç”¨æˆ·è¯·æ±‚çš„æ˜¯å¦ä¸º <code>/</code> æˆ– <code>/index.html</code> é¦–é¡µ</p><p>â‘£ åˆ¤æ–­ç”¨æˆ·è¯·æ±‚çš„æ˜¯å¦ä¸º <code>/about.html</code> å…³äºé¡µé¢</p><p>â‘¤ è®¾ç½® <code>Content-Type å“åº”å¤´</code>ï¼Œé˜²æ­¢ä¸­æ–‡ä¹±ç </p><p>â‘¥ ä½¿ç”¨ <code>res.end()</code> æŠŠå†…å®¹å“åº”ç»™å®¢æˆ·ç«¯</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220905161706551.png" alt="image-20220905161706551"></p><p><strong>æ ¸å¿ƒæ€è·¯</strong></p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220905165145827.png" alt="image-20220905165145827"></p><p><strong>ä¼˜åŒ–èµ„æºçš„è¯·æ±‚è·¯å¾„</strong></p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220905170350670.png" alt="image-20220905170350670"></p><h3 id="åˆ›å»ºåŸºæœ¬-Web-æœåŠ¡å™¨">åˆ›å»ºåŸºæœ¬ Web æœåŠ¡å™¨</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»º web æœåŠ¡å™¨å®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ºæœåŠ¡å™¨å®ä¾‹ç»‘å®š request äº‹ä»¶ï¼Œç›‘å¬å®¢æˆ·ç«¯çš„è¯·æ±‚</span></span><br><span class="line">server.<span class="title function_">on</span>(<span class="string">&#x27;request&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> url = req.<span class="property">url</span></span><br><span class="line">  <span class="keyword">const</span> method = req.<span class="property">method</span></span><br><span class="line">  <span class="keyword">const</span> str = <span class="string">`Your request url is <span class="subst">$&#123;url&#125;</span>, and request method is <span class="subst">$&#123;method&#125;</span>`</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(str)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¾ç½® Content-Type å“åº”å¤´ï¼Œè§£å†³ä¸­æ–‡ä¹±ç çš„é—®é¢˜</span></span><br><span class="line">  res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;text/html; charset=utf-8&#x27;</span>)</span><br><span class="line">  <span class="comment">// å‘å®¢æˆ·ç«¯å“åº”å†…å®¹</span></span><br><span class="line">  res.<span class="title function_">end</span>(str)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">8080</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;server running at http://127.0.0.1:8080&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="å®ç°ç®€é™‹è·¯ç”±æ•ˆæœ">å®ç°ç®€é™‹è·¯ç”±æ•ˆæœ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>()</span><br><span class="line"></span><br><span class="line">server.<span class="title function_">on</span>(<span class="string">&#x27;request&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> url = req.<span class="property">url</span></span><br><span class="line">  <span class="comment">// è®¾ç½®é»˜è®¤çš„å“åº”å†…å®¹ä¸º 404 Not found</span></span><br><span class="line">  <span class="keyword">let</span> content = <span class="string">&#x27;&lt;h1&gt;404 Not found!&lt;/h1&gt;&#x27;</span></span><br><span class="line">  <span class="comment">// åˆ¤æ–­ç”¨æˆ·è¯·æ±‚çš„æ˜¯å¦ä¸º / æˆ– /index.html é¦–é¡µ</span></span><br><span class="line">  <span class="comment">// åˆ¤æ–­ç”¨æˆ·è¯·æ±‚çš„æ˜¯å¦ä¸º /about.html å…³äºé¡µé¢</span></span><br><span class="line">  <span class="keyword">if</span> (url === <span class="string">&#x27;/&#x27;</span> || url === <span class="string">&#x27;/index.html&#x27;</span>) &#123;</span><br><span class="line">    content = <span class="string">&#x27;&lt;h1&gt;é¦–é¡µ&lt;/h1&gt;&#x27;</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (url === <span class="string">&#x27;/about.html&#x27;</span>) &#123;</span><br><span class="line">    content = <span class="string">&#x27;&lt;h1&gt;å…³äºé¡µé¢&lt;/h1&gt;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;text/html; charset=utf-8&#x27;</span>)</span><br><span class="line">  res.<span class="title function_">end</span>(content)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">80</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;server running at http://127.0.0.1&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="æ¨¡å—åŒ–">æ¨¡å—åŒ–</h2><h3 id="æ¨¡å—åŒ–æ¦‚å¿µ">æ¨¡å—åŒ–æ¦‚å¿µ</h3><ul><li>æ¨¡å—åŒ–æ˜¯æŒ‡è§£å†³ä¸€ä¸ªå¤æ‚é—®é¢˜æ—¶ï¼Œè‡ªé¡¶å‘ä¸‹é€å±‚æŠŠç³»ç»Ÿåˆ’åˆ†ä¸ºè‹¥å¹²æ¨¡å—çš„è¿‡ç¨‹ï¼Œæ¨¡å—æ˜¯å¯ç»„åˆã€åˆ†è§£å’Œæ›´æ¢çš„å•å…ƒã€‚</li><li>æ¨¡å—åŒ–å¯æé«˜ä»£ç çš„å¤ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œå®ç°æŒ‰éœ€åŠ è½½ã€‚</li><li>æ¨¡å—åŒ–è§„èŒƒæ˜¯å¯¹ä»£ç è¿›è¡Œæ¨¡å—åŒ–æ‹†åˆ†å’Œç»„åˆæ—¶éœ€è¦éµå®ˆçš„è§„åˆ™ï¼Œå¦‚ä½¿ç”¨ä½•ç§è¯­æ³•æ ¼å¼å¼•ç”¨æ¨¡å—å’Œå‘å¤–æš´éœ²æˆå‘˜ã€‚</li></ul><p>**ä»£ç æ¨¡å—åŒ–æ‹†åˆ†çš„å¥½å¤„ï¼š**æé«˜ä»£ç çš„å¤ç”¨æ€§ã€å¯ç»´æŠ¤æ€§ï¼Œå¯ä»¥å®ç°æŒ‰éœ€åŠ è½½</p><h3 id="Node-js-ä¸­æ¨¡å—çš„åˆ†ç±»">Node.js ä¸­æ¨¡å—çš„åˆ†ç±»</h3><ul><li>å†…ç½®æ¨¡å—ï¼ˆå†…ç½®æ¨¡å—æ˜¯ç”± Node.js å®˜æ–¹æä¾›çš„ï¼Œä¾‹å¦‚ fsã€pathã€http ç­‰ï¼‰</li><li>è‡ªå®šä¹‰æ¨¡å—ï¼ˆç”¨æˆ·åˆ›å»ºçš„æ¯ä¸ª .js æ–‡ä»¶ï¼Œéƒ½æ˜¯è‡ªå®šä¹‰æ¨¡å—ï¼‰</li><li>ç¬¬ä¸‰æ–¹æ¨¡å—ï¼ˆç”±ç¬¬ä¸‰æ–¹å¼€å‘å‡ºæ¥çš„æ¨¡å—ï¼Œå¹¶éå®˜æ–¹æä¾›çš„å†…ç½®æ¨¡å—ï¼Œä¹Ÿä¸æ˜¯ç”¨æˆ·åˆ›å»ºçš„è‡ªå®šä¹‰æ¨¡å—ï¼Œä½¿ç”¨å‰éœ€è¦å…ˆä¸‹è½½ï¼‰</li></ul><h3 id="Node-js-ä¸­çš„æ¨¡å—ä½œç”¨åŸŸ">Node.js ä¸­çš„æ¨¡å—ä½œç”¨åŸŸ</h3><ul><li>å’Œå‡½æ•°ä½œç”¨åŸŸç±»ä¼¼ï¼Œåœ¨è‡ªå®šä¹‰æ¨¡å—ä¸­å®šä¹‰çš„å˜é‡ã€æ–¹æ³•ç­‰æˆå‘˜ï¼Œåªèƒ½åœ¨å½“å‰æ¨¡å—å†…è¢«è®¿é—®ï¼Œè¿™ç§æ¨¡å—çº§åˆ«çš„è®¿é—®é™åˆ¶ï¼Œå«åšæ¨¡å—ä½œç”¨åŸŸ</li><li><strong>å¥½å¤„</strong>ï¼šé˜²æ­¢å…¨å±€å˜é‡æ±¡æŸ“</li></ul><h3 id="æ¨¡å—ä½œç”¨åŸŸçš„æˆå‘˜">æ¨¡å—ä½œç”¨åŸŸçš„æˆå‘˜</h3><ul><li>è‡ªå®šä¹‰æ¨¡å—ä¸­éƒ½æœ‰ä¸€ä¸ª <code>module</code> å¯¹è±¡ï¼Œå­˜å‚¨äº†å’Œå½“å‰æ¨¡å—æœ‰å…³çš„ä¿¡æ¯</li><li>åœ¨è‡ªå®šä¹‰æ¨¡å—ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>module.exports</code> å¯¹è±¡ï¼Œå°†æ¨¡å—å†…çš„æˆå‘˜å…±äº«å‡ºå»ï¼Œä¾›å¤–ç•Œä½¿ç”¨ã€‚å¯¼å…¥è‡ªå®šä¹‰æ¨¡å—æ—¶ï¼Œå¾—åˆ°çš„å°±æ˜¯ <code>module.exports</code> æŒ‡å‘çš„å¯¹è±¡ã€‚</li><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>exports</code> å’Œ <code>module.exports</code> æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚æœ€ç»ˆå…±äº«çš„ç»“æœï¼Œä»¥ <code>module.exports</code> æŒ‡å‘çš„å¯¹è±¡ä¸ºå‡†ã€‚</li></ul><blockquote><p>**æ³¨æ„ç‚¹ï¼š**ä½¿ç”¨ require() æ–¹æ³•å¯¼å…¥æ¨¡å—æ—¶ï¼Œå¯¼å…¥çš„ç»“æœï¼Œ<strong>æ°¸è¿œä»¥</strong> <strong>module.exports</strong> <strong>æŒ‡å‘çš„å¯¹è±¡ä¸ºå‡†</strong>ã€‚</p></blockquote><h3 id="CommonJS-æ¨¡å—åŒ–è§„èŒƒ">CommonJS æ¨¡å—åŒ–è§„èŒƒ</h3><ul><li>æ¯ä¸ªæ¨¡å—å†…éƒ¨ï¼Œ<code>module</code> å˜é‡ä»£è¡¨å½“å‰æ¨¡å—</li><li><code>module</code> å˜é‡æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œ<code>module.exports</code> æ˜¯å¯¹å¤–çš„æ¥å£</li><li>åŠ è½½æŸä¸ªæ¨¡å—å³åŠ è½½è¯¥æ¨¡å—çš„ <code>module.exports</code> å±æ€§</li></ul><h3 id="æ¨¡å—åŠ è½½æœºåˆ¶">æ¨¡å—åŠ è½½æœºåˆ¶</h3><p>æ¨¡å—ç¬¬ä¸€æ¬¡åŠ è½½åä¼šè¢«ç¼“å­˜ï¼Œå³å¤šæ¬¡è°ƒç”¨ <code>require()</code> ä¸ä¼šå¯¼è‡´æ¨¡å—çš„ä»£ç è¢«æ‰§è¡Œå¤šæ¬¡ï¼Œæé«˜æ¨¡å—åŠ è½½æ•ˆç‡ã€‚</p><h4 id="å†…ç½®æ¨¡å—åŠ è½½">å†…ç½®æ¨¡å—åŠ è½½</h4><p>å†…ç½®æ¨¡å—åŠ è½½ä¼˜å…ˆçº§æœ€é«˜ã€‚</p><h4 id="è‡ªå®šä¹‰æ¨¡å—åŠ è½½">è‡ªå®šä¹‰æ¨¡å—åŠ è½½</h4><p>åŠ è½½è‡ªå®šä¹‰æ¨¡å—æ—¶ï¼Œè·¯å¾„è¦ä»¥ <code>./</code> æˆ– <code>../</code> å¼€å¤´ï¼Œå¦åˆ™ä¼šä½œä¸ºå†…ç½®æ¨¡å—æˆ–ç¬¬ä¸‰æ–¹æ¨¡å—åŠ è½½ã€‚</p><p>å¯¼å…¥è‡ªå®šä¹‰æ¨¡å—æ—¶ï¼Œè‹¥çœç•¥æ–‡ä»¶æ‰©å±•åï¼Œåˆ™ Node.js ä¼šæŒ‰é¡ºåºå°è¯•åŠ è½½æ–‡ä»¶ï¼š</p><ul><li>æŒ‰ç¡®åˆ‡çš„æ–‡ä»¶ååŠ è½½</li><li>è¡¥å…¨ <code>.js</code> æ‰©å±•ååŠ è½½</li><li>è¡¥å…¨ <code>.json</code> æ‰©å±•ååŠ è½½</li><li>è¡¥å…¨ <code>.node</code> æ‰©å±•ååŠ è½½</li><li>æŠ¥é”™</li></ul><h4 id="ç¬¬ä¸‰æ–¹æ¨¡å—åŠ è½½">ç¬¬ä¸‰æ–¹æ¨¡å—åŠ è½½</h4><ul><li>è‹¥å¯¼å…¥ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œ Node.js ä¼šä»<strong>å½“å‰æ¨¡å—çš„çˆ¶ç›®å½•</strong>å¼€å§‹ï¼Œå°è¯•ä» <code>/node_modules</code> æ–‡ä»¶å¤¹ä¸­åŠ è½½ç¬¬ä¸‰æ–¹æ¨¡å—ã€‚</li><li>å¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œåˆ™ç§»åŠ¨åˆ°å†<strong>ä¸Šä¸€å±‚çˆ¶ç›®å½•</strong>ä¸­ï¼Œè¿›è¡ŒåŠ è½½ï¼Œç›´åˆ°<strong>æ–‡ä»¶ç³»ç»Ÿçš„æ ¹ç›®å½•</strong>ã€‚</li></ul><p>ä¾‹å¦‚ï¼Œå‡è®¾åœ¨ <code>C:\Users\bruce\project\foo.js</code> æ–‡ä»¶é‡Œè°ƒç”¨äº† <code>require('tools')</code>ï¼Œåˆ™ Node.js ä¼šæŒ‰ä»¥ä¸‹é¡ºåºæŸ¥æ‰¾ï¼š</p><ul><li><code>C:\Users\bruce\project\node_modules\tools</code></li><li><code>C:\Users\bruce\node_modules\tools</code></li><li><code>C:\Users\node_modules\tools</code></li><li><code>C:\node_modules\tools</code></li></ul><h4 id="ç›®å½•ä½œä¸ºæ¨¡å—åŠ è½½">ç›®å½•ä½œä¸ºæ¨¡å—åŠ è½½</h4><p>å½“æŠŠç›®å½•ä½œä¸ºæ¨¡å—æ ‡è¯†ç¬¦è¿›è¡ŒåŠ è½½çš„æ—¶å€™ï¼Œæœ‰ä¸‰ç§åŠ è½½æ–¹å¼ï¼š</p><ul><li>åœ¨è¢«åŠ è½½çš„ç›®å½•ä¸‹æŸ¥æ‰¾ <code>package.json</code> çš„æ–‡ä»¶ï¼Œå¹¶å¯»æ‰¾ <code>main</code> å±æ€§ï¼Œä½œä¸º <code>require()</code> åŠ è½½çš„å…¥å£</li><li>å¦‚æœæ²¡æœ‰ <code>package.json</code> æ–‡ä»¶ï¼Œæˆ–è€… <code>main</code> å…¥å£ä¸å­˜åœ¨æˆ–æ— æ³•è§£æï¼Œåˆ™ Node.js å°†ä¼šè¯•å›¾åŠ è½½ç›®å½•ä¸‹çš„ <code>index.js</code> æ–‡ä»¶ã€‚</li><li>è‹¥å¤±è´¥åˆ™æŠ¥é”™</li></ul><h3 id="npmåˆä½“éªŒ">npmåˆä½“éªŒ</h3><p>Node.js ä¸­çš„ç¬¬ä¸‰æ–¹æ¨¡å—åˆå«åšåŒ…ã€‚</p><blockquote><p>ä» <a href="https://www.npmjs.com/">https://www.npmjs.com/</a> ç½‘ç«™ä¸Šæœç´¢è‡ªå·±æ‰€éœ€è¦çš„åŒ…</p><p>ä» <a href="https://registry.npmjs.org/">https://registry.npmjs.org/</a> æœåŠ¡å™¨ä¸Šä¸‹è½½è‡ªå·±éœ€è¦çš„åŒ…</p></blockquote><h4 id="æ ¼å¼åŒ–æ—¶é—´çš„ä¼ ç»Ÿåšæ³•">æ ¼å¼åŒ–æ—¶é—´çš„ä¼ ç»Ÿåšæ³•</h4><p><strong>æ­¥éª¤ï¼š</strong></p><p>â‘  åˆ›å»ºæ ¼å¼åŒ–æ—¶é—´çš„è‡ªå®šä¹‰æ¨¡å—</p><p>â‘¡ å®šä¹‰æ ¼å¼åŒ–æ—¶é—´çš„æ–¹æ³•</p><p>â‘¢ åˆ›å»ºè¡¥é›¶å‡½æ•°</p><p>â‘£ ä»è‡ªå®šä¹‰æ¨¡å—ä¸­å¯¼å‡ºæ ¼å¼åŒ–æ—¶é—´çš„å‡½æ•°</p><p>â‘¤ å¯¼å…¥æ ¼å¼åŒ–æ—¶é—´çš„è‡ªå®šä¹‰æ¨¡å—</p><p>â‘¥ è°ƒç”¨æ ¼å¼åŒ–æ—¶é—´çš„å‡½æ•°</p><p><strong>æ–¹æ³•å‡½æ•°ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">dateFormat</span>(<span class="params">dtStr</span>)&#123;</span><br><span class="line"><span class="keyword">const</span> dt = <span class="keyword">new</span> <span class="title class_">Date</span>(dtStr)</span><br><span class="line"><span class="keyword">const</span> y = <span class="title function_">padZero</span>(dt.<span class="title function_">getFullYear</span>())</span><br><span class="line"><span class="keyword">const</span> m = <span class="title function_">padZero</span>(dt.<span class="title function_">getMonth</span>() + <span class="number">1</span>)</span><br><span class="line"><span class="keyword">const</span> d = <span class="title function_">padZero</span>(dt.<span class="title function_">getDate</span>())</span><br><span class="line"><span class="keyword">const</span> hh = <span class="title function_">padZero</span>(dt.<span class="title function_">getHours</span>())</span><br><span class="line"><span class="keyword">const</span> mm = <span class="title function_">padZero</span>(dt.<span class="title function_">getMinutes</span>())</span><br><span class="line"><span class="keyword">const</span> ss = <span class="title function_">padZero</span>(dt.<span class="title function_">getSeconds</span>())</span><br><span class="line"><span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;y&#125;</span>-<span class="subst">$&#123;m&#125;</span>-<span class="subst">$&#123;d&#125;</span> <span class="subst">$&#123;hh&#125;</span>:<span class="subst">$&#123;mm&#125;</span>:<span class="subst">$&#123;ss&#125;</span>`</span> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">padZero</span>(<span class="params">n</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> n&gt;<span class="number">9</span> ? n : <span class="string">&#x27;0&#x27;</span> + n</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è°ƒç”¨è¿‡ç¨‹ï¼š</strong></p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220905202551268.png" alt="image-20220905202551268"></p><h4 id="æ ¼å¼åŒ–æ—¶é—´çš„é«˜çº§åšæ³•">æ ¼å¼åŒ–æ—¶é—´çš„é«˜çº§åšæ³•</h4><p><strong>æ­¥éª¤ï¼š</strong></p><p>â‘ ä½¿ç”¨ npm åŒ…ç®¡ç†å·¥å…·ï¼Œåœ¨é¡¹ç›®ä¸­å®‰è£…æ ¼å¼åŒ–æ—¶é—´çš„åŒ… moment</p><p>â‘¡ä½¿ç”¨ require() å¯¼å…¥æ ¼å¼åŒ–æ—¶é—´çš„åŒ…</p><p>â‘¢å‚è€ƒ moment çš„å®˜æ–¹ API æ–‡æ¡£å¯¹æ—¶é—´è¿›è¡Œæ ¼å¼åŒ–</p><p><strong>ä½¿ç”¨è¿‡ç¨‹ï¼š</strong></p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220905203517226.png" alt="image-20220905203517226"></p><h4 id="åˆæ¬¡è£…åŒ…åå¤šäº†å“ªäº›æ–‡ä»¶">åˆæ¬¡è£…åŒ…åå¤šäº†å“ªäº›æ–‡ä»¶</h4><p>åˆæ¬¡è£…åŒ…å®Œæˆåï¼Œåœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹å¤šä¸€ä¸ªå«åš <code>node_modules</code> çš„æ–‡ä»¶å¤¹å’Œ <code>package-lock.json</code> çš„é…ç½®æ–‡ä»¶ã€‚</p><blockquote><p><code>node_modules</code> æ–‡ä»¶å¤¹ç”¨æ¥å­˜æ”¾æ‰€æœ‰å·²å®‰è£…åˆ°é¡¹ç›®ä¸­çš„åŒ…ã€‚require() å¯¼å…¥ç¬¬ä¸‰æ–¹åŒ…æ—¶ï¼Œå°±æ˜¯ä»è¿™ä¸ªç›®å½•ä¸­æŸ¥æ‰¾å¹¶åŠ è½½åŒ…ã€‚</p><p><code>package-lock.json</code> é…ç½®æ–‡ä»¶ç”¨æ¥è®°å½• node_modules ç›®å½•ä¸‹çš„æ¯ä¸€ä¸ªåŒ…çš„ä¸‹è½½ä¿¡æ¯ï¼Œä¾‹å¦‚åŒ…çš„åå­—ã€ç‰ˆæœ¬å·ã€ä¸‹è½½åœ°å€ç­‰ã€‚</p></blockquote><h4 id="åŒ…çš„è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ"><strong>åŒ…çš„</strong>è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ</h4><p>åŒ…çš„ç‰ˆæœ¬å·æ˜¯ä»¥â€œç‚¹åˆ†åè¿›åˆ¶â€å½¢å¼è¿›è¡Œå®šä¹‰çš„ï¼Œæ€»å…±æœ‰ä¸‰ä½æ•°å­—ï¼Œä¾‹å¦‚ <strong>2.24.0</strong></p><p>å…¶ä¸­æ¯ä¸€ä½æ•°å­—æ‰€ä»£è¡¨çš„çš„å«ä¹‰å¦‚ä¸‹ï¼š</p><p>ç¬¬1ä½æ•°å­—ï¼šå¤§ç‰ˆæœ¬</p><p>ç¬¬2ä½æ•°å­—ï¼šåŠŸèƒ½ç‰ˆæœ¬</p><p>ç¬¬3ä½æ•°å­—ï¼šBugä¿®å¤ç‰ˆæœ¬</p><h4 id="åŒ…ç®¡ç†é…ç½®æ–‡ä»¶">åŒ…ç®¡ç†é…ç½®æ–‡ä»¶</h4><p>npm è§„å®šï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­ï¼Œ<strong>å¿…é¡»</strong>æä¾›ä¸€ä¸ªå«åš <code>package.json</code> çš„åŒ…ç®¡ç†é…ç½®æ–‡ä»¶ã€‚ç”¨æ¥è®°å½•ä¸é¡¹ç›®æœ‰å…³çš„ä¸€äº›é…ç½®ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š</p><ul><li><p>é¡¹ç›®çš„åç§°ã€ç‰ˆæœ¬å·ã€æè¿°ç­‰</p></li><li><p>é¡¹ç›®ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›åŒ…</p></li><li><p>å“ªäº›åŒ…åªåœ¨å¼€å‘æœŸé—´ä¼šç”¨åˆ°</p></li><li><p>é‚£äº›åŒ…åœ¨å¼€å‘å’Œéƒ¨ç½²æ—¶éƒ½éœ€è¦ç”¨åˆ°</p></li></ul><h5 id="å¤šäººåä½œé—®é¢˜">å¤šäººåä½œé—®é¢˜</h5><p>**é—®é¢˜1ï¼š**ç¬¬ä¸‰æ–¹åŒ…çš„ä½“ç§¯è¿‡å¤§ï¼Œä¸æ–¹ä¾¿å›¢é˜Ÿæˆå‘˜ä¹‹é—´å…±äº«é¡¹ç›®æºä»£ç ã€‚</p><p>**è§£å†³æ–¹æ¡ˆï¼š**å…±äº«æ—¶å‰”é™¤<code>node_modules</code></p><h5 id="å¦‚ä½•è®°å½•é¡¹ç›®ä¸­å®‰è£…äº†å“ªäº›åŒ…">å¦‚ä½•è®°å½•é¡¹ç›®ä¸­å®‰è£…äº†å“ªäº›åŒ…</h5><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªå«åš <code>package.json</code> çš„é…ç½®æ–‡ä»¶ï¼Œå³å¯ç”¨æ¥è®°å½•é¡¹ç›®ä¸­å®‰è£…äº†å“ªäº›åŒ…ã€‚ä»è€Œæ–¹ä¾¿å‰”é™¤ <code>node_modules</code> ç›®å½•ä¹‹åï¼Œåœ¨å›¢é˜Ÿæˆå‘˜ä¹‹é—´å…±äº«é¡¹ç›®çš„æºä»£ç ã€‚</p><blockquote><p><strong>æ³¨æ„</strong>ï¼šä»Šååœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œä¸€å®šè¦æŠŠ <code>node_modules</code> æ–‡ä»¶å¤¹ï¼Œæ·»åŠ åˆ° <code>.gitignore</code> å¿½ç•¥æ–‡ä»¶ä¸­ã€‚</p></blockquote><h5 id="å¿«é€Ÿåˆ›å»ºpackage-json">å¿«é€Ÿåˆ›å»ºpackage.json</h5><p>npm åŒ…ç®¡ç†å·¥å…·æä¾›äº†ä¸€ä¸ªå¿«æ·å‘½ä»¤ï¼Œå¯ä»¥åœ¨æ‰§è¡Œå‘½ä»¤æ—¶æ‰€å¤„çš„ç›®å½•ä¸­ï¼Œå¿«é€Ÿåˆ›å»º <code>package.json</code> è¿™ä¸ªåŒ…ç®¡ç†é…ç½®æ–‡ä»¶ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220905204251436.png" alt="image-20220905204251436"></p><blockquote><p><strong>æ³¨æ„ï¼š</strong></p><p>â‘ ä¸Šè¿°å‘½ä»¤åªèƒ½åœ¨è‹±æ–‡çš„ç›®å½•ä¸‹æˆåŠŸè¿è¡Œï¼æ‰€ä»¥ï¼Œé¡¹ç›®æ–‡ä»¶å¤¹çš„åç§°<strong>ä¸€å®šè¦ä½¿ç”¨è‹±æ–‡å‘½å</strong>ï¼Œ<strong>ä¸è¦ä½¿ç”¨ä¸­æ–‡</strong>ï¼Œä¸èƒ½å‡ºç°ç©ºæ ¼ã€‚</p><p>â‘¡è¿è¡Œ <code>npm install</code> å‘½ä»¤å®‰è£…åŒ…çš„æ—¶å€™ï¼Œnpm åŒ…ç®¡ç†å·¥å…·ä¼šè‡ªåŠ¨æŠŠåŒ…çš„åç§°å’Œç‰ˆæœ¬å·ï¼Œè®°å½•åˆ° <code>package.json</code> ä¸­ã€‚</p></blockquote><h5 id="dependenciesèŠ‚ç‚¹"><strong>dependenciesèŠ‚ç‚¹</strong></h5><p><code>package.json</code> æ–‡ä»¶ä¸­ï¼Œæœ‰ä¸€ä¸ª <code>dependencies</code> èŠ‚ç‚¹ï¼Œä¸“é—¨ç”¨æ¥è®°å½•æ‚¨ä½¿ç”¨ <code>npm install</code> å‘½ä»¤å®‰è£…äº†å“ªäº›åŒ…ã€‚</p><h5 id="ä¸€æ¬¡æ€§å®‰è£…æ‰€æœ‰çš„åŒ…">ä¸€æ¬¡æ€§å®‰è£…æ‰€æœ‰çš„åŒ…</h5><p>å½“æˆ‘ä»¬æ‹¿åˆ°ä¸€ä¸ªå‰”é™¤äº† <code>node_modules</code> çš„é¡¹ç›®ä¹‹åï¼Œéœ€è¦å…ˆæŠŠæ‰€æœ‰çš„åŒ…ä¸‹è½½åˆ°é¡¹ç›®ä¸­ï¼Œæ‰èƒ½å°†é¡¹ç›®è¿è¡Œèµ·æ¥ã€‚</p><p>å¦åˆ™ä¼šæŠ¥ç±»ä¼¼äºä¸‹é¢çš„é”™è¯¯ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220905204506172.png" alt="image-20220905204506172"></p><p>å¯ä»¥è¿è¡Œ <code>npm install</code> å‘½ä»¤ï¼ˆæˆ– <code>npm i</code>ï¼‰ä¸€æ¬¡æ€§å®‰è£…æ‰€æœ‰çš„ä¾èµ–åŒ…ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220905204528159.png" alt="image-20220905204528159"></p><h5 id="å¸è½½åŒ…">å¸è½½åŒ…</h5><p>å¯ä»¥è¿è¡Œ <code>npm uninstall</code> å‘½ä»¤ï¼Œæ¥å¸è½½æŒ‡å®šçš„åŒ…ã€‚</p><blockquote><p><strong>æ³¨æ„ï¼š</strong><code>npm uninstall</code> å‘½ä»¤æ‰§è¡ŒæˆåŠŸåï¼Œä¼šæŠŠå¸è½½çš„åŒ…ï¼Œè‡ªåŠ¨ä» <code>package.json</code> çš„ <code>dependencies</code> ä¸­ç§»é™¤æ‰ã€‚</p></blockquote><h5 id="devDependencies-èŠ‚ç‚¹"><strong>devDependencies</strong> èŠ‚ç‚¹</h5><p>å¦‚æœæŸäº›åŒ…<strong>åªåœ¨é¡¹ç›®å¼€å‘é˜¶æ®µ</strong>ä¼šç”¨åˆ°ï¼Œåœ¨<strong>é¡¹ç›®ä¸Šçº¿ä¹‹åä¸ä¼šç”¨åˆ°</strong>ï¼Œåˆ™å»ºè®®æŠŠè¿™äº›åŒ…è®°å½•åˆ° <code>devDependencies</code> èŠ‚ç‚¹ä¸­ã€‚</p><p>ä¸ä¹‹å¯¹åº”çš„ï¼Œå¦‚æœæŸäº›åŒ…åœ¨å¼€å‘å’Œé¡¹ç›®ä¸Šçº¿ä¹‹åéƒ½éœ€è¦ç”¨åˆ°ï¼Œåˆ™å»ºè®®æŠŠè¿™äº›åŒ…è®°å½•åˆ° <code>dependencies</code> èŠ‚ç‚¹ä¸­ã€‚</p><p>æ‚¨å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„å‘½ä»¤ï¼Œå°†åŒ…è®°å½•åˆ° <code>devDependencies</code> èŠ‚ç‚¹ä¸­ï¼š</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220905204737437.png" alt="image-20220905204737437"></p><h5 id="è§£å†³ä¸‹åŒ…é€Ÿåº¦æ…¢çš„é—®é¢˜">è§£å†³ä¸‹åŒ…é€Ÿåº¦æ…¢çš„é—®é¢˜</h5><ul><li><strong>ä½¿ç”¨æ·˜å®NPMé•œåƒæœåŠ¡å™¨</strong></li></ul><p>æ·˜å®åœ¨å›½å†…æ­å»ºäº†ä¸€ä¸ªæœåŠ¡å™¨ï¼Œä¸“é—¨æŠŠå›½å¤–å®˜æ–¹æœåŠ¡å™¨ä¸Šçš„åŒ…åŒæ­¥åˆ°å›½å†…çš„æœåŠ¡å™¨ï¼Œç„¶ååœ¨å›½å†…æä¾›ä¸‹åŒ…çš„æœåŠ¡ã€‚ä»è€Œæå¤§çš„æé«˜äº†ä¸‹åŒ…çš„é€Ÿåº¦ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220905204855070.png" alt="image-20220905204855070"></p><p><strong>é•œåƒ</strong>ï¼ˆMirroringï¼‰æ˜¯ä¸€ç§æ–‡ä»¶å­˜å‚¨å½¢å¼ï¼Œä¸€ä¸ªç£ç›˜ä¸Šçš„æ•°æ®åœ¨å¦ä¸€ä¸ªç£ç›˜ä¸Šå­˜åœ¨ä¸€ä¸ªå®Œå…¨ç›¸åŒçš„å‰¯æœ¬å³ä¸ºé•œåƒã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220905204929588.png" alt="image-20220905204929588"></p><ul><li><strong>åˆ‡æ¢ npm çš„ä¸‹åŒ…é•œåƒæº</strong></li></ul><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220905205012326.png" alt="image-20220905205012326"></p><ul><li><strong>nrm</strong></li></ul><p>åˆ©ç”¨ <code>nrm</code> æä¾›çš„ç»ˆç«¯å‘½ä»¤ï¼Œå¯ä»¥å¿«é€ŸæŸ¥çœ‹å’Œåˆ‡æ¢ä¸‹åŒ…çš„é•œåƒæºã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220905205032699.png" alt="image-20220905205032699"></p><h4 id="åŒ…çš„åˆ†ç±»">åŒ…çš„åˆ†ç±»</h4><p>ä½¿ç”¨ npm åŒ…ç®¡ç†å·¥å…·ä¸‹è½½çš„åŒ…ï¼Œå…±åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œåˆ†åˆ«æ˜¯ï¼š<strong>é¡¹ç›®åŒ…ã€å…¨å±€åŒ…</strong></p><h5 id="é¡¹ç›®åŒ…"><strong>é¡¹ç›®åŒ…</strong></h5><p>é‚£äº›è¢«å®‰è£…åˆ°é¡¹ç›®çš„ <code>node_modules</code> ç›®å½•ä¸­çš„åŒ…ï¼Œéƒ½æ˜¯<strong>é¡¹ç›®åŒ…</strong>ã€‚</p><p>é¡¹ç›®åŒ…åˆåˆ†ä¸º<strong>ä¸¤ç±»</strong>ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul><li><p><strong>å¼€å‘ä¾èµ–åŒ…</strong>ï¼ˆè¢«è®°å½•åˆ° <code>devDependencies</code> èŠ‚ç‚¹ä¸­çš„åŒ…ï¼Œåªåœ¨å¼€å‘æœŸé—´ä¼šç”¨åˆ°ï¼‰</p></li><li><p><strong>æ ¸å¿ƒä¾èµ–åŒ…</strong>ï¼ˆè¢«è®°å½•åˆ° <code>dependencies</code> èŠ‚ç‚¹ä¸­çš„åŒ…ï¼Œåœ¨å¼€å‘æœŸé—´å’Œé¡¹ç›®ä¸Šçº¿ä¹‹åéƒ½ä¼šç”¨åˆ°ï¼‰</p></li></ul><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220905205321893.png" alt="image-20220905205321893"></p><h5 id="å…¨å±€åŒ…">å…¨å±€åŒ…</h5><p>åœ¨æ‰§è¡Œ <code>npm install</code> å‘½ä»¤æ—¶ï¼Œå¦‚æœæä¾›äº† <code>-g</code> å‚æ•°ï¼Œåˆ™ä¼šæŠŠåŒ…å®‰è£…ä¸ºå…¨å±€åŒ…ã€‚</p><p>å…¨å±€åŒ…ä¼šè¢«å®‰è£…åˆ° <code>C:\Users\ç”¨æˆ·ç›®å½•\AppData\Roaming\npm\node_modules</code> ç›®å½•ä¸‹ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220905205513613.png" alt="image-20220905205513613"></p><blockquote><p><strong>æ³¨æ„ï¼š</strong></p><p>â‘ åªæœ‰<strong>å·¥å…·æ€§è´¨</strong>çš„åŒ…ï¼Œæ‰æœ‰å…¨å±€å®‰è£…çš„å¿…è¦æ€§ï¼Œå› ä¸ºå®ƒä»¬æä¾›äº†å¥½ç”¨çš„ç»ˆç«¯å‘½ä»¤ã€‚</p><p>â‘¡åˆ¤æ–­æŸä¸ªåŒ…æ˜¯å¦éœ€è¦å…¨å±€å®‰è£…åæ‰èƒ½ä½¿ç”¨ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹æä¾›çš„ä½¿ç”¨è¯´æ˜å³å¯ã€‚</p></blockquote><h4 id="è§„èŒƒçš„åŒ…ç»“æ„">è§„èŒƒçš„åŒ…ç»“æ„</h4><p>ä¸€ä¸ªè§„èŒƒçš„åŒ…ï¼Œå®ƒçš„ç»„æˆç»“æ„ï¼Œå¿…é¡»ç¬¦åˆä»¥ä¸‹ 3 ç‚¹è¦æ±‚ï¼š</p><p>â‘  åŒ…å¿…é¡»ä»¥<strong>å•ç‹¬çš„ç›®å½•</strong>è€Œå­˜åœ¨</p><p>â‘¡ åŒ…çš„é¡¶çº§ç›®å½•ä¸‹è¦å¿…é¡»åŒ…å« <code>package.json</code> è¿™ä¸ªåŒ…ç®¡ç†é…ç½®æ–‡ä»¶</p><p>â‘¢ <code>package.json</code> ä¸­å¿…é¡»åŒ…å« <code>nameï¼Œversionï¼Œmain</code> è¿™ä¸‰ä¸ªå±æ€§ï¼Œåˆ†åˆ«ä»£è¡¨åŒ…çš„<strong>åå­—</strong>ã€<strong>ç‰ˆæœ¬å·</strong>ã€<strong>åŒ…çš„å…¥å£</strong>ã€‚</p><h6 id="å¼€å‘å±äºè‡ªå·±çš„åŒ…ï¼ˆå°æ¡ˆä¾‹ï¼‰ï¼š"><strong>å¼€å‘å±äºè‡ªå·±çš„åŒ…ï¼ˆå°æ¡ˆä¾‹ï¼‰</strong>ï¼š</h6><p>éœ€è¦å®ç°çš„åŠŸèƒ½ï¼š</p><p>â‘  æ ¼å¼åŒ–æ—¥æœŸ</p><p>â‘¡ è½¬ä¹‰ HTML ä¸­çš„ç‰¹æ®Šå­—ç¬¦</p><p>â‘¢ è¿˜åŸ HTML ä¸­çš„ç‰¹æ®Šå­—ç¬¦</p><p><strong>æ­¥éª¤</strong>ï¼š</p><ol><li>åˆå§‹åŒ–åŒ…çš„åŸºæœ¬ç»“æ„</li></ol><p>â‘  æ–°å»º itheima-toolsï¼ˆè‡ªå®šä¹‰ï¼‰ æ–‡ä»¶å¤¹ï¼Œä½œä¸ºåŒ…çš„æ ¹ç›®å½•</p><p>â‘¡ åœ¨ itheima-tools æ–‡ä»¶å¤¹ä¸­ï¼Œæ–°å»ºå¦‚ä¸‹ä¸‰ä¸ªæ–‡ä»¶ï¼š</p><ul><li><p>package.json ï¼ˆåŒ…ç®¡ç†é…ç½®æ–‡ä»¶ï¼‰</p></li><li><p>index.js     ï¼ˆåŒ…çš„å…¥å£æ–‡ä»¶ï¼‰</p></li><li><p><a href="http://lREADME.md">lREADME.md</a> ï¼ˆåŒ…çš„è¯´æ˜æ–‡æ¡£ï¼‰</p></li></ul><ol start="2"><li>åˆå§‹åŒ–package.json</li></ol><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220905211405936.png" alt="image-20220905211405936"></p><ol start="3"><li>åœ¨<code>index.js</code>ä¸­å®šä¹‰æ ¼å¼åŒ–æ—¶é—´çš„æ–¹æ³•</li></ol><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220905212033670.png" alt="image-20220905212033670"></p><ol start="4"><li>åœ¨<code>index.js</code>ä¸­å®šä¹‰è½¬ä¹‰<code>HTML</code>çš„æ–¹æ³•</li></ol><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220905212146769.png" alt="image-20220905212146769"></p><ol start="5"><li>åœ¨<code>index.js</code>ä¸­å®šä¹‰è¿˜åŸ<code>HTML</code>çš„æ–¹æ³•</li></ol><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220905212214871.png" alt="image-20220905212214871"></p><ol start="6"><li>å°†ä¸åŒçš„åŠŸèƒ½è¿›è¡Œæ¨¡å—åŒ–æ‹†åˆ†</li></ol><p>â‘  å°†æ ¼å¼åŒ–æ—¶é—´çš„åŠŸèƒ½ï¼Œæ‹†åˆ†åˆ° <code>src -&gt; dateFormat.js</code> ä¸­</p><p>â‘¡ å°†å¤„ç† HTML å­—ç¬¦ä¸²çš„åŠŸèƒ½ï¼Œæ‹†åˆ†åˆ° <code>src -&gt; htmlEscape.js</code> ä¸­</p><p>â‘¢ åœ¨ <code>index.js</code> ä¸­ï¼Œå¯¼å…¥ä¸¤ä¸ªæ¨¡å—ï¼Œå¾—åˆ°éœ€è¦å‘å¤–å…±äº«çš„æ–¹æ³•</p><p>â‘£ åœ¨ <code>index.js</code> ä¸­ï¼Œä½¿ç”¨ <code>module.exports</code> æŠŠå¯¹åº”çš„æ–¹æ³•å…±äº«å‡ºå»</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> date = <span class="built_in">require</span>(<span class="string">&#x27;./src/dateFormat&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">escape</span> = <span class="built_in">require</span>(<span class="string">&#x27;./src/htmlEscape&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">...date,   <span class="comment">// å±•å¼€å¯¹è±¡(å®é™…ä¸ºå°è£…çš„å‡½æ•°)</span></span><br><span class="line">...<span class="built_in">escape</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="8"><li>ç¼–å†™åŒ…çš„è¯´æ˜æ–‡æ¡£</li></ol><p>åŒ…æ ¹ç›®å½•ä¸­çš„ <code>README.md</code> æ–‡ä»¶ï¼Œæ˜¯åŒ…çš„ä½¿ç”¨è¯´æ˜æ–‡æ¡£ã€‚é€šè¿‡å®ƒï¼Œæˆ‘ä»¬å¯ä»¥äº‹å…ˆæŠŠåŒ…çš„ä½¿ç”¨è¯´æ˜ï¼Œä»¥ <code>markdown</code> çš„æ ¼å¼å†™å‡ºæ¥ï¼Œæ–¹ä¾¿ç”¨æˆ·å‚è€ƒã€‚</p><p><code>README</code> æ–‡ä»¶ä¸­å…·ä½“å†™ä»€ä¹ˆå†…å®¹ï¼Œæ²¡æœ‰å¼ºåˆ¶æ€§çš„è¦æ±‚ï¼›åªè¦èƒ½å¤Ÿæ¸…æ™°åœ°æŠŠåŒ…çš„ä½œç”¨ã€ç”¨æ³•ã€æ³¨æ„äº‹é¡¹ç­‰æè¿°æ¸…æ¥šå³å¯ã€‚</p><p>æˆ‘ä»¬æ‰€åˆ›å»ºçš„è¿™ä¸ªåŒ…çš„ <code>README.md</code> æ–‡æ¡£ä¸­ï¼Œä¼šåŒ…å«ä»¥ä¸‹ 6 é¡¹å†…å®¹ï¼š</p><p>å®‰è£…æ–¹å¼ã€å¯¼å…¥æ–¹å¼ã€æ ¼å¼åŒ–æ—¶é—´ã€è½¬ä¹‰ HTML ä¸­çš„ç‰¹æ®Šå­—ç¬¦ã€è¿˜åŸ HTML ä¸­çš„ç‰¹æ®Šå­—ç¬¦ã€å¼€æºåè®®</p><ol start="9"><li>å‘å¸ƒåŒ…</li></ol><p>â‘  è®¿é—® <a href="https://www.npmjs.com/">https://www.npmjs.com/</a> ç½‘ç«™ï¼Œç‚¹å‡» <code>sign up</code> æŒ‰é’®ï¼Œè¿›å…¥æ³¨å†Œç”¨æˆ·ç•Œé¢</p><p>â‘¡ å¡«å†™è´¦å·ç›¸å…³çš„ä¿¡æ¯ï¼š<code>Full Nameã€Public Emailã€Usernameã€Password</code></p><p>â‘¢ ç‚¹å‡» <code>Create an Account</code> æŒ‰é’®ï¼Œæ³¨å†Œè´¦å·</p><p>â‘£ ç™»å½•é‚®ç®±ï¼Œç‚¹å‡»éªŒè¯é“¾æ¥ï¼Œè¿›è¡Œè´¦å·çš„éªŒè¯</p><ol start="10"><li>ç™»å½•npmè´¦å·</li></ol><p><code>npm</code> è´¦å·æ³¨å†Œå®Œæˆåï¼Œå¯ä»¥åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œ <code>npm login</code> å‘½ä»¤ï¼Œä¾æ¬¡è¾“å…¥ç”¨æˆ·åã€å¯†ç ã€é‚®ç®±åï¼Œå³å¯ç™»å½•æˆåŠŸã€‚</p><blockquote><p>æ³¨æ„åœ¨ç™»å½•æ—¶è¦å°†æœåŠ¡å™¨åˆ‡æ¢åˆ°npmå®˜æ–¹æœåŠ¡å™¨ï¼š</p><ul><li><code>nrm ls</code> æ£€æŸ¥è‡ªå·±çš„æœåŠ¡å™¨</li><li><code>nrm use npm</code>åˆ‡æ¢åˆ°npmå®˜æ–¹æœåŠ¡å™¨</li></ul></blockquote><ol start="11"><li>æŠŠåŒ…å‘å¸ƒåˆ°npmä¸Š</li></ol><p>å°†ç»ˆç«¯åˆ‡æ¢åˆ°åŒ…çš„æ ¹ç›®å½•ä¹‹åï¼Œè¿è¡Œ <code>npm publish</code> å‘½ä»¤ï¼Œå³å¯å°†åŒ…å‘å¸ƒåˆ° npm ä¸Šï¼ˆæ³¨æ„ï¼šåŒ…åä¸èƒ½é›·åŒï¼‰</p><ol start="12"><li>åˆ é™¤å·²å‘å¸ƒçš„åŒ…</li></ol><p>è¿è¡Œ <code>npm unpublish</code> åŒ…å <code>--force</code> å‘½ä»¤ï¼Œå³å¯ä» npm åˆ é™¤å·²å‘å¸ƒçš„åŒ…ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/songzhenjin/image/raw/master/img/image-20220905213001664.png" alt="image-20220905213001664"></p><blockquote><p><strong>æ³¨æ„ï¼š</strong></p><p>â‘  <code>npm unpublish</code> å‘½ä»¤åªèƒ½åˆ é™¤ <strong>72</strong> å°æ—¶ä»¥å†…å‘å¸ƒçš„åŒ…</p><p>â‘¡ <code>npm unpublish</code> åˆ é™¤çš„åŒ…ï¼Œåœ¨ <strong>24</strong> å°æ—¶å†…ä¸å…è®¸é‡å¤å‘å¸ƒ</p><p>â‘¢ å‘å¸ƒåŒ…çš„æ—¶å€™è¦æ…é‡ï¼Œå°½é‡ä¸è¦å¾€ npm ä¸Šå‘å¸ƒæ²¡æœ‰æ„ä¹‰çš„åŒ…ï¼</p></blockquote><h4 id="æ¨¡å—çš„åŠ è½½æœºåˆ¶">æ¨¡å—çš„åŠ è½½æœºåˆ¶</h4><h5 id="ä¼˜å…ˆä»ç¼“å­˜ä¸­åŠ è½½">ä¼˜å…ˆä»ç¼“å­˜ä¸­åŠ è½½</h5><p><strong>æ¨¡å—åœ¨ç¬¬ä¸€æ¬¡åŠ è½½åä¼šè¢«ç¼“å­˜</strong>ã€‚ è¿™ä¹Ÿæ„å‘³ç€å¤šæ¬¡è°ƒç”¨ require() ä¸ä¼šå¯¼è‡´æ¨¡å—çš„ä»£ç è¢«æ‰§è¡Œå¤šæ¬¡ã€‚</p><p>**æ³¨æ„ï¼š**ä¸è®ºæ˜¯å†…ç½®æ¨¡å—ã€ç”¨æˆ·è‡ªå®šä¹‰æ¨¡å—ã€è¿˜æ˜¯ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œå®ƒä»¬éƒ½ä¼šä¼˜å…ˆä»ç¼“å­˜ä¸­åŠ è½½ï¼Œä»è€Œæé«˜æ¨¡å—çš„åŠ è½½æ•ˆç‡ã€‚</p><h5 id="å†…ç½®æ¨¡å—çš„åŠ è½½æœºåˆ¶">å†…ç½®æ¨¡å—çš„åŠ è½½æœºåˆ¶</h5><p>å†…ç½®æ¨¡å—æ˜¯ç”± Node.js å®˜æ–¹æä¾›çš„æ¨¡å—ï¼Œ<strong>å†…ç½®æ¨¡å—çš„åŠ è½½ä¼˜å…ˆçº§æœ€é«˜</strong>ã€‚</p><p>ä¾‹å¦‚ï¼Œ<code>require('fs')</code> å§‹ç»ˆè¿”å›å†…ç½®çš„ fs æ¨¡å—ï¼Œå³ä½¿åœ¨ node_modules ç›®å½•ä¸‹æœ‰åå­—ç›¸åŒçš„åŒ…ä¹Ÿå«åš fsã€‚</p><h5 id="è‡ªå®šä¹‰æ¨¡å—çš„åŠ è½½æœºåˆ¶">è‡ªå®šä¹‰æ¨¡å—çš„åŠ è½½æœºåˆ¶</h5><p>ä½¿ç”¨ <code>require()</code> åŠ è½½è‡ªå®šä¹‰æ¨¡å—æ—¶ï¼Œå¿…é¡»æŒ‡å®šä»¥ <code>./</code> æˆ– <code>../</code> å¼€å¤´çš„è·¯å¾„æ ‡è¯†ç¬¦ã€‚åœ¨åŠ è½½è‡ªå®šä¹‰æ¨¡å—æ—¶ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®š <code>./</code> æˆ– <code>../</code> è¿™æ ·çš„è·¯å¾„æ ‡è¯†ç¬¦ï¼Œåˆ™ node ä¼šæŠŠå®ƒå½“ä½œå†…ç½®æ¨¡å—æˆ–ç¬¬ä¸‰æ–¹æ¨¡å—è¿›è¡ŒåŠ è½½ã€‚</p><p>åŒæ—¶ï¼Œåœ¨ä½¿ç”¨ <code>require()</code> å¯¼å…¥è‡ªå®šä¹‰æ¨¡å—æ—¶ï¼Œå¦‚æœçœç•¥äº†æ–‡ä»¶çš„æ‰©å±•åï¼Œåˆ™ <code>Node.js</code> ä¼šæŒ‰é¡ºåºåˆ†åˆ«å°è¯•åŠ è½½ä»¥ä¸‹çš„æ–‡ä»¶ï¼š</p><p>â‘  æŒ‰ç…§ç¡®åˆ‡çš„æ–‡ä»¶åè¿›è¡ŒåŠ è½½</p><p>â‘¡ è¡¥å…¨ <strong>.js</strong> æ‰©å±•åè¿›è¡ŒåŠ è½½</p><p>â‘¢ è¡¥å…¨ <strong>.json</strong> æ‰©å±•åè¿›è¡ŒåŠ è½½</p><p>â‘£ è¡¥å…¨ <strong>.node</strong> æ‰©å±•åè¿›è¡ŒåŠ è½½</p><p>â‘¤ åŠ è½½å¤±è´¥ï¼Œç»ˆç«¯æŠ¥é”™</p><h5 id="ç¬¬ä¸‰æ–¹æ¨¡å—çš„åŠ è½½æœºåˆ¶">ç¬¬ä¸‰æ–¹æ¨¡å—çš„åŠ è½½æœºåˆ¶</h5><p>å¦‚æœä¼ é€’ç»™ <code>require()</code> çš„æ¨¡å—æ ‡è¯†ç¬¦ä¸æ˜¯ä¸€ä¸ªå†…ç½®æ¨¡å—ï¼Œä¹Ÿæ²¡æœ‰ä»¥ <code>./</code>æˆ– <code>../</code>å¼€å¤´ï¼Œåˆ™ <code>Node.js</code> ä¼šä»å½“å‰æ¨¡å—çš„çˆ¶ç›®å½•å¼€å§‹ï¼Œå°è¯•ä» <code>/node_modules</code> æ–‡ä»¶å¤¹ä¸­åŠ è½½ç¬¬ä¸‰æ–¹æ¨¡å—ã€‚</p><p><strong>å¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œåˆ™ç§»åŠ¨åˆ°å†ä¸Šä¸€å±‚çˆ¶ç›®å½•ä¸­ï¼Œè¿›è¡ŒåŠ è½½ï¼Œç›´åˆ°æ–‡ä»¶ç³»ç»Ÿçš„æ ¹ç›®å½•ã€‚</strong></p><p>ä¾‹å¦‚ï¼Œå‡è®¾åœ¨ <code>C:\Users\itheima\project\foo.js</code>æ–‡ä»¶é‡Œè°ƒç”¨äº† <code>require('tools')</code>ï¼Œåˆ™ <code>Node.js</code> ä¼šæŒ‰ä»¥ä¸‹é¡ºåºæŸ¥æ‰¾ï¼š</p><p>â‘  C:\Users\itheima\project\node_modules\tools</p><p>â‘¡ C:\Users\itheima\node_modules\tools</p><p>â‘¢ C:\Users\node_modules\tools</p><p>â‘£ C:\node_modules\tools</p><h5 id="ç›®å½•ä½œä¸ºæ¨¡å—">ç›®å½•ä½œä¸ºæ¨¡å—</h5><p>å½“æŠŠç›®å½•ä½œä¸ºæ¨¡å—æ ‡è¯†ç¬¦ï¼Œä¼ é€’ç»™ <code>require()</code> è¿›è¡ŒåŠ è½½çš„æ—¶å€™ï¼Œæœ‰ä¸‰ç§åŠ è½½æ–¹å¼ï¼š</p><p>â‘  åœ¨è¢«åŠ è½½çš„ç›®å½•ä¸‹æŸ¥æ‰¾ä¸€ä¸ªå«åš <code>package.json</code> çš„æ–‡ä»¶ï¼Œå¹¶å¯»æ‰¾ <code>main</code> å±æ€§ï¼Œä½œä¸º <code>require()</code> åŠ è½½çš„å…¥å£</p><p>â‘¡ å¦‚æœç›®å½•é‡Œæ²¡æœ‰ <code>package.json</code> æ–‡ä»¶ï¼Œæˆ–è€… <code>main</code> å…¥å£ä¸å­˜åœ¨æˆ–æ— æ³•è§£æï¼Œåˆ™ <code>Node.js</code> å°†ä¼šè¯•å›¾åŠ è½½ç›®å½•ä¸‹çš„ <code>index.js</code> æ–‡ä»¶ã€‚</p><p>â‘¢ å¦‚æœä»¥ä¸Šä¸¤æ­¥éƒ½å¤±è´¥äº†ï¼Œåˆ™ <code>Node.js</code> ä¼šåœ¨ç»ˆç«¯æ‰“å°é”™è¯¯æ¶ˆæ¯ï¼ŒæŠ¥å‘Šæ¨¡å—çš„ç¼ºå¤±ï¼š<code>Error: Cannot find module 'xxx'</code></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;Nodejs åŸºç¡€&lt;/h1&gt;
&lt;p&gt;&lt;a href=&quot;https://nodejs.org/en/&quot;&gt;å®˜ç½‘ä¼ é€é—¨&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;åˆè¯†-Nodejs&quot;&gt;åˆè¯† Nodejs&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome </summary>
      
    
    
    
    <category term="åç«¯ğŸŸ" scheme="https://blog.cilicili.xyz/categories/%E5%90%8E%E7%AB%AF%F0%9F%8D%9F/"/>
    
    
    <category term="Node" scheme="https://blog.cilicili.xyz/tags/Node/"/>
    
  </entry>
  
  <entry>
    <title>ã€Pythonã€‘FastApiå¿«é€Ÿå…¥é—¨</title>
    <link href="https://blog.cilicili.xyz/posts/bae2c202.html"/>
    <id>https://blog.cilicili.xyz/posts/bae2c202.html</id>
    <published>2022-08-10T02:58:05.796Z</published>
    <updated>2022-09-09T09:36:05.440Z</updated>
    
    <content type="html"><![CDATA[<h1>FastApiå¿«é€Ÿå…¥é—¨</h1><h3 id="å¼€å¯æœåŠ¡å’Œè®¿é—®æ¥å£">å¼€å¯æœåŠ¡å’Œè®¿é—®æ¥å£</h3><p>1.é¦–å…ˆåœ¨<code>Terminalç»ˆç«¯</code>ä¸­è¿›å…¥<code>/venv/scripts/activate.bat</code>ï¼Œå®‰è£…<code>pip install fastapi[all]</code></p><blockquote><p><code>[all]</code>ç›¸å½“äºå®‰è£…äº†ä¸»è¦çš„<code>fastapi</code>+æœåŠ¡å™¨<code>uvicorn</code>+å…¶å®ƒ</p></blockquote><p>2.é…ç½®<code>python</code>è§£é‡Šå™¨</p><p>3.å¯¼å…¥<code>fastapi</code>ï¼Œ<code>from fastapi import FastAPI</code></p><p>4.åˆå§‹åŒ–appå¯¹è±¡ï¼Œ<code>app = FastAPI()</code></p><p>5.è¿è¡Œæ–‡ä»¶</p><p>â‘ å¡«å…¥ä¸‹æ–¹ä»£ç ï¼Œå¹¶è¾“å…¥<code>python test.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> uvicorn</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">uvicorn.run(app)</span><br></pre></td></tr></table></figure><p>â‘¡<code>uvicorn test:app --reload</code>  <strong>å¸¸ç”¨å‘½ä»¤</strong></p><p>6.æ·»åŠ é¦–é¡µæ¥å£ï¼Œå½“é¡µé¢ä¸­æ‰“å¼€<code>&quot;/&quot;</code>é¡µé¢æ—¶ï¼Œè¿è¡Œ<code>index()</code>å‡½æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/&quot;</span></span>)</span><span class="comment"># Pythonè£…é¥°å™¨</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;This is Home Page.&quot;</span></span><br></pre></td></tr></table></figure><h3 id="è¿”å›jsonæ•°æ®å’Œæ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ">è¿”å›jsonæ•°æ®å’Œæ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ</h3><p>1.å¡«å…¥ä¸‹æ–¹ä»£ç ï¼Œå³å¯ç”Ÿæˆå¯¹åº”çš„<code>json</code>æ•°æ®ï¼ˆæ¨èä½¿ç”¨<code>FireFox</code>æµè§ˆå™¨ï¼Œæ›´æ–¹ä¾¿æŸ¥çœ‹jsonæ•°æ®ç»“æ„ï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/users&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">users</span>():</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;msg&quot;</span>: <span class="string">&quot;Get all users&quot;</span>, <span class="string">&quot;code&quot;</span>:<span class="number">2001</span>&#125;</span><br></pre></td></tr></table></figure><p>2.å¡«å…¥ä¸‹æ–¹ä»£ç ï¼Œè¿”å›<code>é“¾è¡¨</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/projects&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">projects</span>():</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;é¡¹ç›®1&quot;</span>,<span class="string">&quot;é¡¹ç›®2&quot;</span>,<span class="string">&quot;é¡¹ç›®3&quot;</span>&#125;</span><br></pre></td></tr></table></figure><h4 id="è°ƒè¯•é¢æ¿">è°ƒè¯•é¢æ¿</h4><p>åœ¨<code>urlåœ°å€</code>ä¸­è¾“å…¥<code>127.0.0.1:8000/docs</code>ï¼Œå°±å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„<code>API</code>æ¥å£å¹¶æä¾›æµ‹è¯•åŠŸèƒ½ã€‚</p><blockquote><p>æ¥å£ä¸‹æ–¹â€”â€”&gt;<code>Try it out</code>â€”â€”&gt;<code>Execute</code></p><p>å¾—åˆ°ï¼š<code>Curlå‘½ä»¤è¡Œ</code>ç›¸å…³å‚æ•°ã€<code>URL</code>åœ°å€ã€<code>å“åº”ç»“æœ</code></p></blockquote><h3 id="å‘é€POSTè¯·æ±‚">å‘é€POSTè¯·æ±‚</h3><p>1.<code>post</code>è¯·æ±‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.post(<span class="params"><span class="string">&quot;/login&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line"><span class="keyword">return</span> &#123;<span class="string">&quot;msg&quot;</span>: <span class="string">&quot;login success&quot;</span>&#125;</span><br></pre></td></tr></table></figure><p>åœ¨<code>æµè§ˆå™¨F12</code>çš„<code>ç½‘ç»œ</code>ä¸­å‘ç°æŠ¥äº†<code>405é”™è¯¯</code>ï¼Œæ˜¯å› ä¸ºä¼ é€’çš„æ˜¯<code>GET</code>è¯·æ±‚</p><p>æ­¤æ—¶ï¼Œä½¿ç”¨<code>Postman</code>æµ‹è¯•å·¥å…·è¿›è¡Œæµ‹è¯•</p><p>2.åŒæ—¶æ”¯æŒ<code>GET</code>ã€<code>POST</code>ã€<code>PUT</code>è¯·æ±‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.api_route(<span class="params"><span class="string">&quot;/login&quot;</span>, methods=(<span class="params"><span class="string">&quot;GET&quot;</span>,<span class="string">&quot;POST&quot;</span>,<span class="string">&quot;PUT&quot;</span></span>)</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line"><span class="keyword">return</span> &#123;<span class="string">&quot;msg&quot;</span>: <span class="string">&quot;login success&quot;</span>&#125;</span><br></pre></td></tr></table></figure><h3 id="è·å–URLå‚æ•°">è·å–URLå‚æ•°</h3><p>1.ä½¿ç”¨<code>&#123;&#125;</code>åŠ¨æ€è·å¾—å‚æ•°ï¼Œå¦‚æœæŠ¥é”™ï¼Œè¯·é‡æ–°å¯åŠ¨æœåŠ¡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/user/&#123;id&#125;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user</span>(<span class="params"><span class="built_in">id</span></span>):</span><br><span class="line"><span class="keyword">return</span> &#123;<span class="string">&quot;id&quot;</span>: <span class="string">&quot;id&quot;</span>&#125;</span><br></pre></td></tr></table></figure><p>2.åœ¨<code>url</code>ä¸­æ·»åŠ <code>?id=8</code>ï¼ŒåŒæ ·å¯ä»¥å¾—åˆ°<code>id</code>çš„å‚æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/user&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user</span>(<span class="params"><span class="built_in">id</span></span>):</span><br><span class="line"><span class="keyword">return</span> &#123;<span class="string">&quot;id&quot;</span>: <span class="built_in">id</span>&#125;</span><br></pre></td></tr></table></figure><h3 id="è·å–è¯·æ±‚å¤´å’Œè¯·æ±‚ä½“çš„å‚æ•°">è·å–è¯·æ±‚å¤´å’Œè¯·æ±‚ä½“çš„å‚æ•°</h3><p>1.ä¾‹å¦‚æ¥å—<strong>è¯·æ±‚å¤´</strong>ä¸­çš„<code>token</code>å­—æ®µæ¥ä¼ é€’<code>token</code>å‚æ•°ï¼ˆå¿…é¡»ä¿æŒä¸€è‡´ï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> Header <span class="comment"># å¼•å…¥è¯·æ±‚å¤´</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨pythoné»˜è®¤å‚æ•°æœºåˆ¶</span></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/user&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user</span>(<span class="params"><span class="built_in">id</span>, token = Header(<span class="params"><span class="literal">None</span></span>)</span>):  <span class="comment"># æ¥æ”¶çš„å˜é‡å¿…é¡»ç›¸åŒ</span></span><br><span class="line"><span class="keyword">return</span> &#123;<span class="string">&quot;id&quot;</span>: <span class="built_in">id</span>, <span class="string">&quot;token&quot;</span>: token&#125;</span><br></pre></td></tr></table></figure><p>2.ä½¿ç”¨<strong>è¯·æ±‚ä½“Body</strong>æ–¹æ³•ä¼ é€’å‚æ•°</p><p>â‘ ä¼ é€’<code>json</code>æ•°æ®</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;song&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;song&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> Body <span class="comment"># å¼•å…¥è¯·æ±‚ä½“</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.post(<span class="params"><span class="string">&quot;/user&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user</span>(<span class="params">data=Body(<span class="params"><span class="literal">None</span></span>)</span>): <span class="comment"># æ¥æ”¶çš„å˜é‡å¯ä»¥ä¸åŒ</span></span><br><span class="line"><span class="keyword">return</span> &#123;<span class="string">&quot;data&quot;</span>: data&#125;</span><br></pre></td></tr></table></figure><p>â‘¡ä¼ é€’<code>formè¡¨å•</code>å½¢å¼æ•°æ®</p><table><thead><tr><th style="text-align:center">username</th><th style="text-align:center">song</th></tr></thead><tbody><tr><td style="text-align:center">password</td><td style="text-align:center">song</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> Form <span class="comment"># å¼•å…¥Formè¡¨å•ç±»</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.post(<span class="params"><span class="string">&quot;/login&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span><span class="title function_">login</span>(<span class="params">username=Form(<span class="params"><span class="literal">None</span></span>),password=Form(<span class="params"><span class="literal">None</span></span>)</span>): <span class="comment"># æ¥æ”¶çš„å˜é‡å¿…é¡»ç›¸åŒ</span></span><br><span class="line"><span class="keyword">return</span> &#123;<span class="string">&quot;data&quot;</span>: &#123;<span class="string">&quot;username&quot;</span>: username,<span class="string">&quot;password&quot;</span>: password&#125;&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œä¹‹å‰ï¼Œé¦–å…ˆå®‰è£…<code>pip install python-multipart</code>ï¼Œå†é‡æ–°å¯åŠ¨æœåŠ¡</p><h3 id="ä¿®æ”¹å“åº”çŠ¶æ€ç ">ä¿®æ”¹å“åº”çŠ¶æ€ç </h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi.responses <span class="keyword">import</span> JSONResponse, HTMLResponse, FileResponse   </span><br><span class="line"></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/user&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user</span>():</span><br><span class="line"><span class="keyword">return</span> JSONResponse(content=&#123;<span class="string">&quot;msg&quot;</span>:<span class="string">&quot;get user&quot;</span>&#125;,</span><br><span class="line">                       status_code=<span class="number">202</span>,</span><br><span class="line">                       headers=&#123;<span class="string">&quot;a&quot;</span>:<span class="string">&quot;b&quot;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user</span>():</span><br><span class="line">    html_content = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    &lt;html&gt;</span></span><br><span class="line"><span class="string">    &lt;body&gt;</span></span><br><span class="line"><span class="string">    &lt;p style=&quot;color:red&quot;&gt;</span></span><br><span class="line"><span class="string">    Hello World</span></span><br><span class="line"><span class="string">    &lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;/body&gt;</span></span><br><span class="line"><span class="string">    &lt;/html&gt;</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">return</span> HTMLResponse(content=html_content)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…pip install aiofiles</span></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/avatar&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user</span>():</span><br><span class="line">    avatar = <span class="string">&#x27;static/mage.jpg&#x27;</span> <span class="comment"># æ–°å»ºstaticæ–‡ä»¶å¤¹å­˜æ”¾å›¾ç‰‡</span></span><br><span class="line"><span class="keyword">return</span> FileResponse(avatar, filename=<span class="string">&quot;mage.jpg&quot;</span>) <span class="comment"># æ·»åŠ filenameå¯ä»¥ç›´æ¥ä¸‹è½½</span></span><br></pre></td></tr></table></figure><h3 id="jinja2æ¨¡æ¿è¿”å›HTMLé¡µé¢">jinja2æ¨¡æ¿è¿”å›HTMLé¡µé¢</h3><p>æ–°å»º<code>pages/index.html</code>ï¼Œåˆå§‹åŒ–<code>html</code>é¡µé¢</p><p>å®‰è£…<code>pip install jinja2</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> Request</span><br><span class="line"><span class="keyword">from</span> fastapi.templating <span class="keyword">import</span> jinja2Templates <span class="comment"># å¼•å…¥æ¨¡æ¿å¼•æ“</span></span><br><span class="line"></span><br><span class="line">template = Jinja2Templates(<span class="string">&quot;pages&quot;</span>)  <span class="comment"># åˆå§‹åŒ–pageså¯¹è±¡ï¼Œpagesè¡¨ç¤ºhtmlé¡µé¢å­˜æ”¾ä½ç½®</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user</span>(<span class="params">username, req: Request</span>): <span class="comment"># reqå¯ä»¥æ”¹å˜ï¼Œä½†å¿…é¡»ä¼ å…¥Request</span></span><br><span class="line"><span class="keyword">return</span> template.TemplateResponse(<span class="string">&quot;index.html&quot;</span>, context=&#123;<span class="string">&quot;request&quot;</span>: req, <span class="string">&quot;name&quot;</span>: username&#125;) <span class="comment"># &quot;request&quot;ä¹Ÿä¸å…è®¸æ”¹å˜</span></span><br></pre></td></tr></table></figure><p>åœ¨å‰ç«¯é¡µé¢ä¸­,<code>&quot;name&quot;</code>å¯ä»¥é€šè¿‡<code>&#123;&#123; &#125;&#125;</code>è¿›è¡Œæ¥æ”¶ï¼Œä¾‹å¦‚<code>url</code>è¾“å…¥<code>localhost:8000/?username=helloworld</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span> ç”¨æˆ·å: &#123;&#123; name &#125;&#125; <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>å®æˆ˜å°åº”ç”¨ï¼š</strong></p><p>æ·»åŠ æ•°æ®</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> Request, Form</span><br><span class="line"><span class="keyword">from</span> fastapi.responses <span class="keyword">import</span> RedirectResponse <span class="comment"># å¼•å…¥é‡å®šå‘</span></span><br><span class="line"><span class="keyword">from</span> fastapi.templating <span class="keyword">import</span> jinja2Templates </span><br><span class="line"></span><br><span class="line">template = Jinja2Templates(<span class="string">&quot;pages&quot;</span>)  </span><br><span class="line"></span><br><span class="line">todos = [<span class="string">&quot;å†™æ—¥è®°&quot;</span>, <span class="string">&quot;çœ‹ç”µå½±&quot;</span>, <span class="string">&quot;ç©æ¸¸æˆ&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>(<span class="params">req: Request</span>):    </span><br><span class="line"><span class="keyword">return</span> template.TemplateResponse(<span class="string">&quot;index.html&quot;</span>, context=&#123;<span class="string">&quot;request&quot;</span>: req, <span class="string">&quot;todos&quot;</span>: todos&#125;) </span><br><span class="line"></span><br><span class="line"><span class="meta">@app.post(<span class="params"><span class="string">&quot;/todo&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">todo</span>(<span class="params">todo=Form(<span class="params"><span class="literal">None</span></span>)</span>):</span><br><span class="line"><span class="string">&quot;&quot;&quot;å¤„ç†ç”¨æˆ·å‘é€è¿‡æ¥çš„ todolist æ•°æ®&quot;&quot;&quot;</span></span><br><span class="line">todos.insert(<span class="number">0</span>, todo)</span><br><span class="line"><span class="keyword">return</span> RedirectResponse(<span class="string">&quot;/&quot;</span>, status_code=<span class="number">302</span>) <span class="comment"># ç”±äºpostè¯·æ±‚å’Œgetè¯·æ±‚ä¸åŒï¼Œæ‰€ä»¥ä¿®æ”¹çŠ¶æ€ç </span></span><br></pre></td></tr></table></figure><p>å‰ç«¯é¡µé¢</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/todo&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span>  # actionè¡¨ç¤ºä¼ é€’çš„ä½ç½®</span><br><span class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;todo&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·æ·»åŠ å¾…åŠäº‹é¡¹...&quot;</span>&gt;</span> # é€šè¿‡çš„nameå±æ€§çš„å­—æ®µæ¥æ”¶æ•°æ®</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æ·»åŠ &quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span> å¾…åŠäº‹é¡¹ <span class="tag">&lt;/<span class="name">h</span>&gt;</span></span><br><span class="line">&#123;% for todo in todos %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; todo &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure><h3 id="é…ç½®æ•°æ®åº“">é…ç½®æ•°æ®åº“</h3><blockquote><p>ä½¿ç”¨<code>ORMæ¨¡å‹</code>ï¼Œå°†<code>SQL</code>è¯­å¥è½¬åŒ–æˆ<code>Python</code>ä¸­çš„å‡½æ•°ï¼Œ<strong>ç¼–å†™</strong>ã€<strong>æŸ¥è¯¢</strong>å’Œ<strong>æ“ä½œæ•°æ®åº“</strong>æ—¶çš„å¯è¯»æ€§å’Œå®‰å…¨æ€§è¾ƒé«˜ã€‚</p></blockquote><p>1.å®‰è£…<code>pip install tortoise-orm</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> tortoise.contrib.fastapi <span class="keyword">import</span> register_tortoise <span class="comment"># å¼•å…¥</span></span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•°æ®åº“ç»‘å®š</span></span><br><span class="line">register_tortoise(app,</span><br><span class="line">                db_url=<span class="string">&quot;mysql://root:123456@localhost:3306/fastapi&quot;</span>, <span class="comment"># è¿æ¥æ•°æ®åº“çš„åœ°å€,æœ€åæ˜¯åº“å</span></span><br><span class="line">                modules=&#123;<span class="string">&quot;models&quot;</span>:[]&#125;,  <span class="comment"># å°†æ•°æ®åº“ä¸­çš„è¡¨å®šä¹‰ä¸ºå¯¹è±¡</span></span><br><span class="line">                add_exceptionn_handlers=<span class="literal">True</span>,   <span class="comment"># ç”Ÿæˆç»“æ„</span></span><br><span class="line">                generate_schemas=<span class="literal">True</span> <span class="comment"># é”™è¯¯å¤„ç†</span></span><br><span class="line">                 )</span><br></pre></td></tr></table></figure><h3 id="æ•°æ®åº“æŸ¥è¯¢">æ•°æ®åº“æŸ¥è¯¢</h3><p>æ–°å»º<code>python package</code>ï¼Œå‘½åä¸º<code>dao</code>(æ•°æ®åº“æ“ä½œç¼©å†™)ï¼Œå†æ–°å»º<code>dao/models.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> tortoise <span class="keyword">import</span> Model, fields</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Todo</span>(<span class="title class_ inherited__">Model</span>):  <span class="comment"># ä»£è¡¨æ•°æ®åº“ä¸­çš„è¡¨ todo ,ç»§æ‰¿Modelç±»</span></span><br><span class="line">    <span class="built_in">id</span> = fields.IntField(pk=<span class="literal">True</span>)  <span class="comment"># å®šä¹‰ä¸ºIntç±»å‹ï¼Œpkè¡¨ç¤ºä¸»é”®</span></span><br><span class="line">    content = fields.CharField(max_length=<span class="number">500</span>)  <span class="comment"># å†…å®¹</span></span><br><span class="line">    created_at = fields.DatetimeField(auto_now_add=<span class="literal">True</span>)  <span class="comment"># åˆ›å»ºæ—¶é—´</span></span><br><span class="line">    updated_at = fields.DatetimeField(auto_now=<span class="literal">True</span>)<span class="comment"># æ›´æ–°æ—¶é—´</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>å®æˆ˜å°åº”ç”¨è¿›é˜¶</strong></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> Request, Form</span><br><span class="line"><span class="keyword">from</span> fastapi.responses <span class="keyword">import</span> RedirectResponse </span><br><span class="line"><span class="keyword">from</span> fastapi.templating <span class="keyword">import</span> jinja2Templates </span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> dao.models <span class="keyword">import</span> Todo <span class="comment"># å¯¼å…¥ç±»</span></span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line">template = Jinja2Templates(<span class="string">&quot;pages&quot;</span>)  </span><br><span class="line"></span><br><span class="line">register_tortoise(app,</span><br><span class="line">               db_url=<span class="string">&quot;mysql://root:123456@localhost:3306/fastapi&quot;</span>, </span><br><span class="line">               modules=&#123;<span class="string">&quot;models&quot;</span>:[<span class="string">&#x27;dao.models&#x27;</span>]&#125;,  </span><br><span class="line">             add_exceptionn_handlers=<span class="literal">True</span>,   </span><br><span class="line">             generate_schemas=<span class="literal">True</span>) </span><br><span class="line"></span><br><span class="line">todos = [<span class="string">&quot;å†™æ—¥è®°&quot;</span>, <span class="string">&quot;çœ‹ç”µå½±&quot;</span>, <span class="string">&quot;ç©æ¸¸æˆ&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">index</span>(<span class="params">req: Request</span>):  <span class="comment"># æ·»åŠ å¼‚æ­¥async</span></span><br><span class="line"><span class="comment"># ORM ,è·å–æ‰€æœ‰çš„ todos</span></span><br><span class="line">todos = <span class="keyword">await</span> Todo.<span class="built_in">all</span>()<span class="comment"># æ·»åŠ await  # todosæœ¬è´¨æ˜¯ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="keyword">return</span> template.TemplateResponse(<span class="string">&quot;index.html&quot;</span>, context=&#123;<span class="string">&quot;request&quot;</span>: req, <span class="string">&quot;todos&quot;</span>: todos&#125;) </span><br><span class="line"></span><br><span class="line"><span class="meta">@app.post(<span class="params"><span class="string">&quot;/todo&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">todo</span>(<span class="params">content=Form(<span class="params"><span class="literal">None</span></span>)</span>):   <span class="comment"># ç”±äºtodoå‚æ•°å’Œå‡½æ•°åé‡å¤ï¼Œå°†todoå‚æ•°æ”¹æˆcontentï¼Œå‰ç«¯nameä¹Ÿè¦æ›´æ”¹</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;å¤„ç†ç”¨æˆ·å‘é€è¿‡æ¥çš„ todolist æ•°æ®&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># æŠŠæ–°çš„äº‹é¡¹å­˜å‚¨åˆ°æ•°æ®åº“å½“ä¸­</span></span><br><span class="line"><span class="keyword">await</span> Todo(content=content).save()</span><br><span class="line"><span class="keyword">return</span> RedirectResponse(<span class="string">&quot;/&quot;</span>, status_code=<span class="number">302</span>) </span><br></pre></td></tr></table></figure><p>åœ¨å‰ç«¯é¡µé¢ä¸­ä¿®æ”¹ä»£ç ï¼Œå°±å¯ä»¥çœ‹åˆ°æ•ˆæœå•¦~</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% for todo in todos %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; todo.content &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure><h3 id="æ•°æ®åº“è¿‡æ»¤æŸ¥è¯¢">æ•°æ®åº“è¿‡æ»¤æŸ¥è¯¢</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.post(<span class="params"><span class="string">&quot;/search&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">search</span>(<span class="params">req: Request, keyword=Form(<span class="params"><span class="literal">None</span></span>)</span>):</span><br><span class="line"><span class="comment"># æŸ¥è¯¢åŒ…å«keywordçš„æ‰€æœ‰çºªå¾‹</span></span><br><span class="line">search_results =<span class="keyword">await</span> Todo.<span class="built_in">filter</span>(content__icontains=keyword).<span class="built_in">all</span>()</span><br><span class="line"><span class="keyword">return</span> template.TemplateResponse(<span class="string">&quot;search_result.html&quot;</span>,context=&#123;<span class="string">&quot;request&quot;</span>: req,<span class="string">&quot;search_results&quot;</span>: search_&#125;)</span><br></pre></td></tr></table></figure><hr><blockquote><p>æ•™ç¨‹æ¥æºäºBç«™<a href="https://www.bilibili.com/video/BV1RS4y1U7GZ?p=1&amp;vd_source=f5b24b9dd30b3acd2bf669dccabe17d6">é›¨æ³½è€å¸ˆ</a>ï¼Œæœ¬æ–‡ç« ç”¨äºè®°å½•ã€‚</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;FastApiå¿«é€Ÿå…¥é—¨&lt;/h1&gt;
&lt;h3 id=&quot;å¼€å¯æœåŠ¡å’Œè®¿é—®æ¥å£&quot;&gt;å¼€å¯æœåŠ¡å’Œè®¿é—®æ¥å£&lt;/h3&gt;
&lt;p&gt;1.é¦–å…ˆåœ¨&lt;code&gt;Terminalç»ˆç«¯&lt;/code&gt;ä¸­è¿›å…¥&lt;code&gt;/venv/scripts/activate.bat&lt;/code&gt;ï¼Œå®‰è£…&lt;code&gt;pip</summary>
      
    
    
    
    <category term="åç«¯ğŸŸ" scheme="https://blog.cilicili.xyz/categories/%E5%90%8E%E7%AB%AF%F0%9F%8D%9F/"/>
    
    
    <category term="FastApi" scheme="https://blog.cilicili.xyz/tags/FastApi/"/>
    
    <category term="Python" scheme="https://blog.cilicili.xyz/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>ã€å‰ç«¯ã€‘Vue3.2å®ç°åå°ç®¡ç†ç³»ç»Ÿï¼ˆä¸€ï¼‰</title>
    <link href="https://blog.cilicili.xyz/posts/5b0e50ed.html"/>
    <id>https://blog.cilicili.xyz/posts/5b0e50ed.html</id>
    <published>2022-08-01T06:52:38.000Z</published>
    <updated>2022-09-19T02:58:55.146Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç™»å½•åŠŸèƒ½">ç™»å½•åŠŸèƒ½</h3><h3 id="åˆ›å»ºViteé¡¹ç›®">åˆ›å»ºViteé¡¹ç›®</h3><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://cn.vitejs.dev/">Vite</a></p><p>Viteæ˜¯ä¸€ä¸ªwebå¼€å‘æ„å»ºå·¥å…·ï¼Œç”±äºå…¶åŸç”ŸESæ¨¡å—å¯¼å…¥æ–¹å¼ï¼Œå¯ä»¥å®ç°é—ªç”µèˆ¬çš„å†·æœåŠ¡å™¨å¯åŠ¨ï¼Œ</p><p>é€šè¿‡åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨Viteå¿«é€Ÿæ„å»ºVueé¡¹ç›®ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># npm 7+</span></span><br><span class="line">npm init vite@latest &lt;project-name&gt; -- --template vue</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> &lt;project-name&gt;</span><br><span class="line"></span><br><span class="line">npm install</span><br><span class="line"></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><h3 id="å¼•å…¥element-plusç»„ä»¶åº“">å¼•å…¥element-plusç»„ä»¶åº“</h3><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://element-plus.org">element-plus</a></p><p>1.åœ¨vscodeä¸­æ‰“å¼€å‘½ä»¤è¡Œç»ˆç«¯è¾“å…¥<code>npm install element-plus --save</code>å¼•å…¥ç»„ä»¶åº“</p><p>2.åœ¨<code>src</code>æ–‡ä»¶ä¸‹çš„<code>main.js</code>ä¸­å¼•å…¥</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">ElementPlus</span> <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-plus/dist/index.css&#x27;</span></span><br></pre></td></tr></table></figure><p>å¼•å…¥åç»“æœï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">// element-plus</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ElementPlus</span> <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"><span class="comment">// element-plusçš„æ ·å¼åº“</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-plus/dist/index.css&#x27;</span>  </span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./style.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title class_">ElementPlus</span>)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><p>åœ¨App.vueä¸­è¿›è¡Œè¿›è¡Œè¯•éªŒæ˜¯å¦å¼•å…¥æˆåŠŸã€‚</p><h3 id="å¼•å…¥Windi-CSSå·¥å…·åº“">å¼•å…¥Windi CSSå·¥å…·åº“</h3><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://cn.windicss.org/">Windi CSS</a></p><p>1.åœ¨vscodeä¸­è¾“å…¥å®‰è£…å‘½ä»¤<code>npm i -D vite-plugin-windicss windicss</code></p><p>2.åœ¨<code>vite.config.js</code>ä¸­å¼•å…¥</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">WindiCSS</span> <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-windicss&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="title class_">WindiCSS</span>(),</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3.åœ¨<code>main.js</code>ä¸­å¼•å…¥<code>import 'virtual:windi.css'</code></p><h3 id="å¼•å…¥vue-router-4">å¼•å…¥vue-router@4</h3><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://router.vuejs.org/">Vue-router@4</a></p><p>1.åœ¨vscodeä¸­è¾“å…¥å®‰è£…å‘½ä»¤<code>npm install vue-router@4</code></p><p>2.åœ¨<code>src</code>æ–‡ä»¶å¤¹ä¸‹åˆ›å»º<code>router</code>æ–‡ä»¶å¤¹ï¼Œå†åœ¨å…¶ä¸‹é¢åˆ›å»º<code>index.js</code>æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸­å¡«å†™ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.å¼•å…¥è·¯ç”±ç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  createRouter,</span><br><span class="line">  createWebHashHistory</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. å®šä¹‰ä¸€äº›è·¯ç”±</span></span><br><span class="line"><span class="comment">// æ¯ä¸ªè·¯ç”±éƒ½éœ€è¦æ˜ å°„åˆ°ä¸€ä¸ªç»„ä»¶ã€‚</span></span><br><span class="line"><span class="keyword">const</span> routes = []</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. åˆ›å»ºè·¯ç”±å®ä¾‹å¹¶ä¼ é€’ `routes` é…ç½®</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHashHistory</span>(), <span class="comment">// 4. å†…éƒ¨æä¾›äº† history æ¨¡å¼çš„å®ç°ã€‚ä¸ºäº†ç®€å•èµ·è§æˆ‘ä»¬é‡‡ç”¨hashæ¨¡å¼</span></span><br><span class="line">  routes <span class="comment">// `routes: routes` çš„ç¼©å†™</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†å…¶æš´éœ²å‡ºæ¥</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><p>åœ¨<code>main.js</code>ä¸­è¿›è¡Œå¼•å…¥<code>import router from './router'</code> ï¼Œç„¶åæŒ‚è½½æ ¹å®ä¾‹ååœ¨æ–‡ä»¶ä¸­åŠ å…¥<code>app.use(router)</code>ã€‚</p><h3 id="è·¯ç”±é…ç½®å’Œ404é¡µé¢æ•è·">è·¯ç”±é…ç½®å’Œ404é¡µé¢æ•è·</h3><p>1.é…ç½®<code>src</code>åˆ«åï¼Œæ–¹ä¾¿åæœŸä½¿ç”¨ï¼ˆé‡‡ç”¨viteå®˜ç½‘é…ç½®ä¸­çš„<code>resolve.alias</code>æ–¹æ³•ï¼‰</p><p>åœ¨<code>vite.config.js</code>ä¸­å¼•å…¥<code>path</code>æ¨¡å—<code>import path from &quot;path&quot;</code>ï¼ˆä¸»è¦æ˜¯ä¸ºäº†å¤„ç†è·¯å¾„ç›¸å…³é—®é¢˜ï¼‰</p><p>æœ€ååœ¨é…ç½®ä¸­å°†<code>~</code>æŒ‡å®šåˆ°<code>src</code>è·¯å¾„ä¸‹</p><blockquote><p><code>__dirname</code>å¯ä»¥æ‹¿åˆ°å½“å‰ç›®å½•çš„è·¯å¾„</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">WindiCSS</span> <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-windicss&#x27;</span></span><br><span class="line"></span><br><span class="line">+ <span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&quot;path&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">+  <span class="attr">resolve</span>: &#123;</span><br><span class="line">+    <span class="attr">alias</span>: &#123;</span><br><span class="line">+      <span class="string">&quot;~&quot;</span>:path.<span class="title function_">resolve</span>(__dirname,<span class="string">&quot;src&quot;</span>)</span><br><span class="line">+    &#125;</span><br><span class="line">+  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>(),<span class="title class_">WindiCSS</span>()]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>2.åœ¨<code>src</code>ä¸‹é¢æ–°å»º<code>pages</code>æ–‡ä»¶å¤¹ï¼ŒåŒæ—¶æ–°å»º<code>index.vue</code>ä½œä¸ºåå°é¦–é¡µ</p><p>3.åœ¨<code>index.js</code>ä¸­é…ç½®è·¯ç”±</p><p>â‘  å°†åå°é¦–é¡µå¼•å…¥<code>import Index from '~/pages/index.vue'</code></p><p>â‘¡ åœ¨<code>routes</code>çš„æ•°ç»„ä¸­æŒ‡å®š<code>path</code>è·¯å¾„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Index</span></span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><p>â‘¢ åœ¨<code>App.vue</code>ä¸­åŠ å…¥<code>&lt;router-view&gt;&lt;/router-view&gt;</code>ç»„ä»¶</p><p>â‘£ä»¥ç›¸åŒæ–¹æ³•åŠ å…¥<code>abouté¡µé¢</code>å’Œ<code>404é¡µé¢</code></p><p><strong>æœ€ç»ˆ<code>index.js</code>ä¸­ä»£ç å¦‚ä¸‹ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; </span><br><span class="line">  createRouter,</span><br><span class="line">  createWebHashHistory</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Index</span> <span class="keyword">from</span> <span class="string">&#x27;~/pages/index.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;~/pages/about.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">NotFound</span> <span class="keyword">from</span> <span class="string">&#x27;~/pages/404.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Index</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">About</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/:pathMatch(.*)*&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;NotFound&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">NotFound</span></span><br><span class="line">  &#125;,]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="comment">// 4. å†…éƒ¨æä¾›äº† history æ¨¡å¼çš„å®ç°ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨ hash æ¨¡å¼ã€‚</span></span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHashHistory</span>(),</span><br><span class="line">  routes, <span class="comment">// `routes: routes` çš„ç¼©å†™</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><p><strong><code>404.vue</code>é¡µé¢çš„é…ç½®ä¿¡æ¯ï¼š</strong></p><p>é‡‡ç”¨<code>element-plus</code>ä¸­çš„<code>resultç»„ä»¶</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;el-result icon=&quot;warning&quot; title=&quot;404æç¤º&quot; sub-title=&quot;ä½ æ‰¾çš„é¡µé¢èµ°ä¸¢äº†&quot;&gt;</span><br><span class="line">      &lt;template #extra&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;$router.push(&#x27;/&#x27;)&quot;&gt;å›åˆ°é¦–é¡µ&lt;/el-button&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/el-result&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><blockquote><p><strong>æŠ¥é”™ä¿¡æ¯å¤„ç†ï¼š</strong></p><p><code>404.vue</code>é¡µé¢ä¸­çš„<code>@click=&quot;$router.push('/')</code>å‡ºç°**$ç±»å‹é”™è¯¯**</p></blockquote><p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p><p>åœ¨srcç›®å½•ä¸‹ä¸­æ–°å¢xxx.d.tsæ–‡ä»¶ï¼Œé‡å¯vscode</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span>, &#123; <span class="title class_">Route</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span>;</span><br><span class="line">declare <span class="variable language_">module</span> <span class="string">&#x27;vue/types/vue&#x27;</span> &#123;</span><br><span class="line">interface <span class="title class_">Vue</span> &#123;</span><br><span class="line"><span class="attr">$api</span>: any</span><br><span class="line"><span class="attr">$http</span>: any</span><br><span class="line"><span class="attr">$router</span>: <span class="title class_">VueRouter</span></span><br><span class="line"><span class="attr">$route</span>: <span class="title class_">Route</span></span><br><span class="line"><span class="attr">$Message</span>: any</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure><h3 id="ç™»å½•é¡µå¼€å‘">ç™»å½•é¡µå¼€å‘</h3><p>1.åœ¨<code>pages</code>æ–‡ä»¶å¤¹ä¸‹æ–°å»º<code>login.vue</code>æ–‡ä»¶ä½œä¸ºç™»å½•é¡µé¢ã€‚</p><p>ç™»å½•é¡µé¢é‡‡ç”¨<code>element-plus</code>ç»„ä»¶åº“ä¸­çš„<a href="https://element-plus.org/zh-CN/component/layout.html">Layoutå¸ƒå±€</a></p><blockquote><p><strong>Layoutå¸ƒå±€</strong></p><p>é€šè¿‡åŸºç¡€çš„ 24 åˆ†æ ï¼Œè¿…é€Ÿç®€ä¾¿åœ°åˆ›å»ºå¸ƒå±€ã€‚</p><p>ç»„ä»¶é»˜è®¤ä½¿ç”¨ Flex å¸ƒå±€ï¼Œä¸éœ€è¦æ‰‹åŠ¨è®¾ç½® <code>type=&quot;flex&quot;</code>ã€‚</p><p>è¯·æ³¨æ„çˆ¶å®¹å™¨é¿å…ä½¿ç”¨ <code>inline</code> ç›¸å…³æ ·å¼ï¼Œä¼šå¯¼è‡´ç»„ä»¶å®½åº¦ä¸èƒ½æ’‘æ»¡ã€‚</p></blockquote><p>2.<code>login.vue</code>æ–‡ä»¶å®Œæ•´ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-row class=&quot;min-h-screen min-w-screen bg-indigo-500&quot;&gt;</span><br><span class="line">    &lt;el-col :lg=&quot;16&quot; :md=&quot;12&quot; class=&quot;flex items-center justify-center&quot;&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;div class=&quot;font-bold text-5xl text-light-50 mb-4&quot;&gt;æ¬¢è¿å…‰ä¸´&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;text-gray-200 text-sm&quot;&gt;æ­¤ç«™ç‚¹æ˜¯ã€Švue3 + viteå®æˆ˜ç¢³ç”Ÿäº§ç‡ç³»ç»Ÿã€‹çš„æ¼”ç¤ºåœ°å€&lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/el-col&gt;</span><br><span class="line">    &lt;el-col :lg=&quot;8&quot; :md=&quot;12&quot; class=&quot;bg-light-50 flex items-center justify-center flex-col&quot;&gt;</span><br><span class="line">      &lt;h2 class=&quot;font-bold text-3xl text-gray-800&quot;&gt;æ¬¢è¿å›æ¥&lt;/h2&gt;</span><br><span class="line">      &lt;div class=&quot;flex items-center justify-center my-5 text-gray-300 space-x-2&quot;&gt;</span><br><span class="line">        &lt;span class=&quot;h-[1px] w-16 bg-gray-200&quot;&gt;&lt;/span&gt;</span><br><span class="line">        &lt;span&gt;è´¦å·å¯†ç ç™»å½•&lt;/span&gt;</span><br><span class="line">        &lt;span class=&quot;h-[1px] w-16 bg-gray-200&quot;&gt;&lt;/span&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;el-form :model=&quot;form&quot; class=&quot;w-[250px]&quot;&gt;</span><br><span class="line">        &lt;el-form-item&gt;</span><br><span class="line">          &lt;el-input v-model=&quot;form.username&quot; placeholder=&quot;è¯·è¾“å…¥ç”¨æˆ·å&quot;&gt;</span><br><span class="line">            &lt;template #prefix&gt;</span><br><span class="line">              &lt;el-icon&gt;</span><br><span class="line">                &lt;user /&gt;</span><br><span class="line">              &lt;/el-icon&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">          &lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item&gt;</span><br><span class="line">          &lt;el-input v-model=&quot;form.password&quot; placeholder=&quot;è¯·è¾“å…¥å¯†ç &quot;&gt;</span><br><span class="line">            &lt;template #prefix&gt;</span><br><span class="line">              &lt;el-icon&gt;</span><br><span class="line">                &lt;lock /&gt;</span><br><span class="line">              &lt;/el-icon&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">          &lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item&gt;</span><br><span class="line">          &lt;el-button round color=&quot;#626aef&quot; class=&quot;w-[250px]&quot; type=&quot;primary&quot; @click=&quot;onSubmit&quot;&gt;ç™» å½•&lt;/el-button&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/el-form&gt;</span><br><span class="line">    &lt;/el-col&gt;</span><br><span class="line">  &lt;/el-row&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; reactive &#125; from &#x27;vue&#x27;</span><br><span class="line">// do not use same name with ref</span><br><span class="line">const form = reactive(&#123;</span><br><span class="line">  username: &quot;&quot;,</span><br><span class="line">  password: &quot;&quot;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">const onSubmit = () =&gt; &#123;</span><br><span class="line">  console.log(&#x27;submit!&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="å…¨å±€å¼•å…¥å›¾æ ‡">å…¨å±€å¼•å…¥å›¾æ ‡</h3><p>1.ä½¿ç”¨åŒ…ç®¡ç†å™¨å¼•å…¥ <code>npm install @element-plus/icons-vue</code></p><p>2.åœ¨<code>main.js</code>ä¸­è¿›è¡Œå…¨å±€æ³¨å†Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">ElementPlusIconsVue</span> <span class="keyword">from</span> <span class="string">&#x27;@element-plus/icons-vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> [key, component] <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">entries</span>(<span class="title class_">ElementPlusIconsVue</span>)) &#123;</span><br><span class="line">  app.<span class="title function_">component</span>(key, component)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3.åœ¨<code>login.vue</code>ä¸­åŠ å…¥æ’æ§½å¹¶å¡«å…¥å›¾æ ‡</p><p>ä½¿ç”¨æ’æ§½å¡«å…¥å›¾æ ‡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-input v-model=&quot;form.username&quot; placeholder=&quot;è¯·è¾“å…¥ç”¨æˆ·å&quot;&gt;</span><br><span class="line">+    &lt;template #prefix&gt;  </span><br><span class="line">+       &lt;el-icon&gt;</span><br><span class="line">+          &lt;user /&gt;</span><br><span class="line">+       &lt;/el-icon&gt;</span><br><span class="line">+    &lt;/template&gt;</span><br><span class="line">&lt;/el-input&gt;</span><br><span class="line"> &lt;el-input v-model=&quot;form.password&quot; placeholder=&quot;è¯·è¾“å…¥å¯†ç &quot;&gt;</span><br><span class="line">+     &lt;template #prefix&gt;</span><br><span class="line">+        &lt;el-icon&gt;</span><br><span class="line">+           &lt;lock /&gt;</span><br><span class="line">+        &lt;/el-icon&gt;</span><br><span class="line">+     &lt;/template&gt;</span><br><span class="line">&lt;/el-input&gt;</span><br></pre></td></tr></table></figure><h3 id="ç»“åˆWindi-CSSä¸­çš„-applyå®ç°æ ·å¼æŠ½ç¦»">ç»“åˆWindi CSSä¸­çš„@applyå®ç°æ ·å¼æŠ½ç¦»</h3><p>1.åœ¨<code>login.vue</code>ä¸‹æ–¹åˆ›å»º<code>&lt;style&gt;&lt;/style&gt;</code></p><p>2.å°†ä¸Šæ–¹<code>class</code>ä¸­çš„æ ·å¼<code>ctrl+x</code>å‰ªåˆ‡ï¼Œå¹¶é‡å‘½å</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">class</span>=<span class="string">&quot;min-h-screen min-w-screen bg-indigo-500&quot;</span>&gt;</span></span><br><span class="line">+ <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">class</span>=<span class="string">&quot;login-container&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>3.åœ¨<code>&lt;style&gt;</code>æ ‡ç­¾ä¸­è¿›è¡Œé‡å†™(é€‰æ‹©)</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.login-container</span>&#123;</span><br><span class="line">    <span class="keyword">@apply</span> min-h-screen min-w-screen bg-indigo-<span class="number">500</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Setupè¯­æ³•ç³–">Setupè¯­æ³•ç³–</h3><p>é‡Œé¢çš„ä»£ç ä¼šè¢«ç¼–è¯‘æˆç»„ä»¶ <code>setup()</code> å‡½æ•°çš„å†…å®¹ã€‚è¿™æ„å‘³ç€ä¸æ™®é€šçš„ <code>&lt;script&gt;</code> åªåœ¨ç»„ä»¶è¢«é¦–æ¬¡å¼•å…¥çš„æ—¶å€™æ‰§è¡Œä¸€æ¬¡ä¸åŒï¼Œ<code>&lt;script setup&gt;</code> ä¸­çš„ä»£ç ä¼šåœ¨<strong>æ¯æ¬¡ç»„ä»¶å®ä¾‹è¢«åˆ›å»ºçš„æ—¶å€™æ‰§è¡Œ</strong>ã€‚</p><p><a href="https://cn.vuejs.org/api/sfc-script-setup.html">å®˜æ–¹æ•™å­¦</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;button&gt;&#123;&#123; count &#125;&#125; &lt;button&gt; &lt;!-- ä¸éœ€è¦.value --&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">function addCount()&#123;</span><br><span class="line">conut.value++;  // å¯¹è±¡ä¸­çš„valueå€¼æ‰æ˜¯åº”è¯¥æ“ä½œçš„å€¼</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="ç™»å½•è¡¨å•éªŒè¯">ç™»å½•è¡¨å•éªŒè¯</h3><p>1.å®šä¹‰<code>el-form</code>ç»„ä»¶ä¸­çš„<code>:rules=&quot;rules&quot;</code>å±æ€§</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-form ref=&quot;formRef&quot; :rules=&quot;rules&quot; :model=&quot;form&quot; class=&quot;w-[250px]&quot;&gt;</span><br></pre></td></tr></table></figure><p>2.åœ¨<code>script</code>æ ‡ç­¾å®šä¹‰<code>rules</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> rules = &#123;</span><br><span class="line">  <span class="attr">username</span>: [],</span><br><span class="line">  <span class="attr">password</span>: []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3.åœ¨<code>el-form-item</code>ä¸­æŒ‡å®š<code>prop</code>å¯¹åº”çš„<code>keys</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-form-item prop=&quot;username&quot;&gt;</span><br><span class="line">    &lt;el-input v-model=&quot;form.username&quot; placeholder=&quot;è¯·è¾“å…¥ç”¨æˆ·å&quot;&gt;</span><br><span class="line">...</span><br><span class="line">&lt;/el-form-item&gt;</span><br><span class="line">&lt;el-form-item prop=&quot;password&quot;&gt;</span><br><span class="line">     &lt;el-input v-model=&quot;form.password&quot; placeholder=&quot;è¯·è¾“å…¥å¯†ç &quot;&gt;</span><br><span class="line">    ...</span><br><span class="line">&lt;/el-form-item&gt;</span><br></pre></td></tr></table></figure><p>4.åœ¨<code>&lt;script&gt;</code>ä¸­å¡«å†™éªŒè¯è§„åˆ™</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> rules = &#123;</span><br><span class="line">  <span class="attr">username</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">required</span>: <span class="literal">true</span>,  <span class="comment">// æ˜¯å¦å¿…å¡«</span></span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&#x27;</span>,</span><br><span class="line">      <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>  <span class="comment">// å¤±å»ç„¦ç‚¹</span></span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">password</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">required</span>: <span class="literal">true</span>,  <span class="comment">// æ˜¯å¦å¿…å¡«</span></span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;å¯†ç ä¸èƒ½ä¸ºç©º&#x27;</span>,</span><br><span class="line">      <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>  <span class="comment">// å¤±å»ç„¦ç‚¹</span></span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>5.è§¦å‘è¡¨å•éªŒè¯</p><p>â‘  åœ¨<code>el-form</code>å¤„åŠ å…¥å“åº”å¼ç»„ä»¶<code>ref=&quot;formRef&quot;</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-form ref=&quot;formRef&quot; :rules=&quot;rules&quot; :model=&quot;form&quot; class=&quot;w-[250px]&quot;&gt;</span><br></pre></td></tr></table></figure><p>â‘¡è¦æ‹¿åˆ°<code>el-form</code>èŠ‚ç‚¹ï¼Œå°±éœ€è¦åœ¨<code>&lt;script&gt;</code>ä¸­è¿›è¡Œå®šä¹‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> formRef = <span class="title function_">ref</span>(<span class="literal">null</span>) <span class="comment">// ä¸»è¦æ˜¯ä¸ºäº†è®©formRefå˜ä¸ºå“åº”å¼</span></span><br></pre></td></tr></table></figure><p>â‘¢ä½¿ç”¨<code>ref</code>çš„<code>validate</code>æ–¹æ³•ï¼Œå¹¶ä¼ ä¸€ä¸ª<strong>å›è°ƒå‡½æ•°</strong>ï¼Œå‡½æ•°æ¥å—ä¸€ä¸ª<strong>validå‚æ•°</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">onSubmit</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  formRef.<span class="property">value</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!valid) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;éªŒè¯é€šè¿‡&quot;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â‘£è¦è®°å¾—åœ¨<code>&lt;script&gt;</code>ä¸­å°†<code>ref</code>å¼•å…¥</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br></pre></td></tr></table></figure><p>â‘¤æ­¤æ—¶ç½‘é¡µç«¯å°±å¯å¾—åˆ°<code>false</code> or <code>true</code>çš„éªŒè¯ç»“æœ</p><blockquote><p>åœ¨<code>el-input</code>ä¸­åŠ å…¥<code>type=&quot;password&quot;</code>ï¼Œæ­¤æ—¶å¯†ç è¾“å…¥å˜ä¸º <code>Â·Â·Â·</code></p><p>åŠ å…¥<code>show-password</code>åå‡ºç°å°çœ¼ç›ï¼Œæ§åˆ¶æ˜¯å¦éšè—å¯†ç </p></blockquote><h3 id="å¼•å…¥axiosè¯·æ±‚åº“å’Œç™»å½•æ¥å£">å¼•å…¥axiosè¯·æ±‚åº“å’Œç™»å½•æ¥å£</h3><blockquote><p><a href="http://dishaxy.dishait.cn/shopadminapi#7f8ce15f-7b6a-4d3d-ab72-1c45fee9bf92">æ¥å£æ–‡æ¡£åœ°å€</a></p></blockquote><p>1.åœ¨<code>src</code>æ–‡ä»¶å¤¹ä¸‹æ–°å»º<code>axios.js</code>ï¼Œå¹¶é€šè¿‡<code>import axios from &quot;axios&quot;</code>è¿›è¡Œå¼•å…¥ã€‚</p><p>2.é€šè¿‡<strong>åˆ›å»ºå®ä¾‹</strong>çš„æ–¹æ³•<strong>è‡ªå®šä¹‰é…ç½®</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>  <span class="comment">// å¼•å…¥</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> service = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>:<span class="string">&quot;http://ceshi13.dishait.cn&quot;</span> <span class="comment">// æ ¹åŸŸå</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service  <span class="comment">// å¯¼å‡º</span></span><br></pre></td></tr></table></figure><p>3.åœ¨<code>src</code>æ–‡ä»¶å¤¹ä¸‹æ–°å¢<code>api</code>æ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾æ¥å£åŠæ–¹æ³•ã€‚</p><p>â‘ æ–°å»º<code>manager.js</code>æ¨¡å—ï¼ˆå› ä¸ºç™»å½•æ¥å£å±äºç®¡ç†å‘˜æ¨¡å—çš„ä¸€éƒ¨åˆ†ï¼‰</p><p>â‘¡ä»åˆšæ–°å»ºçš„<code>manager.js</code>ä¸­çš„è‡ªå®šä¹‰å®ä¾‹ä¸­å¼•å…¥<code>import axios from '~/axios'</code></p><p>â‘¢å®šä¹‰ç™»å½•æ–¹æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;~/axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">login</span>(<span class="params">username,password</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> axios.<span class="title function_">post</span>(<span class="string">&quot;/admin/login&quot;</span>, &#123;</span><br><span class="line">    username,</span><br><span class="line">    password</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â‘£åœ¨<code>login.vue</code>æ–‡ä»¶ä¸­è¿›è¡Œå¼•å…¥<code>import &#123; login &#125; from '~/api/manger'</code></p><p>â‘¤åœ¨ä¸‹æ–¹<code>onSubmit</code>ä¸­è°ƒç”¨<code>login</code>æ–¹æ³•ï¼ŒåŒæ—¶ä¼ å…¥<code>form</code>ä¸­å¾—åˆ°çš„<code>username</code>å’Œ<code>password</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">onSubmit</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  formRef.<span class="property">value</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!valid) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">login</span>(form.<span class="property">username</span>,form.<span class="property">password</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â‘¥è€Œç”±äº<code>manager.js</code>ä¸­å¾—åˆ°çš„æ˜¯<code>promise</code>ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>.then</code>å¾—åˆ°è¯·æ±‚æˆåŠŸåå¾—åˆ°çš„ç»“æœï¼Œ<code>.catch</code>æ•è·è¯·æ±‚å¤±è´¥åå¾—åˆ°çš„ç»“æœ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">login</span>(form.<span class="property">usernamem</span>, form.<span class="property">password</span>)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">&#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p><strong>è·¨åŸŸé—®é¢˜ï¼š</strong></p><p>é‡‡ç”¨viteå®˜ç½‘çš„<a href="https://cn.vitejs.dev/config/server-options.html#server-proxy">è§£å†³æ–¹æ³•</a>ï¼Œå³ï¼š</p><p>åœ¨<code>vite.config.js</code>ä¸­å®šä¹‰ä¸€ä¸ª<code>server</code>ï¼Œç„¶åå®šä¹‰ä»£ç†<code>proxy</code>ï¼Œæœ€åä½¿ç”¨<code>/api</code>è¿›è¡Œä»£æ›¿</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server</span>: &#123;</span><br><span class="line">  <span class="attr">proxy</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">      <span class="attr">target</span>: <span class="string">&#x27;http://ceshi13.dishait.cn&#x27;</span>,</span><br><span class="line">      <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">rewrite</span>: <span class="function">(<span class="params">path</span>) =&gt;</span> path.<span class="title function_">replace</span>(<span class="regexp">/^\/api/</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>åˆ«å¿˜äº†å°†<code>axios.js</code>ä¸­çš„<code>baseURL</code>æ”¹ä¸º<code>/api</code>å“Ÿï¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="attr">baseURL</span>:<span class="string">&quot;/api&quot;</span>  <span class="comment">// æ ¹åŸŸå</span></span><br></pre></td></tr></table></figure></blockquote><p>â‘¦åœ¨<code>login.vue</code>å¼•å…¥<code>element-plus</code>ä¸­çš„<code>error</code>é€šçŸ¥<code>import &#123; ElNotification &#125; from 'element-plus'</code></p><p>â‘§å½“è¯·æ±‚å¤±è´¥æ—¶ï¼Œåœ¨<code>.catch</code>æ–¹æ³•ä¸­è°ƒç”¨<code>erroré€šçŸ¥</code>ï¼›è¯·æ±‚æˆåŠŸæ—¶ï¼ŒåŒç†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">.<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">   <span class="comment">// æç¤ºæˆåŠŸ</span></span><br><span class="line">   <span class="title class_">ElNotification</span>(&#123;</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&quot;ç™»å½•æˆåŠŸï¼&quot;</span>,</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">      <span class="attr">duration</span>: <span class="number">3000</span></span><br><span class="line">   &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="title class_">ElNotification</span>(&#123;</span><br><span class="line">      <span class="attr">message</span>: err.<span class="property">response</span>.<span class="property">data</span>.<span class="property">msg</span> || <span class="string">&quot;è¯·æ±‚å¤±è´¥ï¼&quot;</span>,</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">      <span class="attr">duration</span>: <span class="number">3000</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>â‘¨è·³è½¬æ—¶ï¼Œéœ€è¦å¼•å…¥<code>vue-router</code>æä¾›çš„<code>userRouter</code>æ–¹æ³•<code>import &#123; useRouter &#125; from 'vue-router'</code>ï¼Œ</p><p>ç„¶åéœ€è¦å®šä¹‰ä¸€ä¸ªå˜é‡<code>const router = useRouter()</code>ï¼Œæœ€åæ‰å¯ä»¥è°ƒç”¨<code>router</code>æ–¹æ³•çš„<code>push</code>åŠŸèƒ½è¿›è¡Œè·³è½¬ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æç¤ºæˆåŠŸ</span></span><br><span class="line">    <span class="title class_">ElNotification</span>(&#123;</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&quot;ç™»å½•æˆåŠŸï¼&quot;</span>,</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;sucess&#x27;</span>,</span><br><span class="line">      <span class="attr">duration</span>: <span class="number">3000</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// è·³è½¬åˆ°åå°é¦–é¡µ</span></span><br><span class="line">    router.<span class="title function_">push</span>(<span class="string">&quot;/&quot;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>â‘©æ­¤æ—¶å°±å¯ä»¥è·³è½¬æˆåŠŸå•¦ï¼</p><h3 id="å¼•å…¥cookieå­˜å‚¨ç”¨æˆ·token">å¼•å…¥cookieå­˜å‚¨ç”¨æˆ·token</h3><blockquote><p><a href="https://vueuse.org/">VueUse</a>æ˜¯ä¸ºVue 2å’Œ3æœåŠ¡çš„ä¸€å¥—Vue Composition APIçš„å¸¸ç”¨å·¥å…·é›†ï¼Œå¯ä»¥å°†ä¸æ”¯æŒå“åº”å¼çš„JS APIå˜å¾—æ”¯æŒå“åº”å¼ï¼Œæ˜¯ä¸–ç•Œä¸ŠStaræœ€é«˜çš„åŒç±»å‹åº“ä¹‹ä¸€ã€‚</p></blockquote><p>1.åœ¨ä½¿ç”¨<code>vueuse</code>ä¸­çš„<code>useCookies</code>æ–¹æ³•æ—¶ï¼Œé¦–å…ˆéœ€è¦å®‰è£…<code>npm i @vueuse/integrations</code>ï¼Œå†å®‰è£…<code>npm i universal-cookie</code></p><p>2.åœ¨<code>index.vue</code>ä¸­å¼•å…¥<code>useCookies</code>æ–¹æ³•<code>import &#123; useCookies &#125; from '@vueuse/integrations/useCookies'</code>ï¼Œå†ç”¨ä¸€ä¸ª<code>cookieå¸¸é‡</code>æ¥æ¥æ”¶è¯¥æ–¹æ³•<code>const cookie = useCookies()</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useCookies &#125; <span class="keyword">from</span> <span class="string">&#x27;@vueuse/integrations/useCookies&#x27;</span></span><br><span class="line"><span class="keyword">const</span> cookie = <span class="title function_">useCookies</span>()</span><br></pre></td></tr></table></figure><p>åœ¨<code>&lt;template&gt;</code>ä¸­è®¾ç½®ä¸‰ä¸ªæŒ‰é’®æ¥ä½¿ç”¨<strong>è®¾ç½®</strong>ã€<strong>è¯»å–</strong>å’Œ<strong>åˆ é™¤cookie</strong>çš„æ–¹æ³•</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-button</span>&gt;</span>è®¾ç½®<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-button</span>&gt;</span>è¯»å–<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-button</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨<code>&lt;script&gt;</code>å®šä¹‰ä¸‰ä¸ªcookieæ–¹æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">set</span>(<span class="params"></span>) &#123;</span><br><span class="line">cookie.<span class="title function_">set</span>(<span class="string">&quot;admin-token&quot;</span>,<span class="string">&quot;123456&quot;</span>)  </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">cookie.<span class="title function_">get</span>(<span class="string">&quot;admin-token&quot;</span>)  </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">remove</span>(<span class="params"></span>) &#123;</span><br><span class="line">cookie.<span class="title function_">remove</span>(<span class="string">&quot;admin-token&quot;</span>)  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨<strong>æ§åˆ¶å°</strong>ä¸­å¯ä»¥è§‚å¯Ÿä¸‰ä¸ªæ–¹æ³•çš„ä½œç”¨ã€‚</p><p>3.åŒç†ï¼Œä¸ºäº†å–åˆ°<code>token</code>ï¼Œä¹Ÿéœ€è¦åœ¨<code>login.vue</code>ä¸­å¼•å…¥<code>useCookies</code>æ–¹æ³•ï¼Œç„¶ååœ¨<code>.then</code>æ–¹æ³•ä¸­<strong>å­˜å‚¨tokenå’Œç”¨æˆ·ç›¸å…³ä¿¡æ¯</strong>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">.<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æç¤ºæˆåŠŸ</span></span><br><span class="line">  <span class="title class_">ElNotification</span>(&#123;</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&quot;ç™»å½•æˆåŠŸï¼&quot;</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;sucess&#x27;</span>,</span><br><span class="line">    <span class="attr">duration</span>: <span class="number">3000</span></span><br><span class="line">   &#125;)</span><br><span class="line">   <span class="comment">// å­˜å‚¨tokenå’Œç”¨æˆ·ç›¸å…³ä¿¡æ¯</span></span><br><span class="line">+   <span class="keyword">const</span> cookie = <span class="title function_">useCookies</span>()</span><br><span class="line">+   cookie.<span class="title function_">set</span>(<span class="string">&quot;admin-token&quot;</span>, res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">token</span>)</span><br><span class="line">   <span class="comment">// è·³è½¬åˆ°åå°é¦–é¡µ</span></span><br><span class="line">   router.<span class="title function_">push</span>(<span class="string">&quot;/&quot;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="è¯·æ±‚æ‹¦æˆªå™¨å’Œå“åº”æ‹¦æˆªå™¨">è¯·æ±‚æ‹¦æˆªå™¨å’Œå“åº”æ‹¦æˆªå™¨</h3><blockquote><p><a href="http://www.axios-js.com/zh-cn/docs/#%E6%8B%A6%E6%88%AA%E5%99%A8">ç›¸å…³æ–¹æ³•</a></p></blockquote><p>æˆ‘ä»¬åœ¨è·å–<code>token</code>æ—¶ï¼Œå‘ç°éœ€è¦ä»<code>res.data.data</code>ä¸­è¿›è¡Œè·å–ï¼Œæ¯”è¾ƒå†—é•¿ã€‚å› æ­¤æœ¬é¡¹ç›®é‡‡ç”¨<code>axioså·¥å…·åº“</code>ä¸­çš„<code>æ‹¦æˆªå™¨</code>è¿›è¡Œæ‹¦æˆªï¼ˆå°†å“åº”æ‹¦æˆªå™¨çš„è¿”å›æ•°æ®è¿›è¡Œä¿®æ”¹ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- <span class="keyword">return</span> response;</span><br><span class="line">+ <span class="keyword">return</span> response.<span class="property">data</span>.<span class="property">data</span>;</span><br></pre></td></tr></table></figure><p>1.åœ¨axios.jsä¸­æ·»åŠ å¦‚ä¸‹ä»£ç </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">config</span>) &#123;</span><br><span class="line">  <span class="comment">// åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ</span></span><br><span class="line">  <span class="keyword">return</span> config;</span><br><span class="line">&#125;, <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">  <span class="comment">// å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">response</span>) &#123;</span><br><span class="line">  <span class="comment">// å¯¹å“åº”æ•°æ®åšç‚¹ä»€ä¹ˆ</span></span><br><span class="line">  <span class="keyword">return</span> response.<span class="property">data</span>.<span class="property">data</span>;</span><br><span class="line">&#125;, <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">  <span class="comment">// å¯¹å“åº”é”™è¯¯åšç‚¹ä»€ä¹ˆ</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>2.å°†<code>login.vue</code>ä¸­å­˜å‚¨<code>token</code>çš„è¯­å¥æ”¹ä¸º</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- cookie.<span class="title function_">set</span>(<span class="string">&quot;admin-token&quot;</span>, res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">token</span>)</span><br><span class="line">+ cookie.<span class="title function_">set</span>(<span class="string">&quot;admin-token&quot;</span>, res.<span class="property">token</span>)</span><br></pre></td></tr></table></figure><p>3.é”™è¯¯å¤„ç†</p><p>â‘ åœ¨<code>axios.js</code>ä¸­å¼•å…¥<code>import &#123; ElNotification &#125; from 'element-plus'</code></p><p>â‘¡å°†<code>login.vue</code>ä¸­çš„<code>ElNotification</code>æ–¹æ³•ç§»åˆ°<code>axios.js</code>ä¸­å“åº”æ‹¦æˆªå™¨å¯¹åº”çš„å“åº”é”™è¯¯ä¸‹ï¼Œå¹¶åˆ é™¤<code>.catch</code>æ–¹æ³•ã€‚æ³¨æ„<code>funciton</code>ä¼ å…¥çš„å‚æ•°ä¸º<code>error</code>ï¼Œè¦å°†<code>message</code>ä¸­çš„<code>err</code>æ”¹ä¸º<code>error</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">response</span>) &#123;</span><br><span class="line">  <span class="comment">// å¯¹å“åº”æ•°æ®åšç‚¹ä»€ä¹ˆ</span></span><br><span class="line">  <span class="keyword">return</span> response.<span class="property">data</span>.<span class="property">data</span>;</span><br><span class="line">&#125;, <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">  <span class="comment">// å¯¹å“åº”é”™è¯¯åšç‚¹ä»€ä¹ˆ</span></span><br><span class="line">  <span class="title class_">ElNotification</span>(&#123;</span><br><span class="line">    <span class="attr">message</span>: error.<span class="property">response</span>.<span class="property">data</span>.<span class="property">msg</span> || <span class="string">&quot;è¯·æ±‚å¤±è´¥ï¼&quot;</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">    <span class="attr">duration</span>: <span class="number">3000</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>4.è¯·æ±‚æ‹¦æˆªå™¨ï¼ˆå¾€<code>header</code>å¤´è‡ªåŠ¨æ·»åŠ <code>token</code>ï¼‰</p><p>â‘ ç”±äº<code>token</code>å­˜åœ¨<code>cookie</code>ä¸­ï¼Œæ‰€ä»¥é¦–å…ˆå¼•å…¥åŒ…<code>import &#123; useCookies &#125; from '@vueuse/integrations/useCookies'</code>ï¼Œå†è°ƒç”¨<code>useCookies</code>åŒ…æ‹¿åˆ°<code>cookie</code>å®ä¾‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¾€headerå¤´è‡ªåŠ¨æ·»åŠ token</span></span><br><span class="line"><span class="keyword">const</span> cookie = <span class="title function_">useCookies</span>()</span><br></pre></td></tr></table></figure><p>â‘¡è°ƒç”¨<code>get</code>æ–¹æ³•æ‹¿åˆ°<code>keys</code>ä¸º<code>admin-token</code>çš„<code>cookie</code>å€¼ï¼Œå†åŠ å…¥åˆ¤æ–­è‹¥ç™»å½•ï¼Œåˆ™ä¼ <code>token</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> token = cookie.<span class="title function_">get</span>(<span class="string">&quot;admin-token&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> (token) &#123;</span><br><span class="line">  config.<span class="property">headers</span>[<span class="string">&quot;token&quot;</span>] = token</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>5.è·å–å½“å‰ç”¨æˆ·ç™»å½•ä¿¡æ¯çš„æ¥å£</p><p>åœ¨<code>manager.js</code>ä¸­åŠ å…¥ä»¥ä¸‹ä»£ç è°ƒå–æ¥å£</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getinfo</span> () &#123;</span><br><span class="line">  <span class="keyword">return</span> axios.<span class="title function_">post</span>(<span class="string">&quot;/admin/getinfo&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>6.åœ¨<code>login.vue</code>ä¸­è·å–ç”¨æˆ·ç›¸å…³ä¿¡æ¯</p><p>â‘ åŠ å…¥<code>getinfo</code>æ–¹æ³•<code>import &#123; login,getinfo &#125; from '~/api/manager'</code></p><p>â‘¡è·å–ç”¨æˆ·ç›¸å…³ä¿¡æ¯</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–ç”¨æˆ·ç›¸å…³ä¿¡æ¯</span></span><br><span class="line"><span class="title function_">getinfo</span>().<span class="title function_">then</span>(<span class="function"><span class="params">res2</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res2);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä¸ºäº†<strong>é˜²æ­¢å“åº”è¿‡å¿«</strong>ï¼Œç”¨æˆ·é‡å¤ç‚¹å‡»ç™»å½•æŒ‰é’®ï¼šéœ€è¦ç»™ç™»å½•æŒ‰é’®æ·»åŠ <code>loading</code>çŠ¶æ€ã€‚</p><p>1.å®šä¹‰loading<code>const loading = ref(false)</code></p><p>2.åœ¨ç™»å½•æŒ‰é’®å¤„æ·»åŠ é»˜è®¤çš„<code>loading</code>å±æ€§</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">round</span> <span class="attr">color</span>=<span class="string">&quot;#626aef&quot;</span> <span class="attr">class</span>=<span class="string">&quot;w-[250px]&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;onSubmit&quot;</span> <span class="attr">:loading</span>=<span class="string">&quot;loading&quot;</span>&gt;</span>ç™» å½•<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>3.åœ¨è¯·æ±‚ä¹‹å‰ï¼Œå°†<code>loading</code>çš„çŠ¶æ€è®¾ä¸º<code>true</code>ï¼›è¯·æ±‚ç»“æŸï¼Œå†å°†<code>loading</code>çŠ¶æ€è®¾ä¸º<code>false</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">onSubmit</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">formRef.<span class="property">value</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (!valid) &#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line">+    loading.<span class="property">value</span> = <span class="literal">true</span></span><br><span class="line"> <span class="title function_">login</span>(form.<span class="property">username</span>, form.<span class="property">password</span>)</span><br><span class="line">   .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">...</span><br><span class="line">     <span class="comment">// è·³è½¬åˆ°åå°é¦–é¡µ</span></span><br><span class="line">     router.<span class="title function_">push</span>(<span class="string">&quot;/&quot;</span>)</span><br><span class="line">   &#125;)</span><br><span class="line">+      .<span class="title function_">finally</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">+           loading.<span class="property">value</span> = <span class="literal">false</span></span><br><span class="line">        &#125;)</span><br><span class="line">   &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¸¸ç”¨å·¥å…·åº“å°è£…">å¸¸ç”¨å·¥å…·åº“å°è£…</h3><p>åœ¨<code>src</code>æ–‡ä»¶å¤¹ä¸‹æ–°å»º<code>composables</code>çš„ç›®å½•ï¼Œå†åœ¨é‡Œé¢æ–°å»º<code>auth.js</code></p><p><strong>å°è£…<code>cookie</code>ï¼š</strong></p><p>1.ä»¥å°è£…<code>cookie</code>ä¸ºä¾‹ï¼Œé¦–å…ˆå¯¼å…¥<code>useCookies</code>åŒ…ï¼Œ<code>import &#123; useCookies &#125; from '@vueuse/integrations/useCookies'</code></p><p>2.å®šä¹‰<code>token</code>ç»Ÿä¸€çš„å€¼<code>const TokenKey = &quot;admin-token&quot;</code></p><p>3.ä½¿ç”¨<code>useCookies</code>å®ä¾‹ï¼Œ<code>const cookie = useCookies()</code></p><p>4.å®šä¹‰è·å–ã€è®¾ç½®å’Œæ¸…é™¤<code>token</code>æ–¹æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–token</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getToken</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> cookie.<span class="title function_">get</span>(<span class="title class_">TokenKey</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®token</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">setToken</span>(<span class="params">token</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> cookie.<span class="title function_">set</span>(<span class="title class_">TokenKey</span>,token)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¸…é™¤token</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">removeToken</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> cookie.<span class="title function_">remove</span>(<span class="title class_">TokenKey</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>5.å®šä¹‰å¥½ä¹‹åï¼Œ<code>login.vue</code>é¡µé¢å°±ä¸éœ€è¦å†é‡å¤å¼•ç”¨<code>useCookies</code>äº†</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- <span class="keyword">import</span> &#123; useCookies &#125; <span class="keyword">from</span> <span class="string">&#x27;@vueuse/integrations/useCookies&#x27;</span></span><br><span class="line">+ <span class="keyword">import</span> &#123; setToken &#125; <span class="keyword">from</span> <span class="string">&#x27;~/composables/auth&#x27;</span> <span class="comment">// ä½¿ç”¨setTokenæ–¹æ³•</span></span><br></pre></td></tr></table></figure><p>åŒæ—¶ï¼Œå­˜å‚¨tokenæ–¹æ³•ä¹Ÿå¯ä»¥æ”¹å˜</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­˜å‚¨token</span></span><br><span class="line"> - <span class="keyword">const</span> cookie = <span class="title function_">useCookies</span>()</span><br><span class="line"> - cookie.<span class="title function_">set</span>(<span class="string">&quot;admin-token&quot;</span>, res.<span class="property">token</span>)</span><br><span class="line"> + <span class="title function_">setToken</span>(res.<span class="property">token</span>)</span><br></pre></td></tr></table></figure><p>åŒç†ï¼Œ<code>axios.js</code>ä¸­ä»¥åŒæ ·æ–¹å¼ä½¿ç”¨<code>getToken()</code>æ–¹æ³•</p><p><strong>å°è£…æ¶ˆæ¯æç¤ºï¼š</strong></p><p>æ–°å»ºæ–‡ä»¶<code>/composables/util.js</code>ï¼Œå¡«å…¥ä¸‹æ–¹ä»£ç </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElNotification</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¶ˆæ¯æç¤º</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">toast</span>(<span class="params">message,type = <span class="string">&quot;success&quot;</span>,dangerouslyUseHTMLString = <span class="literal">false</span></span>)&#123;</span><br><span class="line">    <span class="title class_">ElNotification</span>(&#123;</span><br><span class="line">        message,</span><br><span class="line">        type,</span><br><span class="line">        dangerouslyUseHTMLString,  <span class="comment">// æ˜¯å¦å°†messageå±æ€§ä½œä¸ºHTMLç‰‡æ®µå¤„ç†</span></span><br><span class="line">        <span class="attr">duration</span>:<span class="number">3000</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå°†<code>axios.js</code>ä¸­ä»£ç è¿›è¡Œä¿®æ”¹ï¼Œ<code>login.vue</code>é¡µé¢åŒç†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- <span class="keyword">import</span> &#123; <span class="title class_">ElNotification</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line">+ <span class="keyword">import</span> &#123; toast &#125; <span class="keyword">from</span> <span class="string">&#x27;~/composables/util&#x27;</span></span><br><span class="line"></span><br><span class="line">- <span class="title class_">ElNotification</span>(&#123;</span><br><span class="line">-     <span class="attr">message</span>: error.<span class="property">response</span>.<span class="property">data</span>.<span class="property">msg</span> || <span class="string">&quot;è¯·æ±‚å¤±è´¥ï¼&quot;</span>,</span><br><span class="line">-     <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">-    <span class="attr">duration</span>: <span class="number">3000</span></span><br><span class="line">-  &#125;)</span><br><span class="line">+ <span class="title function_">toast</span>(error.<span class="property">response</span>.<span class="property">data</span>.<span class="property">msg</span> || <span class="string">&quot;è¯·æ±‚å¤±è´¥&quot;</span>,<span class="string">&quot;error&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="å¼•å…¥vuexçŠ¶æ€ç®¡ç†ç”¨æˆ·ä¿¡æ¯">å¼•å…¥vuexçŠ¶æ€ç®¡ç†ç”¨æˆ·ä¿¡æ¯</h3><p>å®‰è£…<a href="https://vuex.vuejs.org/zh/installation.html">VueX</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vuex@next --save</span><br></pre></td></tr></table></figure><p>1.æ–°å»º<code>/src/store/index.js</code>ï¼Œåˆ›å»º<code>store</code>å¹¶æä¾›åˆå§‹<code>state</code>å¯¹è±¡å’Œä¸€äº›mutationsï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="comment">// å­˜å‚¨ç”¨æˆ·ç›¸å…³ä¿¡æ¯</span></span><br><span class="line">    <span class="title function_">state</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="comment">// ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">            <span class="attr">user</span>: &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">   <span class="comment">// ä¿®æ”¹ç”¨æˆ·ç›¸å…³ä¿¡æ¯</span></span><br><span class="line">    <span class="attr">mutations</span>: &#123;</span><br><span class="line">        <span class="comment">// è®°å½•ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">        <span class="title function_">SET_USERINFO</span>(<span class="params">state,user</span>)&#123;</span><br><span class="line">            state.<span class="property">user</span> = user</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure><p>2.åœ¨<code>main.js</code>ä¸­å¼•å…¥<code>store</code>ï¼Œ<code>import store from './store'</code></p><p>3.ç›´æ¥è°ƒç”¨<code>app.use(strore)</code>å°±å®Œæˆå•¦ï¼</p><p>ä½¿ç”¨æ–¹æ³•ï¼š</p><p>4.åœ¨<code>login.vue</code>é¡µé¢ä¸­å¯¼å…¥<code>useStore</code>æ–¹æ³•ï¼Œ<code>import &#123; useStore &#125; from 'vuex'</code></p><p>ç„¶åå°±å¯ä»¥æ‹¿åˆ°<code>store</code>å®ä¾‹ï¼Œ<code>const store = useStore()</code></p><p>5.åœ¨ä¸‹æ–¹è·å–ç”¨æˆ·ç›¸å…³ä¿¡æ¯å¹¶èµ‹å€¼ç»™<code>vuex</code>ä¸­çš„<code>user</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–ç”¨æˆ·ç›¸å…³ä¿¡æ¯</span></span><br><span class="line">   <span class="title function_">getinfo</span>().<span class="title function_">then</span>(<span class="function"><span class="params">res2</span> =&gt;</span> &#123;</span><br><span class="line">+     store.<span class="title function_">commit</span>(<span class="string">&quot;SET_USERINFO&quot;</span>, res2)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(res2);</span><br><span class="line">   &#125;)</span><br></pre></td></tr></table></figure><blockquote><p><strong>æµ‹è¯•æ•ˆæœï¼š</strong></p><p>1.æ‰“å¼€<code>pages</code>ç›®å½•ä¸‹çš„<code>index.vue</code>ï¼Œæ¸…ç©ºå†…å®¹</p><p>2.åœ¨<code>&lt;template&gt;</code>å¡«å…¥<code>&#123;&#123; $store.state.user &#125;&#125;</code>ï¼Œè‹¥è°ƒç”¨æˆåŠŸåˆ™æ­£ç¡®ã€‚</p></blockquote><h3 id="å…¨å±€è·¯ç”±æ‹¦æˆªå®ç°ç™»å½•åˆ¤æ–­">å…¨å±€è·¯ç”±æ‹¦æˆªå®ç°ç™»å½•åˆ¤æ–­</h3><p>1.æ–°å»º<code>/src/permission.js</code></p><p>2.å¼•å…¥<code>router</code>å®ä¾‹ï¼Œ<code>import router from &quot;~/router&quot;</code></p><p>3.ä½¿ç”¨ <code>router.beforeEach</code> æ³¨å†Œä¸€ä¸ªå…¨å±€å‰ç½®å®ˆå«ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…¨å±€å‰ç½®å®ˆå«</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å…¨å±€å‰ç½®å®ˆå«&quot;</span>);</span><br><span class="line">  <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>4.åœ¨<code>main.js</code>ä¸­å¼•å…¥<code>permission</code>ï¼Œ<code>import &quot;./permission&quot;</code></p><p>5.åœ¨<code>permission.js</code>ä¸­å¼•å…¥<code>getToken</code>æ–¹æ³•ä»¥åŠ<code>toast</code>æ–¹æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getToken &#125; <span class="keyword">from</span> <span class="string">&quot;~/composables/auth&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; toast &#125; <span class="keyword">from</span> <span class="string">&quot;~/composables/util&quot;</span></span><br></pre></td></tr></table></figure><p>å®Œæ•´ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;~/router&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; getToken &#125; <span class="keyword">from</span> <span class="string">&quot;~/composables/auth&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; toast &#125; <span class="keyword">from</span> <span class="string">&quot;~/composables/util&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨å±€å‰ç½®å®ˆå«</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to,<span class="keyword">from</span>,next</span>)=&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> token = <span class="title function_">getToken</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ²¡æœ‰ç™»å½•ï¼Œå¼ºåˆ¶è·³è½¬å›ç™»å½•é¡µ</span></span><br><span class="line">    <span class="keyword">if</span>(!token &amp;&amp; to.<span class="property">path</span> != <span class="string">&quot;/login&quot;</span>)&#123;</span><br><span class="line">        <span class="title function_">toast</span>(<span class="string">&quot;è¯·å…ˆç™»å½•&quot;</span>,<span class="string">&quot;error&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">next</span>(&#123; <span class="attr">path</span>:<span class="string">&quot;/login&quot;</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é˜²æ­¢é‡å¤ç™»å½•</span></span><br><span class="line">    <span class="keyword">if</span>(token &amp;&amp; to.<span class="property">path</span> == <span class="string">&quot;/login&quot;</span>)&#123;</span><br><span class="line">        <span class="title function_">toast</span>(<span class="string">&quot;è¯·å‹¿é‡å¤ç™»å½•&quot;</span>,<span class="string">&quot;error&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">next</span>(&#123; <span class="attr">path</span>:<span class="keyword">from</span>.<span class="property">path</span> ? <span class="keyword">from</span>.<span class="property">path</span> : <span class="string">&quot;/&quot;</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="ç™»å½•åŠŸèƒ½å®Œå–„">ç™»å½•åŠŸèƒ½å®Œå–„</h3><blockquote><p><strong>è§£å†³åˆ·æ–°åç”¨æˆ·ä¿¡æ¯æ¶ˆå¤±é—®é¢˜</strong></p></blockquote><p>1.å°†ç™»å½•ç•Œé¢çš„<code>getinfo()</code>æ–¹æ³•å°è£…åˆ°<code>vuex</code>ä¸­çš„<code>actions</code>é‡Œé¢ï¼Œå†åœ¨actioné‡Œé¢å®šä¹‰ä¸€ä¸ª<code>getinfo()</code>æ–¹æ³•ï¼Œä¼ ä¸€ä¸ªç»“æ„åçš„<code>commit</code>ï¼ˆä¸è¦å¿˜äº†å¯¼å…¥<code>getinfo</code>æ–¹æ³•å“¦ï¼Œ<code>import &#123; login,getinfo &#125; from '~/api/manager'</code>ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">  <span class="title function_">getinfo</span>(<span class="params">&#123; commit &#125;</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="title function_">getinfo</span>().<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="title function_">commit</span>(<span class="string">&quot;SET_USERINFO&quot;</span>,res)</span><br><span class="line">            <span class="title function_">resolve</span>(res)</span><br><span class="line">         &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span><span class="title function_">reject</span>(err))</span><br><span class="line">      &#125;)</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><blockquote><p>actionå‡½æ•°å¯ä»¥æ¥æ”¶ä¸€ä¸ªä¸storeå®ä¾‹å…·æœ‰ç›¸åŒæ–¹æ³•çš„å±æ€§contextï¼Œè¿™ä¸ªå±æ€§ä¸­åŒ…æ‹¬ä¸‹é¢å‡ éƒ¨åˆ†ï¼š</p><p>context:{<br>state,   ç­‰åŒäºstore.$stateï¼Œè‹¥åœ¨æ¨¡å—ä¸­åˆ™ä¸ºå±€éƒ¨çŠ¶æ€<br>rootState,   ç­‰åŒäºstore.$state,åªå­˜åœ¨æ¨¡å—ä¸­<br>commit,   ç­‰åŒäºstore.$commit<br>dispatch,   ç­‰åŒäºstore.$dispatch<br>getters   ç­‰åŒäºstore.$getters<br>}</p><p>å¸¸è§„å†™æ³•è°ƒç”¨çš„æ—¶å€™ä¼šä½¿ç”¨context.commitï¼Œä½†æ›´å¤šçš„æ˜¯ä½¿ç”¨es6çš„å˜é‡è§£æ„èµ‹å€¼ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥åœ¨å‚æ•°çš„ ä½ç½®å†™è‡ªå·±æƒ³è¦çš„å±æ€§ï¼Œå¦‚ï¼š{commit} = context.commit</p></blockquote><p>ä¹‹åå°±å¯ä»¥å»æ‰<code>login.vue</code>ä¸­å¯¼å…¥åŒ…é‡Œçš„<code>getinfo</code>æ–¹æ³•äº†ï¼Œä¹Ÿæ²¡å¿…è¦åœ¨<code>login.vue</code>ä¸­è·å–ç”¨æˆ·ç›¸å…³ä¿¡æ¯äº†ã€‚</p><p>å› æ­¤ï¼Œæœ¬ç³»ç»Ÿå°†è·å–ç”¨æˆ·ä¿¡æ¯æ”¾åˆ°<code>permission.js</code>ä¸­å…¨å±€å‰ç½®å®ˆå«é‡Œï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+    <span class="comment">// å¦‚æœç”¨æˆ·ç™»å½•äº†ï¼Œè‡ªåŠ¨è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œå¹¶å­˜å‚¨åœ¨vuexå½“ä¸­</span></span><br><span class="line">+    <span class="keyword">if</span>(token)&#123;</span><br><span class="line">+      <span class="keyword">await</span> store.<span class="title function_">dispatch</span>(<span class="string">&quot;getinfo&quot;</span>)</span><br><span class="line">+    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="title function_">next</span>()</span><br></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨<code>store</code>æ–¹æ³•è¦è®°å¾—åœ¨é¡¶éƒ¨å¯¼å…¥åŒ…ï¼š<code>import store from &quot;./store&quot;</code></p><p>åŒæ—¶ï¼Œç”±äº<code>actions</code>æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œå°±éœ€è¦åœ¨<code>store.dispatch()</code>å‰é¢åŠ <code>await</code>ï¼Œè¿˜è¦åœ¨<code>***</code>å¤„åŠ å…¥<code>async</code> ï¼Œå³<code>router.beforeEach(***(to,from,next)</code></p></blockquote><p>2.å®ç°å›è½¦ç™»å½•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, reactive, onMounted, onBeforeUnmount &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬å›è½¦äº‹ä»¶</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">onKeyUp</span> (e) &#123;</span><br><span class="line">  <span class="keyword">if</span> (e.<span class="property">key</span> == <span class="string">&quot;Enter&quot;</span>) <span class="title function_">onSubmit</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ é”®ç›˜ç›‘å¬</span></span><br><span class="line"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;keyup&quot;</span>, onKeyUp)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// ç§»é™¤é”®ç›˜ç›‘å¬</span></span><br><span class="line"><span class="title function_">onBeforeUnmount</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">removeEventListener</span>(<span class="string">&quot;keyup&quot;</span>, onKeyUp)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><hr><blockquote><p>ç™»å½•åŠŸèƒ½å·²å®ç°ï¼Œåç»­æ¨¡å—æœªå®Œå¾…ç»­â€¦</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;ç™»å½•åŠŸèƒ½&quot;&gt;ç™»å½•åŠŸèƒ½&lt;/h3&gt;
&lt;h3 id=&quot;åˆ›å»ºViteé¡¹ç›®&quot;&gt;åˆ›å»ºViteé¡¹ç›®&lt;/h3&gt;
&lt;p&gt;å®˜æ–¹æ–‡æ¡£ï¼š&lt;a href=&quot;https://cn.vitejs.dev/&quot;&gt;Vite&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Viteæ˜¯ä¸€ä¸ªwebå¼€å‘æ„å»ºå·¥å…·ï¼Œç”±äºå…¶åŸç”ŸESæ¨¡å—å¯¼</summary>
      
    
    
    
    <category term="å‰ç«¯ğŸ’¥" scheme="https://blog.cilicili.xyz/categories/%E5%89%8D%E7%AB%AF%F0%9F%92%A5/"/>
    
    
    <category term="Vue" scheme="https://blog.cilicili.xyz/tags/Vue/"/>
    
    <category term="ç³»ç»Ÿè®¾è®¡" scheme="https://blog.cilicili.xyz/tags/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/"/>
    
  </entry>
  
  <entry>
    <title>ã€å‰ç«¯ã€‘å®ç”¨çš„JavaScriptå¼€å‘æŠ€å·§</title>
    <link href="https://blog.cilicili.xyz/posts/3701181b.html"/>
    <id>https://blog.cilicili.xyz/posts/3701181b.html</id>
    <published>2022-07-31T07:18:57.000Z</published>
    <updated>2022-09-09T09:35:25.689Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Numberä½¿ç”¨æŠ€å·§">Numberä½¿ç”¨æŠ€å·§</h2><h3 id="å–æ•´">å–æ•´</h3><blockquote><p>ä»£æ›¿æ­£æ•°çš„<code>Math.floor()</code>ï¼Œä»£æ›¿è´Ÿæ•°çš„<code>Math.ceil()</code></p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> num1 = ~~<span class="number">3.14</span>;</span><br><span class="line"><span class="keyword">const</span> num2 = <span class="number">3.14</span> | <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> num3 = <span class="number">3.14</span> &gt;&gt; <span class="number">0</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num1, num2, num3); <span class="comment">// 3 3 3</span></span><br></pre></td></tr></table></figure><h3 id="è¡¥é›¶">è¡¥é›¶</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">FillZero</span> = (<span class="params">num, len</span>) =&gt; num.<span class="title function_">toString</span>().<span class="title function_">padStart</span>(len, <span class="string">&quot;0&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> num = <span class="title class_">FillZero</span>(<span class="number">688</span>, <span class="number">5</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num); <span class="comment">// 00688</span></span><br></pre></td></tr></table></figure><h3 id="è½¬æ•°å€¼">è½¬æ•°å€¼</h3><blockquote><p>åªå¯¹<code>nullã€&quot;&quot;ã€falseã€æ•°å€¼å­—ç¬¦ä¸²</code>æœ‰æ•ˆ</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> num1 = +<span class="literal">null</span>;</span><br><span class="line"><span class="keyword">const</span> num2 = +<span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> num3 = +<span class="literal">false</span>;</span><br><span class="line"><span class="keyword">const</span> num4 = +<span class="string">&quot;688&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num1, num2, num3, num4); <span class="comment">// 0 0 0 688</span></span><br></pre></td></tr></table></figure><h3 id="æ—¶é—´æˆ³">æ—¶é—´æˆ³</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> timestamp = +<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&quot;2022-06-08&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(timestamp); <span class="comment">// 1654646400000</span></span><br></pre></td></tr></table></figure><h3 id="ç²¾ç¡®å°æ•°">ç²¾ç¡®å°æ•°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">RoundNum</span> = (<span class="params">num, decimal</span>) =&gt;</span><br><span class="line">  <span class="title class_">Math</span>.<span class="title function_">round</span>(num * <span class="number">10</span> ** decimal) / <span class="number">10</span> ** decimal;</span><br><span class="line"><span class="keyword">const</span> num = <span class="title class_">RoundNum</span>(<span class="number">3.14</span>, <span class="number">1</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num); <span class="comment">// 3.1</span></span><br></pre></td></tr></table></figure><h3 id="åˆ¤æ–­å¥‡å¶">åˆ¤æ–­å¥‡å¶</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">OddEven</span> = (<span class="params">num</span>) =&gt; (!!(num &amp; <span class="number">1</span>) ? <span class="string">&quot;odd&quot;</span> : <span class="string">&quot;even&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> num = <span class="title class_">OddEven</span>(<span class="number">18</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num); <span class="comment">// even</span></span><br></pre></td></tr></table></figure><h3 id="å–æœ€å°æœ€å¤§å€¼">å–æœ€å°æœ€å¤§å€¼</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>];</span><br><span class="line"><span class="keyword">const</span> min = <span class="title class_">Math</span>.<span class="title function_">min</span>(...arr);</span><br><span class="line"><span class="keyword">const</span> max = <span class="title class_">Math</span>.<span class="title function_">max</span>(...arr);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(min, max); <span class="comment">// 11 13</span></span><br></pre></td></tr></table></figure><h3 id="ç”ŸæˆèŒƒå›´éšæœºæ•°">ç”ŸæˆèŒƒå›´éšæœºæ•°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">RandomNum</span> = (<span class="params">min, max</span>) =&gt;</span><br><span class="line">  <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * (max - min + <span class="number">1</span>)) + min;</span><br><span class="line"><span class="keyword">const</span> num = <span class="title class_">RandomNum</span>(<span class="number">2</span>, <span class="number">16</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num); <span class="comment">// 9</span></span><br></pre></td></tr></table></figure><h2 id="Boolean-å®ç”¨æŠ€å·§">Boolean å®ç”¨æŠ€å·§</h2><h3 id="çŸ­è·¯è¿ç®—ç¬¦">çŸ­è·¯è¿ç®—ç¬¦</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ»¡è¶³æ¡ä»¶èµ‹å€¼ï¼šå–å‡è¿ç®—ï¼Œä»å·¦åˆ°å³ä¾æ¬¡åˆ¤æ–­ï¼Œé‡åˆ°å‡å€¼è¿”å›å‡å€¼ï¼Œåé¢ä¸å†æ‰§è¡Œï¼Œå¦åˆ™è¿”å›æœ€åä¸€ä¸ªçœŸå€¼</span></span><br><span class="line"><span class="keyword">const</span> a = m &amp;&amp; <span class="number">5</span>;</span><br><span class="line"><span class="comment">// é»˜è®¤èµ‹å€¼ï¼šå–çœŸè¿ç®—ï¼Œä»å·¦åˆ°å³ä¾æ¬¡åˆ¤æ–­ï¼Œé‡åˆ°çœŸå€¼è¿”å›çœŸå€¼ï¼Œåé¢ä¸å†æ‰§è¡Œï¼Œå¦åˆ™è¿”å›æœ€åä¸€ä¸ªå‡å€¼</span></span><br><span class="line"><span class="keyword">const</span> b = m || <span class="number">6</span>;</span><br><span class="line"><span class="comment">// å–å‡èµ‹å€¼ï¼šå•ä¸ªè¡¨è¾¾å¼è½¬æ¢ä¸ºtrueåˆ™è¿”å›falseï¼Œå¦åˆ™è¿”å›true</span></span><br><span class="line"><span class="keyword">const</span> c = !m;</span><br></pre></td></tr></table></figure><h3 id="åˆ¤æ–­æ•°æ®ç±»å‹">åˆ¤æ–­æ•°æ®ç±»å‹</h3><blockquote><p>**å¯åˆ¤æ–­ç±»å‹ï¼š**undefinedã€nullã€stringã€numberã€booleanã€arrayã€objectã€symbolã€dateã€regexpã€functionã€asyncfunctionã€argumentsã€setã€mapã€weaksetã€weakmap</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">DataType</span>(<span class="params">tgt, type</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> dataType = <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span></span><br><span class="line">    .<span class="title function_">call</span>(tgt)</span><br><span class="line">    .<span class="title function_">replace</span>(<span class="regexp">/\[object (\w+)\]/</span>, <span class="string">&quot;$1&quot;</span>)</span><br><span class="line">    .<span class="title function_">toLowerCase</span>();</span><br><span class="line">  <span class="keyword">return</span> type ? dataType === type : dataType;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">DataType</span>(<span class="string">&quot;ç¿ èŠ±&quot;</span>); <span class="comment">// &quot;string&quot;</span></span><br><span class="line"><span class="title class_">DataType</span>(<span class="number">20220608</span>); <span class="comment">// &quot;number&quot;</span></span><br><span class="line"><span class="title class_">DataType</span>(<span class="literal">true</span>); <span class="comment">// &quot;boolean&quot;</span></span><br><span class="line"><span class="title class_">DataType</span>([], <span class="string">&quot;array&quot;</span>); <span class="comment">// true</span></span><br><span class="line"><span class="title class_">DataType</span>(&#123;&#125;, <span class="string">&quot;array&quot;</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h3 id="æ˜¯å¦ä¸ºç©ºæ•°ç»„">æ˜¯å¦ä¸ºç©ºæ•°ç»„</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [];</span><br><span class="line"><span class="keyword">const</span> flag = <span class="title class_">Array</span>.<span class="title function_">isArray</span>(arr) &amp;&amp; !arr.<span class="property">length</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(flag); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h3 id="æ˜¯å¦ä¸ºç©ºå¯¹è±¡">æ˜¯å¦ä¸ºç©ºå¯¹è±¡</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> flag = <span class="title class_">DataType</span>(obj, <span class="string">&quot;object&quot;</span>) &amp;&amp; !<span class="title class_">Object</span>.<span class="title function_">keys</span>(obj).<span class="property">length</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(flag); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h3 id="æ»¡è¶³æ¡ä»¶æ—¶æ‰§è¡Œ">æ»¡è¶³æ¡ä»¶æ—¶æ‰§è¡Œ</h3><blockquote><p>å¦‚ä¸‹ï¼šFunc() ä¸ºè‡ªå·±å®šä¹‰çš„å‡½æ•°</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> flagA = <span class="literal">true</span>; <span class="comment">// æ¡ä»¶A</span></span><br><span class="line"><span class="keyword">const</span> flagB = <span class="literal">false</span>; <span class="comment">// æ¡ä»¶B</span></span><br><span class="line">(flagA || flagB) &amp;&amp; <span class="title class_">Func</span>(); <span class="comment">// æ»¡è¶³Aæˆ–Bæ—¶æ‰§è¡Œ</span></span><br><span class="line">(flagA || !flagB) &amp;&amp; <span class="title class_">Func</span>(); <span class="comment">// æ»¡è¶³Aæˆ–ä¸æ»¡è¶³Bæ—¶æ‰§è¡Œ</span></span><br><span class="line">flagA &amp;&amp; flagB &amp;&amp; <span class="title class_">Func</span>(); <span class="comment">// åŒæ—¶æ»¡è¶³Aå’ŒBæ—¶æ‰§è¡Œ</span></span><br><span class="line">flagA &amp;&amp; !flagB &amp;&amp; <span class="title class_">Func</span>(); <span class="comment">// æ»¡è¶³Aä¸”ä¸æ»¡è¶³Bæ—¶æ‰§è¡Œ</span></span><br></pre></td></tr></table></figure><h3 id="ä¸ºéå‡å€¼æ—¶æ‰§è¡Œ">ä¸ºéå‡å€¼æ—¶æ‰§è¡Œ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> flag = <span class="literal">false</span>; <span class="comment">// undefinedã€nullã€&quot;&quot;ã€0ã€falseã€NaN</span></span><br><span class="line">!flag &amp;&amp; <span class="title class_">Func</span>();</span><br></pre></td></tr></table></figure><h3 id="æ•°ç»„ä¸ä¸ºç©ºæ—¶æ‰§è¡Œ">æ•°ç»„ä¸ä¸ºç©ºæ—¶æ‰§è¡Œ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>];</span><br><span class="line">arr.<span class="property">length</span> &amp;&amp; <span class="title class_">Func</span>();</span><br></pre></td></tr></table></figure><h3 id="å¯¹è±¡ä¸ä¸ºç©ºæ—¶æ‰§è¡Œ">å¯¹è±¡ä¸ä¸ºç©ºæ—¶æ‰§è¡Œ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="number">3</span>, <span class="attr">b</span>: <span class="number">5</span>, <span class="attr">c</span>: <span class="number">6</span> &#125;;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(obj).<span class="property">length</span> &amp;&amp; <span class="title class_">Func</span>();</span><br></pre></td></tr></table></figure><h3 id="å‡½æ•°é€€å‡ºä»£æ›¿æ¡ä»¶åˆ†æ”¯é€€å‡º">å‡½æ•°é€€å‡ºä»£æ›¿æ¡ä»¶åˆ†æ”¯é€€å‡º</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (flag) &#123;</span><br><span class="line">  <span class="title class_">Func</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ¢æˆ</span></span><br><span class="line"><span class="keyword">if</span> (flag) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Func</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="switch-case-ä½¿ç”¨åŒºé—´">switch/case ä½¿ç”¨åŒºé—´</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> age = <span class="number">36</span>;</span><br><span class="line"><span class="keyword">switch</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="built_in">isNaN</span>(age):</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ä¸æ˜¯æ•°å­—ç±»å‹&quot;</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> age &lt; <span class="number">18</span>:</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æœªæˆå¹´äºº&quot;</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> age &gt;= <span class="number">18</span>:</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æˆå¹´äººäº†&quot;</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="attr">default</span>:</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è¯·è¾“å…¥æ‚¨çš„å¹´é¾„&quot;</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="String-å®ç”¨æŠ€å·§">String å®ç”¨æŠ€å·§</h2><h3 id="å¯¹æ¯”æ—¶é—´">å¯¹æ¯”æ—¶é—´</h3><blockquote><p>æ—¶é—´ä¸ªä½æ•°å½¢å¼éœ€è¡¥ 0</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> time1 = <span class="string">&quot;2022-05-01 18:00:01&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> time2 = <span class="string">&quot;2022-09-01 06:23:00&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> overtime = time1 &gt; time2;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(overtime); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h3 id="æ ¼å¼åŒ–-money-è´§å¸">æ ¼å¼åŒ– money è´§å¸</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">ThousandNum</span> = (<span class="params">num</span>) =&gt;</span><br><span class="line">  num.<span class="title function_">toString</span>().<span class="title function_">replace</span>(<span class="regexp">/\B(?=(\d&#123;3&#125;)+(?!\d))/g</span>, <span class="string">&quot;,&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> money = <span class="title class_">ThousandNum</span>(<span class="number">685258980</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(money); <span class="comment">// 685,258,980</span></span><br></pre></td></tr></table></figure><h3 id="ç”Ÿæˆéšæœº-ID">ç”Ÿæˆéšæœº ID</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">RandomId</span> = (<span class="params">len</span>) =&gt; <span class="title class_">Math</span>.<span class="title function_">random</span>().<span class="title function_">toString</span>(<span class="number">36</span>).<span class="title function_">substr</span>(<span class="number">3</span>, len);</span><br><span class="line"><span class="keyword">const</span> id = <span class="title class_">RandomId</span>(<span class="number">11</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(id); <span class="comment">// è¾“å‡ºéšæœºID way9w9lv2t</span></span><br></pre></td></tr></table></figure><h3 id="ç”Ÿæˆéšæœº-HEX-è‰²å€¼">ç”Ÿæˆéšæœº HEX è‰²å€¼</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">RandomColor</span> = (<span class="params"></span>) =&gt;</span><br><span class="line">  <span class="string">&quot;&quot;</span> +</span><br><span class="line">  <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">0xffffff</span>)</span><br><span class="line">    .<span class="title function_">toString</span>(<span class="number">16</span>)</span><br><span class="line">    .<span class="title function_">padEnd</span>(<span class="number">6</span>, <span class="string">&quot;0&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> color = <span class="title class_">RandomColor</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(color); <span class="comment">// è¾“å‡ºéšæœºHEXè‰²å€¼ 5b73e0</span></span><br></pre></td></tr></table></figure><h3 id="ç”Ÿæˆæ˜Ÿçº§è¯„åˆ†">ç”Ÿæˆæ˜Ÿçº§è¯„åˆ†</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">StartScore</span> = (<span class="params">rate</span>) =&gt; <span class="string">&quot;â˜…â˜…â˜…â˜…â˜…â˜†â˜†â˜†â˜†â˜†&quot;</span>.<span class="title function_">slice</span>(<span class="number">5</span> - rate, <span class="number">10</span> - rate);</span><br><span class="line"><span class="keyword">const</span> start = <span class="title class_">StartScore</span>(<span class="number">3</span>);</span><br><span class="line"><span class="keyword">const</span> start2 = <span class="title class_">StartScore</span>(<span class="number">5</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(start); <span class="comment">// â˜…â˜…â˜…â˜†â˜†</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(start2); <span class="comment">// â˜…â˜…â˜…â˜…â˜…</span></span><br></pre></td></tr></table></figure><h3 id="æ“ä½œ-URL-æŸ¥è¯¢å‚æ•°">æ“ä½œ URL æŸ¥è¯¢å‚æ•°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> params = <span class="keyword">new</span> <span class="title class_">URLSearchParams</span>(location.<span class="property">search</span>.<span class="title function_">replace</span>(<span class="regexp">/\?/gi</span>, <span class="string">&quot;&quot;</span>)); <span class="comment">// location.search = &quot;?name=cuihua&amp;sex=male&quot;</span></span><br><span class="line">params.<span class="title function_">has</span>(<span class="string">&quot;cuihua&quot;</span>); <span class="comment">// true</span></span><br><span class="line">params.<span class="title function_">get</span>(<span class="string">&quot;sex&quot;</span>); <span class="comment">// &quot;male&quot;</span></span><br></pre></td></tr></table></figure><h2 id="Objectï¼ˆå¯¹è±¡ï¼‰å®ç”¨æŠ€å·§">Objectï¼ˆå¯¹è±¡ï¼‰å®ç”¨æŠ€å·§</h2><h3 id="å…‹éš†å¯¹è±¡">å…‹éš†å¯¹è±¡</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _obj = &#123; <span class="attr">a</span>: <span class="number">0</span>, <span class="attr">b</span>: <span class="number">1</span>, <span class="attr">c</span>: <span class="number">2</span> &#125;; <span class="comment">// ä»¥ä¸‹æ–¹æ³•ä»»é€‰ä¸€ç§</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123; ..._obj &#125;; <span class="comment">// æ–¹æ³•ä¸€</span></span><br><span class="line"><span class="keyword">const</span> obj = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(_obj)); <span class="comment">// æ–¹æ³•äºŒ</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj); <span class="comment">// &#123;a: 0, b: 1, c: 2&#125;</span></span><br></pre></td></tr></table></figure><h3 id="åˆå¹¶å¯¹è±¡">åˆå¹¶å¯¹è±¡</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj1 = &#123; <span class="attr">a</span>: <span class="number">0</span>, <span class="attr">b</span>: <span class="number">1</span>, <span class="attr">c</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> obj2 = &#123; <span class="attr">c</span>: <span class="number">3</span>, <span class="attr">d</span>: <span class="number">4</span>, <span class="attr">e</span>: <span class="number">5</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> obj = &#123; ...obj1, ...obj2 &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj); <span class="comment">// &#123;a: 0, b: 1, c: 3, d: 4, e: 5&#125;</span></span><br></pre></td></tr></table></figure><h3 id="å¯¹è±¡å­—é¢é‡-ï¼ˆè·å–ç¯å¢ƒå˜é‡æ—¶å¿…ç”¨æ­¤æ–¹æ³•ï¼‰">å¯¹è±¡å­—é¢é‡ ï¼ˆè·å–ç¯å¢ƒå˜é‡æ—¶å¿…ç”¨æ­¤æ–¹æ³•ï¼‰</h3><blockquote><p>è·å–ç¯å¢ƒå˜é‡æ—¶å¿…ç”¨æ­¤æ–¹æ³•ï¼Œç”¨å®ƒä¸€ç›´çˆ½ï¼Œä¸€ç›´ç”¨å®ƒä¸€ç›´çˆ½</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> env = <span class="string">&quot;prod&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> link = &#123;</span><br><span class="line">  <span class="attr">dev</span>: <span class="string">&quot;å¼€å‘ç¯å¢ƒåœ°å€ ......&quot;</span>,</span><br><span class="line">  <span class="attr">test</span>: <span class="string">&quot;æµ‹è¯•ç¯å¢ƒåœ°å€ ......&quot;</span>,</span><br><span class="line">  <span class="attr">prod</span>: <span class="string">&quot;ç”Ÿäº§ç¯å¢ƒåœ°å€ ......&quot;</span>,</span><br><span class="line">&#125;[env];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(link); <span class="comment">// è¾“å‡º ç”Ÿäº§ç¯å¢ƒåœ°å€ ......</span></span><br></pre></td></tr></table></figure><h3 id="è·å–å¯¹è±¡å˜é‡å±æ€§">è·å–å¯¹è±¡å˜é‡å±æ€§</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> flag = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">b</span>: <span class="number">1</span>,</span><br><span class="line">  [flag ? <span class="string">&quot;c&quot;</span> : <span class="string">&quot;d&quot;</span>]: <span class="number">2</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj); <span class="comment">// &#123;a: 0, b: 1, d: 2&#125;</span></span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºçº¯ç©ºå¯¹è±¡">åˆ›å»ºçº¯ç©ºå¯¹è±¡</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="literal">null</span>);</span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">a</span> = <span class="number">0</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj); <span class="comment">// &#123;&#125;</span></span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤å¯¹è±¡æ— ç”¨å±æ€§">åˆ é™¤å¯¹è±¡æ— ç”¨å±æ€§</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="number">0</span>, <span class="attr">b</span>: <span class="number">1</span>, <span class="attr">c</span>: <span class="number">2</span> &#125;; <span class="comment">// åªæƒ³æ‹¿bå’Œc</span></span><br><span class="line"><span class="keyword">const</span> &#123; a, ...rest &#125; = obj;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rest); <span class="comment">// &#123;b: 1, c: 2&#125;</span></span><br></pre></td></tr></table></figure><h3 id="è§£æ„å¯¹è±¡å±æ€§åµŒå¥—">è§£æ„å¯¹è±¡å±æ€§åµŒå¥—</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="number">0</span>, <span class="attr">b</span>: <span class="number">1</span>, <span class="attr">c</span>: &#123; <span class="attr">d</span>: <span class="number">2</span>, <span class="attr">e</span>: <span class="number">3</span> &#125; &#125;;</span><br><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">  <span class="attr">c</span>: &#123; d, e &#125;,</span><br><span class="line">&#125; = obj;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(d, e); <span class="comment">// 2 3</span></span><br></pre></td></tr></table></figure><h3 id="è§£æ„å¯¹è±¡å±æ€§åˆ«å">è§£æ„å¯¹è±¡å±æ€§åˆ«å</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="number">0</span>, <span class="attr">b</span>: <span class="number">1</span>, <span class="attr">c</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> &#123; a, <span class="attr">b</span>: d, <span class="attr">c</span>: e &#125; = obj;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a, d, e); <span class="comment">// 0 1 2</span></span><br></pre></td></tr></table></figure><h3 id="è§£æ„å¯¹è±¡å±æ€§é»˜è®¤å€¼">è§£æ„å¯¹è±¡å±æ€§é»˜è®¤å€¼</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="number">0</span>, <span class="attr">b</span>: <span class="number">1</span>, <span class="attr">c</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> &#123; a, b = <span class="number">2</span>, d = <span class="number">3</span> &#125; = obj;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a, b, d); <span class="comment">// 0 1 3</span></span><br></pre></td></tr></table></figure><h2 id="Functionï¼ˆå‡½æ•°ï¼‰å®ç”¨æŠ€å·§">Functionï¼ˆå‡½æ•°ï¼‰å®ç”¨æŠ€å·§</h2><h3 id="å‡½æ•°è‡ªæ‰§è¡Œï¼ˆç«‹å³æ‰§è¡Œå‡½æ•°ï¼‰">å‡½æ•°è‡ªæ‰§è¡Œï¼ˆç«‹å³æ‰§è¡Œå‡½æ•°ï¼‰</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Func</span> = (<span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;)(); <span class="comment">// å¸¸ç”¨</span></span><br><span class="line"></span><br><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;)(); <span class="comment">// å¸¸ç”¨</span></span><br><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;)(); <span class="comment">// å¸¸ç”¨</span></span><br><span class="line">[(<span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;)()];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¸‹æ–¹å¼ï¼Œæˆ‘ä»¬å¹³æ—¶å¼€å‘æ—¶å†™çš„å°‘ï¼Œåœ¨ä¸€äº›å¼€æºé¡¹ç›®ä¸­å’Œæ ¼å¼åŒ–æ’ä»¶ä¸­ç»å¸¸çœ‹åˆ°ï¼Œè¦èƒ½ç†è§£å’ŒçŸ¥é“</span></span><br><span class="line">+(<span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;)();</span><br><span class="line">-(<span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;)();</span><br><span class="line">~(<span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;)();</span><br><span class="line">!(<span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> (<span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;)();</span><br><span class="line"><span class="keyword">new</span> (<span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;)();</span><br><span class="line"><span class="keyword">void</span> (<span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;)();</span><br><span class="line"><span class="keyword">typeof</span> (<span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;)();</span><br><span class="line"><span class="keyword">delete</span> (<span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>, (<span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;)();</span><br><span class="line"><span class="number">1</span> ^ (<span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;)();</span><br><span class="line"><span class="number">1</span> &gt; (<span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;)();</span><br></pre></td></tr></table></figure><h3 id="éšå¼è¿”å›å€¼">éšå¼è¿”å›å€¼</h3><blockquote><p>åªèƒ½ç”¨äº <strong>å•è¯­å¥è¿”å›å€¼ç®­å¤´å‡½æ•°</strong> ï¼Œå¦‚æœè¿”å›å€¼æ˜¯å¯¹è±¡å¿…é¡»ä½¿ç”¨ <strong><code>()</code></strong> åŒ…ä½</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Func</span> = <span class="keyword">function</span> (<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;Hello &quot;</span> + name;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// æ¢æˆ</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Func</span> = (<span class="params">name</span>) =&gt; <span class="string">&quot;Hello &quot;</span> + name;</span><br><span class="line"><span class="title class_">Func</span>(<span class="string">&quot;arryè€å¸ˆ&quot;</span>); <span class="comment">// &#x27;Hello arryè€å¸ˆ&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="ä¸€æ¬¡æ€§å‡½æ•°">ä¸€æ¬¡æ€§å‡½æ•°</h3><blockquote><p>é€‚ç”¨äºè¿è¡Œä¸€äº›åªéœ€æ‰§è¡Œä¸€æ¬¡çš„åˆå§‹åŒ–ä»£ç </p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Func</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;aa&quot;</span>);</span><br><span class="line">  <span class="title class_">Func</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;bb&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æƒ°æ€§è½½å…¥å‡½æ•°">æƒ°æ€§è½½å…¥å‡½æ•°</h3><blockquote><p>å‡½æ•°å†…åˆ¤æ–­åˆ†æ”¯è¾ƒå¤šè¾ƒå¤æ‚æ—¶å¯å¤§å¤§èŠ‚çº¦èµ„æºå¼€é”€</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Func</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (a === b) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;aa&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;bb&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ¢æˆ</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Func</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (a === b) &#123;</span><br><span class="line">    <span class="title class_">Func</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;aa&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title class_">Func</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;bb&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Func</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ£€æµ‹éç©ºå‚æ•°">æ£€æµ‹éç©ºå‚æ•°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">IsRequired</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;å¿…é¡»è¦ä¼ å…¥å‚æ•° ï¼&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Func</span>(<span class="params">name = IsRequired()</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello &quot;</span> + name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Func</span>(); <span class="comment">// &quot;å¿…é¡»è¦ä¼ å…¥å‚æ•° ï¼&quot;</span></span><br><span class="line"><span class="title class_">Func</span>(<span class="string">&quot;arryè€å¸ˆ&quot;</span>); <span class="comment">// Hello arryè€å¸ˆ</span></span><br></pre></td></tr></table></figure><h3 id="å­—ç¬¦ä¸²åˆ›å»ºå‡½æ•°">å­—ç¬¦ä¸²åˆ›å»ºå‡½æ•°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Func</span> = <span class="keyword">new</span> <span class="title class_">Function</span>(<span class="string">&quot;name&quot;</span>, <span class="string">&#x27;console.log(&quot;Hello &quot; + name)&#x27;</span>);</span><br><span class="line"><span class="title class_">Func</span>(<span class="string">&quot;arryè€å¸ˆ&quot;</span>); <span class="comment">// Hello arryè€å¸ˆ</span></span><br></pre></td></tr></table></figure><h3 id="ä¼˜é›…å¤„ç†é”™è¯¯ä¿¡æ¯">ä¼˜é›…å¤„ç†é”™è¯¯ä¿¡æ¯</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="title class_">Func</span>();</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  location.<span class="property">href</span> = <span class="string">&quot;https://stackoverflow.com/search?q=[js]+&quot;</span> + e.<span class="property">message</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¼˜é›…å¤„ç†-Async-Await-å‚æ•°">ä¼˜é›…å¤„ç† Async/Await å‚æ•°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">AsyncTo</span>(<span class="params">promise</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> promise.<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> [<span class="literal">null</span>, data]).<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> [err]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> [err, res] = <span class="keyword">await</span> <span class="title class_">AsyncTo</span>(<span class="title class_">Func</span>());</span><br></pre></td></tr></table></figure><h3 id="ä¼˜é›…å¤„ç†å¤šä¸ªå‡½æ•°è¿”å›å€¼">ä¼˜é›…å¤„ç†å¤šä¸ªå‡½æ•°è¿”å›å€¼</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Func</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>([<span class="title function_">fetch</span>(<span class="string">&quot;/user&quot;</span>), <span class="title function_">fetch</span>(<span class="string">&quot;/comment&quot;</span>)]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> [user, comment] = <span class="keyword">await</span> <span class="title class_">Func</span>(); <span class="comment">// éœ€åœ¨asyncåŒ…å›´ä¸‹ä½¿ç”¨</span></span><br></pre></td></tr></table></figure><h2 id="Arrayï¼ˆæ•°ç»„ï¼‰å®ç”¨æŠ€å·§">Arrayï¼ˆæ•°ç»„ï¼‰å®ç”¨æŠ€å·§</h2><h3 id="å…‹éš†æ•°ç»„">å…‹éš†æ•°ç»„</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">const</span> arr = [..._arr];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">// [0, 1, 2]</span></span><br></pre></td></tr></table></figure><h3 id="åˆå¹¶æ•°ç»„">åˆå¹¶æ•°ç»„</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr1 = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">const</span> arr2 = [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">const</span> arr = [...arr1, ...arr2];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">// [0, 1, 2, 3, 4, 5];</span></span><br></pre></td></tr></table></figure><h3 id="å»é‡æ•°ç»„">å»é‡æ•°ç»„</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [...<span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="literal">null</span>, <span class="literal">null</span>])];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">// [0, 1, null]</span></span><br></pre></td></tr></table></figure><h3 id="æ··æ·†æ•°ç»„">æ··æ·†æ•°ç»„</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].<span class="title function_">slice</span>().<span class="title function_">sort</span>(<span class="function">() =&gt;</span> <span class="title class_">Math</span>.<span class="title function_">random</span>() - <span class="number">0.5</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">// [3, 4, 0, 5, 1, 2]</span></span><br></pre></td></tr></table></figure><h3 id="æ¸…ç©ºæ•°ç»„">æ¸…ç©ºæ•°ç»„</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">arr.<span class="property">length</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">// []</span></span><br></pre></td></tr></table></figure><h3 id="æˆªæ–­æ•°ç»„">æˆªæ–­æ•°ç»„</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">arr.<span class="property">length</span> = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">// [0, 1]</span></span><br></pre></td></tr></table></figure><h3 id="äº¤æ¢èµ‹å€¼">äº¤æ¢èµ‹å€¼</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">1</span>;</span><br><span class="line">[a, b] = [b, a];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a, b); <span class="comment">// 1 0</span></span><br></pre></td></tr></table></figure><h3 id="è¿‡æ»¤ç©ºå€¼">è¿‡æ»¤ç©ºå€¼</h3><blockquote><p>ç©ºå€¼ï¼šundefinedã€nullã€â€œâ€ã€0ã€falseã€NaN</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="literal">undefined</span>, <span class="literal">null</span>, <span class="string">&quot;&quot;</span>, <span class="number">0</span>, <span class="literal">false</span>, <span class="title class_">NaN</span>, <span class="number">1</span>, <span class="number">2</span>].<span class="title function_">filter</span>(<span class="title class_">Boolean</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">// [1, 2]</span></span><br></pre></td></tr></table></figure><h3 id="å¼‚æ­¥ç´¯è®¡">å¼‚æ­¥ç´¯è®¡</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">Func</span>(<span class="params">deps</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> deps.<span class="title function_">reduce</span>(<span class="keyword">async</span> (t, v) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> dep = <span class="keyword">await</span> t;</span><br><span class="line">    <span class="keyword">const</span> version = <span class="keyword">await</span> <span class="title class_">Todo</span>(v);</span><br><span class="line">    dep[v] = version;</span><br><span class="line">    <span class="keyword">return</span> dep;</span><br><span class="line">  &#125;, <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(&#123;&#125;));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title class_">Func</span>(); <span class="comment">// éœ€åœ¨asyncåŒ…å›´ä¸‹ä½¿ç”¨</span></span><br></pre></td></tr></table></figure><h3 id="æ•°ç»„é¦–éƒ¨æ’å…¥æˆå‘˜">æ•°ç»„é¦–éƒ¨æ’å…¥æˆå‘˜</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>]; <span class="comment">// ä»¥ä¸‹æ–¹æ³•ä»»é€‰ä¸€ç§</span></span><br><span class="line">arr.<span class="title function_">unshift</span>(<span class="number">0</span>); <span class="comment">// [0, 1, 2]</span></span><br><span class="line">arr = [<span class="number">0</span>].<span class="title function_">concat</span>(arr); <span class="comment">// [0, 1, 2]</span></span><br><span class="line">arr = [<span class="number">0</span>, ...arr]; <span class="comment">// [0, 1, 2]</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">// [0, 1, 2]</span></span><br></pre></td></tr></table></figure><h3 id="æ•°ç»„å°¾éƒ¨æ’å…¥æˆå‘˜">æ•°ç»„å°¾éƒ¨æ’å…¥æˆå‘˜</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">0</span>, <span class="number">1</span>]; <span class="comment">// ä»¥ä¸‹æ–¹æ³•ä»»é€‰ä¸€ç§</span></span><br><span class="line">arr.<span class="title function_">push</span>(<span class="number">2</span>);</span><br><span class="line">arr.<span class="title function_">concat</span>(<span class="number">2</span>);</span><br><span class="line">arr[arr.<span class="property">length</span>] = <span class="number">2</span>;</span><br><span class="line">arr = [...arr, <span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">// [0, 1, 2]</span></span><br></pre></td></tr></table></figure><h3 id="ç»Ÿè®¡æ•°ç»„æˆå‘˜ä¸ªæ•°">ç»Ÿè®¡æ•°ç»„æˆå‘˜ä¸ªæ•°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">const</span> count = arr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">t, v</span>) =&gt;</span> &#123;</span><br><span class="line">  t[v] = t[v] ? ++t[v] : <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> t;</span><br><span class="line">&#125;, &#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(count); <span class="comment">// &#123; 0: 1, 1: 2, 2: 3 &#125;</span></span><br></pre></td></tr></table></figure><h3 id="è§£æ„æ•°ç»„æˆå‘˜åµŒå¥—">è§£æ„æ•°ç»„æˆå‘˜åµŒå¥—</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">0</span>, <span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>, [<span class="number">4</span>, <span class="number">5</span>]]];</span><br><span class="line"><span class="keyword">const</span> [a, b, [c, d, [e, f]]] = arr;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a, b, c, d, e, f); <span class="comment">// 0 1 2 3 4 5</span></span><br></pre></td></tr></table></figure><h3 id="è§£æ„æ•°ç»„æˆå‘˜åˆ«å">è§£æ„æ•°ç»„æˆå‘˜åˆ«å</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="number">0</span>: a, <span class="number">1</span>: b, <span class="number">2</span>: c &#125; = arr;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a, b, c); <span class="comment">// 0 1 2</span></span><br></pre></td></tr></table></figure><h3 id="è§£æ„æ•°ç»„æˆå‘˜é»˜è®¤å€¼">è§£æ„æ•°ç»„æˆå‘˜é»˜è®¤å€¼</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">const</span> [a, b, c = <span class="number">3</span>, d = <span class="number">4</span>] = arr;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a, b, c, d); <span class="comment">// 0 1 2 4</span></span><br></pre></td></tr></table></figure><h3 id="è·å–éšæœºæ•°ç»„æˆå‘˜">è·å–éšæœºæ•°ç»„æˆå‘˜</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">const</span> randomItem = arr[<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * arr.<span class="property">length</span>)];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(randomItem); <span class="comment">// è¾“å‡ºéšæœºæ•°</span></span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºæŒ‡å®šé•¿åº¦æ•°ç»„">åˆ›å»ºæŒ‡å®šé•¿åº¦æ•°ç»„</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [...<span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">3</span>).<span class="title function_">keys</span>()];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">// [0, 1, 2]</span></span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºæŒ‡å®šé•¿åº¦ä¸”å€¼ç›¸ç­‰çš„æ•°ç»„">åˆ›å»ºæŒ‡å®šé•¿åº¦ä¸”å€¼ç›¸ç­‰çš„æ•°ç»„</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">3</span>).<span class="title function_">fill</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">// [0, 0, 0]</span></span><br></pre></td></tr></table></figure><h3 id="reduce-ä»£æ›¿-map-å’Œ-filter">reduce ä»£æ›¿ map å’Œ filter</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// map</span></span><br><span class="line"><span class="keyword">const</span> arr = _arr.<span class="title function_">map</span>(<span class="function">(<span class="params">v</span>) =&gt;</span> v * <span class="number">2</span>); <span class="comment">// [0, 2, 4]</span></span><br><span class="line"><span class="keyword">const</span> arr = _arr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">t, v</span>) =&gt;</span> &#123;</span><br><span class="line">  t.<span class="title function_">push</span>(v * <span class="number">2</span>);</span><br><span class="line">  <span class="keyword">return</span> t;</span><br><span class="line">&#125;, []);</span><br><span class="line"><span class="comment">// [0, 2, 4]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// filter</span></span><br><span class="line"><span class="keyword">const</span> arr = _arr.<span class="title function_">filter</span>(<span class="function">(<span class="params">v</span>) =&gt;</span> v &gt; <span class="number">0</span>); <span class="comment">// [1, 2]</span></span><br><span class="line"><span class="keyword">const</span> arr = _arr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">t, v</span>) =&gt;</span> &#123;</span><br><span class="line">  v &gt; <span class="number">0</span> &amp;&amp; t.<span class="title function_">push</span>(v);</span><br><span class="line">  <span class="keyword">return</span> t;</span><br><span class="line">&#125;, []);</span><br><span class="line"><span class="comment">// [1, 2]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// map å’Œ filter</span></span><br><span class="line"><span class="keyword">const</span> arr = _arr.<span class="title function_">map</span>(<span class="function">(<span class="params">v</span>) =&gt;</span> v * <span class="number">2</span>).<span class="title function_">filter</span>(<span class="function">(<span class="params">v</span>) =&gt;</span> v &gt; <span class="number">2</span>); <span class="comment">// [4]</span></span><br><span class="line"><span class="keyword">const</span> arr = _arr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">t, v</span>) =&gt;</span> &#123;</span><br><span class="line">  v = v * <span class="number">2</span>;</span><br><span class="line">  v &gt; <span class="number">2</span> &amp;&amp; t.<span class="title function_">push</span>(v);</span><br><span class="line">  <span class="keyword">return</span> t;</span><br><span class="line">&#125;, []);</span><br><span class="line"><span class="comment">// [4]</span></span><br></pre></td></tr></table></figure><h2 id="DOM-å®ç”¨æŠ€å·§">DOM å®ç”¨æŠ€å·§</h2><h3 id="æ˜¾ç¤ºå…¨éƒ¨-DOM-è¾¹æ¡†">æ˜¾ç¤ºå…¨éƒ¨ DOM è¾¹æ¡†</h3><blockquote><p>è°ƒè¯•é¡µé¢å…ƒç´ è¾¹ç•Œæ—¶ä½¿ç”¨</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[].<span class="property">forEach</span>.<span class="title function_">call</span>($$(<span class="string">&quot;*&quot;</span>), <span class="function">(<span class="params">dom</span>) =&gt;</span> &#123;</span><br><span class="line">  dom.<span class="property">style</span>.<span class="property">outline</span> =</span><br><span class="line">    <span class="string">&quot;1px solid &quot;</span> + (~~(<span class="title class_">Math</span>.<span class="title function_">random</span>() * (<span class="number">1</span> &lt;&lt; <span class="number">24</span>))).<span class="title function_">toString</span>(<span class="number">16</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="è‡ªé€‚åº”é¡µé¢">è‡ªé€‚åº”é¡µé¢</h3><blockquote><p>é¡µé¢åŸºäºä¸€å¼ è®¾è®¡å›¾ä½†éœ€åšå¤šæ¬¾æœºå‹è‡ªé€‚åº”ï¼Œå…ƒç´ å°ºå¯¸ä½¿ç”¨<code>rem</code>è¿›è¡Œè®¾ç½®</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">AutoResponse</span>(<span class="params">width = <span class="number">750</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> target = <span class="variable language_">document</span>.<span class="property">documentElement</span>;</span><br><span class="line">  target.<span class="property">clientWidth</span> &gt;= <span class="number">600</span></span><br><span class="line">    ? (target.<span class="property">style</span>.<span class="property">fontSize</span> = <span class="string">&quot;80px&quot;</span>)</span><br><span class="line">    : (target.<span class="property">style</span>.<span class="property">fontSize</span> = (target.<span class="property">clientWidth</span> / width) * <span class="number">100</span> + <span class="string">&quot;px&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¿‡æ»¤-XSS">è¿‡æ»¤ XSS</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">FilterXss</span>(<span class="params">content</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> elem = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">  elem.<span class="property">innerText</span> = content;</span><br><span class="line">  <span class="keyword">const</span> result = elem.<span class="property">innerHTML</span>;</span><br><span class="line">  elem = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å­˜å–-LocalStorage">å­˜å– LocalStorage</h3><blockquote><p>ååºåˆ—åŒ–å–ï¼Œåºåˆ—åŒ–å­˜</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> love = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;icoding&quot;</span>));</span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;icoding&quot;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="string">&quot;I&#x27;m writing code&quot;</span>));</span><br></pre></td></tr></table></figure><hr><blockquote><p>æœ¬ç¯‡æ–‡ç« å‡è½¬è½½è‡ªarryè€å¸ˆçš„<a href="https://www.arryblog.com/interview/htmlcss/html-html5.html#%E9%AB%98%E9%A2%91%E9%87%8D%E7%82%B9">æ•™ç¨‹</a>ï¼Œä»…ä¾›æœ¬äººå­¦ä¹ ä½¿ç”¨ã€‚</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Numberä½¿ç”¨æŠ€å·§&quot;&gt;Numberä½¿ç”¨æŠ€å·§&lt;/h2&gt;
&lt;h3 id=&quot;å–æ•´&quot;&gt;å–æ•´&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»£æ›¿æ­£æ•°çš„&lt;code&gt;Math.floor()&lt;/code&gt;ï¼Œä»£æ›¿è´Ÿæ•°çš„&lt;code&gt;Math.ceil()&lt;/code&gt;&lt;/p&gt;
&lt;/b</summary>
      
    
    
    
    <category term="å‰ç«¯ğŸ’¥" scheme="https://blog.cilicili.xyz/categories/%E5%89%8D%E7%AB%AF%F0%9F%92%A5/"/>
    
    
    <category term="JavaScript" scheme="https://blog.cilicili.xyz/tags/JavaScript/"/>
    
    <category term="æŠ€å·§" scheme="https://blog.cilicili.xyz/tags/%E6%8A%80%E5%B7%A7/"/>
    
  </entry>
  
  <entry>
    <title>ã€å‰ç«¯ã€‘JavaScriptæ ¸å¿ƒåŸºç¡€å’Œå¸¸ç”¨æ–¹æ³•</title>
    <link href="https://blog.cilicili.xyz/posts/ab522f5f.html"/>
    <id>https://blog.cilicili.xyz/posts/ab522f5f.html</id>
    <published>2022-07-31T06:44:07.000Z</published>
    <updated>2022-09-09T09:35:36.193Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Jsæ ¸å¿ƒåŸºç¡€">Jsæ ¸å¿ƒåŸºç¡€</h2><h3 id="å­—ç¬¦ä¸²çš„å¸¸ç”¨æ–¹æ³•">å­—ç¬¦ä¸²çš„å¸¸ç”¨æ–¹æ³•</h3><table><thead><tr><th style="text-align:left">æ–¹æ³•åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">charAt()</td><td style="text-align:left">è·å–æŒ‡å®šä½ç½®çš„å­—ç¬¦</td></tr><tr><td style="text-align:left">substring()</td><td style="text-align:left">æå–å­—ç¬¦ä¸²ä¸­ï¼Œä»‹äºä¸¤ä¸ªæŒ‡å®šä¸‹æ ‡ä¹‹é—´çš„å­—ç¬¦</td></tr><tr><td style="text-align:left">substr()</td><td style="text-align:left">åœ¨å­—ç¬¦ä¸²ä¸­æŒ‡å®šçš„ä½ç½®å¤„ï¼Œæå–æŒ‡å®šæ•°ç›®çš„å­—ç¬¦</td></tr><tr><td style="text-align:left">slice()</td><td style="text-align:left"><strong>æå–å­—ç¬¦ä¸²çš„æŸä¸ªéƒ¨åˆ†ï¼Œç±»ä¼¼äº substring() ï¼Œä¸åŒä¹‹å¤„ï¼š</strong> 1ã€substring() å¯ä»¥è‡ªåŠ¨äº¤æ¢å‚æ•°çš„ä½ç½®ï¼Œè€Œ slice()ä¸è¡Œ 2ã€slice()çš„ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯è´Ÿæ•°ï¼Œè€Œ substring()ä¸è¡Œ</td></tr><tr><td style="text-align:left">toUpperCase()</td><td style="text-align:left">æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™</td></tr><tr><td style="text-align:left">toLowerCase()</td><td style="text-align:left">æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå°å†™</td></tr><tr><td style="text-align:left">indexOf</td><td style="text-align:left">è¿”å›å­—ç¬¦ä¸²ä¸­æŒ‡å®šå­—ç¬¦é¦–æ¬¡å‡ºç°çš„ç´¢å¼•</td></tr></tbody></table><h3 id="æ•°æ®ç±»å‹è½¬æ¢">æ•°æ®ç±»å‹è½¬æ¢</h3><table><thead><tr><th style="text-align:left">æ–¹æ³•åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">Number()</td><td style="text-align:left">å°†å…¶ä»–ç±»å‹çš„å€¼è½¬æ¢ä¸ºæ•°å­—</td></tr><tr><td style="text-align:left">parseInt()</td><td style="text-align:left">å¯ä»¥å°†å‚æ•°è½¬æˆæ•´æ•°</td></tr><tr><td style="text-align:left">parseFloat()</td><td style="text-align:left">å¯ä»¥å°†å‚æ•°è½¬æˆæµ®ç‚¹æ•°</td></tr><tr><td style="text-align:left">String()</td><td style="text-align:left">å°†å…¶ä»–ç±»å‹çš„å€¼è½¬æ¢æˆå­—ç¬¦ä¸² ä¾‹å¦‚ï¼šString(123)</td></tr><tr><td style="text-align:left">toString()</td><td style="text-align:left"><strong>å°†å…¶ä»–ç±»å‹çš„å€¼è½¬æ¢æˆå­—ç¬¦ä¸² ï¼Œä¾‹å¦‚ï¼š(5).toString() å’Œ String()çš„åŒºåˆ«ï¼š</strong> 1ã€toString()æ— æ³•è½¬æ¢ null å’Œ undefinedï¼ŒString()å¯ä»¥è½¬æ¢ null å’Œ undefined 2ã€toString()å¯å¢åŠ è¿›åˆ¶å‚æ•°ï¼Œå°†å­—ç¬¦ä¸²è¿›è¡Œè¿›åˆ¶è½¬æ¢ï¼ŒString()ä¸èƒ½è½¬æ¢è¿›åˆ¶ 3ã€å†™æ³•ä¸åŒï¼Œå¯å‚è€ƒä¸Šè¿°ä¾‹å­</td></tr><tr><td style="text-align:left">Boolean()</td><td style="text-align:left">å°†å…¶ä»–ç±»å‹çš„å€¼è½¬æ¢ä¸ºå¸ƒå°”å€¼</td></tr></tbody></table><h3 id="Windowä¸‹çš„æ–¹æ³•">Windowä¸‹çš„æ–¹æ³•</h3><table><thead><tr><th style="text-align:left">æ–¹æ³•åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">prompt()</td><td style="text-align:left">å¼¹å‡ºè¾“å…¥æ¡†</td></tr></tbody></table><h3 id="Numberä¸‹çš„æ–¹æ³•">Numberä¸‹çš„æ–¹æ³•</h3><table><thead><tr><th style="text-align:left">æ–¹æ³•åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">toFixed()</td><td style="text-align:left">æŒ‡å®šå°æ•°ç‚¹åé¢çš„ä½æ•°</td></tr></tbody></table><h3 id="Mathæ–¹æ³•">Mathæ–¹æ³•</h3><table><thead><tr><th style="text-align:left">æ–¹æ³•åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">Math.pow(x,y)</td><td style="text-align:left">è¿”å› x çš„ y æ¬¡å¹‚ï¼ˆä¸å¸¸ç”¨ï¼Œäº†è§£å³å¯ï¼‰</td></tr><tr><td style="text-align:left">Math.sqrt()</td><td style="text-align:left">è¿”å›ä¸€ä¸ªæ•°çš„å¹³æ–¹æ ¹ï¼ˆä¸å¸¸ç”¨ï¼Œäº†è§£å³å¯ï¼‰</td></tr><tr><td style="text-align:left">Math.ceil()</td><td style="text-align:left">å‘ä¸Šå–æ•´</td></tr><tr><td style="text-align:left">Math.floor()</td><td style="text-align:left">å‘ä¸‹å–æ•´</td></tr></tbody></table><h3 id="æ•°ç»„çš„å®šä¹‰">æ•°ç»„çš„å®šä¹‰</h3><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">Array</td><td style="text-align:left">æ•°ç»„ï¼Œ ç”¨æ¥å­˜å‚¨ä¸€ç»„å€¼</td></tr><tr><td style="text-align:left">new</td><td style="text-align:left"><strong>ä¸ Array ç»“åˆä½¿ç”¨ï¼Œåˆ›å»ºæ•°ç»„</strong>ï¼Œç¤ºä¾‹ï¼šnew Array()</td></tr></tbody></table><h3 id="æ•°ç»„çš„å¸¸ç”¨æ–¹æ³•">æ•°ç»„çš„å¸¸ç”¨æ–¹æ³•</h3><table><thead><tr><th style="text-align:left">æ–¹æ³•åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">push()</td><td style="text-align:left">åœ¨å°¾éƒ¨æ’å…¥æ–°é¡¹</td></tr><tr><td style="text-align:left">pop()</td><td style="text-align:left">åˆ é™¤æ•°ç»„çš„æœ€åä¸€é¡¹</td></tr><tr><td style="text-align:left">unshift()</td><td style="text-align:left">åœ¨å¤´éƒ¨æ’å…¥æ–°é¡¹</td></tr><tr><td style="text-align:left">shift()</td><td style="text-align:left">åˆ é™¤æ•°ç»„çš„ç¬¬ä¸€é¡¹</td></tr><tr><td style="text-align:left">splice()</td><td style="text-align:left">ç”¨äºæ·»åŠ æˆ–åˆ é™¤æ•°ç»„çš„å…ƒç´ </td></tr><tr><td style="text-align:left">slice()</td><td style="text-align:left">ä»å·²æœ‰çš„æ•°ç»„ä¸­è¿”å›é€‰å®šçš„å…ƒç´ </td></tr><tr><td style="text-align:left">concat()</td><td style="text-align:left">åˆå¹¶å¤šä¸ªæ•°ç»„</td></tr><tr><td style="text-align:left">reverse()</td><td style="text-align:left">é¢ å€’æ•°ç»„ä¸­å…ƒç´ çš„é¡ºåº</td></tr><tr><td style="text-align:left">indexOf()</td><td style="text-align:left">è¿”å›æŒ‡å®šå…ƒç´ çš„ç´¢å¼•å€¼ï¼Œå¦‚æœä¸å­˜åœ¨è¿”å›-1</td></tr><tr><td style="text-align:left">includes()</td><td style="text-align:left">åˆ¤æ–­ä¸€ä¸ªæ•°ç»„æ˜¯å¦åŒ…å«æŒ‡å®šçš„å€¼ï¼Œè¿”å›å¸ƒå°”å€¼</td></tr><tr><td style="text-align:left">sort()</td><td style="text-align:left">ç”¨äºæ•°ç»„æ’åºï¼ˆæ¶‰åŠåˆ°å‡½æ•°çŸ¥è¯†ï¼Œåœ¨å‡½æ•°ä¸€èŠ‚å†è¿›è¡Œè¯¦ç»†çš„è®²è§£ï¼‰</td></tr><tr><td style="text-align:left">join()</td><td style="text-align:left">å°†æ•°ç»„è½¬æˆå­—ç¬¦ä¸²</td></tr></tbody></table><h3 id="å­—ç¬¦ä¸²çš„å¸¸ç”¨æ–¹æ³•-v2">å­—ç¬¦ä¸²çš„å¸¸ç”¨æ–¹æ³•</h3><table><thead><tr><th style="text-align:left">æ–¹æ³•å</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">split()</td><td style="text-align:left">å°†å­—ç¬¦ä¸²è½¬æˆæ•°ç»„</td></tr></tbody></table><h2 id="JavaScriptå‡½æ•°ã€BOM-and-DOM">JavaScriptå‡½æ•°ã€BOM and DOM</h2><h3 id="å‡½æ•°çš„å®šä¹‰ã€å‚æ•°å’Œè¿”å›å€¼">å‡½æ•°çš„å®šä¹‰ã€å‚æ•°å’Œè¿”å›å€¼</h3><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">function</td><td style="text-align:left"><strong>å®šä¹‰å‡½æ•°ã€‚æœ‰å¦‚ä¸‹ä¸¤ç§æ–¹å¼ï¼š</strong> 1ã€function å‡½æ•°å() {}; è¿™ç§å£°æ˜æ–¹å¼ï¼Œé¢„è§£æé˜¶æ®µå‡½æ•°ä¼šæå‡ 2ã€var å‡½æ•°å = function() {}; è¿™ç§å£°æ˜æ–¹å¼ï¼Œé¢„è§£æé˜¶æ®µåªä¼šæå‡å‡½æ•°åï¼Œåé¢çš„å‡½æ•°ä½“ function() {}ä¸ä¼šæå‡ 3ã€å‡½æ•°è°ƒç”¨æ˜¯åœ¨å‡½æ•°ååé¢æ·»åŠ æ‹¬å·ï¼Œ ç¤ºä¾‹ï¼š fn()è¡¨ç¤ºè°ƒç”¨å‡½æ•° fn</td></tr><tr><td style="text-align:left">arguments</td><td style="text-align:left">æ¥æ”¶ä¼ å…¥å‡½æ•°çš„å®å‚åˆ—è¡¨ï¼Œæ˜¯ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡ï¼ˆä¸æ•°ç»„ç±»ä¼¼ï¼Œæ‹¥æœ‰ length å±æ€§ï¼Œå¯ä»¥é€šè¿‡ä¸‹æ ‡è®¿é—®æŸä¸ªå€¼ï¼Œä½†æ˜¯ä¸å¯ä»¥ä½¿ç”¨æ•°ç»„çš„æ–¹æ³•ï¼‰ 1ã€å½¢å‚ï¼šå®šä¹‰å‡½æ•°æ—¶è®¾ç½®çš„å‚æ•° 2ã€å®å‚ï¼šè°ƒç”¨å‡½æ•°æ—¶ä¼ å…¥çš„å‚æ•°</td></tr><tr><td style="text-align:left">return</td><td style="text-align:left">è®¾ç½®å‡½æ•°çš„è¿”å›å€¼ï¼Œè°ƒç”¨å‡½æ•°æ—¶ï¼Œé‡åˆ° return è¯­å¥ä¼šç«‹å³é€€å‡ºå‡½æ•°ï¼Œå¹¶è®¾ç½®å‡½æ•°çš„è¿”å›å€¼</td></tr></tbody></table><h3 id="é—­åŒ…å’Œç«‹å³æ‰§è¡Œå‡½æ•°">é—­åŒ…å’Œç«‹å³æ‰§è¡Œå‡½æ•°</h3><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">closure</td><td style="text-align:left"><strong>å‡½æ•°æœ¬èº«å’Œè¯¥å‡½æ•°å£°æ˜æ—¶æ‰€å¤„çš„ç¯å¢ƒçŠ¶æ€çš„ç»„åˆï¼Œç®€å•ç†è§£å°±æ˜¯é—­åŒ…å¯ä»¥åœ¨ä¸€ä¸ªå†…å±‚å‡½æ•°ä¸­è®¿é—®åˆ°å…¶å¤–å±‚å‡½æ•°çš„ä½œç”¨åŸŸã€‚</strong> ç¤ºä¾‹ï¼šä¸‹é¢è¿™æ®µä»£ç ä¸­çš„ f2 å‡½æ•°ï¼Œå°±æ˜¯é—­åŒ…ï¼Œå¯ä»¥è®¿é—®åˆ°å¤–å±‚å‡½æ•° f1 ä½œç”¨åŸŸçš„ä¸­å˜é‡ n çš„å€¼ function f1() { var n = 888; function f2() { alert(n); } return f2; } var result = f1(); result(); // 888</td></tr><tr><td style="text-align:left">IIFE</td><td style="text-align:left">Immediately Invoked Function Expression çš„é¦–å­—æ¯ç¼©å†™ï¼Œç«‹å³è°ƒç”¨å‡½æ•°è¡¨è¾¾å¼ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„ JavaScript å‡½æ•°å†™æ³•ï¼Œä¸€æ—¦è¢«å®šä¹‰ï¼Œå°±ç«‹å³è¢«è°ƒç”¨ã€‚ç¤ºä¾‹ï¼š (function () { //å‡½æ•°ä½“ })();</td></tr></tbody></table><h3 id="DOMçš„åŸºæœ¬æ¦‚å¿µ">DOMçš„åŸºæœ¬æ¦‚å¿µ</h3><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">DOM</td><td style="text-align:left">æ–‡æ¡£å¯¹è±¡æ¨¡å‹(Document Object Model)ï¼Œæ˜¯ JavaScript æ“ä½œ HTML æ–‡æ¡£çš„æ¥å£ï¼Œå®ƒæœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯å°†æ–‡æ¡£è¡¨ç¤ºä¸ºèŠ‚ç‚¹æ ‘ã€‚</td></tr><tr><td style="text-align:left">document</td><td style="text-align:left">document å¯¹è±¡è¡¨ç¤ºæ•´ä¸ª HTML æ–‡æ¡£ï¼Œå®ƒæ˜¯ DOM èŠ‚ç‚¹æ ‘çš„æ ¹</td></tr></tbody></table><h3 id="èŠ‚ç‚¹ç±»å‹">èŠ‚ç‚¹ç±»å‹</h3><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">nodeType</td><td style="text-align:left">è¿”å›èŠ‚ç‚¹çš„ç±»å‹ï¼ˆä¸å¸¸ç”¨ï¼Œäº†è§£å³å¯ï¼‰ å¸¸è§çš„è¿”å›å€¼å¦‚ä¸‹ï¼š â‘ nodeType å±æ€§è¿”å› 1ï¼Œè¡¨ç¤ºèŠ‚ç‚¹æ˜¯ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹  â‘¡nodeType å±æ€§è¿”å› 3ï¼Œè¡¨ç¤ºèŠ‚ç‚¹æ˜¯ä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹  â‘¢nodeType å±æ€§è¿”å› 8ï¼Œè¡¨ç¤ºèŠ‚ç‚¹æ˜¯ä¸€ä¸ªæ³¨é‡ŠèŠ‚ç‚¹ â‘£nodeType å±æ€§è¿”å› 9ï¼Œè¡¨ç¤ºèŠ‚ç‚¹æ˜¯ document èŠ‚ç‚¹ â‘¤nodeType å±æ€§è¿”å› 10ï¼Œè¡¨ç¤ºèŠ‚ç‚¹æ˜¯ DTD èŠ‚ç‚¹</td></tr></tbody></table><h3 id="èŠ‚ç‚¹çš„å…³ç³»">èŠ‚ç‚¹çš„å…³ç³»</h3><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">firstChild</td><td style="text-align:left">è¿”å›ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ï¼ŒåŒ…æ‹¬æ–‡æœ¬èŠ‚ç‚¹ã€æ³¨é‡ŠèŠ‚ç‚¹å’Œå…ƒç´ èŠ‚ç‚¹ç­‰æ‰€æœ‰ç±»å‹çš„èŠ‚ç‚¹</td></tr><tr><td style="text-align:left">firstElementChild</td><td style="text-align:left">è¿”å›ç¬¬ä¸€ä¸ªå­å…ƒç´ èŠ‚ç‚¹</td></tr><tr><td style="text-align:left">lastChild</td><td style="text-align:left">è¿”å›æœ€åä¸€ä¸ªå­èŠ‚ç‚¹ï¼ŒåŒ…æ‹¬æ–‡æœ¬èŠ‚ç‚¹ã€æ³¨é‡ŠèŠ‚ç‚¹å’Œå…ƒç´ èŠ‚ç‚¹ç­‰æ‰€æœ‰ç±»å‹çš„èŠ‚ç‚¹</td></tr><tr><td style="text-align:left">lastElementChild</td><td style="text-align:left">è¿”å›æœ€åä¸€ä¸ªå­å…ƒç´ èŠ‚ç‚¹</td></tr><tr><td style="text-align:left">childNodes</td><td style="text-align:left">è¿”å›æ‰€æœ‰çš„å­èŠ‚ç‚¹ï¼Œ åŒ…æ‹¬æ–‡æœ¬èŠ‚ç‚¹ã€æ³¨é‡ŠèŠ‚ç‚¹å’Œå…ƒç´ èŠ‚ç‚¹ç­‰æ‰€æœ‰ç±»å‹çš„èŠ‚ç‚¹ï¼ˆä¸å¸¸ç”¨ï¼Œäº†è§£å³å¯ï¼‰</td></tr><tr><td style="text-align:left">children</td><td style="text-align:left">è¿”å›æ‰€æœ‰çš„å­å…ƒç´ èŠ‚ç‚¹</td></tr><tr><td style="text-align:left">parentNode</td><td style="text-align:left">è¿”å›çˆ¶å…ƒç´ èŠ‚ç‚¹</td></tr><tr><td style="text-align:left">previousSibling</td><td style="text-align:left">è¿”å›å‰ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ï¼ŒåŒ…æ‹¬æ–‡æœ¬èŠ‚ç‚¹ã€æ³¨é‡ŠèŠ‚ç‚¹å’Œå…ƒç´ èŠ‚ç‚¹ç­‰æ‰€æœ‰ç±»å‹çš„èŠ‚ç‚¹ï¼ˆä¸å¸¸ç”¨ï¼Œäº†è§£å³å¯ï¼‰</td></tr><tr><td style="text-align:left">previousElementSibling</td><td style="text-align:left">è¿”å›å‰ä¸€ä¸ªå…„å¼Ÿå…ƒç´ èŠ‚ç‚¹ï¼ˆä¸å¸¸ç”¨ï¼Œäº†è§£å³å¯ï¼‰</td></tr><tr><td style="text-align:left">nextSibling</td><td style="text-align:left">è¿”å›åŒçº§çš„åä¸€ä¸ªèŠ‚ç‚¹ï¼ŒåŒ…æ‹¬æ–‡æœ¬èŠ‚ç‚¹ã€æ³¨é‡ŠèŠ‚ç‚¹å’Œå…ƒç´ èŠ‚ç‚¹ç­‰æ‰€æœ‰ç±»å‹çš„èŠ‚ç‚¹ï¼ˆä¸å¸¸ç”¨ï¼Œäº†è§£å³å¯ï¼‰</td></tr><tr><td style="text-align:left">nextElementSibling</td><td style="text-align:left">è¿”å›åŒçº§çš„åä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ï¼ˆä¸å¸¸ç”¨ï¼Œäº†è§£å³å¯ï¼‰</td></tr></tbody></table><h3 id="è®¿é—®å…ƒç´ èŠ‚ç‚¹å¸¸ç”¨çš„æ–¹æ³•">è®¿é—®å…ƒç´ èŠ‚ç‚¹å¸¸ç”¨çš„æ–¹æ³•</h3><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">document.getElementById()</td><td style="text-align:left">é€šè¿‡ id è·å–å…ƒç´ ï¼Œè¿”å›ä¸€ä¸ª dom å¯¹è±¡ ä¾‹å¦‚ï¼šdocument.getElementById(â€œâ€œdemoâ€â€);è·å– id å±æ€§å€¼ä¸º demo çš„å…ƒç´ </td></tr><tr><td style="text-align:left">document.getElementsByTagName()</td><td style="text-align:left">é€šè¿‡æ ‡ç­¾åè·å–å…ƒç´ ï¼Œä»¥é›†åˆçš„å½¢å¼è¿”å› ä¾‹å¦‚ï¼šdocument.getElementsByTagName(â€œâ€œpâ€â€); è·å–æ‰€æœ‰çš„ p æ ‡ç­¾å…ƒç´ </td></tr><tr><td style="text-align:left">document.getElementsByClassName()</td><td style="text-align:left">é€šè¿‡ç±»åè·å–å…ƒç´ ï¼Œä»¥é›†åˆçš„å½¢å¼è¿”å› ä¾‹å¦‚ï¼šdocument.getElementsByClassName(â€œâ€œboxâ€â€);è·å–æ‰€æœ‰ç±»åä¸º box çš„å…ƒç´ </td></tr><tr><td style="text-align:left">document.querySelector()</td><td style="text-align:left">é€šè¿‡ css é€‰æ‹©å™¨è·å–ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„å…ƒç´ ï¼Œè¿”å›ä¸€ä¸ª DOM å…ƒç´  ä¾‹å¦‚ï¼šdocument.querySelector(â€œâ€.item&quot;&quot;) è·å–ç±»åä¸º item çš„ç¬¬ä¸€ä¸ªå…ƒç´ </td></tr><tr><td style="text-align:left">document.querySelectorAll()</td><td style="text-align:left">é€šè¿‡ css é€‰æ‹©å™¨è·å–æ‰€æœ‰çš„å…ƒç´ ï¼Œä»¥é›†åˆçš„å½¢å¼è¿”å› ä¾‹å¦‚ï¼šdocument.querySelectorAll(â€œâ€.item&quot;&quot;) è·å–ç±»åä¸º item æ‰€æœ‰çš„å…ƒç´ </td></tr></tbody></table><h3 id="èŠ‚ç‚¹çš„åˆ›å»ºã€æ·»åŠ ã€ç§»å‡ºå’Œå…‹éš†">èŠ‚ç‚¹çš„åˆ›å»ºã€æ·»åŠ ã€ç§»å‡ºå’Œå…‹éš†</h3><table><thead><tr><th style="text-align:left">æ–¹æ³•åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">document.createElement()</td><td style="text-align:left">åˆ›å»ºä¸€ä¸ªæŒ‡å®šæ ‡ç­¾åçš„ HTML å…ƒç´ </td></tr><tr><td style="text-align:left">appendChild()</td><td style="text-align:left">å°†ä¸€ä¸ªèŠ‚ç‚¹ä½œä¸ºæœ€åä¸€ä¸ªå­èŠ‚ç‚¹æ·»åŠ åˆ°æŒ‡å®šçš„çˆ¶èŠ‚ç‚¹</td></tr><tr><td style="text-align:left">removeChild()</td><td style="text-align:left">åˆ é™¤æŒ‡å®šçš„å­èŠ‚ç‚¹</td></tr><tr><td style="text-align:left">insertBefore()</td><td style="text-align:left">åœ¨å·²æœ‰çš„å­èŠ‚ç‚¹å‰æ’å…¥ä¸€ä¸ªæ–°çš„å­èŠ‚ç‚¹</td></tr><tr><td style="text-align:left">cloneNode()</td><td style="text-align:left">å…‹éš†èŠ‚ç‚¹ å¦‚æœä¼ é€’ç»™å®ƒçš„å‚æ•°æ˜¯ trueï¼Œåˆ™è¯¥èŠ‚ç‚¹çš„æ‰€æœ‰åä»£èŠ‚ç‚¹ä¹Ÿéƒ½ä¼šè¢«å…‹éš†ã€‚å¦‚æœä¸º falseï¼Œåˆ™åªå…‹éš†èŠ‚ç‚¹æœ¬èº«</td></tr></tbody></table><h3 id="èŠ‚ç‚¹çš„æ“ä½œ">èŠ‚ç‚¹çš„æ“ä½œ</h3><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">innerText</td><td style="text-align:left">ä»¥çº¯æ–‡æœ¬çš„å½¢å¼è®¾ç½®æˆ–è€…è·å–å…ƒç´ çš„æ–‡æœ¬å†…å®¹ï¼ˆä¸å¸¸ç”¨ï¼Œäº†è§£å³å¯ï¼‰</td></tr><tr><td style="text-align:left">className</td><td style="text-align:left">å…ƒç´ èŠ‚ç‚¹çš„ä¸€ä¸ªå±æ€§ï¼Œç”¨æ¥è®¾ç½®æˆ–è¿”å›å…ƒç´ çš„ class å±æ€§å€¼ ç¤ºä¾‹ï¼šoBox.className = â€œactiveâ€</td></tr><tr><td style="text-align:left">style</td><td style="text-align:left">å…ƒç´ èŠ‚ç‚¹çš„ä¸€ä¸ªå±æ€§ï¼Œç”¨æ¥è®¾ç½®å…ƒç´ èŠ‚ç‚¹çš„ css æ ·å¼ ä¾‹å¦‚ï¼šbox.style.color=â€œâ€œredâ€â€ æ”¹å˜ box å…ƒç´ èŠ‚ç‚¹çš„å­—ä½“ä¸ºçº¢è‰²</td></tr><tr><td style="text-align:left">src</td><td style="text-align:left">å…ƒç´ èŠ‚ç‚¹çš„ä¸€ä¸ªå±æ€§ï¼Œç”¨æ¥è®¾ç½®å…ƒç´ èŠ‚ç‚¹ src å±æ€§å€¼ ä¾‹å¦‚ï¼š oImg.src=â€œ./images/2.jpgâ€</td></tr><tr><td style="text-align:left">href</td><td style="text-align:left">å…ƒç´ èŠ‚ç‚¹çš„ä¸€ä¸ªå±æ€§ï¼Œç”¨æ¥è®¾ç½®å…ƒç´ èŠ‚ç‚¹ href å±æ€§å€¼ ä¾‹å¦‚ï¼š oLink.href=â€œ<a href="http://www.baidu.com">http://www.baidu.com</a>â€</td></tr><tr><td style="text-align:left">setAttribute()</td><td style="text-align:left">ç»™å…ƒç´ èŠ‚ç‚¹è®¾ç½®æŒ‡å®šçš„å±æ€§ï¼Œå¹¶ä¸ºå…¶èµ‹æŒ‡å®šçš„å€¼ ä¾‹å¦‚ï¼šoBox.setArrtibute(â€˜data-nâ€™, 10)</td></tr><tr><td style="text-align:left">getAttribute()</td><td style="text-align:left">è·å–å…ƒç´ èŠ‚ç‚¹æŒ‡å®šçš„å±æ€§å€¼ ä¾‹å¦‚ï¼šoBox.getArrtibute(â€˜data-nâ€™)</td></tr><tr><td style="text-align:left">dataset</td><td style="text-align:left">å…ƒç´ èŠ‚ç‚¹çš„ä¸€ä¸ªå±æ€§ï¼Œç”¨æ¥è®¾ç½®æˆ–è¿”å›å…ƒç´ ä»¥ data-*æ–¹å¼è‡ªå®šä¹‰çš„å±æ€§</td></tr></tbody></table><h3 id="å¸¸è§çš„é¼ æ ‡äº‹ä»¶">å¸¸è§çš„é¼ æ ‡äº‹ä»¶</h3><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">onclick</td><td style="text-align:left">ç›‘å¬é¼ æ ‡å•å‡»äº‹ä»¶</td></tr><tr><td style="text-align:left">ondblclick</td><td style="text-align:left">ç›‘å¬é¼ æ ‡åŒå‡»äº‹ä»¶</td></tr><tr><td style="text-align:left">onmousedown</td><td style="text-align:left">ç›‘å¬é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶</td></tr><tr><td style="text-align:left">onmouseup</td><td style="text-align:left">ç›‘å¬é¼ æ ‡æ¾å¼€äº‹ä»¶</td></tr><tr><td style="text-align:left">onmousemove</td><td style="text-align:left">ç›‘å¬é¼ æ ‡ç§»åŠ¨äº‹ä»¶</td></tr><tr><td style="text-align:left">onmouseenter</td><td style="text-align:left">ç›‘å¬é¼ æ ‡ç§»å…¥äº‹ä»¶ï¼Œä¸å­˜åœ¨äº‹ä»¶å†’æ³¡</td></tr><tr><td style="text-align:left">onmouseleave</td><td style="text-align:left">ç›‘å¬é¼ æ ‡ç¦»å¼€äº‹ä»¶ï¼Œä¸å­˜åœ¨äº‹ä»¶å†’æ³¡</td></tr><tr><td style="text-align:left">onmouseover</td><td style="text-align:left">ç›‘å¬é¼ æ ‡ç§»å…¥äº‹ä»¶ï¼Œå­˜åœ¨äº‹ä»¶å†’æ³¡</td></tr><tr><td style="text-align:left">onmouseout</td><td style="text-align:left">ç›‘å¬é¼ æ ‡ç¦»å¼€äº‹ä»¶ï¼Œå­˜åœ¨äº‹ä»¶å†’æ³¡</td></tr><tr><td style="text-align:left">onmousewheel</td><td style="text-align:left">ç›‘å¬é¼ æ ‡æ»šè½®äº‹ä»¶ï¼ˆä¸å¸¸ç”¨ï¼Œäº†è§£å³å¯ï¼‰</td></tr></tbody></table><h3 id="å¸¸è§çš„é”®ç›˜äº‹ä»¶">å¸¸è§çš„é”®ç›˜äº‹ä»¶</h3><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">onkeydown</td><td style="text-align:left">ç›‘å¬æŸä¸ªé”®ç›˜æŒ‰é”®è¢«æŒ‰ä¸‹ï¼Œå¯ä»¥ç›‘å¬ä¸Šä¸‹å·¦å³ç®­å¤´ç­‰ç³»ç»ŸæŒ‰é”®</td></tr><tr><td style="text-align:left">onkeypress</td><td style="text-align:left">ç›‘å¬æŸä¸ªé”®ç›˜æŒ‰é”®è¢«æŒ‰ä¸‹ï¼Œæ— æ³•ç›‘å¬åˆ°ç³»ç»ŸæŒ‰é”®</td></tr><tr><td style="text-align:left">onkeyup</td><td style="text-align:left">ç›‘å¬æŸä¸ªé”®ç›˜æŒ‰é”®è¢«æ¾å¼€ï¼Œå¯ä»¥ç›‘å¬ä¸Šä¸‹å·¦å³ç®­å¤´ç­‰ç³»ç»ŸæŒ‰é”®</td></tr></tbody></table><h3 id="å¸¸è§çš„è¡¨å•äº‹ä»¶">å¸¸è§çš„è¡¨å•äº‹ä»¶</h3><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">onchange</td><td style="text-align:left">å½“è¡¨å•å…ƒç´ çš„å†…å®¹å‘ç”Ÿå˜åŒ–æ‰€è§¦å‘çš„äº‹ä»¶</td></tr><tr><td style="text-align:left">onfocus</td><td style="text-align:left">å½“å…ƒç´ è·å¾—ç„¦ç‚¹æ—¶è§¦å‘çš„äº‹ä»¶ï¼Œä¾‹å¦‚ï¼štab é”®æˆ–è€…ç‚¹å‡»é¼ æ ‡</td></tr><tr><td style="text-align:left">onblur</td><td style="text-align:left">å½“å…ƒç´ å¤±å»ç„¦ç‚¹æ—¶è§¦å‘çš„äº‹ä»¶</td></tr><tr><td style="text-align:left">onsubmit</td><td style="text-align:left">å½“æäº¤è¡¨å•æ—¶è§¦å‘çš„äº‹ä»¶</td></tr><tr><td style="text-align:left">onreset</td><td style="text-align:left">å½“é‡ç½®è¡¨å•æ—¶è§¦å‘çš„äº‹ä»¶</td></tr></tbody></table><h3 id="å¸¸è§çš„é¡µé¢ç›‘å¬äº‹ä»¶">å¸¸è§çš„é¡µé¢ç›‘å¬äº‹ä»¶</h3><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">onload</td><td style="text-align:left">ç›‘å¬é¡µé¢æˆ–å›¾åƒåŠ è½½å®Œæˆäº‹ä»¶</td></tr><tr><td style="text-align:left">onunload</td><td style="text-align:left">ç›‘å¬ç”¨æˆ·é€€å‡ºé¡µé¢äº‹ä»¶ï¼ˆä¸å¸¸ç”¨ï¼Œäº†è§£å³å¯ï¼‰</td></tr></tbody></table><h3 id="DOM-2-çº§äº‹ä»¶ç›‘å¬">DOM 2 çº§äº‹ä»¶ç›‘å¬</h3><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">addEventListener()</td><td style="text-align:left">ç›‘å¬äº‹ä»¶å¹¶æ·»åŠ åˆ°æŒ‡å®šçš„å…ƒç´  1ã€æ–¹æ³•ä¸­æ¥æ”¶ä¸‰ä¸ªå‚æ•°å¦‚ä¸‹ï¼š ï¼ˆ1ï¼‰ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºè¦ç›‘å¬çš„äº‹ä»¶åï¼Œå¿…é¡»ä¼ å…¥ ï¼ˆ2ï¼‰ç¬¬äºŒä¸ªå‚æ•°æ˜¯å‡½æ•°ï¼ŒæŒ‡å®šäº‹ä»¶è§¦å‘æ—¶è¦æ‰§è¡Œçš„å‡½æ•°ï¼Œå¿…é¡»ä¼ å…¥ ï¼ˆ3ï¼‰ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¸ƒå°”å€¼ï¼ŒæŒ‡å®šäº‹ä»¶æ˜¯å¦åœ¨æ•è·æˆ–å†’æ³¡é˜¶æ®µæ‰§è¡Œï¼Œå¯é€‰ 2ã€ç¤ºä¾‹ï¼šoBox.addEventListener(â€˜clickâ€™, function() {}, true) åœ¨æ•è·é˜¶æ®µç›‘å¬ oBox çš„ç‚¹å‡»äº‹ä»¶</td></tr></tbody></table><h3 id="äº‹ä»¶çš„ä¼ æ’­">äº‹ä»¶çš„ä¼ æ’­</h3><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">capturing phase</td><td style="text-align:left">æ•è·é˜¶æ®µï¼Œç”±å¤–å‘å†…ä¼ æ’­çš„ï¼Œä¹Ÿå°±æ˜¯å½“å‰äº‹ä»¶è§¦å‘æ—¶ï¼Œå…ˆè§¦å‘å½“å‰å…ƒç´ çš„æœ€å¤–å±‚çš„ç¥–å…ˆå…ƒç´ çš„åŒç±»å‹äº‹ä»¶ï¼Œç„¶åå†å‘å†…ä¼ æ’­ç»™åä»£å…ƒç´ </td></tr><tr><td style="text-align:left">Bubbling phase</td><td style="text-align:left">å†’æ³¡é˜¶æ®µï¼Œç”±å†…å‘å¤–ä¼ æ’­ï¼Œä¹Ÿå°±æ˜¯å½“äº‹ä»¶è§¦å‘æ—¶ï¼Œå…ˆè§¦å‘å½“å‰å…ƒç´ ä¸Šçš„äº‹ä»¶ï¼Œç„¶åå†å‘å½“å‰å…ƒç´ çš„ç¥–å…ˆå…ƒç´ ä¸Šä¼ æ’­ï¼Œè§¦å‘ç¥–å…ˆå…ƒç´ çš„åŒç±»å‹äº‹ä»¶</td></tr></tbody></table><h3 id="äº‹ä»¶å¯¹è±¡">äº‹ä»¶å¯¹è±¡</h3><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">event</td><td style="text-align:left">è¿”å›äº‹ä»¶çš„çŠ¶æ€</td></tr></tbody></table><h3 id="äº‹ä»¶å¯¹è±¡å¸¸ç”¨çš„å±æ€§">äº‹ä»¶å¯¹è±¡å¸¸ç”¨çš„å±æ€§</h3><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">target</td><td style="text-align:left">è¿”å›å½“å‰è§¦å‘äº‹ä»¶çš„å…ƒç´ </td></tr><tr><td style="text-align:left">currentTarget</td><td style="text-align:left">è¿”å›ç›‘å¬äº‹ä»¶çš„å…ƒç´ </td></tr><tr><td style="text-align:left">clientX</td><td style="text-align:left">è¿”å›é¼ æ ‡æŒ‡é’ˆç›¸å¯¹äºæµè§ˆå™¨çš„æ°´å¹³åæ ‡</td></tr><tr><td style="text-align:left">clientY</td><td style="text-align:left">è¿”å›é¼ æ ‡æŒ‡é’ˆç›¸å¯¹äºæµè§ˆå™¨çš„å‚ç›´åæ ‡</td></tr><tr><td style="text-align:left">pageX</td><td style="text-align:left">è¿”å›é¼ æ ‡æŒ‡é’ˆç›¸å¯¹äºæ•´ä¸ªç½‘é¡µçš„æ°´å¹³åæ ‡</td></tr><tr><td style="text-align:left">pageY</td><td style="text-align:left">è¿”å›é¼ æ ‡æŒ‡é’ˆç›¸å¯¹äºæ•´ä¸ªç½‘é¡µçš„å‚ç›´åæ ‡</td></tr><tr><td style="text-align:left">offsetX</td><td style="text-align:left">è¿”å›é¼ æ ‡æŒ‡é’ˆç›¸å¯¹äºäº‹ä»¶æºå…ƒç´ çš„æ°´å¹³åæ ‡</td></tr><tr><td style="text-align:left">offsetY</td><td style="text-align:left">è¿”å›é¼ æ ‡æŒ‡é’ˆç›¸å¯¹äºäº‹ä»¶æºå…ƒç´ çš„å‚ç›´åæ ‡</td></tr><tr><td style="text-align:left">charCode</td><td style="text-align:left">é€šå¸¸ç”¨äº onkeypress äº‹ä»¶ï¼Œè¿”å›ç”¨æˆ·æŒ‰ä¸‹æŒ‰é”®å¯¹åº”çš„ç å€¼ï¼ŒåŒºåˆ†å¤§å°å†™ ç¤ºä¾‹ï¼šæŒ‰ä¸‹é”®ç›˜ aï¼Œå¯¹åº”çš„å€¼æ˜¯ 97ï¼Œ æŒ‰ä¸‹é”®ç›˜ Aï¼Œå¯¹åº”çš„å€¼æ˜¯ 65</td></tr><tr><td style="text-align:left">keyCode</td><td style="text-align:left">é€šå¸¸ç”¨äº onkeydown å’Œ onkeyup äº‹ä»¶ï¼Œè¿”å›ç”¨æˆ·æŒ‰ä¸‹æŒ‰é”®çš„ç å€¼ï¼Œä¸åŒºåˆ†å¤§å°å†™ã€‚ ç¤ºä¾‹ï¼šæŒ‰ä¸‹é”®ç›˜ a æˆ– Aï¼Œ å¯¹åº”çš„å€¼æ˜¯ 65</td></tr><tr><td style="text-align:left">deltaY</td><td style="text-align:left">è¿”å› onmousewheel äº‹ä»¶è§¦å‘æ—¶ï¼Œæ»šè½®æ»šåŠ¨çš„æ–¹å‘ï¼Œå‘ä¸‹æ»šåŠ¨æ—¶è¿”å›æ­£å€¼ï¼Œå‘ä¸Šæ»šåŠ¨æ—¶ï¼Œè¿”å›è´Ÿå€¼ï¼ˆä¸å¸¸ç”¨ï¼Œäº†è§£å³å¯ï¼‰</td></tr></tbody></table><h3 id="äº‹ä»¶å¯¹è±¡å¸¸ç”¨çš„æ–¹æ³•">äº‹ä»¶å¯¹è±¡å¸¸ç”¨çš„æ–¹æ³•</h3><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">preventDefault()</td><td style="text-align:left">é˜»æ­¢æµè§ˆå™¨é»˜è®¤è¡Œä¸º</td></tr><tr><td style="text-align:left">stopPropagation()</td><td style="text-align:left">é˜»æ­¢äº‹ä»¶ä¼ æ’­</td></tr></tbody></table><h3 id="å®šæ—¶å™¨å’Œå»¶æ—¶å™¨">å®šæ—¶å™¨å’Œå»¶æ—¶å™¨</h3><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">setInterval()</td><td style="text-align:left">å®šæ—¶å™¨ï¼Œé‡å¤è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨æ¯æ¬¡è°ƒç”¨ä¹‹é—´å…·æœ‰å›ºå®šçš„æ—¶é—´é—´éš”</td></tr><tr><td style="text-align:left">clearInterval()</td><td style="text-align:left">æ¸…é™¤å®šæ—¶å™¨</td></tr><tr><td style="text-align:left">setTimeout()</td><td style="text-align:left">å»¶æ—¶å™¨ï¼Œå½“æŒ‡å®šæ—¶é—´åˆ°äº†ä¹‹åï¼Œä¼šæ‰§è¡Œä¸€æ¬¡å‡½æ•°ï¼Œä¸å†é‡å¤æ‰§è¡Œ</td></tr><tr><td style="text-align:left">clearTimeout()</td><td style="text-align:left">æ¸…é™¤å»¶æ—¶å™¨</td></tr></tbody></table><h3 id="BOM-ç›¸å…³çš„åŸºæœ¬æ¦‚å¿µ">BOM ç›¸å…³çš„åŸºæœ¬æ¦‚å¿µ</h3><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">BOM</td><td style="text-align:left">æµè§ˆå™¨å¯¹è±¡æ¨¡å‹ï¼ˆBrowser Object Modelï¼‰ï¼Œæ˜¯ js ä¸æµè§ˆå™¨çª—å£äº¤äº’çš„æ¥å£</td></tr><tr><td style="text-align:left">window</td><td style="text-align:left">window å¯¹è±¡è¡¨ç¤ºæµè§ˆå™¨ä¸­æ‰“å¼€çš„çª—å£ï¼Œæ³¨æ„äº‹é¡¹ï¼š 1ã€è¿™ä¸ªçª—å£ä¸­åŒ…å« DOM ç»“æ„ï¼Œwindow.document å±æ€§å°±è¡¨ç¤º document å¯¹è±¡ 2ã€å…¨å±€å˜é‡ä¼šæˆä¸º window å¯¹è±¡çš„å±æ€§ 3ã€å†…ç½®å‡½æ•°æ™®éæ˜¯ window çš„æ–¹æ³•ï¼Œå¦‚ï¼šalert()ç­‰æ–¹æ³•</td></tr><tr><td style="text-align:left">navigator</td><td style="text-align:left">navigator å¯¹è±¡å«æœ‰å…³æµè§ˆå™¨çš„ä¿¡æ¯ï¼Œæ˜¯ window å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œå¯é€šè¿‡ window.history å±æ€§å¯¹å…¶è¿›è¡Œè®¿é—®</td></tr><tr><td style="text-align:left">history</td><td style="text-align:left">history å¯¹è±¡åŒ…å«ç”¨æˆ·ï¼ˆåœ¨æµè§ˆå™¨çª—å£ä¸­ï¼‰è®¿é—®è¿‡çš„ URLï¼Œæ˜¯ window å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œå¯é€šè¿‡ window.history å±æ€§å¯¹å…¶è¿›è¡Œè®¿é—®</td></tr><tr><td style="text-align:left">location</td><td style="text-align:left">location å¯¹è±¡åŒ…å«æœ‰å…³å½“å‰ URL çš„ä¿¡æ¯ï¼Œæ˜¯ Window å¯¹è±¡çš„ä¸€ä¸ªéƒ¨åˆ†ï¼Œå¯é€šè¿‡ window.location å±æ€§æ¥è®¿é—®</td></tr></tbody></table><h3 id="Window-å¯¹è±¡çš„å¸¸ç”¨å±æ€§">Window å¯¹è±¡çš„å¸¸ç”¨å±æ€§</h3><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">innerHeight</td><td style="text-align:left">è¿”å›æµè§ˆå™¨çª—å£çš„å†…å®¹åŒºåŸŸçš„é«˜åº¦ï¼ŒåŒ…å«æ°´å¹³æ»šåŠ¨æ¡çš„é«˜åº¦</td></tr><tr><td style="text-align:left">innerWidth</td><td style="text-align:left">è¿”å›æµè§ˆå™¨çª—å£çš„å†…å®¹åŒºåŸŸçš„å®½åº¦ï¼ŒåŒ…å«å‚ç›´æ»šåŠ¨æ¡çš„å®½åº¦</td></tr><tr><td style="text-align:left">document.documentElement.clientWidth</td><td style="text-align:left">è¿”å›æµè§ˆå™¨çª—å£çš„å†…å®¹åŒºåŸŸçš„å®½åº¦ï¼Œä¸åŒ…å«æ»šåŠ¨æ¡</td></tr><tr><td style="text-align:left">outerHeight</td><td style="text-align:left">è¿”å›æµè§ˆå™¨çª—å£çš„å¤–éƒ¨é«˜åº¦ï¼ŒåŒ…å«æ°´å¹³æ»šåŠ¨æ¡çš„é«˜åº¦å’Œæµè§ˆå™¨çª—å£ä¸Šä¸‹è¾¹æ¡†çš„é«˜åº¦ï¼ˆä¸å¸¸ç”¨ï¼Œäº†è§£å³å¯ï¼‰</td></tr><tr><td style="text-align:left">outerWidth</td><td style="text-align:left">è¿”å›æµè§ˆå™¨çª—å£çš„å†…å®¹é«˜åº¦ï¼ŒåŒ…å«å‚ç›´æ»šåŠ¨æ¡çš„å®½åº¦å’Œæµè§ˆå™¨çª—å£å·¦å³è¾¹æ¡†çš„å®½åº¦ï¼ˆä¸å¸¸ç”¨ï¼Œäº†è§£å³å¯ï¼‰</td></tr><tr><td style="text-align:left">scrollY</td><td style="text-align:left">è¿”å›æ–‡æ¡£å½“å‰å‚ç›´æ»šåŠ¨çš„è·ç¦»</td></tr><tr><td style="text-align:left">document.documentElement.scrollTop</td><td style="text-align:left">è¦è·å–å½“å‰é¡µé¢çš„æ»šåŠ¨æ¡çºµåæ ‡ä½ç½®</td></tr></tbody></table><h3 id="Window-å¯¹è±¡çš„å¸¸ç”¨äº‹ä»¶">Window å¯¹è±¡çš„å¸¸ç”¨äº‹ä»¶</h3><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">onresize</td><td style="text-align:left">ç›‘å¬çª—å£æ”¹å˜å¤§å°äº‹ä»¶</td></tr><tr><td style="text-align:left">onscroll</td><td style="text-align:left">ç›‘å¬çª—å£æ»šåŠ¨äº‹ä»¶</td></tr></tbody></table><h3 id="navigator-å¯¹è±¡çš„å¸¸ç”¨å±æ€§">navigator å¯¹è±¡çš„å¸¸ç”¨å±æ€§</h3><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">appName</td><td style="text-align:left">è¿”å›æµè§ˆå™¨å®˜ç½‘åç§°</td></tr><tr><td style="text-align:left">appVersion</td><td style="text-align:left">è¿”å›æµè§ˆå™¨ç‰ˆæœ¬</td></tr><tr><td style="text-align:left">userAgent</td><td style="text-align:left">è¿”å›æµè§ˆå™¨çš„ç”¨æˆ·ä»£ç†ä¿¡æ¯</td></tr><tr><td style="text-align:left">platform</td><td style="text-align:left">è¿”å›ç”¨æˆ·æ“ä½œç³»ç»Ÿ</td></tr></tbody></table><h3 id="history-å¯¹è±¡çš„å¸¸ç”¨æ–¹æ³•">history å¯¹è±¡çš„å¸¸ç”¨æ–¹æ³•</h3><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">back()</td><td style="text-align:left">è¡¨ç¤ºå›é€€åˆ°æµè§ˆå™¨å†å²è®°å½•é‡Œçš„ä¸Šä¸€é¡µï¼Œç­‰åŒäºç‚¹å‡»æµè§ˆå™¨å›é€€æŒ‰é’®</td></tr><tr><td style="text-align:left">go(-1)</td><td style="text-align:left">ä¸ history()æ–¹æ³•çš„ä½œç”¨ä¸€æ ·</td></tr></tbody></table><h3 id="location-å¯¹è±¡çš„å¸¸ç”¨å±æ€§å’Œæ–¹æ³•">location å¯¹è±¡çš„å¸¸ç”¨å±æ€§å’Œæ–¹æ³•</h3><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">href</td><td style="text-align:left">è®¾ç½®æˆ–è¿”å›å®Œæ•´çš„ URL åœ°å€</td></tr><tr><td style="text-align:left">search</td><td style="text-align:left">è®¾ç½®æˆ–è¿”å›ä»é—®å· (?) å¼€å§‹çš„ URLï¼ˆæŸ¥è¯¢éƒ¨åˆ†ï¼‰</td></tr><tr><td style="text-align:left">reload()</td><td style="text-align:left">é‡æ–°åŠ è½½å½“å‰é¡µé¢</td></tr></tbody></table><h2 id="JavaScript-å¸¸ç”¨å†…ç½®å¯¹è±¡å’Œæ­£åˆ™è¡¨è¾¾å¼">JavaScript å¸¸ç”¨å†…ç½®å¯¹è±¡å’Œæ­£åˆ™è¡¨è¾¾å¼</h2><h3 id="å¯¹è±¡çš„åŸºæœ¬æ“ä½œ">å¯¹è±¡çš„åŸºæœ¬æ“ä½œ</h3><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">delete</td><td style="text-align:left">**æ“ä½œç¬¦ã€‚**åˆ é™¤å¯¹è±¡çš„å±æ€§</td></tr><tr><td style="text-align:left">forâ€¦in</td><td style="text-align:left">**å¯¹è±¡çš„éå†ã€‚**forâ€¦in å¾ªç¯ç”¨æ¥éå†å¯¹è±¡ï¼Œä¾‹å¦‚ï¼š for (var k in obj) { console.log(â€œå¯¹è±¡ obj çš„å±æ€§â€ + k + â€œçš„å€¼æ˜¯â€ + obj[k]); }</td></tr><tr><td style="text-align:left">call/apply</td><td style="text-align:left">**æŒ‡å®šå‡½æ•°çš„ä¸Šä¸‹æ–‡ã€‚**call/apply å¯ä»¥æŒ‡å®šå‡½æ•°çš„ä¸Šä¸‹æ–‡ï¼Œä¸¤è€…åŒºåˆ«ï¼šä¼ å‚å½¢å¼ä¸åŒï¼Œä¾‹å¦‚ï¼š fn.call(xiaoming,1,2) fn.apply(xiaoming,[1,2])</td></tr><tr><td style="text-align:left">prototype</td><td style="text-align:left">**åŸå‹ã€‚**prototype æ˜¯åŸå‹çš„æ„æ€ï¼Œå®ƒæ˜¯å‡½æ•°è‡ªå¸¦çš„å±æ€§</td></tr><tr><td style="text-align:left">hasOwnProperty()</td><td style="text-align:left">**å¯¹è±¡ä¸Šçš„æ–¹æ³•ã€‚**æ£€æµ‹æŸä¸ªå±æ€§æ˜¯å¦ä¸ºå¯¹è±¡è‡ªèº«çš„å±æ€§ï¼ˆä¸åŒ…å«ç»§æ‰¿ï¼‰</td></tr><tr><td style="text-align:left">in</td><td style="text-align:left">**è¿ç®—ç¬¦ã€‚**æŸä¸ªå±æ€§æˆ–æ–¹æ³•æ˜¯å¦å¯ä»¥è¢«å¯¹è±¡è°ƒç”¨</td></tr></tbody></table><h3 id="Math-å¯¹è±¡çš„å¸¸ç”¨æ–¹æ³•">Math å¯¹è±¡çš„å¸¸ç”¨æ–¹æ³•</h3><table><thead><tr><th style="text-align:left">æ–¹æ³•åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">Math.round()</td><td style="text-align:left">å¯ä»¥å°†ä¸€ä¸ªæ•°å­—å››èˆäº”å…¥ä¸ºæ•´æ•°</td></tr><tr><td style="text-align:left">Math.max()</td><td style="text-align:left">å–ä¸€ç»„æ•°ä¸­çš„æœ€å¤§å€¼</td></tr><tr><td style="text-align:left">Math.min()</td><td style="text-align:left">å–ä¸€ç»„æ•°ä¸­çš„æœ€å°å€¼</td></tr><tr><td style="text-align:left">Math.random()</td><td style="text-align:left">0-1 ä¹‹é—´çš„éšæœºæ•°ï¼ˆåŒ…å« 0ï¼Œä¸åŒ…å« 1ï¼‰</td></tr></tbody></table><h3 id="Date-å¯¹è±¡çš„å¸¸ç”¨æ–¹æ³•">Date å¯¹è±¡çš„å¸¸ç”¨æ–¹æ³•</h3><table><thead><tr><th style="text-align:left">æ–¹æ³•åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">new Date()</td><td style="text-align:left">å½“å‰æ—¶é—´çš„æ—¥æœŸå¯¹è±¡</td></tr><tr><td style="text-align:left">getDate()</td><td style="text-align:left">è¿”å›ä¸€ä¸ªæœˆä¸­çš„æŸä¸€å¤© (1 ~ 31)</td></tr><tr><td style="text-align:left">getDay()</td><td style="text-align:left">è¿”å›ä¸€å‘¨ä¸­çš„æŸä¸€å¤© (0 ~ 6)</td></tr><tr><td style="text-align:left">getMonth()</td><td style="text-align:left">è¿”å›æœˆä»½ (0 ~ 11)</td></tr><tr><td style="text-align:left">getFullYear()</td><td style="text-align:left">è¿”å›å¹´ä»½</td></tr><tr><td style="text-align:left">getHours()</td><td style="text-align:left">è¿”å›å°æ—¶ (0 ~ 23)</td></tr><tr><td style="text-align:left">getMinutes()</td><td style="text-align:left">è¿”å›åˆ†é’Ÿæ•°ï¼ˆ0-59ï¼‰</td></tr><tr><td style="text-align:left">getSeconds()</td><td style="text-align:left">è¿”å›ç§’æ•°ï¼ˆ0-59ï¼‰</td></tr><tr><td style="text-align:left">getTime()</td><td style="text-align:left">å°†æ—¥æœŸå¯¹è±¡å˜ä¸ºæ—¶é—´æˆ³ï¼ˆè¿”å› 1970 å¹´ 1 æœˆ 1 æ—¥è‡³ä»Šçš„æ¯«ç§’æ•°ï¼‰</td></tr><tr><td style="text-align:left">parse()</td><td style="text-align:left">å°†æ—¥æœŸå¯¹è±¡å˜ä¸ºæ—¶é—´æˆ³ï¼ˆè¿”å› 1970 å¹´ 1 æœˆ 1 æ—¥è‡³ä»Šçš„æ¯«ç§’æ•°ï¼‰ï¼Œæœ€åä¸‰ä½æ˜¯ 000</td></tr></tbody></table><h3 id="æ­£åˆ™è¡¨è¾¾å¼çš„åˆ›å»º">æ­£åˆ™è¡¨è¾¾å¼çš„åˆ›å»º</h3><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">//</td><td style="text-align:left">åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼çš„ç¬¬ä¸€ç§æ–¹å¼</td></tr><tr><td style="text-align:left">new RegExp()</td><td style="text-align:left">åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼çš„ç¬¬äºŒç§æ–¹å¼</td></tr></tbody></table><h3 id="å…ƒå­—ç¬¦">å…ƒå­—ç¬¦</h3><table><thead><tr><th style="text-align:left">ç¬¦å·</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">d</td><td style="text-align:left">åŒ¹é…ä¸€ä¸ªæ•°å­—å­—ç¬¦</td></tr><tr><td style="text-align:left">D</td><td style="text-align:left">åŒ¹é…ä¸€ä¸ªéæ•°å­—å­—ç¬¦</td></tr><tr><td style="text-align:left">w</td><td style="text-align:left">åŒ¹é…å­—æ¯ã€æ•°å­—æˆ–è€…ä¸‹åˆ’çº¿ï¼Œç±»ä¼¼äº<code>[A-Za-z0-9_]</code></td></tr><tr><td style="text-align:left">W</td><td style="text-align:left">åŒ¹é…é™¤å­—æ¯ã€æ•°å­—æˆ–è€…ä¸‹åˆ’çº¿ä»¥å¤–çš„å­—ç¬¦ã€‚ç­‰ä»·äº<code>[^A-Za-z0-9_]</code></td></tr><tr><td style="text-align:left">s</td><td style="text-align:left">åŒ¹é…ä¸€ä¸ªç©ºç™½å­—ç¬¦ï¼ˆç©ºæ ¼ã€åˆ¶è¡¨ç¬¦å’Œæ¢è¡Œç¬¦ï¼‰</td></tr><tr><td style="text-align:left">.</td><td style="text-align:left">åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td style="text-align:left">^</td><td style="text-align:left">åŒ¹é…å¼€å¤´</td></tr><tr><td style="text-align:left">$</td><td style="text-align:left">åŒ¹é…ç»“å°¾</td></tr></tbody></table><h3 id="è½¬ä¹‰å­—ç¬¦">è½¬ä¹‰å­—ç¬¦</h3><table><thead><tr><th style="text-align:left">åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">è½¬ä¹‰ç¬¦</td><td style="text-align:left">åœ¨ç‰¹æ®Šå­—ç¬¦å‰åŠ ï¼Œè¡¨ç¤ºä¸‹ä¸€ä¸ªå­—ç¬¦ä¸æ˜¯ç‰¹æ®Šå­—ç¬¦ï¼Œåº”è¯¥æŒ‰ç…§å­—é¢æ„ç†è§£ ä¾‹å¦‚ï¼š/<sup>.$/è¡¨ç¤ºåŒ¹é…ä»»æ„å­—ç¬¦ã€‚/</sup>.$/è¡¨ç¤ºåŒ¹é…ç‚¹</td></tr></tbody></table><h3 id="æ–¹æ‹¬å·è¡¨ç¤ºæ³•">æ–¹æ‹¬å·è¡¨ç¤ºæ³•</h3><table><thead><tr><th style="text-align:left">ç¬¦å·</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">[]</td><td style="text-align:left">å¯ä»¥åˆ›å»ºå­—ç¬¦é›†åˆï¼Œè¡¨ç¤ºåŒ¹é…æ–¹æ‹¬å·ä¸­çš„ä»»æ„å­—ç¬¦ã€‚ 1ã€[ab]åŒ¹é… a æˆ–è€…æ˜¯ b 2ã€ä½¿ç”¨çŸ­æ¨ªçº¿-æ¥æŒ‡å®šä¸€ä¸ªå­—ç¬¦èŒƒå›´ï¼Œå¦‚ï¼š[a-z]åŒ¹é… a åˆ° z ä¹‹é—´çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ 3ã€^è¡¨ç¤ºå¦å®šï¼Œå¦‚ï¼š [^a] åŒ¹é…é™¤ a ä¹‹å¤–çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼‰</td></tr></tbody></table><h3 id="é‡è¯">é‡è¯</h3><table><thead><tr><th style="text-align:left">ç¬¦å·</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">*</td><td style="text-align:left">åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–å¤šæ¬¡ï¼Œç­‰ä»·äº: {0,}</td></tr><tr><td style="text-align:left">+</td><td style="text-align:left">åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ä¸€æ¬¡æˆ–å¤šæ¬¡ï¼Œç­‰ä»·äº: {1,}</td></tr><tr><td style="text-align:left">?</td><td style="text-align:left">åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–ä¸€æ¬¡ï¼Œç­‰ä»·äº: {0,1}</td></tr><tr><td style="text-align:left">{n}</td><td style="text-align:left">n æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºåŒ¹é… n æ¬¡</td></tr><tr><td style="text-align:left">{n,}</td><td style="text-align:left">n æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºè‡³å°‘åŒ¹é… n æ¬¡</td></tr><tr><td style="text-align:left">{n,m}</td><td style="text-align:left">n å’Œ m æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œæœ€å°‘åŒ¹é… n æ¬¡ä¸”æœ€å¤šåŒ¹é… m æ¬¡</td></tr></tbody></table><h3 id="ä¿®é¥°ç¬¦">ä¿®é¥°ç¬¦</h3><table><thead><tr><th style="text-align:left">ç¬¦å·</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">i</td><td style="text-align:left">ä¸åŒºåˆ†å¤§å°å†™</td></tr><tr><td style="text-align:left">g</td><td style="text-align:left">å…¨å±€æœç´¢</td></tr></tbody></table><h3 id="æ­£åˆ™è¡¨è¾¾å¼çš„ç›¸å…³æ–¹æ³•">æ­£åˆ™è¡¨è¾¾å¼çš„ç›¸å…³æ–¹æ³•</h3><table><thead><tr><th style="text-align:left">æ–¹æ³•</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">test()</td><td style="text-align:left">ç”¨äºæ£€æµ‹ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ã€‚ è¿”å›å€¼ï¼šå¦‚æœå­—ç¬¦ä¸²ä¸­æœ‰åŒ¹é…çš„å€¼è¿”å› true ï¼Œå¦åˆ™è¿”å› falseã€‚</td></tr><tr><td style="text-align:left">exec()</td><td style="text-align:left">æ ¹æ®æ­£åˆ™è¡¨è¾¾å¼ï¼Œåœ¨å­—ç¬¦ä¸²ä¸­è¿›è¡ŒæŸ¥æ‰¾åŒ¹é…ã€‚ è¿”å›å€¼ï¼šè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­å­˜æ”¾åŒ¹é…çš„ç»“æœã€‚å¦‚æœæ²¡æœ‰åŒ¹é…åˆ°ï¼Œåˆ™è¿”å›å€¼ä¸º nullã€‚</td></tr></tbody></table><h3 id="å­—ç¬¦ä¸²çš„ç›¸å…³æ­£åˆ™æ–¹æ³•">å­—ç¬¦ä¸²çš„ç›¸å…³æ­£åˆ™æ–¹æ³•</h3><table><thead><tr><th style="text-align:left">æ–¹æ³•åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">search()</td><td style="text-align:left">æ ¹æ®æ­£åˆ™è¡¨è¾¾å¼ï¼Œåœ¨å­—ç¬¦ä¸²ä¸­è¿›è¡ŒæŸ¥æ‰¾åŒ¹é…ã€‚ è¿”å›å€¼ï¼šè¿”å›é¦–æ¬¡åŒ¹é…åˆ°çš„ä½ç½®ç´¢å¼•ï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…åˆ°ï¼Œè¿”å›-1</td></tr><tr><td style="text-align:left">match()</td><td style="text-align:left">æ ¹æ®æ­£åˆ™è¡¨è¾¾å¼ï¼Œåœ¨å­—ç¬¦ä¸²ä¸­è¿›è¡ŒæŸ¥æ‰¾åŒ¹é…ã€‚ è¿”å›å€¼ï¼šå­˜æ”¾åŒ¹é…ç»“æœçš„æ•°ç»„ï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…åˆ°ï¼Œåˆ™è¿”å›å€¼ä¸º nullã€‚</td></tr><tr><td style="text-align:left">replace()</td><td style="text-align:left">ç”¨ä¸€äº›å­—ç¬¦æ›¿æ¢ä¸€ä¸ªä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å­ä¸²ã€‚ è¿”å›å€¼ï¼šæ›¿æ¢ä¹‹åçš„æ–°å­—ç¬¦ä¸²</td></tr><tr><td style="text-align:left">split()</td><td style="text-align:left">æŠŠä¸€ä¸ªå­—ç¬¦ä¸²åˆ†å‰²æˆæ•°ç»„ã€‚ è¿”å›å€¼ï¼šåˆ†å‰²ä¹‹åå½¢æˆçš„æ•°ç»„</td></tr></tbody></table><hr><blockquote><p>æœ¬ç¯‡æ–‡ç« å‡è½¬è½½è‡ªarryè€å¸ˆçš„<a href="https://www.arryblog.com/interview/htmlcss/html-html5.html#%E9%AB%98%E9%A2%91%E9%87%8D%E7%82%B9">æ•™ç¨‹</a>ï¼Œä»…ä¾›æœ¬äººå­¦ä¹ ä½¿ç”¨ã€‚</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Jsæ ¸å¿ƒåŸºç¡€&quot;&gt;Jsæ ¸å¿ƒåŸºç¡€&lt;/h2&gt;
&lt;h3 id=&quot;å­—ç¬¦ä¸²çš„å¸¸ç”¨æ–¹æ³•&quot;&gt;å­—ç¬¦ä¸²çš„å¸¸ç”¨æ–¹æ³•&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:left&quot;&gt;æ–¹æ³•åç§°&lt;/th&gt;
&lt;th style=&quot;text-align</summary>
      
    
    
    
    <category term="å‰ç«¯ğŸ’¥" scheme="https://blog.cilicili.xyz/categories/%E5%89%8D%E7%AB%AF%F0%9F%92%A5/"/>
    
    
    <category term="JavaScript" scheme="https://blog.cilicili.xyz/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>ã€å‰ç«¯ã€‘CSS/CSS3æ ·å¼åŸºç¡€çŸ¥è¯†</title>
    <link href="https://blog.cilicili.xyz/posts/c3f71fbb.html"/>
    <id>https://blog.cilicili.xyz/posts/c3f71fbb.html</id>
    <published>2022-07-29T07:35:45.000Z</published>
    <updated>2022-09-20T13:15:02.421Z</updated>
    
    <content type="html"><![CDATA[<h3 id="CSS-4ç§ä¹¦å†™ä½ç½®ç‰¹ç‚¹ä¸åŒºåˆ«">CSS 4ç§ä¹¦å†™ä½ç½®ç‰¹ç‚¹ä¸åŒºåˆ«</h3><table><thead><tr><th style="text-align:left">å¼•å…¥æ–¹å¼</th><th style="text-align:left">ä¹¦å†™ä½ç½®</th><th style="text-align:left">ä½œç”¨èŒƒå›´</th><th style="text-align:left">ä¼˜å…ˆçº§</th><th style="text-align:left">ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td style="text-align:left">å†…åµŒæ ·å¼</td><td style="text-align:left">å†™åœ¨<code>&lt;style&gt;</code>æ ‡ç­¾ä¸­</td><td style="text-align:left">å½“å‰é¡µé¢</td><td style="text-align:left">ç”±ä¹¦å†™ä½ç½®å’Œé€‰æ‹©å™¨ä¼˜å…ˆçº§æ¥å…±åŒå†³å®š</td><td style="text-align:left">å°æ¡ˆä¾‹ å¯¹ç½‘ç«™é¦–é¡µé¦–æ¬¡æ‰“å¼€é€Ÿåº¦è¦æ±‚å¾ˆé«˜çš„ç½‘é¡µéœ€è¦  å¦‚ï¼šç™¾åº¦ã€è…¾è®¯é¦–é¡µ</td></tr><tr><td style="text-align:left">è¡Œå†…æ ·å¼</td><td style="text-align:left">css æ ·å¼å†™åœ¨æ ‡ç­¾çš„ style å±æ€§ä¸­</td><td style="text-align:left">å½“å‰æ ‡ç­¾</td><td style="text-align:left">æœ€é«˜</td><td style="text-align:left">é…åˆ JS æˆ–ç‰¹æ®Šéœ€æ±‚</td></tr><tr><td style="text-align:left">å¤–é“¾æ ·å¼</td><td style="text-align:left">css æ ·å¼å†™åœ¨å•ç‹¬ css æ–‡ä»¶ä¸­ï¼Œé€šè¿‡ link æ ‡ç­¾å¼•å…¥</td><td style="text-align:left">å¤šä¸ªé¡µé¢</td><td style="text-align:left">ç”±ä¹¦å†™ä½ç½®å’Œé€‰æ‹©å™¨ä¼˜å…ˆçº§æ¥å…±åŒå†³å®š</td><td style="text-align:left">é¡¹ç›®å¼€å‘ä¸­é«˜é¢‘ä½¿ç”¨</td></tr><tr><td style="text-align:left">å¯¼å…¥å¼æ ·å¼</td><td style="text-align:left">æŠŠ@import æ”¾åœ¨<code>style</code>æ ‡ç­¾ä¸­æˆ– CSS æ–‡ä»¶ä¸­ï¼Œç”¨äºå¯¼å…¥å¤–éƒ¨ CSS æ ·å¼æ–‡ä»¶</td><td style="text-align:left">è¢«å¯¼å…¥çš„é¡µé¢</td><td style="text-align:left">æœ€ä½</td><td style="text-align:left">é¡¹ç›®å¼€å‘ä¸­å‡ ä¹ä¸ç”¨ï¼ˆç”¨ä½œäº†è§£å³å¯ï¼‰</td></tr></tbody></table><h3 id="CSSé€‰æ‹©å™¨çš„æƒé‡è®¡ç®—">CSSé€‰æ‹©å™¨çš„æƒé‡è®¡ç®—</h3><h4 id="å±‚å æ€§">å±‚å æ€§</h4><blockquote><p>TIP</p><ul><li>CSS å…¨åå« <code>å±‚å å¼æ ·å¼è¡¨</code> ï¼Œå±‚å æ€§æ˜¯å®ƒå¾ˆé‡è¦çš„æ€§è´¨</li><li>å±‚å æ€§ï¼šå¤šä¸ªé€‰æ‹©å™¨å¯ä»¥åŒæ—¶ä½œç”¨äºåŒä¸€ä¸ªæ ‡ç­¾ï¼Œæ•ˆæœå åŠ </li></ul></blockquote><h4 id="å±‚å æ€§çš„å†²çªå¤„ç†">å±‚å æ€§çš„å†²çªå¤„ç†</h4><blockquote><p>TIP</p><ul><li>å¤šä¸ªé€‰æ‹©å™¨å®šä¹‰åŒä¸€å…ƒç´ çš„å†²çªé—®é¢˜</li><li>CSS æœ‰ä¸¥å¯†çš„å¤„ç†å†²çªçš„è§„åˆ™</li><li><code>id æƒé‡ &gt; classæƒé‡ &gt; æ ‡ç­¾æƒé‡ &gt; é€šé…ç¬¦æƒé‡</code></li><li>å¤æ‚é€‰æ‹©å™¨å¯ä»¥é€šè¿‡ï¼ˆ<code>idçš„ä¸ªæ•°ï¼Œclassçš„ä¸ªæ•°ï¼Œæ ‡ç­¾çš„ä¸ªæ•°</code>ï¼‰çš„å½¢å¼ï¼Œè®¡ç®—æƒé‡</li></ul></blockquote><h4 id="CSS-é€‰æ‹©å™¨åˆ†ç±»æ±‡æ€»">CSS é€‰æ‹©å™¨åˆ†ç±»æ±‡æ€»</h4><table><thead><tr><th style="text-align:left">é€‰æ‹©å™¨</th><th style="text-align:left">ç¤ºä¾‹</th><th style="text-align:left">ç¤ºä¾‹è¯´æ˜</th><th style="text-align:left">CSS ç‰ˆæœ¬</th></tr></thead><tbody><tr><td style="text-align:left">element</td><td style="text-align:left">p</td><td style="text-align:left">é€‰æ‹©æ‰€æœ‰<code>&lt;p&gt;</code>å…ƒç´ </td><td style="text-align:left">1</td></tr><tr><td style="text-align:left">.class</td><td style="text-align:left">.intro</td><td style="text-align:left">é€‰æ‹©æ‰€æœ‰<code>class=&quot;intro&quot;</code>çš„å…ƒç´ </td><td style="text-align:left">1</td></tr><tr><td style="text-align:left">#id</td><td style="text-align:left">#firstname</td><td style="text-align:left">é€‰æ‹©æ‰€æœ‰<code>id=&quot;firstname&quot;</code>çš„å…ƒç´ </td><td style="text-align:left">1</td></tr><tr><td style="text-align:left">*</td><td style="text-align:left">*</td><td style="text-align:left">é€‰æ‹©æ‰€æœ‰å…ƒç´ </td><td style="text-align:left">2</td></tr><tr><td style="text-align:left">element,element</td><td style="text-align:left">div,p</td><td style="text-align:left">é€‰æ‹©æ‰€æœ‰<code>&lt;div&gt;</code>å…ƒç´ å’Œ<code>&lt;p&gt;</code>å…ƒç´ </td><td style="text-align:left">1</td></tr><tr><td style="text-align:left">element element</td><td style="text-align:left">div p</td><td style="text-align:left">é€‰æ‹©<code>&lt;div&gt;</code>å…ƒç´ å†…çš„æ‰€æœ‰<code>&lt;p&gt;</code>å…ƒç´ </td><td style="text-align:left">1</td></tr><tr><td style="text-align:left">element &gt; element</td><td style="text-align:left">div&gt;p</td><td style="text-align:left">é€‰æ‹©æ‰€æœ‰çˆ¶çº§æ˜¯ <code>&lt;div&gt;</code> å…ƒç´ çš„ <code>&lt;p&gt;</code> å…ƒç´ </td><td style="text-align:left">2</td></tr><tr><td style="text-align:left">element + element</td><td style="text-align:left">div+p</td><td style="text-align:left">é€‰æ‹©æ‰€æœ‰ç´§è·Ÿåœ¨ <code>&lt;div&gt;</code>å…ƒç´ ä¹‹åçš„ç¬¬ä¸€ä¸ª<code>&lt;p&gt;</code>å…ƒç´ </td><td style="text-align:left">2</td></tr><tr><td style="text-align:left">element1 ~ element2</td><td style="text-align:left">p~ul</td><td style="text-align:left">é€‰æ‹© p å…ƒç´ ä¹‹åçš„æ¯ä¸€ä¸ª ul å…ƒç´ </td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">:link</td><td style="text-align:left">a:link</td><td style="text-align:left">é€‰æ‹©æ‰€æœ‰æœªè®¿é—®é“¾æ¥</td><td style="text-align:left">1</td></tr><tr><td style="text-align:left">:visited</td><td style="text-align:left">a:visited</td><td style="text-align:left">é€‰æ‹©æ‰€æœ‰è®¿é—®è¿‡çš„é“¾æ¥</td><td style="text-align:left">1</td></tr><tr><td style="text-align:left">:active</td><td style="text-align:left">a:active</td><td style="text-align:left">é€‰æ‹©æ´»åŠ¨é“¾æ¥</td><td style="text-align:left">1</td></tr><tr><td style="text-align:left">:hover</td><td style="text-align:left">a:hover</td><td style="text-align:left">é€‰æ‹©é¼ æ ‡åœ¨é“¾æ¥ä¸Šé¢æ—¶</td><td style="text-align:left">1</td></tr><tr><td style="text-align:left">:first-letter</td><td style="text-align:left">p:first-letter</td><td style="text-align:left">é€‰æ‹©æ¯ä¸€ä¸ª<code>&lt;p&gt;</code>å…ƒç´ çš„ç¬¬ä¸€ä¸ªå­—æ¯</td><td style="text-align:left">1</td></tr><tr><td style="text-align:left">:first-line</td><td style="text-align:left">p:first-line</td><td style="text-align:left">é€‰æ‹©æ¯ä¸€ä¸ª<code>&lt;p&gt;</code>å…ƒç´ çš„ç¬¬ä¸€è¡Œ</td><td style="text-align:left">1</td></tr><tr><td style="text-align:left">:first-child</td><td style="text-align:left">p:first-child</td><td style="text-align:left">æŒ‡å®šåªæœ‰å½“<code>&lt;p&gt;</code>å…ƒç´ æ˜¯å…¶çˆ¶çº§çš„ç¬¬ä¸€ä¸ªå­çº§çš„æ ·å¼ã€‚</td><td style="text-align:left">2</td></tr><tr><td style="text-align:left">:before</td><td style="text-align:left">p:before</td><td style="text-align:left">åœ¨æ¯ä¸ª<code>&lt;p&gt;</code>å…ƒç´ ä¹‹å‰æ’å…¥å†…å®¹</td><td style="text-align:left">2</td></tr><tr><td style="text-align:left">:after</td><td style="text-align:left">p:after</td><td style="text-align:left">åœ¨æ¯ä¸ª<code>&lt;p&gt;</code>å…ƒç´ ä¹‹åæ’å…¥å†…å®¹</td><td style="text-align:left">2</td></tr><tr><td style="text-align:left">[attribute]</td><td style="text-align:left">[target]</td><td style="text-align:left">é€‰æ‹©æ‰€æœ‰å¸¦æœ‰ target å±æ€§å…ƒç´ </td><td style="text-align:left">2</td></tr><tr><td style="text-align:left">[attribute = value]</td><td style="text-align:left">[target=-blank]</td><td style="text-align:left">é€‰æ‹©æ‰€æœ‰ä½¿ç”¨<code>target=&quot;-blank&quot;</code>çš„å…ƒç´ </td><td style="text-align:left">2</td></tr><tr><td style="text-align:left">[attribute ~= value]</td><td style="text-align:left">[title~=flower]</td><td style="text-align:left">é€‰æ‹©æ ‡é¢˜å±æ€§åŒ…å«å•è¯&quot;flower&quot;çš„æ‰€æœ‰å…ƒç´ </td><td style="text-align:left">2</td></tr><tr><td style="text-align:left">[attribute |= language]</td><td style="text-align:left">[lang|=en]</td><td style="text-align:left">é€‰æ‹© lang å±æ€§ç­‰äº <strong>en</strong>ï¼Œæˆ–è€…ä»¥ <strong>en-</strong> ä¸ºå¼€å¤´çš„æ‰€æœ‰å…ƒç´ </td><td style="text-align:left">2</td></tr><tr><td style="text-align:left">[attribute ^= value]</td><td style="text-align:left">a[src^=â€œhttpsâ€]</td><td style="text-align:left">é€‰æ‹©æ¯ä¸€ä¸ª src å±æ€§çš„å€¼ä»¥<code>&quot;https&quot;</code>å¼€å¤´çš„å…ƒç´ </td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">[attribute $= value]</td><td style="text-align:left">a[src$=â€œ.pdfâ€]</td><td style="text-align:left">é€‰æ‹©æ¯ä¸€ä¸ª src å±æ€§çš„å€¼ä»¥<code>&quot;.pdf&quot;</code>ç»“å°¾çš„å…ƒç´ </td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">[attribute *= value]</td><td style="text-align:left">a[src*=â€œicodingeduâ€]</td><td style="text-align:left">é€‰æ‹©æ¯ä¸€ä¸ª src å±æ€§çš„å€¼åŒ…å«å­å­—ç¬¦ä¸²<code>&quot;icodingedu&quot;</code>çš„å…ƒç´ </td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">:checked</td><td style="text-align:left">input:checked</td><td style="text-align:left">é€‰æ‹©æ¯ä¸ªé€‰ä¸­çš„è¾“å…¥å…ƒç´ </td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">:focus</td><td style="text-align:left">input:focus</td><td style="text-align:left">é€‰æ‹©å…·æœ‰ç„¦ç‚¹çš„è¾“å…¥å…ƒç´ </td><td style="text-align:left">2</td></tr><tr><td style="text-align:left">:first-of-type</td><td style="text-align:left">p:first-of-type</td><td style="text-align:left">é€‰æ‹©æ¯ä¸ª p å…ƒç´ æ˜¯å…¶çˆ¶çº§çš„ç¬¬ä¸€ä¸ª p å…ƒç´ </td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">:last-of-type</td><td style="text-align:left">p:last-of-type</td><td style="text-align:left">é€‰æ‹©æ¯ä¸ª p å…ƒç´ æ˜¯å…¶çˆ¶çº§çš„æœ€åä¸€ä¸ª p å…ƒç´ </td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">:only-of-type</td><td style="text-align:left">p:only-of-type</td><td style="text-align:left">é€‰æ‹©æ¯ä¸ª p å…ƒç´ æ˜¯å…¶çˆ¶çº§çš„å”¯ä¸€ p å…ƒç´ </td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">:only-child</td><td style="text-align:left">p:only-child</td><td style="text-align:left">é€‰æ‹©æ¯ä¸ª p å…ƒç´ æ˜¯å…¶çˆ¶çº§çš„å”¯ä¸€å­å…ƒç´ </td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">:nth-child(n)</td><td style="text-align:left">p:nth-child(2)</td><td style="text-align:left">é€‰æ‹©æ¯ä¸ª p å…ƒç´ æ˜¯å…¶çˆ¶çº§çš„ç¬¬äºŒä¸ªå­å…ƒç´ </td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">:nth-last-child(n)</td><td style="text-align:left">p:nth-last-child(2)</td><td style="text-align:left">é€‰æ‹©æ¯ä¸ª p å…ƒç´ çš„æ˜¯å…¶çˆ¶çº§çš„ç¬¬äºŒä¸ªå­å…ƒç´ ï¼Œä»æœ€åä¸€ä¸ªå­é¡¹è®¡æ•°</td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">:nth-of-type(n)</td><td style="text-align:left">p:nth-of-type(2)</td><td style="text-align:left">é€‰æ‹©æ¯ä¸ª p å…ƒç´ æ˜¯å…¶çˆ¶çº§çš„ç¬¬äºŒä¸ª p å…ƒç´ </td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">:nth-last-of-type(n)</td><td style="text-align:left">p:nth-last-of-type(2)</td><td style="text-align:left">é€‰æ‹©æ¯ä¸ª p å…ƒç´ çš„æ˜¯å…¶çˆ¶çº§çš„ç¬¬äºŒä¸ª p å…ƒç´ ï¼Œä»æœ€åä¸€ä¸ªå­é¡¹è®¡æ•°</td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">:last-child</td><td style="text-align:left">p:last-child</td><td style="text-align:left">é€‰æ‹©æ¯ä¸ª p å…ƒç´ æ˜¯å…¶çˆ¶çº§çš„æœ€åä¸€ä¸ªå­çº§ã€‚</td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">:root</td><td style="text-align:left">:root</td><td style="text-align:left">é€‰æ‹©æ–‡æ¡£çš„æ ¹å…ƒç´ </td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">:empty</td><td style="text-align:left">p:empty</td><td style="text-align:left">é€‰æ‹©æ¯ä¸ªæ²¡æœ‰ä»»ä½•å­çº§çš„ p å…ƒç´ ï¼ˆåŒ…æ‹¬æ–‡æœ¬èŠ‚ç‚¹ï¼‰</td><td style="text-align:left">3</td></tr></tbody></table><p>ä¸å¸¸ç”¨é€‰æ‹©å™¨ï¼š</p><table><thead><tr><th style="text-align:left">é€‰æ‹©å™¨</th><th style="text-align:left">ç¤ºä¾‹</th><th style="text-align:left">ç¤ºä¾‹è¯´æ˜</th><th style="text-align:left">CSS ç‰ˆæœ¬</th></tr></thead><tbody><tr><td style="text-align:left">:target</td><td style="text-align:left">#news:target</td><td style="text-align:left">é€‰æ‹©å½“å‰æ´»åŠ¨çš„<code>#news</code>å…ƒç´ ï¼ˆåŒ…å«è¯¥é”šåç§°çš„ç‚¹å‡»çš„ URLï¼‰</td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">:enabled</td><td style="text-align:left">input:enabled</td><td style="text-align:left">é€‰æ‹©æ¯ä¸€ä¸ªå·²å¯ç”¨çš„è¾“å…¥å…ƒç´ </td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">:disabled</td><td style="text-align:left">input:disabled</td><td style="text-align:left">é€‰æ‹©æ¯ä¸€ä¸ªç¦ç”¨çš„è¾“å…¥å…ƒç´ </td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">:not(selector)</td><td style="text-align:left">:notÂ§</td><td style="text-align:left">é€‰æ‹©æ¯ä¸ªå¹¶é p å…ƒç´ çš„å…ƒç´ </td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">::selection</td><td style="text-align:left">::selection</td><td style="text-align:left">åŒ¹é…å…ƒç´ ä¸­è¢«ç”¨æˆ·é€‰ä¸­æˆ–å¤„äºé«˜äº®çŠ¶æ€çš„éƒ¨åˆ†</td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">:out-of-range</td><td style="text-align:left">:out-of-range</td><td style="text-align:left">åŒ¹é…å€¼åœ¨æŒ‡å®šåŒºé—´ä¹‹å¤–çš„ input å…ƒç´ </td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">:in-range</td><td style="text-align:left">:in-range</td><td style="text-align:left">åŒ¹é…å€¼åœ¨æŒ‡å®šåŒºé—´ä¹‹å†…çš„ input å…ƒç´ </td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">:read-write</td><td style="text-align:left">:read-write</td><td style="text-align:left">ç”¨äºåŒ¹é…å¯è¯»åŠå¯å†™çš„å…ƒç´ </td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">:read-only</td><td style="text-align:left">:read-only</td><td style="text-align:left">ç”¨äºåŒ¹é…è®¾ç½®<code>&quot;readonly&quot;</code>ï¼ˆåªè¯»ï¼‰ å±æ€§çš„å…ƒç´ </td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">:optional</td><td style="text-align:left">:optional</td><td style="text-align:left">ç”¨äºåŒ¹é…å¯é€‰çš„è¾“å…¥å…ƒç´ </td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">:required</td><td style="text-align:left">:required</td><td style="text-align:left">ç”¨äºåŒ¹é…è®¾ç½®äº† <code>&quot;required&quot;</code> å±æ€§çš„å…ƒç´ </td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">:valid</td><td style="text-align:left">:valid</td><td style="text-align:left">ç”¨äºåŒ¹é…è¾“å…¥å€¼ä¸ºåˆæ³•çš„å…ƒç´ </td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">:invalid</td><td style="text-align:left">:invalid</td><td style="text-align:left">ç”¨äºåŒ¹é…è¾“å…¥å€¼ä¸ºéæ³•çš„å…ƒç´ </td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">:lang(language)</td><td style="text-align:left">p:lang(it)</td><td style="text-align:left">é€‰æ‹©ä¸€ä¸ª lang å±æ€§çš„èµ·å§‹å€¼<code>=&quot;it&quot;</code>çš„æ‰€æœ‰<code>&lt;p&gt;</code>å…ƒç´ </td><td style="text-align:left">2</td></tr></tbody></table><h3 id="ç»§æ‰¿æ€§">ç»§æ‰¿æ€§</h3><ol><li><p><strong>ç¥–å…ˆå…ƒç´ è®¾ç½®ï¼Œåä»£å…ƒç´ å³ç”Ÿæ•ˆ</strong></p><ul><li>æ–‡æœ¬ç›¸å…³çš„å±æ€§æ™®éå…·æœ‰ç»§æ‰¿æ€§ï¼Œåªéœ€è¦ç»™ <strong>ç¥–å…ˆæ ‡ç­¾</strong> è®¾ç½®ï¼Œå³å¯åœ¨åä»£æ‰€æœ‰æ ‡ç­¾ä¸­ç”Ÿæ•ˆã€‚</li><li>å› ä¸ºæ–‡å­—ç›¸å…³å±æ€§æœ‰ç»§æ‰¿æ€§ï¼Œæ‰€ä»¥é€šå¸¸ä¼šè®¾ç½® <code>&lt;body&gt;</code>æ ‡ç­¾çš„å­—å·ã€é¢œè‰²ã€è¡Œé«˜ç­‰ï¼Œè¿™æ ·å°±èƒ½å½“åšæ•´ä¸ªç½‘é¡µçš„é»˜è®¤æ ·å¼äº†</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.box</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">line-height</span>: <span class="number">1.5</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-family</span>: <span class="string">&quot;å®‹ä½“&quot;</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">text-decoration</span>: underline;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-style</span>: italic;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: skyblue;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ç»§æ‰¿æ€§<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>æˆ‘æ˜¯åˆ—è¡¨é¡¹<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>æˆ‘æ˜¯åˆ—è¡¨é¡¹<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>æˆ‘æ˜¯åˆ—è¡¨é¡¹<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>æˆ‘æ˜¯åˆ—è¡¨é¡¹<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>æˆ‘æ˜¯åˆ—è¡¨é¡¹<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="https://www.arryblog.com/assets/img/image-20211127000019693.46547df3.png" alt=""></p></li><li><p><strong>å°±è¿‘åŸåˆ™</strong></p><ul><li><p>åœ¨ä¸ç»§æ‰¿çš„æƒ…å†µä¸‹ï¼Œé€‰æ‹©å™¨æƒé‡è®¡ç®—å¤±æ•ˆï¼Œè€Œä¸æ˜¯å°±è¿‘åŸåˆ™</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="comment">/* ï¼ˆ3,0,0ï¼‰ æ³¨æ„ï¼šç»§æ‰¿çš„é€‰æ‹©å™¨ï¼Œæƒé‡å¯ä»¥çœ‹åšæ˜¯0ï¼Œæƒé‡ç»å¯¹æ²¡æœ‰é€‰ä¸­çš„å¤§*/</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#box1</span> <span class="selector-id">#box2</span> <span class="selector-id">#box3</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="comment">/* ï¼ˆ0,0,1ï¼‰pæ ‡ç­¾æ˜¯ç›´æ¥é€‰ä¸­ï¼Œæƒé‡æœ€é«˜ï¼Œå› æ­¤è·Ÿç»§æ‰¿æ²¡å…³ç³» */</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: skyblue;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>åœ¨ç»§æ‰¿çš„æƒ…å†µä¸‹ï¼Œé€‰æ‹©å™¨æƒé‡è®¡ç®—å¤±æ•ˆï¼Œè€Œä¸æ˜¯å°±è¿‘åŸåˆ™<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span> <span class="attr">id</span>=<span class="string">&quot;box1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span> <span class="attr">id</span>=<span class="string">&quot;box2&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box3&quot;</span> <span class="attr">id</span>=<span class="string">&quot;box3&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯æ®µè½æ ‡ç­¾<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨ç»§æ‰¿çš„æƒ…å†µä¸‹ï¼Œé€‰æ‹©å™¨æƒé‡è®¡ç®—å¤±æ•ˆï¼Œè€Œæ˜¯å°±è¿‘åŸåˆ™</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="comment">/* å°±è¿‘åŸåˆ™ï¼Œè°æè¿°çš„è¿‘ï¼Œå¬è°çš„ */</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#box1</span> <span class="selector-id">#box2</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="comment">/* .box3æè¿°è·ç¦»pæ ‡ç­¾æ›´è¿‘ï¼Œæ‰€ä»¥ï¼Œå½“å‰ç”Ÿæ•ˆ */</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.box1</span> <span class="selector-class">.box3</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: green;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>åœ¨ç»§æ‰¿çš„æƒ…å†µä¸‹ï¼Œé€‰æ‹©å™¨æƒé‡è®¡ç®—å¤±æ•ˆï¼Œè€Œæ˜¯å°±è¿‘åŸåˆ™<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span> <span class="attr">id</span>=<span class="string">&quot;box1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span> <span class="attr">id</span>=<span class="string">&quot;box2&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box3&quot;</span> <span class="attr">id</span>=<span class="string">&quot;box3&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯æ®µè½æ ‡ç­¾<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li></ol><h3 id="marginçš„å¡Œé™·">marginçš„å¡Œé™·</h3><p><strong>marginå¡Œé™·</strong>ï¼šæ˜¯å¤–é—´è·é‡å  æˆ– å¤–è¾¹è·åˆå¹¶ æˆ– å¤–è¾¹è·ç©¿é€ã€‚</p><p><strong>â‘  å…„å¼Ÿå…ƒç´ ä¹‹é—´ ï¼Œå‚ç›´æ–¹å‘ï¼šä¸Šä¸‹å¤–è¾¹è·å‡ºç°å¡Œé™·</strong></p><blockquote><p>TIP</p><ul><li>å‚ç›´æ–¹å‘çš„ margin æœ‰å¡Œé™·ç°è±¡ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ çš„ä¸‹å¤–è¾¹è·ä¸ç¬¬äºŒä¸ªå…ƒç´ çš„ä¸Šå¤–è¾¹è·ä¼šå‘ç”Ÿåˆå¹¶</li><li>å°çš„ margin ä¼šå¡Œé™·åˆ°å¤§çš„ margin ä¸­ï¼Œä»è€Œ margin ä¸å åŠ ï¼Œåªä»¥å¤§å€¼ä¸ºå‡†</li><li>ä»¥ä¸‹ä¸¤ç›’å­ä¹‹é—´é—´è·ä¸º 100px ï¼Œå‚ç›´æ–¹å‘çš„ margin ä¸å åŠ ï¼Œä»¥å¤§æ•°ä¸ºå‡†</li></ul></blockquote><p><img src= "/img/loading.gif" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWgAAAE9CAYAAAAmpviRAAAQsklEQVR4nO3dP2ic9/3A8c/zSJ1aZ9FB3ZKtJNZQqH5pFiEoGUMrocF0KHRRJWpMoKagQWA6BRUNWtymmICMO3QrHoQ1ZPQibmiIPXiQCNlC60FenG6V7vkNp3t0p/9ydHcfxa8XhEg63aPvne33fe97z+lbVFVVBQDplMMeAADHE2iApAQaICmBBkhKoAGSEmiApAQaICmBBkhqdNgD4GQrT3eGPQRIa+n/GsMeQt+ZQQMkJdAASQk0QFICDZCUQAMkJdAASQk0QFICDZCUQAMkJdAASQk0QFICDZCUQAMkJdAASQk0QFICDZCUQAMkJdAASQk0QFICDZCUQAMkJdAASQk0QFICDZCUQAMkJdAASQk0QFICDZCUQAMkJdAASQk0QFICDZCUQAMkJdAASQk0QFICDZCUQAMkJdAASQk0QFICDZCUQAMkJdAASQk0QFICDZCUQAMkJdAASQk0QFICDZCUQAMkJdAASQk0QFICDZCUQAMkJdAASQk0QFICDZCUQAMkJdAASQk0QFICDZCUQAMkJdAASQk0QFICDZCUQAMkJdAASQk0QFICDZCUQAMkJdAASQk0QFICDZCUQAMkJdAASQk0QFICDZCUQAMkJdAASQk0QFICDZCUQAMkJdAASQk0QFICDZCUQAMkJdAASQk0QFICDZCUQAMkJdAASQk0QFICDZCUQAMkJdAASQk0QFICDZCUQAMkJdAASQk0QFJFVVXVsAcBwFFm0ABJCTRAUgJNX1WvXg17CHBlCTR9VX355bCHAFeWQAMkJdAASQk0QFICDZCUQNNX1VdfDXsIcGUJNP313/8OewRwZQk0QFICDZCUQAMkJdD01zffDHsEcGUJNH3lrd7w+gQaICmBBkhKoAGSEmiApASavqq2t4c9BLiyBJq+KrzVG16bQAMkJdAASQk0QFICTd/Z2Rtej0DTd97uDa9HoAGSEmiApAQaICmBBkhKoOk7O3vD6xFo+s/bveG1CDRAUgINkFTqQLfW1mJ3cvJbHaN69ix2JyejevbskkaVz97cXLQ2No79+u7kZOxOTsbe4mLPZZ37pfPfcdcHhit1oLNobWwceaBora3F7szMkEbUVj/4bG0duawT5NFmM0abzag2N6O1tnZw+e3bUc7Px2izGeX8fLSWl/s3UDt7w2tJHehyYSFGm81hDyOl1sZG7N2+fez9Uz17FtXmZpR37tRfK2dno9rcbF93ZSWK8fEoFxbaly0sRDQaPQG/TN7qDa9n9LQLd2dmopydjdaDBwdXaDZjb3Gx/sdezs5GubTUc53Y2YmIiGJqKkZWVyOiHYVqeztibKwdj/n5KBcWorWyEq319fb3j4+3DzI2FiOrq9FaW4vWgwd1hPbm5qK4cSOq7e161tg5zlmqr7+Ovdu368/Lu3ejnJ6uP9+bm+uZiXYu7x7f7uRke4z7t6H+WtftPOk4EQez2nj58mD8d+9GvHhR38fF+HiMPHx48P0vX9afdyunp3vG33NbP/88otGIYmLi4Is//WlU+7ej2t6O4saNnusUN27UY+peDunczu5xHb7NnftotNmM3cnJc/+ZAKc7cwbdCeRosxnRaNSRqp8ar6/X67t7i4sx8vHHMdpsxsj9++2n1V1rm9XW1sF1u+LcOX5x8+axT9d7xrO+HsXNm+1jHHrwOPV6n35a/5xydjZay8v1uHdnZiLGxg4u33/KXz17FuXSUjui0X5wGnn4MEZWV6Ocn49oNNpf2w/Vacep74PNzXr8xdRU+/KtrYP7bGurbzPZi6g2N+s/q9FmM6qtrTrc3X+21bNn0Vpfj5H794c8YvjuOTPQ5fz8wcdTUxGNRu9T42jPTiMiRlZX61lbMTER0WhEvHhxcLCu60ZEtPZn0vXxp6cPZtEnKKam6plj8eGH7Z9/jhcAy1u3Dj5eWopoNKL6/PP2A8jOTh3Zzu0qxsej+uyzM49b35ZzHqdn/B980P6+3/62/fnERPv27z8DGVldPXb2PAjdSyAR7b8Hnf0Fi4mJ9pLJo0fRuncvyvn5+s+98+ALfHunLnFcVPfSx3GKRqP3Czs7EdevX+hnHDlGtB8giomJnuWVaDRi9PHjg+u9/fbxB3zxov1ActjYWFSdY53HZR0ni7GxUy8ul5Zid2YmikMPusDlubQXCVsbG1FtbsbI/fs9SyJn6p5hf0ujjx/XP7s7zsfqPDhcv34Q9W4vXx77YHCiyzrOJSjefz9iZ6f3mcXz5/Wzk846frdqe/v0Zy87Oz23o7WyEkWjEdXOzplLMnb2htfTt7M4WmtrxwerSzE11bOG3FpbO3MN+rXHc+9e/fHe4mJ7uaXzQluj0fPCWGccnSWUjiNLKV237yLHOa+9xcXYm5u78PU6SyWtf/zjYCz7a/cR7aWhamurfn2gE9jumXD36weddeZiaqrn8/LOnShv3TrzdQA7e/eqnj6N6unTYQ+DK+DSljjK6emonjypz5Qo9terTzOyulq/maJznWJ8vC8zzmJqqudc5u7T00YfP47dmZkTLy+np6N69Cj2bt+uz2YoFxaitb7ec0bDWccZpJGHD3vGUs7PH6x9T0xEefdutJaX6/OfD4+zmJqK6tGj2N2/vJydjXJhIapnz9rnUM/Oth8IJiaievIkdicnD87iOHSGDL1aDx9G9epVjP7978MeCskVVVVVwx5Et86pfdY1h6c+W6PrBc/zaG1stM+W6Vpe6jxAOJ+9rXr6NPY++iiiqmLkT3+K4pe/HPaQSGyob1Rpraz0rF+2VlYidnbE+ap6/rx9pg8naj18GLE/J9p78MC7LDnVpZ7FcVHl0lJ7iePQG2G4mrrfsHRY9epVFG+9NcDR5FM9fdp+E1HHv/8drX/+M8rf/W54gyK1dEscfLfUa+CffBLlz38+5NEM194f/hDVv/7V+8Vr12L00aOIa9eGMyhSS/27OOC74sjsueObb2Lvr38d/IC4EgQaBqB77fmw6vHjiP/8Z8Aj4ioQaOizE2fPXfb+/OcBjYarZKgvEsKb4LTZsxfFOY1AMxDVV19FvKEvEo785S/1x7u/+EXE//43xNFwlVjiYDC83RsuTKBhkH7wg2GPgCtEoGGAip/8ZNhD4AoRaBgWs2nOINAMht85ccRZuweBQDMQdvaGixNogKQEGgbpRz8a9gjOrbW21rP5xFXR2tiI3cnJnv8Ob8t22mWZeKMKDFDxox/Fm/brI/fm5qK4cePUX0d7qV68qHc+Ok69KcjSUnuTieXlKN5/v96ZPhMzaOBY5cLC1Xwr+il7odb7b+4/WJTT01GMj0f12WcDGdpFmUEzEHb2vrjOTK91aEOLvcXFqDY3IyLqmWD3dTqB6uyVGdHeraja3o4YG4tqc7O9R+XCQntXo/X19vd3zioZG4uR1dVora1F68GDOtKdmXC1vV1v7tw5zom3YX+JpNraam80vL9fZWdvy1qjcWSrtM6+mR3dP2t3cvL0nz02duyXq62tKG7c6Pla9y73nfupuHGjvl+6x9a9B2nn+1vr6+39OGdmopyautRnCmbQDISdvV9PJ5CjzWZEo9EOxPh4jDabUc7PR2t9vd5tfm9xMUY+/jhGm80YuX+/Z2f2iP04da7bFefO8YubN+vwnjie/d3hR5vNIw8exxltNqMYH49ydrZ9nenpaG1stDcevnv34Gc3Gkd2sG8tL9eXl/Pz0XrwoOf2nKTa2Ylqc7NeY+7ssXlenfugvt8j6rF136+d3e1H7t+/0PEvQqAhsXJ+/uDjqamIRqOeNXb+X339dUS0N/ntrKMWExMRjUbEixcHB+u6bkREa38mXR9//+n+aYqpqYPd4T/8sP3z9x8gzqt68qTnOBER5Z07UW1t9RyrZ2wLC+2xPX8eEVE/yBxnZHW1jmsd1JWV8w+w0eiZBZe3btXRLiYmopydjerRo2jduxfl/Hx9n48+fnzp6+yWOGCAip/9rG/H7l76OPZnNxq9X9jZibh+/UI/48gxov0AUUxM9CyvHF6y6PHy5dFlhv3IdY4VERce27Hj7QT1Aktsx93GbuXSUuzOzERx6AGvHwQavgNaGxtRbW7GyP37deB2Z2bOvmL3DPtbOjHIh42NRXXohbzOzLl4++0Tr1bt7ETxLXeNL8bHD9aWO8fdX3M+0YsX7Wcj+1orK1E0GlHt7ERrba2vkbbEwcBUr14NewipFO+807djt9bWTj2bIaK9XNG9htxaWztzDfp1dQe5+OCDI+vjrXv3ohgf7znVrfXppwcfr6xE7Oz0vEh40vnLPevu++vEnbCXCwsR+2HtfG+1tdWzNFFtbfUcu/XgQXt5qet45Z07Ud66deYa/LdlBs3AVF9+GcUb+kv7j3WJO3mX09NRPXlSnxlR7K9Xn2ZkdTX25ubqMy2Kqal2JM+43kUVN29Ga3m5PjOjs/bcWl6uz9LoPjOivk2zsz1vlDn3i3HPn8fuCWd/dI6zd/t2HdfDxy3Gx6Pa2uq5X8qlpfrMk3J2NoqJiSgmJqJ68iR2JycPzuKYnb3UGXVRVSfsxQOXoPsfWPnJJ1G+4YGuvvgi9j76KCIiyt//PspDZy4MWz8i81rjOBTzQemcZnfSm1xO0on3ZZ83bokDBqhI9CtGWysrvU/lDy0jcH7V559/6/Xx41jigEF6992I730vxb6E5dJSe4nj0BthuLh+PagJNLzBLvpUflCG9UAxsN8Xck6WOBiY6quvhj0EuFIEmsHxdm+4EIEGSEqgYcDs7M15CTQMWqJT7chNoBkcO3v3EmrOINAMjJ29e1nq4CwCDZCUQAMkJdAwYMV77w17CFwRAg2QlEAzMHb2hosRaAbGzt5wMQINkJRfN8pA1TusvPdejP7tb8MdzJAUP/zhsIfAFSHQXLrdjz6K+OKLU7+nnJ8f0GgSun592CPgirDEwaUbuXPn9G94770onWoGZxJoLl3x7rsRp2z2+UbPnrsU77wz7CGQnEDTFyNzc1F9//tHLzB7PnDt2rBHQHICTV8UP/5xlL/5zZGvmz3D+Qk0fVP++te9s2iz54jYX9oYGRn2MLgCBJq+Kd56K0b++Mf6c7PnfdeuRZT+6XE2f0voq/JXv4rq+nWzZ3gNRVVV1bAHwXdba/+caIGGixFogKS8kzCzrWLYI4C8xr/7c0tr0ABJCTRAUgINkJRAAyQl0ABJCTRAUgINkJRAAyQl0ABJCTRAUgINkJRAAyQl0ABJCTRAUgINkJRAAyQl0ABJCTRAUgINkJRAAyQl0ABJCTRAUgINkJRAAyQl0ABJCTRAUgINkJRAAyQl0ABJCTRAUgINkJRAAyQl0ABJCTRAUgINkJRAAyQl0ABJCTRAUgINkJRAAyQl0ABJCTRAUgINkJRAAyQl0ABJCTRAUgINkJRAAyQl0ABJCTRAUgINkJRAAyQl0ABJCTRAUgINkJRAAyQl0ABJCTRAUgINkJRAAyQl0ABJCTRAUgINkJRAAyQl0ABJCTRAUgINkJRAAyQl0ABJCTRAUgINkJRAAyQl0ABJCTRAUgINkJRAAyQl0ABJCTRAUgINkJRAAyQl0ABJCTRAUgINkJRAAyQl0ABJCTRAUgINkJRAAyQl0ABJCTRAUgINkJRAAyQl0ABJCTRAUgINkJRAAyQl0ABJCTRAUgINkFRRVVU17EEAcJQZNEBSAg2QlEADJCXQAEkJNEBSAg2QlEADJPX/t0edvtUmBMIAAAAASUVORK5CYII=" alt=""></p><blockquote><p>â€‹<strong>è§£å†³åŠæ³•ï¼š</strong></p><ul><li>ä»»ä½•ä¸€ä¸ªå…ƒç´ åŠ ä¸Š display:inline-block;</li><li>æŠŠå¤–è¾¹è·åªåŠ åœ¨å…¶ä¸­ä¸€ä¸ªå…ƒç´ ä¸Š</li><li>ä»»æ„ä¸€ä¸ªå…ƒç´ å¤–è¾¹è·æ¢æˆå¯¹åº”çš„ padding</li></ul></blockquote><p><strong>â‘¡ margin åœ¨æ°´å¹³æ–¹å‘ï¼šä¸ä¼šå¡Œé™·</strong></p><blockquote><p>TIP</p><ul><li>margin åœ¨æ°´å¹³æ–¹å‘ ä¸ä¼šå¡Œé™·</li><li>margin åœ¨å‚ç›´æ–¹å‘ å‡ºç°å¡Œé™·</li></ul></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://www.arryblog.com/assets/img/image-20220714220940463.473aa969.png" alt=""></p><p><strong>â‘¢ çˆ¶å­å…ƒç´ ä¹‹é—´ï¼Œå‚ç›´æ–¹å‘ï¼šä¸Šå¤–è¾¹è·å¡Œé™·</strong></p><blockquote><p>TIP</p><p>å½“ä¸€ä¸ªå…ƒç´ åŒ…å«åœ¨å¦ä¸€ä¸ªå…ƒç´ ä¸­æ—¶ï¼Œå¦‚æœ<strong>çˆ¶å…ƒç´ æ²¡æœ‰è®¾ç½®å†…è¾¹è·æˆ–è¾¹æ¡†æŠŠå¤–è¾¹è·åˆ†éš”å¼€</strong>ï¼Œå®ƒä»¬çš„ä¸Šå¤–è¾¹è·ä¹Ÿä¼šå‘ç”Ÿå¡Œé™·ï¼ˆåˆå¹¶ï¼‰</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.box</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: gold;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* çˆ¶å…ƒç´ çš„ä¸Šå¤–è¾¹è· */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.item</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: skyblue;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* å­å…ƒç´ çš„ä¸Šå¤–è¾¹è·ï¼Œæ­¤æ—¶çˆ¶å­å…ƒç´ çš„ä¸Šè¾¹è·å‘ç”Ÿå¡Œé™·ï¼ˆåˆå¹¶ï¼‰ï¼Œæœ€ç»ˆä¸Šå¤–è¾¹è·çš„ç»“æœä¸º 50px */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-top</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>TIP</p><p><strong><code>.item</code></strong> çš„ <strong><code>margin-top:50px;</code></strong> å‘ç”Ÿäº†ç©¿é€ç°è±¡ï¼ˆå¡Œé™·ï¼‰</p><ul><li>ç©¿é€äº†çˆ¶å…ƒç´ ï¼Œå¹¶ä¸çˆ¶å…ƒç´ ä¸Šå¤–è¾¹è·å‘ç”Ÿåˆå¹¶ï¼Œåˆå¹¶åä»¥æœ€å¤§çš„å€¼ä¸ºä¸»ã€‚</li><li>æ‰€ä»¥çœ‹åˆ°çš„é—´è·å¹¶ä¸ <strong><code>.item</code></strong> ä¸ <strong><code>.box</code></strong> çš„é—´è·ï¼Œè€Œæ˜¯ <strong><code>.box</code></strong> ä¸æµè§ˆå™¨ä¸Šé¢äº§ç”Ÿäº† <strong><code>50px</code></strong> çš„é—´è·</li></ul></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://www.arryblog.com/assets/img/image-20220714222036503.01e70600.png" alt=""></p><blockquote><p><strong>è§£å†³æ–¹æ¡ˆ</strong></p><ul><li>ç»™<strong>çˆ¶</strong>å…ƒç´ åŠ ä¸Š <strong><code>overflow: hidden;</code></strong></li><li>ç»™<strong>çˆ¶</strong>å…ƒç´ æ·»åŠ  <strong><code>border</code></strong> è¾¹æ¡†</li><li>å°†<strong>å­</strong>å…ƒç´ çš„ margin æ”¹æˆ padding</li><li>å¯ä»¥ç»™çˆ¶å…ƒæ·»åŠ å¯¹åº”çš„å­å…ƒå¤§å°çš„ padding å€¼</li></ul></blockquote><h3 id="å»æ‰å…ƒç´ çš„é»˜è®¤æ ·å¼">å»æ‰å…ƒç´ çš„é»˜è®¤æ ·å¼</h3><blockquote><p>TIP</p><p>ç½‘é¡µä¸­çš„å…ƒç´ ä¸ºäº†å±•ç¤ºå…ƒç´ æœ¬èº«çš„ç”¨é€”å’Œç»“æ„ï¼Œéƒ½ä¼šç»™å…ƒç´ æ·»åŠ é»˜è®¤çš„æ ·å¼ã€‚</p><ul><li>ä¸€äº›å…ƒç´ éƒ½æœ‰é»˜è®¤çš„ marginï¼Œå¦‚ä¸‹å¸¸è§çš„é»˜è®¤æ ·å¼</li><li>hã€bodyã€ulã€p æ ‡ç­¾ï¼Œéƒ½æ·»åŠ äº†é»˜è®¤çš„ marginã€‚</li><li>ul æ·»åŠ äº†é»˜è®¤çš„ paddingã€list-style</li><li>a æ ‡ç­¾æ·»ä¸­äº†é»˜è®¤çš„é¢œè‰²ã€ä¸‹åˆ’çº¿</li><li>ç­‰ç­‰ â€¦ ï¼ˆåç»­åœ¨é¡¹ç›®å¼€å‘ä¸­è¿˜ä¼šæ·±å…¥æ‰€æœ‰æ ‡ç­¾çš„é»˜è®¤æ ·å¼ï¼‰</li><li>æˆ‘ä»¬åœ¨å®é™…çš„ç½‘é¡µå¼€å‘ä¸­ï¼Œè¦å°†è¿™äº›é»˜è®¤çš„æ ·å¼æ¸…é™¤æ‰ï¼Œä¹Ÿç§°ä¹‹ä¸º â€œCSS æ ·å¼çš„åˆå§‹åŒ–â€</li><li><code>*</code> é€šé…ç¬¦é€‰æ‹©å™¨ï¼Œè¡¨ç¤ºé€‰æ‹©æ‰€æœ‰å…ƒç´  ï¼ˆé€šé…ç¬¦æœ‰æ•ˆç‡é—®é¢˜ï¼Œå®é™…å·¥ä½œä¸­ä¸ä½¿ç”¨ï¼‰</li></ul></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* é€šé…ç¬¦é€‰æ‹©å™¨ï¼Œè¡¨ç¤ºé€‰æ‹©æ‰€æœ‰å…ƒç´  */</span></span><br><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* é€šé…ç¬¦æœ‰æ•ˆç‡é—®é¢˜ï¼Œåº”è¯¥ä½¿ç”¨å¹¶é›†é€‰æ‹©å™¨ */</span></span><br><span class="line"><span class="selector-tag">body</span>,</span><br><span class="line"><span class="selector-tag">ul</span>,</span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="comment">/* å»æ‰ä¸‹åˆ’çº¿ */</span></span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  <span class="comment">/* é¢œè‰²ä¸ºé»‘è‰² */</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">  <span class="comment">/* å»æ‰åœ†ç‚¹ */</span></span><br><span class="line">  <span class="attribute">list-style</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç›’å­çš„æ°´å¹³å±…ä¸­">ç›’å­çš„æ°´å¹³å±…ä¸­</h3><blockquote><p>TIP</p><p>å°†ç›’å­çš„å·¦å³ä¸¤è¾¹çš„ margin éƒ½è®¾ç½®ä¸º auto ï¼Œç›’å­å°†æ°´å¹³å±…ä¸­ã€‚å…±æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* æ–¹å¼ä¸€ï¼Œ margin: ä¸Šä¸‹0 ï¼Œå·¦å³è‡ªåŠ¨ */</span></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line"><span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">æ–¹å¼äºŒï¼Œmargin: ä¸Š10px æ°´å¹³å±…ä¸­ ä¸‹0px </span></span><br><span class="line"><span class="comment">ç¬¬äºŒç§æ–¹æ³•çš„åº”ç”¨åœºæ™¯åœ¨äºï¼Œéœ€è¦å½“å‰ç›’å­è·ç¦»é¡¶éƒ¨ 10px, æ°´å¹³å±…ä¸­å¯¹é½ï¼Œè·ç¦»åº•éƒ¨0px ç±»ä¼¼è¿™æ ·çš„éœ€æ±‚æ—¶ä½¿ç”¨</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line"><span class="attribute">margin</span>: <span class="number">10px</span> auto <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blockquote><p>ç›’å­çš„å‚ç›´å±…ä¸­ï¼Œéœ€è¦ä½¿ç”¨ç»å¯¹å®šä½æŠ€æœ¯å®ç°</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">section</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: salmon;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* ç›’å­æ°´å¹³å±…ä¸­ */</span></span></span><br><span class="line"><span class="language-css">    <span class="comment">/* margin: 0 auto; */</span></span></span><br><span class="line"><span class="language-css">    <span class="comment">/* margin: ä¸Š150px æ°´å¹³å±…ä¸­å¯¹é½ ä¸‹0px */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin</span>: <span class="number">150px</span> auto <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* æ–‡æœ¬å†…å®¹æ°´å¹³å±…ä¸­ */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* æ–‡æœ¬å†…å®¹å‚ç›´å±…ä¸­ */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">line-height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">section</span>&gt;</span>æˆ‘æ˜¯æ–‡æ¡£åŒºåŸŸæ ‡ç­¾<span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="https://www.arryblog.com/assets/img/image-20220714235749577.904c23de.png" alt=""></p><blockquote><p>TIPï¼š</p><ul><li><code>margin: auto 20px;</code> è¿™æ ·å†™ï¼Œå¹¶ä¸ä¼šå‚ç›´å±…ä¸­</li><li>æ–‡å­—æ°´å¹³ã€å›¾ç‰‡æ°´å¹³å±…ä¸­ï¼š<code>text-align: center;</code></li><li>div å—çº§å…ƒç´ æ°´å¹³å±…ä¸­ï¼Œæ˜¯ç»™å…ƒç´ è‡ªèº«åŠ ä¸Š<code>margin: 0 auto;</code></li></ul></blockquote><h3 id="ç›’å­æ¨¡å‹å ä½è®¡ç®—">ç›’å­æ¨¡å‹å ä½è®¡ç®—</h3><p><strong>â‘  ç›’æ¨¡å‹çš„å†…å®¹åŒºå¤§å°</strong></p><blockquote><p><strong>åœ¨æ ‡å‡†ç›’å­æ¨¡å‹ä¸­</strong></p><p>content å†…å®¹åŒºï¼Œä¹Ÿå°±æ˜¯ç›’å­é‡Œé¢èƒ½ç•™ç»™å­å…ƒç´ çš„å®½åº¦å’Œé«˜åº¦å¤§å°,ä¹Ÿå°±æ„å‘³ç€ç›’å­é‡Œé¢çš„å†…å®¹çš„æœ€å¤§é¢ç§¯å°±æ˜¯ width å’Œ height å½¢æˆçš„çŸ©å½¢é¢ç§¯ã€‚</p><ul><li>å¦‚æœåªæœ‰ä¸€ä¸ªå­å…ƒç´ ï¼Œå­å…ƒç´ çš„å®½åº¦è¶…è¿‡çˆ¶å…ƒç´ ï¼Œå°±ä¼šæº¢å‡º</li><li>å¦‚æœæœ‰å¤šä¸ªå­å…ƒç´ ï¼Œå­å…ƒç´ ï¼ˆè¡Œå†…å…ƒç´ ï¼Œè¡Œå†…å—å…ƒç´ ï¼‰çš„å®½åº¦åŠ èµ·æ¥è¶…è¿‡äº†çˆ¶å…ƒç´ ï¼Œé‚£ä¹ˆè¶…è¿‡çš„é‚£äº›å­å…ƒå°±ä¼šæ¢è¡Œæ˜¾ç¤º</li></ul></blockquote><p><strong>â‘¡ ç›’æ¨¡å‹å¯è§†å®½é«˜</strong></p><blockquote><p><strong>TIP</strong></p><ul><li>å¯è§†åŒºå®½ = å®½åº¦ + å·¦å³å†…è¾¹è· + å·¦å³è¾¹æ¡†å®½</li><li>å¯è§†åŒºé«˜ = é«˜åº¦ + ä¸Šä¸‹å†…è¾¹è· + ä¸Šä¸‹è¾¹æ¡†å®½</li></ul></blockquote><p><strong>â‘¢ ç›’æ¨¡å‹å®é™…å ä½å®½åº¦</strong></p><blockquote><p><strong>TIP</strong></p><ul><li>å®é™…å ä½å®½ = å®½åº¦ + å·¦å³å†…è¾¹è· + å·¦å³è¾¹æ¡†å®½ + å·¦å³å¤–è¾¹è·</li><li>å®é™…å ä½é«˜ = é«˜åº¦ + ä¸Šä¸‹å†…è¾¹è· + ä¸Šä¸‹è¾¹æ¡†å®½ + ä¸Šä¸‹å¤–è¾¹è·</li></ul></blockquote><blockquote><p><strong>TIP</strong></p><ul><li>ç›’æ¨¡å‹çš„å†…å®¹åŒºå¤§å°ï¼šå†³å®šäº†çˆ¶å…ƒä¸­çš„å­å…ƒç´ èƒ½å æ®çš„æœ€å¤§çš„å®½å’Œé«˜åº¦</li><li>å¯è§†åŒºå ä½ï¼šæˆ‘ä»¬çœ‹åˆ°çš„è¿™ä¸ªå…ƒç´ åœ¨é¡µé¢å±‚ç°çš„æ•ˆæœçš„åŒºåŸŸ</li><li>å®é™…å ä½å®½åº¦ï¼šå†³å®šäº†è¿™ä¸ªå…ƒç´ åœ¨çˆ¶å…ƒç´ ä¸­çš„å æ®é¢ç§¯ï¼ˆå®½å’Œé«˜ï¼‰</li></ul></blockquote><h3 id="box-sizingæ€ªå¼‚ç›’æ¨¡å‹">box-sizingæ€ªå¼‚ç›’æ¨¡å‹</h3><blockquote><p><strong>TIP</strong></p><p>åœ¨ CSS3 ä¸­æ–°å¢äº†æ€ªå¼‚ç›’å­æ¨¡å‹ï¼ˆIE ç›’å­æ¨¡å‹ï¼‰</p></blockquote><p><strong>â‘  box-sizingæ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><blockquote><p><strong>TIP</strong></p><ul><li>å°†ç›’å­æ·»åŠ  <code>box-sizing: border-box;</code>å±æ€§ï¼Œ ç›’å­çš„ widthã€height æ•°å­—å°±è¡¨ç¤ºç›’å­å®é™…å æœ‰çš„å®½åº¦ ï¼ˆä¸å« marginï¼‰</li><li>å³ paddingã€border å˜ä¸º <strong>å†…ç¼©</strong> çš„ï¼Œä¸å† <strong>å¤–æ‰©</strong></li><li>box-sizing å±æ€§ <strong>å¤§é‡åº”ç”¨äºç§»åŠ¨ç½‘é¡µåˆ¶ä½œä¸­</strong> ï¼Œå› ä¸ºå®ƒç»“åˆç™¾åˆ†æ¯”å¸ƒå±€ã€å¼¹æ€§å¸ƒå±€ç­‰<strong>éå¸¸å¥½ç”¨</strong>ï¼Œåœ¨ PC é¡µé¢å¼€å‘ä¸­ä½¿ç”¨è¾ƒå°‘</li><li>box-sizing å±æ€§å…¼å®¹åˆ° IE9</li></ul></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.box</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span>: <span class="number">10px</span> solid skyblue;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin</span>: <span class="number">100px</span> auto;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* </span></span></span><br><span class="line"><span class="comment"><span class="language-css">        æ·»åŠ  box-sizing ä¹‹å‰ï¼Œboxæ˜¯å¤–æ‰©çš„ï¼Œæ€»å®½åº¦=240px</span></span></span><br><span class="line"><span class="comment"><span class="language-css">        æ·»åŠ  box-sizing ä¹‹åï¼Œå˜æˆå†…ç¼©ï¼Œæ€»å®½åº¦=200px */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>æ·»åŠ  <code>box-sizing: border-box;</code> ä¹‹å‰</strong></p><p><img src= "/img/loading.gif" data-lazy-src="https://www.arryblog.com/assets/img/image-20211128000749414.64b52537.png" alt=""></p><p><strong>æ·»åŠ  <code>box-sizing: border-box;</code> ä¹‹å</strong></p><p><img src= "/img/loading.gif" data-lazy-src="https://www.arryblog.com/assets/img/image-20211128000824590.763a264e.png" alt=""></p><p><strong>â‘¡ä¸ºä»€ä¹ˆ div å’Œ button æŒ‰é’®çš„å¤§å°æœ‰å·®åˆ« ï¼Ÿ</strong></p><p><img src= "/img/loading.gif" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQcAAABuCAYAAAAqJ9aBAAABvElEQVR4nO3dsW0CQRBA0TuLhALogRIpgRLpgQII14kj8x3iXeneCzeaAH2N9pB2H2OMDeCXr9kDAGsSByCJA5DEAUjiACRxAJI4AOmUp4/9n8dgSVd/gTkymwOQxAFI4gAkcQBSX0iG++v5yTmY7Ha+zB6BxdgcgCQOQBIHIIkDkMQBSOIAJHEAkjgASRyAJA5AEgcgiQOQxAFI4gAkcQCSOABJHIAkDkASByCJA5DEAUjiACRxAJI4AEkcgCQOQBIHIIkDkMQBSOIAJHEAkjgASRyAJA5AEgcgiQOQxAFI4gAkcQCSOABJHIAkDkASByCJA5DEAUjiACRxAJI4AEkcgLSPMcbb6WOfMArLub7/NDgOmwOQxAFI4gAkcQBSX0gCh2dzANIpT33KXItPikxgcwCSOABJHIAkDkDqC8lwfz0/OQc/bufL7BFg2zabA/AHcQCSOABJHIAkDkASByCJA5DEAUjiACRxAJI4AEkcgCQOQBIHIIkDkMQBSOIAJHEAkjgAqZ/D86jNWjxqwwQ2ByCJA5DEAUjiAKS+kAQOz+YAJHEAkjgASRyAJA5AEgcgiQOQxAFI4gCkb+SkIsyigD80AAAAAElFTkSuQmCC" alt=""></p><blockquote><p>åŸå› ï¼š</p><ul><li>button æŒ‰é’®é»˜è®¤æ˜¯ æ€ªå¼‚ç›’æ¨¡å‹</li><li>å³ï¼šè‡ªå¸¦<code>box-sizing: box-border;</code>å±æ€§</li><li>button æ˜¯ <strong><code>å†…ç¼©</code></strong> çš„ ï¼Œdiv æ˜¯ <strong><code>å¤–æ‰©</code></strong> çš„</li></ul></blockquote><p><strong>â‘¢æ ‡å‡†ç›’æ¨¡å‹ä¸æ€ªå¼‚ç›’æ¨¡å‹åŒºåˆ«</strong></p><blockquote><p><strong>åŒºåˆ«</strong></p><p><strong>æ ‡å‡†ç›’æ¨¡å‹</strong>å’Œ <strong>IE ç›’æ¨¡å‹</strong>çš„åŒºåˆ«åœ¨äºè®¾ç½® <strong><code>width</code></strong> å’Œ <strong><code>height</code></strong> å±æ€§æ—¶ï¼Œæ‰€å¯¹åº”çš„èŒƒå›´ä¸åŒï¼š</p><ul><li>æ ‡å‡†ç›’æ¨¡å‹çš„ width å’Œ height å±æ€§çš„èŒƒå›´åªåŒ…å«äº† <strong><code>content</code></strong> å†…å®¹åŒº</li><li>IE ç›’æ¨¡å‹ï¼ˆæ€ªå¼‚ç›’æ¨¡å‹ï¼‰çš„ width å’Œ height å±æ€§çš„èŒƒå›´åŒ…å«äº† <strong><code>borderã€padding å’Œ content</code></strong></li><li>å°ºå¯¸è®¡ç®—å…¬å¼ï¼š</li><li>width = border + padding + å†…å®¹çš„å®½åº¦</li><li>height = border + padding + å†…å®¹çš„é«˜åº¦</li><li>button æ ‡ç­¾ï¼Œæ˜¯å…¸å‹çš„æ€ªå¼‚ç›’æ¨¡å‹</li></ul></blockquote><blockquote><p><strong>TIP</strong></p><p>æˆ‘ä»¬é€šè¿‡ box-sizing å±æ€§æ¥åˆ‡æ¢æ ‡å‡†ç›’å­æ¨¡å‹ä¸æ€ªå¼‚ç›’å­æ¨¡å‹</p><ul><li><code>box-sizingï¼šcontent-box</code> æ˜¯é»˜è®¤å€¼ï¼Œç›’å­ä»¥æ ‡å‡†ç›’å­æ¨¡å‹ç‰¹æ€§æ¥æ¸²æŸ“</li><li><code>box-sizing: border-box</code> ç›’å­ä»¥æ€ªå¼‚ç›’å­æ¨¡å‹ç‰¹æ€§æ¥æ¸²æŸ“</li></ul></blockquote><table><thead><tr><th style="text-align:left">æ ‡å‡†ç›’å­æ¨¡å‹</th><th style="text-align:left">æ€ªå¼‚ç›’å­æ¨¡å‹ï¼ˆbox-sizing:borde-box;)</th></tr></thead><tbody><tr><td style="text-align:left"><img src= "/img/loading.gif" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVEAAAD/CAYAAABIF+VoAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAFiUAABYlAUlSJPAAACDHSURBVHhe7Z1dzFxVuceJAqJFPlIBhSqmKg1FQCE1BbGIUqE05bNVRIItpZEPoaKlWAsNRbAHEKwVFMQaDdrkTQQ5B2JQQJoQNSqJJxpjYnK88IJEL0y88OJcnPT4X82zWF3v8+xZ8+6ZWc/e83+SX97Of69Zs2bvtX6zZtq+c9A+FovFYs25KFEWi8VqUZQoi8VitShKlMVisVoUJcpisVgtihJlsVisFqVK9KCDDor87yu79/3zl4/G24cdekjI/v7SN2J25JvfFLK//vRrMTtu/hEh+/Mz98fsxLfND9kfnrw3Zied+NaQ/XbPXTE77aS3h+zl722N2QfeuzBkL3x7c8w+dMaikD378OdjtvysU0L2owdvjtmqc98Xsh/uuD5mq5cvCdnu7etjdvXKs0P2yJeuidl1l58bsoc2fTJmN115fsi+csuamH3hmgtDtu36S2O29bpVIbt93cqY3X3T5SHb+KmPxez+Wz8Rss+sOS9mu26/OmRrLz4nZo9tWxeyKy9cGrPv37MhZJd+5MyYzdx/Y8hWnHNazJ7euTFk5y05OWbPfWtTyM46/d0x27t7S8jOOPnEmP3qiW0hW/yuE2L2u5m7Q7ZwwbEx+9PTO0J2wrFHx+wvP/lqyOYfdXjMXn3h6yGb98Y3xOwfL38zZAe//nUx+9evHw/IbRxDG7SV7PB/94EMfUqGx0KGx5YMY0KGMUqGsSPDc5EMzxEZnrNkOBfIcG4kwzlDhnMoGc4tMpxryXANkOGaSIZrhQzXTjJcU2S4xpLh2iPDXJAMcwQZ5oxkmEvIMLckw5xDhjkoGeYmMsxVyTCHkWFOS4a5jgxzXzKsCWRYI5Jh7SDDWpIMawwZ1pxkWIvIli89JWZYs8iwhiXD2kaGtS4ZHIAMTpAMrkAGd0gGpyCDYySDe5DBRZLBUcjgLMngMmRwm2RwHjK5DawyJYoOCCGE7JepVZQoIYQMYGiJap0QQsg0YxUlSgghBVjFt/OEEDIAfiZKCCEtoEQJIaQFQ0tU64QQQqYZqyhRQggpwCq+nSeEkAHwM1FCCGnBVEr01Rd37Vu4cOG+nVv2/39z4pPVK5aF65SCLG/3+yd3HNCG15VMkqElqnXSNSjRboBr9OLu/b9kwkIEip+S8dqSSWNVbyVK/CMvdKkcNbAzzYUJ8eK+6CPNCRkXVvX27TzxT4lEm9ogH7SLJWQUjPwzUewKsDuQt1mCTPTb1l8WM+3zLdlFpOSLRHYfex64ZVY/srDy+8tPaYfbuL/clnHLMYFvC+sg16xpN9m045Q5kueEjJqxSBQTG7LMM0zsdHegSSoVIhBRpgsFbbRFIgsvlaNkYJBEpZ1kWn9kMqTXTcivt8yNNBMw//L2hIyDoSWqdZIiMkqlJ7vDVKwAiyCXpgbum8pXJJq2Aeg/fwwgi61EovmuBnnJGMl40eYQJUq8YNWcJapJJ5cWsBaBtgtJ74v+tQWCdtrnYNLfIIlq40YbStQH+XW05g+gRMkksWrOb+fnKlHZbYB0R5jfV5Oo3HccEkXbPCd1SK+bfCaatwG4lun1JWRcjOUz0blKtPS+lOj0kl437bqm7bS5QMiocSfR/DNNWSjpfTWJNuXI8sWW92mNOx8jqYcmTVyzfF417VAJGTVDS1TrJMWSUS4tkAtKbueyy+9ryVIWT9pWMq3ftB0l6gtcj/R6yTuN/LrL9c2vLXehZJJYNXGJAtwfmYAsv68lUZBKE8hixJ+bPme1xk2J1kHOe4olxvyaU6Bk0lg1p7fzHpFFlkqUEEJGwcg/E/UIdpnavx8lhJC29EqieAuYv5WTt4XpZ2aEEDIqhpao1okX5LPPHK0tIYSMCqs6J1FCCKmBVZ17O08IIZOmV5+JEkLIpKFECSGkBUNLVOuEEEKmGasoUUIIKcAq12/nMQ5CyHSjuWHSYBxWuZfo//3P44SQKYUSbQklSsh001mJap3UgBIlZLrxIlFgFSVKCHFLZyXqZeCUKCHTjScXWUWJEkLcQom2hBIlZLrprES1TmpAiRIy3XiRKLCKEiWEuKWzEvUycEqUkOnGk4us6rRE//bKzvBb7ffObFGPT4qZRz4bxqEdI4TMHUq0JZTodLFr+1rzWv7x+XvDORbQVmtH+kVnJap1UgNKdHoQOWrXUgSKn5LhNkXaf7xIFFhFiY4ASnTurFm1LJw7QbuWaJMLE+3QHnMgzUm/6KxEvQycEu0/cv2sayl5ugsVPFx7Ml48uciq3khURCbgtnaffOeT73DSPjffeNmsNvlnc2hjSXTQmGSHJe1wOz0+TVgSxW3kOJ7mQNuhkn5BibakVKJYTKmgRHRpJm3zRSf3z9shsxZ0uitKRZm2xeOkmfSbjgmPQRHsR85Pfs7l/KaZgBcwnrt+01mJap3UoFSiWEz5sXzxoY3WLl+8cltbnMhTCQroN30skXj+FjQfk0g0bTOtUKJEw4tEgVW9kGi+8ICIDG1w22oH0t2g1WfeX0q+0HFbk2PeB3ehr2Gdd0p0uumsRL0MfFQSbWoH0sVotcVt6S/NQb7Q0RduW8gOlRJ9jUHnPc0EnD+ce+0Y6QeeXGRVbyWaS89qB0p2onl/KaU70RxK9DWs8y4vhvLCk6K1J/2CEm1JqUQ1EWF3CazbgvQhi9RazFYOIEMck9tNwk2hRF9j0PnNd5xyjtOM9I/OSlTrpAalEs0Xn+wM092L7GhyaSFL5dq0mHHfvF/JQNoWfeYZ7pc+PiX6Gk3nXYSZnnerLekXXiQKrOqFRLGYRFoCjmn3SduAfIfTtJhBKk1pl7+dF/Ix5W0o0dcYdN6Rp+fRakf6RWcl6mXggyRKCOk3nlxkFSVKCHELJdoSSpSQ6aazEtU6qQElSsh040WiwCpKlBDils5K1MvAKVFCphtPLrKKEiWEuIUSbQklSsh001mJap3UgBIlZLrxIlFgFSVaAMYhvPzfDwQOOfTgmP38NztCNm/eYTF77hdfDtlRR8+L2TMv3RWyY449MmZP/eyOkB2/YH7MZp79YsjeufC4mD3x1KaQvWfR8TH77sytIVt86jti9tgTN4fs9DMXxuzh3TeEbMnSk2L20KMbQnb2spNjdt+ua0N27kdPjdk9D14TsuUr3h+zbTuuCtlFlyyJ2ZbtHw/ZJauXxmzTHVeEbPVV58Rs4+ZLQnbV2g/H7IbPrQzZpzecH7PrbrogZPgpGY4jQ3vJ0A8y9CsZHg8ZHl8yjAsZxikZxo8Mz0cyPE9keN6S4Xwgw/mRDOcNGc6jZDi/yHC+JcN1QIbrIhmuFzJcP8lwXZHhOkuG648M80EyzBNkmDeSYT4hw/ySDPMOGeahZJifyDBfJcM8RgYkA9o6qAHGormhBlbx7XwBGIdMNEL6DiU6G4zDKkq0AIxDm2yE9BEv6w54cpFVlGgB2kQjpM9o66AGnZWo1kkNKFFC6qCtgxp4kSiwihIt4C3HHKFONEL6COa7tg5q0FmJehm4F4liHNpkI6SPeFl3wJOLrKJEC8A4tMlGSB/xsu6AJxdZRYkW8OPn71QnGyF9BPNdWwc16KxEtU5q4EWi2kQjpM9o66AGXiQKrKJEC1i0eIE60QjpI5jv2jqoQWcl6mXgXiSKcWiTrQZrN1wU0I7l4Avd7n1wvXqMEAsv6w54cpFVlGgBGIc22WrQRqIXXHR2IG1TG4wv/RbPTVuvVNvt+c8vFrUj7fGy7oAnF1lFiRbwnT0b1clWgz5JFCJMx/Ps3rtVQYpA8VMyinR8YL5r66AGnZWo1kkNvEhUm2i1aCNRb3zze7eoGcYNoUoG0ebC1NqR0aGtgxp4kSiwihIt4IPLFqsTrQZ9kqiG7DpFjrI7TXehAnJNxKQdmO/aOqhBZyXqZeBeJIpxaJMtRXZL+Wd3mvBkF5WiSSL/vBC3LYkiS9vKOFKJ5vdNd3Pp/a23/MilDdAeoy35DrNpx6ntUEl7vKw74MlFVlGiBWAc2mRLwYIGueAggDzLJSWyTEUBOSBL24notP60xwUlEgWpxLXHsDIwSoniMdLzI+cmbSOgLSU6erysO+DJRVZRogXct2udOtlSsPC1xS67NW2nmYI2kBr+3HQf5KnMLMlIHyUSlcfNc5H6MI/RBnmc9Hlbjw0o0fGA+a6tgxp0VqJaJzXwIlFtouVAotaChgRyUYmAUkRG+JnvVoVchE0iSfsE+X1zWQoyNsmHeYy5gsdAX6lAASVaB20d1MCLRIFVlGgBF1+x//t5miiVKMSE2yCVF26LjNBPqUQHPW4biYrQhnmMYUnPh3Zcxqgdw7hGIXByIJjv2jqoQWcl6mXgXiSKcWiTLcUSjUhCJGoJMpXRtEhUzk06ppx8LCnI5byS0eFl3QFPLrKKEi0A49AmWwpEo4kPgsFil9uQUS4NEYXIyJKbJh1LuNLHKCQ6zGMMQz4eCzx2/hjy2GlGRoOXdQc8ucgqSrSA2+7c/9W/TWChY1GnO7ZcjgB/TgUFcDtvJ/3J7TRLxaOJVbK8z1xapRId5jGGAffFGLRjKTLO/JyV3JcMD+a7tg5q0FmJap3UwItEtYmWA8FBoCJJQVvoaJe2QYafuYxEmgLElYsQpEIDuB9y/HkUEgVNjzEXmeX95aQvRkDGKlCg40VbBzXwIlFgFSVawLXXL1cnWopIVDvWV0SEFFq/wHzX1kENOitRLwP3IlGMQ5tsKdMoUdkdasdId/Gy7oAnF1lFiRaAcWiTLaXPEsXb+vy5yVv+uX4eSvziZd0BTy6yihItgG/n93/2mZN+Zkr6A9/Oz2ZoiWqd1MCLRLWJRkif0dZBDbxIFFhFiRZQ8k+cCOkL/CdOOlbx7XwBGIc22QjpI17WHfDkIqso0QIwDm2yEdJHvKw74MlFVlGiBZT8AhJC+gJ/Aclshpao1kkNvEhUm2iE9BltHdTAi0SBVZRoASW/lHlS4JyQ/qJd80nDX8qsYxXfzhfgZXIDjOWrP9lLeoiXeeZl3QGMRXPDpME4rKJEC8A4tMlWA4xFW4Ck+3iZZ17WHcBYNDdMGozDKkq0AE9fmYxzoi1A0n1wbbVrPmn4lcmzwTisUo9ondTAi0S1iVYLSrS/eJEo0NZBDbxIFFhFiRbwnT0b1YlWA0q0v3iRKOa7tg5q0FmJehm4F4l6mdwAY9EWIOk+XuaZl3UHMBbNDZMG47CKEi0A49AmWw0wFm0Bku7jZZ55WXcAY9HcMGkwDqso0QIWLV6gTrYa4JxoC5B0H1xb7ZpPGsx3bR3UwJOLrFKPaJ3UwItEtYlWC0q0v3iRKNDWQQ28SBRYRYkW8OPn71QnWg0o0f7iRaKY79o6qEFnJepl4F4k6mVyA4xFW4Ck+3iZZ17WHcBYNDdMGozDqpFIdPWKZbO+OgJZ3u73T+44oM3OLetmtUlpczH/9srOfWtWLVOPgc03XnbAWNBeawcwDm2yNYGvJk77t74Rs+QrllMwFm0BjpO7Z/5r3wfPv0A9BlZ+6tMHPAe019qlbZr6mytX3vyFfbc8+PCsHFn62ILWtvS5jIOmeSbfaSXIV1ZrlLazGGbdYY1Za2eYNWaBsWhuAOPyjgbGYdVIJIqBvbh7q3pMkCeCn5INekLDXMyUmUc+G/q2JIqLC+S2tLcu8luOOUKdbBb59y3Jt2LmghSBym1ZKE0ixTnRFuC4WH/nl8OYLOlBOkBuS/tcPshwTG7jPqMUKfoHmhjxuCWPVfpcxgWurXbNZf7gK6olwxzTBIl26ZcH4sV8WJFivmvrIOWPz98bz7m2boZdYxZNLkJ/4/COBsZhlXpE68Ti1Rd3zRqkBl4h8oHjBOC+6CPNhWElundmS+hP0CQqbfKLiba7tq89IBO0idaEJkFINZ3M1ne25+1yJiXRfPemSUja5JJBW+wK5Tb+nN8f98F9NekNA/pFP4LWHx4/laNG6XMZJ00SzTNt/mhzx5png9DWAcC6QX8p+VqayxqzsCQ6Tu9YWDURiTa1QW69mgwrUbzaiThxsTSJIk9fIYX0vjnaJBsW7A7SCY5JjeeetgGyG013HSmTkmi6e9MkKLkmp3znhz+nu1AB920rKJwrCLBJyiUSLX0u48SSqAWebypHzC/tK6yxGx32m2i1dQBkBwpBWrKcyxqzaCPRuXrHwqrWb+cxQAyoyepN5tdeKYRhJZpiSRSZ9mpoTQgw7OTWyHcJ1o5z0M4BY9EW4DixJIpMk2C6qxskt7RfaZsL18pTmh6nRNYlzyU/NmqGmWf5PGmaN4Pe3eSUrrthd5xNa8wCY9HcME7vaGAcVo1Moin54PY8sH/XlWbCbesvm6hEMQ68IuZ5+gqbH8M4tMk2DOg73Q1gdwDSNgLadkGiGKcmti2P/yAcg3jkz/iZt9N2ebkwSwQKBkkUx1JyKSIb9FzyY6NmmHkmn6fLOxZ5B4OfWttJShTZsGvMAmPR3DBO72hgHFa1lmiObKExSMmmXaLyN/V5Ronqb5VFiHhc6zFymiSaI/2mY7Iex6NERZjpW/dpk2jOKL2jgXFYpR7ROhkGeZXAT9zuukS1iVYK+gR5Tok2f94oUiwRKBhGogC70/Qz0JLnkh8bNbi22jVPkR1oKlAwSomCfA1oeJIoGJV3LKwai0QBBo8ngT/LZxN5G4DPJqRdzjgkiky7wDIh8hxok2wQkCD6s0SJt/baMflsS1sMwJNEkWnikc8R8WeRmyZR9Kv9ZY7cZ1w7UYA+0V5ulzyXcTNIohAhxqLNjaZ5Y821JrR1kGNJdC5rzGIYiYJwDlp6x8Kqkb+dF9Ink79C5O2svyUbh0Tzf78m4KJr7cGw/05UBJrvFlJkR5HnsqOQz7pyPEk0380JkFHaHs9HExTui77TTGQo7fPbFm0lWvpcxkmTREWg2jEBx7U5B4Gmn8cPouTfiQJLonNZYxZtJDpX72hgHFaNRaLa4DXzN71SAIxDO7ElWBK1Xg2tV0/QNLk10H+TQIG1cxi0a8BYtAU4TiyJWru0fFen7ThFeukO1RJmiUiHlWguzdLnMk6seWa94OZoc2fQOxuN0nVnSXQua8wCY9HcoDEq72hgHFa1lig+V0gHLR/w5p83yMDTtrjd9GpQejE1LIkC5Okr5aBXSIxDm2wag3aSKZj0aCu3S+6LsWgLcJxYEgXIUxlpOzdNgrhPvgttgyVR5LnA8bhoi2NpXvJcxok1z0p3kiLM9AV82F0oKF13lkTBsGvMAmPR3DBO72hgHFapR7ROLGB5DCrFGqA8oUHthNKLqdEkUYBjMo5BF3eY3+Ikb+Ut8r8wEpEKg+SLc6ItwHHSJFGAYzJ+q51IThilQIElUZA+Lmj7XMYFrq12zeWtvEb+F0YiUmFYgYLS3+LUJFEwzBqzsCQ6Tu9YWNVaouOkjURHiTbRalFDomQyWBKtgbYOamBJtAZWtX47P068SJS/2Z5MAi8S5W+2nw3GYRUlWoCXyQ0wFm0Bku7jZZ55WXcAY9HcMGkwDqso0QIwDm2y1QBj0RYg6T5e5pmXdQcwFs0NkwbjsEo9onVSAy8Xk987TyYBrq12zScNv3dexypKtABtotWCEu0vXiQKtHVQg85K1MvAvUj0g8sWqxOtBpRof/EiUcx3bR3UwJOLrKJEC/AyuQHGoi1A0n28zDMv6w5gLJobJg3GYRUlWgDGoU22GmAs2gIk3cfLPPOy7gDGorlh0mAcVqlHtE5q4OVi3rdrnTrZaoBzoi1A0n1wbbVrPmkw37V1UAMvEgVWUaIFaBOtFjgnpL9o17wG2jqoAc6J5oYaWMW38wVcfMVSdaIR0kcw37V1UANPLrKKEi0A49AmGyF9xMu6A55cZBUlWgDGoU02QvqIl3UHPLnIKvWI1kkNvFzM2+68Qp1shPQRzHdtHdTAi0SBVZRoAdpEI6TPaOugBp2VqJeBe5HotdcvVycaIX0E811bBzXw5CKrKNECMA5tshHSR7ysO+DJRVZRogVgHNpkI6SPeFl3wJOLrFKPaJ3UwMvF5Nt5Mk3w7byOVZRoAdpEI6TPaOugBp2VqJeBe5Eo/4nT+JDvVBesb6eUr5Me1I60h//EaTYYh1WUaAEYhzbZSDsgwvQrf+XrfnNBikDxUzKKdHx4WXfAk4usokQLwDi0yUbakX8Hv2QQZPr9+xBtLkytHRkNXtYd8OQiq9QjWic18HIx+QtIJofsOkWOsjtNd6ECck3EpB38BSQ6VlGiBWgTjYyHfIfZtOPUdqhkNGjroAadlaiXgXuR6H84+qXMfWfthosO+JxU/uIpbSOgLSU6ejDftXVQA08usooSLQDj0CYbGS0izPStOyU6ebysO+DJRVZRogVgHNpkI6MDQswFCijRyeNl3QFPLrJKPaJ1UgMvF9PTVyb3DfmLI0uU8pmodgxv+yFZ7RiZO/zKZB2rKNECtIlG2iMCxY5SOw7kb+v5t/OTRVsHNeisRL0M3ItEv7NnozrRSDsgzyaBCtqOs2mHStqB+a6tgxp4cpFVlGgBGIc22Ug7SneSIsx0N8pd6Pjwsu6AJxdZRYkWgHFok43MnfSzUA3rfygJFOj48LLugCcXWaUe0TqpgZeLuWjxAnWyEdJHMN+1dVADLxIFVlGiBWgTjZA+o62DGnRWol4G7kWiP37+TnWiEdJHMN+1dVADTy6yihItAOPQJhshfcTLugOeXGQVJVoAxqFNNkL6iJd1Bzy5yCr1iNZJDbxczLccc4Q62QjpI5jv2jqogReJAqso0QK0iUZIn9HWQQ06K1EvA6dECamDtg5q4MlFVlGiBWAc2kQjpI94WXfAk4usokQLwDi0yUZIH/Gy7oAnF1mlHtE6qYEniQoy0Q459OCY/fw3O0I2b95hMXvuF18O2VFHz4vZMy/dFbJjjj0yZk/97I6QHb9gfsxmnt3/f8TfufC4mD3x1KaQvWfR8TH77sytIVt86jti9tgTN4fs9DMXxuzh3TeEbMnSk2L20KMbQnb2spNjdt+ua0N27kdPjdk9D14TsuUr3h+zbTuuCtlFlyyJ2ZbtHw/ZJauXxmzTHfu/anr1VefEbOPmS0J21doPx+yGz60M2ac3nB+z6266IGT4KRmOI0N7ydAPMvQrGR4PGR5fMowLGcYpGcaPDM9HMjxPZHjekuF8IMP5kQznDRnOo2Q4v8hwviXDdUCG6yIZrhcyXD/JcF2R4TpLhuuPDPNBMswTZJg3kmE+IcP8kgzzDhnmoWSYn8gwXyXDPEYGJAPaOqgBxqK5oQZWUaKEELd0VqJeBk6JEjLdeHKRVZQoIcQtlGhLKFFCppvOSlTrpAaUKCHTjReJAqsoUUKIWzorUS8Dp0QJmW48ucgqSpQQ4hZKtCWUKCHTTWclqnVSA0qUkOnGi0SBVZQoIcQtnZWol4FTotPFru1r9+2d2aIe++Pz9x7wlcloq7Uj/cKTi6yiRIkLRI6aREWg+CkZRTodUKItoUT7z5pVy6JALYmiTS5MtEP7v72y84Cc9IvOSlTrpAaUaP8RcUKGmkQlT3ehgiVd0h+8SBRYRYkSF1gSbdpxajtU0i86K1EvA6dEpwdLojOPfDbkaSZsvvEySrTneHKRVZQocQElSjQo0ZZQotMDJUo0OitRrZMaUKLTw6DPRNNMwGeikKx2jPQDLxIFVlGixAWWRLV/Iypo7Um/6KxEvQycEp0eLIkCbcfZtEMl/cGTi6yiRIkLmiQqwsz/xxJ3of2HEm0JJTo9NEkUiEgFCnQ66KxEtU5qQIkSMt14kSiwihIlhLilsxL1MnBKlJDpxpOLrKJECSFuoURbQokSMt10VqJaJzWgRAmZbrxIFFhFiRJC3NJZiXoZOCVKyHTjyUVWUaKEELdQoi2hRAmZbjorUa2TGmDghJDpRnNDDaxyLVFCCPGCVa7fzhNCiAfgRKsoUUIIGQAlSgghLRhaolonhBAyzVhFiRJCSAFW8e08IYQMgJ+JEkJICyhRQghpwdAS1TohhJBpxipKlFRl9YplB3yLJ0CWt/v9kzsOaLNzy7pZbQgZJ1bx7TypCoT44u6t6jFBBIqfklGkZJLwM1Hikldf3DVLjhrYmebChHhxX/SR5oSMA0qUuKREok1tkA/axRIyCoaWqNYJIaNG3qY37SabdpzaDpWQcWEVJUqqIRJNyaW454FbQp5mwm3rL6NEycSwim/niRvkrTvkKBklSjzAz0RJZ5DdqXwGSokSD1CipFNAmpAn/iyfieZtAD4TlXaEjJOhJap1QsikSCWa70zzdvzbeTIprKJEiSs0aWo7zqYdKiHjwCq+nSfVwOeZqSzlL5byzzlFmGlb7kLJJOFnosQl8pdGKZYYRaSD2hEyDihRQghpwdAS1TohhJBpxipKlBBCCrCKb+cJIWQA/EyUEEJaQIkSQkgLhpao1gkhhEwzVlGihBBSgFV8O08IIQPgZ6KEENKCOUlUQAf//OWj8fZhhx4Ssr+/9I2YHfnmN4Xsrz/9WsyOm39EyP78zP0xO/Ft80P2hyfvjdlJJ741ZL/dc1fMTjvp7SF7+XtbY/aB9+7/ZRMvfHtzzD50xqKQPfvw52O2/KxTQvajB2+O2apz3xeyH+64Pmarly8J2e7t62N29cqzQ/bIl66J2XWXnxuyhzZ9MmY3XXl+yL5yy5qYfeGaC0O27fpLY7b1ulUhu33dypjdfdPlIdv4qY/F7P5bPxGyz6w5L2a7br86ZGsvPidmj23b/3/Kr7xwacy+f8+GkF36kTNjNnP/jSFbcc5pMXt658aQnbfk5Jg9961NITvr9HfHbO/uLSE74+QTY/arJ7aFbPG7TojZ72buDtnCBcfG7E9P7/+/7Scce3TM/vKTr4Zs/lGHx+zVF74esnlvfEPM/vHyN0N28OtfF7N//frxgNzGMbRBW8kO/3cfyNCnZHgsZHhsyTAmZBijZBg7MjwXyfAckeE5S4ZzgQznRjKcM2Q4h5Lh3CLDuZYM1wAZrolkuFbIcO0kwzVFhmssGa49MswFyTBHkGHOSIa5hAxzSzLMOWSYg5JhbiLDXJUMcxgZ5rRkmOvIMPclw5pAhjUiGdYOMqwlybDGkGHNSYa1iGz50lNihjWLDGtYMqxtZFjrksEByOAEyeAKZHCHZHAKMjhGMrgHGVwkGRyFDM6SDC5DBrdJBuchk9vAKvsIi8VisQYWJcpisVgtihJlsVisFkWJslgsVouiRFksFqtFUaIsFos159q37/8BR3w6ey3WMIMAAAAASUVORK5CYII=" alt="16549198837318-16549216262352"></td><td style="text-align:left"><img src= "/img/loading.gif" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVUAAAEDCAYAAACF25fEAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAFiUAABYlAUlSJPAAACDZSURBVHhe7Z1tzJxFuceJAqJFXlIBhSqmKg1FQCE1BbGIUqE05bVVRIItpZEXaUVLsRYaimAPIFgrIIg1GLTJkwhyDsSggDQhalQSTzTGxOT4wQ8k+sHED344H056/E9zDdPpNbM7z967c+3c/yv55en+d3Z27vue+e3stn32oL0sFovF6qwoVRaLxeqwKFUWi8XqsChVFovF6rAoVRaLxeqwKFUWi8XqsChVFovF6rAoVRaLxeqwBkr1oIMO8vzvq7v2/vOXj/rbhx16iMv+/vK3fHbkW9/isr/+9Bs+O27uES7787P3+ezEd8x12R+eusdnJ534dpf9dvedPjvtpHe67JUntvjsQ++f77IXv7PJZx85Y4HLnnvoiz5betYpLvvRAzf7bMW5H3DZD7df77OVSxe5bNe2tT67evnZLnv4K9f47LrLz3XZgxs/7bObrjzfZV9bv8pnX7rmQpdtvf5Sn225boXLbluz3Gd33XS5yzZ85hM+u++WT7nsc6vO89nO26522eqLz/HZY1vXuOzKCxf77Pt3r3PZpR8702cz993osmXnnOazZ3ZscNl5i0722fPf3uiys05/r8/27NrssjNOPtFnv3pyq8sWvucEn/1u5i6XzZ93rM/+9Mx2l51w7NE++8tPvu6yuUcd7rPXXvymy+a8+U0++8crj7js4De+wWf/+vXjDrmN+9AGbSU7/N99IEOfkuG5kOG5JcOYkGGMkmHsyHAskuEYkeGYJcO5QIZzIxnOGTKcQ8lwbpHhXEuGa4AM10QyXCtkuHaS4ZoiwzWWDNceGeaCZJgjyDBnJMNcQoa5JRnmHDLMQckwN5FhrkqGOYwMc1oyzHVkmPuSYU0gwxqRDGsHGdaSZFhjyLDmJMNaRLZ08Sk+w5pFhjUsGdY2Mqx1yeAAZHCCZHAFMrhDMjgFGRwjGdyDDC6SDI5CBmdJBpchg9skg/OQyW2Qq6Gkig4JIYTsk2uuKFVCCClgZKlqnRJCSJ/JFaVKCCGF5Ipv/wkhpAB+pkoIIR1CqRJCSIeMLFWtU0II6TO5olQJIaSQXPHtPyGEFMDPVAkhpEMo1X/z2ks7986fP3/vjs37/r88scnKZUvcdQpBFrf7/VPb92vD60omychS1TqdNijV6QDX6KVd+35pRgoRKn5KxmtLJk2ueiFVYh954QtlqYGdayxQiBiPRR9hTsi4yFUv3v4T+wwj1Vwb5IN2uYR0wdg/U8WuAbsHeVsmyMS/de1lPtM+H5NdRki8aGR3svv+9Qf0Iwstfrz8lHa4jcfLbRm33CfwbWQd5Jrldpu5HanMkTgnpGsmIlVMdMgzzjDRw92DJq1QkEDEGS4ctNEWjSzEUJaSgUFSlXaSaf2RyRBeNyG+3jI3wkzA/IvbEzIORpaq1mmIyCmUoOweQ9ECLIpYohp4bChjkWrYBqD/+DmALL5hpBrvepAPM0YyXrQ5RKkSK+SqE6lqEoolBlKLQtulhI9F/9qCQTvtczTpb5BUtXGjDaVqg/g6puYPoFTJJMlVJ2//ZytV2Y2AcMcYP1aTqjx2HFJF2zgndQivm3ymGrcBuJbh9SVkXEzkM9XZSnXYx1Kq/SW8btp1Ddtpc4GQrjEv1fgzUVk44WM1qeZyZPHii/tMjTseI6mHJlFcs3he5XawhHTNyFLVOg1JySmWGIiFJbdj+cWPTclTFlPYVjKt37AdpWoLXI/wesk7kfi6y/WNry13qWSS5KqqVAEej0xAFj82JVUQShTI4sSfc5/TpsZNqdZBzntISpTxNadQyaTJ1chv/y0iiy6UKiGEdMHYP1O1CHah2r9fJYSQUWlaqnjLGL/1k7eR4WduhBDSFSNLVevUCvLZaYzWlhBCuiJXUy1VQgipQa6m+u0/IYRMmqY/UyWEkElDqRJCSIeMLFWtU0II6TO5olQJIaSQXE3N23+MgxDSbzQ3TBqMI1dTJdX/+5/HCSE9hVLtGEqVkH7TjFS1TmtAqRLSb6xIFeSKUiWETAXNSNXKgVCqhPQbSy7KFaVKCJkKKNWOoVQJ6TfNSFXrtAaUKiH9xopUQa4oVULIVNCMVK0cCKVKSL+x5KJcNSPVv726w/3W/z0zm9X7J8XMw59349DuI4TMHkq1YyjVfrFz2+rktfzjC/e4cyygrdaOtEUzUtU6rQGl2h9Eltq1FKHip2S4TbG2jxWpglxRqh1Dqc6eVSuWuHMnaNcSbWKBoh3aYw6EOWmLZqRq5UAo1faR65e6lpKHu1TBwrUn48WSi3LVpFRFbAJua4+Jd0bxDijsc9ONlx3QJv5sD21SUh00JtmBSTvcDu/vEymp4jZy3B/mQNvBkragVDtmWKlicYXCEvGFmbSNF6E8Pm6HLLXAw11TKM6wLZ4nzKTfcEx4DophH3J+4nMu5zfMBLyg8dy1TTNS1TqtwbBSxeKK74sXI9po7eLFLLe1xYo8lKKAfsPnEqnHb1njMYlUwzZ9hVIlGlakCnLVnFTjhQhEbGiD26l2INwtpvqM+wuJFz5ua7KM++Au9XVS551S7TfNSNXKgXQl1Vw7EC7OVFvclv7CHMQLH33hdgrZwVKqrzPovIeZgPOHc6/dR9rAkoty1QupxhJMtQPD7FTj/kKG3anGUKqvkzrv8uIoL0QhWnvSFpRqxwwrVU1M2H2C1G1B+pBFm1rcqRxAjrhPbucEHEKpvs6g8xvvSOUchxlpj2akqnVag2GlGi9G2TmGuxvZ8cQSQxbKNre48di4X8lA2BZ9xhkeFz4/pfo6ufMuAg3Pe6otaQsrUgW5ak6qWFwiMQH3aY8J24B4B5Rb3CCUqLSL3/4L8ZjiNpTq6ww678jD85hqR9qiGalaOZBBUiWEtI0lF+WKUiWETAWUasdQqoT0m2akqnVaA0qVkH5jRaogV5QqIWQqaEaqVg6EUiWk31hyUa4oVULIVECpdgylSki/aUaqWqc1oFQJ6TdWpApyRakWgnEIr/z3/Y5DDj3YZz//zXaXzZlzmM+e/8VXXXbU0XN89uzLd7rsmGOP9NnTP7vdZcfPm+uzmee+7LJ3zz/OZ08+vdFl71twvM++N3OLyxae+i6fPfbkzS47/cz5Pnto1w0uW7T4JJ89+Og6l5295GSf3bvzWped+/FTfXb3A9e4bOmyD/ps6/arXHbRJYt8tnnbJ112ycrFPtt4+xUuW3nVOT7bsOkSl121+qM+u+ELy1322XXn++y6my5wGX5KhvuRob1k6AcZ+pUMz4cMzy8ZxoUM45QM40eG45EMx4kMxy0ZzgcynB/JcN6Q4TxKhvOLDOdbMlwHZLgukuF6IcP1kwzXFRmus2S4/sgwHyTDPEGGeSMZ5hMyzC/JMO+QYR5KhvmJDPNVMsxjZEAyoK2DGmAsmhtqkCu+/S8E45CJR0jrUKoHgnHkilItBOPQJh8hLWJl3QFLLsoVpVqINvEIaRltHdSgGalqndaAUiWkDto6qIEVqYJcUaqFvO2YI9SJR0iLYL5r66AGzUjVyoFYkSrGoU0+QlrEyroDllyUK0q1EIxDm3yEtIiVdQcsuShXlGohP37hDnXyEdIimO/aOqhBM1LVOq2BFalqE4+QltHWQQ2sSBXkilItZMHCeerEI6RFMN+1dVCDZqRq5UCsSBXj0CZfDVavu8ih3ReDL8i754G16n2EpLCy7oAlF+WKUi0E49AmXw1GkeoFF53tCNvUBuMLvyV145Yr1Xa7//PLQ7Ujo2Nl3QFLLsoVpVrId3dvUCdfDVqSKsQYjue5PXepwhSh4qdkFOv4wHzX1kENmpGq1mkNrEhVm3i1GEWq1njkifVqhnFDsJJBvLFAtXakO7R1UAMrUgW5olQL+fCSherEq0FLUtWQXanIUnav4S5VQK6JmYwG5ru2DmrQjFStHIgVqWIc2uQLkd1U/NmfJkDZZYVo0og/b8TtlFSRhW1lHKFU48eGu73w8amPCJBLG6A9x6jEO9DcjlTbwZLRsbLugCUX5YpSLQTj0CZfCBY4iIUHIcRZLC2RZygOyAJZ2E7Ep/WnPS8YRqoglLr2HKkMdClVPEd4fuTchG0EtKVUu8fKugOWXJQrSrWQe3euUSdfCESgLX7ZzWk70RC0geTw59xjkIdyS0lH+hhGqvK8cS6SL3mOUZDnCY879dyAUh0PmO/aOqhBM1LVOq2BFalqEy8GUk0tcEghFpcIKUTkhJ/xblaIxZgTS9gniB8by1OQsUle8hyzBc+BvkKhAkq1Dto6qIEVqYJcUaqFXHzFvu83yjGsVCEq3AahzHBb5IR+hpXqoOcdRaoiuJLnKCU8H9r9MkbtPoyrC6GT/cF819ZBDZqRqpUDsSJVjEObfCEp8Yg0RKopYYZy6otU5dyEY4qJxxKCXM4r6Q4r6w5YclGuKNVCMA5t8oVAPJoIIRwsfrkNOcUSEXGInFKy0ySUErD00YVUS56jhHg8KfDc8XPIc4cZ6QYr6w5YclGuKNVCbr1j31ct58DCxyIPd3SxLAH+HAoL4HbcTvqT22EWikgTrWRxn7HEhpVqyXOUgMdiDNp9ITLO+JwN81hSDua7tg5q0IxUtU5rYEWq2sSLgfAgVJGmoC18tAvbIMPPWE4iUQEii8UIQsEBPA45/tyFVEHuOWYjt7i/mPDFCchYBQp1vGjroAZWpApyRakWcu31S9WJFyJS1e5rFREjBdcWmO/aOqhBM1K1ciBWpIpxaJMvpI9Sld2jdh+ZXqysO2DJRbmiVAvBOLTJF9KyVPExQHxs8hHBbD9PJXaxsu6AJRflilIthG//9312GhN+5kragW//D2RkqWqd1sCKVLWJR0jLaOugBlakCnJFqRYyzD+pIqQV+E+qdHLFt/+FYBza5COkRaysO2DJRbmiVAvBOLTJR0iLWFl3wJKLckWpFjLML1QhpBX4C1UOZGSpap3WwIpUtYlHSMto66AGVqQKckWpFjLML6meFDgnpF20az5p+EuqdXLFt/+FWJnsAGP5+k/2kAaxMs+srDuAsWhumDQYR64o1UIwDm3y1QBj0RYkmX6szDMr6w5gLJobJg3GkStKtRBLX1GNc6ItSDL94Npq13zS8CuqDwTjyNVAqWqd1sCKVLWJVwtKtV2sSBVo66AGVqQKckWpFvLd3RvUiVcDSrVdrEgV811bBzVoRqpWDsSKVK1MdoCxaAuSTD9W5pmVdQcwFs0NkwbjyBWlWgjGoU2+GmAs2oIk04+VeWZl3QGMRXPDpME4ckWpFrJg4Tx18tUA50RbkGT6wbXVrvmkwXzX1kENLLkoVwOlqnVaAytS1SZeLSjVdrEiVaCtgxpYkSrIFaVayI9fuEOdeDWgVNvFilQx37V1UINmpGrlQKxI1cpkBxiLtiDJ9GNlnllZdwBj0dwwaTCOXHUu1ZXLlhzwVRvI4na/f2r7fm12bF5zQJuQUS7u317dsXfViiXqfWDTjZftNxa019oBjEObfDnwVdBh/6lvHB3mK61DMBZtQVoBx7D8M59N3id8+PwL1DalbH78B/v1m3rutXd8db926x94SG1Xk9w8k+8EE+QrwjWGbZeiZN1hjaXWTskaS4GxaG4A4/KOBsaRq86lioG+tGuLep8gB4afkg06wJKLGzLz8Odd3ymp4mIDuS3tUxf9bcccoU6+FPH3Vcm3jsbCFKHKbVk4ObHinGgL0gIiLk1syHG/3EabUcUKMaJfiFUy9Bk/v4xLbouIrYkV11a75jJ/8JXgkmGOacJEu/DLGPHiXipWzHdtHYT88YV73HMBbd2UrrEUORehv3F4RwPjyNVAqWqdpnjtpZ0HDFoDryDxgeCE4LHoI8yFUqnumdns+hM0qUqb+OKi7c5tq/fLBG3i5dCkCMmGkzv1nflxuxirUr1r5r/8eY+lduXNXzpAoNJ+FLGhz1DUQPoV0aaeRxtTbXJSjTNt/mhzJzXPBqGtA4B1g/5C4rU0mzWWIiXVcXonRa4mLtVcG+SpV5tSqeLVUESKi6dJFXn4CiqEj43RJl0p2D2EEx6THMcetgGyWw13JSFWpQpJAQg1lqomP4B2eEycD0Msz5Dw+WQ3G7eR3Sr6ie+rRUqqKTD+UJaYX9pXhmO3WvpNv9o6ALJDhTBT8pzNGksxilRn650Uuer07T8GjAHmrJ97ZdBeSYRSqYakpIpMe7VMTRBQOtk14l1Eakc6aGeBsWgLsiahoGKppnaKIN4tStvU7jPMJdOkGo4htSPNjasWJfMsnie5eTPo3U/MsOuudEeaW2MpMBbNDeP0jgbGkauxSDUkHuzu+/ftysJMuHXtZROVKsaBV8w4D1+B4/swDm3ylYC+w90Cdg8gbCOg7TRJFeMV4cVSFeFq8sNjYuHFAk2JFuRyGUM8nhC0m1apyufx8o5G3uHgp9Z2klJFVrrGUmAsmhvG6R0NjCNXnUo1RrbcGLRkfZeq/EuAOGtBqvKWX27HEiuVKhCRom/81MQJkMd947nRp4whHk8IHjuNUhWBhm/1+ybVmC69o4Fx5GqgVLVOS5BXEfzE7WmXqjbxhgV9gjhvQaryeSUkKFkssdlIFeR2qCEyBgG38fzyWW1rUpUdaihU0KVUQbwGNCxJFXTlnRS5GrtUAQ4GB4U/y2cbcRuAzzakXcw4pIpMu+AyQeIcaJNuEJAi+kuJEx8FaPfJZ2Pa4gBWpCrSi6UUS0zaaVKNd7nCsDvVFBC1PGbQc2jjqsUgqUKMGLM2N3LzJjXXcmjrICYl1dmssRQlUgXuHIzonRS5GuvbfyE8uPgVJG6X+lu4cUg1/vdzAiaB1h6U/jtVEWq8mwiRHUecy45DPiuLsSJVEV4OES7+rIkRspMdpRDvUOPbg4hlicfhdtxOdtBoH99Xi5xURajafQLu1+YchBp+nj+IYf6dKkhJdTZrLMUoUp2tdzQwjlyNXarawWivDLlXEoBxaCd6GFJSTb1apl5dQW6ya6D/nFBBamcxaFeBsWgL0grxThVou0Vtp5gSaIlY4+fSnkdrZ4HUPEu9AMdoc2fQOx+NYdddSqqzWWMpMBbNDRpdeUcD48hVp1LF5xLhQcgHxvHnFXIgYVvczr1aDHtxNVJSBcjDV9JBr6AYhzb5NAbtNEOwCNBWbg/zWIxFW5BW0KSqSRFt4l1qKegPfYe38TxhBvA8yOW2xV0qSM2zYXeaItDwBb10lwqGXXcpqYLSNZYCY9HcME7vaGAcuRooVa3TFHgVwCBDUgOWAxzUThj24mrkpApwn4xj0MUu+S1V8tY/RfwXUCJWYZCMcU60BWkFTapAxCqMKlQgEhVSf+kFRKyCNaECXFvtmstbf434L6BErEKpUMGwv6UqJ1VQssZSpKQ6Tu+kyFWnUh0no0i1S7SJVwvrUiWzJyXVGmjroAYpqdYgV52+/R8nVqTK3/xPJoEVqfI3/x8IxpErSrUQK5MdYCzagiTTj5V5ZmXdAYxFc8OkwThyRakWgnFok68GGIu2IMn0Y2WeWVl3AGPR3DBpMI5cDZSq1mkNrFxcfu8/mQS4tto1nzT83n+dXFGqhWgTrxaUartYkSrQ1kENmpGqlQOxItUPL1moTrwaUKrtYkWqmO/aOqiBJRflilItxMpkBxiLtiDJ9GNlnllZdwBj0dwwaTCOXFGqhWAc2uSrAcaiLUgy/ViZZ1bWHcBYNDdMGowjVwOlqnVaAysX996da9TJVwOcE21BkukH11a75pMG811bBzWwIlWQK0q1EG3i1QLnhLSLds1roK2DGuCcaG6oQa749r+Qi69YrE48QloE811bBzWw5KJcUaqFYBza5COkRaysO2DJRbmiVAvBOLTJR0iLWFl3wJKLcjVQqlqnNbBycW+94wp18hHSIpjv2jqogRWpglxRqoVoE4+QltHWQQ2akaqVA7Ei1WuvX6pOPEJaBPNdWwc1sOSiXFGqhWAc2uQjpEWsrDtgyUW5olQLwTi0yUdIi1hZd8CSi3I1UKpapzWwcnH59p/0Cb7918kVpVqINvEIaRltHdSgGalaORArUuU/qRof8p32QurbP+Xruwe1I6PDf1J1IBhHrijVQjAObfKR0YAYw69Ylq9XjoUpQsVPySjW8WFl3QFLLsoVpVoIxqFNPjIajzyxXs0gTAhWMog3FqjWjnSDlXUHLLkoVwOlqnVaAysXl79QZXLIrlRkKbvXcJcqINfETEaDv1BFJ1eUaiHaxCPjId6B5nak2g6WdIO2DmrQjFStHIgVqf6HoV9S3Tqr11203+es8hdZYRsBbSnV7sF819ZBDSy5KFeUaiEYhzb5SLeIQMO3+pTq5LGy7oAlF+WKUi0E49AmH+kOCDIWKqBUJ4+VdQcsuShXA6WqdVoDKxfX0ldUt4b8RVRKnPKZqnYfPiaAdLX7yOzhV1Tr5IpSLUSbeGR0RKjYcWr3A/nXAPzb/8mirYMaNCNVKwdiRarf3b1BnXhkNCDTnFAFbUea28GS0cB819ZBDSy5KFeUaiEYhzb5yGgMu9MUgYa7Ve5Sx4eVdQcsuShXlGohGIc2+cjsCT9L1Uj9DyqBQh0fVtYdsOSiXA2UqtZpDaxc3AUL56mTj5AWwXzX1kENrEgV5IpSLUSbeIS0jLYOatCMVK0ciBWp/viFO9SJR0iLYL5r66AGllyUK0q1EIxDm3yEtIiVdQcsuShXlGohGIc2+QhpESvrDlhyUa4GSlXrtAZWLu7bjjlCnXyEtAjmu7YOamBFqiBXlGoh2sQjpGW0dVCDZqRq5UAoVULqoK2DGlhyUa4o1UIwDm3iEdIiVtYdsOSiXFGqhWAc2uQjpEWsrDtgyUW5GihVrdMaWJKqIBPvkEMP9tnPf7PdZXPmHOaz53/xVZcddfQcnz378p0uO+bYI3329M9ud9nx8+b6bOa5ff/H/d3zj/PZk09vdNn7Fhzvs+/N3OKyhae+y2ePPXmzy04/c77PHtp1g8sWLT7JZw8+us5lZy852Wf37rzWZed+/FSf3f3ANS5buuyDPtu6/SqXXXTJIp9t3vZJl12ycrHPNt6+76u9V151js82bLrEZVet/qjPbvjCcpd9dt35Prvupgtchp+S4X5kaC8Z+kGGfiXD8yHD80uGcSHDOCXD+JHheCTDcSLDcUuG84EM50cynDdkOI+S4fwiw/mWDNcBGa6LZLheyHD9JMN1RYbrLBmuPzLMB8kwT5Bh3kiG+YQM80syzDtkmIeSYX4iw3yVDPMYGZAMaOugBhiL5oYa5IpSJYRMBc1I1cqBUKqE9BtLLsoVpUoImQoo1Y6hVAnpN81IVeu0BpQqIf3GilRBrihVQshU0IxUrRwIpUpIv7HkolxRqoSQqYBS7RhKlZB+04xUtU5rQKkS0m+sSBXkilIlhEwFzUjVyoFQqv1i57bVe/fMbFbv++ML9+z3FdVoq7UjbWHJRbmiVIk5RJaaVEWo+CkZxdoPKNWOoVTbZ9WKJV6oKamiTSxQtEP7v726Y7+ctEUzUtU6rQGl2j4iUshRk6rk4S5VSEmYtIMVqYJcUarEHCmp5nak2g6WtEUzUrVyIJRqf0hJdebhz7s8zIRNN15GqTaOJRflilIl5qBUiQal2jGUan+gVIlGM1LVOq0BpdofBn2mGmYCPlOFdLX7SBtYkSrIFaVKzJGSqvZvVAWtPWmLZqRq5UAo1f6QkirQdqS5HSxpB0suyhWlSsyRk6oINP4fVdyltg+l2jGUan/ISRWIWAUKtR80I1Wt0xpQqoT0GytSBbmiVAkhU0EzUrVyIJQqIf3GkotyRakSQqYCSrVjKFVC+k0zUtU6rQGlSki/sSJVkCtKlRAyFTQjVSsHQqkS0m8suShXlCohZCqgVDuGUiWk3zQjVa3TGuBACCH9RnNDDXI1NVIlhBAr5Gpq3v4TQogF4MRcUaqEEFIApUoIIR0yslS1TgkhpM/kilIlhJBCcsW3/4QQUgA/UyWEkA6hVAkhpENGlqrWKSGE9JlcUarEDCuXLdnvW1IBsrjd75/avl+bHZvXHNCGkHGSK779J2aAIF/atUW9TxCh4qdkFCuZJPxMlUwFr7208wBZamDnGgsUIsZj0UeYEzIOKFUyFQwj1Vwb5IN2uYR0wchS1TolpGvkbX1ut5nbkWo7WELGRa4oVWICkWpILMnd9693eZgJt669jFIlEyNXfPtPTCJv9SFLyShVYgF+pkqmFtm9ymeolCqxAKVKphpIFDLFn+Uz1bgNwGeq0o6QcTKyVLVOCZkUoVTjnWvcjn/7TyZFrihVYhZNotqONLeDJWQc5Ipv/4kJ8HloKE/5i6r4c1IRaNiWu1QySfiZKpkK5C+hQlKiFLEOakfIOKBUCSGkQ0aWqtYpIYT0mVxRqoQQUkiu+PafEEIK4GeqhBDSIZQqIYR0yMhS1TolhJA+kytKlRBCCskV3/4TQkgB/EyVEEI6pBOpCujwn7981N8+7NBDXPb3l7/lsyPf+haX/fWn3/DZcXOPcNmfn73PZye+Y67L/vDUPT476cS3u+y3u+/02WknvdNlrzyxxWcfev++X57x4nc2+ewjZyxw2XMPfdFnS886xWU/euBmn6049wMu++H26322cukil+3attZnVy8/22UPf+Uan113+bkue3Djp31205Xnu+xr61f57EvXXOiyrddf6rMt161w2W1rlvvsrpsud9mGz3zCZ/fd8imXfW7VeT7bedvVLlt98Tk+e2zrvv8Tf+WFi332/bvXuezSj53ps5n7bnTZsnNO89kzOza47LxFJ/vs+W9vdNlZp7/XZ3t2bXbZGSef6LNfPbnVZQvfc4LPfjdzl8vmzzvWZ396Zt//zT/h2KN99peffN1lc4863GevvfhNl81585t89o9XHnHZwW98g8/+9evHHXIb96EN2kp2+L/7QIY+JcNzIcNzS4YxIcMYJcPYkeFYJMMxIsMxS4ZzgQznRjKcM2Q4h5Lh3CLDuZYM1wAZrolkuFbIcO0kwzVFhmssGa49MswFyTBHkGHOSIa5hAxzSzLMOWSYg5JhbiLDXJUMcxgZ5rRkmOvIMPclw5pAhjUiGdYOMqwlybDGkGHNSYa1iGzp4lN8hjWLDGtYMqxtZFjrksEByOAEyeAKZHCHZHAKMjhGMrgHGVwkGRyFDM6SDC5DBrdJBuchk9sgVwOlymKxWKzhi1JlsVisDotSZbFYrA6LUmWxWKwOi1JlsVisDotSZbFYrA6LUmWxWKwOi1JlsViszmrv3v8Hd4aUYaGW5mYAAAAASUVORK5CYII=" alt="16549204799174"></td></tr><tr><td style="text-align:left">æ ‡å‡†ç›’æ¨¡å‹ä¸‹çš„<code>width:100px;</code> <code>height:150px;</code> åªåŒ…å«äº† content éƒ¨åˆ†ï¼Œæ‰€ä»¥ content çš„å®½é«˜ä¸º 100px å’Œ 150px;</td><td style="text-align:left">æ€ªå¼‚ç›’å­æ¨¡å‹ï¼š<code>width:100px;</code> <code>height:150px;</code> åŒ…å«äº† borderã€paddingã€content ä¸‰éƒ¨åˆ†ï¼Œåˆ™é€šè¿‡è®¡ç®—å¾—å‡º content å†…å®¹åŒºçš„ é«˜ä¸ºï¼š<code>150px - 20px*2 - 10px*2 = 90px</code> å®½ä¸ºï¼š<code>100px - 20px*2 - 10px*2 = 40px</code></td></tr></tbody></table><blockquote><p>åº”ç”¨åœºæ™¯ï¼š</p><ul><li>å¦‚æœæˆ‘ä»¬æœŸæœ›ä¸ç®¡<code>å†…å®¹åŒº</code>ï¼Œ<code>è¾¹æ¡†</code>ã€<code>å†…è¾¹è·</code>å¤§å°å¦‚ä½•å˜åŒ–ï¼Œå…ƒç´ çš„å¯è§†å®½é«˜å§‹ç»ˆä¸å˜æ—¶ï¼Œå°±å¯ä»¥ç»™å…ƒç´ æ·»åŠ  box-sizing:border-box;å±æ€§ï¼Œä»¥æ€ªå¼‚ç›’æ¨¡å‹æ¥æ¸²æŸ“ã€‚</li><li>ä¸ç®¡å…ƒç´ çš„å ä½å®½å¦‚ä½•å˜åŒ–ï¼Œå§‹ç»ˆä¿æŒè¾¹æ¡†å’Œå†…è¾¹è·ä¸å˜ï¼Œå¸Œæœ›é€šè¿‡æ”¹å˜å†…å®¹åŒºå¤§å°æ¥è¾¾åˆ°ç›®çš„ã€‚</li><li>å¸¸è§çš„å“åº”å¼å¼€å‘ä¸­ã€æ …æ ¼ç³»ç»Ÿç­‰ã€‚</li></ul></blockquote><h3 id="display-å±æ€§">display å±æ€§</h3><p>ä¸‰ç§å…ƒç´ ç±»å‹å¯¹æ¯”</p><table><thead><tr><th style="text-align:left">å…ƒç´ ç±»å‹</th><th style="text-align:left">æ’åˆ—æ–¹å¼</th><th style="text-align:left">ç›’æ¨¡å‹å±æ€§</th><th style="text-align:left">å†…å®¹</th></tr></thead><tbody><tr><td style="text-align:left">å—çº§(block)</td><td style="text-align:left">ç‹¬å ä¸€è¡Œ</td><td style="text-align:left">widthã€height æœ‰æ•ˆ</td><td style="text-align:left">ä»»æ„å…ƒç´ </td></tr><tr><td style="text-align:left">è¡Œå†…å—(inline-block)</td><td style="text-align:left">ä¸€è¡Œå¯æ˜¾ç¤ºå¤šä¸ª</td><td style="text-align:left">widthã€height æœ‰æ•ˆ</td><td style="text-align:left">è¡Œå†…æˆ–è¡Œå†…å—å…ƒç´ </td></tr><tr><td style="text-align:left">å†…è”ï¼ˆinlineï¼‰</td><td style="text-align:left">ä¸€è¡Œå¯æ˜¾ç¤ºå¤šä¸ª</td><td style="text-align:left">widthã€height æ— æ•ˆ</td><td style="text-align:left">è¡Œå†…æˆ–æ–‡æœ¬å…ƒç´ </td></tr></tbody></table><p>éšè—å…ƒç´ æ–¹æ³•</p><table><thead><tr><th style="text-align:left">å±æ€§</th><th style="text-align:left">åŠŸèƒ½</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left"><strong><code>display:none;</code></strong></td><td style="text-align:left">éšè—å…ƒç´ </td><td style="text-align:left">å¯ä»¥å°†å…ƒç´ éšè—ï¼Œå­å­™å…ƒç´ å…¨éƒ¨éšè—ä¸å¯è§ã€‚å¹¶ä¸”åªè¦çˆ¶å…ƒç´ éšè—ï¼Œå­å­™æ²¡æœ‰ä»»ä½•åŠæ³•å¯è§ã€‚ å…ƒç´ éšè—åä¸ä¼šå ç©ºé—´ã€‚å°±å¥½æ¯”é¡µé¢å½“ä¸­å°±æ²¡æœ‰åŠ è¿‡è¿™ä¸ªå…ƒç´ ä¸€æ ·ã€‚</td></tr><tr><td style="text-align:left"><strong><code>visibility:hidden;</code></strong></td><td style="text-align:left">éšè—å…ƒç´ </td><td style="text-align:left">å°†å…ƒç´ éšè—ï¼Œå­å­™å…ƒç´ å…¨éƒ¨ä¸å¯è§ï¼Œä½†æ˜¯ç»™å­å­™åŠ ä¸Š <code>visibility: visible;</code>æ—¶ï¼Œå­å­™å¯è§ã€‚ éšè—åä»å å…¶ä½ç½®ï¼Œä¼šç•™ä¸‹ç©ºç™½çš„ä¸€å—åŒºåŸŸã€‚åŸºæœ¬ä¸ç”¨ã€‚</td></tr></tbody></table><p>ä¸¤è€…çš„åŒºåˆ«ï¼š</p><table><thead><tr><th style="text-align:left">åŒºåˆ«</th><th style="text-align:left">display: none</th><th style="text-align:left">visibility: hidden</th></tr></thead><tbody><tr><td style="text-align:left">ç©ºé—´å æ®æ€§</td><td style="text-align:left">ä¸å æ®ç©ºé—´</td><td style="text-align:left">å æ®åŸç©ºé—´</td></tr><tr><td style="text-align:left">å›æµä¸æ¸²æŸ“æ€§</td><td style="text-align:left">ä¼šäº§ç”Ÿå›æµä¸é‡ç»˜</td><td style="text-align:left">ä¸ä¼šäº§ç”Ÿå›æµï¼Œåªä¼šäº§ç”Ÿé‡ç»˜</td></tr><tr><td style="text-align:left">å¯¹å­å…ƒç´ å½±å“</td><td style="text-align:left">å­å­™å…ƒç´ å…¨éƒ¨éšè—ä¸å¯è§ã€‚å¹¶ä¸”åªè¦çˆ¶å…ƒç´ éšè—ï¼Œå­å­™æ²¡æœ‰ä»»ä½•åŠæ³•å¯è§</td><td style="text-align:left">å­å­™å…ƒç´ å…¨éƒ¨ä¸å¯è§ï¼Œä½†æ˜¯ç»™å­å­™åŠ ä¸Š <code>visibility: visible;</code>æ—¶ï¼Œå­å­™å¯è§ã€‚</td></tr></tbody></table><h3 id="å»æ‰è¡Œå†…å—å…ƒç´ é»˜è®¤çš„ç©ºç™½é—´éš™">å»æ‰è¡Œå†…å—å…ƒç´ é»˜è®¤çš„ç©ºç™½é—´éš™</h3><blockquote><p><strong>äº§ç”Ÿé—´éš™åŸå› </strong></p><ul><li>å…ƒç´ è¢«å½“æˆè¡Œå†…å…ƒç´ æ’ç‰ˆçš„æ—¶å€™ï¼Œå…ƒç´ ä¹‹é—´çš„ç©ºç™½ç¬¦ï¼ˆç©ºæ ¼ã€å›è½¦æ¢è¡Œç­‰ï¼‰éƒ½ä¼šè¢«æµè§ˆå™¨å¤„ç†</li><li>æ ¹æ® white-space çš„å¤„ç†æ–¹å¼ï¼ˆé»˜è®¤æ˜¯ normalï¼Œåˆå¹¶å¤šä½™ç©ºç™½ï¼‰ï¼ŒåŸæ¥ HTML ä»£ç ä¸­çš„å›è½¦æ¢è¡Œè¢«è½¬æˆä¸€ä¸ªç©ºç™½ç¬¦ï¼Œæ‰€ä»¥å…ƒç´ ä¹‹é—´å°±å‡ºç°äº†ç©ºéš™ã€‚</li><li>è¿™äº›å…ƒç´ ä¹‹é—´çš„é—´è·ä¼šéšç€å­—ä½“çš„å¤§å°è€Œå˜åŒ–</li></ul><p><strong>è§£å†³åŠæ³•ï¼š</strong></p><ul><li>ç»™çˆ¶å…ƒç´ æ·»åŠ  <code>font-size: 0px;</code> åŒæ—¶å­å…ƒç´ é‡å†™ font-size</li><li>ç»™å…ƒç´ æ·»åŠ  float</li><li>å›¾ç‰‡é—´ç©ºéš™ï¼Œç»™å›¾ç‰‡æ·»åŠ  <code>display:block;</code></li></ul></blockquote><p><strong>â‘  ç»™çˆ¶å…ƒç´ æ·»åŠ  font-size:0; åŒæ—¶å­å…ƒç´ é‡å†™ font-size</strong></p><blockquote><p>TIP</p><p>font-size å±æ€§æœ‰ç»§æ‰¿æ€§ï¼Œæ‰€ä»¥çˆ¶å…ƒç´  <code>font-size:0;</code> ä¼šç»§æ‰¿åˆ°å­å…ƒç´  spanï¼Œåˆ™å­å…ƒç´ éœ€è¦é‡æ–°è®¾ç½® font-size å¤§å°</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.box</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* å»æ‰ä»¥ä¸‹spanè¡Œå†…å—å…ƒç´ é—´ç©ºéš™ */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">span</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/*</span></span></span><br><span class="line"><span class="comment"><span class="language-css">      font-sizeå±æ€§æœ‰ç»§æ‰¿æ€§ï¼Œæ‰€ä»¥çˆ¶å…ƒç´  font-size:0;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">      ä¼šç»§æ‰¿åˆ°å­å…ƒç´ spanï¼Œåˆ™å­å…ƒç´ éœ€è¦é‡æ–°è®¾ç½® font-size å¤§å°</span></span></span><br><span class="line"><span class="comment"><span class="language-css">    */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>â‘¡ ç»™å…ƒç´ æœ¬èº«æ·»åŠ  float</strong></p><blockquote><p><strong>TIP</strong></p><ul><li>å…ƒç´ æ·»åŠ  float åï¼Œä¼šè„±ç¦»æ–‡æ¡£æµ</li><li>çˆ¶å…ƒç´ æœªæ·»åŠ é«˜åº¦æ—¶ï¼Œä¼šå‡ºç°é«˜åº¦å¡Œé™·é—®é¢˜ï¼Œåˆ™éœ€è¦æ¸…é™¤æµ®åŠ¨é€ æˆçš„é—®é¢˜ã€‚</li></ul></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">span</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* å…ƒç´ å…¨éƒ¨å·¦æµ®åŠ¨åï¼Œç©ºéš™å°±æ¶ˆå¤±äº† */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>â‘¢ å»æ‰å›¾ç‰‡ä¸‹é¢çš„ç©ºéš™ï¼Œç»™å›¾ç‰‡æ·»åŠ  display: block;</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.box</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span>: <span class="number">2px</span> solid red;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">img</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* æŠŠå›¾ç‰‡è½¬æˆå—çº§å…ƒç´ ï¼Œå°±å¯ä»¥æ¶ˆé™¤å›¾ç‰‡ä¸çˆ¶å…ƒç´ å‘ä¸‹çš„é—´éš™ */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/flower.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>åŠ äº† display:block ä¹‹åï¼Œå›¾ç‰‡æˆä¸ºå—çº§å…ƒç´ ï¼Œç‹¬å ä¸€è¡Œ</p></blockquote><h3 id="CSSç²¾çµå›¾">CSSç²¾çµå›¾</h3><blockquote><p><strong>TIP</strong></p><ul><li>å°†å¤šä¸ª <strong>å°å›¾æ ‡</strong> åˆå¹¶åˆ¶ä½œåˆ°ä¸€å¼ å›¾ç‰‡ä¸Š</li><li>ä½¿ç”¨ <code>background-position</code>å±æ€§å•ç‹¬æ˜¾ç¤ºå…¶ä¸­ä¸€ä¸ª</li><li>è¿™æ ·çš„æŠ€æœ¯å«åš <strong>CSS ç²¾çµæŠ€æœ¯</strong> ï¼Œä¹Ÿå«ä½œ<strong>CSS é›ªç¢§å›¾</strong></li><li>CSS ç²¾çµå¯ä»¥å‡å°‘ HTTP è¯·æ±‚æ•°ï¼ŒåŠ å¿«ç½‘é¡µæ˜¾ç¤ºé€Ÿåº¦ï¼Œä½†ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼šä¸æ–¹ä¾¿æµ‹é‡ï¼ŒåæœŸæ”¹åŠ¨éº»çƒ¦</li></ul></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://www.arryblog.com/assets/img/image-20211201224156968.127aa74e.png" alt=""></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">body</span>,</span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">i</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">images/icons.png</span>);</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* æ–‡å­—å’Œå›¾æ ‡å±…ä¸­å¯¹é½ */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">vertical-align</span>: middle;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* ç›¸å¯¹å®šä½ */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* å‘ä¸Šç§»åŠ¨ 2px */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">top</span>: -<span class="number">2px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.word</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-position</span>: -<span class="number">288px</span> -<span class="number">192px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.excel</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-position</span>: -<span class="number">312px</span> -<span class="number">192px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.ppt</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-position</span>: -<span class="number">336px</span> -<span class="number">192px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.pdf</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-position</span>: -<span class="number">360px</span> -<span class="number">192px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.bbd</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-position</span>: -<span class="number">168px</span> -<span class="number">192px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="comment">/* é€šè¿‡ ::after ä¼ªå…ƒç´ ï¼Œæ·»åŠ å›¾æ ‡ */</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.doctor</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">images/icons.png</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-position</span>: -<span class="number">144px</span> -<span class="number">192px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* ä¸Šä¸‹å±…ä¸­ï¼Œé€šè¿‡ç›¸å¯¹å®šä½ç§»åŠ¨å…ƒç´  */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">top</span>: <span class="number">2px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">p</span>,</span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>wordx<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;word&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>xxxx<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>excelæ–‡æ¡£ <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;excel&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>PPTæ–‡æ¡£ <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;ppt&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>PDFæ–‡æ¡£ <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;pdf&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¤ªæ£’å•¦ <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;bbd&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;doctor&quot;</span>&gt;</span>ä¸¥é˜²ä¸¥æ§<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgsAAAD7CAYAAADkUtf+AAAa3ElEQVR4nO3dW4g06X3f8V9t1iJocxA2K7r17iv3xooUnCBsK0jVkQNNgoluQpVtcKp8s7PExm8uhA8XpupCBimQKufCOSxLxoTg0Y2rYkLSRU7ri4QGH6psknUwJmQtKa5YkruInYNxZIWE7JOL6u6p7q5++jD9zrwz7/cDDdN1eKpmbp5fPfV/nnGMMUYAAAA7vHDXNwAAAJ5thAUAAGBFWAAAAFaEBQAAYEVYAAAAVoQFAABgRVgAAABWhAUAAGBFWAAAAFYv3vUN3KZXLr54o/O/cvWhM90JAAD3xz0PC41yf6hQmebTQIMDzji1w79p0AAA4L7iNQQAALAiLAAAAKt7/hriNJuvFL5y9SG99ZvSD/ytL66+89oBAIDW0SMLVerIcVJVnW1N7stxHKXrG+VvbFsed/1Zb6etQXDk+Lmq5bF+rub64mvnp+sn99+HKqWLdpa6dQtfufqQvvZ/zCooLP2Tz/0pSdInv/W9q+P3tf/re/Y3i7+Js3Hj7d/UV/7re/Y3AgDg9pljlYmRPJPNu5tkJBlvfaORElOuHXP9/Xpbt625yby2LSXdI42ZZ56RZLqbl9eVl5n52vn913302hdW5z567Qur72/87FdX35fbvu8n223lf/l/q+P3tb9/f8/vUSZr3/ftBwDgth0fFuaZ8daCQWkSyXie1+m0F53ksofb2eG1514Hg+3Otv+4je2d667d3+Ln5Wl9YaH+fbMWFJYB4dFrXzDf95NfXTt+X/sH7V/+jl5m5suf1xvYsx8AgNt1fIHjYKLAk4q6br83tSoliiJXKmq1WxvVleSNRpKkahZLSjRxNxtzNUkkVbXWRti9kUbd79VMsaRkq4GRRt7m/QW6zDwV4ZXSq1BFUirauu61H7/8HUnt64alv7MY7//RoGcy5r72915/oOAyk1eEukqvFBaJyvUG9uwHAOB2nTAbYqBJ4EnxTJWkZparSCZy3YkSxZq1G5UXnoJJp7PdDABdq5Bh42m0s4GNOwwiJYoVx/s72l/6j38oSfrbTz6wtu2T3/peuR/s//Psa3/v9QeBokSK41hJGWnriH37AQC4RSdNnRxMAnmqVDdSXReLJ/52lKBqN6rwAnWzgjUQ2ILEdQOq9ycKSVKTp4olSbHGm1WQPaK/8l59859Y39Y7qnBg+3uv3+RK2wMUjzeLPA/YDwDALTptnYXBSK4K1XWlWXz9xD8aeSrymfJZLLmj1YqK7iSRlqMOayrNYskLJvbVF0cjeVoEka5mprzYOLbJ9SQslJRGpkykeLw1a2LT6987XPtuG1XY2/7e6zfKn7SvJ4wplWwFin37AQC4ZacWO5SJjDzPeFvFhZ7xvB1Ffb2zIbrbusV9PddbKxbszJzYnA2xY3ZEX4Hjv37HbG1bzoDoWpsNsXP2xb79y9kO1zNANmc/7NsPAMBtOzksLGc4rE2X3DmbYXnKonPXZie/cX5PWNg+3zPZfP347amYZjUjQUm5FhaO9ei1L+xtf9/+vX+zE/6mAAA8bY4xxtzNmMbte+Xiizf6R1L810kAwPPouVvumWWcAQA4znM1sgAAAI7Hf50EAABWhAUAAGBFWAAAAFaEBQAAYEVYAAAAVoQFAABgRVgAAABWhAUAAGBFWAAAAFaEBQAAYEVYAAAAVoQFAABgRVgAAABWhAUAAGBFWAAAAFaEBQAAYEVYAAAAVoQFAABgRVgAAABWhAUAAGBFWAAAAFaEBQAAYEVYAAAAVoQFAABg9eJd38BtqFJHY5UykXur133fG6/c6Pz/+emvnOlOAAA43f0OC1UqZxwrKY1sOcC9yOQNx/JHc02DwZ5GG+X+UHW0o80qlZOONJ8G2teSdHqHf9OgAQDAuTwfryEGgS4zT0U+U3PkqVXqyM8tZzW5fD8/ul0AAO6L+z2y0LUYZbArNHTC3j27RifcaK7AH8qpe15jNLn8YSg3m1uv2jdK8M9e+7uSpO/+/I9s7eP1AwDgWfJwRhbcSMaY9jPP5ClRufy++Zln8tQGhOW2aJTLdxw5zlBhIcVjR47jyM+lYFoqicdKq+4FG+VPQrmlURQMrK8kfuzbf0jSegj47s//SG9QWB4LAMCz4vSw0Cw718WnMxTf5L4cx9noXCulG8e19QH9bey7htVgJFeV6l0H17UKJZp0BwoGgabGyJhSia6DRFvj4CoymyMPAwVTe63E0k9852f0HY8+ove98Yp11ODHvv2H9BPf+Zn9DQIAcItOCwuL4Xdl88WT+VyZQg0XnfkguFTmSfE41TIvVOlYsRKVy8LAJpfvDBW65fUT/6U0qw67hp2rSVIovKp691azWEom6u3nq5nWXmZU6XVYcZz2VUcRanhkiPm33/NvJGlnYCAoAACeWeZoc5N5MvIyM+9uLhMjeSZbbpxnxpOMl81XPyflnjaOvUaZGK21220iM1732H3bV03KSO3H23XQ5j3t+D3+5N9/1LttuX3582d/4XMHnQsAwF04fmShmSkvJC+YrL+nH43kqVBdL74vZyCEV0qvQhVJ2Rmyr1X3tXHsNWwGgaKt0YW2zkDZpfpnUFaaVYkST0rKuYJ8aJ8JcQPdEYaf+rWf1vveeGX1AQDgWXJyzUIRDteH54ehCklVp1BgEERKFCuOE5Xdl/tNrUqSO7KvVHDINWzcqC1MXHb4VTpUqEyXO9ZaaPJUVTDRqL17BdNS7gnTLXfZDAJ9ryT+5V/8V2e6GgAA53FyWOjOJOh+uoseNXm6eP8fa5xu1w/s6/QPuYadq2ieSYvQMa4yy2JKla5CV1EwWj//UnrSDSybn73TNVt/6Z/+5d7tm4HhM//5Rw/83QAAuB3Hh4XBRIEnxbP+4sGVJteTsGg7/DKRulMPF23sXCTp0Gsccb+SpCLXbFc+aWopu9guelzNktjxKZO9t/C5X/ybevur7+zc3w0MtuMAALgLJ4wsDBREbee/9j5/bSXDtjag8DJduJLci43ZEYs2ilDD7ohDkyuvDr3GflXarptQR23H3g4y7Ji9MAgUHTxicZyf+rWf3nsMtQoAgGfVaSs4upFMKTnjoVYLInrXQ/xVOlRYeMrmyyH/gYLLTHkRapxO2pUQ3UhmPpI/HMuJu20cdo2dFlMuC0leNpcx10cPgqlM0IaIdiVHT9l8uqPY8XxYkREAcJ85xhhz1zdxFqvlnhOVJupfQ2HTKlh0Q0P3H0m1P4fFnnZ2hJh9izDZ3ORcAADO6eH8bwg3kjHRcecMAk1NYDtAwdTIdkT7Xyh37+b1AgDgvns4IwsAAOCpeDj/SAoAADwVhAUAAGBFWAAAAFaEBQAAYEVYAAAAVoQFAABgRVgAAABWhAUAAGBFWAAAAFaEBQAAYEVYAAAAVoQFAABgRVgAAABWhAUAAGBFWAAAAFaEBQAAYEVYAAAAVoQFAABgRVgAAABWhAUAAGBFWAAAAFaEBQAAYEVYAAAAVoQFAABg9eJd38CNVKmcsVSaSO4tXvZLf/0bb3T+t/yj/36mOwEA4Om732HBvVDmDTX2R5pPAw32HN7kvoZ1JBP1RYtKqZNqNJ8q2NeQTu/wbxo0AAC4bSe9hmhyX47jbH38vFk7rkq3j3EcR2m1akh+z/7eY3sNFFxm8opcs8Z2XI8qlePn2n1ao9z3ldva/V+/ddwHAIB76AYjC56y7lN4lcoZD+Vrrunao3my9pqgyX0Nx45UGkVuoKkJVkdWqaNxlW2MElRKnbHiPXdTDB2FfTuSsn8kwY00D3wNnbrnNUaj3B8qdDPN91z3Sz/8sd7tL33i4xp8/z/YczYAAM++8xU4upHKRCrCK9kGAwbBpTJPilPbU/1aw4qMkTFGxsyVeVJSLr9vftr9SsrrbdFIud+OUgzDQorH7aiFn0vBVGUSa7wxfNHkTxS6pUwUaHDAK4k+X/uVX1Xzs39D0u5AAQDAfXDW2RCjkXfAUQONTq5GbM+t6l0xo1ZdSMnEXTsnmLbBoUx0HSQWoxduZLZGHgbBdEddg923/L1/r0ef/uer71/7lV9dbQcA4L46a1io60LyRhpZj2pUV5Lc0d6CxD7uJNk9elHNFCvRpLefrzSL17+na/URY8UqFA672/bULByIkQUAwH12trDQ5L7GsZRE9lkJVTpUWHjKLk4cXnAvlHmx0q1evFGexvKyi/5plNWsrXuIx4vCxu7rjb5PqeTIW/vSD39MX33jr66+v/SJj0tiZAEAcL/dICysP4UPQymbG22P3scad57gx3Gi0hw2PbHfQEG0PbrQ5E8UKtPljoarWaUk8aSk1DzINbTOhLi5lz7xcb3v45+RxMgCAOB+O99siJ2S8y+a5EYqE+d6fYUqXYSVHaMaTa60ChQFuVS3NQll7WvWBDcILdt2jSAwsgAAuM/u7aJMbjRX5g81dELtCy7VVSg3MhrVeef8S9W+I6ewXcVTduR97RpFIDAAAO6rexsWpIEmgScVhaRC+axR0JsWGtXKdOFKqtfPD6ZGQc8ZrXZFx2MRCgAAD839DAtVKmccL6ZBTtuVIIdDOWHfCMNAQdRGgqdZo7DEyAIA4KG5R2FhsapiIcnLNDfmuj5hsFgJskrlLFZy9LLNlSSfjs0QQCgAADw0J4WFQTCV2T1+v9IueHR4u25kZLa2Xi/3nJRGZmptQMZEWgYLJ9wdGprcb1d0tNpTs/DHXt1zPgAA9989GFlo10M4InNofz3CIYHHXrPAf48EADwvHGPM9sM8AADAwlmXewYAAA8PYQEAAFgRFgAAgBVhAQAAWBEWAACAFWEBAABYERYAAIAVYQEAAFgRFgAAgBVhAQAAWBEWAACAFWEBAABYERYAAIAVYQEAAFgRFgAAgBVhAQAAWBEWAACAFWEBAABYERYAAIAVYQEAAFgRFgAAgBVhAQAAWBEWAACAFWEBAABYvXjXN3AOVeporFImcm/1uv/u5ZdvdP6f/93fPdOdAADw9DyIkQX3IpMXj+XnzQFHN8p9R2m1Y3eVyvFzHdLSLu9//XX92d/+bb3/9ddv0AoAAM+Gk8JCk/tyHGfrs9lZV+n2MY7jyNnRU+9qd2/nPQh0mXkq8tnRnXyVbt/3xk3JPyE8OO+8feQZAAA8m24wsuApmxsZs/iUiYpw2NPxJipN5zgzV1aN5Ti7nu432jVGZhpoUKX9QWLxGYaFVIQa7ti/ayTBjeYK8mF/gGly+cNQbjA5+q/zwjd9UP/j5//F0ecBAPCsOd9rCDdSmUhFeKVdI/ytgYJpGy7isa+D3hws2l+Fh3kmbyuEmI39UlJeb4tGuXzHkeMMFRZSPF6OhkjBtFQSjzcCRaP8SSi3NIqCgQZH/Cle+k/v6D2PH+v//g41CQCA+++sNQujkXf4we6FMq9Q+OSE+oDBSK4q1btOrGsVSjTp1jsOAk2NkTGlEl0HiWkwkOQqMkbr9ZFtqDmlZvJrf+YjkkTNAgDgQThrWKjrQvJGGh109ECTwJOKWvXRV3I1SQqFV/1jGNUslpKJevv5aqZ47fvG641xvP0648iahcGnP62vf/3revmznz3iLAAAnk1nCwtN7mscS0kUHDxkPxi50tYIQaFwaC+clJYzINLt1xhNrjT2lF30DwlUszYqxONFu93XG32fMjnwt2l9wwde1nseP9Zvuh/TH/m939NH36bQEQBwv90gLKx36sNQyuanDduv2y5wbF8VbBgEirZGF9o6A2WX6jtFqjSrEiWelJRtYeNh0y0P95HP/0P97//wS3rlm/+0/qAs9Z7Hj/Vt87k++vbb+ujbb+vVN9/Uq+O/cNZrAgDwNJ1vNoSZ7uigd2vqSpKr0ZHnLblRW5i47PCrdKhQmS533EiTp6qCyeI1yUDBtJR7wnTLXb7hAy/rj37bJ/Xin/uE3vuPc7304Uf6bz/3c/r97/le/UFZSpJe+vAjvfS5Hz/TFQEAePrucAXHRrO8kJKov7bgIK6ieSZ/OJQTSvIyzae7XoNUugpdRWakOu+cf1nLdxwVtst42UF3sxxVeOe1H9yeCVH+sqS26PH9339EISgAAHfszlZwbPInCovdtQUHG0wULPveItds1zBBU0vZxXYwWc2SOL1m4dU339Srb74p85Hv0G98l2+dMvlff+Zn9Bvf5R/ymwEA8Ey4g7DQLrfc1jgc/+qiq10hcqg6ajv2eaa2jqJv9sIgUHSTi+3w0bff1ksffqQ/Ph7rD/9acPb2AQC4a7cQFmKN11ZTHCoP5ifVOEhqV1Vcrso4mrcLLi2GCwbBVMYYle5y6uMRiz6d6IXhUC980wfVvPGGfmvxqgEAgIfEMcaYu76Jg1RpuwaCEpXmwDqHxXLNhbzOKEaj3G9HIyK3/Tm0FixoZy0E/3USAPA8uD//dXK1HsIRBZGreoRdoxiLpafPuM4CAAAPzf0ZWQAAAHfi/owsAACAO0FYAAAAVoQFAABgRVgAAABWhAUAAGBFWAAAAFaEBQAAYEVYAAAAVoQFAABgRVgAAABWhAUAAGBFWAAAAFaEBQAAYEVYAAAAVoQFAABgRVgAAABWhAUAAGBFWAAAAFaEBQAAYEVYAAAAVoQFAABgRVgAAABWhAUAAGBFWAAAAFaEBQAAYHXWsFCljpy0OujYJvd3HNso9x0d2Mx6e36uZqOdQ+9nn8dvvavHb717lrYAALhPHvDIwkBBlEjxTDeNC4/feldf/tQD/lMBAGDxbPSAVSrHcRafocJCisdOZ5sjx0kXnX6ltLvdNnLgTpQoVpo3u48BAABWtx4WqrTt5IdtIpDjOEoVyRiz+MyVeVJSms42I2MiuatWPGVzo3nm7bmaq8gYTYPB0/2lAAB4wI4OC03ubzzxX3/GsVYBoO/j543cqO38y0RSUsoYo8hd1BdYRhb8naMDM6XL8FGEGjq+0rT/Hk8pX+AVBADgeXd0LzgIphtP/OsjAvIyzXv3d5/wK83itVYVTLdDRP+5myaKzGKUwcs0N1NFUf89Ru6OJnboCwrLQkeKHQEAz4sXz9ZSM1NeSFKuWRPIOvJfzVR5XjsKoVLzUdqODKyM5cQ95yWlTHTIveTyh7Wi5auLze8bdnX8m0GhLzgw6gAAeOjO19PVtQovU5lJ+cxeUFjNKrmupKRUqbGe6HI1MuFl8+vRgDJZH2XYNzSweA2RayRXsWaL1w7NLFfhjTSynPrlT72w6vi7PwMA8Lw7U4/YKE9jJVEgdxJI4dXu6YpNrrQKNFn03G7UvmJo8ifKg/ni58UaDG4kM5ntqTXo1CwsXkMEA1eTRKrqNrTUdSEvmIgyRwAAjneesFBdKVSmC1fSIFCU7J6uWF2FcqNg/Sm/SjWsXbnhcGumhDOOFY9tBY6dmoWO0chTUdeSGtWV5I6ICgAAnOLmYaHJ5Y/bUYVld+xGpdzwiXr799EiVKydL5VRpGjxumHezp1cK0681JOjVmMcjNx2QaZmprxINDmyuBEAALRuGBYqpcNQyua6qP3O07+rqHQVDtOt1xFuEKy/DhgEmu4oPFw/bNqpWSgUDp2NosjNC0UyJtLogHoFAACw2+lhocnlO2NVWVtnoEnQvkZYPv27keZZpbGzHRi2ra/KuPYaYvlZ+78P7aJMhxQ9Uq8AAMDNnBQWmtyXMwzlltfrHwwGgSJTKonHq4LEQTBdBAZbzYG0XGnRWF5DmOlyRMJVZKb9UzPdkQZrS0e3C0UVi1oI+z1cYy0FAACuHb3OQpU6GseJSjPteXXQdvpdg2AqM8nlD4dy6nL/9Mfjb0jOuF2UwcsuV68fjtUNBt1pk7bAwPRKAMDzwDFmo3cHAADo4NEYAABYERYAAIAVYQEAAFgRFgAAgBVhAQAAWBEWAACAFWEBAABYERYAAIAVYQEAAFgRFgAAgBVhAQAAWBEWAACAFWEBAABYERYAAIAVYQEAAFgRFgAAgBVhAQAAWBEWAACAFWEBAABYERYAAIAVYQEAAFgRFgAAgBVhAQAAWBEWAACA1Yt3fQMPweO33r3R+V/+FJkNAPDseiZ7qSp1lFZ3fRcAAEA6JSxUqRzHOenj542kSunmvo1k4F5kqsY7AsONr99qcn/ruos9yn3CCgAAS8eHBTeSMaUSJSqNkTFGpkykzvd55klJ2e4zRmUiJaXRNBgsGvGUza/3eZrJ73bsw1CFpHi80eH7uZqzXN9moOCyDSvdcHGKL3/qhbUPAAD30Yk9mKuLrNLYSbXvAbxKHY3jRKNRX8dbaRYniqJIU2NkzFxtP29WHf3aZxpocNbrLzR5b1gpwuFaWGG0AQDwPDr5cXcQTFUmsVLb03eVahwnKk2kYLD9VN/kqeJkIvcWr1+lbcc/DAspHrchYCZ1Rya2P6WSE+4RAICH4EazIdzIaCpp5+O9G8mYXWc3muVSdnlKVDj9+m5kZKK2ZmFYRzLR4vrB4q5yX090qWkwWDsm2v2LrLG9bujuu+kMCgAAbstpIwubRYbjWFKssbP91L6rwFCqVReF6lob23pqFTbPPcv1t34ppY6jYR4omrRbBsFUpca8ggAAPNduUHVnG7bv/6wXGLqKykTxeLPu4Lr40XTqGM5/fa0ChZ+m8p2xVLZ1EW7nlYkbGZl5pmrs64b1jgAA3Et3uyiTe6HMG2pWRXJdSU2tSq4mh0xaOFFb8Lj4kpSr1xCVYo3HjuJdJyalpk/xvgAAeFadPrLgjTS68eUHGrlSVS8e2etaxaHtnnh9N+pMr+zZbkw7kuBtjlxEh9VWPH7r3dXnmH0AADyr7njyf6O6ktzRYqbCLJbckfoe4JfHAACA23VSWKhmsbxg0tupH6q+8uU4Q4XKdOFKanKlsafsYvMJvi16PPf1AQDAYU6oWViMBtywsGB0MZWJrtvMn4Qq+uoCmlqVPAWj62PPcf3bwOsGAMBDcML/hrhSWCSanL48woZGud+OMMyXxYbp+mqKyi61mshww+s3ub+aXplMXPX+r4phqKIzFXPX/7AAAOB54Bhz4GpDC1XqaDYxOrDer68FpU6q0XyqYLCYnVBlmq+Wcn7a1z8//kU1AOAhOzosAACA5wuPtAAAwIqwAAAArAgLAADAirAAAACsCAsAAMCKsAAAAKwICwAAwIqwAAAArAgLAADAirAAAACsCAsAAMCKsAAAAKwICwAAwIqwAAAArAgLAADAirAAAACsCAsAAMCKsAAAAKwICwAAwOr/A/VOt3PIAJmZAAAAAElFTkSuQmCC" alt=""></p><h3 id="background-attachment-èƒŒæ™¯å›ºå®š">background-attachment èƒŒæ™¯å›ºå®š</h3><table><thead><tr><th style="text-align:left">å±æ€§å€¼</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">scroll</td><td style="text-align:left">é»˜è®¤å€¼ã€‚èƒŒæ™¯å›¾ç‰‡éšç€é¡µé¢çš„æ»šåŠ¨è€Œæ»šåŠ¨ï¼Œç›¸å¯¹äºå…ƒç´ æœ¬èº«å›ºå®šï¼Œè€Œä¸æ˜¯éšç€å®ƒçš„å†…å®¹æ»šåŠ¨</td></tr><tr><td style="text-align:left">fixed</td><td style="text-align:left">æ­¤å…³é”®å±æ€§å€¼è¡¨ç¤ºèƒŒæ™¯ç›¸å¯¹äºè§†å£å›ºå®šã€‚å³ä½¿ä¸€ä¸ªå…ƒç´ æ‹¥æœ‰æ»šåŠ¨æœºåˆ¶ï¼ŒèƒŒæ™¯ä¹Ÿä¸ä¼šéšç€å…ƒç´ çš„å†…å®¹æ»šåŠ¨</td></tr><tr><td style="text-align:left">local</td><td style="text-align:left">èƒŒæ™¯ç›¸å¯¹äºå…ƒç´ çš„å†…å®¹å›ºå®šã€‚å¦‚æœä¸€ä¸ªå…ƒç´ æ‹¥æœ‰æ»šåŠ¨æœºåˆ¶ï¼ŒèƒŒæ™¯å°†ä¼šéšç€å…ƒç´ çš„å†…å®¹æ»šåŠ¨ï¼ŒåŒæ—¶èƒŒæ™¯å›¾å›¾ç‰‡éšç€é¡µé¢çš„æ»šåŠ¨è€Œæ»šåŠ¨</td></tr></tbody></table><h3 id="çº¿æ€§æ¸å˜">çº¿æ€§æ¸å˜</h3><blockquote><p><strong>TIP</strong></p><p>ç›’å­çš„ background-image å±æ€§å¯ä»¥ç”¨<code>linear-gradient()</code>å½¢å¼åˆ›å»ºçº¿æ€§æ¸å˜èƒŒæ™¯</p><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(direction, color-stop1, color-stop2, ...);</span><br></pre></td></tr></table></figure></blockquote><table><thead><tr><th style="text-align:left">å€¼</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left"><strong><code>direction</code></strong></td><td style="text-align:left">ç”¨è§’åº¦å€¼æŒ‡å®šæ¸å˜çš„æ–¹å‘ï¼ˆæˆ–è§’åº¦ï¼‰ã€‚ æœªè®¾ç½®è§’åº¦ï¼Œåˆ™é»˜è®¤ä¸º 180degï¼ˆä»ä¸Šåˆ°ä¸‹ï¼‰ è®¾ç½®äº†è§’åº¦ï¼Œåˆ™ 0deg ä¸ºç«–ç›´å‘ä¸Šï¼Œç„¶åé¡ºæ—¶é’ˆæ—‹è½¬ æŒ‡å®šå…³é”®è¯ to rightã€to topã€to bottom ã€to bottom right ç­‰</td></tr><tr><td style="text-align:left"><strong><code>color-stop1, color-stop2,...</code></strong></td><td style="text-align:left">ç”¨äºæŒ‡å®šæ¸å˜çš„èµ·æ­¢é¢œè‰²ã€‚</td></tr></tbody></table><h3 id="å¾„å‘æ¸å˜">å¾„å‘æ¸å˜</h3><blockquote><p><strong>TIP</strong></p><ul><li>ç›’å­çš„ background-image å±æ€§å¯ä»¥ç”¨ radial-gradient() å½¢å¼åˆ›å»ºå¾„å‘æ¸å˜èƒŒæ™¯å›¾</li><li>å¾„å‘æ¸å˜ (Radial gradients) ç”±å…¶**ä¸­å¿ƒç‚¹*ã€*è¾¹ç¼˜å½¢çŠ¶è½®å»“ã€ä¸¤ä¸ªæˆ–å¤šä¸ªè‰²å€¼ç»“æŸç‚¹ï¼ˆcolor stopsï¼‰**å®šä¹‰è€Œæˆã€‚</li></ul><p><strong>è¯­æ³•</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">background-image</span>: <span class="built_in">radial-gradient</span>(</span><br><span class="line"> shape size at position,</span><br><span class="line"> start-color,</span><br><span class="line"> ...,</span><br><span class="line"> last-color</span><br><span class="line">);</span><br></pre></td></tr></table></figure></blockquote><table><thead><tr><th style="text-align:left">å€¼</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">shape</td><td style="text-align:left"><strong>ç¡®å®šåœ†çš„ç±»å‹</strong> ellipse (é»˜è®¤)ï¼šæŒ‡å®šæ¤­åœ†å½¢çš„å¾„å‘æ¸å˜ circle ï¼šæŒ‡å®šåœ†å½¢çš„å¾„å‘æ¸å˜</td></tr><tr><td style="text-align:left">size</td><td style="text-align:left"><strong>å®šä¹‰æ¸å˜çš„å¤§å°</strong> ï¼Œå¯èƒ½å€¼ï¼š farthest-corner (é»˜è®¤) : æŒ‡å®šå¾„å‘æ¸å˜çš„åŠå¾„é•¿åº¦ä¸ºä»åœ†å¿ƒåˆ°ç¦»åœ†å¿ƒæœ€è¿œçš„è§’ closest-side ï¼šæŒ‡å®šå¾„å‘æ¸å˜çš„åŠå¾„é•¿åº¦ä¸ºä»åœ†å¿ƒåˆ°ç¦»åœ†å¿ƒæœ€è¿‘çš„è¾¹ closest-corner ï¼š æŒ‡å®šå¾„å‘æ¸å˜çš„åŠå¾„é•¿åº¦ä¸ºä»åœ†å¿ƒåˆ°ç¦»åœ†å¿ƒæœ€è¿‘çš„è§’ farthest-side ï¼šæŒ‡å®šå¾„å‘æ¸å˜çš„åŠå¾„é•¿åº¦ä¸ºä»åœ†å¿ƒåˆ°ç¦»åœ†å¿ƒæœ€è¿œçš„è¾¹</td></tr><tr><td style="text-align:left">position</td><td style="text-align:left"><strong>å®šä¹‰æ¸å˜çš„ä½ç½®</strong> å¯èƒ½å€¼ï¼š<strong>center</strong>ï¼ˆé»˜è®¤ï¼‰ï¼šè®¾ç½®ä¸­é—´ä¸ºå¾„å‘æ¸å˜åœ†å¿ƒçš„çºµåæ ‡å€¼ã€‚<strong>top</strong>ï¼šè®¾ç½®é¡¶éƒ¨ä¸ºå¾„å‘æ¸å˜åœ†å¿ƒçš„çºµåæ ‡å€¼ã€‚<strong>bottom</strong>ï¼šè®¾ç½®åº•éƒ¨ä¸ºå¾„å‘æ¸å˜åœ†å¿ƒçš„çºµåæ ‡å€¼ã€‚</td></tr><tr><td style="text-align:left">start-color, â€¦, last-color</td><td style="text-align:left">ç”¨äºæŒ‡å®šæ¸å˜çš„èµ·æ­¢é¢œè‰²</td></tr></tbody></table><p><strong>æŒ‡å®šä¸åŒå°ºå¯¸çš„å¤§å°size</strong></p><table><thead><tr><th style="text-align:left">å€¼</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">farthest-corner</td><td style="text-align:left">(é»˜è®¤) : æ¸å˜çš„è¾¹ç¼˜å½¢çŠ¶ä¸å®¹å™¨è·ç¦»æ¸å˜ä¸­å¿ƒç‚¹æœ€è¿œçš„ä¸€ä¸ªè§’ç›¸äº¤ã€‚</td></tr><tr><td style="text-align:left">closest-side</td><td style="text-align:left">ï¼ˆåœ†å½¢ï¼‰æ¸å˜çš„è¾¹ç¼˜å½¢çŠ¶ä¸å®¹å™¨è·ç¦»æ¸å˜ä¸­å¿ƒç‚¹æœ€è¿‘çš„ä¸€è¾¹ç›¸åˆ‡ ï¼ˆæ¤­åœ†ï¼‰è·ç¦»æ¸å˜ä¸­å¿ƒç‚¹æœ€è¿‘çš„å‚ç›´å’Œæ°´å¹³è¾¹ç›¸åˆ‡ã€‚</td></tr><tr><td style="text-align:left">closest-corner</td><td style="text-align:left">æ¸å˜çš„è¾¹ç¼˜å½¢çŠ¶ä¸å®¹å™¨è·ç¦»æ¸å˜ä¸­å¿ƒç‚¹æœ€è¿‘çš„ä¸€ä¸ªè§’ç›¸äº¤(æ°´å¹³ä¸å‚ç›´è¾¹ç›¸äº¤)ã€‚</td></tr><tr><td style="text-align:left">farthest-side</td><td style="text-align:left">ä¸ closest-side ç›¸åï¼Œè¾¹ç¼˜å½¢çŠ¶ä¸å®¹å™¨è·ç¦»æ¸å˜ä¸­å¿ƒç‚¹æœ€è¿œçš„ä¸€è¾¹ç›¸åˆ‡ï¼ˆæˆ–æœ€è¿œçš„å‚ç›´å’Œæ°´å¹³è¾¹ï¼‰ã€‚</td></tr></tbody></table><p><strong>ä½¿ç”¨å¾„å‘æ¸å˜å®ç°å½©è™¹æ•ˆæœ</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">  <span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.container</span> <span class="selector-class">.layer</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">600px</span>;</span><br><span class="line">    <span class="comment">/* </span></span><br><span class="line"><span class="comment">      å¾„å‘æ¸å˜ </span></span><br><span class="line"><span class="comment">     50% 50% è¡¨ç¤ºçš„æ˜¯åœ†çš„å¤§å°</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">radial-gradient</span>(</span><br><span class="line">      <span class="number">50%</span> <span class="number">50%</span>,</span><br><span class="line">      white <span class="number">40%</span>,</span><br><span class="line">      pink <span class="number">50%</span>,</span><br><span class="line">      pink <span class="number">55%</span>,</span><br><span class="line">      red <span class="number">60%</span>,</span><br><span class="line">      red <span class="number">65%</span>,</span><br><span class="line">      orange <span class="number">70%</span>,</span><br><span class="line">      orange <span class="number">75%</span>,</span><br><span class="line">      skyblue <span class="number">80%</span>,</span><br><span class="line">      skyblue <span class="number">85%</span>,</span><br><span class="line">      yellow <span class="number">90%</span>,</span><br><span class="line">      yellow <span class="number">95%</span>,</span><br><span class="line">      white <span class="number">95%</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">  &lt;<span class="selector-tag">div</span> class=&quot;container&quot;&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span> class=&quot;layer&quot;&gt;&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">  &lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="https://www.arryblog.com/assets/img/image-20211202233912610.e5e71482.png" alt=""></p><h3 id="CSSé€‰æ‹©å™¨ä¼˜å…ˆçº§">CSSé€‰æ‹©å™¨ä¼˜å…ˆçº§</h3><table><thead><tr><th style="text-align:left">é€‰æ‹©å™¨çš„ç±»å‹</th><th style="text-align:left">å®ä¾‹</th><th style="text-align:left">é€‰æ‹©å™¨æƒé‡</th><th style="text-align:left">ç­‰çº§</th></tr></thead><tbody><tr><td style="text-align:left">!important</td><td style="text-align:left">div{ color:red!important; }</td><td style="text-align:left">æ— ç©·å¤§</td><td style="text-align:left">ç‰¹çº§</td></tr><tr><td style="text-align:left">è¡Œå†…æ ·å¼ï¼ˆstyle å±æ€§ä¸­æ ·å¼ï¼‰</td><td style="text-align:left">style=â€˜color:red;â€™</td><td style="text-align:left">1000</td><td style="text-align:left">ç¬¬ä¸€ç­‰çº§</td></tr><tr><td style="text-align:left">id é€‰æ‹©å™¨</td><td style="text-align:left">#id</td><td style="text-align:left">0100</td><td style="text-align:left">ç¬¬äºŒç­‰çº§</td></tr><tr><td style="text-align:left">classã€ä¼ªç±»ã€å±æ€§é€‰æ‹©å™¨</td><td style="text-align:left">.boxã€:hoverã€[type=â€˜textâ€™]</td><td style="text-align:left">0010</td><td style="text-align:left">ç¬¬ä¸‰ç­‰çº§</td></tr><tr><td style="text-align:left">æ ‡ç­¾é€‰æ‹©å™¨ã€ä¼ªå…ƒç´ é€‰æ‹©å™¨</td><td style="text-align:left">divã€::afterã€::before</td><td style="text-align:left">0001</td><td style="text-align:left">ç¬¬å››ç­‰çº§</td></tr><tr><td style="text-align:left">é€šé…ç¬¦ã€å­é€‰æ‹©å™¨ã€ç›¸é‚»é€‰æ‹©å™¨ç­‰</td><td style="text-align:left">*ã€&gt; ã€+ã€~</td><td style="text-align:left">0000</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">ç»§æ‰¿çš„æ ·å¼</td><td style="text-align:left"></td><td style="text-align:left">0000</td><td style="text-align:left"></td></tr></tbody></table><blockquote><p><strong>TIP</strong></p><p>é¦–å…ˆè¦æ‰¾åˆ°ï¼Œæœ‰å“ªäº›é€‰æ‹©å™¨åœ¨æ§åˆ¶æ ‡ç­¾å…ƒç´ çš„æ ·å¼ï¼Œç„¶åæŒ‰ä»¥ä¸‹ 5 æ­¥æ¥åˆ†æï¼Œæœ€ç»ˆç”Ÿæ•ˆçš„ css å£°æ˜ã€‚</p><ul><li>ç¬¬ä¸€æ­¥ï¼šæ‰¾æœ‰æ²¡æœ‰å¸¦ important å…³é”®è¯çš„ CSS å£°æ˜ï¼Œæœ‰å°±ä¸€å®šä»¥ä»–ä¸ºä¸»ï¼Œæ²¡æœ‰çœ‹ç¬¬äºŒæ­¥</li><li>ç¬¬äºŒæ­¥ï¼šæ‰¾æœ‰æ²¡æœ‰è¡Œå†…æ ·å¼ï¼Œæœ‰åˆ™ä»¥è¡Œå†…æ ·å¼ä¸ºä¸»ï¼Œæ²¡æœ‰çœ‹ç¬¬ä¸‰æ­¥</li><li>ç¬¬ä¸‰æ­¥ï¼šçœ‹é€‰æ‹©å™¨çš„ä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§é«˜çš„ä¸ºä¸»ï¼Œå¦‚æœä¼˜å…ˆçº§ç›¸åŒï¼Œåˆ™çœ‹ç¬¬å››æ­¥</li><li>ç¬¬å››æ­¥ï¼šä¼˜å…ˆçº§ç›¸åŒï¼Œä»¥å†™åœ¨åé¢çš„ä¸ºä¸»ã€‚å¦‚æœæ²¡æœ‰é€‰æ‹©å™¨ä½œç”¨äºå½“å‰æ ‡ç­¾ï¼Œåˆ™çœ‹ç¬¬äº”æ­¥</li><li>ç¬¬äº”æ­¥ï¼šçœ‹æ­¤ CSS å±æ€§æ˜¯å¦å…·æœ‰ç»§æ‰¿æ€§ï¼Œå¦‚æœæœ‰ï¼Œåˆ™ç»§æ‰¿çˆ¶å…ƒç´ çš„æ ·å¼ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ä»¥é»˜è®¤æ ·å¼æ˜¾ç¤ºã€‚</li></ul></blockquote><h3 id="å…ƒç´ æµ®åŠ¨çš„ç‰¹æ€§">å…ƒç´ æµ®åŠ¨çš„ç‰¹æ€§</h3><p>â‘ å…ƒç´ æ·»åŠ æµ®åŠ¨åï¼Œè„±ç¦»æ–‡æ¡£æµ</p><p>â‘¡å­å…ƒç´ åœ¨æ”¾ä¸ä¸‹çš„æƒ…å†µä¸‹ä¼šæ¢è¡Œæ˜¾ç¤º</p><p>â‘¢å­ç›’å­ä¼šæŒ‰é¡ºåºè¿›è¡Œè´´é ï¼Œå¦‚æœæ²¡æœ‰è¶³å¤Ÿç©ºé—´ï¼Œåˆ™ä¼šå¯»æ‰¾åœ¨å‰ä¸€ä¸ªå…„å¼Ÿå…ƒç´ </p><p>â‘£å…ƒç´ æµ®åŠ¨åï¼Œå…·æœ‰è¡Œå†…å—çº§å…ƒç´ ç‰¹æ€§</p><blockquote><p><strong>TIP</strong></p><ul><li>æµ®åŠ¨çš„å…ƒç´ ä¸å†åŒºåˆ†å—çº§å…ƒç´ ã€è¡Œå†…å…ƒç´ ï¼Œå·²ç»è„±ç¦»äº†æ ‡å‡†æ–‡æ¡£æµ</li><li>ä¸€å¾‹èƒ½å¤Ÿè®¾ç½®å®½åº¦å’Œé«˜åº¦ï¼Œå³ä½¿å®ƒæ˜¯ span æ ‡ç­¾ æˆ– a æ ‡ç­¾ ç­‰ç­‰</li></ul></blockquote><p>â‘¤æµ®åŠ¨çš„å…ƒç´ ä¼šé€ æˆçˆ¶å…ƒç´ é«˜åº¦å¡Œé™·</p><blockquote><p><strong>TIP</strong></p><ul><li>å½“ç»™å­å…ƒç´ æ·»åŠ äº†æµ®åŠ¨åï¼Œå­å…ƒç´ ç›¸å½“äºæ¼‚æµ®èµ·æ¥ï¼Œä¸å æ®é¡µé¢ç©ºé—´ã€‚</li><li>è¿™æ ·å°±é€ æˆçˆ¶çº§å…ƒç´ åœ¨æ²¡æœ‰è®¾ç½®é«˜åº¦æ—¶ï¼Œé«˜åº¦å¡Œé™·é—®é¢˜ã€‚ å…·ä½“çœ‹å¦‚ä¸‹æ¡ˆä¾‹ï¼š</li></ul></blockquote><table><thead><tr><th style="text-align:left">item æœªè®¾ç½®æµ®åŠ¨å‰æ•ˆæœ</th><th style="text-align:left">item è®¾ç½®æµ®åŠ¨åæ•ˆæœ</th></tr></thead><tbody><tr><td style="text-align:left"><img src= "/img/loading.gif" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATsAAACnCAIAAADhbWwcAAACMklEQVR4nO3ZMQrCQBBAUVdyJHuvbu+h1jaBpBDF+OG9blJN8xnCjjnnBYi4nr0A8AbFQolioUSxUKJYKFk20xgnrQEc2L7muLFQolgoWfY/P56/XYNvu9/O3oDPHPyiurFQolgoUSyUKBZKFAslioUSxUKJYqFEsVCiWChRLJQoFkoUCyWKhRLFQolioUSxUKJYKFEslCgWShQLJYqFEsVCiWKhRLFQolgoUSyUKBZKFAslioUSxUKJYqFEsVCiWChRLJQoFkoUCyWKhRLFQolioUSxUKJYKFEslCgWShQLJYqFEsVCiWKhRLFQolgoUSyUKBZKFAslioUSxUKJYqFEsVCiWChRLJQoFkoUCyWKhRLFQolioUSxUKJYKFEslCgWShQLJYqFEsVCiWKhRLFQolgoUSyUKBZKFAslioUSxUKJYqFEsVCiWChRLJQoFkoUCyWKhRLFQolioUSxUKJYKFEslCgWShQLJYqFEsVCiWKhRLFQolgoUSyUKBZKFAslioUSxUKJYqFEsVCiWChRLJQoFkoUCyWKhRLFQolioUSxUKJYKFEslCgWShQLJYqFEsVCiWKhRLFQolgoUSyUKBZKFAslioUSxUKJYqFEsVCiWChRLJQoFkoUCyWKhRLFQolioUSxUKJYKFEslCgWShQLJYqFEsVCiWKhRLFQolgoUSyUKBZKFAslY865msZ5mwB71oW6sdCiWChZNtP2/gL/xo2FEsVCiWKhRLFQ8gKlZA9LkeBhSwAAAABJRU5ErkJggg==" alt="image-20220623120931297"></td><td style="text-align:left"><img src= "/img/loading.gif" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAT8AAACpCAIAAADSjK0WAAACPElEQVR4nO3bMQ6CQBBAUTFeyd6ja613WjsKDQ0RyDfvlVtN8zObDUxjjBMQdD56AGAl9UKVeqFKvVClXqhSL1SpF6rUC1WXz4NpOmIMYNnCJ1V2L1SpF6q+bs6z+3PHMdjA7Xr0BGzL7oUq9ULV1815ft16vHYehR/z7+e/s3uhSr1QpV6oUi9UqReq1AtV6oUq9UKVeqFKvVClXqhSL1SpF6rUC1XqhSr1QpV6oUq9UKVeqFIvVKkXqtQLVeqFKvVClXqhSr1QpV6oUi9UqReq1AtV6oUq9UKVeqFKvVClXqhSL1SpF6rUC1XqhSr1QpV6oUq9UKVeqFIvVKkXqtQLVeqFKvVClXqhSr1QpV6oUi9UqReq1AtV6oUq9UKVeqFKvVClXqhSL1SpF6rUC1XqhSr1QpV6oUq9UKVeqFIvVKkXqtQLVeqFKvVClXqhSr1QpV6oUi9UqReq1AtV6oUq9UKVeqFKvVClXqhSL1SpF6rUC1XqhSr1QpV6oUq9UKVeqFIvVKkXqtQLVeqFKvVClXqhSr1QpV6oUi9UqReq1AtV6oUq9UKVeqFKvVClXqhSL1SpF6rUC1XqhSr1QpV6oUq9UKVeqFIvVKkXqtQLVeqFKvVClXqhSr1QpV6oUi9UqReq1AtV6oUq9UKVeqFKvVClXqhSL1SpF6rUC1XqhSr1QpV6oUq9UKVeqFIvVKkXqtQLVeqFKvVClXqhSr1QNY0xjp4BWMPuhSr1QpV6oUq9UKVeqFIvVL0BtxUQ2uh16WkAAAAASUVORK5CYII=" alt="image-20220623120955518">&quot;</td></tr></tbody></table><p>â‘¥æµ®åŠ¨å¯¹æ–‡å­—çš„å½±å“</p><blockquote><p><strong>TIP</strong></p><ul><li>å¸¸è§çš„å›¾ç‰‡æ–‡å­—ç¯ç»•æ•ˆæœï¼Œå…¶å®ç°æ–¹å¼ä¸»è¦æ˜¯å°†å›¾ç‰‡å·¦æµ®åŠ¨æˆ–å³æµ®åŠ¨</li><li>æµ®åŠ¨åå…¶ç›¸é‚»çš„æ–‡å­—ï¼Œå°±ä¼šç¯ç»•å›¾ç‰‡æ’åˆ—</li></ul></blockquote><p>â‘¦ä½¿ç”¨æµ®åŠ¨å®ç°ç½‘é¡µå¸ƒå±€</p><blockquote><p><strong>TIP</strong></p><ul><li>å‚ç›´æ˜¾ç¤ºçš„ç›’å­ï¼Œä¸è¦è®¾ç½®æµ®åŠ¨ï¼Œåªæœ‰å¹¶æ’æ˜¾ç¤ºçš„ç›’å­æ‰è¦è®¾ç½®æµ®åŠ¨</li><li>æ¯ä¸€ä¸ªç›’å­éƒ½æ˜¯ç‹¬ç«‹å­˜åœ¨ï¼Œæ¯ä¸ªç›’å­ä¸­åˆæ˜¯ä¸€ä¸ªå°å¤©åœ°ï¼Œå†…éƒ¨å¯ä»¥ç»§ç»­ä½¿ç”¨æµ®åŠ¨</li></ul></blockquote><h3 id="BFCè§„èŒƒ-å’Œ-æµè§ˆå™¨å·®å¼‚">BFCè§„èŒƒ å’Œ æµè§ˆå™¨å·®å¼‚</h3><blockquote><p><strong>TIP</strong></p><ul><li>BFC ï¼ˆBox Formatting Context ï¼Œå—çº§æ ¼å¼ä¸Šä¸‹æ–‡ï¼‰æ˜¯é¡µé¢ä¸Šçš„ä¸€ä¸ªéš”ç¦»çš„ç‹¬ç«‹å®¹å™¨</li><li>å®¹å™¨é‡Œçš„å­å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–é¢çš„å…ƒç´ ï¼Œåä¹‹äº¦ç„¶</li></ul><p>å¦‚ï¼šä¸€ä¸ªç›’å­ä¸è®¾ç½® heightï¼Œå½“å†…å®¹å­å…ƒç´ éƒ½æµ®åŠ¨æ—¶ï¼Œæ— æ³•æ’‘èµ·è‡ªèº«</p><p><strong>åŸå› æ˜¯ï¼šè¿™ä¸ªç›’å­æ²¡æœ‰å½¢æˆ BFC</strong></p></blockquote><p>â‘ åˆ›å»ºBFC</p><blockquote><p><strong>TIP</strong></p><ul><li>æ–¹æ³• 1ï¼šfloat çš„å€¼ä¸æ˜¯ none</li><li>æ–¹æ³• 2ï¼šposition çš„å€¼ä¸æ˜¯ static æˆ–è€… relative</li><li>æ–¹æ³• 3ï¼šdisplay çš„å€¼æ˜¯ inline-blockã€flex æˆ– inline-flex</li><li>æ–¹æ³• 4ï¼š<code>overflowï¼šhidden;</code></li></ul></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>åˆ›å»ºBFC - arryè€å¸ˆ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.box</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">5px</span> solid red;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/* </span></span></span><br><span class="line"><span class="comment"><span class="language-css">            æ–¹æ³•1ï¼šfloatçš„å€¼ä¸æ˜¯none </span></span></span><br><span class="line"><span class="comment"><span class="language-css">            è¯¥æ–¹æ³•å¯ä»¥å®ç°æ•ˆæœï¼Œä½†æ²¡æœ‰æ„ä¹‰ï¼Œä¸å¯èƒ½éšæ„ç»™ç›’å­è®¾ç½®æµ®åŠ¨</span></span></span><br><span class="line"><span class="comment"><span class="language-css">        */</span></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* float: left; */</span></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* </span></span></span><br><span class="line"><span class="comment"><span class="language-css">            æ–¹æ³•2ï¼špositionçš„å€¼ä¸æ˜¯staticæˆ–è€…relative </span></span></span><br><span class="line"><span class="comment"><span class="language-css">            è¯¥æ–¹æ³•å¯ä»¥å®ç°æ•ˆæœï¼Œä½†ä¸é è°±</span></span></span><br><span class="line"><span class="comment"><span class="language-css">        */</span></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* position: absolute; */</span></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* </span></span></span><br><span class="line"><span class="comment"><span class="language-css">            æ–¹æ³•3ï¼šdisplayçš„å€¼æ˜¯ inline-blockã€flex æˆ– inline-flex </span></span></span><br><span class="line"><span class="comment"><span class="language-css">            è¯¥æ–¹æ³•å¯ä»¥å®ç°æ•ˆæœï¼Œä½†ï¼Œæ²¡æœ‰æ„ä¹‰ï¼Œå¯èƒ½éšä¾¿æ”¹å˜ç›’å­çš„ä¸ºè¡Œå†…å—ï¼Œè·å–å…¶ä»–çš„</span></span></span><br><span class="line"><span class="comment"><span class="language-css">        */</span></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* display: inline-block; */</span></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* display: flex; */</span></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* display: inline-flex; */</span></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* </span></span></span><br><span class="line"><span class="comment"><span class="language-css">            æ–¹æ³•4ï¼šoverflowï¼šhiddenï¼›</span></span></span><br><span class="line"><span class="comment"><span class="language-css">            è¯¥æ–¹æ³•å¯ä»¥å®ç°æ•ˆæœï¼Œä½†æ˜¯ï¼Œä¸èƒ½æ»¡è¶³æ‰€æœ‰çš„åœºæ™¯</span></span></span><br><span class="line"><span class="comment"><span class="language-css">        */</span></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* overflow: hidden; */</span></span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.box</span> <span class="selector-class">.c1</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: orange;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.box</span> <span class="selector-class">.c2</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: skyblue;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>åˆ›å»ºBFC<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">      BFC ï¼ˆBox Formatting Context</span><br><span class="line">      ï¼Œå—çº§æ ¼å¼ä¸Šä¸‹æ–‡ï¼‰æ˜¯é¡µé¢ä¸Šçš„ä¸€ä¸ªéš”ç¦»çš„ç‹¬ç«‹å®¹å™¨</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;c1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;c2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>æº¢å‡ºéšè—ï¼šoverflowï¼šhidden;</strong></p><ul><li>æº¢å‡ºç›’å­è¾¹æ¡†çš„å†…å®¹å°†ä¼šè¢«éšè—</li><li>overflowï¼šhiddenï¼›æ˜¯éå¸¸å¥½ç”¨çš„è®©ç›’å­å½¢æˆ BFC çš„æ–¹æ³•</li></ul></blockquote><p>â‘¡BFCçš„å…¶ä»–ä½œç”¨</p><blockquote><p><strong>TIP</strong></p><ul><li>BFC å¯ä»¥å–æ¶ˆç›’å­ margin å¡Œé™·</li><li>BFC å¯ä»¥é˜»æ­¢å…ƒç´ è¢«æµ®åŠ¨å…ƒç´ è¦†ç›–</li></ul></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: orange;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* å‚ç›´æ–¹å‘ä¸Šä¸‹marginä¼šé‡åˆ è·ç¦»ä¾ç„¶æ˜¯ï¼š50 */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="comment">/* </span></span></span><br><span class="line"><span class="comment"><span class="language-css">    BFCä½œç”¨ä¸€ï¼šå¯ä»¥å–æ¶ˆç›’å­marginå¡Œé™·</span></span></span><br><span class="line"><span class="comment"><span class="language-css">    æ·»åŠ overflowï¼šhidden; åˆ›å»ºBFC</span></span></span><br><span class="line"><span class="comment"><span class="language-css">  */</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="comment">/* </span></span></span><br><span class="line"><span class="comment"><span class="language-css">    BFCä½œç”¨äºŒï¼šå¯ä»¥é˜»æ­¢å…ƒç´ è¢«æµ®åŠ¨å…ƒç´ è¦†ç›–</span></span></span><br><span class="line"><span class="comment"><span class="language-css">    æ²¡æœ‰å®é™…æ„ä¹‰ï¼Œå®é™…å¼€å‘ä¸ä¼šè¿™ä¹ˆç”¨ï¼Œåªå…·æœ‰ç†è®ºæ„ä¹‰ï¼Œè¦æ˜ç™½</span></span></span><br><span class="line"><span class="comment"><span class="language-css">    éœ€è¦å¹¶æ’æ˜¾ç¤ºçš„ç›’å­ï¼Œè¦ä¹ˆéƒ½æµ®åŠ¨ï¼Œè¦ä¹ˆéƒ½ä¸å†™ï¼Œä»¥ä¸‹çš„å†™æ³•æ˜¯ä¸åˆæ³•è§„èŒƒçš„</span></span></span><br><span class="line"><span class="comment"><span class="language-css">  */</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.box1</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: skyblue;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.box2</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: tomato;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* float: left; */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="æµè§ˆå™¨å·®å¼‚">æµè§ˆå™¨å·®å¼‚</h3><blockquote><p><strong>TIP</strong></p><ul><li>IE6ã€7 æµè§ˆå™¨ä½¿ç”¨ haslayout æœºåˆ¶ å’Œ BFC è§„èŒƒç•¥æœ‰å·®å¼‚</li><li>æ¯”å¦‚ï¼šIE æµè§ˆå™¨å¯ä»¥ä½¿ç”¨ zoom:1 å±æ€§ï¼Œè®©ç›’å­æ‹¥æœ‰ layout</li><li>å¦‚æœè¦åˆ¶ä½œå…¼å®¹åˆ° IE6ã€7 çš„ç½‘é¡µæ—¶ï¼Œå°½é‡è®©ç½‘é¡µå¸ƒå±€å˜å¾—ç®€å•ï¼Œå†…éƒ¨æœ‰æµ®åŠ¨çš„ç›’å­è¦è®¾ç½® height å±æ€§ï¼Œè§„èŒƒç¼–ç¨‹ï¼Œå°±æ²¡æœ‰é—®é¢˜</li></ul></blockquote><h3 id="æ¸…é™¤æµ®åŠ¨">æ¸…é™¤æµ®åŠ¨</h3><blockquote><p>TIP</p><p>æ¸…é™¤æµ®åŠ¨ï¼šæµ®åŠ¨ä¸€å®šè¦å°é—­åˆ°ä¸€ä¸ªç›’å­ä¸­ï¼Œå¦åˆ™å°±ä¼šå¯¹é¡µé¢åç»­å…ƒç´ äº§ç”Ÿå½±å“</p></blockquote><p><strong>æ¸…é™¤æµ®åŠ¨æ–¹æ³• 1</strong></p><blockquote><p><strong>TIP</strong></p><ul><li>è®©å†…éƒ¨æœ‰æµ®åŠ¨çš„çˆ¶ç›’å­å½¢æˆ BFCï¼Œå®ƒå°±èƒ½å…³é—­ä½å†…éƒ¨çš„æµ®åŠ¨ã€‚</li><li>æ­¤æ—¶ï¼Œæœ€å¥½çš„æ–¹æ³•å°±æ˜¯ <code>overflow: hidden;</code> å±æ€§</li></ul></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  * &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* </span></span></span><br><span class="line"><span class="comment"><span class="language-css">        æ¸…é™¤æµ®åŠ¨æ–¹æ³•1ï¼š</span></span></span><br><span class="line"><span class="comment"><span class="language-css">        è®©å†…éƒ¨æœ‰æµ®åŠ¨çš„çˆ¶ç›’å­å½¢æˆBFCï¼Œå®ƒå°±èƒ½å…³é—­ä½å†…éƒ¨çš„æµ®åŠ¨</span></span></span><br><span class="line"><span class="comment"><span class="language-css">        æ­¤æ—¶ï¼Œæœ€å¥½çš„æ–¹æ³•å°±æ˜¯ overflow: hidden; å±æ€§</span></span></span><br><span class="line"><span class="comment"><span class="language-css">      */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: orange;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>æ¸…é™¤æµ®åŠ¨æ–¹æ³• 2</strong></p><ul><li>ç»™åé¢çš„çˆ¶ç›’å­è®¾ç½® <code>clear: both;</code> å±æ€§</li><li><code>clear</code> è¡¨ç¤ºæ¸…é™¤æµ®åŠ¨å¯¹è‡ªå·±çš„å½±å“ï¼Œ<code>both</code> è¡¨ç¤ºå·¦å³æµ®åŠ¨éƒ½æ¸…é™¤</li></ul><p>è¯¥æ–¹æ³•ä¸æ¨è</p><p><strong>æ¸…é™¤æµ®åŠ¨æ–¹æ³• 3</strong></p><ul><li>ä½¿ç”¨ <code>::after</code>ä¼ªå…ƒç´  ç»™ç›’å­æ·»åŠ æœ€åä¸€ä¸ªå­å…ƒç´ </li><li>å¹¶ä¸”ç»™ <code>::after</code> è®¾ç½® <code>clear:both;</code></li></ul><p><strong>å¼ºçƒˆæ¨èä½¿ç”¨ï¼Œæœ€ä½³å®è·µï¼ˆå¤§å‚éƒ½è¿™ä¹ˆç”¨ï¼‰</strong></p><p><img src= "/img/loading.gif" data-lazy-src="https://www.arryblog.com/assets/img/image-20211129230743346.ebc18298.png" alt=""></p><p><strong>æ¸…é™¤æµ®åŠ¨æ–¹æ³• 4</strong></p><ul><li>åœ¨ä¸¤ä¸ªçˆ¶ç›’å­ä¹‹é—´ â€œéš”å¢™â€ éš”ä¸€ä¸ªæºå¸¦ <code>clear: both;</code>çš„ç›’å­</li></ul><p><strong>ä¸æ¨è</strong></p><p><img src= "/img/loading.gif" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAzQAAADyCAYAAACbK4BDAAAF1klEQVR4nO3dQW7TUBRA0W/kndA9RSKbiBfVrgq6FTNADYIi4YaqP1ecM/oDD570RlffiZd93/cBAAAQsm3bOJ1O49PsQQAAAG4laAAAgKz167fn2TMAAADcZH14+Dx7BgAAgLe5XMYYXjkDAADC1uvpceIUvHY++Jy93ZejewMA4F24oQEAALLW8fIZmqdl7iT86ujngeztvvisEwDAx9i2MYYbGgAAIEzQAAAAWYIGAADIEjQAAECWoAEAALIEDQAAkCVoAACALEEDAABkCRoAACBL0AAAAFmCBgAAyBI0AABAlqABAACyBA0AAJAlaAAAgCxBAwAAZAkaAAAgS9AAAABZggYAAMgSNAAAQJagAQAAsgQNAACQJWgAAIAsQQMAAGQJGgAAIEvQAAAAWYIGAADIEjQAAECWoAEAALIEDQAAkCVoAACALEEDAABkCRoAACBL0AAAAFmCBgAAyBI0AABAlqABAACyBA0AAJAlaAAAgCxBAwAAZAkaAAAgS9AAAABZggYAAMgSNAAAQJagAQAAsgQNAACQJWgAAIAsQQMAAGQJGgAAIEvQAAAAWYIGAADIEjQAAECWoAEAALIEDQAAkCVoAACALEEDAABkCRoAACBL0AAAAFmCBgAAyBI0AABAlqABAACyBA0AAJAlaAAAgCxBAwAAZAkaAAAgS9AAAABZggYAAMgSNAAAQJagAQAAsgQNAACQJWgAAIAsQQMAAGQJGgAAIEvQAAAAWYIGAADIEjQAAECWoAEAALIEDQAAkCVoAACALEEDAABkCRoAACBL0AAAAFmCBgAAyBI0AABAlqABAACyBA0AAJAlaAAAgCxBAwAAZAkaAAAgS9AAAABZggYAAMgSNAAAQJagAQAAsgQNAACQJWgAAIAsQQMAAGQJGgAAIGsdyzJ7Bv7kbC9J9gYA8DEulzGGGxoAACBsvZ72feIYAAAAB/z2hpkbGgAAIEvQAAAAWYIGAADIEjQAAECWoAEAALIEDQAAkCVoAACALEEDAABkCRoAACBL0AAAAFmCBgAAyBI0AABAlqABAACyBA0AAJAlaAAAgCxBAwAAZAkaAAAgS9AAAABZggYAAMhar6dlmTgGAADA27mhAQAAsgQNAACQJWgAAICsn7+heZw4Ba+dDz5nb/fl6N4AAHgXbmgAAICsdez7j9OTfzm7Ky97+Rt7uy9H9wYAwL/ZtjGGGxoAACBM0AAAAFmCBgAAyBI0AABAlqABAACyBA0AAJAlaAAAgCxBAwAAZAkaAAAgS9AAAABZggYAAMgSNAAAQJagAQAAsgQNAACQJWgAAIAsQQMAAGQJGgAAIEvQAAAAWYIGAADIEjQAAECWoAEAALIEDQAAkCVoAACALEEDAABkCRoAACBL0AAAAFmCBgAAyBI0AABAlqABAACyBA0AAJAlaAAAgCxBAwAAZAkaAAAgS9AAAABZggYAAMgSNAAAQJagAQAAsgQNAACQJWgAAIAsQQMAAGQJGgAAIEvQAAAAWYIGAADIEjQAAECWoAEAALIEDQAAkCVoAACALEEDAABkCRoAACBL0AAAAFmCBgAAyBI0AABAlqABAACyBA0AAJAlaAAAgCxBAwAAZAkaAAAgS9AAAABZggYAAMgSNAAAQJagAQAAsgQNAACQJWgAAIAsQQMAAGQJGgAAIEvQAAAAWYIGAADIEjQAAECWoAEAALIEDQAAkCVoAACALEEDAABkCRoAACBL0AAAAFmCBgAAyBI0AABAlqABAACyBA0AAJAlaAAAgCxBAwAAZAkaAAAgS9AAAABZggYAAMgSNAAAQJagAQAAsgQNAACQJWgAAIAsQQMAAGQJGgAAIEvQAAAAWYIGAADIEjQAAECWoAEAALIEDQAAkCVoAACALEEDAABkCRoAACBrvZ6+7BPH4Gb2BgDAf8wNDQAAkCVoAACALEEDAABkCRoAACBL0AAAAFmCBgAAyBI0AABAlqABAACyBA0AAJD1HaLtJtCCSnzaAAAAAElFTkSuQmCC" alt="image-20211129231600890"></p><h3 id="å®šä½ç±»å‹å€¼">å®šä½ç±»å‹å€¼</h3><table><thead><tr><th style="text-align:left">å±æ€§å€¼</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">static</td><td style="text-align:left">æ²¡æœ‰å®šä½ï¼Œå…ƒç´ å‡ºç°åœ¨æ­£å¸¸çš„æµä¸­ï¼ˆé»˜è®¤å€¼ï¼Œå¯ä»¥å¿½ç•¥ï¼‰</td></tr><tr><td style="text-align:left">relative</td><td style="text-align:left">ç›¸å¯¹å®šä½ï¼Œç›¸å¯¹äºè‡ªèº«æ­£å¸¸ä½ç½®è¿›è¡Œä½ç½®çš„è°ƒæ•´</td></tr><tr><td style="text-align:left">absolute</td><td style="text-align:left">ç»å¯¹å®šä½ï¼Œç›¸å¯¹äºå…¶æœ€è¿‘çš„å®šä½çš„çˆ¶å…ƒç´ å®šä½ï¼Œè¿›è¡Œä½ç½®è°ƒæ•´</td></tr><tr><td style="text-align:left">fixed</td><td style="text-align:left">å›ºå®šå®šä½ ç›¸å¯¹äºæµè§ˆå™¨çª—å£è¿›è¡Œä½ç½®è°ƒæ•´</td></tr><tr><td style="text-align:left">sticky</td><td style="text-align:left">ç²˜æ€§å®šä½ æ˜¯åŸºäºç”¨æˆ·çš„æ»šåŠ¨ä½ç½®æ¥å®šä½</td></tr></tbody></table><blockquote><p>static ç›¸å½“äºå…ƒç´ æ²¡æœ‰åŠ å®šä½æ•ˆæœï¼Œå¦‚æœå…ƒç´ åŠ äº†å®šä½ï¼Œåé¢éœ€è¦å»æ‰ï¼Œå¯ä»¥æ·»åŠ  <code>position: static;</code></p></blockquote><p><strong>â‘ ç›¸å¯¹å®šä½</strong></p><blockquote><p><strong>TIP</strong></p><ul><li>ç›¸å¯¹å®šä½çš„å…ƒç´ ï¼Œä¼šåœ¨ â€œè€å®¶ç•™å‘â€ ï¼Œæœ¬è´¨ä¸Šä»ç„¶æ˜¯åœ¨åŸæ¥çš„ä½ç½®ï¼Œå³ï¼šå…ƒç´ çš„åˆå§‹ä½ç½®å æ®çš„ç©ºé—´ä¼šè¢«ä¿ç•™</li><li>åªä¸è¿‡æ¸²æŸ“åœ¨æ–°çš„åœ°æ–¹è€Œå·²ï¼Œæ¸²æŸ“çš„å›¾å½¢å¯ä»¥æ¯”å–»æˆå½±å­ï¼Œä¸ä¼šå¯¹é¡µé¢å…¶ä»–å…ƒç´ äº§ç”Ÿä»»ä½•å½±å“</li></ul><p>åº”ç”¨åœºæ™¯ï¼š</p><ul><li>ç”¨æ¥å¾®è°ƒå…ƒç´ è‡ªèº«çš„ä½ç½®</li><li>å¯ä»¥å½“åšç»å¯¹å®šä½çš„å‚è€ƒç›’å­ï¼ˆç»å¯¹å®šä½ä¸­ä¼šè®²åˆ°ï¼‰</li><li>ç”¨æ¥æå‡è‡ªèº«çš„å±‚çº§</li></ul></blockquote><p><strong>â‘¡ç»å¯¹å®šä½</strong></p><blockquote><p>ç›’å­å¯ä»¥åœ¨æµè§ˆå™¨ä¸­ä»¥åæ ‡è¿›è¡Œä½ç½®ç²¾å‡†æè¿°ï¼Œæ‹¥æœ‰è‡ªå·±çš„ç»å¯¹ä½ç½®</p><ul><li>ç»™éœ€è¦æ·»åŠ ç»å¯¹å®šä½çš„å…ƒç´ ï¼ŒåŠ ä¸Š<code>position: absolute;</code></li><li>å…ƒç´ çš„ä½ç½®é€šè¿‡ï¼ˆä½ç½®æè¿°è¯ï¼‰ï¼š<code>&quot;left&quot;</code>, <code>&quot;top&quot;</code>, <code>&quot;right&quot;</code> ,<code>&quot;bottom&quot;</code>å±æ€§è¿›è¡Œè°ƒæ•´ä½ç½®</li><li>å±æ€§å€¼å¯ä»¥æ˜¯æ­£æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯è´Ÿæ•°</li></ul><table><thead><tr><th style="text-align:left">å®šä½çš„ä½ç½®å±æ€§</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">top</td><td style="text-align:left">åˆ°ä¸Šè¾¹çš„è·ç¦»</td></tr><tr><td style="text-align:left">bottom</td><td style="text-align:left">åˆ°ä¸‹è¾¹çš„è·ç¦»</td></tr><tr><td style="text-align:left">left</td><td style="text-align:left">åˆ°å·¦è¾¹çš„è·ç¦»</td></tr><tr><td style="text-align:left">right</td><td style="text-align:left">åˆ°å³è¾¹çš„è·ç¦»</td></tr></tbody></table><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* åœ¨ä¸è®¾ç½®ç›¸å¯¹äºè°å®šä½æ—¶ï¼Œé»˜è®¤ç›¸å¯¹æµè§ˆå™¨çš„ï¼ˆ0,0ï¼‰åæ ‡è¿›è¡Œç»å¯¹å®šä½ */</span></span><br><span class="line"><span class="attribute">position</span>: absolute;</span><br><span class="line"><span class="attribute">top</span>: <span class="number">100px</span>;</span><br><span class="line"><span class="attribute">left</span>: <span class="number">100px</span>;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p><strong>ç»å¯¹å®šä½å…ƒç´  8 å¤§ç‰¹æ€§</strong></p><ul><li>ç»å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹ç¦»è‡ªå·±<strong>æœ€è¿‘</strong>çš„å®šä½çˆ¶å…ƒç´ è¿›è¡Œä½ç½®è°ƒæ•´</li><li>å¦‚æœæ²¡æœ‰å®šä½çš„çˆ¶å…ƒç´ ï¼Œåˆ™ç›¸å¯¹ body è¿›è¡Œä½ç½®è°ƒæ•´</li><li>å…ƒç´ å®Œå…¨è„±ç¦»æ–‡æ¡£æµï¼Œé‡Šæ”¾å…¶åŸæœ¬æ‰€å æ®çš„ç©ºé—´</li><li>å…ƒç´ çš„å±‚çº§æå‡ï¼Œä¼šè¦†ç›–åœ¨å…¶å®ƒå…ƒç´ ä¸Šã€‚</li><li>è¡Œå†…å…ƒç´ åŠ ä¸Šå®šä½åï¼Œå…¶å…·æœ‰è¡Œå†…å—å…ƒç´ ç‰¹æ€§ï¼Œæ”¯æŒå®½é«˜è®¾ç½®</li><li><code>margin: auto;</code> æ°´å¹³å±…ä¸­å¤±æ•ˆ</li><li>å®šä½å…ƒç´ æœªè®¾ç½®å®½é«˜æƒ…å†µä¸‹ï¼ŒåŒæ—¶è®¾ç½® top å’Œ bottom ä¼šæ”¹å˜å…ƒç´ é«˜ï¼ŒåŒæ—¶è®¾ç½® left å’Œ right ä¼šæ”¹å˜å…ƒç´ å®½</li><li>åœ¨å…ƒç´ è°ƒç½®å®½é«˜æƒ…å†µä¸‹ï¼ŒåŒæ—¶è®¾ç½® top ä¸ bottom ,ä¼šä»¥ top å€¼ä¸ºä¸» bottom ä¸ç”Ÿæ•ˆï¼ŒåŒæ—¶è®¾ç½® left ä¸ rightï¼Œåˆ™ä»¥ left ä¸ºä¸»ï¼Œright ä¸ç”Ÿæ•ˆã€‚</li></ul></blockquote><ul><li><strong>ç»å¯¹å®šä½è„±ç¦»æ ‡å‡†çš„æ–‡æ¡£æµ</strong></li></ul><blockquote><p><strong>TIP</strong></p><ul><li>ç»å¯¹å®šä½çš„å…ƒç´ è„±ç¦»æ ‡å‡†æ–‡æ¡£æµï¼Œå°†é‡Šæ”¾è‡ªå·±çš„ä½ç½®ï¼Œå¯¹å…¶ä»–å…ƒç´ ä¸ä¼šäº§ç”Ÿä»»ä½•å¹²æ‰°ï¼Œè€Œæ˜¯å¯¹ä»–ä»¬è¿›è¡Œå‹ç›–</li><li>è„±ç¦»æ ‡å‡†æ–‡æ¡£æµçš„æ–¹æ³•ï¼š<strong>æµ®åŠ¨</strong>ã€<strong>ç»å¯¹å®šä½</strong>ã€<strong>å›ºå®šå®šä½</strong></li><li>ä½¿ç”¨ç»å¯¹å®šä½çš„å…ƒç´ å°†ä¼šæ˜¯ä¸€ç§æ¼‚æµ®çŠ¶æ€</li></ul></blockquote><ul><li><strong>è„±ç¦»æ–‡æ¡£æµï¼Œå±‚çº§æå‡</strong></li></ul><blockquote><p><strong>TIP</strong></p><p>ç»å¯¹å®šä½å…ƒç´ å®Œå…¨è„±ç¦»æ–‡æ¡£æµ,é‡Šæ”¾å…¶åŸæœ¬æ‰€å æ®çš„ç©ºé—´ï¼ŒåŒæ—¶å±‚çº§æå‡ï¼Œä¼šè¦†ç›–åœ¨å…¶å®ƒå…ƒç´ ä¸Šé¢</p></blockquote><ul><li><strong>ç›¸å¯¹äºå…¶æœ€è¿‘çš„å®šä½çš„çˆ¶å…ƒç´ å®šä½</strong></li></ul><blockquote><p><strong>TIP</strong></p><p>çˆ¶å…ƒç´ æœªå®šä½ï¼Œç¥–å…ˆå…ƒç´ å®šä½ï¼Œç»å¯¹å®šä½ç›¸å¯¹äºå®šä½çš„ç¥–å…ˆå…ƒç´ å®šä½</p></blockquote><ul><li><p><strong>çˆ¶å…ƒç´ åŠç¥–å…ˆå…ƒç´ éƒ½æœªå®šä½ï¼Œåˆ™ç›¸å¯¹äº body å®šä½</strong></p></li><li><p><strong>è¡Œå†…å…ƒç´ ç»å¯¹å®šä½åï¼Œå…·æœ‰è¡Œå†…å—å…ƒç´ ç‰¹æ€§</strong></p></li><li><p><strong>margin:0 auto æ°´å¹³å±…ä¸­å¤±æ•ˆ</strong></p></li><li><p><strong>top ä¸ bottom åŠ left ä¸ right åŒæ—¶è®¾ç½®ï¼Œè°ƒèŠ‚å®½é«˜</strong></p></li><li><p><strong>top ä¸ bottom åŠ left ä¸ right çš„ä¼˜å…ˆçº§</strong></p></li></ul><blockquote><p><strong>TIP</strong></p><p>åœ¨å…ƒç´ è®¾ç½®å®½é«˜æƒ…å†µä¸‹ï¼ŒåŒæ—¶è®¾ç½® top ä¸ bottomï¼Œä¼šä»¥ top å€¼ä¸ºä¸» bottom ä¸ç”Ÿæ•ˆï¼ŒåŒæ—¶è®¾ç½® left ä¸ rightï¼Œåˆ™ä»¥ left ä¸ºä¸»ï¼Œright ä¸ç”Ÿæ•ˆã€‚</p></blockquote><ul><li><strong>ç»å¯¹å®šä½çš„ç›’å­å‚ç›´ã€æ°´å¹³å±…ä¸­</strong></li></ul><blockquote><p>TIP</p><ul><li><p>ç»å¯¹å®šä½çš„ç›’å­å‚ç›´å±…ä¸­æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„æŠ€æœ¯</p></li><li><p>å®ç°åŸç†å¦‚ä¸‹</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å‚ç›´å±…ä¸­ */</span></span><br><span class="line"><span class="attribute">position</span>: absolute;</span><br><span class="line"><span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line"><span class="attribute">margin-top</span>: -è‡ªå·±é«˜åº¦ä¸€åŠ;</span><br><span class="line">              </span><br><span class="line"><span class="comment">/* æ°´å¹³å±…ä¸­ */</span></span><br><span class="line"><span class="attribute">position</span>: absolute;</span><br><span class="line"><span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line"><span class="attribute">margin-left</span>: -è‡ªå·±å®½åº¦ä¸€åŠ;</span><br></pre></td></tr></table></figure></li></ul></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://www.arryblog.com/assets/img/image-20220722182031178.58302297.png" alt=""></p><h4 id="ç»å¯¹å®šä½çš„åº”ç”¨åœºæ™¯">ç»å¯¹å®šä½çš„åº”ç”¨åœºæ™¯</h4><blockquote><p><strong>TIP</strong></p><ul><li>ç»å¯¹å®šä½ç”¨æ¥åˆ¶ä½œ <strong>å‹ç›–</strong>ã€<strong>é®ç½©</strong> æ•ˆæœ</li><li>ç»å¯¹å®šä½ç”¨æ¥ç»“åˆ CSS ç²¾çµä½¿ç”¨</li><li>ç»å¯¹å®šä½å¯ä»¥ç»“åˆ JS å®ç°åŠ¨ç”»</li><li>ç»å¯¹å®šä½åº”ç”¨éå¸¸å¤šï¼Œçµæ´»æ€§ä¹Ÿå¾ˆé«˜ï¼Œé ç»éªŒç´¯ç§¯</li></ul></blockquote><h3 id="å›ºå®šå®šä½">å›ºå®šå®šä½</h3><blockquote><p><strong>å›ºå®šå®šä½ç®€ä»‹</strong></p><ul><li>ç»™éœ€è¦æ·»åŠ å›ºå®šå®šä½çš„å…ƒç´ ï¼ŒåŠ ä¸Š <code>position: fixed;</code></li><li>å…ƒç´ çš„ä½ç½®é€šè¿‡ï¼ˆä½ç½®æè¿°è¯ï¼‰ï¼š<code>&quot;left&quot;</code>, <code>&quot;top&quot;</code>, <code>&quot;right&quot;</code> ,<code>&quot;bottom&quot;</code>å±æ€§è¿›è¡Œè°ƒæ•´ä½ç½®ã€‚å±æ€§å€¼å¯ä»¥æ˜¯æ­£æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯è´Ÿæ•°</li></ul><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">position</span>: fixed;</span><br><span class="line"><span class="attribute">top</span>: <span class="number">100px</span>;</span><br><span class="line"><span class="attribute">left</span>: <span class="number">100px</span>;</span><br></pre></td></tr></table></figure><p><strong>åº”ç”¨åœºæ™¯ï¼š</strong></p><ul><li>ä¸ç®¡æµè§ˆå™¨çš„æ»šåŠ¨æ¡å¦‚ä½•æ»šåŠ¨ï¼Œå…ƒç´ å§‹ç»ˆç›¸å¯¹æµè§ˆå™¨çª—å£çš„ä½ç½®ä¸å˜ã€‚</li></ul><p>æ¯”å¦‚ï¼šè¿”å›é¡¶éƒ¨ã€æ¥¼æ¢¯å¼å¯¼èˆªã€å³ä¾§æ‚¬æµ®èœå•ï¼Œé¡¶éƒ¨ä¸åº•éƒ¨é€šæ å¹¿å‘Šç­‰</p></blockquote><blockquote><p><strong>æ³¨ï¼š</strong></p><ul><li>å›ºå®šå®šä½åªèƒ½ä»¥é¡µé¢ä¸ºå‚è€ƒç‚¹ï¼Œæ²¡æœ‰ç»å¯¹å®šä½çš„å‚è€ƒç‚¹ï¼Œåªèƒ½ä»¥æµè§ˆä¸ºå‚è€ƒç‚¹</li><li>å›ºå®šå®šä½è„±ç¦»æ ‡å‡†æ–‡æ¡£æµ</li><li>é™¤å…¶ä½ç½®æ˜¯ç›¸å¯¹äºæµè§ˆå™¨çª—å£è€Œè¨€å¤–ï¼Œå…¶å®ƒä¸ç»å¯¹å®šä½çš„ç‰¹æ€§ä¸€è‡´</li></ul></blockquote><h3 id="ç²˜æ€§å®šä½">ç²˜æ€§å®šä½</h3><blockquote><p><strong>ç²˜æ€§å®šä½è§£è¯»</strong></p><ul><li>ç»™éœ€è¦æ·»åŠ ç²˜æ€§å®šä½çš„å…ƒç´ ï¼ŒåŠ ä¸Š<code>position:sticky;</code></li><li>ç²˜æ€§å®šä½å¯ä»¥çœ‹åšæ˜¯<strong>ç›¸å¯¹å®šä½</strong> ä¸ <strong>â€œå›ºå®šå®šä½â€</strong> çš„æ··åˆäº§ç‰© <strong>ï¼ˆè¿™é‡Œçš„å›ºå®šå®šä½ï¼Œå¹¶ä¸æ˜¯æˆ‘ä»¬ä¸Šé¢è¯´çš„<code>position:fixed;</code>åªæ˜¯å…·æœ‰ç›¸ä¼¼ç‚¹ï¼‰</strong></li><li>å½“æ»šåŠ¨é«˜åº¦å°äºå…ƒç´ æ‰€åœ¨ä½ç½®æ—¶ï¼Œå…ƒç´ ä»¥ç›¸å¯¹å®šä½å‘ˆç°</li><li>å½“æ»šåŠ¨é«˜åº¦å¤§äºå…ƒç´ æ‰€åœ¨ä½ç½®æ—¶ï¼Œå…ƒç´ ä»¥<strong>å›ºå®š</strong>å®šä½å‘ˆç°</li><li>å½“æ»šåŠ¨é«˜åº¦å¤§äºï¼ˆå…ƒç´ çš„çˆ¶å…ƒç´ åº•éƒ¨ä¸æµè§ˆå™¨é«˜ï¼‰æ—¶ï¼Œå…ƒç´ ç›¸å¯¹äºçˆ¶å…ƒç´ å®šä½ï¼Œä¸€èµ·ç§»èµ°</li><li>ç²˜æ€§å®šä½ç›¸å¯¹ç¦»ä»–æœ€è¿‘çš„ä¸€ä¸ªæ‹¥æœ‰â€œæ»šåŠ¨æœºåˆ¶â€çš„ç¥–å…ˆå…ƒç´ ï¼ˆå½“è¯¥ç¥–å…ˆçš„<code>overflow</code> æ˜¯ <code>hidden</code>, <code>scroll</code>, <code>auto</code>, æˆ– <code>overlay</code>æ—¶)å®šä½ æˆ– ç›´æ¥å—çº§çˆ¶å…ƒç´ å®šä½</li></ul></blockquote><blockquote><p><strong>å›ºå®šåœ¨ç¦»è‡ªå·±æœ€è¿‘çš„æ‹¥æœ‰â€œæ»šåŠ¨æœºåˆ¶â€çš„ç¥–å…ˆä¸Š</strong></p><ul><li>body ä¸ºæœ€è¿‘â€œ<strong>æ»šåŠ¨æœºåˆ¶</strong>â€çš„ç¥–å…ˆï¼Œæ­¤æ—¶è¦çœ‹åˆ°å…ƒç´ ç›¸å¯¹æµè§ˆå™¨å›ºå®šæ•ˆæœï¼Œå…ƒç´ çš„ç›´æ¥çˆ¶å…ƒç´ é«˜åº¦ä¸€å®šè¦å¤§äºå…ƒç´ æœ¬èº«ã€‚</li></ul><p><strong>å…ƒç´ çš„çˆ¶çº§æ‹¥æœ‰â€œæ»šåŠ¨æœºåˆ¶â€</strong></p><ul><li>å½“æ»šåŠ¨çˆ¶çº§å…ƒç´ çš„æ»šåŠ¨æ¡æ—¶ï¼Œå…ƒç´ å›ºå®šåœ¨çˆ¶çº§å…ƒç´ çš„æœ€é¡¶éƒ¨ã€‚</li></ul><p><strong>åº”ç”¨åœºæ™¯</strong></p><p>ç±»ä¼¼å¸é¡¶ç›’æ•ˆæœã€éœ€è¦å…ƒç´ å¸é™„æŒ‡å®šä½ç½®çš„éœ€æ±‚ï¼Œä¸€èˆ¬ä¼šç”¨åˆ°</p></blockquote><h3 id="å®šä½æ€»ç»“">å®šä½æ€»ç»“</h3><table><thead><tr><th style="text-align:left">å®šä½ç±»å‹</th><th style="text-align:left">æè¿°</th><th style="text-align:left">åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td style="text-align:left">ç›¸å¯¹å®šä½ relative</td><td style="text-align:left">ç›¸å¯¹è‡ªèº«åŸæ¥çš„ä½ç½®å®šä½ï¼Œå ç€åŸæ¥çš„ä½ç½®</td><td style="text-align:left">å¾®è°ƒå…ƒç´ çš„ä½ç½®ï¼Œä½†è¿˜å æ®åŸæ¥ç©ºé—´ åªæƒ³æå…ƒå‡ç´ çš„å±‚çº§ï¼Œä½†è¿˜æ˜¯å åŸæ¥çš„ç©ºé—´</td></tr><tr><td style="text-align:left">ç»å¯¹å®šä½ absolute</td><td style="text-align:left">ç›¸å¯¹ç¦»è‡ªå·±æœ€è¿‘çš„å®šä½çš„çˆ¶å…ƒç´ å®šä½ï¼ŒåŸæ¥çš„ä½ç½®è¢«é‡Šæ”¾ï¼Œç›¸å½“äºæ‚¬æµ®åœ¨é¡µé¢ä¸­ï¼Œä¼šè¦†ç›–åœ¨å…¶å®ƒå…ƒç´ çš„ä¸Šé¢æ˜¾ç¤º</td><td style="text-align:left">ä¸€ä¸ªå…ƒç´ æƒ³è¦†ç›–åœ¨å¦ä¸€ä¸ªå…ƒç´ ä¸Šé¢ é…åˆ JS æ¥å®ç°åŠ¨ç”»æ•ˆæœ</td></tr><tr><td style="text-align:left">å›ºå®šå®šä½ fixed</td><td style="text-align:left">ç›¸å¯¹æµè§ˆå™¨çª—å£è¿›è¡Œå®šä½</td><td style="text-align:left">ä½ æƒ³è®©ä¸€ä¸ªå…ƒç´ ç›¸å¯¹æµè§ˆå™¨çš„ä½ç½®ä¸€ç›´ä¸åŠ¨</td></tr><tr><td style="text-align:left">ç²˜æ€§å®šä½ sticky</td><td style="text-align:left">ç›¸å¯¹ç¦»è‡ªå·±æœ€è¿‘çš„æ‹¥æœ‰æ»šåŠ¨æœºåˆ¶çš„çˆ¶å…ƒç´ å®šä½ï¼Œæˆ–ï¼ˆç›´æ¥çˆ¶å…ƒç´ å®šä½ï¼‰</td><td style="text-align:left">å¸é™„æ•ˆï¼Œå†»ç»“æ•ˆæœ</td></tr></tbody></table><h3 id="z-index-è®¾ç½®å®šä½å…ƒç´ å±‚å é¡ºåº">z-index è®¾ç½®å®šä½å…ƒç´ å±‚å é¡ºåº</h3><blockquote><p><strong>TIP</strong></p><p>å®šä½çš„å…ƒç´ è„±ç¦»äº†æ­£å¸¸æ–‡æ¡£æµï¼Œä»–ç›¸å½“äºæ¼‚æµ®åœ¨æ–‡æ¡£ä¸Šé¢ã€‚é‚£å¦‚æœæœ‰å¾ˆå¤šä¸ªå…ƒç´ éƒ½ç”¨äº†å®šä½ï¼Œé‚£å¦‚ä½•ç¡®å®šè¿™äº›å…ƒç´ çš„å±‚å é¡ºåºé‡Œã€‚<code>z-index</code>å°±æ˜¯ç”¨æ¥æŒ‡å®š <strong>å®šä½å…ƒç´ </strong> çš„å †å é¡ºåºã€‚</p><p><strong>åŒä¸€å±‚å ä¸Šä¸‹æ–‡ä¸­ <code>z-index</code>å€¼çš„ç‰¹æ€§</strong></p><ul><li>z-index çš„é»˜è®¤å€¼æ˜¯ 0</li><li>z-index å€¼å¯ä»¥æ˜¯æ­£ï¼Œä¹Ÿå¯ä»¥æ˜¯è´Ÿ</li><li>z-index å€¼ç›¸åŒçš„å…ƒç´ ï¼Œå†™åœ¨åé¢çš„ä¼šè¦†ç›–å‰é¢çš„</li><li>z-index å€¼è¶Šå¤§ï¼Œå…ƒç´ è¶Šåœ¨ä¸Šé¢æ˜¾ç¤º</li><li>z-index åªé’ˆå¯¹å®šä½å…ƒç´ æœ‰æ•ˆï¼Œå¯¹å…¶å®ƒå…ƒç´ æ•ˆ</li></ul></blockquote><p>ä»¥ä¸‹å›¾åªåˆ—å‡ºäº†ç›®å‰å­¦åˆ°çš„ç›¸å…³å…ƒç´ ï¼Œåœ¨<strong>åŒä¸€å±‚å ä¸Šä¸‹æ–‡</strong>ä¸­çš„å±‚å é¡ºåºã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="https://www.arryblog.com/assets/img/image-20220613174347406.89cc08ca.png" alt=""></p><blockquote><p><strong>åŒä¸€å±‚å ä¸Šä¸‹æ–‡ï¼Œå…ƒç´ çš„å±‚å é¡ºåºï¼Œå‚è€ƒä¸Šå›¾ï¼Œç”±ä¸Šåˆ°ä¸‹åˆ†åˆ«</strong></p><ul><li>èƒŒæ™¯å’Œè¾¹æ¡†ï¼šå»ºç«‹å½“å‰å±‚å ä¸Šä¸‹æ–‡å…ƒç´ çš„èƒŒæ™¯å’Œè¾¹æ¡†ã€‚</li><li>è´Ÿçš„ z-indexï¼šå½“å‰å±‚å ä¸Šä¸‹æ–‡ä¸­ï¼Œz-index å±æ€§å€¼ä¸ºè´Ÿçš„å…ƒç´ ã€‚</li><li>å—çº§ç›’ï¼šæ–‡æ¡£æµå†…éè¡Œå†…çº§éå®šä½åä»£å…ƒç´ ã€‚</li><li>æµ®åŠ¨ç›’ï¼šéå®šä½æµ®åŠ¨å…ƒç´ ã€‚</li><li>è¡Œå†…ç›’ï¼šæ–‡æ¡£æµå†…è¡Œå†…çº§éå®šä½åä»£å…ƒç´ ã€‚</li><li><code>z-index:0;</code>å±‚å çº§æ•°ä¸º 0 çš„å®šä½å…ƒç´ ã€‚</li><li>æ­£<code>z-indexï¼šz-index</code>å±æ€§å€¼ä¸ºæ­£çš„å®šä½å…ƒç´ ã€‚</li></ul></blockquote><h3 id="é˜²å¾¡å¼ç¼–ç¨‹-é˜²å¾¡å¼-CSS">é˜²å¾¡å¼ç¼–ç¨‹ - é˜²å¾¡å¼ CSS</h3><p>åœºæ™¯1ï¼šå•è¡Œæ–‡æœ¬è¿‡é•¿</p><p>æˆ‘ä»¬è®¾è®¡æ—¶çš„ç†æƒ³æ•ˆæœæ˜¯æ ‡é¢˜æ–‡å­—ä¸è¶…è¿‡ 8 ä¸ªå­—ï¼Œæ­£å¥½æ˜¾ç¤ºå®Œæ•´ã€‚ä½†å®é™…åº”ç”¨æ—¶ï¼Œæœ‰å¯èƒ½æ ‡é¢˜å†…å®¹è¿‡é•¿é€ æˆæ¢è¡Œæ˜¾ç¤ºã€‚æˆ‘ä»¬å¯ä»¥æ·»åŠ <strong>æ–‡å­—æº¢å‡ºæ˜¾ç¤ºâ€¦çœç•¥å·</strong>æ¥è§£å†³ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">body</span>,</span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">h3</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.box</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">150px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">150px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin</span>: <span class="number">40px</span> auto;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.box</span> <span class="selector-tag">h3</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">line-height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-weight</span>: <span class="number">100</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/*ä»¥é˜²ä¸‡ä¸€ï¼Œæ ‡é¢˜è¿‡é•¿æ—¶ï¼Œç”¨...çœç•¥å·æ˜¾ç¤º*/</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">white-space</span>: nowrap;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">text-overflow</span>: ellipsis;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/flex-06.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&quot;ä»¥é˜²ä¸‡ä¸€&quot;æ ‡é¢˜è¿‡é•¿äº§ç”Ÿçš„é—®é¢˜<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœºæ™¯äºŒï¼šç±»åˆ«æ ‡ç­¾ä¸­æ–‡æœ¬è¿‡é•¿</p><p>åœ¨è¿™ä¸ªæ•ˆæœä¸­ï¼Œæˆ‘ä»¬å¹¶ä¸å¸Œæœ›æ ‡ç­¾å»¶ä¼¸åˆ°æœ€å³ä¾§ï¼Œæˆ‘ä»¬å¸Œæœ›å†…å®¹è¿‡é•¿æ—¶ï¼Œå¯ä»¥åœ¨ä¸€å®šçš„é•¿åº¦æ—¶å°±æŠ˜è¡Œæ˜¾ç¤ºã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ·» <code>max-width</code>å±æ€§æ¥é¿å…è¿™ç§â€œä»¥é˜²ä¸‡ä¸€â€çš„é—®é¢˜ã€‚</p><p>åœºæ™¯ä¸‰ï¼šé˜²æ­¢å›¾ç‰‡æ‹‰ä¼¸æˆ–æŒ¤å‹</p><p>æˆ‘ä»¬é¢„æƒ³çš„æ˜¯ç”¨æˆ·æŒ‰ 1:1 çš„å¤§å°æ¥ä¸Šä¼ å¤´åƒå›¾ç‰‡ï¼Œä½†å®é™…ç”¨æˆ·ä¸Šä¼ çš„å¤´åƒæ¯”ä¾‹æ˜¯äº”èŠ±å…«é—¨ï¼Œå°±ä¼šé€ æˆå›¾ç‰‡è¢«æ‹‰ä¼¸æˆ–æŒ¤å‹å˜å½¢ã€‚æˆ‘ä»¬å¯ä»¥æ·»åŠ <code>Object-fit: cover</code>æ¥ç­‰æ¯”ä¾‹è£å‰ªå›¾ç‰‡å°ºå¯¸ï¼Œè¿™æ ·å›¾ç‰‡å°±ä¸ä¼šè¢«æ‹‰ä¼¸æˆ–å‹ç¼©ï¼Œä¸è¿‡ä¼šæœ‰ä¸€éƒ¨åˆ†å›¾ç‰‡è¢«è£å‰ªæ‰ã€‚</p><p>åœºæ™¯å››ï¼šå›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œæ–‡å­—æ˜¾ç¤ºé—®é¢˜</p><p>å½“å›¾ç‰‡ä¸Šæœ‰æ–‡å­—æ—¶ï¼Œå¦‚æœå›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œè€Œå¤–å±‚å®¹å™¨çš„èƒŒæ™¯è‰²å’Œæ–‡å­—é¢œè‰²æ¥è¿‘ï¼Œé‚£ä¹ˆæ–‡å­—çš„å±•ç¤ºæ•ˆæœå°±ä¸ç†æƒ³ï¼›æ­¤æ—¶æˆ‘ä»¬å¯ä»¥ç»™å›¾ç‰‡åŠ ä¸Šå¯¹åº”çš„èƒŒæ™¯è‰²ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">  <span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">250px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">156px</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.box</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">object-fit</span>: cover;</span><br><span class="line">    <span class="comment">/*&quot;ä»¥é˜²ä¸‡ä¸€&quot;å›¾ç‰‡åŠ è½½å¤±è´¥ï¼ŒåŠ ä¸ŠèƒŒæ™¯è‰²ï¼Œä¿è¯æ–‡å­—èƒ½æ­£å¸¸æ˜¾ç¤º*/</span></span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#666</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.box</span> <span class="selector-tag">h3</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">  &lt;<span class="selector-tag">div</span> class=&quot;box&quot;&gt;</span><br><span class="line">    &lt;<span class="selector-tag">img</span> <span class="attribute">src</span>=&quot;images/rotate3<span class="selector-class">.webp</span>&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">    &lt;<span class="selector-tag">h3</span>&gt;ç¾ä¸½çš„é£æ™¯å›¾&lt;/<span class="selector-tag">h3</span>&gt;</span><br><span class="line">  &lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br></pre></td></tr></table></figure><p>åœºæ™¯äº”ï¼šå¿…è¦æ—¶æ˜¾ç¤ºæ»šåŠ¨æ¡</p><p>åœ¨å†…å®¹æ¯”è¾ƒé•¿çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® overflow-y æ§åˆ¶æ»šåŠ¨æ¡æ˜¯å¦å±•ç¤ºã€‚ä½†æ˜¯è¿™é‡Œæ›´æ¨èå°†<strong>overflow-y çš„å€¼è®¾ç½®ä¸º auto</strong>ã€‚å¦‚æœä½ å°† overflow-y æ˜¾å¼è®¾ç½®ä¸º scroll æ—¶ï¼Œä¸ç®¡å®¹å™¨å†…å®¹é•¿çŸ­ï¼Œæ»šåŠ¨æ¡éƒ½ä¼šå±•ç¤ºå‡ºæ¥ï¼Œè¿™ç§ä½“éªŒæ˜¯ä¸å¥½çš„</p><p>åœºæ™¯å…­ï¼šé¢„ç•™æ»šåŠ¨æ¡ç©ºé—´ï¼Œé¿å…é‡æ’</p><p>å½“å†…å®¹ä¸è¶³æ—¶ä¸ä¼šå‡ºç°æ»šåŠ¨æ¡ï¼Œæ–‡å­—å æ®çš„å®½åº¦è¦å®½äº›ã€‚å½“å†…å®¹æº¢å‡ºå‡ºç°æ»šåŠ¨æ¡æ—¶ï¼Œå› ä¸ºæ»šåŠ¨æ¡è¦å æ®ä¸€éƒ¨åˆ†ç©ºé—´ï¼Œåˆ™ä¼šé€ æˆæ–‡å­—å æ®çš„ç©ºé—´å˜çª„ï¼Œå› è€Œä¼šé€ æˆé‡æ’ã€‚æˆ‘ä»¬å¯ä»¥å…ƒç´ æ·»åŠ <code>scrollbar-gutter: stable;</code>æ¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚</p><p>scrollbar-gutter å±æ€§æœ‰ä¸‰ä¸ªå€¼</p><table><thead><tr><th style="text-align:left">å±æ€§å€¼</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">auto</td><td style="text-align:left">å°±æ˜¯é»˜è®¤è¡¨ç°ã€‚æ²¡æœ‰æ»šåŠ¨æ¡çš„æ—¶å€™ï¼Œå†…å®¹å°½å¯èƒ½å æ®å®½åº¦ï¼Œæœ‰äº†æ»šåŠ¨æ¡ï¼Œå¯ç”¨å®½åº¦å‡å°</td></tr><tr><td style="text-align:left">stable</td><td style="text-align:left">å¦‚æœ overflow å±æ€§è®¡ç®—å€¼ä¸æ˜¯ visibleï¼Œåˆ™æå‰é¢„ç•™å¥½ç©ºç™½åŒºåŸŸï¼Œè¿™æ ·æ»šåŠ¨æ¡å‡ºç°çš„æ—¶å€™ï¼Œæ•´ä¸ªç»“æ„å’Œå¸ƒå±€éƒ½æ˜¯ç¨³å®šçš„ã€‚</td></tr><tr><td style="text-align:left">both-edges</td><td style="text-align:left">è®©å®¹å™¨å·¦å³ä¸¤ä¾§åŒæ—¶é¢„ç•™å¥½ç©ºç™½åŒºåŸŸï¼Œç›®çš„æ˜¯è®©å±€éƒ¨ç»å¯¹å±…ä¸­å¯¹ç§°ã€‚</td></tr></tbody></table><p>åœºæ™¯ä¸ƒï¼šé”å®šæ»šåŠ¨é“¾</p><p>æˆ‘ä»¬ä¼šå‘ç°å½“å­å…ƒç´ æ»šåŠ¨åˆ°é¡¶éƒ¨æˆ–åº•éƒ¨ç»§ç»­æ»šåŠ¨æ»šè½®æ—¶ï¼Œä¼šå¯¼è‡´çˆ¶å…ƒç´ çš„æ»šåŠ¨ï¼Œä½†è¿™ç§è¡Œä¸ºæœ‰æ—¶ä¼šå½±å“é¡µé¢ä½“éªŒã€‚åœ¨å­å…ƒç´ ä¸Šåº”ç”¨<code>overscroll-behavior: contain</code>å°±å¯ä»¥ç¦æ­¢æ‰è¿™ä¸€è¡Œä¸ºã€‚</p><p>åœºæ™¯å…«ï¼šflex å¸ƒå±€ä¸­ï¼Œå…ƒç´ ä½¿ç”¨ space-between æœ€åä¸€è¡Œä¸¤è¾¹åˆ†å¸ƒçš„é—®é¢˜ ï¼Ÿ</p><p>å¦‚æœæˆ‘ä»¬æ¯ä¸€è¡Œæ˜¾ç¤ºçš„ä¸ªæ•°ä¸º nï¼Œé‚£æˆ‘ä»¬å¯ä»¥æœ€åä¸€è¡Œå­é¡¹çš„åé¢åŠ ä¸Š n-2 ä¸ª span å…ƒç´ ï¼Œspan å…ƒç´ çš„å®½åº¦å’Œå…¶å®ƒå­é¡¹å…ƒç´ å®½åº¦ä¸€æ ·ï¼Œä½†ä¸ç”¨è®¾ç½®é«˜åº¦ã€‚</p><blockquote><p><strong>ä¸ºä»€ä¹ˆæ˜¯æ·»åŠ  n-2 ä¸ª span å…ƒç´ å‘¢ï¼Ÿ</strong></p><ul><li>å½“æœ€åä¸€è¡Œåªæœ‰ 1 ä¸ªå­å…ƒç´ æ—¶ï¼Œä»–ä¼šé»˜è®¤é å·¦ï¼Œä¸ç”¨å¤„ç†</li><li>å½“æœ€åä¸€è¡Œå­å…ƒç´ æ­£å¥½æ—¶ï¼Œæˆ‘ä»¬å°±ä¸ç”¨å…³å¿ƒè¿™ä¸ªé—®é¢˜ã€‚</li></ul><p>æ‰€ä»¥è¦å»æ‰è¿™ä¸¤ç§æƒ…å†µï¼Œåªéœ€è¦åŠ  n-2 ä¸ª span å…ƒç´ å°±å¥½</p></blockquote><table><thead><tr><th style="text-align:left">è®¾è®¡å¸ˆè®¾è®¡æ•ˆæœ</th><th style="text-align:left">å®é™…æ•ˆæœ</th><th style="text-align:left">å¤„ç†åçš„æ•ˆæœ</th></tr></thead><tbody><tr><td style="text-align:left"><img src= "/img/loading.gif" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAvcAAAFGCAIAAABhYyehAAAQm0lEQVR4nO3db4hV95nA8cdNUAO6mY4WJrokvcFiFBQmKEHdEJ0s3ckkMEWxZB03hXGX1Y4gXa2FVEtZJ4GIbpNujEJWF8poSySCbDK6BUezQd2g7NBITYeG3G6pOjQZM1llZxyQ2Rcxf4zX0THqnfvk8yEvPOdc4Xnxw3zPuefcM2pwcDAAANL5s3IPAABwS6gcACAnlQMA5KRyAICcVA4AkNOdl229cbxMYzDiPTJrqKNWDldj5XBjrBxuzOUrx7UcACAnlQMA5KRyAICcVA4AkJPKAQByuvPaHznfteu1D+Y8Oa9w66chg4Fz77z72zMXIiK+ds8D02rGjy33RFSE/rPFzv/5oC8iYuw990+ddvfock9EBRo41zsQEWOqxlk/RFyzcro7dyzbsLX97IojKodrutjTsfu5v9t2sPj5nZMXvPjj9S1Tx5drKEa+7rdeWPaztvZTl+0szF/76prFtePKNBMVqWfXs/VNhyLmbzjzk/qack/DSHC1yhnoPrlv08tbN3f23NZxqGDn2rc0Pb6np6Ywr+XhBXW1E/uLx1//9327igdX/sMHvS9t+9F0p1aUVuxqa+8rLHly8eO136iJnnc6Ozb/8mDx0MYH/3Thv19aWlvu8agU/cfbVh8q9xCMMCUqp/etrQ0/23H0VERMqKud0dF54rZPRSUa6D07qWX91tZHC1Uf76idt2Rhc9O2FY//8sS6F/cufGnxtPIOyEhVM+ulM02za+64tFn3UH1Lw+7Hn9rYfvKF7UcaX5zrQiDXo2vLjrbucg/BSFPi7uP+88Wjp6Lw0NKd/7b7wN//5e2fico0es7ybS9+mjiXjG9YtHRhRJw81vl+ecZi5CtM/yxxLrm3vqUxImLLu78vx0RUnuJrW9ecjIXzF5R7EEaWEpUz9r7FB37e8d5zq5YUnEJx/cYXakp9J/X1yQ9GRBwsqhyGYfzXJpR7BCpI9/41mw7H9FXrFj1Q7lEYWUpUTtWU2XX36htukoH+DyMiFhS+Xu5JqCQ9xfciIlqmfKPckzDynd61bf2emNG66ju1d1z703yl+L0cbq3+t4/sjIgpM6epHK5bb+crmw5FTF+xbJYzLq6h+Kvnmw7FnObvr57qEQe+6Dp+LwduWN+JzTvauiMavl3nSRmG0P9+15E//m9ExPnT7Yd27jxQjNqlr/+wudb/thjau21Nzx6M6Ss2L57hp7m4ksrhljl/4pn1P1h3Mmpq17Y+Manc0zCi9b69/dENBz/Zmr1k+Yp1TyyY5sdyGFrfiWf++YWjMaN15dI5d5V7GEYklcMt0du1e9k/bdxzKmrmrmpfv9iFHIY29p55m5bPjIjo/X3728d2bVu7a9ukhctbtz85o+paf5evqp49P/3BupMxp+WHfo6Lq1E53HTnOnevb9hyuDsm1D21fud3533xIWG4QtX0xtXTL/15dURvcW/L6tZd25rPXGzraJrqmwiuVDzwfMuvemq+tWHn4qnlnoWRy93H3FR9xe3PLn5wy+Hu6nmt/7L7QLPE4UZUFRq3P720JuLoy3s7zpd7Gkae3uNbmzbs77536fbmeV87f6730//OXYiIuHjhw483+8o9KOXmWg43T9+JZ57+wbrOnpq5q9qfXuoNRHwZY2fObYq2zdHReWptg3N1LtPd/tqOoxHxh7bHn2wrcfzN1ulvtkZENO8YfGrG7Z2NkUXlcLMMHP3Fc+s6e2q+teHI0/Xe7cpNMnGsy4Fcoerrs+tmlTrwf6c6Tp6O6kLd/RMjIryZ/CtP5XCTnNrX+vOuqF668/sSh5vg0i8txezae8s9CiNOTUPLSw0lj5zcMep7W2Nm807vJCci3JfDzdL9u+PtETFz6nTPczIsXbvXHOjqvXjZvt7i3mXPtnVHzGmpr3M2Dtwo13K4Oc68X4yIOLT+nvnrS39i/oYzzq640sVzmzcs3bylUPfQvIb7JkT0vPPW4dc7i90Rhcc2enwG+DJUDjdHf19XuUegMk2evenR/ZsOFDv2FTs+2VdTmLd66ap1X3zFPcDwjBocHPxs643j5ZuEke2Rknf6fcLK4Wquc+VcHOjtu/Bh9297xz1QGDemyk2j+DeHG3P5ynEtBxgB7hhdNW501ZTZ5Z4DSMXdxwBATioHAMhJ5QAAOakcACAnlQMA5KRyAICcVA4AkJPKAQByUjkAQE4qBwDISeUAADmpHAAgJ5UDAOSkcgCAnFQOAJCTygEAclI5AEBOKgcAyEnlAAA5qRwAICeVAwDkpHIAgJxUDgCQk8oBAHJSOQBATioHAMhJ5QAAOakcACAnlQMA5KRyAICcVA4AkJPKAQByUjkAQE4qBwDISeUAADmpHAAgJ5UDAOSkcgCAnFQOAJCTygEAclI5AEBOKgcAyEnlAAA5qRwAICeVAwDkpHIAgJxUDgCQk8oBAHJSOQBATioHAMhJ5QAAOakcACAnlQMA5KRyAICcVA4AkJPKAQByUjkAQE4qBwDISeUAADmpHAAgJ5UDAOSkcgCAnFQOAJCTygEAclI5AEBOKgcAyEnlAAA5qRwAICeVAwDkpHIAgJxUDgCQk8oBAHJSOQBATioHAMhJ5QAAOakcACAnlQMA5KRyAICcVA4AkJPKAQByUjkAQE4qBwDISeUAADmpHAAgJ5UDAOSkcgCAnFQOAJCTygEAclI5AEBOKgcAyEnlAAA5qRwAICeVAwDkpHIAgJxUDgCQk8oBAHJSOQBATioHAMhJ5QAAOakcACAnlQMA5KRyAICcVA4AkJPKAQByUjkAQE4qBwDISeUAADmpHAAgJ5UDAOSkcgCAnFQOAJCTygEAclI5AEBOKgcAyEnlAAA5qRwAICeVAwDkpHIAgJxUDgCQk8oBAHJSOQBATioHAMhJ5QAAOY0aHBws9wwAADefazkAQE4qBwDISeUAADmpHAAgJ5UDAOSkcgCAnFQOAJCTygEAclI5AEBOKgcAyEnlAAA5qRwAICeVAwDkpHIAgJzuvGzrjeNlGoMR75FZQx21crgaK4cbY+VwYy5fOa7lAAA5qRwAICeVAwDkpHIAgJxUDgCQ050l9/afP9df8sDo8VWjb+U4pHFxoFj8dfFcRESMmfjglIKVQ2l953ovDv2JMVXjrB6uYOVwHUpVzsCxdU98b3OpTy9cv//VRyfc4pGodOc6972w5uW9HWc/v3PFkUPNc8o1ESPY0d11c3cM+Yn5G878pL7mNo1DxbByuB6lKuejnmJEVBfq7p/4hSOFu27DSFS003ueW7Fo3+mISQ2N9QtnzSrE6c7fnHj1zXLPxUg1dtzsuqv8MErfmWNHT0Xt/ZOrbu9IVAQrh+tRqnI+vgY4s3mnCmZ4Bjp3rlu073RMb369dUVD9aW9dQ83rl5e1rkYwWoXvnRgYakDfcfWNB07Wr24tXHG2Ns9FBXAyuF6lLr7+OzpPbd9DjJ495WWl09ELNj5488SB25M52tbN5+NOX/T2HB3uUeholg5fN7Vn7G6f7ILOQzHQMfBtqMRtcuXLbF0+JLe39+65URUL219Ymq5R6GiWDlcrkTldP+pePvnoOIN/Lp9Z0/E7JaH/ePClzRwdF/bnoiG5sV17gVkGKwcvqjkfTkXImJhjWepGI4/dHVERPWsBydHRPR/VOx874O++PPCNwsFD3MyLO93bNrRFdVLVz86qdyjUFGsHK5QonLOnD0dEXuebRz17Mc7Js2ZP6+pcVlLre7hqrr/2NUZETMn3dPXteW5tSsPnf70UGH+2lfXLK4dV77hqCidB9r2RNR+p97pOMNi5XClEt9Y9fd1Xb7j9NFDu1d+v/7+5w76Kour6Ru4EBFRfe71n65a+btCy1OrNi1ftenJBYWI4qGND67d0TlQ7hGpCB8d3LKtK6Jx3WO++mQ4rBxKKXEtZ85Txwaf+myz/6OuPW0vrN59rLhvbdNftHU0TfVsHlfq7j4YEXFo+zOzVpz818Zpn5xLrf72/qbvrd91cuu6A/WvP+YyMtdQPLJ3e0RN0197QIZhsXIo6drvsRp799QlLc/vaZ4REUdf3ttx/tYPReU6+8CPvvtZ4kRE1NSv+c7UiGg/cMy1QK6la8+rhyMmrJw329kUw2HlUNp1vq1z9JzGv10WEdHReepWjkPFKkxeEBExa0Hd5C8eqp1ZFxFxvKf7dg9FpTl5eNO7EVOWNkwv9yRUFiuHq7jud5LfPbEQEdET13g7Gl9RY++aGBFx15hyD0LlGug4/Ep3RO1fza4t9yhUFCuHq7ruyhno/zAiYupYDwVTStV9U+si4s2u4pV3GV/8+MbkcCWZoQz8umNfT8TUplnuHmU4rByu7norp/et/9gcEdXzau+9leNQuSbPXvJQROzbc/zc5QcGOv5rb0TUPDZjWjnmomK8e2L72YjqurlTyj0JlcXK4equrJxi+4Gu3su/lup+a+uin+6NiIbmxjrXciht0qLGxTXRs2XTxl2fuwGn9/j2dTt7ImasWeCuQIbS+ZuO7oh4eKoaZlisHIZw5ZPk5zs3ND++pVD30LyG+yZE9Lzznx3bT56OiDkLn3/xCU8Cc1VVc5dteezwon37m558e2djfd09UXz74KtHit0xYcn61tVOsxhKT/F3XRFR981CVblHoaJYOQzlysqZUHi0UHOg2LGv2PHJrppC/crm5paHrSGGNmHhD9uO3Ldx2Sv72/fuaI+IiJpC/aZ/XLt6xvgyj8ZId/qdX0VEzLnPqRTDYuUwlFGDg4Ofbb1x/NIfBs71Dgyc+cN7/dUPFMaNqfIeIh6ZNdTRT1fOxy4O9H506p2zY6bVTLR4vuqGtXLgU1YON+bylVPqbZ0RMXp81eiomu7FVdyQO0ZXVRfmVJd7DAC+2q77SXIAgIqicgCAnFQOAJCTygEAclI5AEBOKgcAyEnlAAA5qRwAICeVAwDkpHIAgJxUDgCQk8oBAHJSOQBATioHAMhJ5QAAOakcACAnlQMA5KRyAICcVA4AkJPKAQByUjkAQE4qBwDISeUAADmpHAAgJ5UDAOSkcgCAnFQOAJCTygEAclI5AEBOKgcAyEnlAAA5qRwAICeVAwDkpHIAgJxUDgCQk8oBAHJSOQBATioHAMhJ5QAAOakcACAnlQMA5KRyAICcVA4AkJPKAQByUjkAQE4qBwDISeUAADmpHAAgJ5UDAOSkcgCAnFQOAJCTygEAclI5AEBOKgcAyEnlAAA5qRwAICeVAwDkpHIAgJxUDgCQk8oBAHJSOQBATioHAMhJ5QAAOakcACAnlQMA5KRyAICcVA4AkJPKAQByUjkAQE4qBwDISeUAADmpHAAgJ5UDAOSkcgCAnFQOAJCTygEAclI5AEBOKgcAyEnlAAA5qRwAICeVAwDkpHIAgJxUDgCQk8oBAHJSOQBATioHAMhJ5QAAOakcACAnlQMA5KRyAICcVA4AkJPKAQByUjkAQE4qBwDISeUAADmpHAAgJ5UDAOSkcgCAnFQOAJCTygEAclI5AEBOKgcAyEnlAAA5qRwAICeVAwDkpHIAgJxUDgCQk8oBAHJSOQBATioHAMhJ5QAAOakcACAnlQMA5KRyAICcVA4AkJPKAQByUjkAQE4qBwDISeUAADmpHAAgJ5UDAOSkcgCAnFQOAJDTqMHBwXLPAABw87mWAwDkpHIAgJxUDgCQk8oBAHL6fycswr91cJqcAAAAAElFTkSuQmCC" alt="image-20220526202336016"></td><td style="text-align:left"><img src= "/img/loading.gif" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAvkAAAFJCAIAAACO/KXHAAAQdElEQVR4nO3dcWiXd37A8Y/roRZ0zUUPUh3t/YrDKiikKCW6Uo3jlqaFHIpHZ7IexI3pRZCbngc9PY6ZFlp0195qFTodHNEdlQqyNroDo11RV5SFq5y9cKW/23FquDY2XWSJAcn+qLZVo9U08Zd8+nrRP8zzRPj88Tz2/Xx/z/N7xg0MDAQAQFJ/UuoBAABGkNYBADLTOgBAZloHAMhM6wAAmWkdACCzr1274c2TpRiDseDReTfb68jhRhw5DI0jh6G57sixrgMAZKZ1AIDMtA4AkJnWAQAy0zoAQGbXPYc1qAsde17/sOrJhYURnoYk+nvefe835y5GRHz93gdnVUyeWOqJGBP6zhfb/+fD3oiIifc+MHPWPeNLPRFjUH9Pd39ETCib5Pjhsi9unc72XSs3b289v/qY1uELXepq2/vc3+44XPz8xumLX/rxpqaZk0s1FKNf59svrvxZS+uZqzYWFm14bf3yykklmokxqWvPszX1RyIWbT73k5qKUk/DKHGT1unvPH1gyyvbt7Z33blxGNt6WrfVP76vq6KwsOmRxdWVU/uKJ9/49wN7iofX/P2H3S/v+NFsl1kMrtjR0tpbWPHk8scrv1kRXe+2t239xeHikecf+uPF/365obLU4zFW9J1sWXek1EMw+gzeOt1vb6/92a7jZyJiSnXlnLb2U3d2Ksao/u7z05o2bW9eUij7ZEPlwhVLG+t3rH78F6c2vrR/6cvLZ5V2QEarinkvn6ufX3HX5R+rH65pqt37+FPPt55+ceexupcWWBTkVnRs29XSWeohGIUGvze570Lx+JkoPNyw+1/3Hvq7v7jDMzFmja9ateOlT0Pnssm1yxqWRsTpE+0flGYsRr/C7M9C57L7aprqIiK2vfe7UkzE2FN8ffv607F00eJSD8KoM3jrTLx/+aGft73/3NoVBZdT3LrJhYrBPqX6xvSHIiIOF7UOt2Hy16eUegTGkM6D67ccjdlrNy57sNSjMOoM3jplM+ZX36dyGCb9fR9FRCwufKPUkzCWdBXfj4homvHNUk/C6Hd2z45N+2JO89rvVN71xb/NV43v12HE9b1zbHdEzJg7S+twy7rbX91yJGL26pXzXHfxBYq/fKH+SFQ1fn/dTA9AMIhb+34dGLLeU1t3tXRG1H672tM03ETfBx3H/vC/EREXzrYe2b37UDEqG974YWOl/3lxc++11D97OGav3rp8jq/yYlBah5F04dQzm36w8XRUVG5ofmJaqadhVOt+Z+eSzYev/DR/xarVG59YPMuX63Bzvaee+acXj8ec5jUNVXeXehhGK63DSOnu2LvyH5/fdyYqFqxt3bTcog43N/HehVtWzY2I6P5d6zsn9uzYsGfHtKWrmnc+Oafsi/4uX1Vd+376g42no6rph76+i5vQOoyEnva9m2q3He2MKdVPbdr93YXXPk4M1ymbXbdu9uU/r4voLu5vWte8Z0fjuUstbfUzfTbB9YqHXmj6ZVfFtzbvXj6z1LMwqrk3meHWW9z57PKHth3tLF/Y/M97DzUKHYairFC38+mGiojjr+xvu1DqaRh9uk9ur998sPO+hp2NC79+oaf70/96LkZEXLr40Sc/9pZ6UEYB6zoMq95Tzzz9g43tXRUL1rY+3eBNRnwZE+cuqI+WrdHWfmZDret2rtLZ+vqu4xHx+5bHn2wZZP9bzbPfao6IaNw18NScOzsbo47WYRj1H/+35za2d1V8a/Oxp2u8KZZhMnWipUGuU/aN+dXzBtvxf2faTp+N8kL1A1MjIrztHK3DcDpzoPnnHVHesPv7QodhcPmbmWJ+5X2lHoVRp6K26eXaQfec3jXue9tjbuNu7znnCvfrMGw6f3uyNSLmzpztyU9uS8fe9Yc6ui9dta27uH/lsy2dEVVNNdWuzIEvwboOw+bcB8WIiCOb7l20afDfWLT5nCstrnepZ+vmhq3bCtUPL6y9f0pE17tvH32jvdgZUXjseY/YAF+S1mHY9PV2lHoExqbp87csObjlULHtQLHtyraKwsJ1DWs3Lin4ch3gSxo3MDBw1YY3T5ZoEka9Rwe9D/AKRw43cotHzqX+7t6LH3X+pnvSg4VJE8rcUop/cxia644c6zrA6HDX+LJJ48tmzC/1HEA27k0GADLTOgBAZloHAMhM6wAAmWkdACAzrQMAZKZ1AIDMtA4AkJnWAQAy0zoAQGZaBwDITOsAAJlpHQAgM60DAGSmdQCAzLQOAJCZ1gEAMtM6AEBmWgcAyEzrAACZaR0AIDOtAwBkpnUAgMy0DgCQmdYBADLTOgBAZloHAMhM6wAAmWkdACAzrQMAZKZ1AIDMtA4AkJnWAQAy0zoAQGZaBwDITOsAAJlpHQAgM60DAGSmdQCAzLQOAJCZ1gEAMtM6AEBmWgcAyEzrAACZaR0AIDOtAwBkpnUAgMy0DgCQmdYBADLTOgBAZloHAMhM6wAAmWkdACAzrQMAZKZ1AIDMtA4AkJnWAQAy0zoAQGZaBwDITOsAAJlpHQAgM60DAGSmdQCAzLQOAJCZ1gEAMtM6AEBmWgcAyEzrAACZaR0AIDOtAwBkpnUAgMy0DgCQmdYBADLTOgBAZloHAMhM6wAAmWkdACAzrQMAZKZ1AIDMtA4AkJnWAQAy0zoAQGZaBwDITOsAAJlpHQAgM60DAGSmdQCAzLQOAJCZ1gEAMtM6AEBmWgcAyEzrAACZaR0AIDOtAwBkpnUAgMy0DgCQmdYBADLTOgBAZloHAMhM6wAAmWkdACAzrQMAZKZ1AIDMtA4AkJnWAQAy0zoAQGZaBwDITOsAAJlpHQAgM60DAGSmdQCAzLQOAJCZ1gEAMtM6AEBmWgcAyEzrAACZaR0AIDOtAwBkpnUAgMy0DgCQmdYBADLTOgBAZloHAMhs3MDAQKlnAAAYKdZ1AIDMtA4AkJnWAQAy0zoAQGZaBwDITOsAAJlpHQAgM60DAGSmdQCAzLQOAJCZ1gEAMtM6AEBmWgcAyEzrAACZfe3aDW+eLMUYjAWPziv1BGOW04obcVoNmdOKG7nutLKuAwBkpnUAgMy0DgCQmdYBADLTOgBAZtc9h3VF34WevkF3jJ9cNn7ExoGviEv9xeKvij0RETFh6kMzCk4ruG29Pd2Xbv4bE8omObW4Uev0n9j4xPe2DrZn6aaDry2ZMpIjQW497QdeXP/K/rbzn9+4+tiRxqpSTQRj0/G91Qt23fQ3Fm0+95Oaijs0DqPXDVrn465iRJQXqh+Yes2ewt0jPRIkdnbfc6uXHTgbMa22rmbpvHmFONv+61OvvVXquWAMmjhpfvUNvp+o99yJ42ei8oHpZXd2JEanG7TOJ6uCcxt3K2IYNv3tuzcuO3A2Zje+0by6tvzy1upH6tatKulcMDZVLn350NLBdvSeWF9/4nj58ua6ORPv9FCMRje4N/n82X13dg7I771Xm145FbF4948/Cx1g2LW/vn3r+aj667rae0o9CqPDTZ/DemC6RR0YJv1th1uOR1SuWrnCeQUj54ODzdtORXlD8xMzSz0Ko8XgrdP5x+IdngOS6/9V6+6uiPlNj/j3F0ZO//EDLfsiahuXV7u7lCtudL/OxYhYWuF5Kxgmv+9oi4jyeQ9Nj4jo+7jY/v6HvfGnhT8vFDwTC8Plg7YtuzqivGHdkmmlHoVRZPDWOXf+bETse7Zu3LOfbJhWtWhhfd3Kpkr1A0PR+YeO9oiYO+3e3o5tz21Yc+Tsp7sKiza8tn555aTSDQdZtB9q2RdR+Z0aizp83uCfYfX1dly94ezxI3vXfL/mgecO+3ALhqC3/2JERHnPGz9du+a3haan1m5ZtXbLk4sLEcUjzz+0YVd7f6lHhLHu48PbdnRE1G18zCfFXGXwdZ2qp04MPPXZj30fd+xreXHd3hPFAxvq/6ylrX6mp/jgtnR2Ho6IOLLzmXmrT/9L3awrF53rvn2w/nub9pzevvFQzRuPWXWHoSse278zoqL+rzx+xTVu6X1YE++ZuaLphX2NcyLi+Cv72y6M8FCQ1fkHf/Tdz0InIqKiZv13ZkZE66ETFk3hS+jY99rRiClrFs53Nc41bv3dn+Or6v5mZUREW/uZERsHkipMXxwRMW9x9fRrd1XOrY6IONnVeaeHgkROH93yXsSMhtrZpZ6E0ed23nN+z9RCRERXfMG71oBrTbx7akTE3RNKPQik1N929NXOiMq/nF9Z6lEYhW6ndfr7PoqImDnRE7Jwm8run1kdEW91FK+/B/nSJ7cth4V3GKL+X7Ud6IqYWT/PXckM4jZap/vt/9gaEeULK+8bsXEgq+nzVzwcEQf2ney5ekd/23/tj4iKx+bMKsVckMF7p3aejyivXjCj1JMwKg3aOsXWQx3dV39Q1fn29mU/3R8RtY111dZ14LZNW1a3vCK6tm15fs/nbszpPrlz4+6uiDnrF7uhEoao/ddtnRHxyEwXDAxq0GfOL7Rvbnx8W6H64YW190+J6Hr3P9t2nj4bEVVLX3jpCY/FwlCULVi57bGjyw4crH/ynd11NdX3RvGdw68dK3bGlBWbmte5HoUh6ir+tiMiqv+8UFbqURidBm2dKYUlhYpDxbYDxbYrmyoKNWsaG5secSTBkE1Z+sOWY/c/v/LVg637d7VGRERFoWbLP2xYN2dyiUeDMezsu7+MiKi636U4gxs3MDBw1YY3T17+Q39Pd3//ud+/31f+YGHShDKv7OHReaWeYMz69LT6xKX+7o/PvHt+wqyKqc6srzqn1ZBdc1rBp647rW7w7s+IGD+5bHyUzfYCLBhud40vKy9UlZd6DICvhtt55hwAYKzROgBAZloHAMhM6wAAmWkdACAzrQMAZKZ1AIDMtA4AkJnWAQAy0zoAQGZaBwDITOsAAJlpHQAgM60DAGSmdQCAzLQOAJCZ1gEAMtM6AEBmWgcAyEzrAACZaR0AIDOtAwBkpnUAgMy0DgCQmdYBADLTOgBAZloHAMhM6wAAmWkdACAzrQMAZKZ1AIDMtA4AkJnWAQAy0zoAQGZaBwDITOsAAJlpHQAgM60DAGSmdQCAzLQOAJCZ1gEAMtM6AEBmWgcAyEzrAACZaR0AIDOtAwBkpnUAgMy0DgCQmdYBADLTOgBAZloHAMhM6wAAmWkdACAzrQMAZKZ1AIDMtA4AkJnWAQAy0zoAQGZaBwDITOsAAJlpHQAgM60DAGSmdQCAzLQOAJCZ1gEAMtM6AEBmWgcAyEzrAACZaR0AIDOtAwBkpnUAgMy0DgCQmdYBADLTOgBAZloHAMhM6wAAmWkdACAzrQMAZKZ1AIDMtA4AkJnWAQAy0zoAQGZaBwDITOsAAJlpHQAgM60DAGSmdQCAzLQOAJCZ1gEAMtM6AEBmWgcAyEzrAACZaR0AIDOtAwBkpnUAgMy0DgCQmdYBADLTOgBAZloHAMhM6wAAmWkdACAzrQMAZKZ1AIDMtA4AkJnWAQAy0zoAQGZaBwDITOsAAJlpHQAgM60DAGSmdQCAzLQOAJCZ1gEAMtM6AEBmWgcAyEzrAACZaR0AIDOtAwBkpnUAgMy0DgCQmdYBADLTOgBAZloHAMhs3MDAQKlnAAAYKdZ1AIDMtA4AkJnWAQAy0zoAQGZaBwDITOsAAJn9PyxpZxLWcOo6AAAAAElFTkSuQmCC" alt="image-20220515110815717"></td><td style="text-align:left"><img src= "/img/loading.gif" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAvoAAAFKCAIAAADjX2xqAAAQdUlEQVR4nO3df2jX953A8ZfXoRb0mkUHqR7tvqUjVVBIUYp6pRqPXZoWMhRHz3gdxDtOF0F2OgedjnGmhYre2l2tQk8PRnSjUkGujd7AaK+oV5QLq8wurPS7G1PD2tj0IpcYkNwf1XatSfyV+E1efTzwj3w/n6/w+uNN8vx8vp/P9zOuv78/AADy+rNSDwAAMLLkDgCQnNwBAJKTOwBAcnIHAEhO7gAAyX1lgG1vnrrjYzBGPDZnqL1WDoOxcrg1Vg635pqV4+wOAJCc3AEAkpM7AEBycgcASE7uAADJDXRn1oAutu99/cN5Ty0ojOQ05NHX/e57vzl/KSLiq/c+NKNi8sRST8SY0Huh2PY/H/ZEREy894HKGfeML/VEjEF93V19ETGhbJL1wxU3lDsdbbtXbt7RcmH1cbnDdV3ubN33/N/tPFL8043TF730o02NlZNLNRSjX8fbL678aXPL2c9tLCzc8Nr6ZVWTSjQTY1Ln3udq6o9GLNx8/sc1FaWehlFi6Nzp6zhzcOsrO7a1dd6hcRjzulu21z+xv7OisKDx0UXVVVN7i6fe+PeDe4tH1vzDh10v7/zhTAdbDKzY3tzSU1j+1LInqr5eEZ3vtrVu+8WR4tEtD//x0n+/vKKq1OMxVvSeal53tNRDMPoMmjtdb++o/enuE2cjYkp11azWttN3cCrGrr6uC9MaN+1oWlwo+2RD1YLlSxrqd65+4henN750YMnLy2aUdkBGq4o5L5+vn1tx15WX1Y/UNNbue+LpLS1nXtx1vO6l+U4NciPat+9u7ij1EIxCg16q3HuxeOJsFB5Zseff9h3++7+8kzMxlo2ft2rnS5+2zhWTa5euWBIRZ062fVCasRj9CjM/a50r7qtprIuI2P7e70oxEWNP8fUd68/EkoWLSj0Io86guTPx/mWHf9b6/vNrlxccVHHjJhcqBvq46mvTH46IOFKUO9yEyV+dUuoRGEM6Dq3feixmrt249KFSj8KoM2julD04t/o+ocMw6ev9KCJiUeFrpZ6EsaSz+H5EROODXy/1JIx+5/bu3LQ/ZjWt/XbVXdd/N182vneHO6H3neN7IuLB2TPkDjesq+3VrUcjZq5eOcehF9dR/OUL9UdjXsP31lW6H4IB3PD37sAt6zm9bXdzR0Ttt6rdX8MQej9oP/6H/42IuHiu5eiePYeLUbXijR80VPn7xdDea65/7kjMXL1t2Sxf8cWA5A4j7OLpZzd9f+OZqKja0PTktFJPw6jW9c6uxZuPXH01d/mq1RufXDTDl+4wtJ7Tz/7ziydiVtOaFfPuLvUwjFZyhxHU1b5v5T9t2X82Kuavbdm0zKkdhjbx3gVbV82OiOj6Xcs7J/fu3LB357Qlq5p2PTWr7Hr/ly+rzv0/+f7GMzGv8Qe+1oshyB1GSHfbvk212491xJTqpzft+c6CL95jDNcom1m3buaVn9dFdBUPNK5r2ruz4fzl5tb6Sh9ScK3i4Rcaf9lZ8c3Ne5ZVlnoWRjWXKjMCeoq7nlv28PZjHeULmv5l3+EGrcOtKCvU7XpmRUXEiVcOtF4s9TSMPl2ndtRvPtRx34pdDQu+erG769N/3ZciIi5f+uiTlz2lHpRRwNkdhlvP6Wef+f7Gts6K+WtbnlnhaUfcjomz59dH87ZobTu7odbRO5/T0fL67hMR8fvmJ55qHmD/W00z32qKiGjY3f/0rDs7G6OO3GF49Z34+fMb2zorvrn5+DM1HijLMJk60QlCrlH2tbnVcwba8X9nW8+ci/JC9QNTIyI8Fx25wzA7e7DpZ+1RvmLP97QOw+DKNzbF3Kr7Sj0Ko05FbePLtQPuObN73Hd3xOyGPZ6IzlWu3WE4dfz2VEtEzK6c6XZQbkr7vvWH27suf25bV/HAyueaOyLmNdZUOz4HboOzOwyn8x8UIyKObrp34aaB37Fw83nHW1zrcve2zSu2bS9UP7Kg9v4pEZ3vvn3sjbZiR0Th8S1uugFuk9xhOPX2tJd6BMam6XO3Lj609XCx9WCx9eq2isKCdSvWblxc8KU7wG0a19/f/8Vtb54qxSSMBY8NeFngVVYOg7nBlXO5r6vn0kcdv+ma9FBh0oQyV5jidw635pqV4+wOMGrcNb5s0viyB+eWeg4gG5cqAwDJyR0AIDm5AwAkJ3cAgOTkDgCQnNwBAJKTOwBAcnIHAEhO7gAAyckdACA5uQMAJCd3AIDk5A4AkJzcAQCSkzsAQHJyBwBITu4AAMnJHQAgObkDACQndwCA5OQOAJCc3AEAkpM7AEBycgcASE7uAADJyR0AIDm5AwAkJ3cAgOTkDgCQnNwBAJKTOwBAcnIHAEhO7gAAyckdACA5uQMAJCd3AIDk5A4AkJzcAQCSkzsAQHJyBwBITu4AAMnJHQAgObkDACQndwCA5OQOAJCc3AEAkpM7AEBycgcASE7uAADJyR0AIDm5AwAkJ3cAgOTkDgCQnNwBAJKTOwBAcnIHAEhO7gAAyckdACA5uQMAJCd3AIDk5A4AkJzcAQCSkzsAQHJyBwBITu4AAMnJHQAgObkDACQndwCA5OQOAJCc3AEAkpM7AEBycgcASE7uAADJyR0AIDm5AwAkJ3cAgOTkDgCQnNwBAJKTOwBAcnIHAEhO7gAAyckdACA5uQMAJCd3AIDk5A4AkJzcAQCSkzsAQHJyBwBITu4AAMnJHQAgObkDACQndwCA5OQOAJCc3AEAkpM7AEBycgcASE7uAADJyR0AIDm5AwAkJ3cAgOTkDgCQnNwBAJKTOwBAcnIHAEhO7gAAyckdACA5uQMAJCd3AIDk5A4AkJzcAQCSkzsAQHJyBwBITu4AAMnJHQAgObkDACQndwCA5OQOAJCc3AEAkpM7AEBycgcASE7uAADJyR0AIDm5AwAkN66/v7/UMwAAjCBndwCA5OQOAJCc3AEAkpM7AEBycgcASE7uAADJyR0AIDm5AwAkJ3cAgOTkDgCQnNwBAJKTOwBAcnIHAEhO7gAAyX1lgG1vnrrjYzBGPDZnqL1WDoOxcrg1Q68cuGHO7gAAyckdACA5uQMAJCd3AIDk5A4AkNxAd2Zd1Xuxu3fAHeMnl40fmXFI5nJfsfirYndEREyY+vCDBSuHgfV0d10e+h0TyiZZPcAtGjx3+k5ufPK72wbas2TTodcWTxmxkcihu+3gi+tfOdB64U83rj5+tGFeqSZiFDuxr3r+7iHfsXDz+R/XVNyhcYBsBs+djzuLEVFeqH5g6hf2FO4e0ZFI4Nz+51cvPXguYlptXc2SOXMKca7t16dfe6vUczFaTZw0t3qQL1jpOX/yxNmoemB62Z0dCchk8Nz55MTy7IY9jqi4OX1tezYuPXguZja80bS6tvzK1upH69atKulcjGJVS14+vGSgHT0n19efPFG+rKlu1sQ7PRSQx+CXKl84t/8OzkEe773a+MrpiEV7fvRZ68CtaXt9x7YLMe9v6mrvKfUowFh2vTuzHpju1A43o6/1SPOJiKpVK5dbOtymDw41bT8d5Suanqws9SjA2DZo7nT8sXgn5yCJvl+17OmMmNv4qL9P3Ka+Eweb90fUNiyrdr0gcHuGuHbnUkQsqXAHFjfj9+2tEVE+5+HpERG9Hxfb3v+wJ/688I1CwV3E3JQPWrfubo/yFesWTyv1KMCYN2junL9wLiL2P1c37rlPNkybt3BBfd3KxioBxKA6/tDeFhGzp93b0779+Q1rjp77dFdh4YbX1i+rmlS64RhT2g4374+o+naNUzvA7Rv0w6zenvbPbzh34ui+Nd+reeD5Iz7lYjA9fZciIsq73/jJ2jW/LTQ+vXbrqrVbn1pUiCge3fLwht1tfaUekTHh4yPbd7ZH1G183KeiwDAY9OzOvKdP9j/92cvej9v3N7+4bt/J4sEN9X/R3Fpf6aZQrtXRcSQi4uiuZ+esPvOvdTOuHpev+9ah+u9u2ntmx8bDNW887rMJrqN4/MCuiIr6v3ZDFjAsbvSZWRPvqVze+ML+hlkRceKVA60XR3IoxroLD/3wO5+1TkRERc36b1dGRMvhk84Ocj3t+187FjFlzYK5DquAYXFTjwgdP6/ub1dGRLS2nR2ZcRjjCtMXRUTMWVQ9/Yu7qmZXR0Sc6uy400Mx1pw5tvW9iAdX1M4s9SRAFjf5RPR7phYiIjrjOg/z40tq4t1TIyLunlDqQRi7+lqPvdoRUfVXc6tKPQqQxk3mTl/vRxERlRPdU8xAyu6vrI6It9qL116SfPmTq5jDxxMMpe9XrQc7Iyrr57hIGRg2N5c7XW//x7aIKF9Qdd/IjMNYN33u8kci4uD+U92f39HX+l8HIqLi8VkzSjEXY8Z7p3ddiCivnv9gqScBEhksd4oth9u7Pv+JVcfbO5b+5EBE1DbUVTu7w8CmLa1bVhGd27du2fsnF+l0ndq1cU9nxKz1i1x8ylDaft3aERGPVspiYBgNdiP6xbbNDU9sL1Q/sqD2/ikRne/+Z+uuM+ciYt6SF1560o3EDKps/srtjx9bevBQ/VPv7Kmrqb43iu8cee14sSOmLN/UtM4hO0PpLP62PSKqv1EoK/UoQCaD5c6UwuJCxeFi68Fi69VNFYWaNQ0NjY/6NcTQpiz5QfPx+7esfPVQy4HdLRERUVGo2fqPG9bNmlzi0Rjtzr37y4iIefc7pgKG07j+/v4vbnvz1JUf+rq7+vrO//793vKHCpMmlHnmEY/NGWrvpyvnE5f7uj4+++6FCTMqplo8X3Y3tXLgU0OvHLhhgz8iNCLGTy4bH2UzPSSLW3LX+LLywrzyUo8BwJfeTd6IDgAw1sgdACA5uQMAJCd3AIDk5A4AkJzcAQCSkzsAQHJyBwBITu4AAMnJHQAgObkDACQndwCA5OQOAJCc3AEAkpM7AEBycgcASE7uAADJyR0AIDm5AwAkJ3cAgOTkDgCQnNwBAJKTOwBAcnIHAEhO7gAAyckdACA5uQMAJCd3AIDk5A4AkJzcAQCSkzsAQHJyBwBITu4AAMnJHQAgObkDACQndwCA5OQOAJCc3AEAkpM7AEBycgcASE7uAADJyR0AIDm5AwAkJ3cAgOTkDgCQnNwBAJKTOwBAcnIHAEhO7gAAyckdACA5uQMAJCd3AIDk5A4AkJzcAQCSkzsAQHJyBwBITu4AAMnJHQAgObkDACQndwCA5OQOAJCc3AEAkpM7AEBycgcASE7uAADJyR0AIDm5AwAkJ3cAgOTkDgCQnNwBAJKTOwBAcnIHAEhO7gAAyckdACA5uQMAJCd3AIDk5A4AkJzcAQCSkzsAQHJyBwBITu4AAMnJHQAgObkDACQndwCA5OQOAJCc3AEAkpM7AEBycgcASE7uAADJyR0AIDm5AwAkJ3cAgOTkDgCQnNwBAJKTOwBAcnIHAEhO7gAAyckdACA5uQMAJCd3AIDk5A4AkJzcAQCSkzsAQHJyBwBITu4AAMnJHQAgObkDACQndwCA5OQOAJCc3AEAkpM7AEBycgcASE7uAADJyR0AIDm5AwAkJ3cAgOTkDgCQnNwBAJKTOwBAcnIHAEhO7gAAyckdACA5uQMAJDeuv7+/1DMAAIwgZ3cAgOTkDgCQnNwBAJKTOwBAcnIHAEhO7gAAyckdACC5/weBCGcU7CJfRAAAAABJRU5ErkJggg==" alt="image-20220515111311217"></td></tr></tbody></table><p>åœºæ™¯ä¹ï¼šgrid ç½‘æ ¼ä¸­çš„å“åº”å¼æ–­è¡Œæ•ˆæœçš„å¤„ç†</p><p>å½“æˆ‘ä»¬æƒ³å°½å¯èƒ½å¤šçš„åœ¨ä¸€è¡Œæ˜¾ç¤ºå­é¡¹çš„ä¸ªæ•°æ—¶ï¼Œæœ‰å¯èƒ½ä¼šå‡ºç°å­é¡¹ä¸ªæ•°ä¸æ»¡ä¸€è¡Œçš„æƒ…å†µã€‚é‚£è¿™ä¸ªæ—¶å€™åˆ©ç”¨ç½‘æ ¼å¸ƒå±€ï¼Œä½¿ç”¨ auto-fill å’Œ auto-fit å°±ä¼šæ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„æ•ˆæœã€‚</p><ul><li>auto-fill ï¼šç½‘æ ¼çš„æœ€å¤§é‡å¤æ¬¡æ•°ï¼ˆæ­£æ•´æ•°ï¼‰ï¼Œå¦‚æœæœ‰å‰©ä½™ç©ºé—´ï¼Œåˆ™ä¼šä¿ç•™å‰©ä½™ç©ºé—´ï¼Œè€Œä¸æ”¹å˜ç½‘æ ¼é¡¹ç›®çš„å®½åº¦ã€‚</li><li>auto-fitï¼šç½‘æ ¼çš„æœ€å¤§é‡å¤æ¬¡æ•°ï¼ˆæ­£æ•´æ•°ï¼‰ï¼Œå¦‚æœæœ‰å‰©ä½™ç©ºé—´ï¼Œç½‘æ ¼é¡¹å¹³åˆ†å‰©ä½™ç©ºé—´æ¥æ‰©å±•è‡ªå·±çš„å®½åº¦ã€‚</li></ul><p>ä»¥ä¸‹æƒ…å†µåªä¼šå‡ºç°åœ¨å­é¡¹å†…å®¹ä¸èƒ½å æ»¡ä¸€è¡Œæ—¶ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸‡ä¸€å†…å®¹ä¸èƒ½å æ»¡ä¸€è¡Œï¼Œåˆ™ä½¿ç”¨ auto-fill å°±ä¼šå‡ºç°ç©ºç™½é—®é¢˜ã€‚æˆ‘ä»¬æŠŠ auto-fill æ”¹æˆ auto-fit å°±è§£å†³äº†è¿™ä¸ªé—®é¢˜</p><hr><blockquote><p>æœ¬ç¯‡æ–‡ç« å‡è½¬è½½è‡ªarryè€å¸ˆçš„<a href="https://www.arryblog.com/interview/htmlcss/html-html5.html#%E9%AB%98%E9%A2%91%E9%87%8D%E7%82%B9">æ•™ç¨‹</a>ï¼Œä»…ä¾›æœ¬äººå­¦ä¹ ä½¿ç”¨ã€‚</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;CSS-4ç§ä¹¦å†™ä½ç½®ç‰¹ç‚¹ä¸åŒºåˆ«&quot;&gt;CSS 4ç§ä¹¦å†™ä½ç½®ç‰¹ç‚¹ä¸åŒºåˆ«&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:left&quot;&gt;å¼•å…¥æ–¹å¼&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;ä¹¦å†™ä½ç½®&lt;/t</summary>
      
    
    
    
    <category term="å‰ç«¯ğŸ’¥" scheme="https://blog.cilicili.xyz/categories/%E5%89%8D%E7%AB%AF%F0%9F%92%A5/"/>
    
    
    <category term="CSS" scheme="https://blog.cilicili.xyz/tags/CSS/"/>
    
  </entry>
  
</feed>
